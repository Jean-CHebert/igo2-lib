{"version":3,"sources":["demo/src/environments/environment.ts","dist/utils/__ivy_ngcc__/fesm2015/igo2-utils.js","dist/core/__ivy_ngcc__/fesm2015/igo2-core.js","dist/common/__ivy_ngcc__/fesm2015/igo2-common.js","demo/src/app/core/home/home-routing.module.ts","demo/src/app/core/home/home.component.ts","demo/src/app/core/home/home.component.html","demo/src/app/core/home/home.module.ts","demo/src/app/core/activity/activity-routing.module.ts","demo/src/app/core/activity/activity.component.ts","demo/src/app/core/activity/activity.component.html","demo/src/app/core/activity/activity.module.ts","demo/src/app/core/config/config-routing.module.ts","demo/src/app/core/config/config.component.ts","demo/src/app/core/config/config.component.html","demo/src/app/core/config/config.module.ts","demo/src/app/core/language/language-routing.module.ts","demo/src/app/core/language/language.component.ts","demo/src/app/core/language/language.component.html","demo/src/app/core/language/language.module.ts","demo/src/app/core/media/media-routing.module.ts","demo/src/app/core/media/media.component.ts","demo/src/app/core/media/media.component.html","demo/src/app/core/media/media.module.ts","demo/src/app/core/message/message-routing.module.ts","demo/src/app/core/message/message.component.ts","demo/src/app/core/message/message.component.html","demo/src/app/core/message/message.module.ts","demo/src/app/core/request/request-routing.module.ts","demo/src/app/core/request/request.component.ts","demo/src/app/core/request/request.component.html","demo/src/app/core/request/request.module.ts","demo/src/app/common/action/action.component.html","demo/src/app/common/action/action-routing.module.ts","demo/src/app/common/action/action.component.ts","demo/src/app/common/action/action.module.ts","demo/src/app/common/dynamic-component/dynamic-component.component.ts","demo/src/app/common/dynamic-component/dynamic-component-routing.module.ts","demo/src/app/common/dynamic-component/dynamic-component.component.html","demo/src/app/common/dynamic-component/dynamic-component.module.ts","demo/src/app/common/entity-table/entity-table-routing.module.ts","demo/src/app/common/entity-table/entity-table.component.ts","demo/src/app/common/entity-table/entity-table.component.html","demo/src/app/common/entity-table/entity-table.module.ts","demo/src/app/common/entity-selector/entity-selector.component.html","demo/src/app/common/entity-selector/entity-selector-routing.module.ts","demo/src/app/common/entity-selector/entity-selector.component.ts","demo/src/app/common/entity-selector/entity-selector.module.ts","demo/src/app/common/form/form.component.html","demo/src/app/common/form/form-routing.module.ts","demo/src/app/common/form/form.component.ts","demo/src/app/common/form/form.module.ts","demo/src/app/common/table/table-routing.module.ts","demo/src/app/common/table/table.component.ts","demo/src/app/common/table/table.component.html","demo/src/app/common/table/table.module.ts","demo/src/app/common/tool/tool.component.html","demo/src/app/common/tool/tool-routing.module.ts","demo/src/app/common/tool/tool.component.ts","demo/src/app/common/tool/tool.module.ts","demo/src/app/common/widget/widget.component.ts","demo/src/app/common/widget/widget-routing.module.ts","demo/src/app/common/widget/widget.component.html","demo/src/app/common/widget/widget.module.ts","dist/auth/__ivy_ngcc__/fesm2015/igo2-auth.js","demo/src/app/auth/auth-form/auth-form-routing.module.ts","demo/src/app/auth/auth-form/auth-form.component.ts","demo/src/app/auth/auth-form/auth-form.component.html","demo/src/app/auth/auth-form/auth-form.module.ts","dist/geo/__ivy_ngcc__/fesm2015/igo2-geo.js","demo/src/app/geo/simple-map/simple-map.component.html","demo/src/app/geo/simple-map/simple-map-routing.module.ts","demo/src/app/geo/simple-map/simple-map.component.ts","demo/src/app/geo/simple-map/simple-map.module.ts","demo/src/app/geo/layer/layer.component.html","demo/src/app/geo/layer/layer-routing.module.ts","demo/src/app/geo/layer/layer.component.ts","demo/src/app/geo/layer/layer.module.ts","demo/src/app/geo/legend/legend-routing.module.ts","demo/src/app/geo/legend/legend.component.ts","demo/src/app/geo/legend/legend.component.html","demo/src/app/geo/legend/legend.module.ts","demo/src/app/geo/overlay/overlay-routing.module.ts","demo/src/app/geo/overlay/overlay.component.ts","demo/src/app/geo/overlay/overlay.component.html","demo/src/app/geo/overlay/overlay.module.ts","demo/src/app/geo/geometry/geometry.component.html","demo/src/app/geo/geometry/geometry-routing.module.ts","demo/src/app/geo/geometry/geometry.component.ts","demo/src/app/geo/geometry/geometry.module.ts","demo/src/app/geo/feature/feature-routing.module.ts","demo/src/app/geo/feature/feature.component.ts","demo/src/app/geo/feature/feature.component.html","demo/src/app/geo/feature/feature.module.ts","demo/src/app/geo/measure/measure-routing.module.ts","demo/src/app/geo/measure/measure.component.ts","demo/src/app/geo/measure/measure.component.html","demo/src/app/geo/measure/measure.module.ts","demo/src/app/geo/query/query.component.html","demo/src/app/geo/query/query-routing.module.ts","demo/src/app/geo/query/query.component.ts","demo/src/app/geo/query/query.module.ts","demo/src/app/geo/catalog/catalog-routing.module.ts","demo/src/app/geo/catalog/catalog.component.ts","demo/src/app/geo/catalog/catalog.component.html","demo/src/app/geo/catalog/catalog.module.ts","dist/context/__ivy_ngcc__/fesm2015/igo2-context.js","dist/integration/__ivy_ngcc__/fesm2015/igo2-integration.js","demo/src/app/geo/search/search.component.html","demo/src/app/geo/search/search-routing.module.ts","demo/src/app/geo/search/search.component.ts","demo/src/app/geo/search/search.module.ts","demo/src/app/geo/print/print-routing.module.ts","demo/src/app/geo/print/print.component.ts","demo/src/app/geo/print/print.component.html","demo/src/app/geo/print/print.module.ts","demo/src/app/geo/import-export/import-export-routing.module.ts","demo/src/app/geo/import-export/import-export.component.ts","demo/src/app/geo/import-export/import-export.component.html","demo/src/app/geo/import-export/import-export.module.ts","demo/src/app/geo/directions/directions-routing.module.ts","demo/src/app/geo/directions/directions.component.ts","demo/src/app/geo/directions/directions.component.html","demo/src/app/geo/directions/directions.module.ts","demo/src/app/geo/time-filter/time-filter-routing.module.ts","demo/src/app/geo/time-filter/time-filter.component.ts","demo/src/app/geo/time-filter/time-filter.component.html","demo/src/app/geo/time-filter/time-filter.module.ts","demo/src/app/geo/ogc-filter/ogc-filter-routing.module.ts","demo/src/app/geo/ogc-filter/ogc-filter.component.ts","demo/src/app/geo/ogc-filter/ogc-filter.component.html","demo/src/app/geo/ogc-filter/ogc-filter.module.ts","demo/src/app/geo/spatial-filter/spatial-filter.component.html","demo/src/app/geo/spatial-filter/spatial-filter-routing.module.ts","demo/src/app/geo/spatial-filter/spatial-filter.component.ts","demo/src/app/geo/spatial-filter/spatial-filter.module.ts","demo/src/app/geo/workspace/workspace.component.html","demo/src/app/geo/workspace/workspace-routing.module.ts","demo/src/app/geo/workspace/workspace.component.ts","demo/src/app/geo/workspace/workspace.module.ts","demo/src/app/context/context/context.component.html","demo/src/app/context/context/context-routing.module.ts","demo/src/app/context/context/context.component.ts","demo/src/app/context/context/context.module.ts","demo/src/app/app-routing.module.ts","demo/src/app/app.component.ts","demo/src/app/app.component.html","demo/src/app/app.module.ts","demo/src/main.ts","node_modules/moment/locale sync ^\\.\\/.*$","demo/src/$_lazy_route_resource lazy namespace object","dist/core/__ivy_ngcc__/locale sync ^\\.\\/.*\\.json$"],"names":["environment","production","igo","projections","code","alias","def","extent","auth","intern","enabled","allowAnonymous","interactiveTour","tourInMobile","importExport","url","language","prefix","catalog","sources","id","title","queryFormat","html","queryHtmlTarget","count","regFilters","tooltipType","searchSources","nominatim","icherche","searchUrl","order","params","limit","coordinatesreverse","showInPointerSummary","icherchereverse","ilayer","Base64","s","i","charCodeAt","this","ALPHA","indexOf","charAt","b10","pads","imax","length","x","String","PADCHAR","getByte64","push","fromCharCode","join","getByte","userAgent","window","navigator","Clipboard","element","successful","textArea","createTextArea","selectText","copyTextToClipboard","destroyTextArea","text","document","createElement","value","body","appendChild","removeChild","getOSName","oldContentEditable","contentEditable","oldReadOnly","readOnly","range","createRange","selection","getSelection","contenteditable","readonly","selectNodeContents","removeAllRanges","addRange","setSelectionRange","select","compareVersion","execCommand","ObjectUtils","obj","key","keysArray","replace","split","current","shift","item","Array","isArray","Date","target","source","ignoreUndefined","output","Object","assign","isObject","keys","filter","undefined","forEach","mergeDeep","src","prop","hasOwnProperty","copyDeep","summaryCapitalizeObject","capitalizeObject","upperCaseCount","property","upperCaseProperty","toUpperCase","capitalizedProperty","capitalizedPropertyObject","singlePossibility","paramClosestToLowercase","f","toLowerCase","reduce","prev","y","removeUndefined","map","o","removeNull","a","b","direction","nullsFirst","nullScore","ax","bx","_","$1","$2","Infinity","an","bn","nn","localeCompare","obj1","obj2","obj1Props","getOwnPropertyNames","obj2Props","_obj","strEnum","res","create","S4","Math","random","toString","substring","uuid","SubjectStatus","status$","Subject","_status","next","callback","scope","watch","status$$","pipe","distinctUntilChanged","subscribe","status","handleStatusChange","call","unwatch","unsubscribe","Waiting","_c0","a0","closeIcon","ActivityService","counter$","BehaviorSubject","ids","index","splice","ɵfac","t","ɵprov","factory","token","providedIn","ActivityInterceptor","activityService","req","activity","headers","get","actReq","clone","delete","handle","register","finalize","unregister","IgoActivityModule","ngModule","providers","provide","useClass","multi","ɵmod","type","ɵinj","imports","lib","releaseDate","ConfigService","injector","config","resolve","options","baseConfig","default","path","http","Promise","_reject","catchError","error","console","log","throwError","configResponse","version","CONFIG_OPTIONS","provideConfigOptions","useValue","configFactory","configService","load","IgoConfigModule","useFactory","deps","suffix","lang","translation","igoLocale$","getConfig","appLocale$","combineLatest","translations","defaultLanguageLoader","IgoMissingTranslationHandler","translateService","langs","Error","substr","IgoLanguageModule","forRoot","missingTranslationHandler","MessageCenterComponent","_options","defaultOptions","ɵcmp","selectors","inputs","decls","vars","consts","template","rf","ctx","hasCloseIcon","directives","styles","timeOut","showProgressBar","pauseOnHover","clickToClose","maxLength","maxStack","preventDuplicates","IgoMessageModule","MessageType","MessageService","notificationService","messages$","httpError","caught","message","notification","concat","handleTemplate","icon","theClass","addIcon","SUCCESS","ERROR","INFO","ALERT","remove","LanguageService","translate","getBrowserLang","getLanguage","setDefaultLang","match","use","reloadLang","ErrorInterceptor","messageService","errorContainer","handleError","handleCaughtError","handleUncaughtError","errorObj","statusText","toDisplay","instant","IgoErrorModule","parentModule","ROUTE_SERVICE_OPTIONS","RouteService","route","centerKey","zoomKey","projectionKey","contextKey","searchKey","visibleOnLayersKey","visibleOffLayersKey","directionsCoordKey","toolKey","wmsUrlKey","wmsLayersKey","wmtsUrlKey","wmtsLayersKey","vectorKey","queryParams","Media","MediaOrientation","MediaService","breakpointObserver","media$","orientation$","observe","HandsetLandscape","matches","Mobile","Landscape","HandsetPortrait","Portrait","TabletLandscape","Tablet","TabletPortrait","WebLandscape","Desktop","WebPortrait","documentElement","getMedia","StorageScope","StorageServiceEventEnum","StorageService","storageChange$","SESSION","sessionStorage","getItem","LOCAL","localStorage","JSON","parse","_a","previousValue","setItem","stringify","currentValue","event","MODIFIED","ADDED","removeItem","REMOVED","NetworkService","stateChangeEventEmitter","state","connection","onLine","checkNetworkState","onlineSubscription","fromEvent","info","emitEvent","offlineSubscription","emit","e","reportState","debounceTime","startWith","EntitySelectorComponent_mat_option_3_Template","ctx_r0","emptyValue","emptyText","EntitySelectorComponent_mat_option_4_Template","ctx_r1","multiSelectValue","multiText$","EntitySelectorComponent_ng_template_5_Template","record_r3","$implicit","ctx_r2","entity","titleAccessor","EntityTableComponent_th_3_ng_container_1_ng_container_1_Template","_r10","$event","onToggleRows","checked","selectionState_r8","ngIf","ctx_r7","entityTableSelectionState","All","Some","EntityTableComponent_th_3_ng_container_1_Template","ctx_r6","selectionState$","EntityTableComponent_th_3_Template","selectMany","EntityTableComponent_td_4_Template","_r13","shiftKey","preventDefault","record_r11","ctx_r14","onShiftToggleRow","rowIsSelected","stopPropagation","onToggleRow","EntityTableComponent_ng_container_5_ng_container_1_th_1_Template","column_r16","EntityTableComponent_ng_container_5_ng_container_1_Template","EntityTableComponent_ng_container_5_ng_container_2_th_1_Template","EntityTableComponent_ng_container_5_ng_container_2_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_td_1_Template","record_r31","ctx_r30","getCellClass","getValue","EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_td_1_Template","record_r34","ctx_r33","EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_td_1_Template","record_r37","ctx_r36","EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_td_1_Template","record_r40","ctx_r39","EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_Template","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_1_Template","_r50","button_r45","record_r43","onButtonClick","click","color","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_2_Template","_r55","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_Template","style","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_Template","ctx_r42","EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_Template","EntityTableComponent_ng_container_5_ng_container_3_Template","columnRenderer_r24","ctx_r19","entityTableColumnRenderer","Default","HTML","UnsanitizedHTML","Icon","ButtonGroup","EntityTableComponent_ng_container_5_Template","name","columnIsSortable","getColumnRenderer","EntityTableComponent_tr_6_Template","ctx_r3","getHeaderClass","EntityTableComponent_tr_7_Template","_r61","record_r59","onRowSelect","onRowClick","ctx_r4","scrollBehavior","getRowClass","EntityTableComponent_igo_entity_table_paginator_8_Template","_r64","paginatorChange","ctx_r5","store","paginatorOptions","entitySortChange$","ActionbarComponent_mat_list_0_div_1_Template","_r8","scrollUp","ActionbarComponent_mat_list_0_igo_actionbar_item_2_Template","ctx_r9","onTriggerAction","toggleCollapseAction","view","empty","ActionbarComponent_mat_list_0_3_ng_template_0_Template","_r15","action_r13","ctx_r12","withTitle","withIcon","withTooltip","disabled","ActionbarComponent_mat_list_0_3_Template","all$","ActionbarComponent_mat_list_0_div_4_Template","_r17","scrollDown","ActionbarComponent_mat_list_0_Template","heightCondition","positionConditionTop","isDesktop","withToggleButton","collapsed","positionConditionLow","ActionbarComponent_div_1_ng_template_6_Template","_r22","action_r20","ActionbarComponent_div_1_Template","_r18","iconColor","overlayClass","xPosition","yPosition","ActionbarComponent_mat_card_2_ng_template_2_Template","_r26","action_r24","ctx_r23","ActionbarComponent_mat_card_2_Template","ActionbarItemComponent_mat_list_item_0_button_4_mat_icon_2_Template","icon$","ActionbarItemComponent_mat_list_item_0_button_4_Template","disabled$","ActionbarItemComponent_mat_list_item_0_h4_5_Template","ActionbarItemComponent_mat_list_item_0_Template","_r6","onClick","tooltip$","ngClass$","ActionbarItemComponent_mat_list_item_1_mat_checkbox_4_Template","_r9","action","handler","checkCondition$","ActionbarItemComponent_mat_list_item_1_Template","_c1","_c2","DynamicOutletComponent_ng_template_0_Template","_c6","_c7","_c8","_c9","FormFieldComponent_ng_container_0_Template","getFieldComponent","getFieldInputs","getFieldSubscribers","FormGroupComponent_div_0_div_1_Template","field_r3","getFieldNgClass","FormGroupComponent_div_0_Template","group","fields","FormGroupComponent_mat_error_3_Template","getErrorMessage","InteractiveTourComponent_button_0_Template","_r2","startInteractiveTour","getClass","disabledTourButton","discoverTitleInLocale$","_c12","PanelComponent_div_0_Template","_c13","_c14","_c15","a1","_c16","TableComponent_div_1_Template","TableComponent_th_6_Template","_r11","ctx_r10","masterToggle","hasValue","isAllSelected","TableComponent_td_7_Template","_r14","row_r12","ctx_r15","toggle","isSelected","TableComponent_ng_container_8_ng_container_1_th_1_Template","TableComponent_ng_container_8_ng_container_1_Template","TableComponent_ng_container_8_ng_container_2_th_1_Template","TableComponent_ng_container_8_ng_container_2_Template","_c17","TableComponent_ng_container_8_ng_container_3_td_1_Template","row_r27","ctx_r26","model","cellClassFunc","TableComponent_ng_container_8_ng_container_3_Template","TableComponent_ng_container_8_ng_template_4_td_0_Template","row_r30","ctx_r29","TableComponent_ng_container_8_ng_template_4_Template","TableComponent_ng_container_8_Template","_r20","sortable","TableComponent_th_10_Template","TableComponent_td_11_button_1_Template","_r36","action_r34","row_r32","handleClickAction","getActionColor","TableComponent_td_11_Template","actions","TableComponent_tr_12_Template","TableComponent_tr_13_Template","_r40","row_r38","ctx_r8","rowClassFunc","ToolboxComponent_igo_actionbar_0_Template","actionStore","toolbarWithTitle$","_c18","ToolboxComponent_div_2_Template","_r4","onAnimationStart","onAnimationComplete","tool_r2","animate","animation$","component","getToolInputs","WidgetOutletComponent_igo_dynamic_outlet_0_Template","widget","getEffectiveSubscribers","WorkspaceWidgetOutletComponent_ng_container_0_Template","_r3","widget_r1","onWidgetCancel","onWidgetComplete","widgetInputs$","widgetSubscribers$","EntityTableColumnRenderer","EntityTableScrollBehavior","EntityTableSelectionState","getEntityProperty","safeObject","getEntityId","meta","idProperty","getEntityTitle","titleProperty","getEntityIcon","iconProperty","Map","change$","ReplaySubject","getKey","size","clear","setMany","entities","set","from","changes","exclusive","updateMany","updateManyExclusive","reverseMany","currentState","acc","reversedChanges","reverseChanges","allKeys","getAllKeys","Set","some","changeKey","entries","bunch","storeKeys","source$","values$","lifted","joins","filter$","filters$","filterIndex","sort$","getKey$","count$","empty$","_index","clause","find","values","sort","values$$","observables$","liftJoinedSource","liftSource","skip","_values","filters","processValues","setValues","sources$","joinData","computeJoinedValue","joinIndex","slice","filterValues","sortValues","clauses","every","v1","v2","naturalCompare","valueAccessor","generateIndex","entities$","_pristine","strategies","getProperty","createStateManager","createDataView","stateView","createStateView","lift","pristine","updateCount","softClear","destroy","insertMany","deleteMany","strategy","activate","_strategy","constructor","bindStore","unbindStore","getStrategyOfType","deactivate","currentRecord","statesAreTheSame","revision","ref","createIndex","record","newState","currentStateIsEmpty","newStateIsEmpty","cdRef","innerStateIndex","setChangeDetector","setStore","teardownObservers","setupObservers","detectChanges","entities$$","onEntitiesChange","state$$","onStateChange","changesDetected","storeIndex","innerIndex","storeValue","innerValue","objectsAreEquivalent","stores","active$","active","doDeactivate","doActivate","EntityStoreFilterCustomFuncStrategy","super","filterStore","unfilterStore","filterAll","unfilterAll","addFilter","filterClauseFunc","filterId","removeFilter","EntityStoreFilterSelectionStrategy","arguments","has","selected","EntitySelectorComponent","selected$","multiAllText","multiNoneText","selectedChange","watcher","selected$$","manyBy$","records","onSelectFromStore","multiSelect","_value","all","updateAll","updateMultiToggleWithEntities","placeholder","outputs","onSelectionChange","pipes","changeDetection","EntityTableComponent","Auto","sortNullsFirst","withPaginator","entityClick","entitySelectChange","entitySortChange","dataSource","_paginator","paginator","columns","column","visible","selectionCheckbox","fixedHeader","handleDatasource","unsubscribeStore","selection$$","firstSelected","firstSelectedStateviewPosition","pageMax","pageSize","pageIndex","pageToReach","floor","computeSelectionState","dataSource$$","data","c","lastRecordCheckedKey","update","added","selectNode","stopImmediatePropagation","recordIndex","lastRecordChecked","indexes","min","max","_record","selectedRecords","selectionCount","None","renderer","func","headerClassFunc","Function","cls","tableFunc","columnFunc","clickFunc","features","onSort","getTableClass","getTrackByFunction","EntityTablePaginatorComponent","languageService","mediaService","hidePageSize","pageSizeOptions","showFirstLastButtons","paginationLabelTranslation$$","rangeLabel","page","of","label","startIndex","unsubscribeAll","count$$","emitPaginator","entitySortChange$$","firstPage","initPaginatorOptions","translateLabels","_b","_c","_d","_e","_f","isMobile","_intl","firstPageLabel","getRangeLabel","itemsPerPageLabel","lastPageLabel","nextPageLabel","previousPageLabel","sub","viewQuery","_t","first","ActionbarMode","ActionStore","ActionbarComponent","overlay","elRef","actionbarMode","heightCondition$","positionConditionTop$","positionConditionLow$","mode","Dock","horizontal","scrollActive","_overlayClass","el","nativeElement","clientHeight","scrollHeight","scrollTop","args","scrollBy","hostVars","hostBindings","withTitleClass","withIconClass","horizontalClass","Overlay","Context","ActionbarItemComponent","noDisplay$","trigger","ngClass","ngClass$$","updateNgClass","isObservable","icon$$","updateIcon","checkCondition","checkCondition$$","updateCheckCondition","tooltip","tooltip$$","updateTooltip","availability","availability$$","available","disabled$$","display","display$$","noDisplay","noDisplay$$","checkbox","IgoActionbarModule","IgoActionModule","IgoBadgeIconDirective","matIconRegistry","hidden","inverseColor","inheritColor","getNamedSvgIcon","svgObj","svg","updateSvg","updateHidden","updateDisabled","updateColor","querySelector","badge","alignItems","justifyContent","innerHTML","background","getComputedStyle","getPropertyValue","originalColor","ɵdir","igoMatBadgeIcon","matBadgeHidden","matBadgeDisabled","igoMatBadgeInverseColor","igoMatBadgeInheritColor","IgoMatBadgeIconModule","ClickoutDirective","clickout","contains","handleMouseClick","IgoClickoutModule","CollapseDirective","_collapsed","_target","collapseTarget","expandTarget","addClass","removeClass","CollapsibleComponent","_title","ngContentSelectors","_r0","IgoCollapsibleModule","ConfirmDialogComponent","dialogRef","close","confirmMessage","ConfirmDialogService","dialog","open","disableClose","componentInstance","afterClosed","IgoConfirmDialogModule","ContextMenuDirective","viewContainerRef","elementRef","menuPosition","overlayRef","positionStrategy","position","flexibleConnectedTo","withPositions","originX","originY","overlayX","overlayY","scrollStrategy","scrollStrategies","attach","menuContext","clickTarget","overlayElement","take","dispose","onContextMenu","IgoContextMenuModule","SanitizeHtmlPipe","_sanitizer","v","bypassSecurityTrustHtml","ɵpipe","pure","IgoCustomHtmlModule","IgoDrapDropModule","componentFactory","subscriptions","inputs$$","subscribers","componentRef","createComponent","updateInputs","updateSubscribers","unobserveAllInputs","instance","propName","unobserveInput","inputValue","Observable","observeInput","setInputValue","onUpdateInputs","prototype","getPrototypeOf","descriptor","getOwnPropertyDescriptor","emitter","subscriber","_subscriber","observable","DynamicComponentService","resolver","componentCls","resolveComponentFactory","DynamicOutletComponent","dynamicComponentService","eq","inputsAreEquivalents","subscribersAreEquivalents","dynamicComponent","renderComponent","setTarget","IgoDynamicOutletModule","IgoDynamicComponentModule","IgoFlexibleModule","FormComponent","autocomplete","submitForm","buttons","children","formData","setData","getData","form","groups","field","updateDataWithFormField","control","setValue","reset","onSubmit","hasButtons","IgoFormFormModule","FormFieldService","FormService","formBuilder","addControl","setValidators","validator","partial","FormFieldComponent","formFieldService","fieldInputs","fieldSubscribers","getFieldByType","errors","fieldOptions","disableSwitch","formControl","required","IgoFormFieldModule","FormGroupComponent","colSpan","cols","getFieldColSpan","messages","errorMessages","IgoFormGroupModule","IgoFormModule","IgoEntitySelectorModule","StopPropagationDirective","IgoStopPropagationModule","EntityTableRowDirective","selectOnClick","highlightSelection","_selected","toggleSelected","scroll","addCls","selectedCls","highlightedCls","removeCls","scrollMode","block","inline","IgoEntityTablePaginatorModule","IgoEntityTableModule","IgoEntityModule","SecureImagePipe","activityInterceptor","responseType","switchMap","blob","observer","reader","FileReader","readAsDataURL","onloadend","result","IgoImageModule","InteractiveTourLoader","jsonURL","getPathToConfigFile","getJSON","allToursOptions","err","toolName","nameInConfigFile","InteractiveTourService","interactiveTourLoader","shepherdService","isAppHaveTour","loadConfigTour","haveTour","getTourOptionData","stepConfig","condition","buttonKind","classes","actionName","self","nbTry","checkExist","setInterval","getCurrentStep","attachTo","hide","steps","findIndex","step","removeStep","currentStepElement","getElement","querySelectorAll","classList","add","header","clearInterval","stepsArray","progress","className","innerText","insertBefore","actionConfig","getAction","executeAction","waitFor","maxTry","maxWait","shepherdSteps","on","popperOptions","modifiers","offset","beforeShowPromise","executeActionPromise","previousStep","beforeChange","beforeShow","getButtons","noBackButton","class","highlightClass","scrollTo","scrollToElement","canClickTarget","disableInteraction","when","show","onShow","onHide","defaultStepOptions","cancelIcon","getShepherdSteps","modal","confirmCancel","addSteps","tourObject","addProgress","start","activeTool$","toolbar$","activeToolHistory","tool","setToolbar","toolbar","initStore","activeTool$$","tools","getTool","deactivateTool","previous","activateTool","clearActiveToolHistory","firstBy$","setActiveTool","ToolService","toolbox","setTools","getTools","InteractiveTourComponent","interactiveTourService","toolService","tourToStart","styleButton","activeToolName","isActiveTool","isToolHaveTourConfig","getTourToStart","inMobileAndShow","isToolHaveTour","isTourDisplayInMobile","tour","startTour","showTourButton","encapsulation","IgoInteractiveTourModule","KeyValuePipe","keyValues","IgoKeyValueModule","ListItemDirective","_color","_focused","_disabled","beforeSelect","beforeFocus","beforeUnselect","beforeUnfocus","beforeDisable","beforeEnable","focus","unfocus","unselect","disable","enable","toggleFocusedClass","toggleSelectedClass","toggleDisabledClass","offsetTop","focused","focusedCls","disabledCls","ListComponent","_navigation","_selection","_selectedItem","focusedItem","_focusedItem","navigationEnabled","navigate","enableNavigation","listItems","init","listItems$$","items","toArray","igoList","getFocusedIndex","isScrolledIntoView","offsetHeight","selectedItem","navigation","getOffsetTop","elem","docViewTop","elemTop","findSelectedItem","findFocusedItem","item2","handleItemBeforeSelect","handleItemSelect","handleItemBeforeFocus","handleItemFocus","focusPrevious","focusNext","contentQueries","dirIndex","handleKeyboardEvent","disableNavigation","IgoListModule","PanelComponent","_withHeader","withHeader","IgoPanelModule","SpinnerComponent","shown$","shown","SpinnerActivityDirective","spinner","counter$$","IgoSpinnerModule","dataChange","copiedData","_database","_model","_sort","_filterChange","merge","displayDataChanges","sortChange","getFilteredData","getSortedData","filterable","propertyA","propertyB","TableActionColor","TableComponent","_hasFIlterInput","database","displayedColumns","displayed","unshift","changed","change","colorId","row","hasFilterInput","IgoTableModule","ToolboxColor","toolSlideInOut","speed","transform","ToolboxComponent","animating$","White","Grey","Primary","toolbar$$","onToolbarChange","onActiveToolChange","onAnimate","_tool","_toolbox","activeTool","toolActivated","childrenToolActivated","parent","unAnimate","animating$$","animation","classColorGrey","classColorPrimary","IgoToolboxModule","IgoToolModule","WidgetOutletComponent","baseSubscribers","cancel","onCancel","complete","onComplete","destroyWidget","baseSubscriber","IgoWidgetOutletModule","WidgetService","widgetCls","IgoWidgetModule","activeWorkspace$","workspace","deactivateWorkspace","WorkspaceSelectorComponent","activateWorkspace","onSelectedChange","getWorkspaceTitle","IgoWorkspaceSelectorModule","widget$","entityStore","deactivateWidget","WorkspaceWidgetOutletComponent","IgoWorkspaceWidgetOutletModule","IgoWorkspaceModule","AppHomeRoutingModule","forChild","AppHomeComponent","AppHomeModule","AppActivityRoutingModule","AppActivityComponent","idsActivity","pop","AppActivityModule","AppConfigRoutingModule","AppConfigComponent","configLanguage","AppConfigModule","AppLanguageRoutingModule","AppLanguageComponent","app","setLanguage","changeLanguage","AppLanguageModule","AppMediaRoutingModule","AppMediaComponent","getOrientation","isTouchScreen","AppMediaModule","AppMessageRoutingModule","AppMessageComponent","success","alert","AppMessageModule","AppRequestRoutingModule","AppRequestComponent","rep","callHttp","callHttpError","AppRequestModule","AppActionRoutingModule","AppActionComponent","added$","AppActionModule","AppSalutationComponent","AppExplanationComponent","AppDynamicComponentRoutingModule","AppDynamicComponentComponent","toggleComponent","AppDynamicComponentModule","AppEntityTableRoutingModule","AppEntityTableComponent","description","AppEntityTableModule","AppEntitySelectorRoutingModule","AppEntitySelectorComponent","AppEntitySelectorModule","AppFormRoutingModule","AppFormComponent","formService","form$","data$","submitDisabled","choices","valueChanges$$","valueChanges","valid","AppFormModule","AppTableRoutingModule","AppTableComponent","primary","showName","rows","handleSelect","AppTableModule","AppToolRoutingModule","AppToolComponent","activateSalutationTool","AppToolModule","AppSalutationWidgetComponent","AppWidgetRoutingModule","AppWidgetComponent","widgetService","AppWidgetModule","AuthFormComponent_div_0_div_1_Template","AuthFormComponent_div_0_div_2_igo_auth_google_4_Template","onLogin","AuthFormComponent_div_0_div_2_igo_auth_microsoft_5_Template","_r12","AuthFormComponent_div_0_div_2_igo_auth_facebook_6_Template","AuthFormComponent_div_0_div_2_igo_auth_intern_7_Template","_r16","AuthFormComponent_div_0_div_2_Template","google","microsoft","facebook","AuthFormComponent_div_0_div_3_Template","logout","user","AuthFormComponent_div_0_div_4_button_4_Template","_r21","home","AuthFormComponent_div_0_div_4_Template","homeRoute","AuthFormComponent_div_0_Template","logged","backgroundDisable","showLoginDiv","showAlreadyConnectedDiv","showLogoutDiv","AuthInternComponent_button_12_Template","loginAnonymous","loading","AuthInternComponent_div_13_Template","TokenService","tokenKey","jwt","decode","currentTime","getTime","exp","AuthService","tokenService","router","authenticate$","logged$","anonymous","authenticated","username","password","myHeader","append","encodePassword","loginCall","typeConnection","post","tap","isExpired","isAuthenticated","redirectUrl","loginRoute","navigateByUrl","patch","encode","isAnonymous","decodeToken","isAdmin","tokenDecoded","locale","expiredAlert","AuthFormComponent","_backgroundDisable","_hasAlreadyConnectedDiv","_hasLogoutDiv","_showAlreadyConnectedDiv","_showLogoutDiv","login","isLogoutRoute","hasAlreadyConnectedDiv","hasLogoutDiv","analyzeRoute","getName","goToRedirectUrl","logoutRoute","firstName","sourceId","events","changeEvent","currentRoute","isLoginRoute","AuthInternComponent","fb","_allowAnonymous","errorMsg","loginUser","AuthFacebookComponent","authService","appRef","appId","loadSDKFacebook","warn","FB","Event","statusChangeCallback","response","loginFacebook","authResponse","accessToken","loginWithToken","tick","getElementById","fjs","getElementsByTagName","js","onload","subscribeEvents","parentNode","AuthGoogleComponent","apiKey","clientId","loadSDKGoogle","loadPlatform","gapi","auth2","getAuthInstance","signIn","signOut","initClient","client","discoveryDocs","then","handleSignOutClick","updateTextButton","isSignedIn","listen","updateSigninStatus","loginGoogle","getToken","access_token","btn","handleClientLoad","AuthInterceptor","refreshInProgress","trustHosts","location","hostname","refreshToken","href","host","authReq","hashUser","hashStr","xhr","setRequestHeader","MSALConfigFactory","authority","redirectUri","cache","cacheLocation","MSALAngularConfigFactory","popUp","consentScopes","AuthStorageService","userIgo","preference","AuthMicrosoftComponent","broadcastService","msalService","checkAccount","loginPopup","acquireTokenSilent","scopes","loginMicrosoft","IgoAuthModule","AppAuthFormRoutingModule","AppAuthFormComponent","AppAuthFormModule","MetadataButtonComponent_button_0_Template","openMetadata","metadata","zoom","RotationButtonComponent_div_0_Template","viewController","resetRotation","rotated","rotationStyle","getRotation","RotationButtonComponent_div_1_Template","_r5","CatalogBrowserComponent_ng_template_1_ng_container_0_Template","onGroupAddedChange","onLayerAddedChange","item_r1","resolution$","catalogAllowLegend","toggleCollapsedGroup","CatalogBrowserComponent_ng_template_1_ng_container_1_Template","CatalogBrowserComponent_ng_template_1_Template","isGroup","isLayer","CatalogBrowserLayerComponent_mat_icon_1_Template","CatalogBrowserLayerComponent_igo_layer_legend_12_Template","igoLayer$","CatalogBrowserGroupComponent_ng_container_4_Template","onToggleClick","CatalogBrowserGroupComponent_ng_template_7_Template","CatalogBrowserGroupComponent_ng_template_11_ng_container_0_Template","CatalogBrowserGroupComponent_ng_template_11_ng_container_1_Template","onLayerPreview","item_r9","ctx_r11","resolution","CatalogBrowserGroupComponent_ng_template_11_Template","LayerItemComponent_mat_checkbox_1_Template","_r7","check","layerCheck","LayerItemComponent_button_4_Template","toggleVisibility","layer","queryBadgeHidden$","inResolutionRange$","LayerItemComponent_button_5_Template","LayerItemComponent_button_6_Template","toggleLayerTool","LayerItemComponent_igo_layer_legend_9_Template","updateLegendOnResolutionChange","LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_mat_list_item_2_Template","item_r6","toggleLegendItem","computeItemTitle","LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_5_mat_option_4_Template","style_r17","LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_5_Template","_r19","currentStyle","onChangeStyle","LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_1_small_6_Template","LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_1_Template","_r27","onLoadImage","ctx_r21","imagesHeight","LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_2_Template","LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_Template","LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_Template","LayerLegendComponent_ng_container_0_ng_container_1_Template","items_r1","reverse","LayerLegendComponent_ng_container_0_ng_template_2_Template","LayerLegendComponent_ng_container_0_Template","LayerListComponent_igo_layer_list_tool_2_Template","onAppliedFilterAndSortChange","toggleSelectionMode","layersAreAllVisible","layerFilterAndSortOptions","keyword","onlyVisible","sortAlpha","LayerListComponent_ng_template_4_igo_layer_item_0_Template","layersCheck","layer_r8","activeLayer","orderable","baseLayer","getLowerLayer","getUpperLayer","queryBadge","expandLegendOfVisibleLayers","toggleLegendOnVisibilityChange","selectAllCheck","layerItemChangeDetection$","LayerListComponent_ng_template_4_Template","excludeBaseLayers","LayerListComponent_igo_panel_6_Template","opacity","raiseLayer","ctx_r20","lowerLayer","removeLayers","templateLayerToolbar","badgeOpacity","raiseDisabled","lowerDisabled","LayerListComponent_igo_panel_7_mat_slider_15_Template","_r25","checkOpacity","LayerListComponent_igo_panel_7_Template","_r28","selectAll","raiseLayers","layersChecked","lowerLayers","ctx_r31","ctx_r32","layers","raiseDisabledSelection","lowerDisabledSelection","statusSelectedLayersCheck","LayerListToolComponent_button_5_Template","clearTerm","LayerLegendListComponent_mat_slide_toggle_0_Template","toggleShowAllLegends","showAllLegendsValue","LayerLegendListComponent_mat_divider_2_Template","LayerLegendListComponent_ng_template_5_igo_layer_legend_item_0_Template","layer_r9","LayerLegendListComponent_ng_template_5_Template","LayerLegendListComponent_p_7_Template","LayerLegendListComponent_p_11_Template","LayerLegendListComponent_p_15_Template","LayerLegendListComponent_p_19_Template","TrackFeatureButtonComponent_button_0_Template","toggleTrackFeature","CatalogLibaryComponent_ng_template_1_Template","catalog_r1","onCatalogSelect","DownloadButtonComponent_button_0_Template","openDownload","FeatureDetailsComponent_table_0_tr_2_td_1_Template","FeatureDetailsComponent_table_0_tr_2_td_2_Template","property_r3","FeatureDetailsComponent_table_0_tr_2_td_3_Template","FeatureDetailsComponent_table_0_tr_2_td_4_Template","FeatureDetailsComponent_table_0_tr_2_td_5_img_2_Template","FeatureDetailsComponent_table_0_tr_2_td_5_ng_template_3_Template","FeatureDetailsComponent_table_0_tr_2_td_5_Template","isImg","FeatureDetailsComponent_table_0_tr_2_td_6_Template","FeatureDetailsComponent_table_0_tr_2_Template","feature","properties","isUrl","FeatureDetailsComponent_table_0_Template","filterFeatureProperties","FeatureDetailsComponent_iframe_1_Template","htmlSanitizer","MeasurerComponent_ng_container_19_Template","onLengthUnitChange","onAreaUnitChange","measure_r2","measureType","Length","measureLengthUnit","Meters","measureUnitsAuto","activeMeasureType","Area","measureAreaUnit","SquareMeters","area","GeometryFormFieldInputComponent_ng_template_0_Template","TimeFilterButtonComponent_button_0_Template","TimeFilterButtonComponent_div_1_igo_time_filter_item_2_Template","TimeFilterButtonComponent_div_1_Template","timeFilterCollapse","timeFilter","TimeFilterFormComponent_div_0_div_1_Template","date","handleDateChange","TimeFilterFormComponent_div_0_div_2_Template","startDate","endDate","getRangeMaxDate","getRangeMinDate","TimeFilterFormComponent_div_0_Template","isRange","TimeFilterFormComponent_div_1_div_1_mat_option_4_Template","year_r21","TimeFilterFormComponent_div_1_div_1_Template","_r23","year","handleYearChange","ctx_r18","listYears","TimeFilterFormComponent_div_1_div_2_mat_option_5_Template","startYear_r27","TimeFilterFormComponent_div_1_div_2_mat_option_10_Template","endYear_r28","TimeFilterFormComponent_div_1_div_2_Template","_r30","startYear","endYear","startListYears","endListYears","TimeFilterFormComponent_div_1_Template","TimeFilterFormComponent_div_3_p_6_Template","ctx_r34","TimeFilterFormComponent_div_3_Template","_r37","handleSliderYearChange","toggleFilterState","playYear","resetFilter","handleSliderValue","playIcon","resetIcon","TimeFilterFormComponent_div_4_Template","_r43","handleSliderDateChange","playFilter","dateToNumber","handleSliderTooltip","TimeFilterItemComponent_mat_list_item_0_button_4_Template","setVisible","TimeFilterItemComponent_mat_list_item_0_Template","toggleFiltersCollapsed","toggleLegendOnClick","_r1","filtersCollapsed","TimeFilterItemComponent_igo_layer_legend_5_Template","TimeFilterListComponent_ng_template_1_Template","layer_r1","OgcFilterFormComponent_mat_form_field_13_mat_option_10_Template","field_r12","OgcFilterFormComponent_mat_form_field_13_button_12_Template","clearSelectedField","currentFilter","OgcFilterFormComponent_mat_form_field_13_Template","inputClearable","updateFieldsList","changeField","option","floatLabel","selectedField$","filteredFields$","propertyName","OgcFilterFormComponent_mat_option_24_Template","operator_r20","OgcFilterFormComponent_mat_form_field_27_mat_option_2_Template","igoSpatialSelector_r22","OgcFilterFormComponent_mat_form_field_27_Template","_r24","changeSpatialSelector","igoSpatialSelector","igoSpatialSelectors","OgcFilterFormComponent_mat_form_field_29_mat_option_5_Template","value_r28","OgcFilterFormComponent_mat_form_field_29_button_7_Template","clearProperty","ctx_r27","OgcFilterFormComponent_mat_form_field_29_Template","_r32","updateValuesList","changeProperty","detectProperty","expression","pattern","filteredValues$","isClearable","OgcFilterFormComponent_mat_form_field_34_button_3_Template","_r38","igoSNRC","OgcFilterFormComponent_mat_form_field_34_Template","changeSNRC","OgcFilterFormComponent_ng_container_36_button_1_Template","_r45","changeMapExtentGeometry","ctx_r43","OgcFilterFormComponent_ng_container_36_Template","OgcFilterFormComponent_mat_form_field_39_mat_option_5_Template","value_r49","OgcFilterFormComponent_mat_form_field_39_button_7_Template","_r51","ctx_r48","OgcFilterFormComponent_mat_form_field_39_Template","_r53","changeNumericProperty","_r46","lowerBoundary","begin","OgcFilterFormComponent_mat_form_field_40_mat_option_5_Template","value_r60","OgcFilterFormComponent_mat_form_field_40_button_7_Template","_r62","ctx_r59","OgcFilterFormComponent_mat_form_field_40_Template","_r57","upperBoundary","end","OgcFilterFormComponent_igo_ogc_filter_time_41_Template","_r69","datasource","pos","_c19","_c20","OgcFilterableFormComponent_igo_ogc_filter_toggle_button_0_Template","refreshFunc","OgcFilterableFormComponent_1_ng_template_0_Template","currentFilter_r3","OgcFilterableFormComponent_1_Template","ogcFilters","interfaceOgcFilters","OgcFilterableItemComponent_mat_icon_1_Template","OgcFilterableItemComponent_h4_2_Template","OgcFilterableItemComponent_span_3_Template","OgcFilterableItemComponent_button_4_Template","addFilterToSequence","addFilterDisabled","OgcFilterableItemComponent_button_5_Template","OgcFilterableItemComponent_div_8_igo_layer_legend_2_Template","OgcFilterableItemComponent_div_8_Template","showLegend$","OgcFilterableItemComponent_section_10_Template","changeOgcFilterType","advancedOgcFilters","OgcFilterableListComponent_ng_template_1_Template","OgcFilterButtonComponent_button_0_Template","OgcFilterButtonComponent_div_1_igo_ogc_filterable_item_2_Template","OgcFilterButtonComponent_div_1_Template","ogcFilterCollapse","OgcFilterToggleButtonComponent_div_1_mat_option_4_Template","pbg_r3","OgcFilterToggleButtonComponent_div_1_Template","currentPushButtonGroup","getPushButtonsGroups","OgcFilterToggleButtonComponent_ng_container_3_mat_button_toggle_2_Template","ogcPushButton_r8","onButtonChange","getButtonColor","getToolTip","OgcFilterToggleButtonComponent_ng_container_3_Template","bundle_r6","bundleIsVertical","SpatialFilterTypeComponent_mat_option_8_Template","queryType_r1","SpatialFilterListComponent_mat_option_7_Template","entities_r3","nom","SpatialFilterItemComponent_mat_slide_toggle_5_Template","onDrawControlChange","drawControlIsActive","SpatialFilterItemComponent_mat_slide_toggle_6_Template","onfreehandControlChange","freehandDrawIsActive","SpatialFilterItemComponent_div_7_Template","getRadius","radiusFormControl","measureUnit","SpatialFilterItemComponent_mat_radio_button_12_Template","onItemTypeChange","item_r13","SpatialFilterItemComponent_div_13_mat_header_cell_3_Template","SpatialFilterItemComponent_div_13_mat_header_cell_5_Template","ctx_r22","ctx_r17","selectedThematics","SpatialFilterItemComponent_div_13_mat_header_row_6_Template","SpatialFilterItemComponent_div_13_mat_row_7_Template","SpatialFilterItemComponent_div_13_mat_tree_node_9_Template","node_r25","ctx_r28","onToggleChange","SpatialFilterItemComponent_div_13_mat_nested_tree_node_10_Template","_r31","node_r29","childrensToggle","treeControl","isExpanded","hasChildrenSelected","SpatialFilterItemComponent_div_13_Template","hasChild","SpatialFilterItemComponent_button_15_Template","_r34","clearSearch","queryType","zone","SpatialFilterItemComponent_button_16_Template","_c21","_c22","_c23","_c24","OgcFilterTimeComponent_mat_form_field_11_mat_option_5_Template","hour_r6","OgcFilterTimeComponent_mat_form_field_11_Template","changeTemporalProperty","beginHourFormControl","beginHours","OgcFilterTimeComponent_mat_form_field_12_mat_option_5_Template","minute_r10","OgcFilterTimeComponent_mat_form_field_12_Template","beginMinuteFormControl","beginMinutes","OgcFilterTimeComponent_div_13_mat_form_field_10_mat_option_5_Template","hour_r18","OgcFilterTimeComponent_div_13_mat_form_field_10_Template","endHourFormControl","endHours","OgcFilterTimeComponent_div_13_mat_form_field_11_mat_option_5_Template","minute_r22","OgcFilterTimeComponent_div_13_mat_form_field_11_Template","ctx_r16","endMinuteFormControl","endMinutes","OgcFilterTimeComponent_div_13_Template","yearSelected","monthSelected","dateFilter","bind","endValue","handleDate","maxDate","beginValue","minDate","calendarView","calendarType","ImportExportComponent_form_8_Template","inputProj","importFiles","files","loading$","_c25","ImportExportComponent_section_9_Template","fileSizeMb","ImportExportComponent_section_10_Template","ImportExportComponent_form_12_span_9_Template","ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template","layer_r17","onlySelectedClick","inLayersIdToExportSelectionOnly","onlySelected","_c26","ImportExportComponent_form_12_mat_option_10_Template","layerHasSelectedFeatures","ImportExportComponent_form_12_ng_container_18_mat_option_1_Template","format_r29","ImportExportComponent_form_12_ng_container_18_Template","formats$","ImportExportComponent_form_12_mat_option_20_Template","ImportExportComponent_form_12_div_22_Template","ImportExportComponent_form_12_div_23_ng_container_6_mat_option_1_Template","encoding_r32","ImportExportComponent_form_12_div_23_ng_container_6_Template","encodings$","ImportExportComponent_form_12_div_23_Template","ImportExportComponent_form_12_div_24_Template","ImportExportComponent_form_12_Template","ctx_r35","handleExportFormSubmit","getLayerTitleById","exportableLayers$","forceNaming","format","MeasurerItemComponent_mat_option_6_Template","measureUnit_r1","PrintFormComponent_mat_option_27_Template","outputFormat_r5","PrintFormComponent_mat_option_33_Template","paperFormat_r6","PrintFormComponent_mat_option_39_Template","imageFormat_r7","PrintFormComponent_mat_option_45_Template","resolution_r8","PrintFormComponent_mat_option_51_Template","orientation_r9","DirectionsFormComponent_div_1_button_4_Template","i_r7","geolocateStop","DirectionsFormComponent_div_1_button_8_Template","clearStop","DirectionsFormComponent_div_1_mat_optgroup_11_mat_option_1_Template","result_r22","chooseProposal","DirectionsFormComponent_div_1_mat_optgroup_11_Template","source_r20","results","DirectionsFormComponent_div_1_button_12_Template","removeStop","DirectionsFormComponent_div_1_Template","keyup","prevent","stop_r6","geolocationFeature","directionsText","stopPoint","stopProposals","stops","DirectionsFormComponent_button_6_Template","zoomRoute","DirectionsFormComponent_button_7_Template","resetForm","DirectionsFormComponent_button_8_Template","copyDirectionsToClipboard","DirectionsFormComponent_button_9_Template","copyLinkToClipboard","DirectionsFormComponent_div_10_mat_form_field_1_mat_option_3_Template","pathDirections_r45","cnt_r46","ctx_r44","formatDistance","distance","formatDuration","duration","DirectionsFormComponent_div_10_mat_form_field_1_Template","_r48","changeRoute","activeRoute","ctx_r41","routesResults","DirectionsFormComponent_div_10_mat_divider_2_Template","DirectionsFormComponent_div_10_mat_list_item_8_Template","step_r50","showSegment","cnt_r51","formatStep","image","cssClass","instruction","DirectionsFormComponent_div_10_Template","SearchSelectorComponent_mat_radio_button_8_Template","searchType_r2","getSearchTypeTitle","SearchSettingsComponent_div_6_Template","checkUncheckAllSources","searchSourcesAllEnabled","SearchSettingsComponent_ng_container_7_button_3_Template","source_r6","SearchSettingsComponent_ng_container_7_button_4_Template","SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template","settingValue_r18","setting_r13","settingsValueCheckedRadioButton","SearchSettingsComponent_ng_container_7_ng_container_7_span_6_Template","SearchSettingsComponent_ng_container_7_ng_container_7_span_7_div_1_Template","checkUncheckAll","allEnabled","SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template","settingValue_r32","settingsValueCheckedCheckbox","getAvailableHashtagsValues","SearchSettingsComponent_ng_container_7_ng_container_7_span_7_Template","getAvailableValues","SearchSettingsComponent_ng_container_7_ng_container_7_Template","SearchSettingsComponent_ng_container_7_Template","_r41","onCheckSearchSource","settings","SearchSettingsComponent_span_8_Template","_r44","changePointerReverseSearch","pointerSummaryEnabled","_c27","SearchBarComponent_mat_label_3_Template","SearchBarComponent_button_11_Template","searchIcon","SearchBarComponent_button_12_Template","onClearButtonClick","SearchBarComponent_igo_search_selector_14_Template","onSearchTypeChange","searchTypes","searchType$","SearchBarComponent_igo_search_settings_15_Template","pointerSummaryStatus","onSearchSettingsChange","_c28","_c29","_c30","SearchResultsComponent_ng_template_1_igo_collapsible_0_ng_container_1_Template","_c31","SearchResultsComponent_ng_template_1_igo_collapsible_0_Template","group_r2","getId","computeGroupTitle","SearchResultsComponent_ng_template_1_ng_template_1_ng_container_0_Template","SearchResultsComponent_ng_template_1_ng_template_1_Template","_c32","SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template","result_r18","resultFocus","resultUnfocus","onResultSelect","showIcons","withZoomButton","templateSearchToolbar","SearchResultsComponent_ng_template_1_ng_template_3_span_1_Template","displayMoreResults","SearchResultsComponent_ng_template_1_ng_template_3_Template","results_r15","isMoreResults","SearchResultsComponent_ng_template_1_Template","searchResultMode","Grouped","SearchResultsItemComponent_mat_icon_1_Template","SearchResultsItemComponent_h4_2_Template","titleHtml","tooltipHtml","SearchResultsItemComponent_h4_3_Template","SearchResultsItemComponent_button_4_Template","onZoomHandler","_c33","_c34","SearchResultAddButtonComponent_button_0_Template","onMouseEvent","isPreview$","inRange$","convertDMSToDD","degrees","minutes","seconds","dd","formatScale","scale","round","getResolutionFromScale","dpi","ctrlKeyDown","originalEvent","altKey","metaKey","ctrlKey","roundCoordTo","coord","decimal","toFixed","authInterceptor","legendCollapsed","firstLoadComponent","isInResolutionsRange$","visible$","displayed$","ol","createOlLayer","zIndex","maxResolution","Number","maxScaleDenom","minResolution","minScaleDenom","legendOptions","legend","setLegend","getZIndex","setZIndex","setOpacity","setMaxResolution","updateInResolutionsRange","getMaxResolution","setMinResolution","getMinResolution","isInResolutionsRange","showInLayerList","igoMap","unobserveResolution","observeResolution","resolution$$","getResolution","MetadataService","extern","MetadataButtonComponent","metadataService","_layer","IgoMetadataModule","generateIdFromSourceOptions","wms","generateWMSIdFromSourceOptions","wmts","generateWMTSIdFromSourceOptions","xyz","generateXYZIdFromSourceOptions","generateFeatureIdFromSourceOptions","arcgisrest","generateArcgisRestIdFromSourceOptions","osm","generateId","LAYERS","origin","DataSource","dataService","createOlSource","sourceOptions","getSourceFormatFromOptions","olFormatCls","formatType","formatOptions","queryTitle","OgcFilterOperatorType","OgcFilterOperator","moment","filterSequence","operators","PropertyIsEqualTo","spatial","fieldRestrict","PropertyIsNotEqualTo","PropertyIsLike","PropertyIsGreaterThan","PropertyIsGreaterThanOrEqualTo","PropertyIsLessThan","PropertyIsLessThanOrEqualTo","PropertyIsBetween","During","PropertyIsNull","Intersects","Within","Contains","ogcFiltersOptions","fieldNameGeometry","srcType","ogcFiltersDefaultValue","editable","geometryName","pushButtons","proj","ourBboxFilter","enableBbox","filterAssembly","test","getCode","checkIgoFiltersProperties","bundleFilter","wfsOptions","srsName","featureNS","featurePrefix","featureTypes","outputFormat","query","writeGetFeature","XMLSerializer","serializeToString","filterObject","logicalArray","createFilter","operator","logical","filterOptions","wfsPropertyName","wfsPattern","wfsMatchCase","matchCase","wfsWildCard","wildCard","wfsSingleChar","singleChar","wfsEscapeChar","escapeChar","wfsLowerBoundary","wfsUpperBoundary","wfsGeometryName","wfsExtent","wfsWktGeometry","wkt_geometry","wfsSrsName","wfsBegin","parseFilterOptionDate","wfsEnd","wfsExpression","geometry","readGeometry","dataProjection","featureProjection","BBOX","And","apply","Or","Not","level","defineInterfaceFilterSequence","addInterfaceFilter","defaultOperatorsType","allowedOperators","fieldsHasSpatialOperator","includeContains","effectiveOperators","srcField","allowedOperatorsType","Spatial","BasicAndSpatial","Basic","Time","BasicNumericOperator","igoOgcFilterObject","parentLogical","filterid","filterArray","addFilterProperties","sequence","nextElement","lastProcessedFilter","lastParentLogical","uiFilter","computedButtons","pb","bundles","bundle","includes","pbGroup","filterQueryStringPushButton","filterQueryStringAdvancedFilters","computeIgoPushButton","pushButtonBundle","g","conditions","buttonBundle","bundleCondition","ogcpb","enabledPb","buildFilter","filterQueryString","formatProcessedOgcFilter","processedFilter","layersOrTypenames","appliedFilter","layerOrTypenames","defaultValue","isValid","gmlRegex","RegExp","formatWFSQueryString","dataSourceOptions","epsg","forceDefaultOutputFormat","urlWfs","paramsWFS","effectiveCount","effectiveStartIndex","epsgCode","paramMaxFeatures","cnt","maxFeatures","srs","valueReference","sourceFields","fieldsNames","sourcefield","getFeature","getpropertyvalue","checkWfsParams","wfsDataSourceOptions","getFormatFromOptions","gmlFormat","wfsService","ogcFilterWriter","defineOgcFiltersDefaultOptions","getSourceFieldsFromWFS","vectorSource","loader","buildUrl","nbOfFeature","alteredUrl","getFeatures","threshold","XMLHttpRequest","interceptXhr","onError","removeLoadedExtent","onerror","getFormat","readFeatures","responseText","addFeatures","send","queryStringValues","igoFilters","filterOrBox","filterOrPush","handleOgcFiltersAppliedValue","xmlFilter","baseUrl","download","dynamicUrl","WFSService","defineFieldAndValuefromWFS","getfeatureSourceField","sf","nb","d","fieldList","fieldListWoGeom","fieldListWoGeomStr","olFormats","effectiveOlFormats","gmlDataSourceOptions","sourceFieldsToRetrieveValues","wfsGetFeature","concatMap","allowGml","firstFeature","getKeys","getGeometryName","processingArray","chunkSize","mfeatures","loopFeatures","built_properties_value","kv","getProperties","boundedBy","fieldType","featureProperties","QueryFormat","QueryFormatMimeType","QueryHtmlTarget","sourceParams","DPI","MAP_RESOLUTION","FORMAT_OPTIONS","refreshIntervalSec","refresh","wfsCheckup","buildDynamicDownloadUrlFromParamsWFS","sourceField","initOgcFilters","FILTER","mapLabel","BLANK","updateParams","igoRefresh","asWFSDataSourceOptions","getLegend","VERSION","separator","createDefaultTileGrid","projectionExtent","getExtent","resolutions","matrixIds","z","pow","tileGrid","projection","crossOrigin","htmlString","layerOptions","types","oneType","cartocss","colors","j","layer_name","esrijsonFormat","attributions","overlaps","encodeURIComponent","timeExtent","customParams","legendInfo","parseInt","lyr","layerName","lyrLegend","layerId","WebSocketDataSource","createWebSocket","ws","WebSocket","onmessage","onMessage","onclose","onClose","onopen","onOpen","featureAdded","readFeature","featureToRemove","getFeatureById","removeFeature","addFeature","mvtFormat","featureClass","_converters","esriPMS","_convertEsriPMS","esriSFS","_convertEsriSFS","esriSLS","_convertEsriSLS","esriSMS","_convertEsriSMS","esriTS","_convertEsriTS","_renderers","uniqueValue","_renderUniqueValue","simple","_renderSimple","classBreaks","_renderClassBreaks","point","units","mpu","parseFloat","symbol","rotation","_transformAngle","angle","fill","_transformColor","font","weight","family","textBaseline","verticalAlignment","textAlign","horizontalAlignment","offsetX","_convertPointToPixel","xoffset","offsetY","yoffset","contentType","imageData","stroke","outline","_convertOutline","lineDash","width","ol3Rad","PI","radius","points","radius2","labelingInfo","mapUnits","ii","labelExpression","maxScale","minScale","_getResolutionForScale","getText","setText","defaultSymbol","defaultStyle","classBreakInfos","classBreakInfo","classMinValue","minValue","classMaxValue","field1","infos","uniqueValueInfos","me","hash","layerInfo","drawingInfo","styleFunctions","drawingInfoStyle","labelingInfoStyleFunctions","_convertLabelingInfo","TimeFilterType","TimeFilterStyle","TypeCapabilities","CapabilitiesService","parsers","esriJSON","baseOptions","getCapabilities","capabilities","parseWMSOptions","parseWMTSOptions","jsonp","account","mapId","cartoOptions","parseCartoOptions","legendUrl","arcgisOptions","forkJoin","parseArcgisOptions","parseTileArcgisOptions","service","fromObject","request","_i","read","findDataSourceInCapabilities","Capability","Layer","DataURL","abstract","Abstract","keywordList","KeywordList","queryable","getTimeFilter","timeFilterable","Style","getStyle","queryFormatMimeTypePriority","GEOJSON","GEOJSON2","GML3","GML2","mimeType","Request","GetFeatureInfo","Format","keyEnum","_layerOptionsFromSource","Title","MaxScaleDenominator","MinScaleDenominator","OnlineResource","stepDate","Contents","Identifier","ouputOptions","layer_definition","generateStyle","copyrightText","timeInfo","time","setTime","toUTCString","DATETIME","CALENDAR","layerArray","Name","dimension","Dimension","minMaxDim","stylesAvailable","maxCacheCount","OptionsService","ProjectionService","registerProjection","utmZone","mtmZone","lon0","defs","setExtent","DataSourceService","capabilitiesService","optionsService","wfsDataSourceService","projectionService","datasources$","context","createOSMDataSource","createFeatureDataSource","createWFSDataSource","wmsContext","removeDuplicateCaseInsensitive","createWMSDataSource","createWMTSDataSource","createXYZDataSource","createCartoDataSource","createArcGISRestDataSource","createWebSocketDataSource","createMVTDataSource","createTileArcGISRestDataSource","createClusterDataSource","observables","optionsFromCapabilities","getWMSOptions","optionsFromApi","optionsMerged","getWMTSOptions","getCartoOptions","getArcgisOptions","getTileArcgisOptions","TooltipType","loaded","handleLoadStart","handleLoadEnd","un","__watchers__","Working","watcherIndex","Done","tile","onUnwatch","olOptions","getSource","setImageLoadFunction","customLoader","setMap","interceptor","abort","getImage","arrayBufferView","Uint8Array","Blob","imageUrl","URL","createObjectURL","browsable","exportable","flash","trackFeature","enableTrackFeature","vector","getUrl","setLoader","listenerKey","vectorContext","frameState","flashGeom","getGeometry","elapsed","elapsedRatio","newColor","getStyleFunction","style2","styleClone","getType","setRadius","getStroke","setColor","setWidth","getWidth","getFill","setStyle","drawGeometry","render","stopAnimation","trackFeatureListenerId","feat","getView","setCenter","getCoordinates","centerMapOnFeature","vectorTile","vectorTileSource","setTileLoadFunction","onLoad","failure","responseXML","DOMParser","parseFromString","readProjection","createOverlayMarkerStyle","outlineColor","svgIconColor","svgOutlineColor","isIE","imgSize","anchor","overflow","StyleService","parseStyle","styleOptions","olCls","getOlCls","_key","olKey","getOlKey","styleByAttribute","attribute","labelStyle","getLabel","baseStyle","val","createStyle","clusterParam","layerStyle","clusterRanges","r","minRadius","maxRadius","showRange","dynamicRadius","clusterRadius","radiusMin","image_","radiusCalc","labelMatch","labelToGet","matchAll","LayerService","styleService","dataSourceService","createTileLayer","createVectorLayer","createImageLayer","createVectorTileLayer","createLayer","createAsyncDataSource","olLayer","serviceStyle","createStyleByAttribute","clusterBaseStyle","createClusterStyle","layerOptionsOl","applyMapboxStyle","mapboxStyle","getMapboxGlStyle","stylefunction","FEATURE","FeatureMotion","featureToOl","projectionOut","olFeature","setId","mapTitle","featureFromOl","projectionIn","exclude","excludeOffline","olFormat","startsWith","writeGeometryObject","excludeAttribute","excludeAttributeOffline","getRevision","scaleExtent","height","moveToOlFeatures","olFeatures","motion","areaRatio","featuresExtent","featureExtent","olExtent","olFeatureExtent","olFeatureProjection","olGeometry","viewExtent","Zoom","zoomToExtent","Move","moveToExtent","mapExtent","mapExtentArea","featuresExtentArea","getZoom","tryBindStoreLayer","bindLayer","addLayer","viewScale","checkLayer","setLayerOlFeatures","diff","olFeaturesMap","olFeaturesToRemove","newOlFeature","olFeaturesToAddIds","removeOlFeaturesFromLayer","addOlFeaturesToLayer","stores$$","states$$","watchStore","empty$$","skipWhile","updateEntitiesInExtent","unwatchStore","unwatchAll","state$","inMapExtent","entitiesInMapExtent","setMotion","subscription","onFeaturesChange","clearLayer","setLayerFeatures","selectMotion","getFeatureId","onSourceChanges","flatMap","cluster","setStoreOlFeatures","_overlayStore","createOverlayStore","overlayStore","unlistenToMapClick","removeDragBoxInteraction","addOverlayLayer","listenToMapClick","dragBox","addDragBoxInteraction","watchAll","deactivateSelection","removeOverlayLayer","stores$","mapClickListener","onMapClick","listener","getFeaturesAtPixel","pixel","hitTolerance","layerFilter","onSelectFromMap","olDragSelectInteraction","olInteractions","getInteractions","getArray","olInteraction","addInteraction","olDragSelectInteractionEndKey","onDragBoxEnd","removeInteraction","mapBrowserEvent","olSource","getFeaturesInExtent","overlayFeaturesKeys","featuresKeys","doMotion","groupedFeatures","groupFeaturesByStore","unselectAllFeaturesFromStore","selectFeaturesFromStore","overlayLayer","createOverlayLayer","removeLayer","tryAddLoadingStrategy","addStrategy","activateStrategyOfType","createOverlayLayerStyle","fillOpacity","strokeWidth","strokeOpacity","strokeColor","fillWithOpacity","strokeWithOpacity","markerStyle","strokeRGBA","fillRGBA","bufferRadius","customStyle","geometryType","overlayDataSource","removeOlFeature","addOlFeatures","removeFeatures","unwatchLayer","layer$$","MapViewAction","observerKeys","olMap","getOlMap","padding","maxZoomOnExtent","extent$","states","stateIndex","stateHistory","setOlMap","onMoveEnd","extent$$","olView","getProjection","center","getCenter","getOlProjection","calculateExtent","getSize","unit","getUnits","zoomTo","cancelAnimations","easing","hasPreviousState","setStateIndex","hasNextState","fromCenter","toCenter","distCenter","sqrt","fromExtent","fromSize","xSize","maxZoom","fit","setState","state2","state1","trunc","offlineButtonToggle$","layers$","positionFollower","geolocation$","controls","attribution","layerWatcher","scaleLine","interactions","altShiftDragRotate","doubleClickZoom","keyboard","mouseWheelZoom","shiftDragZoom","dragPan","pinchRotate","pinchZoom","setView","buffer","currentView","viewOptions","clearStateHistory","constrainResolution","unsubscribeGeolocate","geolocate","alwaysTracking","bl","getBaseLayers","setMinZoom","minZoom","setMaxZoom","addLayers","offsetZIndex","offsetBaseLayerZIndex","addedLayers","doAddLayer","setLayers","newLayers","layersToRemove","doRemoveLayer","getLayerIndex","moveLayer","reverseLayers","to","layerTo","zIndexFrom","changeBaseLayer","existingLayer","getLayerById","maxZIndex","l","watchLayer","sortLayersByZIndex","layer1","layer2","track","geolocation$$","geolocation","getTracking","startGeolocation","getAccuracy","getAccuracyGeometry","bufferFeature","addOlFeature","options_","coordinates","getPosition","bufferGeom","bufferStroke","bufferFill","bufferText","showBufferRadius","setZoom","stopGeolocation","setTracking","trackingOptions","enableHighAccuracy","tracking","evt","offline","MapService","MapBrowserComponent","_view","updateView","activityId","PointerPositionDirective","pointerPositionDelay","pointerPositionCoord","listenToMapPointerMove","unlistenToMapPointerMove","pointerMoveListener","onPointerEvent","delay","dragging","lastTimeoutRequest","clearTimeout","lonlat","coordinate","mapProjection","setTimeout","ZoomButtonComponent","getMinZoom","getMaxZoom","zoomIn","zoomOut","GeolocateButtonComponent","_map","RotationButtonComponent","_showIfNoRotation","radians","showIfNoRotation","CatalogItemType","TypeCatalog","Catalog","catalogService","WMSCatalog","loadCatalogWMSLayerItems","WMTSCatalog","loadCatalogWMTSLayerItems","BaselayersCatalog","baselayers","loadCatalogBaseLayerItems","ArcGISRestCatalog","loadCatalogArcGISRestItems","CompositeCatalog","composite","loadCatalogCompositeLayerItems","CatalogFactory","QueryService","queryEnabled","queryLayer","getQueryUrl","HTMLGML2","urlGml","mergeMap","gmlRes","imposedGeom","mergeGML","extractData","parser","olmline","pts","ptsArray","firstFeatureType","olmpoly","nbFeatures","bbox","getQueryParams","bboxExtent","olmpts","featureGeometryCoordinates","featureGeometryType","appendLineString","appendPolygon","convexHull","lower","cross","upper","imposedGeometry","queryDataSource","allowedFieldsAndAlias","getAllowedFieldsAndAlias","extractGML3Data","extractGeoJSONData","ESRIJSON","extractEsriJSONData","TEXT","extractTextData","extractHtmlData","extractGML2Data","geomToAdd","createGeometryFromUrlClick","getQueryTitle","sourceTitle","searchParams","bboxRaw","abs","clickx","clicky","clickx1","clicky1","wktPoly","featureToResult","htmlTarget","crs","IFRAME","bodyTagStart","bodyTagEnd","lastIndexOf","queryString","pairs","pair","decodeURIComponent","featureOL","featureGeometry","shape","SHAPE","the_geom","geom","forceGML2","wmsDatasource","WMSGetFeatureInfoOptions","INFO_FORMAT","getMimeInfoFormat","QUERY_LAYERS","FEATURE_COUNT","getFeatureInfoUrl","cartoDatasource","sql","queryPrecision","tileArcGISRestDatasource","mime","getLabelMatch","layerIsQueryable","olLayerIsQueryable","QueryDirective","queryService","queries$$","queryFeatures","queryFeaturesHitTolerance","waitForAllQueries","cancelOngoingQueries","onMapEvent","queries$","doQueryFeatures","queryLayers","zip","query$","clickedFeatures","forEachFeatureAtPixel","layerOL","values_","newFeature","id_","_icon","olRenderFeature","flatCoordinates_","XY","ends_","queryFeaturesCondition","dragExtent","forEachFeatureIntersectingExtent","olDragSelectInteractionOnQuery","SearchSource","getDefaultOptions","setting","setParamFromSetting","showInSettings","conf","confValue","term","settingsName","hashtags","searchSourceSetting","getSettingsValues","hashtagsValid","hashtag","hashtagKey","normalize","search","QuerySearchSource","GoogleLinks","lon","lat","encodeURI","OsmLinks","CatalogService","contextConfig","catalogConfig","apiUrl","catalogsFromConfig","baseLayers","baseLayersCatalog","catalogsFromApi$","catalogs","_response","newCatalog","createInstanceCatalog","collectCatalogItems","getCatalogBaseLayersOptions","layersOptions","Group","getCatalogCapabilities","includeRecursiveItems","getWMTSItems","getArcGISRESTItems","compositeCatalog","catalogsFromInstance","request1$","request2$","k","groupImpose","pushImposeGroup","outGroupImpose","address","flatLayer","flatDeepLayer","arr","obs","idx","request3$","recursiveGroupByLayerAddress","keyFn","layerTitle","outItem","indicesMatchTitle","bInd","nPosition","groupByGroupId","groupId","ind","ix","idParent","layersQueryFormat","configuredQueryFormat","retriveLayerInfoFormat","showLegend","setCrossOriginAnonymous","layerPrepare","itemListIn","regexes","idGroup","groupItem","prepareCatalogItemGroup","testLayerRegexes","layerItem","prepareCatalogItemLayer","itemsPrepare","loopLevel","findCatalogInfoFormat","matrixSet","requestEncoding","regex","layerNameFromCatalog","currentLayerInfoFormat","baseInfoFormat","configuredInfoFormat","specific","CatalogBrowserComponent","layerService","currentItems","sortDirection","addLayerToMap","removeLayerFromMap","addGroupToMap","removeGroupFromMap","addLayersToMap","removeLayersFromMap","createAsyncLayer","oLayers","oLayer","returnItem","titleA","titleB","sortCatalogItemsByTitle","CatalogBrowserLayerComponent","layerLegendShown$","mouseInsideAdd","addedChange","addedLayerIsPreview","layerTooltip","layerMetadata","TITLE","ABSTRACT","CUSTOM","askForLegend","haveGroup","computeTitleTooltip","computeTooltip","CatalogBrowserGroupComponent","preview$","toggleCollapsed","layerAddedChange","evaluateAdded","evaluateDisabled","tryToggleGroup","onToggleCollapsed","onTitleClick","LayerListToolService","onlyInRange","keywordInitialized","sortedAlphaInitialized","onlyVisibleInitialized","onlyInRangeInitialized","LayerItemComponent","networkService","layerTool$","_selectAll","expandLegendIfVisible","_activeLayer","selectionMode","removable","toggleLegend","updateQueryBadge","onResolutionChange","tooltipText","inResolutionRange","LayerLegendComponent","legendItems$","lastlLegend","listStyles","STYLES","newLegends","outLegends","lastLegends","layerLegend","localLayerOptions","wmsDataSourceOptions","getScale","updateLegend","legendItems","transfertToggleLegendItem","sA","getParams","elemRef","renderedLegends","renderedLegend","LayerListControlsEnum","LayerListSelectVisibleEnum","LayerListComponent","thresholdToFilterAndSort","showToolbar$","hideSelectedLayers","activeLayer$","ogcButton","timeButton","appliedFilterAndSort","_keyword","_onlyVisible","_sortedAlpha","toggleOpacity","selectAllCheck$","_layers","isUpperBaselayer","isLowerBaselayer","raisableLayers","lowerableLayers","layersCheckedOpacity","change$$","debounce","timer","computeShowToolbar","computeLayers","checks","layerTool","lay","base","mapIndex","currentLayer","previousLayer","raisableLayer","layersToRaise","elements","computeElementRef","offsetParent","nextLayer","lowerableLayer","layersToLower","layersOut","filterLayers","sortLayersByTitle","sortLayersByZindex","showToolbar","never","keepLayerIds","layerKeywords","kw","localKeyword","dataSourceType","keywordRegex","keywordInList","str","always","statusSelectedLayers","NULL","findTrue","findFalse","MIXED","ALL_VISIBLE","ALL_HIDDEN","eventMapIndex","elemSource","checkItems","getElementsByClassName","checkItem","LayerListToolComponent","onlyVisible$","sortAlpha$","term$","term$$","onlyVisible$$","sortAlpha$$","toggleSortAlpha","toggleOnlyVisible","LayerListBindingDirective","mapService","layersOrResolutionChange$$","getMap","shownLayers","setLayersVisibilityStatus","layersVisibility$$","visibles","Boolean","allLayersAreVisible","LayerLegendListComponent","hasVisibleOrInRangeLayers$","hasVisibleAndNotInRangeLayers$","layersInUi$","showAllLegend","allowShowAllLegends","allLegendsShown","computeShownLayers","TrackFeatureButtonComponent","disableTrackFeature","LayerLegendItemComponent","IgoLayerModule","IgoCatalogBrowserModule","CatalogLibaryComponent","catalogSelectChange","CatalogLibaryItemComponent","IgoCatalogLibraryModule","IgoCatalogModule","FilterableDataSourcePipe","arg","isTimeFilterable","isOgcFilterable","TimeFilterService","newdateform","newdateformStart","newdateformEnd","dates","reformatDateTime","TIME","years","getFullYear","month","getMonth","day","getUTCDate","hour","getUTCHours","minute","getUTCMinutes","OGCFilterService","filterString","wfsDatasource","filterByOgc","filtered","SpatialFilterType","SpatialFilterItemType","SpatialFilterService","urlFilterList","AdmRegion","Arrond","CircFed","CircProv","DirReg","MRC","Mun","RegTour","bornes","hydro","routes","object","featureCollection","getKeyByValue","itemType","thematic","urlItem","Address","loc","featureType","featureCode","DownloadService","DSOptions","outputFormatDownload","baseurl","DownloadButtonComponent","downloadService","IgoDownloadModule","FeatureDetailsComponent","sanitizer","ready","routeEvent","selectFeature","_source","_feature","bypassSecurityTrustResourceUrl","offlineButtonState","Route","IgoFeatureDetailsModule","IgoFeatureFormModule","IgoFeatureModule","MeasureType","MeasureLengthUnit","MeasureLengthUnitAbbreviation","Kilometers","Miles","Feet","MeasureAreaUnit","MeasureAreaUnitAbbreviation","SquareKilometers","SquareMiles","SquareFeet","Hectares","Acres","metersToKilometers","metersToFeet","metersToMiles","squareMetersToSquareKilometers","squareMetersToSquareMiles","squareMetersToSquareFeet","squareMetersToHectares","squareMetersToAcres","metersToUnit","conversion","squareMetersToUnit","formatMeasure","measure","parts","toLocaleString","minimumFractionDigits","maximumFractionDigits","unitAbbr","p","createMeasureInteractionStyle","measureOlGeometryLength","getFlatCoordinates","measureOlGeometry","lengths","flatCoordinates","coordinatesLength","olSegment","updateOlGeometryMidpoints","olMidpoints","getOlGeometryMidpoints","midpointsLength","midpointCoordinate","getCoordinateAt","olMidpoint","setCoordinates","expectedNumber","clearOlMidpointTooltip","olTooltip","removeOverlay","getTooltipsOfOlGeometry","olTooltips","olCenterTooltip","olCenter","createOlTooltipAtPoint","olPoint","stopEvent","setPosition","createDrawInteractionStyle","createDrawHoleInteractionStyle","getMousePositionFromOlGeometryEvent","olEvent","start$","end$","changes$","freehand$","olOverlayLayer","createOlInnerOverlayLayer","clearOlInnerOverlaySource","removeOlInnerOverlayLayer","removeOlDrawInteraction","addOlInnerOverlayLayer","addOlDrawInteraction","olOverlaySource","olDrawInteraction","stopClick","drawStyle","maxPoints","freehand","freehandCondition","onDrawStartKey","onDrawStart","onDrawEndKey","onDrawEnd","unsubscribeToKeyDown","onDrawKey","olGeometryEvent","mousePosition","subscribeToKeyDown","keyDown$$","removeLastPoint","olModifyInteractionIsActive","olTranslateInteractionIsActive","olDrawInteractionIsActive","removedOlInteractions","modify","olLinearRingsLayer","createOlLinearRingsLayer","removeOlModifyInteraction","removeOlTranslateInteraction","addOlTranslateInteraction","activateTranslateInteraction","addOlModifyInteraction","activateModifyInteraction","olFeature$1","olLinearRingsSource","olModifyInteraction","deactivateModifyInteraction","onModifyStartKey","onModifyStart","onModifyEndKey","onModifyEnd","onModifyKey","olTranslateInteraction","deactivateTranslateInteraction","onTranslateStartKey","onTranslateStart","onTranslateEndKey","onTranslateEnd","onTranslateKey","olOuterGeometry","getOlGeometry","intersectsCoordinate","subscribeToDrawKeyDown","drawKeyDown$$","unsubscribeToDrawKeyDown","subscribeToDrawKeyUp","activateDrawInteraction","drawKeyUp$$","unsubscribeToDrawKeyUp","deactivateDrawInteraction","clearOlLinearRingsSource","addOlLinearRingsLayer","removeOlLinearRingsLayer","linearRingCoordinates","getLinearRing","addLinearRingToOlGeometry","_linearRingCoordinates","updateLinearRingOfOlGeometry","olPolygon","olLinearRing","appendLinearRing","newCoordinates","getLinearRings","MeasurerDialogComponent","perimeter","MeasurerComponent","tableTemplate","activeLengthUnit","activeAreaUnit","measure$","selectedFeatures$","showTooltips","olDrawSource","_activeMeasureType","minSegmentLength","setActiveMeasureType","activeDrawControl","createDrawLineControl","createDrawPolygonControl","createModifyControl","toggleDrawControl","onToggleTooltips","updateTooltipsOfOlSource","deactivateModifyControl","freezeStore","deactivateDrawControl","showTooltipsOfOlSource","clearTooltipsOfOlSource","table","activeOlGeometry","updateTooltipsOfOlGeometry","sum","openDialog","modifyControl","_olFeature","activateModifyControl","clearTooltipsOfOlGeometry","setOlGeometry","many","onFeatureAddedKey","updateMeasureOfOlGeometry","onFeatureRemovedKey","selectedFeatures$$","deactivateStrategyOfType","drawLineControl","drawPolygonControl","activateDrawControl","drawControl","drawStart$$","drawEnd$$","drawChanges$$","onDrawChanges","clearMeasures","finalizeMeasureOfOlGeometry","addFeatureToStore","modifyStart$$","modifyEnd$$","modifyChanges$$","onModifyChanges","setProperties","_measure","featureId","olMidpointsTooltips","updateOlTooltip","centerCoordinate","shouldShowTooltip","addOverlay","forEachFeature","showTooltipsOfOlGeometry","_unit","_type","computeTooltipInnerHTML","onMeasureTypeChange","onToggleDrawControl","onToggleMeasureUnitsAuto","onCalculateClick","onDeleteClick","MeasureFormatPipe","out","GeometryFormFieldInputComponent","ngControl","olGeoJSON","drawGuide","_drawControlIsActive","controlOptions","onChange","onTouched","_geometryType","deactivateControl","createDrawControl","toggleControl","_freehandDrawIsActive","_drawStyle","olGuideStyle","getGuideStyleFromDrawStyle","defaultDrawStyleRadius","_overlayStyle","addGeoJSONToOverlay","olModify","features_","overlayStyle","addOlOverlayLayer","createMeasureTooltip","fn","updateDrawStyleWithDrawGuide","activeControl","activateControl","olGeometryEnds$$","onOlGeometryEnds","olGeometryChanges$$","onOlGeometryChanges","removeMeasureTooltip","updateMeasureTooltip","circleToPoint","_radius","writeValue","cos","lastIndex","lastLength","olLastMidpoint","innerHtml","olStyle","isStyleWithRadius","IgoGeometryFormFieldModule","IgoGeometryModule","TimeFilterButtonComponent","TimeFilterFormComponent","dateAdapter","yearChange","setLocale","YEAR","valueArray","isNaN","valueOf","DATE","SLIDER","getStepDefinition","timeInterval","getTimezoneOffset","initStartYear","initEndYear","checkFilterValue","storeCurrentFilterValue","timeFromWms","newStartListYears","newEndListYears","setupDateOutput","applyTypeChange","newDate","thumbLabel","findThumbLabel","mySlider","_elementRef","childNodes","textContent","stopFilter","interval","that","newMinDateNumber","maxDateNumber","setSliderThumbLabel","currentDate","getRoundedDate","toDateString","toTimeString","setSeconds","setHours","setMinutes","getDay","selectedHour","getHours","selectedMinute","getMinutes","atMinute","coeff","asMilliseconds","TimeFilterItemComponent","timeFilterService","filterByYear","filterByDate","TimeFilterListComponent","WktService","wkt","wktProj","featureProj","epsgTO","extentProj","currentExtent","roundCoordinateArray","wktLine","wktMultiPoints","coordinateArray","roundArray","array","snrc","ew","1","2","3","4","5","6","7","8","9","10","sn","snrc250kIndex","snrc50kIndex","snrc1m","snrc250k","snrc50k","ar1m","part1m","part250k","part50k","partEW","partSN","unit1mEW","unit1mSN","unit250kEW","unit250kSN","unit50kEW","unit50kSN","index250kEW","index250kSN","index50kEW","index50kSN","increment250kEW","increment250kSN","increment50kEW","increment50kSN","unitPerTypeEW","unitPerTypeSN","ul","lr","ur","ll","OgcFilterFormComponent","wktService","ogcFilterOperator","ogcFilterOperators$","fields$","currentFilterIsSpatial$","defaultStepMillisecond","_snrc","allOgcFilterOperators","computeAllowedOperators","sFields","excludeFromOgcFilters","sfs","currentFilterIsSpatial","_filterFields","_filterValues","detectedProperty","refreshFilters","changeSNRCGeometry","snrcToWkt","extentToWkt","isSpatial","changeLogical","changeOperator","deleteFilter","activeFilters","isTemporalOperator","OgcFilterableFormComponent","OgcFilterableItemComponent","ogcFilterService","defaultLogicalParent","hasActiveSpatialFilter","filtersAreEditable","hasPushButton","setOgcWMSFiltersOptions","setOgcWFSFiltersOptions","lastRunOgcFilter","lastLevel","firstFieldName","includedFields","datasourceOptions","firstOperatorName","force","af","rebuiltIgoOgcFilterObjectFromSequence","rebuildFilter","ogcDataSource","ogcLayer","isAdvancedOgcFilters","changeOgcFiltersAdvancedOgcFilters","downloadable","OgcFilterableListComponent","OgcFilterButtonComponent","gr","cntPushButtons","cb","button","OgcFilterToggleButtonComponent","buildForm","patchValue","applyFilters","onChangeGroup","tt","vertical","currentOgcPushButton","SpatialFilterTypeComponent","selectedTypeIndex","spatialType","activeDrawType","Polygon","eventType","eventQueryType","zoneChange","_store","Predefined","selectedQueryType","onTypeChange","onQueryTypeChange","onZoneChange","onDrawTypeChange","Point","SpatialFilterListComponent","spatialFilterService","_queryType","formValueChanges$$","filterNormalized","loadItemById","featureGeom","selectedZone","displayFn","SpatialFilterItemComponent","toggleSearch","itemTypeChange","thematicChange","drawZoneEvent","radiusEvent","freehandControl","clearButtonEvent","clearSearchEvent","export","openWorkspace","Thematics","selectedItemType","node","childrens","thematics","value$","drawGuide$","overlayStyle$","drawStyle$","geometryTypeField","geometryTypes","drawGuideField","drawGuidePlaceholder","PointStyle","PolyStyle","_thematicLength","loadThematicsList","child","value$$","radiusChanges$$","detach","collapse","expand","numSelected","numNodes","bool","selectedThematicsName","deselect","nodeSelected","isPolygon","isPoint","drawZone","thematicLength","formValue","toggleSearchButton","clearButton","isPredefined","disableSearchButton","moment$1","OgcFilterTimeComponent","_defaultMin","_beginValue","_endValue","parseFilter","handleMin","handleMax","updateHoursMinutesArray","updateValues","intervalInt","toDate","subtract","_now","endOf","valueTmp","getDateTime","restrictedToStep","addStep","toISOString","stepMilliseconds","datePicker","stepIsYearDuration","stepIsMonthDuration","months","weeks","days","hours","week","dateValue","monthDiff","dateValuePlus1","asMonths","stepIsWeekDuration","weekDiff","asWeeks","stepIsDayDuration","dayDiff","_mod","asDays","stepIsHourDuration","asHours","stepIsMinuteDuration","valuetmp","valuetmp2","checkEndValue","handleHourIncrement","handleMinuteIncrement","beginTmp","endTmp","fullBeginHoursArray","fullEndHoursArray","fullBeginMinutesArray","fullEndMinutesArray","restrictToStep","endDatepickerTime","beginDatepickerTime","beginTime","endTime","_r29","IgoFilterModule","ExportError","ExportInvalidFileError","setPrototypeOf","ExportNothingToExportError","ExportFormat","EncodingFormat","ExportService","aggregateInComment","ogreUrl","gpxAggregateInComment","encoding","exportOlFeatures","generateFeature","exportAsync","GPX","generateAggratedFeature","comment","nothingToExport","ogreFormats","noOgreFallbacks","exportToFile","exportWithOgre","content","fileName","writeFeatures","uri","setAttribute","encodingType","featuresText","UTF8","acceptCharset","enctype","LATIN1","geojsonField","outputNameField","outputName","ogreFormat","outputFormatField","submit","GML","KML","Shapefile","CSVcomma","CSVsemicolon","ImportError","ImportInvalidFileError","ImportUnreadableFileError","ImportNothingToImportError","ImportSizeError","ImportSRSError","handleFileImportSuccess","file","styleListService","computeLayerTitleFromFile","getStyleList","messageTitle","handleInvalidFileImportError","handleUnreadbleFileImportError","handleSizeFileImportError","sizeMb","handleSRSImportError","getFileExtension","ImportService","configFileSizeMb","clientSideFileSizeMax","importAsync","extension","allowedMimeTypes","allowedZipMimeTypes","allowedExtensions","importFile","importFileWithOgre","importer","getFileImporter","parseFeaturesFromFile","readAsText","FormData","parseFeaturesFromGeoJSON","errMsg","msg","GeoJSON$1","writeFeatureObject","StyleListService","styleList","baseStyleList","styleListResponse","ImportExportComponent","importService","exportService","storageService","controlFormat","espgCodeRegex","popupChecked","previousLayerSpecs$","selectedMode","selectMode","exportOptions$","exportOptionsChange","loadConfig","layers$$","exportOptions$$","exportOptions","computeFormats","formLayer$$","handlePopup","layersId","handlePreviousLayerSpecs","selectedLayers","previousSpecs","formats$$","formats","encodings$$","encodings","exportableLayers$$","wksFromLayerId","wksFromLayer","getWorkspaceByLayerId","firstBy","layersWithSelection","specs","import","onFileImportSuccess","onFileImportError","preCheck","p2","closed","onPopupBlockedError","popupAllowed","filename","dSOptions","wks","featureInMapExtent","onFileExportError","onFileExportSuccess","extraMessage","loadEncodings","formatsType","onlyUrl","onlyVector","vectorAndUrl","validatedListFormat","validateListFormat","GeoJSON","onImportExportChange","STYLELIST_OPTIONS","provideStyleListOptions","styleListFactory","IgoStyleListModule","IgoImportExportModule","IgoMapModule","MeasurerItemComponent","_auto","measureUnitChange","toggleAutoUnit","measure$$","computeBestMeasureUnit","converted","possibleUnits","onMeasureUnitChange","auto","measureUnits","IgoMeasurerModule","IgoMeasureModule","OverlayAction","OverlayService","features$","OverlayDirective","overlayService","features$$","handleFeatures","IgoOverlayModule","PrintOutputFormat","PrintPaperFormat","PrintOrientation","PrintResolution","PrintSaveImageFormat","PrintService","paperFormat","orientation","doc","dimensions","internal","margins","addTitle","showProjection","showScale","addProjScale","addComment","addMap","addLegend","saveDoc","legends","newContext","getContext","heightPos","legendUrls","legendImage","Image","fillText","drawImage","doZipFile","getLayersLegendHtml","div","useCORS","canvas","generateCanvaFileToZip","saveCanvasImageAsFile","catch","pageWidth","titleWidth","titleMarginLeft","setFont","setFontSize","heightPixels","textProjScale","imgData","toDataURL","addPage","imageSize","getImageSizeToFitPdf","addImage","rect","mapSize","widthPixels","timeout","once","getViewport","mapStatus$$","mapStatus","addCanvas","renderMap","nbFileToProcess","oldCanvas","newCanvas","positionHCanvas","positionWProjScale","commentWidth","measureText","positionHProjScale","commentNbLine","ceil","positionHComment","fillStyle","fillRect","projText","scaleText","mapScale","CommentLengthToCut","positionLastBlank","commentCurrentLine","positionFirstCutChar","tiwContent","getWorldFileInformation","addFileToZip","saveFileProcessing","renderSync","save","pageHeight","getHeight","canHeight","canWidth","heightRatio","widthRatio","maxRatio","currentResolution","blobFormat","msSaveBlob","msToBlob","toBlob","zipFile","getZipFile","generateAsync","PrintComponent","printService","_outputFormat","_paperFormat","_orientation","_imageFormat","_resolution","isPrintService","print","imageFormat","defineNbFileToProcess","downloadMapImage","getLayersLegendImage","handleFormSubmit","PrintFormComponent","outputFormats","paperFormats","orientations","imageFormats","imageFormatField","Jpeg","onlySelf","Pdf","paperFormatField","Letter","orientationField","landscape","resolutionField","titleField","commentField","showProjectionField","showScaleField","showLegendField","doZipFileField","submitted","toggleImageSaveProp","IgoPrintModule","querySearchSourceFactory","IgoQueryModule","SearchSourceService","getSources","sourceCanSearch","sourceCanReverseSearch","reverseSearch","sourceCanReverseSearchAsSummary","SearchService","searchSourceService","termIsValid","opts","lonLat","coordStr","negativeLon","degreesLon","minutesLon","secondsLon","directionLon","decimalLon","negativeLat","degreesLat","minutesLat","secondsLat","directionLat","decimalLat","projectionStr","projectionRegex","lonLatPattern","lonLatRegex","dmsCoord","dmsCoordPattern","dmsRegex","patternUtm","utmRegex","patternMtm","mtmRegex","ddCoord","patternDd","ddRegex","dmdCoord","patternDmd","dmdRegex","patternBELL","bellRegex","mmPattern","mmRegex","isXYCoords","toLocaleUpperCase","trim","epsgUtm","epsgMtm","forceNA","dest","getEnabledOnly","getEnabledSources","searchType","asPointerSummary","reverseSourceFonction","reverseSearchSources","DirectionsSource","DirectionsSourceService","directionsSourceServiceFactory","provideDirectionsSourceService","DirectionsService","directionsSourceService","directionsOptions","routeSource","DirectionsFormService","stopsCoordinates","stop","stopCoordinates","DirectionsFormComponent","directionsService","searchService","directionsFormService","changeDetectorRefs","invalidKeys","routesQueries$$","stream$","activeRoute$","focusOnStop","focusKey","stopsStore$","_activeRoute","_stopsStore","_routeFromFeatureDetail","showRouteGeometry","browserLanguage","stopsForm","directionsType","directionsMode","stopOrderPriority","directionsFixedStartEnd","createStop","initStores","initOlInteraction","subscribeToFormChange","handleTermChanged","routeFromFeatureDetail","setStops","stopsStore","handleLocationProposals","writeStopsToFormService","routeResponse","unsubscribeRoutesQueries","unlistenSingleClick","freezeStores","loadingStrategy","stopMarker","routeStore","selectedStopFeature","selectStop","translateStop","getLength","executeTranslation","selectedRoute","selectCoordinates","addStop","at","addStopOverlay","reverseSearchProposal","overview","translatedPos","translationCoordinates","alternatives","getRoutes","stopIndex","groupedLocations","roundedCoordinates","resultPos","stopsCounts","moveStop","fromValue","insert","stopsArray","directionsPos","getStopOverlayID","deleteStoreFeatureByID","removeAt","nbStops","formatInstruction","maneuver","modifier","bearing_after","exit","stepPosition","lastStep","directiveFr","directiveEn","translatedDirection","translateBearing","translatedModifier","translateModifier","directive","frAggregatedDirection","enAggregatedDirection","coma","bearing","summary","showRouteSegmentGeometry","routeSegmentCoordinates","geojsonGeom","previousVertex","routeFeature","routeExtent","geometryMapProjection","previousRoute","coords","getStopsCoordinates","copy","activeRouteDirective","wayPointList","wayPointsCnt","localCnt","searchProposals","search$$","currentStopIndex","keyIsValid","setTerm","handleMapClick","proposal","geomCoord","getFirstCoordinate","poly","getInteriorPoint","getInteriorPoints","indexPos","clickCoordinates","geolocateCoordinates","stopColor","stopText","stopID","previousStop","stopFeature","stopOpacity","txt","directionsKey","directionsUrl","pathname","vertexStyle","stopStyle","routeStyle","IgoDirectionsModule","searchSourceServiceFactory","IChercheSearchResultFormatter","IChercheSearchSource","formatter","title$","hashtagsLieuxToKeep","getAllowedTypes","ecmax","computeRequestParams","extractResults","typesMatched","computeOptionsParam","q","computeTerm","xMin","yMin","xMax","yMax","formatResult","dataToResult","computeProperties","dataType","highlight","title2","title3","nextPage","removeKeys","propertiesBlacklist","googleLinksProperties","GoogleMaps","googleMaps","googleMapsNom","getGoogleMapsCoordLink","getGoogleMapsNameLink","municipalite","GoogleStreetView","getGoogleStreetViewLink","routing","keep","h","getHashtagsValid","IChercheReverseSearchSource","subtitle","computeExtent","subtitleHtml","getSubtitle","defaultIChercheSearchResultFormatterFactory","ichercheSearchSourceFactory","ichercheReverseSearchSourceFactory","CoordinatesSearchResultFormatter","CoordinatesReverseSearchSource","rawCoord3857","convertedLonLat","igo2CoordFormat","utmName","rawCoordUtm","long","mtmName","rawCoordMtm","rawCoord","numericEpsgCode","roundedCoordString","coordLonLat","OpenStreetMap","getOpenStreetMapLink","defaultCoordinatesSearchResultFormatterFactory","CoordinatesReverseSearchSourceFactory","_projectionService","ILayerSearchResultFormatter","allowedKey","newKey","dataR","ILayerSearchSource","computeSearchRequestParams","computeLayerOptions","groupTitle","extractQueryParamsFromSourceUrl","metadataUrl","formatOpt","urls","urlOpt","ilayerSearchResultFormatterFactory","ilayerSearchSourceFactory","SEARCH_TYPES","SearchSelectorComponent","searchTypeChange","setSearchType","searchType$$","onSetSearchType","enableSourcesByType","IgoSearchSelectorModule","SearchSettingsComponent","hasPointerReverseSearchSource","lastKeyTime","now","searchSourceChange","hasReverseSearchSourcesForPointerSummary","textSearchSources","computeSourcesCheckAllBehavior","settingValue","enabledSourcesCnt","disabledSourcesCnt","computeSettingCheckAllBehavior","getSearchSources","fromTitleButton","IgoSearchSettingsModule","SearchBarComponent","placeholder$","appearance","minLength","searchSelector","searchSettings","searchTermChange","clearFeature","searchSettingsChange","stream$$","onSetTerm","handlePlaceholder","doSearch","slug","input","ss","researches$$","research","researches","onResearchCompleted","newResults","onKeyup","IgoSearchBarModule","SearchResultMode","SearchResultsComponent","pageIterator","settingsChange$","resultSelect","moreResults","resultMouseenter","resultMouseleave","_term","_results$","liftResults","groupResults","sortByOrder","r1","r2","displayOrder","grouped","sourceResults","results$","SearchResultsItemComponent","zoomEvent","titleHtmlProperty","SearchResultAddButtonComponent","layersSubcriptions","IgoSearchResultsModule","SearchPointerSummaryDirective","pointerSearchStore","reverseSearch$$","searchPointerSummaryFeatureId","igoSearchPointerSummaryDelay","igoSearchPointerSummaryEnabled","subscribeToPointerStore","pointerPositionSummaryMarker","unsubscribeToPointerStore","unsubscribeReverseSearch","store$$","resultsUnderPointerPosition","entitiesToPointerOverlay","closestResultByType","computeSummaryClosestFeature","summarizedClosestType","processedSummarizedClosestType","typeIndex","addPointerOverlay","onSearchCoordinate","_results","onSearch","pointerSummary","mouseout","backgroundFill","backgroundStroke","IgoSearchModule","OgcFilterComponent","OgcFilterWidget","ogcFilterWidgetFactory","provideOgcFilterWidget","IgoOgcFilterModule","WfsWorkspaceService","createFeatureStore","createTableTemplate","inMapExtentStrategy","selectedRecordStrategy","selectionStrategy","zoomAuto","createFilterInMapExtentStrategy","columnsFromFeatures","col","FeatureWorkspaceService","WorkspaceSelectorDirective","wfsWorkspaceService","featureWorkspaceService","onLayersChange","editableLayers","layerIsEditable","editableLayersIds","workspacesToAdd","getOrCreateWorkspace","workspacesToRemove","workspaceStore","createWorkspace","IgoWorkspaceUpdatorModule","IgoGeoWorkspaceModule","DirectionsFormat","SourceDirectionsType","OsrmDirectionsSource","_name","directionsParams","getRouteParams","extractRoutesData","formatRoute","waypoints","geometries","roadNetworkRoute","stepsUI","legs","leg","sourceType","weight_name","osrmDirectionsSourcesFactory","CadastreSearchSource","endsWith","numero","lot","computeGeometry","NoLot","cadastreSearchSourceFactory","NominatimSearchSource","place_id","display_name","osm_type","boundingbox","computeTermTags","tag","computeTermSettings","nominatimSearchSourceFactory","mapExtentStrategyActiveToolTip","featureMotionStrategyActiveToolTip","noElementSelected","AppSimpleMapRoutingModule","AppSimpleMapComponent","pointerCoordDelay","pointerCoord","onPointerMove","AppSimpleMapModule","AppLayerRoutingModule","AppLayerComponent","AppLayerModule","AppLegendRoutingModule","AppLegendComponent","AppLegendModule","AppOverlayRoutingModule","AppOverlayComponent","setFeatures","AppOverlayModule","AppGeometryRoutingModule","AppGeometryComponent","AppGeometryModule","AppFeatureRoutingModule","AppFeatureComponent","AppFeatureModule","AppMeasureRoutingModule","AppMeasureComponent","AppMeasureModule","AppQueryRoutingModule","AppQueryComponent","feature$","feature1","feature2","feature3","handleQueryResults","AppQueryModule","AppCatalogRoutingModule","AppCatalogComponent","catalogStore","catalogItemStore","loadCatalogs","loadCatalogItems","onCatalogSelectChange","AppCatalogModule","ContextListComponent_mat_form_field_1_button_3_Template","clearFilter","ContextListComponent_mat_form_field_1_Template","ContextListComponent_button_2_Template","toggleSort","ContextListComponent_button_3_Template","ContextListComponent_igo_actionbar_4_Template","ContextListComponent_button_5_Template","ContextListComponent_ng_container_8_button_3_Template","user_r17","ContextListComponent_ng_container_8_button_4_Template","ContextListComponent_ng_container_8_mat_checkbox_7_Template","child_r24","userSelection","getPermission","ContextListComponent_ng_container_8_Template","indeterminate","childs","ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template","context_r36","edit","hideContext","showContext","favorite","manageTools","managePermissions","selectedContext","defaultContextId","ContextListComponent_ng_template_14_igo_collapsible_0_Template","groupContexts_r32","ctx_r49","titleMapping","ContextListComponent_ng_template_14_1_ng_template_0_Template","_r56","context_r54","ctx_r53","ContextListComponent_ng_template_14_1_Template","ContextListComponent_ng_template_14_Template","ContextItemComponent_button_1_mat_icon_2_Template","ContextItemComponent_button_1_img_3_Template","iconImage","ContextItemComponent_button_1_Template","favoriteClick","ContextItemComponent_div_4_button_1_Template","ContextItemComponent_div_4_button_4_Template","ContextItemComponent_div_4_button_5_Template","ContextItemComponent_div_4_button_6_Template","ContextItemComponent_div_4_button_7_Template","ContextItemComponent_div_4_button_8_Template","ctx_r24","ContextItemComponent_div_4_button_9_Template","ContextItemComponent_div_4_Template","permission","typePermission","write","imported","canShare","TypePermission","ContextService","context$","contexts$","ours","defaultContextId$","editedContext$","importedContext","mapViewFromRoute","basePath","contextListFile","defaultContextUri","readParamsFromRoute","contexts","handleContextsChange","loadContexts","_defaultContextUri","permissions","contextCreated","contextCloned","contextId","toolId","profil","permissionId","getPath","urlBase","resBase","resMerge","l2","t2","err2","getLocalContexts","loadFct","direct","getDefault","_context","addContextToList","setContext","loadContext","contextParam","getContextByUri","handleContextMessage","currentContext","keepCurrentView","setEditedContext","global","extraFeatures","currentLayers","layerFound","contextLayer","catalogLayer","writer","Cluster","contextMessage","contextToLoad","getDetails","getLocalContext","permissionError","titleContext","keepCurrentContext","editedContext","findContext","loadDefaultContext","editedFound","contextSimplifie","public","found","IgoContextImportExportModule","MapContextDirective","contextService","context$$","handleContextChange","viewContext","LayerContextDirective","contextLayers","removeLayersOnContextChange","queryParams$$","removeAllLayers","layersAndIndex$","computeLayerVisibilityFromUrl","currentLayerid","contextParams","visibleOnLayersParams","visibleOffLayersParams","visiblelayers","invisiblelayers","ContextListControlsEnum","BookmarkDialogComponent","ContextListComponent","contextsInitial","_contexts","showHiddenContexts","filterPermissionsChanged","shared","showHidden","showContextFilter","thresholdToFilter","_selectedContext","_defaultContextId","filterContextsList","createContext","sortedAlpha","sortContextsList","updateContexts","publics","totalLength","contextsList","parentPermission","childrenPermission","showFilter","users","ContextListBindingDirective","confirmDialogService","loadEditedContext","contextFromMap","getContextFromMap","msgSuccess","setDefault","confirm","titleD","contexts$$","defaultContextId$$","selectedContext$$","authenticate","getProfilByUser","profils","profilsAcc","cur","onSelect","onEdit","onSave","onFavorite","onManageTools","onManagePermissions","onDelete","onClone","onCreate","onShowContext","onHideContext","ContextItemComponent","_default","PoiService","IgoContextMapButtonModule","IgoContextManagerModule","ImportExportState","selectedMode$","ToolState","importExportState","openSidenav$","toolToActivate","setsExportOptions","setMode","StorageState","igoStorageService","FeatureActionsService","storageState","toolState","zoomAuto$","storageChange$$","buildActions","storageChange","handleZoomAuto","rowsInMapExtent","filterStrategy","filterSelectionStrategy","toolToActivateFromOptions","WfsActionsService","ogcFilterWidget","activateWidget","WorkspaceState","featureActionsService","wfsActionsService","workspacePanelExpanded","workspaceEnabled$","activeWorkspaceWidget$","workspace$","initWorkspaces","workspaces","loadActions","activeWorkspace$$","activeWorkspaceWidget$$","teardownWorkspaces","SearchState","searchTerm$","searchDisabled$","searchSettingsChange$","selectedResult$","searchTerm","IgoAppSearchBarModule","IgoAppSearchResultsToolModule","IgoAppSearchModule","AppSearchRoutingModule","AppSearchComponent","searchState","osmLayer","searchStore","selectedFeature","tryAddFeatureToMap","onOpenGoogleMaps","onOpenGoogleStreetView","mapPosition","getCoordinateFromPixel","contextmenuPoint","mapBrowser","getBoundingClientRect","top","scrollY","left","scrollX","onContextMenuOpen","onPointerSummaryStatusChange","onSearchTermChange","removeFeatureFromMap","onResultFocus","AppSearchModule","AppPrintRoutingModule","AppPrintComponent","AppPrintModule","AppImportExportRoutingModule","AppImportExportComponent","AppImportExport","AppDirectionsRoutingModule","AppDirectionsComponent","AppDirectionsModule","AppTimeFilterRoutingModule","AppTimeFilterComponent","AppTimeFilterModule","AppOgcFilterRoutingModule","AppOgcFilterComponent","circle","AppOgcFilterModule","AppSpatialFilterRoutingModule","AppSpatialFilterComponent","selectedFeature$","spatialListStore","loadFilterList","loadThematics","tryAddFeaturesToMap","loadFilterItem","featuresPoint","featuresLinePoly","idPoint","idLinePoly","tryAddPointToMap","tryAddLayerToMap","zoomToFeatureExtent","_internal","featuresOl","getOutputType","getOutputQueryType","getOutputToggleSearch","getOutputClearSearch","AppSpatialFilterModule","AppWorkspaceRoutingModule","AppWorkspaceComponent","workspaceState","Instant","selectedWorkspace$","workspacePaginator","AppWorkspaceModule","AppContextRoutingModule","AppContextComponent","AppContextModule","redirectTo","pathMatch","AppRoutingModule","useHash","AppComponent","changeDetectorRef","media","themeClass","mobileQuery","matchMedia","_mobileQueryListener","addEventListener","detectOldBrowser","removeEventListener","satisfies","ie","chrome","firefox","getBrowser","AppModule","domSanitizer","addSvgIconSet","webpackContext","webpackContextResolve","__webpack_require__","module","exports","webpackEmptyAsyncContext"],"mappings":"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","sourceRoot":"webpack:///","sourcesContent":["interface Environment {\n  production: boolean;\n  igo: any;\n}\n\nexport const environment: Environment = {\n  production: true,\n  igo: {\n    projections: [\n      {\n        code: 'EPSG:32198',\n        alias: 'Quebec Lambert',\n        def:\n          '+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs',\n        extent: [-886251.0296, 180252.9126, 897177.3418, 2106143.8139]\n      }\n    ],\n    auth: {\n      intern: {\n        enabled: true\n      },\n      allowAnonymous: true\n    },\n    interactiveTour: {\n      tourInMobile: true\n    },\n    importExport: {\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ogre'\n    },\n    language: {\n      prefix: './locale/'\n    },\n    catalog: {\n      sources: [\n        {\n          id: 'Gououvert',\n          title: 'Gouvouvert',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi'\n        },\n        {\n          id: 'DefiningInfoFormat',\n          title: 'Defining info_format',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          queryFormat: {\n            html: '*',\n            'application/json': [\n              'stations_meteoroutieres',\n              'histo_stations_meteoroutieres'\n            ]\n          },\n          queryHtmlTarget: 'iframe',\n          count: 30\n        },\n        {\n          id: 'catalogwithregex',\n          title: 'Filtered catalog by regex',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          regFilters: ['zpegt']\n        },\n        {\n          id: 'catalogwithtooltipcontrol',\n          title: 'Controling tooltip format',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          tooltipType: 'abstract' // or title\n        }\n      ]\n    },\n    searchSources: {\n      nominatim: {\n        enabled: false\n      },\n      icherche: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\n        order: 2,\n        enabled: true,\n        params: {\n          limit: '8'\n        }\n      },\n      coordinatesreverse: {\n        showInPointerSummary: true\n      },\n      icherchereverse: {\n        showInPointerSummary: true,\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\n        order: 3,\n        enabled: true\n      },\n      ilayer: {\n        searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/layers/search',\n        order: 4,\n        enabled: true,\n        params: {\n          limit: '5'\n        }\n      }\n    }\n  }\n};\n","import { getParser } from 'bowser';\nimport { Subject } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\n\n/* tslint:disable */\nconst ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nclass Base64 {\n    static getByte(s, i) {\n        const x = s.charCodeAt(i);\n        return x;\n    }\n    static getByte64(s, i) {\n        const idx = this.ALPHA.indexOf(s.charAt(i));\n        return idx;\n    }\n    static decode(s) {\n        let pads = 0, i, b10, imax = s.length, x = [];\n        s = String(s);\n        if (imax === 0) {\n            return s;\n        }\n        if (s.charAt(imax - 1) === this.PADCHAR) {\n            pads = 1;\n            if (s.charAt(imax - 2) === this.PADCHAR) {\n                pads = 2;\n            }\n            imax -= 4;\n        }\n        for (i = 0; i < imax; i += 4) {\n            b10 =\n                (this.getByte64(s, i) << 18) |\n                    (this.getByte64(s, i + 1) << 12) |\n                    (this.getByte64(s, i + 2) << 6) |\n                    this.getByte64(s, i + 3);\n            x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 255, b10 & 255));\n        }\n        switch (pads) {\n            case 1:\n                b10 =\n                    (this.getByte64(s, i) << 18) |\n                        (this.getByte64(s, i + 1) << 12) |\n                        (this.getByte64(s, i + 2) << 6);\n                x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 255));\n                break;\n            case 2:\n                b10 = (this.getByte64(s, i) << 18) | (this.getByte64(s, i + 1) << 12);\n                x.push(String.fromCharCode(b10 >> 16));\n                break;\n        }\n        return x.join('');\n    }\n    static encode(s) {\n        s = String(s);\n        let i, b10, x = [], imax = s.length - s.length % 3;\n        if (s.length === 0) {\n            return s;\n        }\n        for (i = 0; i < imax; i += 3) {\n            b10 =\n                (this.getByte(s, i) << 16) |\n                    (this.getByte(s, i + 1) << 8) |\n                    this.getByte(s, i + 2);\n            x.push(this.ALPHA.charAt(b10 >> 18));\n            x.push(this.ALPHA.charAt((b10 >> 12) & 63));\n            x.push(this.ALPHA.charAt((b10 >> 6) & 63));\n            x.push(this.ALPHA.charAt(b10 & 63));\n        }\n        switch (s.length - imax) {\n            case 1:\n                b10 = this.getByte(s, i) << 16;\n                x.push(this.ALPHA.charAt(b10 >> 18) +\n                    this.ALPHA.charAt((b10 >> 12) & 63) +\n                    this.PADCHAR +\n                    this.PADCHAR);\n                break;\n            case 2:\n                b10 = (this.getByte(s, i) << 16) | (this.getByte(s, i + 1) << 8);\n                x.push(this.ALPHA.charAt(b10 >> 18) +\n                    this.ALPHA.charAt((b10 >> 12) & 63) +\n                    this.ALPHA.charAt((b10 >> 6) & 63) +\n                    this.PADCHAR);\n                break;\n        }\n        return x.join('');\n    }\n}\nBase64.PADCHAR = '=';\nBase64.ALPHA = ALPHA;\n\nconst userAgent = getParser(window.navigator.userAgent);\n\nclass Clipboard {\n    static copy(element) {\n        let successful = false;\n        if (typeof element === 'string') {\n            const textArea = Clipboard.createTextArea(element);\n            Clipboard.selectText(textArea);\n            successful = Clipboard.copyTextToClipboard();\n            Clipboard.destroyTextArea(textArea);\n        }\n        else {\n            Clipboard.selectText(element);\n            successful = Clipboard.copyTextToClipboard();\n        }\n        return successful;\n    }\n    static createTextArea(text) {\n        const textArea = document.createElement('textArea');\n        textArea.value = text;\n        document.body.appendChild(textArea);\n        return textArea;\n    }\n    static destroyTextArea(textArea) {\n        document.body.removeChild(textArea);\n    }\n    static selectText(textArea) {\n        if (userAgent.getOSName() === 'iOS') {\n            const oldContentEditable = textArea.contentEditable;\n            const oldReadOnly = textArea.readOnly;\n            const range = document.createRange();\n            const selection = window.getSelection();\n            textArea.contenteditable = true;\n            textArea.readonly = false;\n            range.selectNodeContents(textArea);\n            selection.removeAllRanges();\n            selection.addRange(range);\n            textArea.setSelectionRange(0, 999999);\n            textArea.contentEditable = oldContentEditable;\n            textArea.readOnly = oldReadOnly;\n        }\n        else {\n            textArea.select();\n        }\n    }\n    static copyTextToClipboard() {\n        if (!(userAgent.getOSName() === 'iOS' && userAgent.compareVersion('<10'))) {\n            return document.execCommand('copy');\n        }\n        return false;\n    }\n}\n\nclass StringUtils {\n    static diff(s1, s2, p = 4) {\n        if (!s1 && !s2) {\n            return '';\n        }\n        if (!s1) {\n            return '<span class=\"inserted\">' + s2 + '</span>';\n        }\n        if (!s2) {\n            return '<span class=\"deleted\">' + s1 + '</span>';\n        }\n        s1 = s1.toString();\n        s2 = s2.toString();\n        const changeData = StringUtils.getChanges(s1, s2, '', p);\n        const nextS = s2.slice(changeData.mtc.length + changeData.ins.length + changeData.sbs.length); // remaining part of \"s\"\n        const nextThis = s1.slice(changeData.mtc.length + changeData.del.length + changeData.sbs.length); // remaining part of \"this\"\n        let result = ''; // the glorious result\n        if (changeData.del.length > 0) {\n            changeData.del = '<span class=\"deleted\">' + changeData.del + '</span>';\n        }\n        if (changeData.ins.length > 0) {\n            changeData.ins = '<span class=\"inserted\">' + changeData.ins + '</span>';\n        }\n        result = changeData.mtc + changeData.del + changeData.ins + changeData.sbs;\n        result +=\n            nextThis !== '' || nextS !== ''\n                ? StringUtils.diff(nextThis, nextS, p)\n                : '';\n        return result;\n    }\n    static getMatchingSubstring(s, l, m) {\n        // returns the first matching substring in-between the two strings\n        let i = 0;\n        let match = false;\n        const slen = s.length;\n        const o = { fis: slen, mtc: m, sbs: '' }; // temporary object used to construct the cd (change data) object\n        while (i < slen) {\n            l[i] === s[i]\n                ? match\n                    ? (o.sbs += s[i]) // o.sbs holds the matching substring itsef\n                    : ((match = true), (o.fis = i), (o.sbs = s[i]))\n                : match\n                    ? (i = slen) // stop after the first found substring\n                    : (i = i);\n            ++i;\n        }\n        return o;\n    }\n    static getChanges(s1, s2, m, p) {\n        const isThisLonger = s1.length >= s1.length ? true : false;\n        let [longer, shorter] = isThisLonger ? [s1, s2] : [s2, s1]; // assignment of longer and shorter by es6 destructuring\n        let bi = 0; // base index designating the index of first mismacthing character in both strings\n        while (shorter[bi] === longer[bi] && bi < shorter.length) {\n            ++bi;\n        } // make bi the index of first mismatching character\n        longer = longer.split('').slice(bi); // as the longer string will be rotated it is converted into array\n        shorter = shorter.slice(bi); // shorter and longer now starts from the first mismatching character\n        const len = longer.length; // length of the longer string\n        let cd = {\n            fis: shorter.length,\n            fil: len,\n            sbs: '',\n            mtc: m + s2.slice(0, bi)\n        }; // if exists mtc holds the matching string at the front\n        let sub = { sbs: '' }; // returned substring per 1 character rotation of the longer string\n        if (shorter !== '') {\n            for (let rc = 0; rc < len && sub.sbs.length < p; rc++) {\n                // rc -> rotate count, p -> precision factor\n                sub = StringUtils.getMatchingSubstring(shorter, StringUtils.rotateArray(longer, rc), cd.mtc); // rotate longer string 1 char and get substring\n                sub.fil =\n                    rc < len - sub.fis\n                        ? sub.fis + rc // mismatch is longer than the mismatch in short\n                        : sub.fis - len + rc; // mismatch is shorter than the mismatch in short\n                if (sub.sbs.length > cd.sbs.length) {\n                    cd = sub; // only keep the one with the longest substring.\n                }\n            }\n        }\n        // insert the mismatching delete subsrt and insert substr to the cd object and attach the previous substring\n        [cd.del, cd.ins] = isThisLonger\n            ? [longer.slice(0, cd.fil).join(''), shorter.slice(0, cd.fis)]\n            : [shorter.slice(0, cd.fis), longer.slice(0, cd.fil).join('')];\n        return cd.del.indexOf(' ') === -1 ||\n            cd.ins.indexOf(' ') === -1 ||\n            cd.del === '' ||\n            cd.ins === '' ||\n            cd.sbs === ''\n            ? cd\n            : StringUtils.getChanges(cd.del, cd.ins, cd.mtc, p);\n    }\n    static rotateArray(array, n) {\n        const len = array.length;\n        const res = new Array(array.length);\n        if (n % len === 0) {\n            return array.slice();\n        }\n        else {\n            for (let i = 0; i < len; i++) {\n                res[i] = array[(i + (len + (n % len))) % len];\n            }\n        }\n        return res;\n    }\n}\n\nvar ChangeType;\n(function (ChangeType) {\n    ChangeType[\"ADDED\"] = \"added\";\n    ChangeType[\"DELETED\"] = \"deleted\";\n    ChangeType[\"MODIFIED\"] = \"modified\";\n})(ChangeType || (ChangeType = {}));\n\nclass ChangeUtils {\n    static findChanges(obj1, obj2, ignoreKeys = []) {\n        const items = {\n            added: [],\n            deleted: [],\n            modified: []\n        };\n        if (!obj1 || !obj2) {\n            return items;\n        }\n        const obj1Clone = [...obj1];\n        const obj2Clone = [...obj2];\n        for (const fromItem of obj1Clone) {\n            const index = obj2Clone.findIndex(s => s.id === fromItem.id);\n            if (index === -1) {\n                items.deleted.push({\n                    change: { type: ChangeType.DELETED },\n                    value: fromItem\n                });\n                continue;\n            }\n            const toItem = obj2Clone.splice(index, 1)[0];\n            const fromItemClone = JSON.parse(JSON.stringify(fromItem));\n            const toItemClone = JSON.parse(JSON.stringify(toItem));\n            const keysChanged = ChangeUtils.compareObject(fromItemClone, toItemClone, undefined, ignoreKeys);\n            if (keysChanged.length) {\n                items.modified.push({\n                    change: {\n                        type: ChangeType.MODIFIED,\n                        keysChanged\n                    },\n                    value: fromItemClone,\n                    oldValue: fromItem,\n                    newValue: toItem\n                });\n            }\n        }\n        items.added = obj2Clone.map(itemAdded => {\n            return {\n                change: { type: ChangeType.ADDED },\n                value: itemAdded\n            };\n        });\n        return items;\n    }\n    static compareObject(fromItem, toItem, baseKey, ignoreKeys = []) {\n        const fromItemClone = JSON.parse(JSON.stringify(fromItem));\n        const toItemClone = JSON.parse(JSON.stringify(toItem));\n        const keys = new Set([\n            ...Object.keys(fromItem),\n            ...Object.keys(toItem)\n        ]);\n        let keysChanged = [];\n        keys.forEach(key => {\n            const keyString = baseKey ? `${baseKey}.${key}` : key;\n            if (ignoreKeys.indexOf(keyString) !== -1) {\n                return;\n            }\n            if (Array.isArray(fromItem[key])) {\n                fromItem[key] = fromItem[key].join(',<br>');\n            }\n            if (Array.isArray(toItem[key])) {\n                toItem[key] = toItem[key].join(',<br>');\n            }\n            if (typeof fromItem[key] === 'object' &&\n                typeof toItem[key] === 'object' &&\n                fromItem[key] !== null &&\n                toItem[key] !== null) {\n                keysChanged = keysChanged.concat(this.compareObject(fromItem[key], toItem[key], keyString));\n            }\n            else {\n                if (fromItem[key] !== toItem[key]) {\n                    keysChanged.push({\n                        key: keyString,\n                        oldValue: fromItemClone[key],\n                        newValue: toItemClone[key]\n                    });\n                    fromItem[key] = StringUtils.diff(fromItem[key], toItem[key]);\n                }\n            }\n        });\n        return keysChanged;\n    }\n}\n\n/**\n * Trigger download of a file\n *\n * @param content File content\n * @param mimeType File mime type\n * @param fileName File name\n */\nfunction downloadContent(content, mimeType, fileName) {\n    const uri = `data:${mimeType},${encodeURIComponent(content)}`;\n    downloadFromUri(uri, fileName);\n}\n/**\n * Trigger download of a file\n *\n * @param content File content\n * @param mimeType File mime type\n * @param fileName File name\n */\nfunction downloadFromUri(uri, fileName) {\n    const element = document.createElement('a');\n    element.setAttribute('href', uri);\n    element.setAttribute('download', fileName);\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n}\n\nclass ObjectUtils {\n    static resolve(obj, key) {\n        const keysArray = key\n            .replace(/\\[/g, '.')\n            .replace(/\\]/g, '')\n            .split('.');\n        let current = obj;\n        while (keysArray.length) {\n            if (typeof current !== 'object') {\n                return undefined;\n            }\n            current = current[keysArray.shift()];\n        }\n        return current;\n    }\n    static isObject(item) {\n        return (item &&\n            typeof item === 'object' &&\n            !Array.isArray(item) &&\n            item !== null &&\n            !(item instanceof Date));\n    }\n    static mergeDeep(target, source, ignoreUndefined = false) {\n        const output = Object.assign({}, target);\n        if (ObjectUtils.isObject(target) && ObjectUtils.isObject(source)) {\n            Object.keys(source)\n                .filter(key => !ignoreUndefined || source[key] !== undefined)\n                .forEach(key => {\n                if (ObjectUtils.isObject(source[key])) {\n                    if (!(key in target)) {\n                        Object.assign(output, { [key]: source[key] });\n                    }\n                    else {\n                        output[key] = ObjectUtils.mergeDeep(target[key], source[key], ignoreUndefined);\n                    }\n                }\n                else {\n                    Object.assign(output, { [key]: source[key] });\n                }\n            });\n        }\n        return output;\n    }\n    static copyDeep(src) {\n        const target = Array.isArray(src) ? [] : {};\n        for (const prop in src) {\n            if (src.hasOwnProperty(prop)) {\n                const value = src[prop];\n                if (value && typeof value === 'object') {\n                    target[prop] = this.copyDeep(value);\n                }\n                else {\n                    target[prop] = value;\n                }\n            }\n        }\n        return target;\n    }\n    static removeDuplicateCaseInsensitive(obj) {\n        const summaryCapitalizeObject = {};\n        const capitalizeObject = {};\n        const upperCaseCount = [];\n        for (const property in obj) {\n            if (obj.hasOwnProperty(property)) {\n                const upperCaseProperty = property.toUpperCase();\n                if (!summaryCapitalizeObject.hasOwnProperty(upperCaseProperty)) {\n                    summaryCapitalizeObject[upperCaseProperty] = [\n                        { [property]: obj[property] }\n                    ];\n                }\n                else {\n                    summaryCapitalizeObject[upperCaseProperty].push({\n                        [property]: obj[property]\n                    });\n                }\n                // counting the number of uppercase lettersMna\n                upperCaseCount.push({\n                    key: property,\n                    count: property.replace(/[^A-Z]/g, '').length\n                });\n            }\n        }\n        for (const capitalizedProperty in summaryCapitalizeObject) {\n            if (summaryCapitalizeObject.hasOwnProperty(capitalizedProperty)) {\n                if (summaryCapitalizeObject.hasOwnProperty(capitalizedProperty)) {\n                    const capitalizedPropertyObject = summaryCapitalizeObject[capitalizedProperty];\n                    if (capitalizedPropertyObject.length === 1) {\n                        // for single params (no duplicates)\n                        const singlePossibility = capitalizedPropertyObject[0];\n                        capitalizeObject[capitalizedProperty] =\n                            singlePossibility[Object.keys(singlePossibility)[0]];\n                    }\n                    else if (capitalizedPropertyObject.length > 1) {\n                        // defining the closest to lowercase property\n                        const paramClosestToLowercase = upperCaseCount\n                            .filter(f => f.key.toLowerCase() === capitalizedProperty.toLowerCase())\n                            .reduce((prev, current) => {\n                            return prev.y < current.y ? prev : current;\n                        });\n                        capitalizeObject[paramClosestToLowercase.key.toUpperCase()] =\n                            obj[paramClosestToLowercase.key];\n                    }\n                }\n            }\n        }\n        for (const property in obj) {\n            if (obj.hasOwnProperty(property)) {\n                delete obj[property];\n            }\n        }\n        for (const property in capitalizeObject) {\n            if (capitalizeObject.hasOwnProperty(property)) {\n                obj[property] = capitalizeObject[property];\n            }\n        }\n    }\n    static removeUndefined(obj) {\n        const output = {};\n        if (ObjectUtils.isObject(obj)) {\n            Object.keys(obj)\n                .filter(key => obj[key] !== undefined)\n                .forEach(key => {\n                if (ObjectUtils.isObject(obj[key]) || Array.isArray(obj[key])) {\n                    output[key] = ObjectUtils.removeUndefined(obj[key]);\n                }\n                else {\n                    output[key] = obj[key];\n                }\n            });\n            return output;\n        }\n        if (Array.isArray(obj)) {\n            return obj.map(o => ObjectUtils.removeUndefined(o));\n        }\n        return obj;\n    }\n    static removeNull(obj) {\n        const output = {};\n        if (ObjectUtils.isObject(obj)) {\n            Object.keys(obj)\n                .filter(key => obj[key] !== null)\n                .forEach(key => {\n                if (ObjectUtils.isObject(obj[key]) || Array.isArray(obj[key])) {\n                    output[key] = ObjectUtils.removeNull(obj[key]);\n                }\n                else {\n                    output[key] = obj[key];\n                }\n            });\n            return output;\n        }\n        if (Array.isArray(obj)) {\n            return obj.map(o => ObjectUtils.removeNull(o));\n        }\n        return obj;\n    }\n    static naturalCompare(a, b, direction = 'asc', nullsFirst) {\n        if (direction === 'desc') {\n            b = [a, (a = b)][0];\n        }\n        // nullsFirst = undefined : end if direction = 'asc', first if direction = 'desc'\n        // nullsFirst = true : always first\n        // nullsFirst = false : always end\n        if (a === null ||\n            a === '' ||\n            a === undefined ||\n            b === null ||\n            b === '' ||\n            b === undefined) {\n            const nullScore = a === b\n                ? 0\n                : a === undefined\n                    ? 3\n                    : b === undefined\n                        ? -3\n                        : a === null\n                            ? 2\n                            : b === null\n                                ? -2\n                                : a === ''\n                                    ? 1\n                                    : -1;\n            if (direction === 'desc') {\n                return nullsFirst !== false ? nullScore : nullScore * -1;\n            }\n            return nullsFirst === true ? nullScore * -1 : nullScore;\n        }\n        const ax = [];\n        const bx = [];\n        a = '' + a;\n        b = '' + b;\n        a.replace(/(\\d+)|(\\D+)/g, (_, $1, $2) => {\n            ax.push([$1 || Infinity, $2 || '']);\n        });\n        b.replace(/(\\d+)|(\\D+)/g, (_, $1, $2) => {\n            bx.push([$1 || Infinity, $2 || '']);\n        });\n        while (ax.length && bx.length) {\n            const an = ax.shift();\n            const bn = bx.shift();\n            const nn = an[0] - bn[0] || an[1].localeCompare(bn[1]);\n            if (nn) {\n                return nn;\n            }\n        }\n        return ax.length - bx.length;\n    }\n    /**\n     * Return true if two object are equivalent.\n     * Objects are considered equivalent if they have the same properties and\n     * if all of their properties (first-level only) share the same value.\n     * @param obj1 First object\n     * @param obj2 Second object\n     * @returns Whether two objects arer equivalent\n     */\n    static objectsAreEquivalent(obj1, obj2) {\n        if (obj1 === obj2) {\n            return true;\n        }\n        const obj1Props = Object.getOwnPropertyNames(obj1);\n        const obj2Props = Object.getOwnPropertyNames(obj2);\n        if (obj1Props.length !== obj2Props.length) {\n            return false;\n        }\n        for (const prop of obj1Props) {\n            if (obj1[prop] !== obj2[prop]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Return a new object with an array of keys removed\n     * @param obj Source object\n     * @param keys Keys to remove\n     * @returns A new object\n     */\n    static removeKeys(obj, keys) {\n        const newObj = Object.keys(obj)\n            .filter(key => keys.indexOf(key) < 0)\n            .reduce((_obj, key) => {\n            _obj[key] = obj[key];\n            return _obj;\n        }, {});\n        return newObj;\n    }\n}\n\n/** Utility function to create a K:V from a list of strings */\nfunction strEnum(o) {\n    return o.reduce((res, key) => {\n        res[key] = key;\n        return res;\n    }, Object.create(null));\n}\n\nfunction S4() {\n    // tslint:disable-next-line: no-bitwise\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\nfunction uuid() {\n    const id = `${S4()}${S4()}-${S4()}-${S4()}-${S4()}-${S4()}${S4()}${S4()}`;\n    return id.toLowerCase();\n}\n\nvar SubjectStatus;\n(function (SubjectStatus) {\n    SubjectStatus[SubjectStatus[\"Error\"] = 0] = \"Error\";\n    SubjectStatus[SubjectStatus[\"Done\"] = 1] = \"Done\";\n    SubjectStatus[SubjectStatus[\"Working\"] = 2] = \"Working\";\n    SubjectStatus[SubjectStatus[\"Waiting\"] = 3] = \"Waiting\";\n})(SubjectStatus || (SubjectStatus = {}));\nclass Watcher {\n    constructor() {\n        this.status$ = new Subject();\n    }\n    get status() {\n        return this._status;\n    }\n    set status(value) {\n        this._status = value;\n        this.status$.next(value);\n    }\n    // tslint:disable-next-line:ban-types\n    subscribe(callback, scope) {\n        this.watch();\n        this.status$$ = this.status$\n            .pipe(distinctUntilChanged())\n            .subscribe((status) => {\n            this.handleStatusChange(status);\n            callback.call(scope, this);\n        });\n    }\n    unsubscribe() {\n        this.unwatch();\n        if (this.status$$ !== undefined) {\n            this.status$$.unsubscribe();\n            this.status$$ = undefined;\n        }\n        this.status = SubjectStatus.Waiting;\n    }\n    handleStatusChange(status) { }\n}\n\n/*\n * Public API Surface of utils\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { Base64, ChangeType, ChangeUtils, Clipboard, ObjectUtils, S4, StringUtils, SubjectStatus, Watcher, downloadContent, downloadFromUri, strEnum, userAgent, uuid };\n\n//# sourceMappingURL=igo2-utils.js.map","import { ɵɵdefineInjectable, Injectable, NgModule, ɵɵinject, INJECTOR, Injector, InjectionToken, APP_INITIALIZER, Component, Input, Optional, SkipSelf, Inject, EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HTTP_INTERCEPTORS, HttpClient, HttpErrorResponse, HttpClientModule, HttpResponse } from '@angular/common/http';\nimport { DomSanitizer, HammerGestureConfig, HAMMER_GESTURE_CONFIG, HammerModule } from '@angular/platform-browser';\nimport { MatIconRegistry } from '@angular/material/icon';\nimport { finalize, catchError, map, tap, debounceTime, startWith } from 'rxjs/operators';\nimport { BehaviorSubject, throwError, of, combineLatest, fromEvent } from 'rxjs';\nimport { uuid, ObjectUtils } from '@igo2/utils';\nimport { TranslateLoader, TranslateModule, MissingTranslationHandler, TranslateService } from '@ngx-translate/core';\nimport { SimpleNotificationsModule, NotificationsService } from 'angular2-notifications';\nimport { ActivatedRoute } from '@angular/router';\nimport { Breakpoints, BreakpointObserver } from '@angular/cdk/layout';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@ngx-translate/core';\nimport * as ɵngcc2 from 'angular2-notifications';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from '@angular/material/icon';\nimport * as ɵngcc5 from '@angular/platform-browser';\nimport * as ɵngcc6 from '@angular/router';\nimport * as ɵngcc7 from '@angular/cdk/layout';\n\nconst _c0 = function (a0) { return { closeIcon: a0 }; };\nclass ActivityService {\n    constructor() {\n        this.counter$ = new BehaviorSubject(0);\n        this.ids = [];\n    }\n    register() {\n        const id = uuid();\n        this.ids.push(id);\n        this.counter$.next(this.ids.length);\n        return id;\n    }\n    unregister(id) {\n        const index = this.ids.indexOf(id);\n        if (index === -1) {\n            return;\n        }\n        this.ids.splice(index, 1);\n        this.counter$.next(this.ids.length);\n    }\n}\nActivityService.ɵfac = function ActivityService_Factory(t) { return new (t || ActivityService)(); };\nActivityService.ɵprov = ɵɵdefineInjectable({ factory: function ActivityService_Factory() { return new ActivityService(); }, token: ActivityService, providedIn: \"root\" });\nActivityService.ctorParameters = () => [];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ActivityService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nclass ActivityInterceptor {\n    constructor(activityService) {\n        this.activityService = activityService;\n    }\n    intercept(req, next) {\n        const activity = req.headers.get('activityInterceptor');\n        if (activity) {\n            const actReq = req.clone({\n                headers: req.headers.delete('activityInterceptor')\n            });\n            if (activity === 'false') {\n                return next.handle(actReq);\n            }\n        }\n        const id = this.activityService.register();\n        return next.handle(req).pipe(finalize(() => {\n            this.activityService.unregister(id);\n        }));\n    }\n}\nActivityInterceptor.ɵfac = function ActivityInterceptor_Factory(t) { return new (t || ActivityInterceptor)(ɵngcc0.ɵɵinject(ActivityService)); };\nActivityInterceptor.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ActivityInterceptor, factory: ActivityInterceptor.ɵfac });\nActivityInterceptor.ctorParameters = () => [\n    { type: ActivityService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ActivityInterceptor, [{\n        type: Injectable\n    }], function () { return [{ type: ActivityService }]; }, null); })();\n\nclass IgoActivityModule {\n    static forRoot() {\n        return {\n            ngModule: IgoActivityModule,\n            providers: [\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: ActivityInterceptor,\n                    multi: true\n                }\n            ]\n        };\n    }\n}\nIgoActivityModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoActivityModule });\nIgoActivityModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoActivityModule_Factory(t) { return new (t || IgoActivityModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoActivityModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nconst version = {\n    lib: '1.5.0',\n    releaseDate: 1602875118328\n};\n\nclass ConfigService {\n    constructor(injector) {\n        this.injector = injector;\n        this.config = {};\n    }\n    /**\n     * Use to get the data found in config file\n     */\n    getConfig(key) {\n        return ObjectUtils.resolve(this.config, key);\n    }\n    /**\n     * This method loads \"[path]\" to get all config's variables\n     */\n    load(options) {\n        const baseConfig = options.default || {};\n        if (!options.path) {\n            this.config = baseConfig;\n            return true;\n        }\n        const http = this.injector.get(HttpClient);\n        return new Promise((resolve, _reject) => {\n            http\n                .get(options.path)\n                .pipe(catchError((error) => {\n                console.log(`Configuration file ${options.path} could not be read`);\n                resolve(true);\n                return throwError(error.error || 'Server error');\n            }))\n                .subscribe((configResponse) => {\n                this.config = ObjectUtils.mergeDeep(ObjectUtils.mergeDeep({ version }, baseConfig), configResponse);\n                resolve(true);\n            });\n        });\n    }\n}\nConfigService.ɵfac = function ConfigService_Factory(t) { return new (t || ConfigService)(ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nConfigService.ɵprov = ɵɵdefineInjectable({ factory: function ConfigService_Factory() { return new ConfigService(ɵɵinject(INJECTOR)); }, token: ConfigService, providedIn: \"root\" });\nConfigService.ctorParameters = () => [\n    { type: Injector }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ConfigService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc0.Injector }]; }, null); })();\n\nlet CONFIG_OPTIONS = new InjectionToken('configOptions');\nfunction provideConfigOptions(options) {\n    return {\n        provide: CONFIG_OPTIONS,\n        useValue: options\n    };\n}\nfunction configFactory(configService, options) {\n    return () => configService.load(options);\n}\nfunction provideConfigLoader() {\n    return {\n        provide: APP_INITIALIZER,\n        useFactory: configFactory,\n        multi: true,\n        deps: [ConfigService, CONFIG_OPTIONS]\n    };\n}\n\nclass IgoConfigModule {\n    static forRoot() {\n        return {\n            ngModule: IgoConfigModule,\n            providers: [provideConfigOptions({}), provideConfigLoader()]\n        };\n    }\n}\nIgoConfigModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoConfigModule });\nIgoConfigModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoConfigModule_Factory(t) { return new (t || IgoConfigModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoConfigModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nclass LanguageLoader {\n    constructor(http, prefix, suffix = '.json', config) {\n        this.http = http;\n        this.prefix = prefix;\n        this.suffix = suffix;\n        this.config = config;\n    }\n    getTranslation(lang) {\n        const translation = require(`../locale/${lang}.json`);\n        const igoLocale$ = of(translation);\n        if (this.config && !this.prefix) {\n            this.prefix = this.config.getConfig('language.prefix');\n        }\n        if (!this.prefix) {\n            return igoLocale$;\n        }\n        const appLocale$ = this.http.get(`${this.prefix}${lang}${this.suffix}`);\n        const locale$ = combineLatest([igoLocale$, appLocale$]);\n        return locale$.pipe(map(translations => {\n            return ObjectUtils.mergeDeep(translations[0], translations[1]);\n        }));\n    }\n}\n\nfunction defaultLanguageLoader(http, config) {\n    return new LanguageLoader(http, undefined, undefined, config);\n}\nfunction provideLanguageLoader(loader) {\n    return {\n        provide: TranslateLoader,\n        useFactory: loader || defaultLanguageLoader,\n        deps: [HttpClient]\n    };\n}\nfunction provideDefaultLanguageLoader(loader) {\n    return {\n        provide: TranslateLoader,\n        useFactory: loader || defaultLanguageLoader,\n        deps: [HttpClient, ConfigService]\n    };\n}\n\nclass IgoMissingTranslationHandler {\n    handle(params) {\n        if (!params.translateService.langs.length) {\n            const error = 'Translations are not yet loaded. \\\n         Check that the LanguageService is injected.';\n            throw new Error(error);\n        }\n        if (params.key.substr(0, 4) === 'igo.') {\n            throw new Error(`The Key \"${params.key}\" is missing in locale file.`);\n        }\n        else {\n            return params.key;\n        }\n    }\n}\n\nclass IgoLanguageModule {\n    static forRoot() {\n        return {\n            ngModule: IgoLanguageModule,\n            providers: [provideDefaultLanguageLoader()]\n        };\n    }\n}\nIgoLanguageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoLanguageModule });\nIgoLanguageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoLanguageModule_Factory(t) { return new (t || IgoLanguageModule)(); }, imports: [[\n            TranslateModule.forRoot({\n                missingTranslationHandler: {\n                    provide: MissingTranslationHandler,\n                    useClass: IgoMissingTranslationHandler\n                }\n            })\n        ], TranslateModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoLanguageModule, { imports: function () { return [ɵngcc1.TranslateModule]; }, exports: function () { return [TranslateModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoLanguageModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    TranslateModule.forRoot({\n                        missingTranslationHandler: {\n                            provide: MissingTranslationHandler,\n                            useClass: IgoMissingTranslationHandler\n                        }\n                    })\n                ],\n                declarations: [],\n                exports: [TranslateModule]\n            }]\n    }], null, null); })();\n\nclass MessageCenterComponent {\n    constructor() {\n        this._options = {};\n    }\n    get options() {\n        return Object.assign({}, MessageCenterComponent.defaultOptions, this._options);\n    }\n    set options(value) {\n        this._options = value;\n    }\n}\nMessageCenterComponent.ɵfac = function MessageCenterComponent_Factory(t) { return new (t || MessageCenterComponent)(); };\nMessageCenterComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MessageCenterComponent, selectors: [[\"igo-message-center\"]], inputs: { options: \"options\" }, decls: 1, vars: 4, consts: [[1, \"mat-typography\", 3, \"ngClass\", \"options\"]], template: function MessageCenterComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"simple-notifications\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(2, _c0, ctx.options.hasCloseIcon))(\"options\", ctx.options);\n    } }, directives: [ɵngcc2.SimpleNotificationsComponent, ɵngcc3.NgClass], styles: [\"@charset \\\"UTF-8\\\";[_nghost-%COMP%]     div.simple-notification-wrapper{bottom:0;right:calc(50% - 150px)}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     div.simple-notification-wrapper{left:0;right:0;width:100%}}[_nghost-%COMP%]     div.simple-notification{margin-bottom:5px;min-height:50px;padding-left:45px;padding-right:25px}[_nghost-%COMP%]     div.simple-notification.noIcon{padding-left:25px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     div.simple-notification{margin-bottom:0}}[_nghost-%COMP%]     div.simple-notification .sn-title{font-size:15px;font-weight:700;line-height:23px}[_nghost-%COMP%]     div.simple-notification .sn-content{font-size:15px;line-height:18px}[_nghost-%COMP%]     div.simple-notification .icon{height:100%;left:0;padding:7px;top:0;width:45px}[_nghost-%COMP%]     div.simple-notification .icon\\u00A0 mat-icon{align-items:center;display:flex;font-size:32px;height:100%}[_nghost-%COMP%]     .closeIcon   .sn-title:after{content:\\\"close\\\";font-family:Material Icons;font-feature-settings:\\\"liga\\\" 1;font-size:24px;font-weight:400;position:absolute;right:5px;top:5px}\"] });\nMessageCenterComponent.defaultOptions = {\n    timeOut: 5000,\n    hasCloseIcon: false,\n    showProgressBar: true,\n    pauseOnHover: true,\n    clickToClose: true,\n    maxLength: 100,\n    maxStack: 3,\n    preventDuplicates: true\n};\nMessageCenterComponent.ctorParameters = () => [];\nMessageCenterComponent.propDecorators = {\n    options: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MessageCenterComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-message-center',\n                template: \"<simple-notifications\\n  class=\\\"mat-typography\\\"\\n  [ngClass]=\\\"{closeIcon: options.hasCloseIcon}\\\"\\n  [options]=\\\"options\\\">\\n</simple-notifications>\\n\",\n                styles: [\"@charset \\\"UTF-8\\\";:host ::ng-deep div.simple-notification-wrapper{bottom:0;right:calc(50% - 150px)}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){:host ::ng-deep div.simple-notification-wrapper{left:0;right:0;width:100%}}:host ::ng-deep div.simple-notification{margin-bottom:5px;min-height:50px;padding-left:45px;padding-right:25px}:host ::ng-deep div.simple-notification.noIcon{padding-left:25px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){:host ::ng-deep div.simple-notification{margin-bottom:0}}:host ::ng-deep div.simple-notification .sn-title{font-size:15px;font-weight:700;line-height:23px}:host ::ng-deep div.simple-notification .sn-content{font-size:15px;line-height:18px}:host ::ng-deep div.simple-notification .icon{height:100%;left:0;padding:7px;top:0;width:45px}:host ::ng-deep div.simple-notification .icon\\u00A0 mat-icon{align-items:center;display:flex;font-size:32px;height:100%}:host ::ng-deep .closeIcon ::ng-deep .sn-title:after{content:\\\"close\\\";font-family:Material Icons;font-feature-settings:\\\"liga\\\" 1;font-size:24px;font-weight:400;position:absolute;right:5px;top:5px}\"]\n            }]\n    }], function () { return []; }, { options: [{\n            type: Input\n        }] }); })();\n\nclass IgoMessageModule {\n    static forRoot() {\n        return {\n            ngModule: IgoMessageModule,\n            providers: []\n        };\n    }\n}\nIgoMessageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoMessageModule });\nIgoMessageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoMessageModule_Factory(t) { return new (t || IgoMessageModule)(); }, imports: [[CommonModule, SimpleNotificationsModule.forRoot()]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoMessageModule, { declarations: function () { return [MessageCenterComponent]; }, imports: function () { return [CommonModule, ɵngcc2.SimpleNotificationsModule]; }, exports: function () { return [MessageCenterComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoMessageModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, SimpleNotificationsModule.forRoot()],\n                declarations: [MessageCenterComponent],\n                exports: [MessageCenterComponent]\n            }]\n    }], null, null); })();\n\nvar MessageType;\n(function (MessageType) {\n    MessageType[\"ERROR\"] = \"error\";\n    MessageType[\"ALERT\"] = \"alert\";\n    MessageType[\"INFO\"] = \"info\";\n    MessageType[\"SUCCESS\"] = \"success\";\n})(MessageType || (MessageType = {}));\n\nclass MessageService {\n    constructor(notificationService, configService) {\n        this.notificationService = notificationService;\n        this.configService = configService;\n        this.messages$ = new BehaviorSubject([]);\n        this.options = this.configService.getConfig('message') || {};\n    }\n    showError(httpError) {\n        httpError.error.caught = true;\n        return this.error(httpError.error.message, httpError.error.title);\n    }\n    message(message) {\n        this.messages$.next(this.messages$.value.concat([message]));\n        message.options = message.options || {};\n        message = this.handleTemplate(message);\n        let notification;\n        if (message.text) {\n            notification = this.notificationService.create(message.title, message.text, message.type, message.options);\n        }\n        else if (message.html) {\n            if (!message.icon) {\n                message.options.theClass = message.options.theClass\n                    ? message.options.theClass + ' noIcon'\n                    : 'noIcon';\n            }\n            notification = this.notificationService.html(message.html, message.type, message.options);\n        }\n        else {\n            return;\n        }\n        if (message.icon !== undefined) {\n            this.addIcon(notification, message.icon);\n        }\n        return notification;\n    }\n    success(text, title, options = {}) {\n        return this.message({\n            text,\n            title,\n            icon: options.icon || 'check',\n            options,\n            type: MessageType.SUCCESS\n        });\n    }\n    error(text, title, options = {}) {\n        return this.message({\n            text,\n            title,\n            icon: options.icon || 'error_outline',\n            options,\n            type: MessageType.ERROR\n        });\n    }\n    info(text, title, options = {}) {\n        return this.message({\n            text,\n            title,\n            icon: options.icon || 'info_outline',\n            options,\n            type: MessageType.INFO\n        });\n    }\n    alert(text, title, options = {}) {\n        return this.message({\n            text,\n            title,\n            icon: options.icon || 'access_alarm',\n            options,\n            type: MessageType.ALERT\n        });\n    }\n    remove(id) {\n        this.notificationService.remove(id);\n    }\n    addIcon(notification, icon) {\n        // There is no way to add an icon to a notification when reating\n        // it so we simply set it on the notification directly.\n        // See https://github.com/flauc/angular2-notifications/issues/165\n        notification.icon = `\n      <mat-icon class=\"material-icons mat-icon mat-list-avatar\" svgIcon=\"${icon}\">\n      </mat-icon>`;\n    }\n    handleTemplate(message) {\n        if (!this.options.template || message.html) {\n            return message;\n        }\n        let html = this.options.template;\n        html = html.replace('${text}', message.text);\n        html = html.replace('${title}', message.title);\n        html = html.replace('${icon}', message.icon);\n        message.html = html;\n        message.text = undefined;\n        message.title = undefined;\n        message.icon = undefined;\n        return message;\n    }\n}\nMessageService.ɵfac = function MessageService_Factory(t) { return new (t || MessageService)(ɵngcc0.ɵɵinject(ɵngcc2.NotificationsService), ɵngcc0.ɵɵinject(ConfigService)); };\nMessageService.ɵprov = ɵɵdefineInjectable({ factory: function MessageService_Factory() { return new MessageService(ɵɵinject(NotificationsService), ɵɵinject(ConfigService)); }, token: MessageService, providedIn: \"root\" });\nMessageService.ctorParameters = () => [\n    { type: NotificationsService },\n    { type: ConfigService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MessageService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc2.NotificationsService }, { type: ConfigService }]; }, null); })();\n\nclass LanguageService {\n    constructor(translate) {\n        this.translate = translate;\n        this.language = this.translate.getBrowserLang();\n        const lang = this.getLanguage();\n        this.translate.setDefaultLang(lang);\n    }\n    getLanguage() {\n        return this.language.match(/en|fr/) ? this.language : 'en';\n    }\n    setLanguage(language) {\n        this.language = language.match(/en|fr/) ? language : 'en';\n        this.translate.use(this.language);\n        this.translate.reloadLang(this.language);\n    }\n}\nLanguageService.ɵfac = function LanguageService_Factory(t) { return new (t || LanguageService)(ɵngcc0.ɵɵinject(ɵngcc1.TranslateService)); };\nLanguageService.ɵprov = ɵɵdefineInjectable({ factory: function LanguageService_Factory() { return new LanguageService(ɵɵinject(TranslateService)); }, token: LanguageService, providedIn: \"root\" });\nLanguageService.ctorParameters = () => [\n    { type: TranslateService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LanguageService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.TranslateService }]; }, null); })();\n\nclass ErrorInterceptor {\n    constructor(messageService, injector) {\n        this.messageService = messageService;\n        this.injector = injector;\n    }\n    intercept(req, next) {\n        const errorContainer = { httpError: undefined };\n        return next.handle(req).pipe(catchError(error => this.handleError(error, errorContainer)), finalize(() => {\n            this.handleCaughtError(errorContainer);\n            this.handleUncaughtError(errorContainer);\n        }));\n    }\n    handleError(httpError, errorContainer) {\n        if (httpError instanceof HttpErrorResponse) {\n            const errorObj = httpError.error === 'object' ? httpError.error : {};\n            errorObj.message = httpError.error.message || httpError.statusText;\n            errorObj.caught = false;\n            httpError = new HttpErrorResponse({\n                error: errorObj,\n                headers: httpError.headers,\n                status: httpError.status,\n                statusText: httpError.statusText,\n                url: httpError.url\n            });\n        }\n        errorContainer.httpError = httpError;\n        return throwError(httpError);\n    }\n    handleCaughtError(errorContainer) {\n        const httpError = errorContainer.httpError;\n        if (httpError && httpError.error.toDisplay) {\n            httpError.error.caught = true;\n            this.messageService.error(httpError.error.message, httpError.error.title);\n        }\n    }\n    handleUncaughtError(errorContainer) {\n        const httpError = errorContainer.httpError;\n        if (httpError && !httpError.error.caught) {\n            const translate = this.injector.get(LanguageService).translate;\n            const message = translate.instant('igo.core.errors.uncaught.message');\n            const title = translate.instant('igo.core.errors.uncaught.title');\n            httpError.error.caught = true;\n            this.messageService.error(message, title);\n        }\n    }\n}\nErrorInterceptor.ɵfac = function ErrorInterceptor_Factory(t) { return new (t || ErrorInterceptor)(ɵngcc0.ɵɵinject(MessageService), ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nErrorInterceptor.ɵprov = ɵɵdefineInjectable({ factory: function ErrorInterceptor_Factory() { return new ErrorInterceptor(ɵɵinject(MessageService), ɵɵinject(INJECTOR)); }, token: ErrorInterceptor, providedIn: \"root\" });\nErrorInterceptor.ctorParameters = () => [\n    { type: MessageService },\n    { type: Injector }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ErrorInterceptor, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MessageService }, { type: ɵngcc0.Injector }]; }, null); })();\n\nclass IgoErrorModule {\n    constructor(parentModule) {\n        if (parentModule) {\n            throw new Error('IgoErrorModule is already loaded. Import it in the AppModule only');\n        }\n    }\n    static forRoot() {\n        return {\n            ngModule: IgoErrorModule,\n            providers: [\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: ErrorInterceptor,\n                    multi: true\n                }\n            ]\n        };\n    }\n}\nIgoErrorModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoErrorModule });\nIgoErrorModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoErrorModule_Factory(t) { return new (t || IgoErrorModule)(ɵngcc0.ɵɵinject(IgoErrorModule, 12)); }, imports: [[]] });\nIgoErrorModule.ctorParameters = () => [\n    { type: IgoErrorModule, decorators: [{ type: Optional }, { type: SkipSelf }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoErrorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], function () { return [{ type: IgoErrorModule, decorators: [{\n                type: Optional\n            }, {\n                type: SkipSelf\n            }] }]; }, null); })();\n\nclass IgoCoreModule {\n    constructor(matIconRegistry, domSanitizer) {\n        matIconRegistry.addSvgIconSet(domSanitizer.bypassSecurityTrustResourceUrl('./assets/igo2/core/icons/mdi.svg'));\n    }\n    static forRoot() {\n        return {\n            ngModule: IgoCoreModule,\n            providers: []\n        };\n    }\n}\nIgoCoreModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoCoreModule });\nIgoCoreModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoCoreModule_Factory(t) { return new (t || IgoCoreModule)(ɵngcc0.ɵɵinject(ɵngcc4.MatIconRegistry), ɵngcc0.ɵɵinject(ɵngcc5.DomSanitizer)); }, imports: [[\n            CommonModule,\n            HttpClientModule,\n            IgoActivityModule.forRoot(),\n            IgoConfigModule.forRoot(),\n            IgoErrorModule.forRoot(),\n            IgoLanguageModule.forRoot(),\n            IgoMessageModule.forRoot()\n        ], IgoActivityModule, IgoConfigModule, IgoErrorModule, IgoLanguageModule, IgoMessageModule] });\nIgoCoreModule.ctorParameters = () => [\n    { type: MatIconRegistry },\n    { type: DomSanitizer }\n];\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoCoreModule, { imports: function () { return [CommonModule,\n        HttpClientModule, IgoActivityModule, IgoConfigModule, IgoErrorModule, IgoLanguageModule, IgoMessageModule]; }, exports: function () { return [IgoActivityModule, IgoConfigModule, IgoErrorModule, IgoLanguageModule, IgoMessageModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoCoreModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    HttpClientModule,\n                    IgoActivityModule.forRoot(),\n                    IgoConfigModule.forRoot(),\n                    IgoErrorModule.forRoot(),\n                    IgoLanguageModule.forRoot(),\n                    IgoMessageModule.forRoot()\n                ],\n                declarations: [],\n                exports: [\n                    IgoActivityModule,\n                    IgoConfigModule,\n                    IgoErrorModule,\n                    IgoLanguageModule,\n                    IgoMessageModule\n                ]\n            }]\n    }], function () { return [{ type: ɵngcc4.MatIconRegistry }, { type: ɵngcc5.DomSanitizer }]; }, null); })();\n\nclass IgoGestureConfig extends HammerGestureConfig {\n    buildHammer(element) {\n        const mc = super.buildHammer(element);\n        mc.set({ touchAction: 'pan-y' });\n        return mc;\n    }\n}\nIgoGestureConfig.ɵfac = function IgoGestureConfig_Factory(t) { return ɵIgoGestureConfig_BaseFactory(t || IgoGestureConfig); };\nIgoGestureConfig.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: IgoGestureConfig, factory: IgoGestureConfig.ɵfac });\nconst ɵIgoGestureConfig_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(IgoGestureConfig);\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoGestureConfig, [{\n        type: Injectable\n    }], null, null); })();\n\nclass IgoGestureModule {\n    static forRoot() {\n        return {\n            ngModule: IgoGestureModule,\n            providers: [\n                {\n                    provide: HAMMER_GESTURE_CONFIG,\n                    useClass: IgoGestureConfig\n                }\n            ]\n        };\n    }\n}\nIgoGestureModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoGestureModule });\nIgoGestureModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoGestureModule_Factory(t) { return new (t || IgoGestureModule)(); }, imports: [[HammerModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoGestureModule, { imports: function () { return [HammerModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoGestureModule, [{\n        type: NgModule,\n        args: [{\n                imports: [HammerModule],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nclass LoggingInterceptor {\n    intercept(req, next) {\n        const started = Date.now();\n        let ok;\n        // extend server response observable with logging\n        return next.handle(req).pipe(tap(\n        // Succeeds when there is a response; ignore other events\n        event => (ok = event instanceof HttpResponse ? 'succeeded' : ''), \n        // Operation failed; error is an HttpErrorResponse\n        error => (ok = 'failed')), \n        // Log when response observable either completes or errors\n        finalize(() => {\n            const elapsed = Date.now() - started;\n            const msg = `${req.method} \"${req.urlWithParams}\"\n             ${ok} in ${elapsed} ms.`;\n            console.log(msg);\n        }));\n    }\n}\nLoggingInterceptor.ɵfac = function LoggingInterceptor_Factory(t) { return new (t || LoggingInterceptor)(); };\nLoggingInterceptor.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: LoggingInterceptor, factory: LoggingInterceptor.ɵfac });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LoggingInterceptor, [{\n        type: Injectable\n    }], null, null); })();\n\nclass IgoLoggingModule {\n    static forRoot() {\n        return {\n            ngModule: IgoLoggingModule,\n            providers: [\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: LoggingInterceptor,\n                    multi: true\n                }\n            ]\n        };\n    }\n}\nIgoLoggingModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoLoggingModule });\nIgoLoggingModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoLoggingModule_Factory(t) { return new (t || IgoLoggingModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoLoggingModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nlet ROUTE_SERVICE_OPTIONS = new InjectionToken('routeServiceOptions');\nfunction provideRouteServiceOptions(options) {\n    return {\n        provide: ROUTE_SERVICE_OPTIONS,\n        useValue: options\n    };\n}\nclass RouteService {\n    constructor(route, options) {\n        this.route = route;\n        const defaultOptions = {\n            centerKey: 'center',\n            zoomKey: 'zoom',\n            projectionKey: 'projection',\n            contextKey: 'context',\n            searchKey: 'search',\n            visibleOnLayersKey: 'visiblelayers',\n            visibleOffLayersKey: 'invisiblelayers',\n            directionsCoordKey: 'routing',\n            toolKey: 'tool',\n            wmsUrlKey: 'wmsUrl',\n            wmsLayersKey: 'wmsLayers',\n            wmtsUrlKey: 'wmtsUrl',\n            wmtsLayersKey: 'wmtsLayers',\n            vectorKey: 'vector'\n        };\n        this.options = Object.assign({}, defaultOptions, options);\n    }\n    get queryParams() {\n        return this.route.queryParams;\n    }\n}\nRouteService.ɵfac = function RouteService_Factory(t) { return new (t || RouteService)(ɵngcc0.ɵɵinject(ɵngcc6.ActivatedRoute), ɵngcc0.ɵɵinject(ROUTE_SERVICE_OPTIONS, 8)); };\nRouteService.ɵprov = ɵɵdefineInjectable({ factory: function RouteService_Factory() { return new RouteService(ɵɵinject(ActivatedRoute), ɵɵinject(ROUTE_SERVICE_OPTIONS, 8)); }, token: RouteService, providedIn: \"root\" });\nRouteService.ctorParameters = () => [\n    { type: ActivatedRoute },\n    { type: undefined, decorators: [{ type: Inject, args: [ROUTE_SERVICE_OPTIONS,] }, { type: Optional }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(RouteService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.ActivatedRoute }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [ROUTE_SERVICE_OPTIONS]\n            }, {\n                type: Optional\n            }] }]; }, null); })();\n\nclass AnalyticsService {\n    constructor(config) {\n        this.config = config;\n        this.options = this.config.getConfig('analytics') || {};\n        if (this.options.provider === 'matomo') {\n            this.initMatomo();\n        }\n    }\n    get paq() {\n        return (window._paq = window._paq || []);\n    }\n    initMatomo() {\n        if (!this.options.url || !this.options.id) {\n            return;\n        }\n        const url = this.options.url.substr(-1) === '/'\n            ? this.options.url + 'matomo'\n            : this.options.url;\n        // this.paq.push(['trackPageView']);\n        // this.paq.push(['enableLinkTracking']);\n        (() => {\n            this.paq.push(['setTrackerUrl', url + '.php']);\n            this.paq.push(['setSiteId', this.options.id]);\n            const g = document.createElement('script');\n            const s = document.getElementsByTagName('script')[0];\n            g.type = 'text/javascript';\n            g.async = true;\n            g.defer = true;\n            g.src = url + '.js';\n            s.parentNode.insertBefore(g, s);\n        })();\n    }\n    setUser(user, profils) {\n        if (this.options.provider === 'matomo') {\n            if (!user) {\n                this.paq.push(['resetUserId']);\n                this.paq.push(['deleteCustomVariable', 1, 'user']);\n                this.paq.push(['deleteCustomVariable', 2, 'name']);\n                this.paq.push(['deleteCustomVariable', 3, 'profils']);\n            }\n            else {\n                this.paq.push(['setUserId', user.id]);\n                const name = `${user.firstName} ${user.lastName}`;\n                this.paq.push(['setCustomVariable', 1, 'user', user.sourceId, 'visit']);\n                this.paq.push(['setCustomVariable', 2, 'name', name, 'visit']);\n                this.paq.push(['setCustomVariable', 3, 'profils', profils, 'visit']);\n            }\n            this.paq.push(['trackPageView']);\n            this.paq.push(['enableLinkTracking']);\n        }\n    }\n    trackSearch(term, nbResults) {\n        if (this.options.provider === 'matomo') {\n            this.paq.push(['trackSiteSearch', term, false, nbResults]);\n        }\n    }\n    trackEvent(category, action, name) {\n        if (this.options.provider === 'matomo') {\n            this.paq.push(['trackEvent', category, action, name]);\n        }\n    }\n}\nAnalyticsService.ɵfac = function AnalyticsService_Factory(t) { return new (t || AnalyticsService)(ɵngcc0.ɵɵinject(ConfigService)); };\nAnalyticsService.ɵprov = ɵɵdefineInjectable({ factory: function AnalyticsService_Factory() { return new AnalyticsService(ɵɵinject(ConfigService)); }, token: AnalyticsService, providedIn: \"root\" });\nAnalyticsService.ctorParameters = () => [\n    { type: ConfigService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AnalyticsService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }]; }, null); })();\n\nvar Media;\n(function (Media) {\n    Media[\"Mobile\"] = \"mobile\";\n    Media[\"Tablet\"] = \"tablet\";\n    Media[\"Desktop\"] = \"desktop\";\n})(Media || (Media = {}));\nvar MediaOrientation;\n(function (MediaOrientation) {\n    MediaOrientation[\"Portrait\"] = \"portrait\";\n    MediaOrientation[\"Landscape\"] = \"landscape\";\n})(MediaOrientation || (MediaOrientation = {}));\n\nclass MediaService {\n    constructor(breakpointObserver) {\n        this.media$ = new BehaviorSubject(undefined);\n        this.orientation$ = new BehaviorSubject(undefined);\n        breakpointObserver\n            .observe([Breakpoints.HandsetLandscape])\n            .subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Mobile);\n                this.orientation$.next(MediaOrientation.Landscape);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.HandsetPortrait]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Mobile);\n                this.orientation$.next(MediaOrientation.Portrait);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.TabletLandscape]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Tablet);\n                this.orientation$.next(MediaOrientation.Landscape);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.TabletPortrait]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Tablet);\n                this.orientation$.next(MediaOrientation.Portrait);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.WebLandscape]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Desktop);\n                this.orientation$.next(MediaOrientation.Landscape);\n            }\n        });\n        breakpointObserver.observe([Breakpoints.WebPortrait]).subscribe(res => {\n            if (res.matches) {\n                this.media$.next(Media.Desktop);\n                this.orientation$.next(MediaOrientation.Portrait);\n            }\n        });\n    }\n    getMedia() {\n        return this.media$.value;\n    }\n    getOrientation() {\n        return this.orientation$.value;\n    }\n    isTouchScreen() {\n        return 'ontouchstart' in document.documentElement ? true : false;\n    }\n    isMobile() {\n        const media = this.getMedia();\n        return media === 'mobile';\n    }\n}\nMediaService.ɵfac = function MediaService_Factory(t) { return new (t || MediaService)(ɵngcc0.ɵɵinject(ɵngcc7.BreakpointObserver)); };\nMediaService.ɵprov = ɵɵdefineInjectable({ factory: function MediaService_Factory() { return new MediaService(ɵɵinject(BreakpointObserver)); }, token: MediaService, providedIn: \"root\" });\nMediaService.ctorParameters = () => [\n    { type: BreakpointObserver }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MediaService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc7.BreakpointObserver }]; }, null); })();\n\nvar StorageScope;\n(function (StorageScope) {\n    StorageScope[\"SESSION\"] = \"Session\";\n    StorageScope[\"LOCAL\"] = \"Local\";\n})(StorageScope || (StorageScope = {}));\nvar StorageServiceEventEnum;\n(function (StorageServiceEventEnum) {\n    StorageServiceEventEnum[\"ADDED\"] = \"Added\";\n    StorageServiceEventEnum[\"MODIFIED\"] = \"Modified\";\n    StorageServiceEventEnum[\"REMOVED\"] = \"Removed\";\n})(StorageServiceEventEnum || (StorageServiceEventEnum = {}));\n\nclass StorageService {\n    constructor(config) {\n        this.config = config;\n        this.storageChange$ = new BehaviorSubject(undefined);\n        this.options = this.config.getConfig('storage') || { key: 'igo' };\n    }\n    /**\n     * Use to get the data found in storage file\n     */\n    get(key, scope) {\n        let value;\n        if (!scope || scope === StorageScope.SESSION) {\n            value = sessionStorage.getItem(`${this.options.key}.${key}`);\n        }\n        if (scope === StorageScope.LOCAL || (!value && !scope)) {\n            value = localStorage.getItem(`${this.options.key}.${key}`);\n        }\n        if (value) {\n            try {\n                value = JSON.parse(value);\n            }\n            catch (_a) {\n                value = value;\n            }\n        }\n        return value;\n    }\n    set(key, value, scope = StorageScope.LOCAL) {\n        const previousValue = this.get(key, scope);\n        if (scope === StorageScope.SESSION) {\n            sessionStorage.setItem(`${this.options.key}.${key}`, JSON.stringify(value));\n        }\n        else {\n            localStorage.setItem(`${this.options.key}.${key}`, JSON.stringify(value));\n        }\n        const currentValue = this.get(key, scope);\n        if (currentValue !== previousValue) {\n            this.storageChange$.next({\n                key, scope,\n                event: previousValue !== undefined ? StorageServiceEventEnum.MODIFIED : StorageServiceEventEnum.ADDED,\n                previousValue,\n                currentValue\n            });\n        }\n    }\n    remove(key, scope = StorageScope.LOCAL) {\n        const previousValue = this.get(key, scope);\n        if (scope === StorageScope.SESSION) {\n            sessionStorage.removeItem(`${this.options.key}.${key}`);\n        }\n        else {\n            localStorage.removeItem(`${this.options.key}.${key}`);\n        }\n        this.storageChange$.next({ key, scope, event: StorageServiceEventEnum.REMOVED, previousValue });\n    }\n}\nStorageService.ɵfac = function StorageService_Factory(t) { return new (t || StorageService)(ɵngcc0.ɵɵinject(ConfigService)); };\nStorageService.ɵprov = ɵɵdefineInjectable({ factory: function StorageService_Factory() { return new StorageService(ɵɵinject(ConfigService)); }, token: StorageService, providedIn: \"root\" });\nStorageService.ctorParameters = () => [\n    { type: ConfigService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StorageService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ConfigService }]; }, null); })();\n\nclass NetworkService {\n    constructor(messageService, injector) {\n        this.messageService = messageService;\n        this.injector = injector;\n        this.stateChangeEventEmitter = new EventEmitter();\n        this.state = {\n            connection: window.navigator.onLine\n        };\n        this.checkNetworkState();\n    }\n    checkNetworkState() {\n        this.onlineSubscription = fromEvent(window, 'online').subscribe(() => {\n            const translate = this.injector.get(LanguageService).translate;\n            const message = translate.instant('igo.core.network.online.message');\n            const title = translate.instant('igo.core.network.online.title');\n            this.messageService.info(message, title);\n            this.state.connection = true;\n            this.emitEvent();\n        });\n        this.offlineSubscription = fromEvent(window, 'offline').subscribe(() => {\n            const translate = this.injector.get(LanguageService).translate;\n            const message = translate.instant('igo.core.network.offline.message');\n            const title = translate.instant('igo.core.network.offline.title');\n            this.messageService.info(message, title);\n            this.state.connection = false;\n            this.emitEvent();\n        });\n    }\n    emitEvent() {\n        this.stateChangeEventEmitter.emit(this.state);\n    }\n    ngOnDestroy() {\n        try {\n            this.offlineSubscription.unsubscribe();\n            this.onlineSubscription.unsubscribe();\n        }\n        catch (e) { }\n    }\n    currentState(reportState = true) {\n        return reportState\n            ? this.stateChangeEventEmitter.pipe(debounceTime(300), startWith(this.state))\n            : this.stateChangeEventEmitter.pipe(debounceTime(300));\n    }\n}\nNetworkService.ɵfac = function NetworkService_Factory(t) { return new (t || NetworkService)(ɵngcc0.ɵɵinject(MessageService), ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nNetworkService.ɵprov = ɵɵdefineInjectable({ factory: function NetworkService_Factory() { return new NetworkService(ɵɵinject(MessageService), ɵɵinject(INJECTOR)); }, token: NetworkService, providedIn: \"root\" });\nNetworkService.ctorParameters = () => [\n    { type: MessageService },\n    { type: Injector }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NetworkService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MessageService }, { type: ɵngcc0.Injector }]; }, null); })();\n\n/*\n * Public API Surface of core\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ActivityInterceptor, ActivityService, AnalyticsService, CONFIG_OPTIONS, ConfigService, ErrorInterceptor, IgoActivityModule, IgoConfigModule, IgoCoreModule, IgoErrorModule, IgoGestureConfig, IgoGestureModule, IgoLanguageModule, IgoLoggingModule, IgoMessageModule, IgoMissingTranslationHandler, LanguageLoader, LanguageService, LoggingInterceptor, Media, MediaOrientation, MediaService, MessageCenterComponent, MessageService, MessageType, NetworkService, ROUTE_SERVICE_OPTIONS, RouteService, StorageScope, StorageService, StorageServiceEventEnum, configFactory, defaultLanguageLoader, provideConfigLoader, provideConfigOptions, provideDefaultLanguageLoader, provideLanguageLoader, provideRouteServiceOptions, version, ActivityInterceptor as ɵa, ActivityService as ɵb, ConfigService as ɵc, ErrorInterceptor as ɵd, MessageService as ɵe, IgoMissingTranslationHandler as ɵf, LanguageLoader as ɵg, MessageCenterComponent as ɵh, LoggingInterceptor as ɵi };\n\n//# sourceMappingURL=igo2-core.js.map","import { EventEmitter, Component, ChangeDetectionStrategy, ChangeDetectorRef, Input, Output, ViewChild, ElementRef, HostBinding, NgModule, Directive, HostListener, Pipe, Renderer2, Injectable, ViewContainerRef, ɵɵdefineInjectable, ɵɵinject, ComponentFactoryResolver, ViewEncapsulation, ContentChildren, Self } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatIconModule, MatIconRegistry } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { LanguageService, MediaService, Media, IgoLanguageModule, ConfigService, ActivityService } from '@igo2/core';\nimport t from 'typy';\nimport { ReplaySubject, BehaviorSubject, combineLatest, of, isObservable, fromEvent, Observable, merge, Subject } from 'rxjs';\nimport { map, skip, debounceTime, catchError, tap, filter, take, switchMap, distinctUntilChanged } from 'rxjs/operators';\nimport { uuid, ObjectUtils } from '@igo2/utils';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\nimport { Overlay } from '@angular/cdk/overlay';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatDialogRef, MatDialog, MatDialogModule } from '@angular/material/dialog';\nimport { TemplatePortal } from '@angular/cdk/portal';\nimport { MatInputModule } from '@angular/material/input';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { FormsModule, ReactiveFormsModule, FormBuilder } from '@angular/forms';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatSelectModule } from '@angular/material/select';\nimport { __decorate } from 'tslib';\nimport { MatSortModule, MatSort } from '@angular/material/sort';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { HttpClient } from '@angular/common/http';\nimport { ShepherdService } from 'angular-shepherd';\nimport { MatSidenav } from '@angular/material/sidenav';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { DataSource, CdkTableModule } from '@angular/cdk/table';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/material/form-field';\nimport * as ɵngcc2 from '@angular/material/select';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from '@angular/material/core';\nimport * as ɵngcc5 from '@angular/material/table';\nimport * as ɵngcc6 from '@angular/material/sort';\nimport * as ɵngcc7 from '@angular/material/checkbox';\nimport * as ɵngcc8 from '@angular/material/icon';\nimport * as ɵngcc9 from '@angular/material/button';\nimport * as ɵngcc10 from '@igo2/core';\nimport * as ɵngcc11 from '@angular/material/paginator';\nimport * as ɵngcc12 from '@angular/cdk/overlay';\nimport * as ɵngcc13 from '@angular/material/list';\nimport * as ɵngcc14 from '@angular/material/tooltip';\nimport * as ɵngcc15 from '@angular/material/menu';\nimport * as ɵngcc16 from '@angular/material/card';\nimport * as ɵngcc17 from '@ngx-translate/core';\nimport * as ɵngcc18 from '@angular/material/dialog';\nimport * as ɵngcc19 from '@angular/platform-browser';\nimport * as ɵngcc20 from '@angular/forms';\nimport * as ɵngcc21 from '@angular/material/input';\nimport * as ɵngcc22 from '@angular/common/http';\nimport * as ɵngcc23 from 'angular-shepherd';\nimport * as ɵngcc24 from '@angular/material/sidenav';\nimport * as ɵngcc25 from '@angular/material/progress-spinner';\n\nfunction EntitySelectorComponent_mat_option_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 4);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r0.emptyValue);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.emptyText);\n} }\nfunction EntitySelectorComponent_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 4);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r1.multiSelectValue);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 2, ctx_r1.multiText$));\n} }\nfunction EntitySelectorComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 4);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r3 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"value\", record_r3.entity);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r2.titleAccessor(record_r3.entity), \" \");\n} }\nfunction EntityTableComponent_th_3_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"mat-checkbox\", 11);\n    ɵngcc0.ɵɵlistener(\"change\", function EntityTableComponent_th_3_ng_container_1_ng_container_1_Template_mat_checkbox_change_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(3); return ctx_r9.onToggleRows($event.checked); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const selectionState_r8 = ctx.ngIf;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"checked\", selectionState_r8 === ctx_r7.entityTableSelectionState.All)(\"indeterminate\", selectionState_r8 === ctx_r7.entityTableSelectionState.Some);\n} }\nfunction EntityTableComponent_th_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_th_3_ng_container_1_ng_container_1_Template, 2, 2, \"ng-container\", 10);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r6.selectionState$));\n} }\nfunction EntityTableComponent_th_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\", 9);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_th_3_ng_container_1_Template, 3, 3, \"ng-container\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.selectMany);\n} }\nfunction EntityTableComponent_td_4_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"td\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"mat-checkbox\", 13);\n    ɵngcc0.ɵɵlistener(\"mousedown\", function EntityTableComponent_td_4_Template_mat_checkbox_mousedown_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); return $event.shiftKey ? $event.preventDefault() : null; })(\"click\", function EntityTableComponent_td_4_Template_mat_checkbox_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const record_r11 = ctx.$implicit; const ctx_r14 = ɵngcc0.ɵɵnextContext(); return $event.shiftKey ? ctx_r14.onShiftToggleRow(!ctx_r14.rowIsSelected(record_r11), record_r11, $event) : $event.stopPropagation(); })(\"change\", function EntityTableComponent_td_4_Template_mat_checkbox_change_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const record_r11 = ctx.$implicit; const ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15.onToggleRow($event.checked, record_r11); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r11 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r1.rowIsSelected(record_r11));\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_1_th_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\", 16);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const column_r16 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", column_r16.title, \" \");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_1_th_1_Template, 2, 1, \"th\", 15);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_2_th_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\", 9);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const column_r16 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", column_r16.title, \" \");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_2_th_1_Template, 2, 1, \"th\", 3);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 18);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r31 = ctx.$implicit;\n    const column_r16 = ɵngcc0.ɵɵnextContext(3).$implicit;\n    const ctx_r30 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r30.getCellClass(record_r31, column_r16));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r30.getValue(record_r31, column_r16), \" \");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_td_1_Template, 2, 2, \"td\", 17);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"td\", 20);\n} if (rf & 2) {\n    const record_r34 = ctx.$implicit;\n    const column_r16 = ɵngcc0.ɵɵnextContext(3).$implicit;\n    const ctx_r33 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r33.getCellClass(record_r34, column_r16))(\"innerHTML\", ctx_r33.getValue(record_r34, column_r16), ɵngcc0.ɵɵsanitizeHtml);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_td_1_Template, 1, 2, \"td\", 19);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"td\", 20);\n    ɵngcc0.ɵɵpipe(1, \"sanitizeHtml\");\n} if (rf & 2) {\n    const record_r37 = ctx.$implicit;\n    const column_r16 = ɵngcc0.ɵɵnextContext(3).$implicit;\n    const ctx_r36 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r36.getCellClass(record_r37, column_r16))(\"innerHTML\", ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r36.getValue(record_r37, column_r16)), ɵngcc0.ɵɵsanitizeHtml);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_td_1_Template, 2, 4, \"td\", 19);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 18);\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 21);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r40 = ctx.$implicit;\n    const column_r16 = ɵngcc0.ɵɵnextContext(3).$implicit;\n    const ctx_r39 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r39.getCellClass(record_r40, column_r16));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ctx_r39.getValue(record_r40, column_r16));\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_td_1_Template, 2, 2, \"td\", 17);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r50 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 25);\n    ɵngcc0.ɵɵlistener(\"click\", function EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_1_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r50); const button_r45 = ɵngcc0.ɵɵnextContext().$implicit; const record_r43 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r48 = ɵngcc0.ɵɵnextContext(4); return ctx_r48.onButtonClick(button_r45.click, record_r43); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 21);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const button_r45 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"color\", button_r45.color);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", button_r45.icon);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r55 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 26);\n    ɵngcc0.ɵɵlistener(\"click\", function EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_2_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r55); const button_r45 = ɵngcc0.ɵɵnextContext().$implicit; const record_r43 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r53 = ɵngcc0.ɵɵnextContext(4); return ctx_r53.onButtonClick(button_r45.click, record_r43); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 21);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const button_r45 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"color\", button_r45.color);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", button_r45.icon);\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_1_Template, 2, 2, \"button\", 23);\n    ɵngcc0.ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_button_2_Template, 2, 2, \"button\", 24);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const button_r45 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", button_r45.style === \"mat-icon-button\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", button_r45.style !== \"mat-icon-button\");\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 18);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_span_1_Template, 3, 2, \"span\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r43 = ctx.$implicit;\n    const column_r16 = ɵngcc0.ɵɵnextContext(3).$implicit;\n    const ctx_r42 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r42.getCellClass(record_r43, column_r16));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r42.getValue(record_r43, column_r16));\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_td_1_Template, 2, 2, \"td\", 17);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction EntityTableComponent_ng_container_5_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_3_ng_container_1_Template, 2, 0, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_3_ng_container_2_Template, 2, 0, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(3, EntityTableComponent_ng_container_5_ng_container_3_ng_container_3_Template, 2, 0, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(4, EntityTableComponent_ng_container_5_ng_container_3_ng_container_4_Template, 2, 0, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(5, EntityTableComponent_ng_container_5_ng_container_3_ng_container_5_Template, 2, 0, \"ng-container\", 10);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const columnRenderer_r24 = ctx.ngIf;\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.Default);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.HTML);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.UnsanitizedHTML);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.Icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", columnRenderer_r24 === ctx_r19.entityTableColumnRenderer.ButtonGroup);\n} }\nfunction EntityTableComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0, 14);\n    ɵngcc0.ɵɵtemplate(1, EntityTableComponent_ng_container_5_ng_container_1_Template, 2, 0, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(2, EntityTableComponent_ng_container_5_ng_container_2_Template, 2, 0, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(3, EntityTableComponent_ng_container_5_ng_container_3_Template, 6, 5, \"ng-container\", 10);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const column_r16 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matColumnDef\", column_r16.name);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.columnIsSortable(column_r16));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.columnIsSortable(column_r16));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.getColumnRenderer(column_r16));\n} }\nfunction EntityTableComponent_tr_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"tr\", 27);\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r3.getHeaderClass());\n} }\nfunction EntityTableComponent_tr_7_Template(rf, ctx) { if (rf & 1) {\n    const _r61 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 28);\n    ɵngcc0.ɵɵlistener(\"select\", function EntityTableComponent_tr_7_Template_tr_select_0_listener() { ɵngcc0.ɵɵrestoreView(_r61); const record_r59 = ctx.$implicit; const ctx_r60 = ɵngcc0.ɵɵnextContext(); return ctx_r60.onRowSelect(record_r59); })(\"click\", function EntityTableComponent_tr_7_Template_tr_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r61); const record_r59 = ctx.$implicit; const ctx_r62 = ɵngcc0.ɵɵnextContext(); return ctx_r62.onRowClick(record_r59); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const record_r59 = ctx.$implicit;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"scrollBehavior\", ctx_r4.scrollBehavior)(\"ngClass\", ctx_r4.getRowClass(record_r59))(\"selection\", ctx_r4.selection)(\"selected\", ctx_r4.rowIsSelected(record_r59));\n} }\nfunction EntityTableComponent_igo_entity_table_paginator_8_Template(rf, ctx) { if (rf & 1) {\n    const _r64 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-entity-table-paginator\", 29);\n    ɵngcc0.ɵɵlistener(\"paginatorChange\", function EntityTableComponent_igo_entity_table_paginator_8_Template_igo_entity_table_paginator_paginatorChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r64); const ctx_r63 = ɵngcc0.ɵɵnextContext(); return ctx_r63.paginatorChange($event); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"store\", ctx_r5.store)(\"paginatorOptions\", ctx_r5.paginatorOptions)(\"entitySortChange$\", ctx_r5.entitySortChange$);\n} }\nfunction ActionbarComponent_mat_list_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 5);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function ActionbarComponent_mat_list_0_div_1_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.scrollUp(); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelement(3, \"mat-icon\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.common.actionbar.scrollUp\"));\n} }\nfunction ActionbarComponent_mat_list_0_igo_actionbar_item_2_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-actionbar-item\", 8);\n    ɵngcc0.ɵɵlistener(\"trigger\", function ActionbarComponent_mat_list_0_igo_actionbar_item_2_Template_igo_actionbar_item_trigger_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(2); return ctx_r9.onTriggerAction(ctx_r9.toggleCollapseAction); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"withTitle\", false)(\"withIcon\", true)(\"color\", ctx_r4.color)(\"disabled\", ctx_r4.store.view.empty)(\"action\", ctx_r4.toggleCollapseAction);\n} }\nfunction ActionbarComponent_mat_list_0_3_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-actionbar-item\", 11);\n    ɵngcc0.ɵɵlistener(\"trigger\", function ActionbarComponent_mat_list_0_3_ng_template_0_Template_igo_actionbar_item_trigger_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); const action_r13 = ctx.$implicit; const ctx_r14 = ɵngcc0.ɵɵnextContext(3); return ctx_r14.onTriggerAction(action_r13); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const action_r13 = ctx.$implicit;\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"withTitle\", ctx_r12.withTitle)(\"withIcon\", ctx_r12.withIcon)(\"withTooltip\", ctx_r12.withTooltip)(\"color\", ctx_r12.color)(\"disabled\", ctx_r12.store.state.get(action_r13).disabled)(\"action\", action_r13);\n} }\nfunction ActionbarComponent_mat_list_0_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ActionbarComponent_mat_list_0_3_ng_template_0_Template, 1, 6, \"ng-template\", 9, 10, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r5.store.view.all$()));\n} }\nfunction ActionbarComponent_mat_list_0_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function ActionbarComponent_mat_list_0_div_4_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(2); return ctx_r16.scrollDown(); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelement(3, \"mat-icon\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.common.actionbar.scrollDown\"));\n} }\nfunction ActionbarComponent_mat_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-list\");\n    ɵngcc0.ɵɵtemplate(1, ActionbarComponent_mat_list_0_div_1_Template, 4, 3, \"div\", 2);\n    ɵngcc0.ɵɵtemplate(2, ActionbarComponent_mat_list_0_igo_actionbar_item_2_Template, 1, 5, \"igo-actionbar-item\", 3);\n    ɵngcc0.ɵɵtemplate(3, ActionbarComponent_mat_list_0_3_Template, 3, 3, undefined, 0);\n    ɵngcc0.ɵɵtemplate(4, ActionbarComponent_mat_list_0_div_4_Template, 4, 3, \"div\", 4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.heightCondition && ctx_r0.positionConditionTop && ctx_r0.isDesktop);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.withToggleButton);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.collapsed);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.heightCondition && ctx_r0.positionConditionLow && ctx_r0.isDesktop);\n} }\nfunction ActionbarComponent_div_1_ng_template_6_Template(rf, ctx) { if (rf & 1) {\n    const _r22 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-actionbar-item\", 18);\n    ɵngcc0.ɵɵlistener(\"trigger\", function ActionbarComponent_div_1_ng_template_6_Template_igo_actionbar_item_trigger_0_listener() { ɵngcc0.ɵɵrestoreView(_r22); const action_r20 = ctx.$implicit; const ctx_r21 = ɵngcc0.ɵɵnextContext(2); return ctx_r21.onTriggerAction(action_r20); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const action_r20 = ctx.$implicit;\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"withTitle\", ctx_r19.withTitle)(\"withIcon\", ctx_r19.withIcon)(\"color\", ctx_r19.color)(\"action\", action_r20);\n} }\nfunction ActionbarComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"button\", 14);\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"mat-menu\", 16, 17);\n    ɵngcc0.ɵɵelementStart(5, \"mat-list\");\n    ɵngcc0.ɵɵtemplate(6, ActionbarComponent_div_1_ng_template_6_Template, 1, 4, \"ng-template\", 9);\n    ɵngcc0.ɵɵpipe(7, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r18 = ɵngcc0.ɵɵreference(4);\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matMenuTriggerFor\", _r18)(\"disabled\", ctx_r1.store.view.empty)(\"color\", ctx_r1.iconColor);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"svgIcon\", ctx_r1.icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassMap(ctx_r1.overlayClass);\n    ɵngcc0.ɵɵproperty(\"xPosition\", ctx_r1.xPosition)(\"yPosition\", ctx_r1.yPosition);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(7, 9, ctx_r1.store.view.all$()));\n} }\nfunction ActionbarComponent_mat_card_2_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-actionbar-item\", 18);\n    ɵngcc0.ɵɵlistener(\"trigger\", function ActionbarComponent_mat_card_2_ng_template_2_Template_igo_actionbar_item_trigger_0_listener() { ɵngcc0.ɵɵrestoreView(_r26); const action_r24 = ctx.$implicit; const ctx_r25 = ɵngcc0.ɵɵnextContext(2); return ctx_r25.onTriggerAction(action_r24); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(1, \"br\");\n} if (rf & 2) {\n    const action_r24 = ctx.$implicit;\n    const ctx_r23 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"withTitle\", ctx_r23.withTitle)(\"withIcon\", ctx_r23.withIcon)(\"color\", ctx_r23.color)(\"action\", action_r24);\n} }\nfunction ActionbarComponent_mat_card_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-card\", 19);\n    ɵngcc0.ɵɵelementStart(1, \"mat-list\");\n    ɵngcc0.ɵɵtemplate(2, ActionbarComponent_mat_card_2_ng_template_2_Template, 2, 4, \"ng-template\", 9);\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(3, 1, ctx_r2.store.view.all$()));\n} }\nfunction ActionbarItemComponent_mat_list_item_0_button_4_mat_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"mat-icon\", 7);\n    ɵngcc0.ɵɵpipe(1, \"async\");\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx_r4.icon$));\n} }\nfunction ActionbarItemComponent_mat_list_item_0_button_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 5);\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵtemplate(2, ActionbarItemComponent_mat_list_item_0_button_4_mat_icon_2_Template, 2, 3, \"mat-icon\", 6);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r2.color)(\"disabled\", ɵngcc0.ɵɵpipeBind1(1, 3, ctx_r2.disabled$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.withIcon);\n} }\nfunction ActionbarItemComponent_mat_list_item_0_h4_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"h4\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r3.title));\n} }\nfunction ActionbarItemComponent_mat_list_item_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function ActionbarItemComponent_mat_list_item_0_Template_mat_list_item_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.onClick(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵtemplate(4, ActionbarItemComponent_mat_list_item_0_button_4_Template, 3, 5, \"button\", 3);\n    ɵngcc0.ɵɵtemplate(5, ActionbarItemComponent_mat_list_item_0_h4_5_Template, 3, 3, \"h4\", 4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r0.withTooltip ? ɵngcc0.ɵɵpipeBind1(1, 4, ɵngcc0.ɵɵpipeBind1(2, 6, ctx_r0.tooltip$) || ctx_r0.title) : \"\")(\"ngClass\", ɵngcc0.ɵɵpipeBind1(3, 8, ctx_r0.ngClass$));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.withIcon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.withTitle);\n} }\nfunction ActionbarItemComponent_mat_list_item_1_mat_checkbox_4_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-checkbox\", 11);\n    ɵngcc0.ɵɵlistener(\"change\", function ActionbarItemComponent_mat_list_item_1_mat_checkbox_4_Template_mat_checkbox_change_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(2); return ctx_r8.action.handler(); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"checked\", ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r7.checkCondition$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 4, ctx_r7.title), \" \");\n} }\nfunction ActionbarItemComponent_mat_list_item_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\", 9);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵtemplate(4, ActionbarItemComponent_mat_list_item_1_mat_checkbox_4_Template, 4, 6, \"mat-checkbox\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r1.withTooltip ? ɵngcc0.ɵɵpipeBind1(1, 3, ɵngcc0.ɵɵpipeBind1(2, 5, ctx_r1.tooltip$) || ctx_r1.title) : \"\")(\"ngClass\", ɵngcc0.ɵɵpipeBind1(3, 7, ctx_r1.ngClass$));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.withTitle);\n} }\nconst _c0 = function (a0) { return { \"igo-backdrop-shown\": a0 }; };\nconst _c1 = [\"*\"];\nconst _c2 = [\"target\"];\nfunction DynamicOutletComponent_ng_template_0_Template(rf, ctx) { }\nconst _c3 = [\"flexibleMain\"];\nconst _c4 = [\"*\", [[\"\", \"igoFlexibleFill\", \"\"]]];\nconst _c5 = [\"*\", \"[igoFlexibleFill]\"];\nconst _c6 = [\"buttons\"];\nconst _c7 = [\"*\", [[\"\", \"formButtons\", \"\"]]];\nconst _c8 = function (a0) { return { \"igo-form-body-with-buttons\": a0 }; };\nconst _c9 = [\"*\", \"[formButtons]\"];\nfunction FormFieldComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"igo-dynamic-outlet\", 1);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"component\", ctx_r0.getFieldComponent())(\"inputs\", ctx_r0.getFieldInputs())(\"subscribers\", ctx_r0.getFieldSubscribers());\n} }\nfunction FormFieldSelectComponent_mat_option_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 4);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const choice_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", choice_r3.value);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", choice_r3.title, \" \");\n} }\nfunction FormFieldSelectComponent_mat_icon_4_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-icon\", 5);\n    ɵngcc0.ɵɵlistener(\"click\", function FormFieldSelectComponent_mat_icon_4_Template_mat_icon_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.onDisableSwitchClick(); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"svgIcon\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx_r1.disabled$) === true ? \"checkbox-blank-outline\" : \"checkbox-marked-outline\");\n} }\nfunction FormFieldSelectComponent_mat_error_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-error\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r2.getErrorMessage()));\n} }\nfunction FormFieldTextComponent_mat_icon_2_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-icon\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function FormFieldTextComponent_mat_icon_2_Template_mat_icon_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.onDisableSwitchClick(); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"svgIcon\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx_r0.disabled$) === true ? \"checkbox-blank-outline\" : \"checkbox-marked-outline\");\n} }\nfunction FormFieldTextComponent_mat_error_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-error\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r1.getErrorMessage()));\n} }\nfunction FormFieldTextareaComponent_mat_icon_3_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-icon\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function FormFieldTextareaComponent_mat_icon_3_Template_mat_icon_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.onDisableSwitchClick(); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"svgIcon\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx_r0.disabled$) === true ? \"checkbox-blank-outline\" : \"checkbox-marked-outline\");\n} }\nfunction FormFieldTextareaComponent_mat_error_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-error\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r1.getErrorMessage()));\n} }\nfunction FormGroupComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 5);\n    ɵngcc0.ɵɵelement(1, \"igo-form-field\", 6);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const field_r3 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r2.getFieldNgClass(field_r3));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"field\", field_r3);\n} }\nfunction FormGroupComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵtemplate(1, FormGroupComponent_div_0_div_1_Template, 2, 2, \"div\", 4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.group.fields);\n} }\nfunction FormGroupComponent_mat_error_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-error\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r1.getErrorMessage()));\n} }\nfunction InteractiveTourComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 1);\n    ɵngcc0.ɵɵlistener(\"click\", function InteractiveTourComponent_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.startInteractiveTour(); });\n    ɵngcc0.ɵɵelementStart(1, \"span\", 2);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(6, \"mat-icon\", 3);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵpipe(8, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r0.getClass())(\"disabled\", ctx_r0.disabledTourButton);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate2(\"\", ɵngcc0.ɵɵpipeBind1(3, 5, \"igo.common.interactiveTour.buttonTitle\"), \" \", ɵngcc0.ɵɵpipeBind1(4, 7, ɵngcc0.ɵɵpipeBind1(5, 9, ctx_r0.discoverTitleInLocale$)), \"\");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r0.disabledTourButton ? ɵngcc0.ɵɵpipeBind1(7, 11, \"igo.common.interactiveTour.disaledTooltipTourToolButton\") : ɵngcc0.ɵɵpipeBind1(8, 13, \"igo.common.interactiveTour.tooltipTourToolButton\"));\n} }\nfunction JsonDialogComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nfunction JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nconst _c10 = function (a0, a1) { return { obj: a0, baseKey: a1 }; };\nfunction JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_container_1_ng_container_1_Template, 1, 0, \"ng-container\", 2);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const property_r6 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const baseKey_r4 = ɵngcc0.ɵɵnextContext().baseKey;\n    const ctx_r8 = ɵngcc0.ɵɵnextContext();\n    const _r1 = ɵngcc0.ɵɵreference(5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction2(2, _c10, property_r6.value, ctx_r8.getKey(baseKey_r4, property_r6.key)));\n} }\nfunction JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\");\n    ɵngcc0.ɵɵelementStart(1, \"span\");\n    ɵngcc0.ɵɵelementStart(2, \"b\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtext(4, \" : \");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(5, \"span\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const property_r6 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const baseKey_r4 = ɵngcc0.ɵɵnextContext().baseKey;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r10.getKey(baseKey_r4, property_r6.key));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"innerHtml\", property_r6.value, ɵngcc0.ɵɵsanitizeHtml);\n} }\nfunction JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_container_1_Template, 2, 5, \"ng-container\", 8);\n    ɵngcc0.ɵɵtemplate(2, JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_ng_template_2_Template, 6, 2, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const _r9 = ɵngcc0.ɵɵreference(3);\n    const property_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r7.isObject(property_r6.value))(\"ngIfElse\", _r9);\n} }\nfunction JsonDialogComponent_ng_template_4_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, JsonDialogComponent_ng_template_4_ng_container_0_ng_container_1_Template, 4, 2, \"ng-container\", 7);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const property_r6 = ctx.$implicit;\n    const baseKey_r4 = ɵngcc0.ɵɵnextContext().baseKey;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.ignoreKeys.indexOf(ctx_r5.getKey(baseKey_r4, property_r6.key)) === 0 - 1);\n} }\nfunction JsonDialogComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, JsonDialogComponent_ng_template_4_ng_container_0_Template, 2, 1, \"ng-container\", 6);\n    ɵngcc0.ɵɵpipe(1, \"keyvalue\");\n} if (rf & 2) {\n    const obj_r3 = ctx.obj;\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(1, 1, obj_r3));\n} }\nconst _c11 = function (a0) { return { obj: a0 }; };\nconst _c12 = function (a0) { return { \"selectable\": a0 }; };\nfunction PanelComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵelementStart(1, \"h3\");\n    ɵngcc0.ɵɵprojection(2, 1);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 3);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵprojection(5, 2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵprojection(6, 3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r0.title, \" \");\n} }\nconst _c13 = [\"*\", [[\"\", \"panelLeftButton\", \"\"]], [[\"\", \"panelHeader\", \"\"]], [[\"\", \"panelRightButton\", \"\"]]];\nconst _c14 = [\"*\", \"[panelLeftButton]\", \"[panelHeader]\", \"[panelRightButton]\"];\nconst _c15 = function (a1) { return { \"igo-spinner-container\": true, \"igo-spinner-shown\": a1 }; };\nconst _c16 = [\"filter\"];\nfunction TableComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\", 13);\n    ɵngcc0.ɵɵelement(2, \"input\", 14, 15);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(4, 1, \"igo.common.table.filter\"));\n} }\nfunction TableComponent_th_6_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"th\", 16);\n    ɵngcc0.ɵɵelementStart(1, \"mat-checkbox\", 17);\n    ɵngcc0.ɵɵlistener(\"change\", function TableComponent_th_6_Template_mat_checkbox_change_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return $event ? ctx_r10.masterToggle() : null; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r2.selection.hasValue() && ctx_r2.isAllSelected())(\"indeterminate\", ctx_r2.selection.hasValue() && !ctx_r2.isAllSelected());\n} }\nfunction TableComponent_td_7_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"td\", 18);\n    ɵngcc0.ɵɵelementStart(1, \"mat-checkbox\", 19);\n    ɵngcc0.ɵɵlistener(\"click\", function TableComponent_td_7_Template_mat_checkbox_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); return $event.stopPropagation(); })(\"change\", function TableComponent_td_7_Template_mat_checkbox_change_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const row_r12 = ctx.$implicit; const ctx_r15 = ɵngcc0.ɵɵnextContext(); return $event ? ctx_r15.selection.toggle(row_r12) : null; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const row_r12 = ctx.$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r3.selection.isSelected(row_r12));\n} }\nfunction TableComponent_ng_container_8_ng_container_1_th_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\", 25);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const column_r16 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", column_r16.title, \" \");\n} }\nfunction TableComponent_ng_container_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, TableComponent_ng_container_8_ng_container_1_th_1_Template, 2, 1, \"th\", 24);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction TableComponent_ng_container_8_ng_container_2_th_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"th\", 16);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const column_r16 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", column_r16.title, \" \");\n} }\nfunction TableComponent_ng_container_8_ng_container_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, TableComponent_ng_container_8_ng_container_2_th_1_Template, 2, 1, \"th\", 6);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nconst _c17 = function () { return {}; };\nfunction TableComponent_ng_container_8_ng_container_3_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 27);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const row_r27 = ctx.$implicit;\n    const column_r16 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r26 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r26.model.cellClassFunc ? ctx_r26.model.cellClassFunc(row_r27, column_r16) : ɵngcc0.ɵɵpureFunction0(2, _c17));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r26.getValue(row_r27, column_r16.name), \" \");\n} }\nfunction TableComponent_ng_container_8_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, TableComponent_ng_container_8_ng_container_3_td_1_Template, 2, 3, \"td\", 26);\n    ɵngcc0.ɵɵelementContainerEnd();\n} }\nfunction TableComponent_ng_container_8_ng_template_4_td_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"td\", 29);\n} if (rf & 2) {\n    const row_r30 = ctx.$implicit;\n    const column_r16 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r29 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r29.model.cellClassFunc ? ctx_r29.model.cellClassFunc(row_r30, column_r16) : ɵngcc0.ɵɵpureFunction0(2, _c17))(\"innerHTML\", ctx_r29.getValue(row_r30, column_r16.name), ɵngcc0.ɵɵsanitizeHtml);\n} }\nfunction TableComponent_ng_container_8_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, TableComponent_ng_container_8_ng_template_4_td_0_Template, 1, 3, \"td\", 28);\n} }\nfunction TableComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0, 20);\n    ɵngcc0.ɵɵtemplate(1, TableComponent_ng_container_8_ng_container_1_Template, 2, 0, \"ng-container\", 21);\n    ɵngcc0.ɵɵtemplate(2, TableComponent_ng_container_8_ng_container_2_Template, 2, 0, \"ng-container\", 21);\n    ɵngcc0.ɵɵtemplate(3, TableComponent_ng_container_8_ng_container_3_Template, 2, 0, \"ng-container\", 22);\n    ɵngcc0.ɵɵtemplate(4, TableComponent_ng_container_8_ng_template_4_Template, 1, 0, \"ng-template\", null, 23, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const column_r16 = ctx.$implicit;\n    const _r20 = ɵngcc0.ɵɵreference(5);\n    ɵngcc0.ɵɵproperty(\"matColumnDef\", column_r16.name);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", column_r16.sortable);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !column_r16.sortable);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !column_r16.html)(\"ngIfElse\", _r20);\n} }\nfunction TableComponent_th_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"th\", 16);\n} }\nfunction TableComponent_td_11_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 31);\n    ɵngcc0.ɵɵlistener(\"click\", function TableComponent_td_11_button_1_Template_button_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r36); const action_r34 = ctx.$implicit; const row_r32 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.handleClickAction($event, action_r34, row_r32); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 32);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const action_r34 = ctx.$implicit;\n    const ctx_r33 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r33.getActionColor(action_r34.color));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", action_r34.icon);\n} }\nfunction TableComponent_td_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 18);\n    ɵngcc0.ɵɵtemplate(1, TableComponent_td_11_button_1_Template, 2, 2, \"button\", 30);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r6.model.actions);\n} }\nfunction TableComponent_tr_12_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"tr\", 33);\n} }\nfunction TableComponent_tr_13_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"tr\", 34);\n    ɵngcc0.ɵɵlistener(\"click\", function TableComponent_tr_13_Template_tr_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r40); const row_r38 = ctx.$implicit; const ctx_r39 = ɵngcc0.ɵɵnextContext(); return ctx_r39.selection.toggle(row_r38); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const row_r38 = ctx.$implicit;\n    const ctx_r8 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r8.model.rowClassFunc ? ctx_r8.model.rowClassFunc(row_r38) : ɵngcc0.ɵɵpureFunction0(1, _c17));\n} }\nfunction ToolboxComponent_igo_actionbar_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-actionbar\", 2);\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"store\", ctx_r0.actionStore)(\"withIcon\", true)(\"withTitle\", ɵngcc0.ɵɵpipeBind1(1, 6, ctx_r0.toolbarWithTitle$))(\"withTooltip\", !ɵngcc0.ɵɵpipeBind1(2, 8, ctx_r0.toolbarWithTitle$))(\"scrollActive\", ɵngcc0.ɵɵpipeBind1(3, 10, ctx_r0.toolbarWithTitle$))(\"horizontal\", false);\n} }\nconst _c18 = function (a0, a1) { return { \"igo-tool-container-with-toolbar\": a0, \"igo-tool-container-with-animation\": a1 }; };\nfunction ToolboxComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵlistener(\"@toolSlideInOut.start\", function ToolboxComponent_div_2_Template_div_animation_toolSlideInOut_start_0_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.onAnimationStart(); })(\"@toolSlideInOut.done\", function ToolboxComponent_div_2_Template_div_animation_toolSlideInOut_done_0_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.onAnimationComplete(); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵelement(2, \"igo-dynamic-outlet\", 4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const tool_r2 = ctx.ngIf;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction2(6, _c18, !ctx_r1.actionStore.empty, ctx_r1.animate))(\"@toolSlideInOut\", ɵngcc0.ɵɵpipeBind1(1, 4, ctx_r1.animation$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"component\", tool_r2.component)(\"inputs\", ctx_r1.getToolInputs(tool_r2));\n} }\nfunction WidgetOutletComponent_igo_dynamic_outlet_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-dynamic-outlet\", 1);\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"component\", ctx_r0.widget)(\"inputs\", ctx_r0.inputs)(\"subscribers\", ctx_r0.getEffectiveSubscribers());\n} }\nfunction WorkspaceWidgetOutletComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"igo-widget-outlet\", 1);\n    ɵngcc0.ɵɵlistener(\"cancel\", function WorkspaceWidgetOutletComponent_ng_container_0_Template_igo_widget_outlet_cancel_1_listener() { ɵngcc0.ɵɵrestoreView(_r3); const widget_r1 = ctx.ngIf; const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.onWidgetCancel(widget_r1); })(\"complete\", function WorkspaceWidgetOutletComponent_ng_container_0_Template_igo_widget_outlet_complete_1_listener() { ɵngcc0.ɵɵrestoreView(_r3); const widget_r1 = ctx.ngIf; const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.onWidgetComplete(widget_r1); });\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const widget_r1 = ctx.ngIf;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"widget\", widget_r1)(\"inputs\", ɵngcc0.ɵɵpipeBind1(2, 3, ctx_r0.widgetInputs$))(\"subscribers\", ɵngcc0.ɵɵpipeBind1(3, 5, ctx_r0.widgetSubscribers$));\n} }\nvar EntityOperationType;\n(function (EntityOperationType) {\n    EntityOperationType[\"Insert\"] = \"Insert\";\n    EntityOperationType[\"Update\"] = \"Update\";\n    EntityOperationType[\"Delete\"] = \"Delete\";\n})(EntityOperationType || (EntityOperationType = {}));\nvar EntityTableColumnRenderer;\n(function (EntityTableColumnRenderer) {\n    EntityTableColumnRenderer[\"Default\"] = \"Default\";\n    EntityTableColumnRenderer[\"HTML\"] = \"HTML\";\n    EntityTableColumnRenderer[\"UnsanitizedHTML\"] = \"UnsanitizedHTML\";\n    EntityTableColumnRenderer[\"Icon\"] = \"Icon\";\n    EntityTableColumnRenderer[\"ButtonGroup\"] = \"ButtonGroup\";\n})(EntityTableColumnRenderer || (EntityTableColumnRenderer = {}));\nvar EntityTableScrollBehavior;\n(function (EntityTableScrollBehavior) {\n    EntityTableScrollBehavior[\"Auto\"] = \"auto\";\n    EntityTableScrollBehavior[\"Instant\"] = \"instant\";\n    EntityTableScrollBehavior[\"Smooth\"] = \"smooth\";\n})(EntityTableScrollBehavior || (EntityTableScrollBehavior = {}));\nvar EntityTableSelectionState;\n(function (EntityTableSelectionState) {\n    EntityTableSelectionState[\"None\"] = \"None\";\n    EntityTableSelectionState[\"All\"] = \"All\";\n    EntityTableSelectionState[\"Some\"] = \"Some\";\n})(EntityTableSelectionState || (EntityTableSelectionState = {}));\n\n/**\n * Get an entity's named property. Nested properties are supported\n * with the dotted notation. (i.e 'author.name')\n *\n * Note: this method is a 'best attempt' at getting an entity's property.\n * It fits the most common cases but you might need to explicitely define\n * a property getter when using an EntityStore, for example.\n * @param entity Entity\n * @param property Property name\n * @returns Property value\n */\nfunction getEntityProperty(entity, property) {\n    return t(entity, property).safeObject;\n}\n/**\n * Get an entity's id. An entity's id can be one of:\n * 'entity.meta.id', 'entity.meta.idProperty' or 'entity.id'.\n *\n * Note: See the note in the 'getEntityProperty' documentation.\n * @param entity Entity\n * @returns Entity id\n */\nfunction getEntityId(entity) {\n    const meta = entity.meta || {};\n    return meta.id ? meta.id : getEntityProperty(entity, meta.idProperty || 'id');\n}\n/**\n * Get an entity's title. An entity's title can be one of:\n * 'entity.meta.title', 'entity.meta.titleProperty' or 'entity.title'.\n * @param entity Entity\n * @returns Entity title\n */\nfunction getEntityTitle(entity) {\n    const meta = entity.meta || {};\n    return meta.title ? meta.title : getEntityProperty(entity, meta.titleProperty || 'title');\n}\n/**\n * Get an entity's HTML title. An entity's HTML title can be one of:\n * 'entity.meta.titleHtml', 'entity.meta.titleHtmlProperty' or 'entity.titleHtml'.\n * @param entity Entity\n * @returns Entity HTML title\n */\nfunction getEntityTitleHtml(entity) {\n    const meta = entity.meta || {};\n    return meta.titleHtml ? meta.titleHtml : getEntityProperty(entity, meta.titleHtmlProperty || 'titleHtml');\n}\n/**\n * Get an entity's icon. An entity's icon can be one of:\n * 'entity.meta.icon', 'entity.meta.iconProperty' or 'entity.icon'.\n * @param entity Entity\n * @returns Entity icon\n */\nfunction getEntityIcon(entity) {\n    const meta = entity.meta || {};\n    return meta.icon ? meta.icon : getEntityProperty(entity, meta.iconProperty || 'icon');\n}\n/**\n * Get an entity's revision.\n * @param entity Entity\n * @returns Entity revision\n */\nfunction getEntityRevision(entity) {\n    const meta = entity.meta || {};\n    return meta.revision || 0;\n}\n\n/**\n * This class is used to track a store's entities state\n */\nclass EntityStateManager {\n    constructor(options = {}) {\n        /**\n         * State index\n         */\n        this.index = new Map();\n        /**\n         * Change emitter\n         */\n        this.change$ = new ReplaySubject(1);\n        this.store = options.store ? options.store : undefined;\n        this.getKey = options.getKey\n            ? options.getKey\n            : (this.store ? this.store.getKey : getEntityId);\n        this.next();\n    }\n    /**\n     * Clear state\n     */\n    clear() {\n        if (this.index.size > 0) {\n            this.index.clear();\n            this.next();\n        }\n    }\n    /**\n     * Get an entity's state\n     * @param entity Entity\n     * @returns State\n     */\n    get(entity) {\n        return (this.index.get(this.getKey(entity)) || {});\n    }\n    /**\n     * Set an entity's state\n     * @param entity Entity\n     * @param state State\n     */\n    set(entity, state) {\n        this.setMany([entity], state);\n    }\n    /**\n     * Set many entitie's state\n     * @param entitie Entities\n     * @param state State\n     */\n    setMany(entities, state) {\n        entities.forEach((entity) => {\n            this.index.set(this.getKey(entity), Object.assign({}, state));\n        });\n        this.next();\n    }\n    /**\n     * Set state of all entities that already have a state. This is not\n     * the same as setting the state of all the store's entities.\n     * @param state State\n     */\n    setAll(state) {\n        Array.from(this.index.keys()).forEach((key) => {\n            this.index.set(key, Object.assign({}, state));\n        });\n        this.next();\n    }\n    /**\n     * Update an entity's state\n     * @param entity Entity\n     * @param changes State changes\n     */\n    update(entity, changes, exclusive = false) {\n        this.updateMany([entity], changes, exclusive);\n    }\n    /**\n     * Update many entitie's state\n     * @param entitie Entities\n     * @param changes State changes\n     */\n    updateMany(entities, changes, exclusive = false) {\n        if (exclusive === true) {\n            return this.updateManyExclusive(entities, changes);\n        }\n        entities.forEach((entity) => {\n            const state = Object.assign({}, this.get(entity), changes);\n            this.index.set(this.getKey(entity), state);\n        });\n        this.next();\n    }\n    /**\n     * Reversee an entity's state\n     * @param entity Entity\n     * @param keys State keys to reverse\n     */\n    reverse(entity, keys) {\n        this.reverseMany([entity], keys);\n    }\n    /**\n     * Reverse many entitie's state\n     * @param entitie Entities\n     * @param keys State keys to reverse\n     */\n    reverseMany(entities, keys) {\n        entities.forEach((entity) => {\n            const currentState = this.get(entity);\n            const changes = keys.reduce((acc, key) => {\n                acc[key] = currentState[key] || false;\n                return acc;\n            }, {});\n            const reversedChanges = this.reverseChanges(changes);\n            const state = Object.assign({}, currentState, reversedChanges);\n            this.index.set(this.getKey(entity), state);\n        });\n        this.next();\n    }\n    /**\n     * Update state of all entities that already have a state. This is not\n     * the same as updating the state of all the store's entities.\n     * @param changes State\n     */\n    updateAll(changes) {\n        const allKeys = this.getAllKeys();\n        Array.from(allKeys).forEach((key) => {\n            const state = Object.assign({}, this.index.get(key), changes);\n            this.index.set(key, state);\n        });\n        this.next();\n    }\n    /**\n     * When some state changes are flagged as 'exclusive', reverse\n     * the state of all other entities. Changes are reversable when\n     * they are boolean.\n     * @param entitie Entities\n     * @param changes State changes\n     */\n    updateManyExclusive(entities, changes) {\n        const reverseChanges = this.reverseChanges(changes);\n        const keys = entities.map((entity) => this.getKey(entity));\n        const allKeys = new Set(keys.concat(Array.from(this.getAllKeys())));\n        allKeys.forEach((key) => {\n            const state = this.index.get(key) || {};\n            if (keys.indexOf(key) >= 0) {\n                this.index.set(key, Object.assign({}, state, changes));\n            }\n            else {\n                // Update only if the reverse changes would modify\n                // a key already present in the current state\n                const shouldUpdate = Object.keys(reverseChanges).some((changeKey) => {\n                    return state[changeKey] !== undefined &&\n                        state[changeKey] !== reverseChanges[changeKey];\n                });\n                if (shouldUpdate === true) {\n                    this.index.set(key, Object.assign({}, state, reverseChanges));\n                }\n            }\n        });\n        this.next();\n    }\n    /**\n     * Compute a 'reversed' version of some state changes.\n     * Changes are reversable when they are boolean.\n     * @param changes State changes\n     * @returns Reversed state changes\n     */\n    reverseChanges(changes) {\n        return Object.entries(changes).reduce((reverseChanges, bunch) => {\n            const [changeKey, value] = bunch;\n            if (typeof value === typeof true) {\n                reverseChanges[changeKey] = !value;\n            }\n            return reverseChanges;\n        }, {});\n    }\n    /**\n     * Return all the keys in that state and in the store it's bound to, if any.\n     * @returns Set of keys\n     */\n    getAllKeys() {\n        const storeKeys = this.store ? Array.from(this.store.index.keys()) : [];\n        return new Set(Array.from(this.index.keys()).concat(storeKeys));\n    }\n    /**\n     * Emit 'change' event\n     */\n    next() {\n        this.change$.next();\n    }\n}\n\n/**\n * An entity view streams entities from an observable source. These entities\n * can be filtered or sorted without affecting the source. A view can also\n * combine data from multiple sources, joined together.\n */\nclass EntityView {\n    constructor(source$) {\n        this.source$ = source$;\n        /**\n         * Observable stream of values\n         */\n        this.values$ = new BehaviorSubject([]);\n        /**\n         * Whether this view has been lifted\n         */\n        this.lifted = false;\n        /**\n         * Join clauses\n         */\n        this.joins = [];\n        /**\n         * Observable of a filter clause\n         */\n        this.filter$ = new BehaviorSubject(undefined);\n        /**\n         * Observable of filter clauses\n         */\n        this.filters$ = new BehaviorSubject([]);\n        /**\n         * Filters index\n         */\n        this.filterIndex = new Map();\n        /**\n         * Observable of a sort clause\n         */\n        this.sort$ = new BehaviorSubject(undefined);\n        this.getKey$ = new BehaviorSubject(undefined);\n        /**\n         * Number of entities\n         */\n        this.count$ = new BehaviorSubject(0);\n        /**\n         * Whether the store is empty\n         */\n        this.empty$ = new BehaviorSubject(true);\n    }\n    /**\n     * Method for indexing\n     */\n    get getKey() { return this.getKey$.value; }\n    get count() { return this.count$.value; }\n    get empty() { return this.empty$.value; }\n    /**\n     * Store index\n     */\n    get index() { return this._index; }\n    /**\n     * Get a value from the view by key\n     * @param key Key\n     * @returns Value\n     */\n    get(key) {\n        if (this._index === undefined) {\n            throw new Error('This view has no index, therefore, this method is unavailable.');\n        }\n        return this.index.get(key);\n    }\n    /**\n     * Get all the values\n     * @returns Array of values\n     */\n    all() {\n        return this.values$.value;\n    }\n    /**\n     * Observe all the values\n     * @returns Observable of values\n     */\n    all$() {\n        return this.values$;\n    }\n    /**\n     * Get the first value that respects a criteria\n     * @returns A value\n     */\n    firstBy(clause) {\n        return this.values$.value.find(clause);\n    }\n    /**\n     * Observe the first value that respects a criteria\n     * @returns Observable of a value\n     */\n    firstBy$(clause) {\n        return this.values$.pipe(map((values) => values.find(clause)));\n    }\n    /**\n     * Get all the values that respect a criteria\n     * @returns Array of values\n     */\n    manyBy(clause) {\n        return this.values$.value.filter(clause);\n    }\n    /**\n     * Observe all the values that respect a criteria\n     * @returns Observable of values\n     */\n    manyBy$(clause) {\n        return this.values$.pipe(map((values) => values.filter(clause)));\n    }\n    /**\n     * Clear the filter and sort and unsubscribe from the source\n     */\n    clear() {\n        this.filter(undefined);\n        this.sort(undefined);\n    }\n    destroy() {\n        if (this.values$$ !== undefined) {\n            this.values$$.unsubscribe();\n        }\n        this.clear();\n    }\n    /**\n     * Create an index\n     * @param getKey Method to get a value's id\n     * @returns The view\n     */\n    createIndex(getKey) {\n        this._index = new Map();\n        this.getKey$.next(getKey);\n        return this;\n    }\n    /**\n     * Join another source to the stream (chainable)\n     * @param clause Join clause\n     * @returns The view\n     */\n    join(clause) {\n        if (this.lifted === true) {\n            throw new Error('This view has already been lifted, therefore, no join is allowed.');\n        }\n        this.joins.push(clause);\n        return this;\n    }\n    /**\n     * Filter values (chainable)\n     * @param clause Filter clause\n     * @returns The view\n     */\n    filter(clause) {\n        this.filter$.next(clause);\n        return this;\n    }\n    /**\n     * @param clause Filter clause\n     * @returns The filter id\n     */\n    addFilter(clause) {\n        const id = uuid();\n        this.filterIndex.set(id, clause);\n        this.filters$.next(Array.from(this.filterIndex.values()));\n        return id;\n    }\n    /**\n     * Remove a filter by id\n     * @param clause Filter clause\n     */\n    removeFilter(id) {\n        this.filterIndex.delete(id);\n        this.filters$.next(Array.from(this.filterIndex.values()));\n    }\n    /**\n     * Sort values (chainable)\n     * @param clauseSort clause\n     * @returns The view\n     */\n    sort(clause) {\n        this.sort$.next(clause);\n        return this;\n    }\n    /**\n     * Create the final observable\n     * @returns Observable\n     */\n    lift() {\n        this.lifted = true;\n        const source$ = this.joins.length > 0 ? this.liftJoinedSource() : this.liftSource();\n        const observables$ = [\n            source$,\n            this.filters$,\n            this.filter$,\n            this.sort$,\n            this.getKey$\n        ];\n        this.values$$ = combineLatest(observables$)\n            .pipe(skip(1), debounceTime(5))\n            .subscribe((bunch) => {\n            const [_values, filters, filter, sort, getKey] = bunch;\n            const values = this.processValues(_values, filters, filter, sort);\n            const generateIndex = getKey !== undefined;\n            this.setValues(values, generateIndex);\n        });\n    }\n    /**\n     * Create the source observable when no joins are defined\n     * @returns Observable\n     */\n    liftSource() {\n        return this.source$;\n    }\n    /**\n     * Create the source observable when joins are defined\n     * @returns Observable\n     */\n    liftJoinedSource() {\n        const sources$ = [this.source$, combineLatest(this.joins.map((join) => join.source))];\n        return combineLatest(sources$)\n            .pipe(map((bunch) => {\n            const [entities, joinData] = bunch;\n            return entities.reduce((values, entity) => {\n                const value = this.computeJoinedValue(entity, joinData);\n                if (value !== undefined) {\n                    values.push(value);\n                }\n                return values;\n            }, []);\n        }));\n    }\n    /**\n     * Apply joins to a source's entity and return the final value\n     * @returns Final value\n     */\n    computeJoinedValue(entity, joinData) {\n        let value = entity;\n        let joinIndex = 0;\n        while (value !== undefined && joinIndex < this.joins.length) {\n            value = this.joins[joinIndex].reduce(value, joinData[joinIndex]);\n            joinIndex += 1;\n        }\n        return value;\n    }\n    /**\n     * Filter and sort values before streaming them\n     * @param values Values\n     * @param filters Filter clauses\n     * @param filter Filter clause\n     * @param sort Sort clause\n     * @returns Filtered and sorted values\n     */\n    processValues(values, filters, filter, sort) {\n        values = values.slice(0);\n        values = this.filterValues(values, filters.concat([filter]));\n        values = this.sortValues(values, sort);\n        return values;\n    }\n    /**\n     * Filter values\n     * @param values Values\n     * @param filters Filter clauses\n     * @returns Filtered values\n     */\n    filterValues(values, clauses) {\n        if (clauses.length === 0) {\n            return values;\n        }\n        return values\n            .filter((value) => {\n            return clauses\n                .filter((clause) => clause !== undefined)\n                .every((clause) => clause(value));\n        });\n    }\n    /**\n     * Sort values\n     * @param values Values\n     * @param sort Sort clause\n     * @returns Sorted values\n     */\n    sortValues(values, clause) {\n        if (clause === undefined) {\n            return values;\n        }\n        return values.sort((v1, v2) => {\n            return ObjectUtils.naturalCompare(clause.valueAccessor(v1), clause.valueAccessor(v2), clause.direction, clause.nullsFirst);\n        });\n    }\n    /**\n     * Set value and optionally generate an index\n     * @param values Values\n     * @param generateIndex boolean\n     */\n    setValues(values, generateIndex) {\n        if (generateIndex === true) {\n            this._index = this.generateIndex(values);\n        }\n        this.values$.next(values);\n        const count = values.length;\n        const empty = count === 0;\n        this.count$.next(count);\n        this.empty$.next(empty);\n    }\n    /**\n     * Generate a complete index of all the values\n     * @param entities Entities\n     * @returns Index\n     */\n    generateIndex(values) {\n        const entries = values.map((value) => [this.getKey(value), value]);\n        return new Map(entries);\n    }\n}\n\n/**\n * An entity store class holds any number of entities\n * as well as their state. It can be observed, filtered and sorted and\n * provides methods to insert, update or delete entities.\n */\nclass EntityStore {\n    constructor(entities, options = {}) {\n        /**\n         * Observable of the raw entities\n         */\n        this.entities$ = new BehaviorSubject([]);\n        /**\n         * Number of entities\n         */\n        this.count$ = new BehaviorSubject(0);\n        /**\n         * Whether the store is empty\n         */\n        this.empty$ = new BehaviorSubject(true);\n        this._pristine = true;\n        /**\n         * Strategies\n         */\n        this.strategies = [];\n        this.getKey = options.getKey ? options.getKey : getEntityId;\n        this.getProperty = options.getProperty ? options.getProperty : getEntityProperty;\n        this.state = this.createStateManager();\n        this.view = this.createDataView();\n        this.stateView = this.createStateView();\n        this.view.lift();\n        this.stateView.lift();\n        if (entities.length > 0) {\n            this.load(entities);\n        }\n        else {\n            this._index = this.generateIndex(entities);\n        }\n    }\n    get count() { return this.count$.value; }\n    get empty() { return this.empty$.value; }\n    /**\n     * Store index\n     */\n    get index() { return this._index; }\n    /**\n     * Store index\n     */\n    get pristine() { return this._pristine; }\n    /**\n     * Get an entity from the store by key\n     * @param key Key\n     * @returns Entity\n     */\n    get(key) {\n        return this.index.get(key);\n    }\n    /**\n     * Get all entities in the store\n     * @returns Array of entities\n     */\n    all() {\n        return this.entities$.value;\n    }\n    /**\n     * Set this store's entities\n     * @param entities Entities\n     */\n    load(entities, pristine = true) {\n        this._index = this.generateIndex(entities);\n        this._pristine = pristine;\n        this.next();\n    }\n    /**\n     * Clear the store's entities but keep the state and views intact.\n     * Views won't return any data but future data will be subject to the\n     * current views filter and sort\n     */\n    softClear() {\n        if (this.index && this.index.size > 0) {\n            this.index.clear();\n            this._pristine = true;\n            this.next();\n        }\n        else if (this.index) {\n            this.updateCount();\n        }\n    }\n    /**\n     * Clear the store's entities, state and views\n     */\n    clear() {\n        this.stateView.clear();\n        this.view.clear();\n        this.state.clear();\n        this.softClear();\n    }\n    destroy() {\n        this.stateView.destroy();\n        this.view.destroy();\n        this.clear();\n    }\n    /**\n     * Insert an entity into the store\n     * @param entity Entity\n     */\n    insert(entity) {\n        this.insertMany([entity]);\n    }\n    /**\n     * Insert many entities into the store\n     * @param entities Entities\n     */\n    insertMany(entities) {\n        entities.forEach((entity) => this.index.set(this.getKey(entity), entity));\n        this._pristine = false;\n        this.next();\n    }\n    /**\n     * Update or insert an entity into the store\n     * @param entity Entity\n     */\n    update(entity) {\n        this.updateMany([entity]);\n    }\n    /**\n     * Update or insert many entities into the store\n     * @param entities Entities\n     */\n    updateMany(entities) {\n        entities.forEach((entity) => this.index.set(this.getKey(entity), entity));\n        this._pristine = false;\n        this.next();\n    }\n    /**\n     * Delete an entity from the store\n     * @param entity Entity\n     */\n    delete(entity) {\n        this.deleteMany([entity]);\n    }\n    /**\n     * Delete many entities from the store\n     * @param entities Entities\n     */\n    deleteMany(entities) {\n        entities.forEach((entity) => this.index.delete(this.getKey(entity)));\n        this._pristine = false;\n        this.next();\n    }\n    /**\n     * Add a strategy to this store\n     * @param strategy Entity store strategy\n     * @returns Entity store\n     */\n    addStrategy(strategy, activate = false) {\n        const existingStrategy = this.strategies.find((_strategy) => {\n            return strategy.constructor === _strategy.constructor;\n        });\n        if (existingStrategy !== undefined) {\n            throw new Error('A strategy of this type already exists on that EntityStore.');\n        }\n        this.strategies.push(strategy);\n        strategy.bindStore(this);\n        if (activate === true) {\n            strategy.activate();\n        }\n        return this;\n    }\n    /**\n     * Remove a strategy from this store\n     * @param strategy Entity store strategy\n     * @returns Entity store\n     */\n    removeStrategy(strategy) {\n        const index = this.strategies.indexOf(strategy);\n        if (index >= 0) {\n            this.strategies.splice(index, 1);\n            strategy.unbindStore(this);\n        }\n        return this;\n    }\n    /**\n     * Return strategies of a given type\n     * @param type Entity store strategy class\n     * @returns Strategies\n     */\n    getStrategyOfType(type) {\n        return this.strategies.find((strategy) => {\n            return strategy instanceof type;\n        });\n    }\n    /**\n     * Activate strategies of a given type\n     * @param type Entity store strategy class\n     */\n    activateStrategyOfType(type) {\n        const strategy = this.getStrategyOfType(type);\n        if (strategy !== undefined) {\n            strategy.activate();\n        }\n    }\n    /**\n     * Deactivate strategies of a given type\n     * @param type Entity store strategy class\n     */\n    deactivateStrategyOfType(type) {\n        const strategy = this.getStrategyOfType(type);\n        if (strategy !== undefined) {\n            strategy.deactivate();\n        }\n    }\n    /**\n     * Generate a complete index of all the entities\n     * @param entities Entities\n     * @returns Index\n     */\n    generateIndex(entities) {\n        const entries = entities.map((entity) => [this.getKey(entity), entity]);\n        return new Map(entries);\n    }\n    /**\n     * Push the index's entities into the entities$ observable\n     */\n    next() {\n        this.entities$.next(Array.from(this.index.values()));\n        this.updateCount();\n    }\n    /**\n     * Update the store's count and empty\n     */\n    updateCount() {\n        const count = this.index.size;\n        const empty = count === 0;\n        this.count$.next(count);\n        this.empty$.next(empty);\n    }\n    /**\n     * Create the entity state manager\n     * @returns EntityStateManager\n     */\n    createStateManager() {\n        return new EntityStateManager({ store: this });\n    }\n    /**\n     * Create the data view\n     * @returns EntityView<E>\n     */\n    createDataView() {\n        return new EntityView(this.entities$);\n    }\n    /**\n     * Create the state view\n     * @returns EntityView<EntityRecord<E>>\n     */\n    createStateView() {\n        return new EntityView(this.view.all$())\n            .join({\n            source: this.state.change$,\n            reduce: (entity) => {\n                const key = this.getKey(entity);\n                const state = this.state.get(entity);\n                const currentRecord = this.stateView.get(key);\n                if (currentRecord !== undefined &&\n                    currentRecord.entity === entity &&\n                    this.statesAreTheSame(currentRecord.state, state)) {\n                    return currentRecord;\n                }\n                const revision = currentRecord ? currentRecord.revision + 1 : 1;\n                const ref = `${key}-${revision}`;\n                return { entity, state, revision, ref };\n            }\n        })\n            .createIndex((record) => this.getKey(record.entity));\n    }\n    statesAreTheSame(currentState, newState) {\n        if (currentState === newState) {\n            return true;\n        }\n        const currentStateIsEmpty = Object.keys(currentState).length === 0;\n        const newStateIsEmpty = Object.keys(newState).length === 0;\n        return currentStateIsEmpty && newStateIsEmpty;\n    }\n}\n\n/**\n * This class is used to synchronize a component's changes\n * detection with an EntityStore changes. For example, it is frequent\n * to have a component subscribe to a store's selected entity and, at the same time,\n * this component provides a way to select an entity with, let's say, a click.\n *\n * This class automatically handles those case and triggers the compoent's\n * change detection when needed.\n *\n * Note: If the component observes the store's stateView, a workspace is\n * probably not required because the stateView catches any changes to the\n * entities and their state.\n */\nclass EntityStoreWatcher {\n    constructor(store, cdRef) {\n        /**\n         * Component inner state\n         */\n        this.innerStateIndex = new Map();\n        this.setChangeDetector(cdRef);\n        this.setStore(store);\n    }\n    destroy() {\n        this.setChangeDetector(undefined);\n        this.setStore(undefined);\n    }\n    /**\n     * Bind this workspace to a store and start watching for changes\n     * @param store Entity store\n     */\n    setStore(store) {\n        if (store === undefined) {\n            this.teardownObservers();\n            this.innerStateIndex.clear();\n            this.store = undefined;\n            return;\n        }\n        this.setStore(undefined);\n        this.store = store;\n        this.setupObservers();\n        this.detectChanges();\n    }\n    /**\n     * Bind this workspace to a component's change detector\n     * @param cdRef Change detector\n     */\n    setChangeDetector(cdRef) {\n        this.cdRef = cdRef;\n    }\n    /**\n     * Set up observers on a store's entities and their state\n     * @param store Entity store\n     */\n    setupObservers() {\n        this.teardownObservers();\n        this.entities$$ = this.store.entities$\n            .subscribe((entities) => this.onEntitiesChange(entities));\n        this.state$$ = this.store.state.change$\n            .pipe(skip(1))\n            .subscribe(() => this.onStateChange());\n    }\n    /**\n     * Teardown store observers\n     */\n    teardownObservers() {\n        if (this.entities$$ !== undefined) {\n            this.entities$$.unsubscribe();\n        }\n        if (this.state$$ !== undefined) {\n            this.state$$.unsubscribe();\n        }\n        this.entities$$ = undefined;\n        this.state$$ = undefined;\n    }\n    /**\n     * When the entities change, always trigger the changes detection\n     */\n    onEntitiesChange(entities) {\n        this.detectChanges();\n    }\n    /**\n     * When the entities state change, trigger the change detection\n     * only if the component has not handled these changes yet. For example,\n     * the component might have initiated thoses changes itself.\n     */\n    onStateChange() {\n        let changesDetected = false;\n        const storeIndex = this.store.state.index;\n        const innerIndex = this.innerStateIndex;\n        if (storeIndex.size !== innerIndex.size) {\n            changesDetected = this.detectChanges();\n        }\n        const storeKeys = Array.from(storeIndex.keys());\n        for (const key of storeKeys) {\n            const storeValue = storeIndex.get(key);\n            const innerValue = innerIndex.get(key);\n            if (changesDetected === false) {\n                if (innerValue === undefined) {\n                    changesDetected = this.detectChanges();\n                }\n                else if (!ObjectUtils.objectsAreEquivalent(storeValue, innerValue)) {\n                    changesDetected = this.detectChanges();\n                }\n            }\n            this.innerStateIndex.set(key, Object.assign({}, storeValue));\n        }\n    }\n    /**\n     * Trigger the change detection of the workspace is bound to a change detector\n     */\n    detectChanges() {\n        if (this.cdRef !== undefined) {\n            this.cdRef.detectChanges();\n        }\n        return true;\n    }\n}\n\n/**\n * This class holds a reference to the insert, update and delete\n * operations performed on a store. This is useful to commit\n * these operations in a single pass or to cancel them.\n */\nclass EntityTransaction {\n    constructor(options = {}) {\n        this.inCommitPhase$ = new BehaviorSubject(false);\n        this.getKey = options.getKey ? options.getKey : getEntityId;\n        this.operations = new EntityStore([], {\n            getKey: (operation) => operation.key\n        });\n    }\n    /**\n     * Whether there are pending operations\n     */\n    get empty$() { return this.operations.empty$; }\n    /**\n     * Whether there are pending operations\n     */\n    get empty() { return this.empty$.value; }\n    /**\n     * Whether thise store is in commit phase\n     */\n    get inCommitPhase() { return this.inCommitPhase$.value; }\n    destroy() {\n        this.operations.destroy();\n    }\n    /**\n     * Insert an entity into a store. If no store is specified, an insert\n     * operation is still created but the transaction won't add the new\n     * entity to the store.\n     * @param current The entity to insert\n     * @param store Optional: The store to insert the entity into\n     * @param meta Optional: Any metadata on the operation\n     */\n    insert(current, store, meta) {\n        const existingOperation = this.getOperationByEntity(current);\n        if (existingOperation !== undefined) {\n            this.removeOperation(existingOperation);\n        }\n        this.doInsert(current, store, meta);\n    }\n    /**\n     * Update an entity in a store. If no store is specified, an update\n     * operation is still created but the transaction won't update the\n     * entity into the store.\n     * @param previous The entity before update\n     * @param current The entity after update\n     * @param store Optional: The store to update the entity into\n     * @param meta Optional: Any metadata on the operation\n     */\n    update(previous, current, store, meta) {\n        const existingOperation = this.getOperationByEntity(current);\n        if (existingOperation !== undefined) {\n            this.removeOperation(existingOperation);\n            if (existingOperation.type === EntityOperationType.Insert) {\n                this.doInsert(current, store, meta);\n                return;\n            }\n            else if (existingOperation.type === EntityOperationType.Update) {\n                previous = existingOperation.previous;\n            }\n        }\n        this.doUpdate(previous, current, store, meta);\n    }\n    /**\n     * Delete an entity from a store. If no store is specified, a delete\n     * operation is still created but the transaction won't remove the\n     * entity from the store.\n     * @param previous The entity before delete\n     * @param store Optional: The store to delete the entity from\n     * @param meta Optional: Any metadata on the operation\n     */\n    delete(previous, store, meta) {\n        const existingOperation = this.getOperationByEntity(previous);\n        if (existingOperation !== undefined) {\n            this.removeOperation(existingOperation);\n            if (existingOperation.type === EntityOperationType.Insert) {\n                if (store !== undefined) {\n                    store.delete(previous);\n                }\n                return;\n            }\n        }\n        this.doDelete(previous, store, meta);\n    }\n    /**\n     * Commit operations the transaction. This method doesn't do much\n     * in itself. The handler it receives does the hard work and it's\n     * implementation is left to the caller. This method simply wraps\n     * the handler into an error catching mechanism to update\n     * the transaction afterward. The caller needs to subscribe to this\n     * method's output (observable) for the commit to be performed.\n     * @param operations Operations to commit\n     * @param handler Function that handles the commit operation\n     * @returns The handler output (observable)\n     */\n    commit(operations, handler) {\n        this.inCommitPhase$.next(true);\n        return handler(this, operations)\n            .pipe(catchError(() => of(new Error())), tap((result) => {\n            if (result instanceof Error) {\n                this.onCommitError(operations);\n            }\n            else {\n                this.onCommitSuccess(operations);\n            }\n        }));\n    }\n    /**\n     * Commit all the operations of the transaction.\n     * @param handler Function that handles the commit operation\n     * @returns The handler output (observable)\n     */\n    commitAll(handler) {\n        const operations = this.getOperationsInCommit();\n        return this.commit(operations, handler);\n    }\n    /**\n     * Rollback this transaction\n     */\n    rollback() {\n        this.rollbackOperations(this.operations.all());\n    }\n    /**\n     * Rollback specific operations\n     */\n    rollbackOperations(operations) {\n        this.checkInCommitPhase();\n        const operationsFactory = () => new Map([\n            [EntityOperationType.Delete, []],\n            [EntityOperationType.Update, []],\n            [EntityOperationType.Insert, []]\n        ]);\n        const storesOperations = new Map();\n        // Group operations by store and by operation type.\n        // Grouping operations allows us to revert them in bacth, thus, triggering\n        // observables only one per operation type.\n        for (const operation of operations) {\n            const store = operation.store;\n            if (operation.store === undefined) {\n                continue;\n            }\n            let storeOperations = storesOperations.get(store);\n            if (storeOperations === undefined) {\n                storeOperations = operationsFactory();\n                storesOperations.set(store, storeOperations);\n            }\n            storeOperations.get(operation.type).push(operation);\n        }\n        Array.from(storesOperations.keys()).forEach((store) => {\n            const storeOperations = storesOperations.get(store);\n            const deletes = storeOperations.get(EntityOperationType.Delete);\n            store.insertMany(deletes.map((_delete) => _delete.previous));\n            const updates = storeOperations.get(EntityOperationType.Update);\n            store.updateMany(updates.map((_update) => _update.previous));\n            const inserts = storeOperations.get(EntityOperationType.Insert);\n            store.deleteMany(inserts.map((_insert) => _insert.current));\n        });\n        this.operations.deleteMany(operations);\n        this.inCommitPhase$.next(false);\n    }\n    /**\n     * Clear this transaction\n     * @todo Raise event and synchronize stores?\n     */\n    clear() {\n        this.operations.clear();\n        this.inCommitPhase$.next(false);\n    }\n    /**\n     * Get any existing operation on an entity\n     * @param entity Entity\n     * @returns Either an insert, update or delete operation\n     */\n    getOperationByEntity(entity) {\n        return this.operations.get(this.getKey(entity));\n    }\n    /**\n     * Merge another transaction in this one\n     * @param transaction Another transaction\n     */\n    mergeTransaction(transaction) {\n        this.checkInCommitPhase();\n        const operations = transaction.operations.all();\n        operations.forEach((operation) => {\n            this.addOperation(operation);\n        });\n    }\n    /**\n     * Create an insert operation and add an entity to the store\n     * @param current The entity to insert\n     * @param store Optional: The store to insert the entity into\n     * @param meta Optional: Any metadata on the operation\n     */\n    doInsert(current, store, meta) {\n        this.addOperation({\n            key: this.getKey(current),\n            type: EntityOperationType.Insert,\n            previous: undefined,\n            current,\n            store,\n            meta\n        });\n        if (store !== undefined) {\n            store.insert(current);\n        }\n    }\n    /**\n     * Create an update operation and update an entity into the store\n     * @param previous The entity before update\n     * @param current The entity after update\n     * @param store Optional: The store to update the entity into\n     * @param meta Optional: Any metadata on the operation\n     */\n    doUpdate(previous, current, store, meta) {\n        this.addOperation({\n            key: this.getKey(current),\n            type: EntityOperationType.Update,\n            previous,\n            current,\n            store,\n            meta\n        });\n        if (store !== undefined) {\n            store.update(current);\n        }\n    }\n    /**\n     * Create a delete operation and delete an entity from the store\n     * @param previous The entity before delete\n     * @param store Optional: The store to delete the entity from\n     * @param meta Optional: Any metadata on the operation\n     */\n    doDelete(previous, store, meta) {\n        this.addOperation({\n            key: this.getKey(previous),\n            type: EntityOperationType.Delete,\n            previous,\n            current: undefined,\n            store,\n            meta\n        });\n        if (store !== undefined) {\n            store.delete(previous);\n        }\n    }\n    /**\n     * Remove committed operations from store\n     * @param operations Commited operations\n     * @todo Raise event and synchronize stores?\n     */\n    resolveOperations(operations) {\n        this.operations.deleteMany(operations);\n    }\n    /**\n     * On commit success, resolve commited operations and exit commit phase\n     * @param operations Commited operations\n     */\n    onCommitSuccess(operations) {\n        this.resolveOperations(operations);\n        this.inCommitPhase$.next(false);\n    }\n    /**\n     * On commit error, abort transaction\n     * @param operations Commited operations\n     */\n    onCommitError(operations) {\n        this.inCommitPhase$.next(false);\n    }\n    /**\n     * Add an operation to the operations store\n     * @param operation Operation to add\n     */\n    addOperation(operation) {\n        this.checkInCommitPhase();\n        this.operations.insert(operation);\n        this.operations.state.update(operation, { added: true });\n    }\n    /**\n     * Remove an operation from the operations store\n     * @param operation Operation to remove\n     */\n    removeOperation(operation) {\n        this.checkInCommitPhase();\n        this.operations.delete(operation);\n        this.operations.state.update(operation, { added: false });\n    }\n    /**\n     * Get all the operations to commit\n     * @returns Operations to commit\n     */\n    getOperationsInCommit() {\n        return this.operations.stateView\n            .manyBy((value) => {\n            return value.state.added === true;\n        })\n            .map((value) => value.entity);\n    }\n    /**\n     * Check if the transaction is in the commit phase and throw an error if it is\n     */\n    checkInCommitPhase() {\n        if (this.inCommitPhase === true) {\n            throw new Error('This transaction is in the commit phase. Cannot complete this operation.');\n        }\n    }\n}\n\n/**\n * Entity store strategies. They can do pretty much anything during a store's\n * lifetime. For example, they may act as triggers when something happens.\n * Sharing a strategy is a good idea when multiple strategies would have\n * on cancelling effect on each other.\n *\n * At creation, strategy is inactive and needs to be manually activated.\n */\nclass EntityStoreStrategy {\n    constructor(options = {}) {\n        this.options = options;\n        /**\n         * Feature store\n         * @internal\n         */\n        this.stores = [];\n        this.active$ = new BehaviorSubject(false);\n        this.options = options;\n    }\n    /**\n     * Whether this strategy is active\n     * @internal\n     */\n    get active() { return this.active$.value; }\n    /**\n     * Activate the strategy. If it's already active, it'll be deactivated\n     * and activated again.\n     */\n    activate() {\n        if (this.active === true) {\n            this.doDeactivate();\n        }\n        this.active$.next(true);\n        this.doActivate();\n    }\n    /**\n     * Activate the strategy. If it's already active, it'll be deactivated\n     * and activated again.\n     */\n    deactivate() {\n        this.active$.next(false);\n        this.doDeactivate();\n    }\n    /**\n     * Bind this strategy to a store\n     * @param store Feature store\n     */\n    bindStore(store) {\n        if (this.stores.indexOf(store) < 0) {\n            this.stores.push(store);\n        }\n    }\n    /**\n     * Unbind this strategy from store\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        const index = this.stores.indexOf(store);\n        if (index >= 0) {\n            this.stores.splice(index, 1);\n        }\n    }\n    /**\n     * Do the stataegy activation\n     * @internal\n     */\n    doActivate() { }\n    /**\n     * Do the strategy deactivation\n     * @internal\n     */\n    doDeactivate() { }\n}\n\n/**\n * When active, this strategy filters a store's stateView to return\n * selected entities only.\n */\nclass EntityStoreFilterCustomFuncStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        /**\n         * Store / filter ids map\n         */\n        this.filters = new Map();\n    }\n    /**\n     * Bind this strategy to a store and start filtering it\n     * @param store Entity store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.filterStore(store);\n        }\n    }\n    /**\n     * Unbind this strategy from a store and stop filtering it\n     * @param store Entity store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unfilterStore(store);\n        }\n    }\n    /**\n     * Start filtering all stores\n     * @internal\n     */\n    doActivate() {\n        this.filterAll();\n    }\n    /**\n     * Stop filtering all stores\n     * @internal\n     */\n    doDeactivate() {\n        this.unfilterAll();\n    }\n    /**\n     * Filter all stores\n     */\n    filterAll() {\n        this.stores.forEach((store) => this.filterStore(store));\n    }\n    /**\n     * Unfilter all stores\n     */\n    unfilterAll() {\n        this.stores.forEach((store) => this.unfilterStore(store));\n    }\n    /**\n     * Filter a store and add it to the filters map\n     */\n    filterStore(store) {\n        this.filters.set(store, store.stateView.addFilter(this.options.filterClauseFunc));\n    }\n    /**\n     * Unfilter a store and delete it from the filters map\n     */\n    unfilterStore(store) {\n        const filterId = this.filters.get(store);\n        if (filterId === undefined) {\n            return;\n        }\n        store.stateView.removeFilter(filterId);\n        this.filters.delete(store);\n    }\n}\n\n/**\n * When active, this strategy filters a store's stateView to return\n * selected entities only.\n */\nclass EntityStoreFilterSelectionStrategy extends EntityStoreStrategy {\n    constructor() {\n        super(...arguments);\n        /**\n         * Store / filter ids map\n         */\n        this.filters = new Map();\n    }\n    /**\n     * Bind this strategy to a store and start filtering it\n     * @param store Entity store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.filterStore(store);\n        }\n    }\n    /**\n     * Unbind this strategy from a store and stop filtering it\n     * @param store Entity store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unfilterStore(store);\n        }\n    }\n    /**\n     * Start filtering all stores\n     * @internal\n     */\n    doActivate() {\n        this.filterAll();\n    }\n    /**\n     * Stop filtering all stores\n     * @internal\n     */\n    doDeactivate() {\n        this.unfilterAll();\n    }\n    /**\n     * Filter all stores\n     */\n    filterAll() {\n        this.stores.forEach((store) => this.filterStore(store));\n    }\n    /**\n     * Unfilter all stores\n     */\n    unfilterAll() {\n        this.stores.forEach((store) => this.unfilterStore(store));\n    }\n    /**\n     * Filter a store and add it to the filters map\n     */\n    filterStore(store) {\n        if (this.filters.has(store)) {\n            return;\n        }\n        const filter = (record) => {\n            return record.state.selected === true;\n        };\n        this.filters.set(store, store.stateView.addFilter(filter));\n    }\n    /**\n     * Unfilter a store and delete it from the filters map\n     */\n    unfilterStore(store) {\n        const filterId = this.filters.get(store);\n        if (filterId === undefined) {\n            return;\n        }\n        store.stateView.removeFilter(filterId);\n        this.filters.delete(store);\n    }\n}\n\nclass EntitySelectorComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        /**\n         * The selected entity\n         * @internal\n         */\n        this.selected$ = new BehaviorSubject(undefined);\n        /**\n         * The current multi select option text\n         * @internal\n         */\n        this.multiText$ = new BehaviorSubject(undefined);\n        this.multiSelectValue = { id: 'IGO_MULTI_SELECT' };\n        this.emptyValue = { id: 'IGO_EMPTY_SELECT' };\n        /**\n         * Title accessor\n         */\n        this.titleAccessor = getEntityTitle;\n        /**\n         * Text to display when nothing is selected\n         */\n        this.emptyText = undefined;\n        /**\n         * Wheter selecting many entities is allowed\n         */\n        this.multi = false;\n        /**\n         * Text to display for the select all option\n         */\n        this.multiAllText = 'All';\n        /**\n         * Text to display for the select none option\n         */\n        this.multiNoneText = 'None';\n        /**\n         * Wheter the selector is disabled or not\n         */\n        this.disabled = false;\n        /**\n         * Event emitted when the selection changes\n         */\n        this.selectedChange = new EventEmitter();\n    }\n    /**\n     * Create a store watcher and subscribe to the selected entity\n     * @internal\n     */\n    ngOnInit() {\n        this.watcher = new EntityStoreWatcher(this.store, this.cdRef);\n        this.selected$$ = this.store.stateView\n            .manyBy$((record) => record.state.selected === true)\n            .subscribe((records) => {\n            const entities = records.map((record) => record.entity);\n            this.onSelectFromStore(entities);\n        });\n    }\n    /**\n     * Unsubscribe to the selected entity and destroy the store watcher\n     * @internal\n     */\n    ngOnDestroy() {\n        this.watcher.destroy();\n        this.selected$$.unsubscribe();\n    }\n    /**\n     * On selection change, update the store's state and emit an event\n     * @internal\n     */\n    onSelectionChange(event) {\n        const values = event.value instanceof Array ? event.value : [event.value];\n        const multiSelect = values.find((_value) => _value === this.multiSelectValue);\n        let entities = values.filter((_value) => _value !== this.multiSelectValue);\n        if (multiSelect !== undefined) {\n            if (entities.length === this.store.count) {\n                entities = [];\n            }\n            else if (entities.length < this.store.count) {\n                entities = this.store.all();\n            }\n        }\n        entities = entities.filter((entity) => entity !== this.emptyValue);\n        if (entities.length === 0) {\n            this.store.state.updateAll({ selected: false });\n        }\n        else {\n            this.store.state.updateMany(entities, { selected: true }, true);\n        }\n        const value = this.multi ? entities : event.value;\n        this.selectedChange.emit({ selected: true, value });\n    }\n    onSelectFromStore(entities) {\n        if (this.multi === true) {\n            this.selected$.next(entities);\n        }\n        else {\n            const entity = entities.length > 0 ? entities[0] : undefined;\n            this.selected$.next(entity);\n        }\n        this.updateMultiToggleWithEntities(entities);\n    }\n    updateMultiToggleWithEntities(entities) {\n        if (entities.length === this.store.count && this.multiText$.value !== this.multiNoneText) {\n            this.multiText$.next(this.multiNoneText);\n        }\n        else if (entities.length < this.store.count && this.multiText$.value !== this.multiAllText) {\n            this.multiText$.next(this.multiAllText);\n        }\n    }\n}\nEntitySelectorComponent.ɵfac = function EntitySelectorComponent_Factory(t) { return new (t || EntitySelectorComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nEntitySelectorComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: EntitySelectorComponent, selectors: [[\"igo-entity-selector\"]], inputs: { titleAccessor: \"titleAccessor\", emptyText: \"emptyText\", multi: \"multi\", multiAllText: \"multiAllText\", multiNoneText: \"multiNoneText\", disabled: \"disabled\", store: \"store\", placeholder: \"placeholder\" }, outputs: { selectedChange: \"selectedChange\" }, decls: 7, vars: 11, consts: [[1, \"igo-entity-selector\"], [3, \"disabled\", \"value\", \"multiple\", \"placeholder\", \"selectionChange\"], [3, \"value\", 4, \"ngIf\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"value\"]], template: function EntitySelectorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"mat-select\", 1);\n        ɵngcc0.ɵɵlistener(\"selectionChange\", function EntitySelectorComponent_Template_mat_select_selectionChange_1_listener($event) { return ctx.onSelectionChange($event); });\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵtemplate(3, EntitySelectorComponent_mat_option_3_Template, 2, 2, \"mat-option\", 2);\n        ɵngcc0.ɵɵtemplate(4, EntitySelectorComponent_mat_option_4_Template, 3, 4, \"mat-option\", 2);\n        ɵngcc0.ɵɵtemplate(5, EntitySelectorComponent_ng_template_5_Template, 2, 2, \"ng-template\", 3);\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"value\", ɵngcc0.ɵɵpipeBind1(2, 7, ctx.selected$))(\"multiple\", ctx.multi)(\"placeholder\", ctx.placeholder);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.emptyText !== undefined && ctx.multi === false);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.multi === true);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(6, 9, ctx.store.stateView.all$()));\n    } }, directives: [ɵngcc1.MatFormField, ɵngcc2.MatSelect, ɵngcc3.NgIf, ɵngcc3.NgForOf, ɵngcc4.MatOption], pipes: [ɵngcc3.AsyncPipe], styles: [\"mat-form-field[_ngcontent-%COMP%]{width:100%}\"], changeDetection: 0 });\nEntitySelectorComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef }\n];\nEntitySelectorComponent.propDecorators = {\n    store: [{ type: Input }],\n    titleAccessor: [{ type: Input }],\n    emptyText: [{ type: Input }],\n    multi: [{ type: Input }],\n    multiAllText: [{ type: Input }],\n    multiNoneText: [{ type: Input }],\n    placeholder: [{ type: Input }],\n    disabled: [{ type: Input }],\n    selectedChange: [{ type: Output }]\n};\n\nclass EntityTableComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        this.entitySortChange$ = new BehaviorSubject(false);\n        /**\n         * Reference to the column renderer types\n         * @internal\n         */\n        this.entityTableColumnRenderer = EntityTableColumnRenderer;\n        /**\n         * Reference to the selection's state\n         * @internal\n         */\n        this.entityTableSelectionState = EntityTableSelectionState;\n        /**\n         * Observable of the selection,s state\n         * @internal\n         */\n        this.selectionState$ = new BehaviorSubject(undefined);\n        /**\n         * Scroll behavior on selection\n         */\n        this.scrollBehavior = EntityTableScrollBehavior.Auto;\n        /**\n         * Whether nulls should be first when sorting\n         */\n        this.sortNullsFirst = false;\n        /**\n         * Show the table paginator or not. False by default.\n         */\n        this.withPaginator = false;\n        /**\n         * Event emitted when an entity (row) is clicked\n         */\n        this.entityClick = new EventEmitter();\n        /**\n         * Event emitted when an entity (row) is selected\n         */\n        this.entitySelectChange = new EventEmitter();\n        /**\n         * Event emitted when the table sort is changed.\n         */\n        this.entitySortChange = new EventEmitter(undefined);\n        /**\n         * Data source consumable by the underlying material table\n         * @internal\n         */\n        this.dataSource = new MatTableDataSource();\n    }\n    /**\n     * Table paginator\n     */\n    set paginator(value) {\n        this._paginator = value;\n        this.dataSource.paginator = value;\n    }\n    get paginator() {\n        return this._paginator;\n    }\n    /**\n     * Table headers\n     * @internal\n     */\n    get headers() {\n        let columns = this.template.columns\n            .filter((column) => column.visible !== false)\n            .map((column) => column.name);\n        if (this.selectionCheckbox === true) {\n            columns = ['selectionCheckbox'].concat(columns);\n        }\n        return columns;\n    }\n    /**\n     * Whether selection is supported\n     * @internal\n     */\n    get selection() { return this.template.selection || false; }\n    /**\n     * Whether a selection checkbox should be displayed\n     * @internal\n     */\n    get selectionCheckbox() { return this.template.selectionCheckbox || false; }\n    /**\n     * Whether selection many entities should eb supported\n     * @internal\n     */\n    get selectMany() { return this.template.selectMany || false; }\n    /**\n     * Whether selection many entities should eb supported\n     * @internal\n     */\n    get fixedHeader() { return this.template.fixedHeader === undefined ? true : this.template.fixedHeader; }\n    /**\n     * Track the selection state to properly display the selection checkboxes\n     * @internal\n     */\n    ngOnInit() {\n        this.handleDatasource();\n        this.dataSource.paginator = this.paginator;\n    }\n    /**\n     * @internal\n     */\n    ngOnChanges(changes) {\n        const store = changes.store;\n        if (store && store.currentValue !== store.previousValue) {\n            this.handleDatasource();\n        }\n    }\n    handleDatasource() {\n        this.unsubscribeStore();\n        this.selection$$ = this.store.stateView\n            .manyBy$((record) => record.state.selected === true)\n            .subscribe((records) => {\n            const firstSelected = records[0];\n            const firstSelectedStateviewPosition = this.store.stateView.all().indexOf(firstSelected);\n            const pageMax = this.paginator.pageSize * (this.paginator.pageIndex + 1);\n            const pageMin = pageMax - this.paginator.pageSize;\n            if (this.paginator &&\n                firstSelectedStateviewPosition < pageMin ||\n                firstSelectedStateviewPosition >= pageMax) {\n                const pageToReach = Math.floor(firstSelectedStateviewPosition / this.paginator.pageSize);\n                this.dataSource.paginator.pageIndex = pageToReach;\n            }\n            this.selectionState$.next(this.computeSelectionState(records));\n        });\n        this.dataSource$$ = this.store.stateView.all$().subscribe((all) => {\n            this.dataSource.data = all;\n        });\n    }\n    /**\n     * Unbind the store watcher\n     * @internal\n     */\n    ngOnDestroy() {\n        this.unsubscribeStore();\n    }\n    unsubscribeStore() {\n        if (this.selection$$) {\n            this.selection$$.unsubscribe();\n        }\n        if (this.dataSource$$) {\n            this.dataSource$$.unsubscribe();\n        }\n    }\n    /**\n     * Trackby function\n     * @param record Record\n     * @param index Record index\n     * @internal\n     */\n    getTrackByFunction() {\n        return (index, record) => {\n            return record.ref;\n        };\n    }\n    /**\n     * Trigger a refresh of thre table. This can be useful when\n     * the data source doesn't emit a new value but for some reason\n     * the records need an update.\n     * @internal\n     */\n    refresh() {\n        this.cdRef.detectChanges();\n    }\n    paginatorChange(event) {\n        this.paginator = event;\n    }\n    /**\n     * On sort, sort the store\n     * @param event Sort event\n     * @internal\n     */\n    onSort(event) {\n        const direction = event.direction;\n        const column = this.template.columns\n            .find((c) => c.name === event.active);\n        if (direction === 'asc' || direction === 'desc') {\n            this.store.stateView.sort({\n                valueAccessor: (record) => this.getValue(record, column),\n                direction,\n                nullsFirst: this.sortNullsFirst\n            });\n            this.entitySortChange.emit({ column, direction });\n            this.entitySortChange$.next(true);\n        }\n        else {\n            this.store.stateView.sort(undefined);\n        }\n    }\n    /**\n     * When an entity is clicked, emit an event\n     * @param record Record\n     * @internal\n     */\n    onRowClick(record) {\n        this.lastRecordCheckedKey = this.store.stateView.getKey(record);\n        this.entityClick.emit(record.entity);\n    }\n    /**\n     * When an entity is selected, select it in the store and emit an event. Even if\n     * \"many\" is set to true, this method always select a single, exclusive row. Selecting\n     * multiple rows should be achieved by using the checkboxes.\n     * @param record Record\n     * @internal\n     */\n    onRowSelect(record) {\n        if (this.selection === false) {\n            return;\n        }\n        const entity = record.entity;\n        this.store.state.update(entity, { selected: true }, true);\n        this.entitySelectChange.emit({ added: [entity] });\n    }\n    /**\n     * Select or unselect all rows at once. On select, emit an event.\n     * @param toggle Select or unselect\n     * @internal\n     */\n    onToggleRows(toggle) {\n        if (this.selection === false) {\n            return;\n        }\n        this.store.state.updateAll({ selected: toggle });\n        if (toggle === true) {\n            const entities = this.store.stateView\n                .all()\n                .map((record) => record.entity);\n            this.entitySelectChange.emit({ added: [entities] });\n        }\n    }\n    /**\n     * When an entity is toggled, select or unselect it in the store. On select,\n     * emit an event.\n     * @param toggle Select or unselect\n     * @param record Record\n     * @internal\n     */\n    onToggleRow(toggle, record) {\n        if (this.selection === false) {\n            return;\n        }\n        const entity = record.entity;\n        const exclusive = toggle === true && !this.selectMany;\n        this.store.state.update(entity, { selected: toggle }, exclusive);\n        if (toggle === true) {\n            this.entitySelectChange.emit({ added: [entity] });\n        }\n        this.lastRecordCheckedKey = this.store.stateView.getKey(record);\n    }\n    /**\n     * When an entity is toggled, select or unselect it in the store. On select,\n     * emit an event.\n     * @param toggle Select or unselect\n     * @param record Record\n     * @internal\n     */\n    onShiftToggleRow(toggle, record, event) {\n        if (this.selection === false) {\n            return;\n        }\n        if (this.selectMany === false || this.lastRecordCheckedKey === undefined) {\n            this.onToggleRow(toggle, record);\n            return;\n        }\n        // This is a workaround mat checkbox wrong behavior\n        // when the shift key is held.\n        // See https://github.com/angular/components/issues/6232\n        const range = window.document.createRange();\n        range.selectNode(event.target);\n        window.getSelection().removeAllRanges();\n        window.getSelection().addRange(range);\n        event.stopImmediatePropagation();\n        const records = this.store.stateView.all();\n        const recordIndex = records.indexOf(record);\n        const lastRecordChecked = this.store.stateView.get(this.lastRecordCheckedKey);\n        const lastRecordIndex = records.indexOf(lastRecordChecked);\n        const indexes = [recordIndex, lastRecordIndex];\n        const selectRecords = records.slice(Math.min(...indexes), Math.max(...indexes) + 1);\n        const entities = selectRecords.map((_record) => _record.entity);\n        this.store.state.updateMany(entities, { selected: toggle });\n        if (toggle === true) {\n            this.entitySelectChange.emit({ added: entities });\n        }\n        this.lastRecordCheckedKey = this.store.stateView.getKey(record);\n    }\n    /**\n     * Compute the selection state\n     * @returns Whether all, some or no rows are selected\n     * @internal\n     */\n    computeSelectionState(selectedRecords) {\n        const states = EntityTableSelectionState;\n        const selectionCount = selectedRecords.length;\n        return selectionCount === 0 ?\n            states.None :\n            (selectionCount === this.store.stateView.count ? states.All : states.Some);\n    }\n    /**\n     * Whether a column is sortable\n     * @param column Column\n     * @returns True if a column is sortable\n     * @internal\n     */\n    columnIsSortable(column) {\n        let sortable = column.sort;\n        if (sortable === undefined) {\n            sortable = this.template.sort === undefined ? false : this.template.sort;\n        }\n        return sortable;\n    }\n    /**\n     * Whether a row is should be selected based on the underlying entity state\n     * @param record Record\n     * @returns True if a row should be selected\n     * @internal\n     */\n    rowIsSelected(record) {\n        const state = record.state;\n        return state.selected ? state.selected : false;\n    }\n    /**\n     * Method to access an entity's values\n     * @param record Record\n     * @param column Column\n     * @returns Any value\n     * @internal\n     */\n    getValue(record, column) {\n        const entity = record.entity;\n        if (column.valueAccessor !== undefined) {\n            return column.valueAccessor(entity, record);\n        }\n        if (this.template.valueAccessor !== undefined) {\n            return this.template.valueAccessor(entity, column.name, record);\n        }\n        return this.store.getProperty(entity, column.name);\n    }\n    /**\n     * Return the type of renderer of a column\n     * @param column Column\n     * @returns Renderer type\n     * @internal\n     */\n    getColumnRenderer(column) {\n        if (column.renderer !== undefined) {\n            return column.renderer;\n        }\n        return EntityTableColumnRenderer.Default;\n    }\n    /**\n     * Return the table ngClass\n     * @returns ngClass\n     * @internal\n     */\n    getTableClass() {\n        return {\n            'igo-entity-table-with-selection': this.selection\n        };\n    }\n    /**\n     * Return a header ngClass\n     * @returns ngClass\n     * @internal\n     */\n    getHeaderClass() {\n        const func = this.template.headerClassFunc;\n        if (func instanceof Function) {\n            return func();\n        }\n        return {};\n    }\n    /**\n     * Return a row ngClass\n     * @param record Record\n     * @returns ngClass\n     * @internal\n     */\n    getRowClass(record) {\n        const entity = record.entity;\n        const func = this.template.rowClassFunc;\n        if (func instanceof Function) {\n            return func(entity, record);\n        }\n        return {};\n    }\n    /**\n     * Return a row ngClass\n     * @param record Record\n     * @param column Column\n     * @returns ngClass\n     * @internal\n     */\n    getCellClass(record, column) {\n        const entity = record.entity;\n        const cls = {};\n        const tableFunc = this.template.cellClassFunc;\n        if (tableFunc instanceof Function) {\n            Object.assign(cls, tableFunc(entity, column, record));\n        }\n        const columnFunc = column.cellClassFunc;\n        if (columnFunc instanceof Function) {\n            Object.assign(cls, columnFunc(entity, record));\n        }\n        return cls;\n    }\n    /**\n     * When a button is clicked\n     * @param func Function\n     * @param record Record\n     * @internal\n     */\n    onButtonClick(clickFunc, record) {\n        if (typeof clickFunc === 'function') {\n            clickFunc(record.entity, record);\n        }\n    }\n}\nEntityTableComponent.ɵfac = function EntityTableComponent_Factory(t) { return new (t || EntityTableComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nEntityTableComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: EntityTableComponent, selectors: [[\"igo-entity-table\"]], inputs: { scrollBehavior: \"scrollBehavior\", sortNullsFirst: \"sortNullsFirst\", withPaginator: \"withPaginator\", paginator: \"paginator\", store: \"store\", template: \"template\", paginatorOptions: \"paginatorOptions\" }, outputs: { entityClick: \"entityClick\", entitySelectChange: \"entitySelectChange\", entitySortChange: \"entitySortChange\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 9, vars: 8, consts: [[1, \"table-container\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"ngClass\", \"dataSource\", \"trackBy\", \"matSortChange\"], [\"matColumnDef\", \"selectionCheckbox\", 1, \"mat-cell-checkbox\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [3, \"matColumnDef\", 4, \"ngFor\", \"ngForOf\"], [\"mat-header-row\", \"\", 3, \"ngClass\", 4, \"matHeaderRowDef\", \"matHeaderRowDefSticky\"], [\"mat-row\", \"\", \"igoEntityTableRow\", \"\", 3, \"scrollBehavior\", \"ngClass\", \"selection\", \"selected\", \"select\", \"click\", 4, \"matRowDef\", \"matRowDefColumns\"], [3, \"store\", \"paginatorOptions\", \"entitySortChange$\", \"paginatorChange\", 4, \"ngIf\"], [\"mat-header-cell\", \"\"], [4, \"ngIf\"], [3, \"checked\", \"indeterminate\", \"change\"], [\"mat-cell\", \"\"], [3, \"checked\", \"mousedown\", \"click\", \"change\"], [3, \"matColumnDef\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\", \"class\", \"mat-cell-text\", 3, \"ngClass\", 4, \"matCellDef\"], [\"mat-cell\", \"\", 1, \"mat-cell-text\", 3, \"ngClass\"], [\"mat-cell\", \"\", \"class\", \"mat-cell-text\", 3, \"ngClass\", \"innerHTML\", 4, \"matCellDef\"], [\"mat-cell\", \"\", 1, \"mat-cell-text\", 3, \"ngClass\", \"innerHTML\"], [3, \"svgIcon\"], [4, \"ngFor\", \"ngForOf\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", 3, \"color\", \"click\", 4, \"ngIf\"], [\"igoStopPropagation\", \"\", \"mat-mini-fab\", \"\", 3, \"color\", \"click\", 4, \"ngIf\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", 3, \"color\", \"click\"], [\"igoStopPropagation\", \"\", \"mat-mini-fab\", \"\", 3, \"color\", \"click\"], [\"mat-header-row\", \"\", 3, \"ngClass\"], [\"mat-row\", \"\", \"igoEntityTableRow\", \"\", 3, \"scrollBehavior\", \"ngClass\", \"selection\", \"selected\", \"select\", \"click\"], [3, \"store\", \"paginatorOptions\", \"entitySortChange$\", \"paginatorChange\"]], template: function EntityTableComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"table\", 1);\n        ɵngcc0.ɵɵlistener(\"matSortChange\", function EntityTableComponent_Template_table_matSortChange_1_listener($event) { return ctx.onSort($event); });\n        ɵngcc0.ɵɵelementContainerStart(2, 2);\n        ɵngcc0.ɵɵtemplate(3, EntityTableComponent_th_3_Template, 2, 1, \"th\", 3);\n        ɵngcc0.ɵɵtemplate(4, EntityTableComponent_td_4_Template, 2, 1, \"td\", 4);\n        ɵngcc0.ɵɵelementContainerEnd();\n        ɵngcc0.ɵɵtemplate(5, EntityTableComponent_ng_container_5_Template, 4, 4, \"ng-container\", 5);\n        ɵngcc0.ɵɵtemplate(6, EntityTableComponent_tr_6_Template, 1, 1, \"tr\", 6);\n        ɵngcc0.ɵɵtemplate(7, EntityTableComponent_tr_7_Template, 1, 4, \"tr\", 7);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, EntityTableComponent_igo_entity_table_paginator_8_Template, 1, 3, \"igo-entity-table-paginator\", 8);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ctx.getTableClass())(\"dataSource\", ctx.dataSource)(\"trackBy\", ctx.getTrackByFunction());\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.template.columns);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matHeaderRowDef\", ctx.headers)(\"matHeaderRowDefSticky\", ctx.fixedHeader);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matRowDefColumns\", ctx.headers);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.withPaginator);\n    } }, directives: function () { return [ɵngcc5.MatTable, ɵngcc6.MatSort, ɵngcc3.NgClass, ɵngcc5.MatColumnDef, ɵngcc5.MatHeaderCellDef, ɵngcc5.MatCellDef, ɵngcc3.NgForOf, ɵngcc5.MatHeaderRowDef, ɵngcc5.MatRowDef, ɵngcc3.NgIf, ɵngcc5.MatHeaderCell, ɵngcc7.MatCheckbox, ɵngcc5.MatCell, ɵngcc6.MatSortHeader, ɵngcc8.MatIcon, ɵngcc9.MatButton, StopPropagationDirective, ɵngcc5.MatHeaderRow, ɵngcc5.MatRow, EntityTableRowDirective, EntityTablePaginatorComponent]; }, pipes: function () { return [ɵngcc3.AsyncPipe, SanitizeHtmlPipe]; }, styles: [\"[_nghost-%COMP%]{display:block;height:100%;width:100%}.table-compact[_nghost-%COMP%]     .mat-checkbox .mat-checkbox-ripple, .table-compact[_nghost-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:36px}.table-compact[_nghost-%COMP%]     .mat-checkbox .mat-checkbox-ripple, .table-compact[_nghost-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:28px}.table-container[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;height:100%;overflow:auto}.mat-cell-text[_ngcontent-%COMP%]{overflow:hidden;word-wrap:break-word}td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{padding:0 3px}entity-table[_ngcontent-%COMP%]   table.igo-entity-table-with-selection[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd;cursor:pointer}table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:7px}\"], changeDetection: 0 });\nEntityTableComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef }\n];\nEntityTableComponent.propDecorators = {\n    store: [{ type: Input }],\n    paginator: [{ type: Input }],\n    template: [{ type: Input }],\n    scrollBehavior: [{ type: Input }],\n    sortNullsFirst: [{ type: Input }],\n    withPaginator: [{ type: Input }],\n    paginatorOptions: [{ type: Input }],\n    entityClick: [{ type: Output }],\n    entitySelectChange: [{ type: Output }],\n    entitySortChange: [{ type: Output }]\n};\n\nclass EntityTablePaginatorComponent {\n    constructor(languageService, mediaService) {\n        this.languageService = languageService;\n        this.mediaService = mediaService;\n        this.disabled = false;\n        this.hidePageSize = false;\n        this.pageIndex = 0;\n        this.pageSize = 50;\n        this.pageSizeOptions = [5, 10, 20, 50, 100, 200];\n        this.showFirstLastButtons = true;\n        this.paginationLabelTranslation$$ = [];\n        this.entitySortChange$ = new BehaviorSubject(false);\n        this.length = 0;\n        /**\n         * Paginator emitted.\n         */\n        this.paginatorChange = new EventEmitter();\n        this.rangeLabel = (page, pageSize, length) => {\n            const of = new BehaviorSubject('');\n            this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.of').subscribe((label) => {\n                of.next(label);\n            }));\n            if (length === 0 || pageSize === 0) {\n                return `0 ${of.value} ${length}`;\n            }\n            length = Math.max(length, 0);\n            const startIndex = page * pageSize;\n            const endIndex = startIndex < length ?\n                Math.min(startIndex + pageSize, length) :\n                startIndex + pageSize;\n            return `${startIndex + 1} - ${endIndex} ${of.value} ${length}`;\n        };\n    }\n    ngOnChanges() {\n        this.unsubscribeAll();\n        this.count$$ = this.store.stateView.count$.subscribe((count) => {\n            this.length = count;\n            this.emitPaginator();\n        });\n        this.entitySortChange$$ = this.entitySortChange$.subscribe(() => {\n            if (this.paginator) {\n                this.paginator.firstPage();\n            }\n        });\n        this.initPaginatorOptions();\n        this.translateLabels();\n    }\n    initPaginatorOptions() {\n        var _a, _b, _c, _d, _e, _f;\n        this.disabled = ((_a = this.paginatorOptions) === null || _a === void 0 ? void 0 : _a.disabled) || this.disabled;\n        this.pageIndex = ((_b = this.paginatorOptions) === null || _b === void 0 ? void 0 : _b.pageIndex) || this.pageIndex;\n        this.pageSize = ((_c = this.paginatorOptions) === null || _c === void 0 ? void 0 : _c.pageSize) || this.pageSize;\n        this.pageSizeOptions = ((_d = this.paginatorOptions) === null || _d === void 0 ? void 0 : _d.pageSizeOptions) || this.pageSizeOptions;\n        if (this.mediaService.isMobile()) {\n            this.showFirstLastButtons = false;\n            this.hidePageSize = true;\n        }\n        else {\n            this.showFirstLastButtons = ((_e = this.paginatorOptions) === null || _e === void 0 ? void 0 : _e.showFirstLastButtons) || this.showFirstLastButtons;\n            this.hidePageSize = ((_f = this.paginatorOptions) === null || _f === void 0 ? void 0 : _f.hidePageSize) || this.hidePageSize;\n        }\n    }\n    translateLabels() {\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.firstPageLabel').subscribe((label) => {\n            this.paginator._intl.firstPageLabel = label;\n        }));\n        this.paginator._intl.getRangeLabel = this.rangeLabel;\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.itemsPerPageLabel').subscribe((label) => {\n            this.paginator._intl.itemsPerPageLabel = label;\n        }));\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.lastPageLabel').subscribe((label) => {\n            this.paginator._intl.lastPageLabel = label;\n        }));\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.nextPageLabel').subscribe((label) => {\n            this.paginator._intl.nextPageLabel = label;\n        }));\n        this.paginationLabelTranslation$$.push(this.languageService.translate.get('igo.common.paginator.previousPageLabel').subscribe((label) => {\n            this.paginator._intl.previousPageLabel = label;\n        }));\n    }\n    unsubscribeAll() {\n        this.paginationLabelTranslation$$.map(sub => sub.unsubscribe());\n        if (this.count$$) {\n            this.count$$.unsubscribe();\n        }\n        if (this.entitySortChange$$) {\n            this.entitySortChange$$.unsubscribe();\n        }\n    }\n    ngOnDestroy() {\n        this.unsubscribeAll();\n    }\n    emitPaginator() {\n        this.paginatorChange.emit(this.paginator);\n    }\n}\nEntityTablePaginatorComponent.ɵfac = function EntityTablePaginatorComponent_Factory(t) { return new (t || EntityTablePaginatorComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc10.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc10.MediaService)); };\nEntityTablePaginatorComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: EntityTablePaginatorComponent, selectors: [[\"igo-entity-table-paginator\"]], viewQuery: function EntityTablePaginatorComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(MatPaginator, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n    } }, inputs: { entitySortChange$: \"entitySortChange$\", store: \"store\", paginatorOptions: \"paginatorOptions\" }, outputs: { paginatorChange: \"paginatorChange\", page: \"page\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 1, vars: 7, consts: [[3, \"disabled\", \"hidePageSize\", \"length\", \"pageIndex\", \"pageSize\", \"pageSizeOptions\", \"showFirstLastButtons\", \"page\"]], template: function EntityTablePaginatorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-paginator\", 0);\n        ɵngcc0.ɵɵlistener(\"page\", function EntityTablePaginatorComponent_Template_mat_paginator_page_0_listener() { return ctx.emitPaginator(); });\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"hidePageSize\", ctx.hidePageSize)(\"length\", ctx.length)(\"pageIndex\", ctx.pageIndex)(\"pageSize\", ctx.pageSize)(\"pageSizeOptions\", ctx.pageSizeOptions)(\"showFirstLastButtons\", ctx.showFirstLastButtons);\n    } }, directives: [ɵngcc11.MatPaginator], styles: [\"[_nghost-%COMP%]{margin-top:-10px;padding-right:15px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]{margin-top:0;padding-right:5px}}\"], changeDetection: 0 });\nEntityTablePaginatorComponent.ctorParameters = () => [\n    { type: LanguageService },\n    { type: MediaService }\n];\nEntityTablePaginatorComponent.propDecorators = {\n    entitySortChange$: [{ type: Input }],\n    store: [{ type: Input }],\n    paginatorOptions: [{ type: Input }],\n    page: [{ type: Output }],\n    paginatorChange: [{ type: Output }],\n    paginator: [{ type: ViewChild, args: [MatPaginator, { static: true },] }]\n};\n\nvar ActionbarMode;\n(function (ActionbarMode) {\n    ActionbarMode[\"Dock\"] = \"dock\";\n    ActionbarMode[\"Overlay\"] = \"overlay\";\n    ActionbarMode[\"Context\"] = \"context\";\n})(ActionbarMode || (ActionbarMode = {}));\n\n/**\n * The class is a specialized version of an EntityStore that stores\n * actions.\n */\nclass ActionStore extends EntityStore {\n}\n\n/**\n * A list of action buttons.\n * This component can be displayed in one of two way: 'dock' or 'overlay'\n */\nclass ActionbarComponent {\n    constructor(overlay, elRef, cdRef, mediaService) {\n        this.overlay = overlay;\n        this.elRef = elRef;\n        this.cdRef = cdRef;\n        this.mediaService = mediaService;\n        /**\n         * Reference to the ActionbarMode enum for use in the template\n         * @internal\n         */\n        this.actionbarMode = ActionbarMode;\n        /**\n         * Whether the actionbar is collapsed (Dock mode)\n         * @internal\n         */\n        this.collapsed = false;\n        /**\n         * Toggle collapse action (Dock)\n         * @internal\n         */\n        this.toggleCollapseAction = {\n            id: 'actionbar_toggle',\n            icon: 'dots-vertical',\n            handler: () => {\n                this.collapsed = !this.collapsed;\n            }\n        };\n        /**\n         * Height Condition for scroll button\n         */\n        this.heightCondition$ = new BehaviorSubject(false);\n        /**\n         * Position Condition for top scroll button\n         */\n        this.positionConditionTop$ = new BehaviorSubject(true);\n        /**\n         * Position Condition for low scroll button\n         */\n        this.positionConditionLow$ = new BehaviorSubject(true);\n        /**\n         * Actionbar mode\n         */\n        this.mode = ActionbarMode.Dock;\n        /**\n         * Whether a toggle button should be displayed (Dock mode)\n         */\n        this.withToggleButton = false;\n        /**\n         * Whether a the actionbar should display buttons horizontally\n         */\n        this.horizontal = false;\n        /**\n         * Color\n         */\n        this.color = 'default';\n        /**\n         * Color of the button if action mode === overlay\n         */\n        this.iconColor = 'default';\n        /**\n         * Whether action titles are displayed\n         */\n        this.withTitle = true;\n        /**\n         * Whether action tooltips are displayed\n         */\n        this.withTooltip = true;\n        /**\n         * Whether action titles are displayed (condition for scroll button)\n         */\n        this.scrollActive = true;\n        /**\n         * Whether action icons are displayed\n         */\n        this.withIcon = true;\n        /**\n         * Which icon want to be shown\n         */\n        this.icon = 'dots-horizontal';\n        /**\n         * Overlay X position\n         */\n        this.xPosition = 'before';\n        /**\n         * Overlay Y position\n         */\n        this.yPosition = 'above';\n        this._overlayClass = '';\n    }\n    /**\n     * Class to add to the actionbar overlay\n     */\n    set overlayClass(value) {\n        this._overlayClass = value;\n    }\n    get overlayClass() {\n        return [this._overlayClass, 'igo-actionbar-overlay'].join(' ');\n    }\n    /**\n     * @ignore\n     */\n    get withTitleClass() {\n        return this.withTitle;\n    }\n    /**\n     * @ignore\n     */\n    get withIconClass() {\n        return this.withIcon;\n    }\n    /**\n     * @ignore\n     */\n    get horizontalClass() {\n        return this.horizontal;\n    }\n    get heightCondition() {\n        const el = this.elRef.nativeElement;\n        if (this.scrollActive === false) {\n            if (el.clientHeight < el.scrollHeight) {\n                return true;\n            }\n        }\n        return false;\n    }\n    get positionConditionTop() {\n        if (this.elRef.nativeElement.scrollTop === 0) {\n            return false;\n        }\n        return true;\n    }\n    get positionConditionLow() {\n        const el = this.elRef.nativeElement;\n        if (el.scrollTop >= (el.scrollHeight - el.clientHeight)) {\n            return false;\n        }\n        return true;\n    }\n    get isDesktop() {\n        return this.mediaService.getMedia() === Media.Desktop;\n    }\n    /**\n     * @internal\n     */\n    ngOnChanges(changes) {\n        const store = changes.store;\n        if (store && store.currentValue !== store.previousValue) {\n            if (this.watcher !== undefined) {\n                this.watcher.destroy();\n            }\n            this.watcher = new EntityStoreWatcher(this.store, this.cdRef);\n        }\n    }\n    /**\n     * @internal\n     */\n    ngOnDestroy() {\n        this.watcher.destroy();\n    }\n    /**\n     * Invoke the action handler\n     * @internal\n     */\n    onTriggerAction(action) {\n        const args = action.args || [];\n        action.handler(...args);\n    }\n    scrollDown() {\n        this.elRef.nativeElement.scrollBy(0, 52);\n    }\n    scrollUp() {\n        this.elRef.nativeElement.scrollBy(0, -52);\n    }\n}\nActionbarComponent.ɵfac = function ActionbarComponent_Factory(t) { return new (t || ActionbarComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc12.Overlay), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc10.MediaService)); };\nActionbarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ActionbarComponent, selectors: [[\"igo-actionbar\"]], hostVars: 6, hostBindings: function ActionbarComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"with-title\", ctx.withTitleClass)(\"with-icon\", ctx.withIconClass)(\"horizontal\", ctx.horizontalClass);\n    } }, inputs: { mode: \"mode\", withToggleButton: \"withToggleButton\", horizontal: \"horizontal\", color: \"color\", iconColor: \"iconColor\", withTitle: \"withTitle\", withTooltip: \"withTooltip\", scrollActive: \"scrollActive\", withIcon: \"withIcon\", icon: \"icon\", xPosition: \"xPosition\", yPosition: \"yPosition\", overlayClass: \"overlayClass\", store: \"store\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 3, vars: 3, consts: [[4, \"ngIf\"], [\"class\", \"context-menu-card mat-elevation-z4\", 4, \"ngIf\"], [\"id\", \"topChevron\", 4, \"ngIf\"], [\"color\", \"accent\", 3, \"withTitle\", \"withIcon\", \"color\", \"disabled\", \"action\", \"trigger\", 4, \"ngIf\"], [\"id\", \"lowChevron\", 4, \"ngIf\"], [\"id\", \"topChevron\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"chevron-up\"], [\"color\", \"accent\", 3, \"withTitle\", \"withIcon\", \"color\", \"disabled\", \"action\", \"trigger\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"buttonContent\", \"\"], [\"color\", \"accent\", 3, \"withTitle\", \"withIcon\", \"withTooltip\", \"color\", \"disabled\", \"action\", \"trigger\"], [\"id\", \"lowChevron\"], [\"svgIcon\", \"chevron-down\"], [\"mat-icon-button\", \"\", 1, \"buttonOverlay\", 3, \"matMenuTriggerFor\", \"disabled\", \"color\"], [3, \"svgIcon\"], [\"overlapTrigger\", \"true\", 1, \"igo-compact-menu\", \"igo-no-min-width-menu\", 3, \"xPosition\", \"yPosition\"], [\"actionbarMenu\", \"matMenu\"], [\"color\", \"accent\", 3, \"withTitle\", \"withIcon\", \"color\", \"action\", \"trigger\"], [1, \"context-menu-card\", \"mat-elevation-z4\"]], template: function ActionbarComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ActionbarComponent_mat_list_0_Template, 5, 4, \"mat-list\", 0);\n        ɵngcc0.ɵɵtemplate(1, ActionbarComponent_div_1_Template, 8, 11, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(2, ActionbarComponent_mat_card_2_Template, 4, 3, \"mat-card\", 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.mode === ctx.actionbarMode.Dock);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.mode === ctx.actionbarMode.Overlay);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.mode === ctx.actionbarMode.Context);\n    } }, directives: function () { return [ɵngcc3.NgIf, ɵngcc13.MatList, ɵngcc9.MatButton, ɵngcc14.MatTooltip, ɵngcc8.MatIcon, ActionbarItemComponent, ɵngcc3.NgForOf, ɵngcc15.MatMenuTrigger, ɵngcc15._MatMenu, ɵngcc16.MatCard]; }, pipes: function () { return [ɵngcc17.TranslatePipe, ɵngcc3.AsyncPipe]; }, styles: [\"[_nghost-%COMP%]{display:block;height:100%;overflow:auto;position:relative}button[_ngcontent-%COMP%]{margin:4px}.buttonOverlay[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]{padding-top:0}.horizontal[_nghost-%COMP%]{max-width:100%;overflow:unset}.horizontal[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]{white-space:nowrap;width:auto}.horizontal[_nghost-%COMP%]   igo-actionbar-item[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]     .mat-list .mat-list-item .mat-list-text>*{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;line-height:18px;max-height:36px;overflow:hidden;text-overflow:ellipsis;white-space:normal}[_nghost-%COMP%]     .mat-list-base .mat-list-item.mat-list-item-with-avatar{height:46px}[_nghost-%COMP%]     .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content{display:-webkit-flex;height:46px;padding:3px}[_nghost-%COMP%]     .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content>mat-icon{padding:8px}igo-actionbar-item[_ngcontent-%COMP%]     mat-list-item [mat-list-avatar]{height:auto;width:40px}igo-actionbar-item[_ngcontent-%COMP%]     mat-list-item:hover{cursor:pointer}.context-menu-card[_ngcontent-%COMP%]{margin:10px;padding:8px 3px}#lowChevron[_ngcontent-%COMP%], #topChevron[_ngcontent-%COMP%]{background-color:#fff;position:fixed;z-index:3}#lowChevron[_ngcontent-%COMP%]{bottom:0}\"], changeDetection: 0 });\nActionbarComponent.ctorParameters = () => [\n    { type: Overlay },\n    { type: ElementRef },\n    { type: ChangeDetectorRef },\n    { type: MediaService }\n];\nActionbarComponent.propDecorators = {\n    store: [{ type: Input }],\n    mode: [{ type: Input }],\n    withToggleButton: [{ type: Input }],\n    horizontal: [{ type: Input }],\n    color: [{ type: Input }],\n    iconColor: [{ type: Input }],\n    withTitle: [{ type: Input }],\n    withTooltip: [{ type: Input }],\n    scrollActive: [{ type: Input }],\n    withIcon: [{ type: Input }],\n    icon: [{ type: Input }],\n    xPosition: [{ type: Input }],\n    yPosition: [{ type: Input }],\n    overlayClass: [{ type: Input }],\n    withTitleClass: [{ type: HostBinding, args: ['class.with-title',] }],\n    withIconClass: [{ type: HostBinding, args: ['class.with-icon',] }],\n    horizontalClass: [{ type: HostBinding, args: ['class.horizontal',] }]\n};\n\n/**\n * An action button\n */\nclass ActionbarItemComponent {\n    constructor() {\n        this.disabled$ = new BehaviorSubject(false);\n        this.checkCondition$ = new BehaviorSubject(undefined);\n        this.icon$ = new BehaviorSubject(undefined);\n        this.tooltip$ = new BehaviorSubject(undefined);\n        this.noDisplay$ = new BehaviorSubject(false);\n        this.ngClass$ = new BehaviorSubject({});\n        /**\n         * Color\n         */\n        this.color = 'default';\n        /**\n         * Whether the action title is displayed\n         */\n        this.withTitle = true;\n        /**\n         * Whether the action icon is displayed\n         */\n        this.withIcon = true;\n        /**\n         * Whether a tooltip should be shown\n         */\n        this.withTooltip = true;\n        /**\n         * Event emitted when the action button is clicked\n         */\n        this.trigger = new EventEmitter();\n    }\n    /**\n     * Whether the action is disabled\n     */\n    set disabled(value) { this.disabled$.next(value); }\n    get disabled() { return this.disabled$.value; }\n    /**\n     * Whether the action is display or not\n     */\n    set noDisplay(value) { this.noDisplay$.next(value); }\n    get noDisplay() { return this.noDisplay$.value; }\n    /**\n     * @internal\n     */\n    get title() { return this.action.title; }\n    ngOnInit() {\n        const args = this.action.args || [];\n        if (this.action.ngClass !== undefined) {\n            this.ngClass$$ = this.action.ngClass(...args)\n                .subscribe((ngClass) => this.updateNgClass(ngClass));\n        }\n        if (isObservable(this.action.icon)) {\n            this.icon$$ = this.action.icon\n                .subscribe((icon) => this.updateIcon(icon));\n        }\n        else {\n            this.updateIcon(this.action.icon);\n        }\n        if (isObservable(this.action.checkCondition)) {\n            this.checkCondition$$ = this.action.checkCondition\n                .subscribe((checkCondition) => this.updateCheckCondition(checkCondition));\n        }\n        else {\n            this.updateCheckCondition(this.action.checkCondition);\n        }\n        if (isObservable(this.action.tooltip)) {\n            this.tooltip$$ = this.action.tooltip\n                .subscribe((tooltip) => this.updateTooltip(tooltip));\n        }\n        else {\n            this.updateTooltip(this.action.tooltip);\n        }\n        if (this.action.availability !== undefined) {\n            this.availability$$ = this.action.availability(...args)\n                .subscribe((available) => this.disabled = !available);\n        }\n        this.disabled$$ = this.disabled$\n            .subscribe((disabled) => this.updateNgClass({ 'igo-actionbar-item-disabled': disabled }));\n        if (this.action.display !== undefined) {\n            this.display$$ = this.action.display(...args)\n                .subscribe((display) => this.noDisplay = !display);\n        }\n        this.noDisplay$$ = this.noDisplay$\n            .subscribe((noDisplay) => this.updateNgClass({ 'igo-actionbar-item-no-display': noDisplay }));\n    }\n    ngOnDestroy() {\n        if (this.ngClass$$ !== undefined) {\n            this.ngClass$$.unsubscribe();\n            this.ngClass$$ = undefined;\n        }\n        if (this.availability$$ !== undefined) {\n            this.availability$$.unsubscribe();\n            this.availability$$ = undefined;\n        }\n        if (this.display$$ !== undefined) {\n            this.display$$.unsubscribe();\n            this.display$$ = undefined;\n        }\n        if (this.checkCondition$$ !== undefined) {\n            this.checkCondition$$.unsubscribe();\n            this.checkCondition$$ = undefined;\n        }\n        if (this.icon$$ !== undefined) {\n            this.icon$$.unsubscribe();\n            this.icon$$ = undefined;\n        }\n        if (this.tooltip$$ !== undefined) {\n            this.tooltip$$.unsubscribe();\n            this.tooltip$$ = undefined;\n        }\n        this.disabled$$.unsubscribe();\n        this.noDisplay$$.unsubscribe();\n    }\n    /**\n     * When the action button is clicked, emit the 'trigger' event but don't\n     * invoke the action handler. This is handled by the parent component.\n     * @internal\n     */\n    onClick() {\n        if (this.disabled === true) {\n            return;\n        }\n        this.trigger.emit(this.action);\n    }\n    updateNgClass(ngClass) {\n        this.ngClass$.next(Object.assign({}, this.ngClass$.value, ngClass));\n    }\n    updateTooltip(tooltip) {\n        this.tooltip$.next(tooltip);\n    }\n    updateCheckCondition(checkCondition) {\n        this.checkCondition$.next(checkCondition);\n    }\n    updateIcon(icon) {\n        this.icon$.next(icon);\n    }\n}\nActionbarItemComponent.ɵfac = function ActionbarItemComponent_Factory(t) { return new (t || ActionbarItemComponent)(); };\nActionbarItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ActionbarItemComponent, selectors: [[\"igo-actionbar-item\"]], inputs: { color: \"color\", withTitle: \"withTitle\", withIcon: \"withIcon\", withTooltip: \"withTooltip\", disabled: \"disabled\", noDisplay: \"noDisplay\", action: \"action\" }, outputs: { trigger: \"trigger\" }, decls: 2, vars: 2, consts: [[\"matTooltipClass\", \"actionbarItemTooltip\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"ngClass\", \"click\", 4, \"ngIf\"], [\"class\", \"item-checkbox\", \"matTooltipClass\", \"actionbarItemTooltip\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"ngClass\", 4, \"ngIf\"], [\"matTooltipClass\", \"actionbarItemTooltip\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"ngClass\", \"click\"], [\"mat-list-avatar\", \"\", \"mat-icon-button\", \"\", 3, \"color\", \"disabled\", 4, \"ngIf\"], [\"matLine\", \"\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", \"mat-icon-button\", \"\", 3, \"color\", \"disabled\"], [3, \"svgIcon\", 4, \"ngIf\"], [3, \"svgIcon\"], [\"matLine\", \"\"], [\"matTooltipClass\", \"actionbarItemTooltip\", \"matTooltipShowDelay\", \"500\", 1, \"item-checkbox\", 3, \"matTooltip\", \"ngClass\"], [3, \"checked\", \"change\", 4, \"ngIf\"], [3, \"checked\", \"change\"]], template: function ActionbarItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ActionbarItemComponent_mat_list_item_0_Template, 6, 10, \"mat-list-item\", 0);\n        ɵngcc0.ɵɵtemplate(1, ActionbarItemComponent_mat_list_item_1_Template, 5, 9, \"mat-list-item\", 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.action.checkbox);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.action.checkbox);\n    } }, directives: [ɵngcc3.NgIf, ɵngcc13.MatListItem, ɵngcc14.MatTooltip, ɵngcc3.NgClass, ɵngcc9.MatButton, ɵngcc13.MatListAvatarCssMatStyler, ɵngcc8.MatIcon, ɵngcc4.MatLine, ɵngcc7.MatCheckbox], pipes: [ɵngcc17.TranslatePipe, ɵngcc3.AsyncPipe], styles: [\"mat-list-item.igo-actionbar-item-disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26);cursor:default!important}mat-list-item.igo-actionbar-item-no-display[_ngcontent-%COMP%]{display:none}mat-checkbox[_ngcontent-%COMP%]{padding:12px}.item-checkbox[_ngcontent-%COMP%]{height:56px}.item-checkbox[_ngcontent-%COMP%]     .mat-checkbox-label{margin-left:20px}\"], changeDetection: 0 });\nActionbarItemComponent.ctorParameters = () => [];\nActionbarItemComponent.propDecorators = {\n    action: [{ type: Input }],\n    color: [{ type: Input }],\n    withTitle: [{ type: Input }],\n    withIcon: [{ type: Input }],\n    withTooltip: [{ type: Input }],\n    disabled: [{ type: Input }],\n    noDisplay: [{ type: Input }],\n    trigger: [{ type: Output }]\n};\n\n/**\n * @ignore\n */\nclass IgoActionbarModule {\n}\nIgoActionbarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoActionbarModule });\nIgoActionbarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoActionbarModule_Factory(t) { return new (t || IgoActionbarModule)(); }, imports: [[\n            CommonModule,\n            IgoLanguageModule,\n            MatButtonModule,\n            MatIconModule,\n            MatTooltipModule,\n            MatMenuModule,\n            MatListModule,\n            MatCardModule,\n            MatCheckboxModule\n        ]] });\n\nclass IgoActionModule {\n}\nIgoActionModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoActionModule });\nIgoActionModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoActionModule_Factory(t) { return new (t || IgoActionModule)(); }, providers: [], imports: [[\n            CommonModule,\n            IgoActionbarModule\n        ], IgoActionbarModule] });\n\nclass BackdropComponent {\n    constructor() { }\n    get shown() {\n        return this._shown;\n    }\n    set shown(value) {\n        this._shown = value;\n    }\n}\nBackdropComponent.ɵfac = function BackdropComponent_Factory(t) { return new (t || BackdropComponent)(); };\nBackdropComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: BackdropComponent, selectors: [[\"igo-backdrop\"]], inputs: { shown: \"shown\" }, decls: 1, vars: 3, consts: [[3, \"ngClass\"]], template: function BackdropComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"div\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(1, _c0, ctx.shown));\n    } }, directives: [ɵngcc3.NgClass], styles: [\"[_nghost-%COMP%] > div[_ngcontent-%COMP%]{background-color:hsla(0,0%,39.2%,.5);bottom:0;display:none;left:0;position:absolute;right:0;top:0;z-index:2}[_nghost-%COMP%] > div.igo-backdrop-shown[_ngcontent-%COMP%]{display:block}\"] });\nBackdropComponent.ctorParameters = () => [];\nBackdropComponent.propDecorators = {\n    shown: [{ type: Input }]\n};\n\nclass IgoBackdropModule {\n    static forRoot() {\n        return {\n            ngModule: IgoBackdropModule,\n            providers: []\n        };\n    }\n}\nIgoBackdropModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoBackdropModule });\nIgoBackdropModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoBackdropModule_Factory(t) { return new (t || IgoBackdropModule)(); }, imports: [[CommonModule]] });\n\nclass IgoBadgeIconDirective {\n    constructor(el, matIconRegistry) {\n        this.el = el;\n        this.matIconRegistry = matIconRegistry;\n        this.hidden = false;\n        this.disabled = false;\n        this.inverseColor = false;\n        this.inheritColor = false;\n    }\n    set igoMatBadgeIcon(value) {\n        this.matIconRegistry.getNamedSvgIcon(value).subscribe((svgObj) => {\n            this.svg = svgObj;\n            this.updateSvg();\n        });\n    }\n    set matBadgeHidden(value) {\n        this.hidden = value;\n        this.updateHidden();\n    }\n    set matBadgeDisabled(value) {\n        this.disabled = value;\n        this.updateDisabled();\n    }\n    set igoMatBadgeInverseColor(value) {\n        this.inverseColor = value;\n        this.updateColor();\n    }\n    set igoMatBadgeInheritColor(value) {\n        this.inheritColor = value;\n        this.updateColor();\n    }\n    get badge() {\n        return this.el.nativeElement.querySelector('.mat-badge-content');\n    }\n    ngOnInit() {\n        this.badge.style.alignItems = 'center';\n        this.badge.style.justifyContent = 'center';\n        this.updateHidden();\n        this.updateColor();\n        this.updateSvg();\n    }\n    updateSvg() {\n        if (!this.badge) {\n            return;\n        }\n        this.badge.innerHTML = '';\n        if (this.svg) {\n            this.badge.appendChild(this.svg);\n        }\n    }\n    updateColor() {\n        if (!this.badge) {\n            return;\n        }\n        if (this.inheritColor) {\n            if (this.inverseColor) {\n                this.badge.style.color = 'currentColor';\n                this.badge.style.background = 'none';\n            }\n            else {\n                this.badge.style.color = '';\n                this.badge.style.background = 'currentColor';\n            }\n        }\n        else {\n            if (this.inverseColor) {\n                this.badge.style.color = window\n                    .getComputedStyle(this.badge, null)\n                    .getPropertyValue('background-color');\n                this.badge.style.background = 'none';\n            }\n            else {\n                this.badge.style.color = '';\n                this.badge.style.background = '';\n            }\n        }\n        this.originalColor = this.badge.style.color;\n        this.updateDisabled();\n    }\n    updateHidden() {\n        if (!this.badge) {\n            return;\n        }\n        this.badge.style.display = this.hidden ? 'none' : 'flex';\n    }\n    updateDisabled() {\n        if (!this.badge || !this.inverseColor) {\n            return;\n        }\n        if (this.disabled) {\n            this.originalColor = this.badge.style.color;\n            this.badge.style.color = '#b9b9b9';\n        }\n        else {\n            this.badge.style.color = this.originalColor;\n        }\n    }\n}\nIgoBadgeIconDirective.ɵfac = function IgoBadgeIconDirective_Factory(t) { return new (t || IgoBadgeIconDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc8.MatIconRegistry)); };\nIgoBadgeIconDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: IgoBadgeIconDirective, selectors: [[\"\", \"igoMatBadgeIcon\", \"\"]], inputs: { igoMatBadgeIcon: \"igoMatBadgeIcon\", matBadgeHidden: \"matBadgeHidden\", matBadgeDisabled: \"matBadgeDisabled\", igoMatBadgeInverseColor: \"igoMatBadgeInverseColor\", igoMatBadgeInheritColor: \"igoMatBadgeInheritColor\" } });\nIgoBadgeIconDirective.ctorParameters = () => [\n    { type: ElementRef },\n    { type: MatIconRegistry }\n];\nIgoBadgeIconDirective.propDecorators = {\n    igoMatBadgeIcon: [{ type: Input }],\n    matBadgeHidden: [{ type: Input }],\n    matBadgeDisabled: [{ type: Input }],\n    igoMatBadgeInverseColor: [{ type: Input }],\n    igoMatBadgeInheritColor: [{ type: Input }]\n};\n\nclass IgoMatBadgeIconModule {\n    static forRoot() {\n        return {\n            ngModule: IgoMatBadgeIconModule,\n            providers: []\n        };\n    }\n}\nIgoMatBadgeIconModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoMatBadgeIconModule });\nIgoMatBadgeIconModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoMatBadgeIconModule_Factory(t) { return new (t || IgoMatBadgeIconModule)(); }, imports: [[MatBadgeModule, MatIconModule], MatBadgeModule] });\n\nclass ClickoutDirective {\n    constructor(el) {\n        this.el = el;\n        this.clickout = new EventEmitter();\n    }\n    handleMouseClick(event, target) {\n        if (!target) {\n            return;\n        }\n        if (!this.el.nativeElement.contains(target)) {\n            this.clickout.emit(event);\n        }\n    }\n}\nClickoutDirective.ɵfac = function ClickoutDirective_Factory(t) { return new (t || ClickoutDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nClickoutDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ClickoutDirective, selectors: [[\"\", \"igoClickout\", \"\"]], hostBindings: function ClickoutDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function ClickoutDirective_click_HostBindingHandler($event) { return ctx.handleMouseClick($event, $event.target); }, false, ɵngcc0.ɵɵresolveDocument);\n    } }, outputs: { clickout: \"clickout\" } });\nClickoutDirective.ctorParameters = () => [\n    { type: ElementRef }\n];\nClickoutDirective.propDecorators = {\n    clickout: [{ type: Output }],\n    handleMouseClick: [{ type: HostListener, args: ['document:click', ['$event', '$event.target'],] }]\n};\n\nclass IgoClickoutModule {\n    static forRoot() {\n        return {\n            ngModule: IgoClickoutModule,\n            providers: []\n        };\n    }\n}\nIgoClickoutModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoClickoutModule });\nIgoClickoutModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoClickoutModule_Factory(t) { return new (t || IgoClickoutModule)(); }, imports: [[]] });\n\nclass ClonePipe {\n    transform(value, args) {\n        if (value === undefined) {\n            return value;\n        }\n        if (value instanceof Array) {\n            return value.map(obj => Object.assign(Object.create(obj), obj));\n        }\n        else {\n            return Object.assign(Object.create(value), value);\n        }\n    }\n}\nClonePipe.ɵfac = function ClonePipe_Factory(t) { return new (t || ClonePipe)(); };\nClonePipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: \"clone\", type: ClonePipe, pure: true });\n\nclass IgoCloneModule {\n    static forRoot() {\n        return {\n            ngModule: IgoCloneModule,\n            providers: []\n        };\n    }\n}\nIgoCloneModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoCloneModule });\nIgoCloneModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoCloneModule_Factory(t) { return new (t || IgoCloneModule)(); }, imports: [[]] });\n\nclass CollapseDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n        this._collapsed = false;\n        this.toggle = new EventEmitter();\n    }\n    get target() {\n        return this._target;\n    }\n    set target(value) {\n        this._target = value;\n    }\n    get collapsed() {\n        return this._collapsed;\n    }\n    set collapsed(collapsed) {\n        collapsed ? this.collapseTarget() : this.expandTarget();\n        this._collapsed = collapsed;\n        this.toggle.emit(collapsed);\n    }\n    click() {\n        this.collapsed = !this.collapsed;\n    }\n    collapseTarget() {\n        this.renderer.addClass(this.target, 'igo-collapsed');\n        this.renderer.addClass(this.el.nativeElement, 'collapsed');\n    }\n    expandTarget() {\n        this.renderer.removeClass(this.target, 'igo-collapsed');\n        this.renderer.removeClass(this.el.nativeElement, 'collapsed');\n    }\n}\nCollapseDirective.ɵfac = function CollapseDirective_Factory(t) { return new (t || CollapseDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nCollapseDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: CollapseDirective, selectors: [[\"\", \"igoCollapse\", \"\"]], hostBindings: function CollapseDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function CollapseDirective_click_HostBindingHandler() { return ctx.click(); });\n    } }, inputs: { target: \"target\", collapsed: \"collapsed\" }, outputs: { toggle: \"toggle\" } });\nCollapseDirective.ctorParameters = () => [\n    { type: Renderer2 },\n    { type: ElementRef }\n];\nCollapseDirective.propDecorators = {\n    target: [{ type: Input }],\n    collapsed: [{ type: Input }],\n    toggle: [{ type: Output }],\n    click: [{ type: HostListener, args: ['click',] }]\n};\n\nclass CollapsibleComponent {\n    constructor() {\n        this._title = '';\n        this._collapsed = false;\n        this.toggle = new EventEmitter();\n    }\n    get title() {\n        return this._title;\n    }\n    set title(value) {\n        this._title = value;\n    }\n    get collapsed() {\n        return this._collapsed;\n    }\n    set collapsed(value) {\n        this._collapsed = value;\n        this.toggle.emit(value);\n    }\n}\nCollapsibleComponent.ɵfac = function CollapsibleComponent_Factory(t) { return new (t || CollapsibleComponent)(); };\nCollapsibleComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CollapsibleComponent, selectors: [[\"igo-collapsible\"]], inputs: { title: \"title\", collapsed: \"collapsed\" }, outputs: { toggle: \"toggle\" }, ngContentSelectors: _c1, decls: 7, vars: 3, consts: [[\"svgIcon\", \"chevron-up\", \"mat-list-avatar\", \"\", \"igoCollapse\", \"\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"toggle\"], [\"matLine\", \"\"], [\"content\", \"\"]], template: function CollapsibleComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n        ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 0);\n        ɵngcc0.ɵɵlistener(\"toggle\", function CollapsibleComponent_Template_mat_icon_toggle_1_listener($event) { return ctx.collapsed = $event; });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"h4\", 1);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"div\", null, 2);\n        ɵngcc0.ɵɵprojection(6);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = ɵngcc0.ɵɵreference(5);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"target\", _r0)(\"collapsed\", ctx.collapsed);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.title);\n    } }, directives: [ɵngcc13.MatListItem, ɵngcc8.MatIcon, ɵngcc13.MatListAvatarCssMatStyler, CollapseDirective, ɵngcc4.MatLine], styles: [\"[_nghost-%COMP%]     .mat-list .mat-list-item.mat-list-avatar{height:auto;padding:0;width:auto}mat-list-item[_ngcontent-%COMP%]{overflow:hidden}\"] });\nCollapsibleComponent.propDecorators = {\n    title: [{ type: Input }],\n    collapsed: [{ type: Input }],\n    toggle: [{ type: Output }]\n};\n\nclass IgoCollapsibleModule {\n    static forRoot() {\n        return {\n            ngModule: IgoCollapsibleModule,\n            providers: []\n        };\n    }\n}\nIgoCollapsibleModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoCollapsibleModule });\nIgoCollapsibleModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoCollapsibleModule_Factory(t) { return new (t || IgoCollapsibleModule)(); }, imports: [[MatIconModule, MatListModule]] });\n\nclass ConfirmDialogComponent {\n    constructor(dialogRef) {\n        this.dialogRef = dialogRef;\n    }\n}\nConfirmDialogComponent.ɵfac = function ConfirmDialogComponent_Factory(t) { return new (t || ConfirmDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc18.MatDialogRef)); };\nConfirmDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ConfirmDialogComponent, selectors: [[\"igo-confirm-dialog\"]], decls: 12, vars: 10, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\", 1, \"mat-typography\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-button\", \"\", 3, \"click\"]], template: function ConfirmDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"h2\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 1);\n        ɵngcc0.ɵɵtext(4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(6, \"button\", 3);\n        ɵngcc0.ɵɵlistener(\"click\", function ConfirmDialogComponent_Template_button_click_6_listener() { return ctx.dialogRef.close(true); });\n        ɵngcc0.ɵɵtext(7);\n        ɵngcc0.ɵɵpipe(8, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"button\", 4);\n        ɵngcc0.ɵɵlistener(\"click\", function ConfirmDialogComponent_Template_button_click_9_listener() { return ctx.dialogRef.close(false); });\n        ɵngcc0.ɵɵtext(10);\n        ɵngcc0.ɵɵpipe(11, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 4, \"igo.common.confirmDialog.title\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ctx.confirmMessage);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(8, 6, \"igo.common.confirmDialog.confirmBtn\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 8, \"igo.common.confirmDialog.cancelBtn\"));\n    } }, directives: [ɵngcc18.MatDialogTitle, ɵngcc18.MatDialogContent, ɵngcc18.MatDialogActions, ɵngcc9.MatButton], pipes: [ɵngcc17.TranslatePipe], styles: [\"h2[_ngcontent-%COMP%]{margin:5px 0 10px}div[mat-dialog-content][_ngcontent-%COMP%]{max-width:200px}div[mat-dialog-actions][_ngcontent-%COMP%]{margin:10px 0 0}\"] });\nConfirmDialogComponent.ctorParameters = () => [\n    { type: MatDialogRef }\n];\n\nclass ConfirmDialogService {\n    constructor(dialog) {\n        this.dialog = dialog;\n    }\n    open(message) {\n        const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n            disableClose: false\n        });\n        dialogRef.componentInstance.confirmMessage = message;\n        return dialogRef.afterClosed();\n    }\n}\nConfirmDialogService.ɵfac = function ConfirmDialogService_Factory(t) { return new (t || ConfirmDialogService)(ɵngcc0.ɵɵinject(ɵngcc18.MatDialog)); };\nConfirmDialogService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ConfirmDialogService, factory: ConfirmDialogService.ɵfac });\nConfirmDialogService.ctorParameters = () => [\n    { type: MatDialog }\n];\n\nclass IgoConfirmDialogModule {\n    static forRoot() {\n        return {\n            ngModule: IgoConfirmDialogModule,\n            providers: []\n        };\n    }\n}\nIgoConfirmDialogModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoConfirmDialogModule });\nIgoConfirmDialogModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoConfirmDialogModule_Factory(t) { return new (t || IgoConfirmDialogModule)(); }, providers: [ConfirmDialogService], imports: [[MatButtonModule, MatDialogModule, IgoLanguageModule]] });\n\nclass ContextMenuDirective {\n    constructor(overlay, viewContainerRef, elementRef) {\n        this.overlay = overlay;\n        this.viewContainerRef = viewContainerRef;\n        this.elementRef = elementRef;\n        this.menuPosition = new EventEmitter();\n    }\n    onContextMenu(e) {\n        const { x, y } = e;\n        this.close();\n        e.preventDefault();\n        this.menuPosition.emit({ x, y });\n        this.overlayRef = null;\n        const positionStrategy = this.overlay\n            .position()\n            .flexibleConnectedTo({ x, y })\n            .withPositions([\n            {\n                originX: 'end',\n                originY: 'bottom',\n                overlayX: 'start',\n                overlayY: 'top'\n            }\n        ]);\n        this.overlayRef = this.overlay.create({\n            positionStrategy,\n            scrollStrategy: this.overlay.scrollStrategies.close()\n        });\n        this.overlayRef.attach(new TemplatePortal(this.menuContext, this.viewContainerRef, {\n            $implicit: undefined\n        }));\n        this.sub = fromEvent(document, 'click')\n            .pipe(filter(event => {\n            const clickTarget = event.target;\n            this.close();\n            return (!!this.overlayRef &&\n                !this.overlayRef.overlayElement.contains(clickTarget));\n        }), take(1))\n            .subscribe(() => this.close());\n        this.sub = fromEvent(document, 'contextmenu')\n            .pipe(filter(event => {\n            const clickTarget = event.target;\n            if (clickTarget &&\n                !this.elementRef.nativeElement.contains(clickTarget) &&\n                !this.overlayRef.overlayElement.contains(clickTarget)) {\n                return true;\n            }\n            else {\n                event.preventDefault();\n            }\n        }), take(1))\n            .subscribe(() => this.close());\n    }\n    close() {\n        if (this.overlayRef) {\n            this.overlayRef.dispose();\n            this.overlayRef = null;\n        }\n        if (this.sub) {\n            this.sub.unsubscribe();\n        }\n    }\n}\nContextMenuDirective.ɵfac = function ContextMenuDirective_Factory(t) { return new (t || ContextMenuDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc12.Overlay), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nContextMenuDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ContextMenuDirective, selectors: [[\"\", \"igoContextMenu\", \"\"]], hostBindings: function ContextMenuDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"contextmenu\", function ContextMenuDirective_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });\n    } }, inputs: { menuContext: [\"igoContextMenu\", \"menuContext\"] }, outputs: { menuPosition: \"menuPosition\" } });\nContextMenuDirective.ctorParameters = () => [\n    { type: Overlay },\n    { type: ViewContainerRef },\n    { type: ElementRef }\n];\nContextMenuDirective.propDecorators = {\n    menuContext: [{ type: Input, args: ['igoContextMenu',] }],\n    menuPosition: [{ type: Output }],\n    onContextMenu: [{ type: HostListener, args: ['contextmenu', ['$event'],] }]\n};\n\nclass IgoContextMenuModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextMenuModule,\n            providers: []\n        };\n    }\n}\nIgoContextMenuModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoContextMenuModule });\nIgoContextMenuModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoContextMenuModule_Factory(t) { return new (t || IgoContextMenuModule)(); }, imports: [[]] });\n\nclass CustomHtmlComponent {\n    constructor() {\n        this._html = '';\n    }\n    get html() {\n        return this._html;\n    }\n    set html(value) {\n        this._html = value;\n    }\n}\nCustomHtmlComponent.ɵfac = function CustomHtmlComponent_Factory(t) { return new (t || CustomHtmlComponent)(); };\nCustomHtmlComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CustomHtmlComponent, selectors: [[\"igo-custom-html\"]], inputs: { html: \"html\" }, decls: 2, vars: 3, consts: [[1, \"custom-html\", 3, \"innerHTML\"]], template: function CustomHtmlComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"div\", 0);\n        ɵngcc0.ɵɵpipe(1, \"sanitizeHtml\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"innerHTML\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx.html), ɵngcc0.ɵɵsanitizeHtml);\n    } }, pipes: function () { return [SanitizeHtmlPipe]; }, styles: [\".custom-html[_ngcontent-%COMP%]{padding:20px}\"] });\nCustomHtmlComponent.ctorParameters = () => [];\nCustomHtmlComponent.propDecorators = {\n    html: [{ type: Input }]\n};\n\nclass SanitizeHtmlPipe {\n    constructor(_sanitizer) {\n        this._sanitizer = _sanitizer;\n    }\n    transform(v) {\n        return this._sanitizer.bypassSecurityTrustHtml(v);\n    }\n}\nSanitizeHtmlPipe.ɵfac = function SanitizeHtmlPipe_Factory(t) { return new (t || SanitizeHtmlPipe)(ɵngcc0.ɵɵdirectiveInject(ɵngcc19.DomSanitizer)); };\nSanitizeHtmlPipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: \"sanitizeHtml\", type: SanitizeHtmlPipe, pure: true });\nSanitizeHtmlPipe.ctorParameters = () => [\n    { type: DomSanitizer }\n];\n\nclass IgoCustomHtmlModule {\n    static forRoot() {\n        return {\n            ngModule: IgoCustomHtmlModule\n        };\n    }\n}\nIgoCustomHtmlModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoCustomHtmlModule });\nIgoCustomHtmlModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoCustomHtmlModule_Factory(t) { return new (t || IgoCustomHtmlModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatTooltipModule,\n            MatInputModule,\n            MatButtonModule,\n            IgoLanguageModule\n        ]] });\n\nclass DragAndDropDirective {\n    constructor() {\n        this.allowedExtensions = [];\n        this.filesDropped = new EventEmitter();\n        this.filesInvalid = new EventEmitter();\n        this.background = 'inherit';\n    }\n    onDragOver(evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        this.background = '#999';\n    }\n    onDragLeave(evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        this.background = 'inherit';\n    }\n    onDrop(evt) {\n        evt.preventDefault();\n        evt.stopPropagation();\n        this.background = 'inherit';\n        const filesObj = this.validExtensions(evt);\n        if (filesObj.valid.length) {\n            this.filesDropped.emit(filesObj.valid);\n        }\n        if (filesObj.invalid.length) {\n            this.filesInvalid.emit(filesObj.invalid);\n        }\n    }\n    validExtensions(evt) {\n        const files = evt.dataTransfer.files;\n        const filesObj = {\n            valid: [],\n            invalid: []\n        };\n        if (files.length > 0) {\n            for (const file of files) {\n                const ext = file.name.split('.')[file.name.split('.').length - 1];\n                if (this.allowedExtensions.length === 0 ||\n                    (this.allowedExtensions.lastIndexOf(ext) !== -1 &&\n                        file.size !== 0)) {\n                    filesObj.valid.push(file);\n                }\n                else {\n                    filesObj.invalid.push(file);\n                }\n            }\n        }\n        return filesObj;\n    }\n}\nDragAndDropDirective.ɵfac = function DragAndDropDirective_Factory(t) { return new (t || DragAndDropDirective)(); };\nDragAndDropDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: DragAndDropDirective, selectors: [[\"\", \"igoDragAndDrop\", \"\"]], hostVars: 2, hostBindings: function DragAndDropDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"dragover\", function DragAndDropDirective_dragover_HostBindingHandler($event) { return ctx.onDragOver($event); })(\"dragleave\", function DragAndDropDirective_dragleave_HostBindingHandler($event) { return ctx.onDragLeave($event); })(\"drop\", function DragAndDropDirective_drop_HostBindingHandler($event) { return ctx.onDrop($event); });\n    } if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"background\", ctx.background);\n    } }, inputs: { allowedExtensions: \"allowedExtensions\" }, outputs: { filesDropped: \"filesDropped\", filesInvalid: \"filesInvalid\" } });\nDragAndDropDirective.propDecorators = {\n    allowedExtensions: [{ type: Input }],\n    filesDropped: [{ type: Output }],\n    filesInvalid: [{ type: Output }],\n    background: [{ type: HostBinding, args: ['style.background',] }],\n    onDragOver: [{ type: HostListener, args: ['dragover', ['$event'],] }],\n    onDragLeave: [{ type: HostListener, args: ['dragleave', ['$event'],] }],\n    onDrop: [{ type: HostListener, args: ['drop', ['$event'],] }]\n};\n\nclass IgoDrapDropModule {\n    static forRoot() {\n        return {\n            ngModule: IgoDrapDropModule,\n            providers: []\n        };\n    }\n}\nIgoDrapDropModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoDrapDropModule });\nIgoDrapDropModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoDrapDropModule_Factory(t) { return new (t || IgoDrapDropModule)(); }, imports: [[]] });\n\n/**\n * This class is used in the DynamicComponentOutlet component. It holds\n * a reference to a component factory and can render that component\n * in a target element on demand. It's also possible to set inputs\n * and to subscribe to outputs.\n */\nclass DynamicComponent {\n    constructor(componentFactory) {\n        this.componentFactory = componentFactory;\n        /**\n         * Subscriptions to the component's outputs. Those need\n         * to be unsubscribed when the component is destroyed.\n         */\n        this.subscriptions = [];\n        /**\n         * Component inputs\n         */\n        this.inputs = {};\n        /**\n         * Subscriptions to the component's async inputs\n         */\n        this.inputs$$ = {};\n        /**\n         * Subscribers to the component's outputs\n         */\n        this.subscribers = {};\n    }\n    /**\n     * Render the component to a target element.\n     * Set it's inputs and subscribe to it's outputs.\n     * @param target Target element\n     */\n    setTarget(target) {\n        this.target = target;\n        this.componentRef = target.createComponent(this.componentFactory);\n        this.updateInputs(this.inputs);\n        this.updateSubscribers(this.subscribers);\n    }\n    /**\n     * Destroy this component. That means, removing from it's target\n     * element and unsubscribing to it's outputs.\n     */\n    destroy() {\n        if (this.target !== undefined) {\n            this.target.clear();\n        }\n        if (this.componentRef !== undefined) {\n            this.componentRef.destroy();\n            this.componentRef = undefined;\n        }\n        this.unobserveAllInputs();\n        this.unsubscribeAll();\n    }\n    /**\n     * Update the component inputs. This is an update so any\n     * key not defined won't be overwritten.\n     */\n    updateInputs(inputs) {\n        this.inputs = inputs;\n        if (this.componentRef === undefined) {\n            return;\n        }\n        const instance = this.componentRef.instance;\n        const allowedInputs = this.componentFactory.inputs;\n        allowedInputs.forEach((value) => {\n            const key = value.propName;\n            this.unobserveInput(key);\n            const inputValue = inputs[key];\n            if (inputs.hasOwnProperty(key)) {\n                if (inputValue instanceof Observable) {\n                    this.observeInput(key, inputValue);\n                }\n                else {\n                    this.setInputValue(instance, key, inputValue);\n                }\n            }\n        });\n        if (typeof instance.onUpdateInputs === 'function') {\n            instance.onUpdateInputs();\n        }\n    }\n    /**\n     * Set an instance's input value\n     * @param instance Component instance\n     * @param key Input key\n     * @param value Input value\n     */\n    setInputValue(instance, key, value) {\n        const currentValue = instance[key];\n        if (value === currentValue) {\n            return;\n        }\n        const prototype = Object.getPrototypeOf(instance);\n        const descriptor = Object.getOwnPropertyDescriptor(prototype, key);\n        if (descriptor !== undefined && descriptor.set !== undefined) {\n            descriptor.set.call(instance, value);\n        }\n        else {\n            instance[key] = value;\n        }\n    }\n    /**\n     * Update the component subscribers. This is an update so any\n     * key not defined won't be overwritten.\n     */\n    updateSubscribers(subscribers) {\n        this.subscribers = subscribers;\n        if (this.componentRef === undefined) {\n            return;\n        }\n        const instance = this.componentRef.instance;\n        const allowedSubscribers = this.componentFactory.outputs;\n        allowedSubscribers.forEach((value) => {\n            const key = value.propName;\n            if (subscribers.hasOwnProperty(key)) {\n                const emitter = instance[key];\n                const subscriber = subscribers[key];\n                if (Array.isArray(subscriber)) {\n                    subscriber.forEach((_subscriber) => {\n                        this.subscriptions.push(emitter.subscribe(_subscriber));\n                    });\n                }\n                else {\n                    this.subscriptions.push(emitter.subscribe(subscriber));\n                }\n            }\n        });\n    }\n    /**\n     * Subscribe to an observable input and update the component's input value\n     * accordingly\n     * @param key Input key\n     * @param observable Observable\n     */\n    observeInput(key, observable) {\n        this.inputs$$[key] = observable.subscribe((value) => {\n            const instance = this.componentRef.instance;\n            this.setInputValue(instance, key, value);\n            if (typeof instance.onUpdateInputs === 'function') {\n                instance.onUpdateInputs();\n            }\n        });\n    }\n    /**\n     * Unsubscribe to an observable input\n     * @param key Input key\n     */\n    unobserveInput(key) {\n        if (this.inputs$$[key] !== undefined) {\n            this.inputs$$[key].unsubscribe();\n            this.inputs$$[key] = undefined;\n        }\n    }\n    /**\n     * Unsubscribe to all outputs.\n     */\n    unobserveAllInputs() {\n        Object.values(this.inputs$$).forEach((s) => {\n            if (s !== undefined) {\n                s.unsubscribe();\n            }\n        });\n        this.inputs$$ = {};\n    }\n    /**\n     * Unsubscribe to all outputs.\n     */\n    unsubscribeAll() {\n        this.subscriptions.forEach((s) => s.unsubscribe());\n        this.subscriptions = [];\n    }\n}\n\n/**\n * Service to creates DynamicComponent instances from base component classes\n */\nclass DynamicComponentService {\n    constructor(resolver) {\n        this.resolver = resolver;\n    }\n    /**\n     * Creates a DynamicComponent instance from a base component class\n     * @param componentCls The component class\n     * @returns DynamicComponent instance\n     */\n    create(componentCls) {\n        const factory = this.resolver.resolveComponentFactory(componentCls);\n        return new DynamicComponent(factory);\n    }\n}\nDynamicComponentService.ɵfac = function DynamicComponentService_Factory(t) { return new (t || DynamicComponentService)(ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver)); };\nDynamicComponentService.ɵprov = ɵɵdefineInjectable({ factory: function DynamicComponentService_Factory() { return new DynamicComponentService(ɵɵinject(ComponentFactoryResolver)); }, token: DynamicComponentService, providedIn: \"root\" });\nDynamicComponentService.ctorParameters = () => [\n    { type: ComponentFactoryResolver }\n];\n\nclass DynamicOutletComponent {\n    constructor(dynamicComponentService, cdRef) {\n        this.dynamicComponentService = dynamicComponentService;\n        this.cdRef = cdRef;\n        /**\n         * The dynamic component inputs\n         */\n        this.inputs = {};\n        /**\n         * The subscribers to the dynamic component outputs\n         */\n        this.subscribers = {};\n    }\n    /**\n     * If the dynamic component changes, create it.\n     * If the inputs or subscribers change, update the current component's\n     * inputs or subscribers.\n     * @internal\n     */\n    ngOnChanges(changes) {\n        const component = changes.component;\n        const inputs = changes.inputs;\n        const subscribers = changes.subscribers;\n        const eq = ObjectUtils.objectsAreEquivalent;\n        if (component && component.currentValue !== component.previousValue) {\n            this.createComponent(component.currentValue);\n        }\n        else {\n            const inputsAreEquivalents = inputs && eq(inputs.currentValue || {}, inputs.previousValue || {});\n            const subscribersAreEquivalents = subscribers &&\n                eq(subscribers.currentValue || {}, subscribers.previousValue || {});\n            if (inputsAreEquivalents === false) {\n                this.updateInputs();\n            }\n            if (subscribersAreEquivalents === false) {\n                this.updateSubscribers();\n            }\n        }\n        this.cdRef.detectChanges();\n    }\n    /**\n     * Destroy the dynamic component and all it's subscribers\n     * @internal\n     */\n    ngOnDestroy() {\n        if (this.dynamicComponent) {\n            this.dynamicComponent.destroy();\n        }\n    }\n    /**\n     * Create a  DynamicComponent out of the component class and render it.\n     * @internal\n     */\n    createComponent(component) {\n        if (this.dynamicComponent !== undefined) {\n            this.dynamicComponent.destroy();\n        }\n        this.dynamicComponent =\n            component instanceof DynamicComponent\n                ? component\n                : this.dynamicComponentService.create(component);\n        this.renderComponent();\n    }\n    /**\n     * Create and render the dynamic component. Set it's inputs and subscribers\n     * @internal\n     */\n    renderComponent() {\n        this.updateInputs();\n        this.updateSubscribers();\n        this.dynamicComponent.setTarget(this.target);\n    }\n    /**\n     * Update the dynamic component inputs. This is an update so any\n     * key not defined won't be overwritten.\n     * @internal\n     */\n    updateInputs() {\n        this.dynamicComponent.updateInputs(this.inputs);\n    }\n    /**\n     * Update the dynamic component subscribers. This is an update so any\n     * key not defined won't be overwritten.\n     * @internal\n     */\n    updateSubscribers() {\n        this.dynamicComponent.updateSubscribers(this.subscribers);\n    }\n}\nDynamicOutletComponent.ɵfac = function DynamicOutletComponent_Factory(t) { return new (t || DynamicOutletComponent)(ɵngcc0.ɵɵdirectiveInject(DynamicComponentService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nDynamicOutletComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: DynamicOutletComponent, selectors: [[\"igo-dynamic-outlet\"]], viewQuery: function DynamicOutletComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c2, true, ViewContainerRef);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.target = _t.first);\n    } }, inputs: { inputs: \"inputs\", subscribers: \"subscribers\", component: \"component\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 2, vars: 0, consts: [[\"target\", \"\"]], template: function DynamicOutletComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, DynamicOutletComponent_ng_template_0_Template, 0, 0, \"ng-template\", null, 0, ɵngcc0.ɵɵtemplateRefExtractor);\n    } }, styles: [\"[_nghost-%COMP%]{display:block;height:100%;width:100%}\"], changeDetection: 0 });\nDynamicOutletComponent.ctorParameters = () => [\n    { type: DynamicComponentService },\n    { type: ChangeDetectorRef }\n];\nDynamicOutletComponent.propDecorators = {\n    component: [{ type: Input }],\n    inputs: [{ type: Input }],\n    subscribers: [{ type: Input }],\n    target: [{ type: ViewChild, args: ['target', { read: ViewContainerRef, static: true },] }]\n};\n\n/**\n * @ignore\n */\nclass IgoDynamicOutletModule {\n}\nIgoDynamicOutletModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoDynamicOutletModule });\nIgoDynamicOutletModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoDynamicOutletModule_Factory(t) { return new (t || IgoDynamicOutletModule)(); }, imports: [[\n            CommonModule\n        ]] });\n\nclass IgoDynamicComponentModule {\n}\nIgoDynamicComponentModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoDynamicComponentModule });\nIgoDynamicComponentModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoDynamicComponentModule_Factory(t) { return new (t || IgoDynamicComponentModule)(); }, providers: [\n        DynamicComponentService\n    ], imports: [[\n            CommonModule,\n            IgoDynamicOutletModule\n        ], IgoDynamicOutletModule] });\n\nclass FlexibleComponent {\n    constructor(el, mediaService) {\n        this.el = el;\n        this.mediaService = mediaService;\n        this._initial = '0';\n        this._collapsed = '0';\n        this._expanded = '100%';\n        this._initialMobile = this.expanded;\n        this._collapsedMobile = this.collapsed;\n        this._expandedMobile = this.expanded;\n        this._direction = 'column';\n        this._state = 'initial';\n    }\n    get initial() {\n        return this._initial;\n    }\n    set initial(value) {\n        this._initial = value;\n    }\n    get collapsed() {\n        return this._collapsed;\n    }\n    set collapsed(value) {\n        this._collapsed = value;\n    }\n    get expanded() {\n        return this._expanded;\n    }\n    set expanded(value) {\n        this._expanded = value;\n    }\n    get initialMobile() {\n        return this._initialMobile;\n    }\n    set initialMobile(value) {\n        this._initialMobile = value;\n    }\n    get collapsedMobile() {\n        return this._collapsedMobile;\n    }\n    set collapsedMobile(value) {\n        this._collapsedMobile = value;\n    }\n    get expandedMobile() {\n        return this._expandedMobile;\n    }\n    set expandedMobile(value) {\n        this._expandedMobile = value;\n    }\n    get direction() {\n        return this._direction;\n    }\n    set direction(value) {\n        this._direction = value;\n    }\n    get state() {\n        return this._state;\n    }\n    set state(value) {\n        const sizes = {\n            initial: this.initial,\n            collapsed: this.collapsed,\n            expanded: this.expanded\n        };\n        if (this.mediaService.isMobile()) {\n            Object.assign(sizes, {\n                initial: this.initialMobile,\n                collapsed: this.collapsedMobile,\n                expanded: this.expandedMobile\n            });\n        }\n        const size = sizes[value];\n        if (size !== undefined) {\n            this.setSize(size);\n            setTimeout(() => {\n                this._state = value;\n            }, FlexibleComponent.transitionTime);\n        }\n    }\n    ngOnInit() {\n        this.el.nativeElement.className += this.direction;\n        // Since this component supports different sizes\n        // on mobile, force a redraw when the media changes\n        this.mediaService.media$.subscribe((media) => (this.state = this.state));\n    }\n    setSize(size) {\n        this._state = 'transition';\n        if (this.direction === 'column') {\n            this.main.nativeElement.style.height = size;\n        }\n        else if (this.direction === 'row') {\n            this.main.nativeElement.style.width = size;\n        }\n    }\n}\nFlexibleComponent.ɵfac = function FlexibleComponent_Factory(t) { return new (t || FlexibleComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc10.MediaService)); };\nFlexibleComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FlexibleComponent, selectors: [[\"igo-flexible\"]], viewQuery: function FlexibleComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c3, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.main = _t.first);\n    } }, inputs: { initial: \"initial\", collapsed: \"collapsed\", expanded: \"expanded\", initialMobile: \"initialMobile\", collapsedMobile: \"collapsedMobile\", expandedMobile: \"expandedMobile\", direction: \"direction\", state: \"state\" }, ngContentSelectors: _c5, decls: 8, vars: 4, consts: [[\"flexibleMain\", \"\"], [1, \"igo-container\"], [1, \"igo-flexible-fill\"]], template: function FlexibleComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c4);\n        ɵngcc0.ɵɵelementStart(0, \"div\", null, 0);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n        ɵngcc0.ɵɵprojection(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(5, \"div\");\n        ɵngcc0.ɵɵelementStart(6, \"div\", 1);\n        ɵngcc0.ɵɵprojection(7, 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵclassMapInterpolate2(\"igo-flexible-main \", ctx.state, \" \", ctx.direction, \"\");\n    } }, styles: [\"[_nghost-%COMP%]{display:flex;height:100%;width:100%}.column[_nghost-%COMP%]{flex-direction:column}.row[_nghost-%COMP%]{flex-direction:row}.igo-flexible-main[_ngcontent-%COMP%]{flex:0 0 auto;overflow:hidden}.igo-flexible-main.column[_ngcontent-%COMP%]{transition:height .25s ease-in}.igo-flexible-main.row[_ngcontent-%COMP%]{transition:width .25s ease-in}.igo-flexible-fill[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0}.igo-container[_ngcontent-%COMP%]{height:100%;margin:0 5px;overflow:hidden;padding:5px 0;position:relative;width:calc(100% - 10px)}  .igo-flexible-fill{flex:1 1 auto;overflow:hidden;position:relative}  .igo-content{height:100%;overflow:auto;width:100%}  igo-panel{height:100%}\"] });\nFlexibleComponent.transitionTime = 250;\nFlexibleComponent.ctorParameters = () => [\n    { type: ElementRef },\n    { type: MediaService }\n];\nFlexibleComponent.propDecorators = {\n    main: [{ type: ViewChild, args: ['flexibleMain', { static: true },] }],\n    initial: [{ type: Input }],\n    collapsed: [{ type: Input }],\n    expanded: [{ type: Input }],\n    initialMobile: [{ type: Input }],\n    collapsedMobile: [{ type: Input }],\n    expandedMobile: [{ type: Input }],\n    direction: [{ type: Input }],\n    state: [{ type: Input }]\n};\n\nclass IgoFlexibleModule {\n    static forRoot() {\n        return {\n            ngModule: IgoFlexibleModule,\n            providers: []\n        };\n    }\n}\nIgoFlexibleModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoFlexibleModule });\nIgoFlexibleModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoFlexibleModule_Factory(t) { return new (t || IgoFlexibleModule)(); }, imports: [[]] });\n\nfunction formControlIsRequired(control) {\n    if (control.validator) {\n        const validator = control.validator({});\n        if (validator && validator.required) {\n            return true;\n        }\n    }\n    if (control.controls) {\n        const requiredControl = Object.keys(control.controls).find((key) => {\n            return formControlIsRequired(control.controls[key]);\n        });\n        return requiredControl !== undefined;\n    }\n    return false;\n}\nfunction getDefaultErrorMessages() {\n    return {\n        required: 'igo.common.form.errors.required'\n    };\n}\nfunction getControlErrorMessage(control, messages) {\n    const errors = control.errors || {};\n    const errorKeys = Object.keys(errors);\n    const errorMessages = errorKeys\n        .map((key) => messages[key])\n        .filter((message) => message !== undefined);\n    return errorMessages.length > 0 ? errorMessages[0] : '';\n}\nfunction getAllFormFields(form) {\n    return form.groups.reduce((acc, group) => {\n        return acc.concat(group.fields);\n    }, [].concat(form.fields));\n}\nfunction getFormFieldByName(form, name) {\n    const fields = getAllFormFields(form);\n    return fields.find((field) => {\n        return field.name === name;\n    });\n}\n\n/**\n * A configurable form\n */\nclass FormComponent {\n    constructor() {\n        /**\n         * Form autocomplete\n         */\n        this.autocomplete = 'off';\n        /**\n         * Event emitted when the form is submitted\n         */\n        this.submitForm = new EventEmitter();\n    }\n    get hasButtons() {\n        return this.buttons.nativeElement.children.length !== 0;\n    }\n    /**\n     * Is the entity or the template change, recreate the form or repopulate it.\n     * @internal\n     */\n    ngOnChanges(changes) {\n        const formData = changes.formData;\n        if (formData && formData.currentValue !== formData.previousValue) {\n            if (formData.currentValue === undefined) {\n                this.clear();\n            }\n            else {\n                this.setData(formData.currentValue);\n            }\n        }\n    }\n    /**\n     * Transform the form data to a feature and emit an event\n     * @param event Form submit event\n     * @internal\n     */\n    onSubmit() {\n        this.submitForm.emit(this.getData());\n    }\n    getData() {\n        const data = {};\n        getAllFormFields(this.form).forEach((field) => {\n            this.updateDataWithFormField(data, field);\n        });\n        return data;\n    }\n    setData(data) {\n        this.form.fields.forEach((field) => {\n            field.control.setValue(t(data, field.name).safeObject);\n        });\n        this.form.groups.forEach((group) => {\n            group.fields.forEach((field) => {\n                field.control.setValue(t(data, field.name).safeObject);\n            });\n        });\n    }\n    updateDataWithFormField(data, field) {\n        const control = field.control;\n        if (!control.disabled) {\n            data[field.name] = control.value;\n        }\n    }\n    /**\n     * Clear form\n     */\n    clear() {\n        this.form.control.reset();\n    }\n}\nFormComponent.ɵfac = function FormComponent_Factory(t) { return new (t || FormComponent)(); };\nFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FormComponent, selectors: [[\"igo-form\"]], viewQuery: function FormComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c6, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.buttons = _t.first);\n    } }, inputs: { autocomplete: \"autocomplete\", form: \"form\", formData: \"formData\" }, outputs: { submitForm: \"submitForm\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c9, decls: 7, vars: 5, consts: [[3, \"autocomplete\", \"formGroup\", \"ngSubmit\"], [1, \"igo-form-body\", 3, \"ngClass\"], [1, \"igo-form-content\"], [1, \"igo-form-buttons\"], [\"buttons\", \"\"]], template: function FormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c7);\n        ɵngcc0.ɵɵelementStart(0, \"form\", 0);\n        ɵngcc0.ɵɵlistener(\"ngSubmit\", function FormComponent_Template_form_ngSubmit_0_listener() { return ctx.onSubmit(); });\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵprojection(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"div\", 3, 4);\n        ɵngcc0.ɵɵprojection(6, 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"autocomplete\", ctx.autocomplete)(\"formGroup\", ctx.form.control);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(3, _c8, ctx.hasButtons));\n    } }, directives: [ɵngcc20.ɵangular_packages_forms_forms_y, ɵngcc20.NgControlStatusGroup, ɵngcc20.FormGroupDirective, ɵngcc3.NgClass], styles: [\"[_nghost-%COMP%]{display:block}form[_ngcontent-%COMP%]{width:100%}.igo-form-body[_ngcontent-%COMP%], .igo-form-content[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{height:100%}.igo-form-body-with-buttons[_ngcontent-%COMP%]   .igo-form-content[_ngcontent-%COMP%]{height:calc(100% - 56px)}.igo-form-content[_ngcontent-%COMP%]{display:flex}\"], changeDetection: 0 });\nFormComponent.ctorParameters = () => [];\nFormComponent.propDecorators = {\n    form: [{ type: Input }],\n    formData: [{ type: Input }],\n    autocomplete: [{ type: Input }],\n    submitForm: [{ type: Output }],\n    buttons: [{ type: ViewChild, args: ['buttons', { static: true },] }]\n};\n\n/**\n * @ignore\n */\nclass IgoFormFormModule {\n}\nIgoFormFormModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoFormFormModule });\nIgoFormFormModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoFormFormModule_Factory(t) { return new (t || IgoFormFormModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule\n        ], FormsModule,\n        ReactiveFormsModule] });\n\n/**\n * Service where all available form fields are registered.\n */\nclass FormFieldService {\n    constructor() { }\n    static register(type, component) {\n        FormFieldService.fields[type] = component;\n    }\n    /**\n     * Return field component by type\n     * @param type Field type\n     * @returns Field component\n     */\n    getFieldByType(type) {\n        return FormFieldService.fields[type];\n    }\n}\nFormFieldService.ɵfac = function FormFieldService_Factory(t) { return new (t || FormFieldService)(); };\nFormFieldService.fields = {};\nFormFieldService.ɵprov = ɵɵdefineInjectable({ factory: function FormFieldService_Factory() { return new FormFieldService(); }, token: FormFieldService, providedIn: \"root\" });\nFormFieldService.ctorParameters = () => [];\n\nclass FormService {\n    constructor(formBuilder) {\n        this.formBuilder = formBuilder;\n    }\n    form(fields, groups) {\n        const control = this.formBuilder.group({});\n        fields.forEach((field) => {\n            control.addControl(field.name, field.control);\n        });\n        groups.forEach((group) => {\n            control.addControl(group.name, group.control);\n        });\n        return { fields, groups, control };\n    }\n    group(config, fields) {\n        const options = config.options || {};\n        const control = this.formBuilder.group({});\n        fields.forEach((field) => {\n            control.addControl(field.name, field.control);\n        });\n        control.setValidators(options.validator);\n        return Object.assign({}, config, { fields, control });\n    }\n    field(config) {\n        const options = config.options || {};\n        const state = Object.assign({ value: '' }, {\n            disabled: options.disabled\n        });\n        const control = this.formBuilder.control(state);\n        control.setValidators(options.validator);\n        return Object.assign({ type: 'text' }, config, { control });\n    }\n    extendFieldConfig(config, partial) {\n        const options = Object.assign({}, config.options || {}, partial.options || {});\n        const inputs = Object.assign({}, config.inputs || {}, partial.inputs || {});\n        const subscribers = Object.assign({}, config.subscribers || {}, partial.subscribers || {});\n        return Object.assign({}, config, { options, inputs, subscribers });\n    }\n}\nFormService.ɵfac = function FormService_Factory(t) { return new (t || FormService)(ɵngcc0.ɵɵinject(ɵngcc20.FormBuilder)); };\nFormService.ɵprov = ɵɵdefineInjectable({ factory: function FormService_Factory() { return new FormService(ɵɵinject(FormBuilder)); }, token: FormService, providedIn: \"root\" });\nFormService.ctorParameters = () => [\n    { type: FormBuilder }\n];\n\nfunction IgoFormFieldComponent(type) {\n    return (compType) => {\n        FormFieldService.register(type, compType);\n    };\n}\n\n/**\n * This component renders the proper form input based on\n * the field configuration it receives.\n */\nclass FormFieldComponent {\n    constructor(formFieldService) {\n        this.formFieldService = formFieldService;\n        /**\n         * Field inputs cache\n         */\n        this.fieldInputs = undefined;\n        /**\n         * Field subscribers cache\n         */\n        this.fieldSubscribers = undefined;\n    }\n    get fieldOptions() {\n        return this.field.options || {};\n    }\n    getFieldComponent() {\n        return this.formFieldService.getFieldByType(this.field.type || 'text');\n    }\n    getFieldInputs() {\n        if (this.fieldInputs !== undefined) {\n            return this.fieldInputs;\n        }\n        const errors = this.fieldOptions.errors || {};\n        this.fieldInputs = Object.assign({\n            placeholder: this.field.title,\n            disableSwitch: this.fieldOptions.disableSwitch || false\n        }, Object.assign({}, this.field.inputs || {}), {\n            formControl: this.field.control,\n            errors: Object.assign({}, getDefaultErrorMessages(), errors)\n        });\n        return this.fieldInputs;\n    }\n    getFieldSubscribers() {\n        if (this.fieldSubscribers !== undefined) {\n            return this.fieldSubscribers;\n        }\n        this.fieldSubscribers = Object.assign({}, this.field.subscribers || {});\n        return this.fieldSubscribers;\n    }\n}\nFormFieldComponent.ɵfac = function FormFieldComponent_Factory(t) { return new (t || FormFieldComponent)(ɵngcc0.ɵɵdirectiveInject(FormFieldService)); };\nFormFieldComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FormFieldComponent, selectors: [[\"igo-form-field\"]], inputs: { field: \"field\" }, decls: 1, vars: 1, consts: [[4, \"ngIf\"], [3, \"component\", \"inputs\", \"subscribers\"]], template: function FormFieldComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, FormFieldComponent_ng_container_0_Template, 2, 3, \"ng-container\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.field !== undefined);\n    } }, directives: [ɵngcc3.NgIf, DynamicOutletComponent], styles: [\"mat-form-field{width:100%}  .igo-form-disable-switch{margin-right:8px}\"], changeDetection: 0 });\nFormFieldComponent.ctorParameters = () => [\n    { type: FormFieldService }\n];\nFormFieldComponent.propDecorators = {\n    field: [{ type: Input }]\n};\n\n/**\n * This component renders a select field\n */\nlet FormFieldSelectComponent = class FormFieldSelectComponent {\n    constructor() {\n        this.disabled$ = new BehaviorSubject(false);\n        this.choices$ = new BehaviorSubject([]);\n        /**\n         * Wheter a disable switch should be available\n         */\n        this.disableSwitch = false;\n    }\n    /**\n     * Select input choices\n     */\n    set choices(value) { this.choices$.next(value); }\n    get choices() { return this.choices$.value; }\n    /**\n     * Whether the field is required\n     */\n    get required() {\n        return formControlIsRequired(this.formControl);\n    }\n    ngOnInit() {\n        this.disabled$.next(this.formControl.disabled);\n    }\n    /**\n     * Get error message\n     */\n    getErrorMessage() {\n        return getControlErrorMessage(this.formControl, this.errors);\n    }\n    onDisableSwitchClick() {\n        this.toggleDisabled();\n    }\n    toggleDisabled() {\n        const disabled = !this.disabled$.value;\n        if (disabled === true) {\n            this.formControl.disable();\n        }\n        else {\n            this.formControl.enable();\n        }\n        this.disabled$.next(disabled);\n    }\n};\nFormFieldSelectComponent.ɵfac = function FormFieldSelectComponent_Factory(t) { return new (t || FormFieldSelectComponent)(); };\nFormFieldSelectComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FormFieldSelectComponent, selectors: [[\"igo-form-field-select\"]], inputs: { disableSwitch: \"disableSwitch\", choices: \"choices\", formControl: \"formControl\", placeholder: \"placeholder\", errors: \"errors\" }, decls: 6, vars: 8, consts: [[3, \"required\", \"placeholder\", \"formControl\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"igo-form-disable-switch\", \"matPrefix\", \"\", 3, \"svgIcon\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"value\"], [\"matPrefix\", \"\", 1, \"igo-form-disable-switch\", 3, \"svgIcon\", \"click\"]], template: function FormFieldSelectComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(1, \"mat-select\", 0);\n        ɵngcc0.ɵɵtemplate(2, FormFieldSelectComponent_mat_option_2_Template, 2, 2, \"mat-option\", 1);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(4, FormFieldSelectComponent_mat_icon_4_Template, 2, 3, \"mat-icon\", 2);\n        ɵngcc0.ɵɵtemplate(5, FormFieldSelectComponent_mat_error_5_Template, 3, 3, \"mat-error\", 3);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"required\", ctx.required)(\"placeholder\", ctx.placeholder)(\"formControl\", ctx.formControl);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(3, 6, ctx.choices$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.disableSwitch === true);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.formControl.errors);\n    } }, directives: [ɵngcc1.MatFormField, ɵngcc2.MatSelect, ɵngcc20.RequiredValidator, ɵngcc20.NgControlStatus, ɵngcc20.FormControlDirective, ɵngcc3.NgForOf, ɵngcc3.NgIf, ɵngcc4.MatOption, ɵngcc8.MatIcon, ɵngcc1.MatPrefix, ɵngcc1.MatError], pipes: [ɵngcc3.AsyncPipe, ɵngcc17.TranslatePipe], encapsulation: 2, changeDetection: 0 });\nFormFieldSelectComponent.propDecorators = {\n    choices: [{ type: Input }],\n    formControl: [{ type: Input }],\n    placeholder: [{ type: Input }],\n    errors: [{ type: Input }],\n    disableSwitch: [{ type: Input }]\n};\nFormFieldSelectComponent = __decorate([\n    IgoFormFieldComponent('select')\n], FormFieldSelectComponent);\n\n/**\n * This component renders a text field\n */\nlet FormFieldTextComponent = class FormFieldTextComponent {\n    constructor() {\n        this.disabled$ = new BehaviorSubject(false);\n        /**\n         * Wheter a disable switch should be available\n         */\n        this.disableSwitch = false;\n    }\n    /**\n     * Whether the field is required\n     */\n    get required() {\n        return formControlIsRequired(this.formControl);\n    }\n    ngOnInit() {\n        this.disabled$.next(this.formControl.disabled);\n    }\n    /**\n     * Get error message\n     */\n    getErrorMessage() {\n        return getControlErrorMessage(this.formControl, this.errors);\n    }\n    onDisableSwitchClick() {\n        this.toggleDisabled();\n    }\n    toggleDisabled() {\n        const disabled = !this.disabled$.value;\n        if (disabled === true) {\n            this.formControl.disable();\n        }\n        else {\n            this.formControl.enable();\n        }\n        this.disabled$.next(disabled);\n    }\n};\nFormFieldTextComponent.ɵfac = function FormFieldTextComponent_Factory(t) { return new (t || FormFieldTextComponent)(); };\nFormFieldTextComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FormFieldTextComponent, selectors: [[\"igo-form-field-text\"]], inputs: { disableSwitch: \"disableSwitch\", formControl: \"formControl\", placeholder: \"placeholder\", errors: \"errors\" }, decls: 4, vars: 5, consts: [[\"matInput\", \"\", 3, \"required\", \"placeholder\", \"formControl\"], [\"class\", \"igo-form-disable-switch\", \"matPrefix\", \"\", 3, \"svgIcon\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"matPrefix\", \"\", 1, \"igo-form-disable-switch\", 3, \"svgIcon\", \"click\"]], template: function FormFieldTextComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-form-field\");\n        ɵngcc0.ɵɵelement(1, \"input\", 0);\n        ɵngcc0.ɵɵtemplate(2, FormFieldTextComponent_mat_icon_2_Template, 2, 3, \"mat-icon\", 1);\n        ɵngcc0.ɵɵtemplate(3, FormFieldTextComponent_mat_error_3_Template, 3, 3, \"mat-error\", 2);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"required\", ctx.required)(\"placeholder\", ctx.placeholder)(\"formControl\", ctx.formControl);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.disableSwitch === true);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.formControl.errors);\n    } }, directives: [ɵngcc1.MatFormField, ɵngcc21.MatInput, ɵngcc20.DefaultValueAccessor, ɵngcc20.RequiredValidator, ɵngcc20.NgControlStatus, ɵngcc20.FormControlDirective, ɵngcc3.NgIf, ɵngcc8.MatIcon, ɵngcc1.MatPrefix, ɵngcc1.MatError], pipes: [ɵngcc3.AsyncPipe, ɵngcc17.TranslatePipe], encapsulation: 2, changeDetection: 0 });\nFormFieldTextComponent.propDecorators = {\n    formControl: [{ type: Input }],\n    placeholder: [{ type: Input }],\n    errors: [{ type: Input }],\n    disableSwitch: [{ type: Input }]\n};\nFormFieldTextComponent = __decorate([\n    IgoFormFieldComponent('text')\n], FormFieldTextComponent);\n\n/**\n * This component renders a textarea field\n */\nlet FormFieldTextareaComponent = class FormFieldTextareaComponent {\n    constructor() {\n        this.disabled$ = new BehaviorSubject(false);\n        /**\n         * Wheter a disable switch should be available\n         */\n        this.disableSwitch = false;\n    }\n    /**\n     * Whether the field is required\n     */\n    get required() {\n        return formControlIsRequired(this.formControl);\n    }\n    ngOnInit() {\n        this.disabled$.next(this.formControl.disabled);\n    }\n    /**\n     * Get error message\n     */\n    getErrorMessage() {\n        return getControlErrorMessage(this.formControl, this.errors);\n    }\n    onDisableSwitchClick() {\n        this.toggleDisabled();\n    }\n    toggleDisabled() {\n        const disabled = !this.disabled$.value;\n        if (disabled === true) {\n            this.formControl.disable();\n        }\n        else {\n            this.formControl.enable();\n        }\n        this.disabled$.next(disabled);\n    }\n};\nFormFieldTextareaComponent.ɵfac = function FormFieldTextareaComponent_Factory(t) { return new (t || FormFieldTextareaComponent)(); };\nFormFieldTextareaComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FormFieldTextareaComponent, selectors: [[\"igo-form-field-textarea\"]], inputs: { disableSwitch: \"disableSwitch\", formControl: \"formControl\", placeholder: \"placeholder\", errors: \"errors\" }, decls: 5, vars: 5, consts: [[\"matInput\", \"\", 3, \"required\", \"placeholder\", \"formControl\"], [\"class\", \"igo-form-disable-switch\", \"matPrefix\", \"\", 3, \"svgIcon\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"matPrefix\", \"\", 1, \"igo-form-disable-switch\", 3, \"svgIcon\", \"click\"]], template: function FormFieldTextareaComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(1, \"textarea\", 0);\n        ɵngcc0.ɵɵtext(2, \"  \");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, FormFieldTextareaComponent_mat_icon_3_Template, 2, 3, \"mat-icon\", 1);\n        ɵngcc0.ɵɵtemplate(4, FormFieldTextareaComponent_mat_error_4_Template, 3, 3, \"mat-error\", 2);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"required\", ctx.required)(\"placeholder\", ctx.placeholder)(\"formControl\", ctx.formControl);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.disableSwitch === true);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.formControl.errors);\n    } }, directives: [ɵngcc1.MatFormField, ɵngcc21.MatInput, ɵngcc20.DefaultValueAccessor, ɵngcc20.RequiredValidator, ɵngcc20.NgControlStatus, ɵngcc20.FormControlDirective, ɵngcc3.NgIf, ɵngcc8.MatIcon, ɵngcc1.MatPrefix, ɵngcc1.MatError], pipes: [ɵngcc3.AsyncPipe, ɵngcc17.TranslatePipe], encapsulation: 2, changeDetection: 0 });\nFormFieldTextareaComponent.propDecorators = {\n    formControl: [{ type: Input }],\n    placeholder: [{ type: Input }],\n    errors: [{ type: Input }],\n    disableSwitch: [{ type: Input }]\n};\nFormFieldTextareaComponent = __decorate([\n    IgoFormFieldComponent('textarea')\n], FormFieldTextareaComponent);\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(EntitySelectorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-entity-selector',\n                template: \"<mat-form-field class=\\\"igo-entity-selector\\\">\\n  <mat-select\\n    [disabled]=\\\"disabled\\\"\\n    [value]=\\\"selected$ | async\\\"\\n    [multiple]=\\\"multi\\\"\\n    [placeholder]=\\\"placeholder\\\"\\n    (selectionChange)=\\\"onSelectionChange($event)\\\">\\n    <mat-option *ngIf=\\\"emptyText !== undefined && multi === false\\\" [value]=\\\"emptyValue\\\">{{emptyText}}</mat-option>\\n    <mat-option *ngIf=\\\"multi === true\\\" [value]=\\\"multiSelectValue\\\">{{multiText$ | async}}</mat-option>\\n    <ng-template ngFor let-record [ngForOf]=\\\"store.stateView.all$() | async\\\">\\n      <mat-option [value]=\\\"record.entity\\\">\\n        {{titleAccessor(record.entity)}}\\n      </mat-option>\\n    </ng-template>\\n  </mat-select>\\n</mat-form-field>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"mat-form-field{width:100%}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { titleAccessor: [{\n            type: Input\n        }], emptyText: [{\n            type: Input\n        }], multi: [{\n            type: Input\n        }], multiAllText: [{\n            type: Input\n        }], multiNoneText: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], selectedChange: [{\n            type: Output\n        }], store: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(EntityTableComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-entity-table',\n                template: \"<div class=\\\"table-container\\\">\\n  <table\\n    mat-table\\n    matSort\\n    [ngClass]=\\\"getTableClass()\\\"\\n    [dataSource]=\\\"dataSource\\\"\\n    [trackBy]=\\\"getTrackByFunction()\\\"\\n    (matSortChange)=\\\"onSort($event)\\\">\\n\\n    <ng-container matColumnDef=\\\"selectionCheckbox\\\" class=\\\"mat-cell-checkbox\\\">\\n      <th mat-header-cell *matHeaderCellDef>\\n        <ng-container *ngIf=\\\"selectMany\\\">\\n          <ng-container *ngIf=\\\"selectionState$ | async as selectionState\\\">\\n            <mat-checkbox (change)=\\\"onToggleRows($event.checked)\\\"\\n                          [checked]=\\\"selectionState === entityTableSelectionState.All\\\"\\n                          [indeterminate]=\\\"selectionState === entityTableSelectionState.Some\\\">\\n            </mat-checkbox>\\n          </ng-container>\\n        </ng-container>\\n      </th>\\n      <td mat-cell *matCellDef=\\\"let record\\\">\\n        <mat-checkbox (mousedown)=\\\"$event.shiftKey ? $event.preventDefault() : null\\\"\\n                      (click)=\\\"$event.shiftKey ? onShiftToggleRow(!rowIsSelected(record), record, $event) : $event.stopPropagation()\\\"\\n                      (change)=\\\"onToggleRow($event.checked, record)\\\"\\n                      [checked]=\\\"rowIsSelected(record)\\\">\\n        </mat-checkbox>\\n      </td>\\n    </ng-container>\\n\\n    <ng-container [matColumnDef]=\\\"column.name\\\" *ngFor=\\\"let column of template.columns\\\">\\n      <ng-container *ngIf=\\\"columnIsSortable(column)\\\">\\n        <th mat-header-cell *matHeaderCellDef mat-sort-header>\\n          {{column.title}}\\n        </th>\\n      </ng-container>\\n\\n      <ng-container *ngIf=\\\"!columnIsSortable(column)\\\">\\n        <th mat-header-cell *matHeaderCellDef>\\n          {{column.title}}\\n        </th>\\n      </ng-container>\\n\\n      <ng-container *ngIf=\\\"getColumnRenderer(column) as columnRenderer\\\">\\n        <ng-container *ngIf=\\\"columnRenderer === entityTableColumnRenderer.Default\\\">\\n            <td mat-cell *matCellDef=\\\"let record\\\" class=\\\"mat-cell-text\\\"\\n              [ngClass]=\\\"getCellClass(record, column)\\\">\\n              {{getValue(record, column)}}\\n            </td>\\n          </ng-container>\\n          <ng-container *ngIf=\\\"columnRenderer === entityTableColumnRenderer.HTML\\\">\\n            <td mat-cell *matCellDef=\\\"let record\\\" class=\\\"mat-cell-text\\\"\\n              [ngClass]=\\\"getCellClass(record, column)\\\"\\n              [innerHTML]=\\\"getValue(record, column)\\\">\\n            </td>\\n          </ng-container>\\n          <ng-container *ngIf=\\\"columnRenderer === entityTableColumnRenderer.UnsanitizedHTML\\\">\\n              <td mat-cell *matCellDef=\\\"let record\\\" class=\\\"mat-cell-text\\\"\\n                [ngClass]=\\\"getCellClass(record, column)\\\"\\n                [innerHTML]=\\\"getValue(record, column) | sanitizeHtml\\\">\\n              </td>\\n            </ng-container>\\n          <ng-container *ngIf=\\\"columnRenderer === entityTableColumnRenderer.Icon\\\">\\n            <td mat-cell *matCellDef=\\\"let record\\\" class=\\\"mat-cell-text\\\"\\n              [ngClass]=\\\"getCellClass(record, column)\\\">\\n              <mat-icon svgIcon=\\\"{{getValue(record, column)}}\\\"></mat-icon>\\n            </td>\\n          </ng-container>\\n          <ng-container *ngIf=\\\"columnRenderer === entityTableColumnRenderer.ButtonGroup\\\">\\n            <td mat-cell *matCellDef=\\\"let record\\\" class=\\\"mat-cell-text\\\"\\n              [ngClass]=\\\"getCellClass(record, column)\\\">\\n              <span *ngFor=\\\"let button of getValue(record, column)\\\">\\n                <button *ngIf=\\\"button.style === 'mat-icon-button'\\\"\\n                  igoStopPropagation\\n                  mat-icon-button\\n                  [color]=\\\"button.color\\\"\\n                  (click)=\\\"onButtonClick(button.click, record)\\\">\\n                  <mat-icon svgIcon=\\\"{{button.icon}}\\\"></mat-icon>\\n                </button>\\n                <button *ngIf=\\\"button.style !== 'mat-icon-button'\\\"\\n                  igoStopPropagation\\n                  mat-mini-fab\\n                  [color]=\\\"button.color\\\"\\n                  (click)=\\\"onButtonClick(button.click, record)\\\">\\n                  <mat-icon svgIcon=\\\"{{button.icon}}\\\"></mat-icon>\\n                </button>\\n              </span>\\n            </td>\\n          </ng-container>\\n      </ng-container>\\n    </ng-container>\\n\\n    <tr\\n      mat-header-row\\n      *matHeaderRowDef=\\\"headers; sticky: fixedHeader;\\\"\\n      [ngClass]=\\\"getHeaderClass()\\\">\\n    </tr>\\n    <tr\\n      mat-row\\n      igoEntityTableRow\\n      *matRowDef=\\\"let record; columns: headers;\\\"\\n      [scrollBehavior]=\\\"scrollBehavior\\\"\\n      [ngClass]=\\\"getRowClass(record)\\\"\\n      [selection]=\\\"selection\\\"\\n      [selected]=\\\"rowIsSelected(record)\\\"\\n      (select)=\\\"onRowSelect(record)\\\"\\n      (click)=\\\"onRowClick(record)\\\">\\n    </tr>\\n  </table>\\n  <igo-entity-table-paginator *ngIf=\\\"withPaginator\\\"\\n    [store]=\\\"store\\\"\\n    [paginatorOptions]=\\\"paginatorOptions\\\"\\n    [entitySortChange$]=\\\"entitySortChange$\\\"\\n    (paginatorChange)=\\\"paginatorChange($event)\\\">\\n  </igo-entity-table-paginator>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block;height:100%;width:100%}:host.table-compact ::ng-deep .mat-checkbox .mat-checkbox-ripple,:host.table-compact tr.mat-header-row{height:36px}:host.table-compact ::ng-deep .mat-checkbox .mat-checkbox-ripple,:host.table-compact tr.mat-row{height:28px}.table-container{display:flex;flex:1 1 auto;flex-direction:column;height:100%;overflow:auto}.mat-cell-text{overflow:hidden;word-wrap:break-word}td.mat-cell,td.mat-footer-cell,th.mat-header-cell{padding:0 3px}entity-table table.igo-entity-table-with-selection tr:hover{-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd;cursor:pointer}table button{margin:7px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { scrollBehavior: [{\n            type: Input\n        }], sortNullsFirst: [{\n            type: Input\n        }], withPaginator: [{\n            type: Input\n        }], entityClick: [{\n            type: Output\n        }], entitySelectChange: [{\n            type: Output\n        }], entitySortChange: [{\n            type: Output\n        }], paginator: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], template: [{\n            type: Input\n        }], paginatorOptions: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(EntityTablePaginatorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-entity-table-paginator',\n                template: \"<mat-paginator \\n  [disabled]=\\\"disabled\\\"\\n  [hidePageSize]=\\\"hidePageSize\\\"\\n  [length]=\\\"length\\\"\\n  [pageIndex]=\\\"pageIndex\\\"\\n  [pageSize]=\\\"pageSize\\\"\\n  [pageSizeOptions]=\\\"pageSizeOptions\\\"\\n  [showFirstLastButtons]=\\\"showFirstLastButtons\\\"\\n  (page)=\\\"emitPaginator()\\\">\\n</mat-paginator>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{margin-top:-10px;padding-right:15px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){:host{margin-top:0;padding-right:5px}}\"]\n            }]\n    }], function () { return [{ type: ɵngcc10.LanguageService }, { type: ɵngcc10.MediaService }]; }, { entitySortChange$: [{\n            type: Input\n        }], paginatorChange: [{\n            type: Output\n        }], store: [{\n            type: Input\n        }], paginatorOptions: [{\n            type: Input\n        }], page: [{\n            type: Output\n        }], paginator: [{\n            type: ViewChild,\n            args: [MatPaginator, { static: true }]\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ActionbarComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-actionbar',\n                template: \"<mat-list *ngIf=\\\"mode === actionbarMode.Dock\\\">\\n\\n    <div *ngIf=\\\"heightCondition && positionConditionTop && isDesktop\\\"\\n      id=\\\"topChevron\\\">\\n      <button\\n        mat-icon-button\\n        tooltip-position=\\\"below\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        [matTooltip]=\\\"'igo.common.actionbar.scrollUp' | translate\\\"\\n        (click)=\\\"scrollUp()\\\">\\n        <mat-icon svgIcon=\\\"chevron-up\\\"></mat-icon>\\n      </button>\\n    </div>\\n\\n    <igo-actionbar-item\\n      *ngIf=\\\"withToggleButton\\\"\\n      color=\\\"accent\\\"\\n      [withTitle]=\\\"false\\\"\\n      [withIcon]=\\\"true\\\"\\n      [color]=\\\"color\\\"\\n      [disabled]=\\\"store.view.empty\\\"\\n      [action]=\\\"toggleCollapseAction\\\"\\n      (trigger)=\\\"onTriggerAction(toggleCollapseAction)\\\">\\n    </igo-actionbar-item>\\n\\n    <ng-template #buttonContent *ngIf=\\\"!collapsed\\\" ngFor let-action [ngForOf]=\\\"store.view.all$() | async\\\">\\n      <igo-actionbar-item\\n        color=\\\"accent\\\"\\n        [withTitle]=\\\"withTitle\\\"\\n        [withIcon]=\\\"withIcon\\\"\\n        [withTooltip]=\\\"withTooltip\\\"\\n        [color]=\\\"color\\\"\\n        [disabled]=\\\"store.state.get(action).disabled\\\"\\n        [action]=\\\"action\\\"\\n        (trigger)=\\\"onTriggerAction(action)\\\">\\n      </igo-actionbar-item>\\n    </ng-template>\\n\\n    <div *ngIf=\\\"heightCondition && positionConditionLow && isDesktop\\\"\\n      id=\\\"lowChevron\\\">\\n      <button\\n        mat-icon-button\\n        tooltip-position=\\\"below\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        [matTooltip]=\\\"'igo.common.actionbar.scrollDown' | translate\\\"\\n        (click)=\\\"scrollDown()\\\">\\n        <mat-icon svgIcon=\\\"chevron-down\\\"></mat-icon>\\n      </button>\\n    </div>\\n\\n</mat-list>\\n\\n<div *ngIf=\\\"mode === actionbarMode.Overlay\\\">\\n  <button class=\\\"buttonOverlay\\\"\\n    mat-icon-button\\n    [matMenuTriggerFor]=\\\"actionbarMenu\\\"\\n    [disabled]=\\\"store.view.empty\\\"\\n    [color]=\\\"iconColor\\\">\\n    <mat-icon [svgIcon]=\\\"icon\\\"></mat-icon>\\n  </button>\\n\\n  <mat-menu\\n    #actionbarMenu=\\\"matMenu\\\"\\n    class=\\\"igo-compact-menu igo-no-min-width-menu\\\"\\n    overlapTrigger=\\\"true\\\"\\n    [xPosition]=\\\"xPosition\\\"\\n    [yPosition]=\\\"yPosition\\\"\\n    [class]=\\\"overlayClass\\\">\\n\\n    <mat-list>\\n      <ng-template ngFor let-action [ngForOf]=\\\"store.view.all$() | async\\\">\\n        <igo-actionbar-item\\n          color=\\\"accent\\\"\\n          [withTitle]=\\\"withTitle\\\"\\n          [withIcon]=\\\"withIcon\\\"\\n          [color]=\\\"color\\\"\\n          [action]=\\\"action\\\"\\n          (trigger)=\\\"onTriggerAction(action)\\\">\\n        </igo-actionbar-item>\\n      </ng-template>\\n    </mat-list>\\n  </mat-menu>\\n</div>\\n<mat-card *ngIf=\\\"mode === actionbarMode.Context\\\" class=\\\"context-menu-card mat-elevation-z4\\\">\\n  <mat-list>\\n      <ng-template ngFor let-action [ngForOf]=\\\"store.view.all$() | async\\\">\\n          <igo-actionbar-item\\n            color=\\\"accent\\\"\\n            [withTitle]=\\\"withTitle\\\"\\n            [withIcon]=\\\"withIcon\\\"\\n            [color]=\\\"color\\\"\\n            [action]=\\\"action\\\"\\n            (trigger)=\\\"onTriggerAction(action)\\\">\\n          </igo-actionbar-item>\\n        <br/>\\n      </ng-template>\\n  </mat-list>\\n</mat-card>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block;height:100%;overflow:auto;position:relative}button{margin:4px}.buttonOverlay{margin:0}mat-list{padding-top:0}:host.horizontal{max-width:100%;overflow:unset}:host.horizontal mat-list{white-space:nowrap;width:auto}:host.horizontal igo-actionbar-item{display:inline-block}:host ::ng-deep .mat-list .mat-list-item .mat-list-text>*{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;line-height:18px;max-height:36px;overflow:hidden;text-overflow:ellipsis;white-space:normal}:host ::ng-deep .mat-list-base .mat-list-item.mat-list-item-with-avatar{height:46px}:host ::ng-deep .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content{display:-webkit-flex;height:46px;padding:3px}:host ::ng-deep .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content>mat-icon{padding:8px}igo-actionbar-item ::ng-deep mat-list-item [mat-list-avatar]{height:auto;width:40px}igo-actionbar-item ::ng-deep mat-list-item:hover{cursor:pointer}.context-menu-card{margin:10px;padding:8px 3px}#lowChevron,#topChevron{background-color:#fff;position:fixed;z-index:3}#lowChevron{bottom:0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc12.Overlay }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc10.MediaService }]; }, { mode: [{\n            type: Input\n        }], withToggleButton: [{\n            type: Input\n        }], horizontal: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], iconColor: [{\n            type: Input\n        }], withTitle: [{\n            type: Input\n        }], withTooltip: [{\n            type: Input\n        }], scrollActive: [{\n            type: Input\n        }], withIcon: [{\n            type: Input\n        }], icon: [{\n            type: Input\n        }], xPosition: [{\n            type: Input\n        }], yPosition: [{\n            type: Input\n        }], overlayClass: [{\n            type: Input\n        }], withTitleClass: [{\n            type: HostBinding,\n            args: ['class.with-title']\n        }], withIconClass: [{\n            type: HostBinding,\n            args: ['class.with-icon']\n        }], horizontalClass: [{\n            type: HostBinding,\n            args: ['class.horizontal']\n        }], store: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ActionbarItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-actionbar-item',\n                template: \"<mat-list-item *ngIf=\\\"!action.checkbox\\\"\\n  matTooltipClass=\\\"actionbarItemTooltip\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"withTooltip ? ((tooltip$ | async) || title | translate) : ''\\\"\\n  [ngClass]=\\\"ngClass$ | async\\\"\\n  (click)=\\\"onClick()\\\">\\n  <button *ngIf=\\\"withIcon\\\"\\n    mat-list-avatar\\n    mat-icon-button\\n    [color]=\\\"color\\\"\\n    [disabled]=\\\"disabled$ | async\\\">\\n    <mat-icon *ngIf=\\\"withIcon\\\" svgIcon=\\\"{{icon$ | async}}\\\"></mat-icon>\\n  </button>\\n  <h4 *ngIf=\\\"withTitle\\\" matLine>{{title | translate}}</h4>\\n</mat-list-item>\\n\\n<mat-list-item class=\\\"item-checkbox\\\" *ngIf=\\\"action.checkbox\\\"\\n  matTooltipClass=\\\"actionbarItemTooltip\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"withTooltip ? ((tooltip$ | async) || title | translate) : ''\\\"\\n  [ngClass]=\\\"ngClass$ | async\\\">\\n  <mat-checkbox *ngIf=\\\"withTitle\\\"\\n      (change)=\\\"action.handler()\\\"\\n      [checked]=\\\"checkCondition$ | async\\\">\\n      {{title | translate}}\\n  </mat-checkbox>\\n</mat-list-item>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"mat-list-item.igo-actionbar-item-disabled{color:rgba(0,0,0,.26);cursor:default!important}mat-list-item.igo-actionbar-item-no-display{display:none}mat-checkbox{padding:12px}.item-checkbox{height:56px}.item-checkbox ::ng-deep .mat-checkbox-label{margin-left:20px}\"]\n            }]\n    }], function () { return []; }, { color: [{\n            type: Input\n        }], withTitle: [{\n            type: Input\n        }], withIcon: [{\n            type: Input\n        }], withTooltip: [{\n            type: Input\n        }], trigger: [{\n            type: Output\n        }], disabled: [{\n            type: Input\n        }], noDisplay: [{\n            type: Input\n        }], action: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoActionbarModule, { declarations: function () { return [ActionbarComponent, ActionbarItemComponent]; }, imports: function () { return [CommonModule,\n        IgoLanguageModule,\n        MatButtonModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatMenuModule,\n        MatListModule,\n        MatCardModule,\n        MatCheckboxModule]; }, exports: function () { return [ActionbarComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoActionbarModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoLanguageModule,\n                    MatButtonModule,\n                    MatIconModule,\n                    MatTooltipModule,\n                    MatMenuModule,\n                    MatListModule,\n                    MatCardModule,\n                    MatCheckboxModule\n                ],\n                exports: [ActionbarComponent],\n                declarations: [ActionbarComponent, ActionbarItemComponent]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoActionModule, { imports: function () { return [CommonModule, IgoActionbarModule]; }, exports: function () { return [IgoActionbarModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoActionModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoActionbarModule\n                ],\n                exports: [\n                    IgoActionbarModule\n                ],\n                declarations: [],\n                providers: []\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(BackdropComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-backdrop',\n                template: \"<div [ngClass]=\\\"{'igo-backdrop-shown': shown}\\\"></div>\\n\",\n                styles: [\":host>div{background-color:hsla(0,0%,39.2%,.5);bottom:0;display:none;left:0;position:absolute;right:0;top:0;z-index:2}:host>div.igo-backdrop-shown{display:block}\"]\n            }]\n    }], function () { return []; }, { shown: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoBackdropModule, { declarations: function () { return [BackdropComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [BackdropComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoBackdropModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule],\n                declarations: [BackdropComponent],\n                exports: [BackdropComponent]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoBadgeIconDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoMatBadgeIcon]'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc8.MatIconRegistry }]; }, { igoMatBadgeIcon: [{\n            type: Input\n        }], matBadgeHidden: [{\n            type: Input\n        }], matBadgeDisabled: [{\n            type: Input\n        }], igoMatBadgeInverseColor: [{\n            type: Input\n        }], igoMatBadgeInheritColor: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoMatBadgeIconModule, { declarations: function () { return [IgoBadgeIconDirective]; }, imports: function () { return [MatBadgeModule, MatIconModule]; }, exports: function () { return [MatBadgeModule, IgoBadgeIconDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoMatBadgeIconModule, [{\n        type: NgModule,\n        args: [{\n                imports: [MatBadgeModule, MatIconModule],\n                declarations: [IgoBadgeIconDirective],\n                exports: [MatBadgeModule, IgoBadgeIconDirective]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ClickoutDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoClickout]'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { clickout: [{\n            type: Output\n        }], handleMouseClick: [{\n            type: HostListener,\n            args: ['document:click', ['$event', '$event.target']]\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoClickoutModule, { declarations: [ClickoutDirective], exports: [ClickoutDirective] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoClickoutModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [ClickoutDirective],\n                exports: [ClickoutDirective]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ClonePipe, [{\n        type: Pipe,\n        args: [{\n                name: 'clone'\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoCloneModule, { declarations: [ClonePipe], exports: [ClonePipe] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoCloneModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [ClonePipe],\n                exports: [ClonePipe]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CollapseDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoCollapse]'\n            }]\n    }], function () { return [{ type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }]; }, { toggle: [{\n            type: Output\n        }], target: [{\n            type: Input\n        }], collapsed: [{\n            type: Input\n        }], click: [{\n            type: HostListener,\n            args: ['click']\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CollapsibleComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-collapsible',\n                template: \"<mat-list-item>\\n  <mat-icon\\n    svgIcon=\\\"chevron-up\\\" \\n    class=\\\"igo-chevron\\\"\\n    mat-list-avatar\\n    igoCollapse\\n    [target]=\\\"content\\\"\\n    [collapsed]=\\\"collapsed\\\"\\n    (toggle)=\\\"collapsed = $event\\\">\\n  </mat-icon>\\n  <h4 matLine>{{title}}</h4>\\n</mat-list-item>\\n\\n<div #content>\\n  <ng-content></ng-content>\\n</div>\\n\",\n                styles: [\":host ::ng-deep .mat-list .mat-list-item.mat-list-avatar{height:auto;padding:0;width:auto}mat-list-item{overflow:hidden}\"]\n            }]\n    }], function () { return []; }, { toggle: [{\n            type: Output\n        }], title: [{\n            type: Input\n        }], collapsed: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoCollapsibleModule, { declarations: function () { return [CollapsibleComponent, CollapseDirective]; }, imports: function () { return [MatIconModule, MatListModule]; }, exports: function () { return [CollapsibleComponent, CollapseDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoCollapsibleModule, [{\n        type: NgModule,\n        args: [{\n                imports: [MatIconModule, MatListModule],\n                declarations: [CollapsibleComponent, CollapseDirective],\n                exports: [CollapsibleComponent, CollapseDirective]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ConfirmDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-confirm-dialog',\n                template: \"<h2 mat-dialog-title class=\\\"mat-typography\\\">{{'igo.common.confirmDialog.title' |\\u00A0translate}}</h2>\\n<div mat-dialog-content class=\\\"mat-typography\\\">{{confirmMessage}}</div>\\n<div mat-dialog-actions>\\n  <button mat-button color=\\\"primary\\\" (click)=\\\"dialogRef.close(true)\\\">{{'igo.common.confirmDialog.confirmBtn' | translate}}</button>\\n  <button mat-button (click)=\\\"dialogRef.close(false)\\\">{{'igo.common.confirmDialog.cancelBtn' |\\u00A0translate}}</button>\\n</div>\\n\",\n                styles: [\"h2{margin:5px 0 10px}div[mat-dialog-content]{max-width:200px}div[mat-dialog-actions]{margin:10px 0 0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc18.MatDialogRef }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ConfirmDialogService, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc18.MatDialog }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoConfirmDialogModule, { declarations: function () { return [ConfirmDialogComponent]; }, imports: function () { return [MatButtonModule, MatDialogModule, IgoLanguageModule]; }, exports: function () { return [ConfirmDialogComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoConfirmDialogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [MatButtonModule, MatDialogModule, IgoLanguageModule],\n                declarations: [ConfirmDialogComponent],\n                exports: [ConfirmDialogComponent],\n                providers: [ConfirmDialogService]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextMenuDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoContextMenu]'\n            }]\n    }], function () { return [{ type: ɵngcc12.Overlay }, { type: ɵngcc0.ViewContainerRef }, { type: ɵngcc0.ElementRef }]; }, { menuPosition: [{\n            type: Output\n        }], onContextMenu: [{\n            type: HostListener,\n            args: ['contextmenu', ['$event']]\n        }], menuContext: [{\n            type: Input,\n            args: ['igoContextMenu']\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoContextMenuModule, { declarations: [ContextMenuDirective], exports: [ContextMenuDirective] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoContextMenuModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [ContextMenuDirective],\n                exports: [ContextMenuDirective]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CustomHtmlComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-custom-html',\n                template: \"<div class=\\\"custom-html\\\" [innerHTML]=\\\"html | sanitizeHtml\\\"></div>\\n\",\n                styles: [\".custom-html{padding:20px}\"]\n            }]\n    }], function () { return []; }, { html: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SanitizeHtmlPipe, [{\n        type: Pipe,\n        args: [{ name: 'sanitizeHtml' }]\n    }], function () { return [{ type: ɵngcc19.DomSanitizer }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoCustomHtmlModule, { declarations: function () { return [SanitizeHtmlPipe, CustomHtmlComponent]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatInputModule,\n        MatButtonModule,\n        IgoLanguageModule]; }, exports: function () { return [SanitizeHtmlPipe, CustomHtmlComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoCustomHtmlModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatTooltipModule,\n                    MatInputModule,\n                    MatButtonModule,\n                    IgoLanguageModule\n                ],\n                exports: [SanitizeHtmlPipe, CustomHtmlComponent],\n                declarations: [SanitizeHtmlPipe, CustomHtmlComponent]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DragAndDropDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoDragAndDrop]'\n            }]\n    }], function () { return []; }, { allowedExtensions: [{\n            type: Input\n        }], filesDropped: [{\n            type: Output\n        }], filesInvalid: [{\n            type: Output\n        }], background: [{\n            type: HostBinding,\n            args: ['style.background']\n        }], onDragOver: [{\n            type: HostListener,\n            args: ['dragover', ['$event']]\n        }], onDragLeave: [{\n            type: HostListener,\n            args: ['dragleave', ['$event']]\n        }], onDrop: [{\n            type: HostListener,\n            args: ['drop', ['$event']]\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoDrapDropModule, { declarations: [DragAndDropDirective], exports: [DragAndDropDirective] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoDrapDropModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [DragAndDropDirective],\n                exports: [DragAndDropDirective]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DynamicComponentService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc0.ComponentFactoryResolver }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DynamicOutletComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-dynamic-outlet',\n                template: \"<ng-template #target></ng-template>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block;height:100%;width:100%}\"]\n            }]\n    }], function () { return [{ type: DynamicComponentService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { inputs: [{\n            type: Input\n        }], subscribers: [{\n            type: Input\n        }], component: [{\n            type: Input\n        }], target: [{\n            type: ViewChild,\n            args: ['target', { read: ViewContainerRef, static: true }]\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoDynamicOutletModule, { declarations: function () { return [DynamicOutletComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [DynamicOutletComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoDynamicOutletModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    DynamicOutletComponent\n                ],\n                declarations: [\n                    DynamicOutletComponent\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoDynamicComponentModule, { imports: function () { return [CommonModule, IgoDynamicOutletModule]; }, exports: function () { return [IgoDynamicOutletModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoDynamicComponentModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoDynamicOutletModule\n                ],\n                exports: [\n                    IgoDynamicOutletModule\n                ],\n                providers: [\n                    DynamicComponentService\n                ]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FlexibleComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-flexible',\n                template: \"<div #flexibleMain class=\\\"igo-flexible-main {{state}} {{direction}}\\\">\\n  <div class=\\\"igo-container\\\">\\n    <ng-content></ng-content>\\n  </div>\\n</div>\\n<div class=\\\"igo-flexible-fill\\\">\\n  <div>\\n  \\t<div class=\\\"igo-container\\\">\\n      <ng-content select=\\\"[igoFlexibleFill]\\\"></ng-content>\\n    </div>\\n  </div>\\n</div>\\n\",\n                styles: [\":host{display:flex;height:100%;width:100%}:host.column{flex-direction:column}:host.row{flex-direction:row}.igo-flexible-main{flex:0 0 auto;overflow:hidden}.igo-flexible-main.column{transition:height .25s ease-in}.igo-flexible-main.row{transition:width .25s ease-in}.igo-flexible-fill>div{bottom:0;left:0;position:absolute;right:0;top:0}.igo-container{height:100%;margin:0 5px;overflow:hidden;padding:5px 0;position:relative;width:calc(100% - 10px)}::ng-deep .igo-flexible-fill{flex:1 1 auto;overflow:hidden;position:relative}::ng-deep .igo-content{height:100%;overflow:auto;width:100%}::ng-deep igo-panel{height:100%}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc10.MediaService }]; }, { initial: [{\n            type: Input\n        }], collapsed: [{\n            type: Input\n        }], expanded: [{\n            type: Input\n        }], initialMobile: [{\n            type: Input\n        }], collapsedMobile: [{\n            type: Input\n        }], expandedMobile: [{\n            type: Input\n        }], direction: [{\n            type: Input\n        }], state: [{\n            type: Input\n        }], main: [{\n            type: ViewChild,\n            args: ['flexibleMain', { static: true }]\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoFlexibleModule, { declarations: [FlexibleComponent], exports: [FlexibleComponent] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoFlexibleModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [FlexibleComponent],\n                exports: [FlexibleComponent]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form',\n                template: \"\\n<form\\n  [autocomplete]=\\\"autocomplete\\\"\\n  [formGroup]=\\\"form.control\\\"\\n  (ngSubmit)=\\\"onSubmit()\\\">\\n  <div class=\\\"igo-form-body\\\" [ngClass]=\\\"{'igo-form-body-with-buttons': hasButtons}\\\">\\n    <div class=\\\"igo-form-content\\\">\\n      <ng-content></ng-content>\\n    </div>\\n    <div #buttons class=\\\"igo-form-buttons\\\">\\n      <ng-content select=\\\"[formButtons]\\\"></ng-content>\\n    </div>\\n  </div>\\n</form>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block}form{width:100%}.igo-form-body,.igo-form-content,form{height:100%}.igo-form-body-with-buttons .igo-form-content{height:calc(100% - 56px)}.igo-form-content{display:flex}\"]\n            }]\n    }], function () { return []; }, { autocomplete: [{\n            type: Input\n        }], submitForm: [{\n            type: Output\n        }], form: [{\n            type: Input\n        }], formData: [{\n            type: Input\n        }], buttons: [{\n            type: ViewChild,\n            args: ['buttons', { static: true }]\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoFormFormModule, { declarations: function () { return [FormComponent]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        ReactiveFormsModule]; }, exports: function () { return [FormComponent, FormsModule,\n        ReactiveFormsModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoFormFormModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule\n                ],\n                exports: [\n                    FormComponent,\n                    FormsModule,\n                    ReactiveFormsModule\n                ],\n                declarations: [\n                    FormComponent\n                ]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormFieldService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc20.FormBuilder }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormFieldComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-field',\n                template: \"\\n\\n<ng-container *ngIf=\\\"field !== undefined\\\">\\n  <igo-dynamic-outlet\\n    [component]=\\\"getFieldComponent()\\\"\\n    [inputs]=\\\"getFieldInputs()\\\"\\n    [subscribers]=\\\"getFieldSubscribers()\\\">\\n  </igo-dynamic-outlet>\\n</ng-container>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"::ng-deep mat-form-field{width:100%}::ng-deep .igo-form-disable-switch{margin-right:8px}\"]\n            }]\n    }], function () { return [{ type: FormFieldService }]; }, { field: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormFieldSelectComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-field-select',\n                template: \"<mat-form-field>\\n  <mat-select\\n    [required]=\\\"required\\\"\\n    [placeholder]=\\\"placeholder\\\"\\n    [formControl]=\\\"formControl\\\">\\n    <mat-option *ngFor=\\\"let choice of choices$ | async\\\" [value]=\\\"choice.value\\\">\\n      {{choice.title}}\\n    </mat-option>\\n  </mat-select>\\n  <mat-icon\\n    *ngIf=\\\"disableSwitch === true\\\"\\n    class=\\\"igo-form-disable-switch\\\"\\n    [svgIcon]=\\\"(disabled$ | async) === true ? 'checkbox-blank-outline' : 'checkbox-marked-outline'\\\"\\n    (click)=\\\"onDisableSwitchClick()\\\"\\n    matPrefix>\\n  </mat-icon>\\n  <mat-error *ngIf=\\\"formControl.errors\\\">{{getErrorMessage() | translate}}</mat-error>\\n</mat-form-field>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { disableSwitch: [{\n            type: Input\n        }], choices: [{\n            type: Input\n        }], formControl: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], errors: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormFieldTextComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-field-text',\n                template: \"<mat-form-field>\\n  <input\\n    matInput\\n    [required]=\\\"required\\\"\\n    [placeholder]=\\\"placeholder\\\"\\n    [formControl]=\\\"formControl\\\">\\n  <mat-icon\\n    *ngIf=\\\"disableSwitch === true\\\"\\n    class=\\\"igo-form-disable-switch\\\"\\n    [svgIcon]=\\\"(disabled$ | async) === true ? 'checkbox-blank-outline' : 'checkbox-marked-outline'\\\"\\n    (click)=\\\"onDisableSwitchClick()\\\"\\n    matPrefix>\\n  </mat-icon>\\n  <mat-error *ngIf=\\\"formControl.errors\\\">{{getErrorMessage() | translate}}</mat-error>\\n</mat-form-field>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { disableSwitch: [{\n            type: Input\n        }], formControl: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], errors: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormFieldTextareaComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-field-textarea',\n                template: \"<mat-form-field>\\n  <textarea\\n    matInput\\n    [required]=\\\"required\\\"\\n    [placeholder]=\\\"placeholder\\\"\\n    [formControl]=\\\"formControl\\\">\\n  </textarea>\\n  <mat-icon\\n    *ngIf=\\\"disableSwitch === true\\\"\\n    class=\\\"igo-form-disable-switch\\\"\\n    [svgIcon]=\\\"(disabled$ | async) === true ? 'checkbox-blank-outline' : 'checkbox-marked-outline'\\\"\\n    (click)=\\\"onDisableSwitchClick()\\\"\\n    matPrefix>\\n  </mat-icon>\\n  <mat-error *ngIf=\\\"formControl.errors\\\">{{getErrorMessage() | translate}}</mat-error>\\n</mat-form-field>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { disableSwitch: [{\n            type: Input\n        }], formControl: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], errors: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoFormFieldModule {\n}\nIgoFormFieldModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoFormFieldModule });\nIgoFormFieldModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoFormFieldModule_Factory(t) { return new (t || IgoFormFieldModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatSelectModule,\n            IgoLanguageModule,\n            IgoDynamicOutletModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoFormFieldModule, { declarations: function () { return [FormFieldComponent, FormFieldSelectComponent, FormFieldTextComponent, FormFieldTextareaComponent]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatSelectModule,\n        IgoLanguageModule, IgoDynamicOutletModule]; }, exports: function () { return [FormFieldComponent, FormFieldSelectComponent, FormFieldTextComponent, FormFieldTextareaComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoFormFieldModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatSelectModule,\n                    IgoLanguageModule,\n                    IgoDynamicOutletModule\n                ],\n                exports: [\n                    FormFieldComponent,\n                    FormFieldSelectComponent,\n                    FormFieldTextComponent,\n                    FormFieldTextareaComponent\n                ],\n                declarations: [\n                    FormFieldComponent,\n                    FormFieldSelectComponent,\n                    FormFieldTextComponent,\n                    FormFieldTextareaComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * A configurable form, optionnally bound to an entity\n * (for example in case of un update). Submitting that form\n * emits an event with the form data but no other operation is performed.\n */\nclass FormGroupComponent {\n    constructor() { }\n    /**\n     * Form group control\n     */\n    get formControl() { return this.group.control; }\n    /**\n     * Return the number of columns a field should occupy.\n     * The maximum allowed is 2, even if the field config says more.\n     * @param field Field\n     * @returns Number of columns\n     * @internal\n     */\n    getFieldColSpan(field) {\n        let colSpan = 2;\n        const options = field.options || {};\n        if (options.cols && options.cols > 0) {\n            colSpan = Math.min(options.cols, 2);\n        }\n        return colSpan;\n    }\n    /**\n     * Return the number of columns a field should occupy.\n     * The maximum allowed is 2, even if the field config says more.\n     * @param field Field\n     * @returns Number of columns\n     * @internal\n     */\n    getFieldNgClass(field) {\n        const colspan = this.getFieldColSpan(field);\n        return { [`igo-form-field-colspan-${colspan}`]: true };\n    }\n    /**\n     * Get error message\n     */\n    getErrorMessage() {\n        const options = this.group.options || {};\n        return getControlErrorMessage(this.formControl, options.errors || {});\n    }\n}\nFormGroupComponent.ɵfac = function FormGroupComponent_Factory(t) { return new (t || FormGroupComponent)(); };\nFormGroupComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FormGroupComponent, selectors: [[\"igo-form-group\"]], inputs: { group: \"group\", errors: \"errors\" }, ngContentSelectors: _c1, decls: 4, vars: 2, consts: [[\"class\", \"igo-form-group-fields\", 4, \"ngIf\"], [1, \"igo-form-group-extra-content\"], [4, \"ngIf\"], [1, \"igo-form-group-fields\"], [\"class\", \"igo-form-field-wrapper\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"igo-form-field-wrapper\", 3, \"ngClass\"], [3, \"field\"]], template: function FormGroupComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, FormGroupComponent_div_0_Template, 2, 1, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, FormGroupComponent_mat_error_3_Template, 3, 3, \"mat-error\", 2);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.group && ctx.group.fields.length > 0);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.formControl.errors);\n    } }, directives: [ɵngcc3.NgIf, ɵngcc3.NgForOf, ɵngcc3.NgClass, FormFieldComponent, ɵngcc1.MatError], pipes: [ɵngcc17.TranslatePipe], styles: [\"[_nghost-%COMP%]{display:block;height:100%;overflow:auto;padding:10px 5px;width:100%}.igo-form-field-wrapper[_ngcontent-%COMP%]{display:inline-block;padding:0 5px}.igo-form-field-colspan-2[_ngcontent-%COMP%]{width:100%}.igo-form-field-colspan-1[_ngcontent-%COMP%]{width:50%}\"], changeDetection: 0 });\nFormGroupComponent.ctorParameters = () => [];\nFormGroupComponent.propDecorators = {\n    group: [{ type: Input }],\n    errors: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormGroupComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-form-group',\n                template: \"<div\\n  *ngIf=\\\"group && group.fields.length > 0\\\"\\n  class=\\\"igo-form-group-fields\\\">\\n  <div\\n    *ngFor=\\\"let field of group.fields\\\"\\n    class=\\\"igo-form-field-wrapper\\\"\\n    [ngClass]=\\\"getFieldNgClass(field)\\\">\\n    <igo-form-field [field]=\\\"field\\\"></igo-form-field>\\n  </div>\\n</div>\\n\\n<div class=\\\"igo-form-group-extra-content\\\">\\n  <ng-content></ng-content>\\n</div>\\n\\n<mat-error *ngIf=\\\"formControl.errors\\\">{{getErrorMessage() | translate}}</mat-error>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block;height:100%;overflow:auto;padding:10px 5px;width:100%}.igo-form-field-wrapper{display:inline-block;padding:0 5px}.igo-form-field-colspan-2{width:100%}.igo-form-field-colspan-1{width:50%}\"]\n            }]\n    }], function () { return []; }, { group: [{\n            type: Input\n        }], errors: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoFormGroupModule {\n}\nIgoFormGroupModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoFormGroupModule });\nIgoFormGroupModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoFormGroupModule_Factory(t) { return new (t || IgoFormGroupModule)(); }, imports: [[\n            CommonModule,\n            MatFormFieldModule,\n            IgoLanguageModule,\n            IgoFormFieldModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoFormGroupModule, { declarations: function () { return [FormGroupComponent]; }, imports: function () { return [CommonModule,\n        MatFormFieldModule,\n        IgoLanguageModule, IgoFormFieldModule]; }, exports: function () { return [FormGroupComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoFormGroupModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatFormFieldModule,\n                    IgoLanguageModule,\n                    IgoFormFieldModule\n                ],\n                exports: [\n                    FormGroupComponent\n                ],\n                declarations: [\n                    FormGroupComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * @ignore\n */\nclass IgoFormModule {\n}\nIgoFormModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoFormModule });\nIgoFormModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoFormModule_Factory(t) { return new (t || IgoFormModule)(); }, providers: [\n        FormService,\n        FormFieldService\n    ], imports: [[\n            CommonModule,\n            IgoFormGroupModule,\n            IgoFormFieldModule\n        ], IgoFormFormModule, IgoFormGroupModule, IgoFormFieldModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoFormModule, { imports: function () { return [CommonModule, IgoFormGroupModule, IgoFormFieldModule]; }, exports: function () { return [IgoFormFormModule, IgoFormGroupModule, IgoFormFieldModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoFormModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoFormGroupModule,\n                    IgoFormFieldModule\n                ],\n                exports: [\n                    IgoFormFormModule,\n                    IgoFormGroupModule,\n                    IgoFormFieldModule\n                ],\n                declarations: [],\n                providers: [\n                    FormService,\n                    FormFieldService\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * @ignore\n */\nclass IgoEntitySelectorModule {\n}\nIgoEntitySelectorModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoEntitySelectorModule });\nIgoEntitySelectorModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoEntitySelectorModule_Factory(t) { return new (t || IgoEntitySelectorModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            MatSelectModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoEntitySelectorModule, { declarations: function () { return [EntitySelectorComponent]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        MatSelectModule]; }, exports: function () { return [EntitySelectorComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoEntitySelectorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    MatSelectModule\n                ],\n                exports: [EntitySelectorComponent],\n                declarations: [EntitySelectorComponent]\n            }]\n    }], null, null); })();\n\nclass StopDropPropagationDirective {\n    onDrop(event) {\n        event.preventDefault();\n        event.stopPropagation();\n    }\n}\nStopDropPropagationDirective.ɵfac = function StopDropPropagationDirective_Factory(t) { return new (t || StopDropPropagationDirective)(); };\nStopDropPropagationDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: StopDropPropagationDirective, selectors: [[\"\", \"igoStopDropPropagation\", \"\"]], hostBindings: function StopDropPropagationDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"drop\", function StopDropPropagationDirective_drop_HostBindingHandler($event) { return ctx.onDrop($event); });\n    } } });\nStopDropPropagationDirective.propDecorators = {\n    onDrop: [{ type: HostListener, args: ['drop', ['$event'],] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StopDropPropagationDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoStopDropPropagation]'\n            }]\n    }], null, { onDrop: [{\n            type: HostListener,\n            args: ['drop', ['$event']]\n        }] }); })();\n\nclass StopPropagationDirective {\n    onClick(event) {\n        event.stopPropagation();\n    }\n}\nStopPropagationDirective.ɵfac = function StopPropagationDirective_Factory(t) { return new (t || StopPropagationDirective)(); };\nStopPropagationDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: StopPropagationDirective, selectors: [[\"\", \"igoStopPropagation\", \"\"]], hostBindings: function StopPropagationDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function StopPropagationDirective_click_HostBindingHandler($event) { return ctx.onClick($event); });\n    } } });\nStopPropagationDirective.propDecorators = {\n    onClick: [{ type: HostListener, args: ['click', ['$event'],] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StopPropagationDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoStopPropagation]'\n            }]\n    }], null, { onClick: [{\n            type: HostListener,\n            args: ['click', ['$event']]\n        }] }); })();\n\nclass IgoStopPropagationModule {\n    static forRoot() {\n        return {\n            ngModule: IgoStopPropagationModule,\n            providers: []\n        };\n    }\n}\nIgoStopPropagationModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoStopPropagationModule });\nIgoStopPropagationModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoStopPropagationModule_Factory(t) { return new (t || IgoStopPropagationModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoStopPropagationModule, { declarations: [StopDropPropagationDirective, StopPropagationDirective], exports: [StopDropPropagationDirective, StopPropagationDirective] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoStopPropagationModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [StopDropPropagationDirective, StopPropagationDirective],\n                exports: [StopDropPropagationDirective, StopPropagationDirective]\n            }]\n    }], null, null); })();\n\n/**\n * Directive that handles an entity table row click and selection.\n */\nclass EntityTableRowDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n        /**\n         * Whether a row supports selection\n         */\n        this.selection = false;\n        /**\n         * Whether clicking a row should select it (if selection is true)\n         */\n        this.selectOnClick = true;\n        /**\n         * Whether the selected row should be highlighted\n         */\n        this.highlightSelection = true;\n        this._selected = false;\n        /**\n         * Scroll behavior on selection\n         */\n        this.scrollBehavior = EntityTableScrollBehavior.Auto;\n        /**\n         * Event emitted when a row is selected\n         */\n        this.select = new EventEmitter();\n    }\n    /**\n     * Whether a row is selected\n     */\n    set selected(value) {\n        if (this.selection === false) {\n            return;\n        }\n        if (value === this._selected) {\n            return;\n        }\n        this.toggleSelected(value);\n        this.scroll();\n    }\n    get selected() {\n        return this._selected;\n    }\n    /**\n     * When a row is clicked, select it if it's supported\n     * @ignore\n     */\n    onClick() {\n        if (this.selection === false || this.selectOnClick === false) {\n            return;\n        }\n        this.toggleSelected(true);\n        this.select.emit(this);\n    }\n    /**\n     * Select a row and add or remove the selected class from it\n     * @param selected Whether the row should be selected\n     */\n    toggleSelected(selected) {\n        this._selected = selected;\n        if (selected === true) {\n            this.addCls(EntityTableRowDirective.selectedCls);\n            if (this.highlightSelection === true) {\n                this.addCls(EntityTableRowDirective.highlightedCls);\n            }\n        }\n        else {\n            this.removeCls(EntityTableRowDirective.selectedCls);\n            this.removeCls(EntityTableRowDirective.highlightedCls);\n        }\n    }\n    /**\n     * Scroll to the selected row\n     */\n    scroll() {\n        if (this._selected === true) {\n            scrollIntoView(this.el.nativeElement, {\n                scrollMode: 'if-needed',\n                block: 'center',\n                inline: 'center'\n            });\n        }\n    }\n    /**\n     * Add the selected CSS class\n     */\n    addCls(cls) {\n        this.renderer.addClass(this.el.nativeElement, cls);\n    }\n    /**\n     * Remove the selected CSS class\n     */\n    removeCls(cls) {\n        this.renderer.removeClass(this.el.nativeElement, cls);\n    }\n}\nEntityTableRowDirective.ɵfac = function EntityTableRowDirective_Factory(t) { return new (t || EntityTableRowDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nEntityTableRowDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: EntityTableRowDirective, selectors: [[\"\", \"igoEntityTableRow\", \"\"]], hostBindings: function EntityTableRowDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function EntityTableRowDirective_click_HostBindingHandler() { return ctx.onClick(); });\n    } }, inputs: { selection: \"selection\", selectOnClick: \"selectOnClick\", highlightSelection: \"highlightSelection\", scrollBehavior: \"scrollBehavior\", selected: \"selected\" }, outputs: { select: \"select\" } });\n/**\n * Class added to a selected row\n */\nEntityTableRowDirective.selectedCls = 'igo-entity-table-row-selected';\n/**\n * Class added to a highlighted row\n */\nEntityTableRowDirective.highlightedCls = 'igo-entity-table-row-highlighted';\nEntityTableRowDirective.ctorParameters = () => [\n    { type: Renderer2 },\n    { type: ElementRef }\n];\nEntityTableRowDirective.propDecorators = {\n    selection: [{ type: Input }],\n    selectOnClick: [{ type: Input }],\n    highlightSelection: [{ type: Input }],\n    selected: [{ type: Input }],\n    scrollBehavior: [{ type: Input }],\n    select: [{ type: Output }],\n    onClick: [{ type: HostListener, args: ['click',] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(EntityTableRowDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoEntityTableRow]'\n            }]\n    }], function () { return [{ type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }]; }, { selection: [{\n            type: Input\n        }], selectOnClick: [{\n            type: Input\n        }], highlightSelection: [{\n            type: Input\n        }], scrollBehavior: [{\n            type: Input\n        }], select: [{\n            type: Output\n        }], selected: [{\n            type: Input\n        }], onClick: [{\n            type: HostListener,\n            args: ['click']\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoEntityTablePaginatorModule {\n}\nIgoEntityTablePaginatorModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoEntityTablePaginatorModule });\nIgoEntityTablePaginatorModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoEntityTablePaginatorModule_Factory(t) { return new (t || IgoEntityTablePaginatorModule)(); }, imports: [[\n            MatPaginatorModule,\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoEntityTablePaginatorModule, { declarations: function () { return [EntityTablePaginatorComponent]; }, imports: function () { return [MatPaginatorModule]; }, exports: function () { return [EntityTablePaginatorComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoEntityTablePaginatorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    MatPaginatorModule,\n                ],\n                exports: [\n                    EntityTablePaginatorComponent\n                ],\n                declarations: [\n                    EntityTablePaginatorComponent,\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * @ignore\n */\nclass IgoEntityTableModule {\n}\nIgoEntityTableModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoEntityTableModule });\nIgoEntityTableModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoEntityTableModule_Factory(t) { return new (t || IgoEntityTableModule)(); }, imports: [[\n            CommonModule,\n            MatTableModule,\n            MatSortModule,\n            MatIconModule,\n            MatButtonModule,\n            MatCheckboxModule,\n            MatPaginatorModule,\n            IgoStopPropagationModule,\n            IgoCustomHtmlModule,\n            IgoEntityTablePaginatorModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoEntityTableModule, { declarations: function () { return [EntityTableComponent, EntityTableRowDirective]; }, imports: function () { return [CommonModule,\n        MatTableModule,\n        MatSortModule,\n        MatIconModule,\n        MatButtonModule,\n        MatCheckboxModule,\n        MatPaginatorModule, IgoStopPropagationModule, IgoCustomHtmlModule, IgoEntityTablePaginatorModule]; }, exports: function () { return [EntityTableComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoEntityTableModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatTableModule,\n                    MatSortModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatCheckboxModule,\n                    MatPaginatorModule,\n                    IgoStopPropagationModule,\n                    IgoCustomHtmlModule,\n                    IgoEntityTablePaginatorModule\n                ],\n                exports: [\n                    EntityTableComponent\n                ],\n                declarations: [\n                    EntityTableComponent,\n                    EntityTableRowDirective\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoEntityModule {\n}\nIgoEntityModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoEntityModule });\nIgoEntityModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoEntityModule_Factory(t) { return new (t || IgoEntityModule)(); }, imports: [[\n            CommonModule\n        ], IgoEntitySelectorModule, IgoEntityTableModule, IgoEntityTablePaginatorModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoEntityModule, { imports: function () { return [CommonModule]; }, exports: function () { return [IgoEntitySelectorModule, IgoEntityTableModule, IgoEntityTablePaginatorModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoEntityModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    IgoEntitySelectorModule,\n                    IgoEntityTableModule,\n                    IgoEntityTablePaginatorModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n\nclass SecureImagePipe {\n    constructor(http) {\n        this.http = http;\n    }\n    transform(url) {\n        return this.http\n            .get(url, {\n            headers: {\n                activityInterceptor: 'false'\n            },\n            responseType: 'blob'\n        })\n            .pipe(switchMap(blob => {\n            return new Observable(observer => {\n                const reader = new FileReader();\n                reader.readAsDataURL(blob);\n                reader.onloadend = () => {\n                    observer.next(reader.result);\n                };\n            });\n        }));\n    }\n}\nSecureImagePipe.ɵfac = function SecureImagePipe_Factory(t) { return new (t || SecureImagePipe)(ɵngcc0.ɵɵdirectiveInject(ɵngcc22.HttpClient)); };\nSecureImagePipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: \"secureImage\", type: SecureImagePipe, pure: true });\nSecureImagePipe.ctorParameters = () => [\n    { type: HttpClient }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SecureImagePipe, [{\n        type: Pipe,\n        args: [{\n                name: 'secureImage'\n            }]\n    }], function () { return [{ type: ɵngcc22.HttpClient }]; }, null); })();\n\nclass IgoImageModule {\n    static forRoot() {\n        return {\n            ngModule: IgoImageModule,\n            providers: []\n        };\n    }\n}\nIgoImageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoImageModule });\nIgoImageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoImageModule_Factory(t) { return new (t || IgoImageModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoImageModule, { declarations: [SecureImagePipe], exports: [SecureImagePipe] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoImageModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [SecureImagePipe],\n                exports: [SecureImagePipe]\n            }]\n    }], null, null); })();\n\nclass InteractiveTourLoader {\n    constructor(http, configService) {\n        this.http = http;\n        this.configService = configService;\n        this.jsonURL = this.getPathToConfigFile();\n    }\n    loadConfigTour() {\n        this.getJSON()\n            .subscribe((data) => {\n            this.allToursOptions = data;\n        }, (err) => {\n            throw new Error('Problem with Interactive tour configuration file: interactiveTour.json not find. Check if the file and is path is set correctly.');\n        });\n    }\n    getPathToConfigFile() {\n        return (this.configService.getConfig('interactiveTour.pathToConfigFile') ||\n            './config/interactiveTour.json');\n    }\n    getJSON() {\n        return this.http.get(this.jsonURL).pipe(catchError((e) => {\n            e.error.caught = true;\n            throw e;\n        }));\n    }\n    getTourOptionData(toolName) {\n        if (this.allToursOptions === undefined) {\n            return undefined;\n        }\n        let nameInConfigFile = toolName;\n        nameInConfigFile = nameInConfigFile.replace(/\\s/g, '');\n        return this.allToursOptions[nameInConfigFile];\n    }\n}\nInteractiveTourLoader.ɵfac = function InteractiveTourLoader_Factory(t) { return new (t || InteractiveTourLoader)(ɵngcc0.ɵɵinject(ɵngcc22.HttpClient), ɵngcc0.ɵɵinject(ɵngcc10.ConfigService)); };\nInteractiveTourLoader.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: InteractiveTourLoader, factory: InteractiveTourLoader.ɵfac });\nInteractiveTourLoader.ctorParameters = () => [\n    { type: HttpClient },\n    { type: ConfigService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(InteractiveTourLoader, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc22.HttpClient }, { type: ɵngcc10.ConfigService }]; }, null); })();\n\nclass InteractiveTourService {\n    constructor(configService, mediaService, languageService, interactiveTourLoader, shepherdService) {\n        this.configService = configService;\n        this.mediaService = mediaService;\n        this.languageService = languageService;\n        this.interactiveTourLoader = interactiveTourLoader;\n        this.shepherdService = shepherdService;\n        if (this.isAppHaveTour()) {\n            this.interactiveTourLoader.loadConfigTour();\n        }\n    }\n    isAppHaveTour() {\n        const haveTour = this.configService.getConfig('interactiveTour.activateInteractiveTour');\n        if (haveTour === undefined) {\n            return true;\n        }\n        else {\n            return haveTour;\n        }\n    }\n    isToolHaveTourConfig(toolName) {\n        const checkTourActiveOptions = this.interactiveTourLoader.getTourOptionData(toolName);\n        if (checkTourActiveOptions === undefined) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    disabledTourButton(toolName) {\n        const stepConfig = this.interactiveTourLoader.getTourOptionData(toolName);\n        if (stepConfig === null || stepConfig === void 0 ? void 0 : stepConfig.condition) {\n            if (document.querySelector(stepConfig.condition) === null) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isMobile() {\n        return this.mediaService.isMobile();\n    }\n    isTourDisplayInMobile() {\n        const showInMobile = this.configService.getConfig('interactiveTour.tourInMobile');\n        if (showInMobile === undefined) {\n            return true;\n        }\n        return this.configService.getConfig('interactiveTour.tourInMobile');\n    }\n    getButtons(buttonKind) {\n        if (buttonKind === 'noBackButton') {\n            return [\n                {\n                    classes: 'shepherd-button-primary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.nextButton'),\n                    type: 'next'\n                }\n            ];\n        }\n        if (buttonKind === 'first') {\n            return [\n                {\n                    classes: 'shepherd-button-secondary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.exitButton'),\n                    type: 'cancel'\n                },\n                {\n                    classes: 'shepherd-button-primary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.nextButton'),\n                    type: 'next'\n                }\n            ];\n        }\n        if (buttonKind === 'last') {\n            return [\n                {\n                    classes: 'shepherd-button-secondary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.backButton'),\n                    type: 'back'\n                },\n                {\n                    classes: 'shepherd-button-primary',\n                    text: this.languageService.translate.instant('igo.common.interactiveTour.exitButton'),\n                    type: 'cancel'\n                }\n            ];\n        }\n        return [\n            {\n                classes: 'shepherd-button-secondary',\n                text: this.languageService.translate.instant('igo.common.interactiveTour.backButton'),\n                type: 'back'\n            },\n            {\n                classes: 'shepherd-button-primary',\n                text: this.languageService.translate.instant('igo.common.interactiveTour.nextButton'),\n                type: 'next'\n            }\n        ];\n    }\n    getAction(actionName) {\n        const action = {\n            click: 'click'\n        };\n        return action[actionName.toLowerCase()];\n    }\n    addProgress() {\n        const self = this;\n        let nbTry = 0;\n        const maxTry = 21;\n        const checkExist = setInterval(() => {\n            if (self.getCurrentStep()) {\n                if (self.getCurrentStep().options.attachTo.element && !document.querySelector(self.getCurrentStep().options.attachTo.element)) {\n                    self.getCurrentStep().hide();\n                    const id = self.getCurrentStep().id;\n                    if (self.steps.findIndex(step => step.id === id) === self.steps.length - 1) {\n                        return;\n                    }\n                    self.next();\n                    self.removeStep(id);\n                    return;\n                }\n                else {\n                    const currentStepElement = self.getCurrentStep().getElement();\n                    if (currentStepElement) {\n                        const shepherdList = currentStepElement.querySelectorAll('.shepherd-content, .shepherd-text');\n                        shepherdList.forEach(element => {\n                            element.classList.add('mat-typography');\n                        });\n                    }\n                    const header = currentStepElement\n                        ? currentStepElement.querySelector('.shepherd-header')\n                        : undefined;\n                    nbTry++;\n                    if (header || nbTry > maxTry) {\n                        clearInterval(checkExist);\n                    }\n                    if (header) {\n                        const stepsArray = self.steps;\n                        const progress = document.createElement('span');\n                        progress.className = 'shepherd-progress';\n                        progress.innerText = `${stepsArray.indexOf(self.getCurrentStep()) + 1}/${stepsArray.length}`;\n                        header.insertBefore(progress, currentStepElement.querySelector('.shepherd-cancel-icon'));\n                    }\n                }\n            }\n        }, 100);\n    }\n    executeAction(step, actionConfig) {\n        if (!actionConfig) {\n            return;\n        }\n        if (actionConfig.condition &&\n            ((actionConfig.condition.charAt(0) === '!' &&\n                document.querySelector(actionConfig.condition.slice(1))) ||\n                (actionConfig.condition.charAt(0) !== '!' &&\n                    !document.querySelector(actionConfig.condition)))) {\n            return;\n        }\n        const element = document.querySelector(actionConfig.element || step.element);\n        const action = this.getAction(actionConfig.action);\n        if (element && action) {\n            element[action]();\n        }\n    }\n    executeActionPromise(step, actionConfig) {\n        return new Promise((resolve) => {\n            this.executeAction(step, actionConfig);\n            if (!actionConfig || !actionConfig.waitFor) {\n                resolve();\n                return;\n            }\n            let nbTry = 0;\n            const maxTry = actionConfig.maxWait ? actionConfig.maxWait / 100 : 20;\n            const checkExist = setInterval(() => {\n                nbTry++;\n                if (nbTry > maxTry || document.querySelector(actionConfig.waitFor)) {\n                    clearInterval(checkExist);\n                    resolve();\n                }\n            }, 100);\n        });\n    }\n    getShepherdSteps(stepConfig) {\n        const shepherdSteps = [];\n        let i = 0;\n        for (const step of stepConfig.steps) {\n            shepherdSteps.push({\n                attachTo: {\n                    element: step.element,\n                    on: step.position || stepConfig.position\n                },\n                popperOptions: {\n                    modifiers: [{ name: 'offset', options: { offset: [0, 15] } }]\n                },\n                beforeShowPromise: () => {\n                    return Promise.all([\n                        this.executeActionPromise(this.previousStep, this.previousStep ? this.previousStep.beforeChange : undefined),\n                        this.executeActionPromise(step, step.beforeShow)\n                    ]);\n                },\n                buttons: this.getButtons(i === 0\n                    ? 'first'\n                    : i + 1 === stepConfig.steps.length\n                        ? 'last'\n                        : stepConfig.steps[i].noBackButton\n                            ? 'noBackButton'\n                            : undefined),\n                classes: step.class,\n                highlightClass: step.highlightClass,\n                scrollTo: step.scrollToElement || stepConfig.scrollToElement || true,\n                canClickTarget: step.disableInteraction\n                    ? !step.disableInteraction\n                    : undefined,\n                title: this.languageService.translate.instant(step.title || stepConfig.title),\n                text: [this.languageService.translate.instant(step.text)],\n                when: {\n                    show: () => {\n                        this.executeAction(step, step.onShow);\n                    },\n                    hide: () => {\n                        this.previousStep = step;\n                        this.executeAction(step, step.onHide);\n                    }\n                }\n            });\n            i++;\n        }\n        return shepherdSteps;\n    }\n    startTour(toolName) {\n        const stepConfig = this.interactiveTourLoader.getTourOptionData(toolName);\n        this.shepherdService.defaultStepOptions = {\n            classes: stepConfig.class,\n            highlightClass: stepConfig.highlightClass,\n            canClickTarget: stepConfig.disableInteraction\n                ? !stepConfig.disableInteraction\n                : true,\n            cancelIcon: {\n                enabled: true\n            }\n        };\n        const shepherdSteps = this.getShepherdSteps(stepConfig);\n        this.shepherdService.modal = true;\n        this.shepherdService.confirmCancel = false;\n        this.shepherdService.addSteps(shepherdSteps);\n        this.shepherdService.tourObject.on('show', this.addProgress);\n        this.shepherdService.start();\n    }\n}\nInteractiveTourService.ɵfac = function InteractiveTourService_Factory(t) { return new (t || InteractiveTourService)(ɵngcc0.ɵɵinject(ɵngcc10.ConfigService), ɵngcc0.ɵɵinject(ɵngcc10.MediaService), ɵngcc0.ɵɵinject(ɵngcc10.LanguageService), ɵngcc0.ɵɵinject(InteractiveTourLoader), ɵngcc0.ɵɵinject(ɵngcc23.ShepherdService)); };\nInteractiveTourService.ɵprov = ɵɵdefineInjectable({ factory: function InteractiveTourService_Factory() { return new InteractiveTourService(ɵɵinject(ConfigService), ɵɵinject(MediaService), ɵɵinject(LanguageService), ɵɵinject(InteractiveTourLoader), ɵɵinject(ShepherdService)); }, token: InteractiveTourService, providedIn: \"root\" });\nInteractiveTourService.ctorParameters = () => [\n    { type: ConfigService },\n    { type: MediaService },\n    { type: LanguageService },\n    { type: InteractiveTourLoader },\n    { type: ShepherdService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(InteractiveTourService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc10.ConfigService }, { type: ɵngcc10.MediaService }, { type: ɵngcc10.LanguageService }, { type: InteractiveTourLoader }, { type: ɵngcc23.ShepherdService }]; }, null); })();\n\n/**\n * Service where all available tools and their component are registered.\n */\nclass Toolbox {\n    constructor(options = {}) {\n        this.options = options;\n        /**\n         * Observable of the active tool\n         */\n        this.activeTool$ = new BehaviorSubject(undefined);\n        /**\n         * Ordered list of tool names to display in a toolbar\n         */\n        this.toolbar$ = new BehaviorSubject([]);\n        /**\n         * Active tool history. Useful for activating the previous tool.\n         */\n        this.activeToolHistory = [];\n        /**\n         * Tool store\n         */\n        this.store = new EntityStore([], {\n            getKey: (tool) => tool.name\n        });\n        this.setToolbar(options.toolbar);\n        this.initStore();\n    }\n    get tools$() {\n        return this.store.entities$;\n    }\n    /**\n     * Destroy the toolbox\n     */\n    destroy() {\n        this.activeTool$$.unsubscribe();\n        this.store.destroy();\n    }\n    /**\n     * Return a tool\n     * @param name Tool name\n     * @returns tool Tool\n     */\n    getTool(name) {\n        return this.store.get(name);\n    }\n    /**\n     * Return all tools\n     * @returns Array of tools\n     */\n    getTools() {\n        return this.store.all();\n    }\n    /**\n     * Set tool configurations\n     * @param tools Tools\n     */\n    setTools(tools) {\n        this.store.load(tools);\n    }\n    /**\n     * Get toolbar\n     * @returns Toolbar value\n     */\n    getToolbar() {\n        return this.toolbar$.getValue();\n    }\n    /**\n     * Set toolbar\n     * @param toolbar A list of tool names\n     */\n    setToolbar(toolbar) {\n        this.toolbar$.next(toolbar || []);\n    }\n    /**\n     * Activate a tool (and deactivate other tools)\n     * @param name Tool name\n     * @param options Tool options\n     */\n    activateTool(name, options = {}) {\n        const tool = this.getTool(name);\n        if (tool === undefined) {\n            return;\n        }\n        this.store.state.update(tool, { active: true, options }, true);\n    }\n    /**\n     * Activate the previous tool, if any\n     */\n    activatePreviousTool() {\n        if (this.activeToolHistory.length <= 1) {\n            this.deactivateTool();\n            return;\n        }\n        const [previous, current] = this.activeToolHistory.splice(-2, 2);\n        this.activateTool(previous);\n    }\n    /**\n     * Activate the tool below, if any\n     */\n    /* activateBelowTool() {\n      const arrayTools = this.getToolbar();\n      const index = arrayTools.findIndex(t => t === this.activeTool$.getValue().name);\n      if (arrayTools[index + 1] !== undefined) {\n        this.deactivateTool();\n        const below = arrayTools[index + 1];\n        this.activateTool(below);\n      } else {\n        this.deactivateTool();\n        const below = arrayTools[0];\n        this.activateTool(below);\n      }\n    } */\n    /**\n     * Activate the tool above, if any\n     */\n    /* activateAboveTool() {\n      const arrayTools = this.getToolbar();\n      const index = arrayTools.findIndex(t => t === this.activeTool$.getValue().name);\n      if (arrayTools[index - 1] !== undefined) {\n        this.deactivateTool();\n        const above = arrayTools[index - 1];\n        this.activateTool(above);\n      } else {\n        this.deactivateTool();\n        const above = arrayTools[arrayTools.length - 1];\n        this.activateTool(above);\n      }\n    } */\n    /**\n     * Deactivate the active tool\n     */\n    deactivateTool() {\n        this.clearActiveToolHistory();\n        this.store.state.updateAll({ active: false });\n    }\n    /**\n     * Initialize the tool store and start observing the active tool\n     */\n    initStore() {\n        this.store = new EntityStore([], {\n            getKey: (entity) => entity.name\n        });\n        this.activeTool$$ = this.store.stateView\n            .firstBy$((record) => record.state.active === true)\n            .subscribe((record) => {\n            if (record === undefined) {\n                this.setActiveTool(undefined);\n                return;\n            }\n            const tool = record.entity;\n            const options = Object.assign({}, tool.options || {}, record.state.options || {});\n            this.setActiveTool(Object.assign({}, tool, { options }));\n        });\n    }\n    /**\n     * Set the active tool and update the tool history\n     * @param tool Tool\n     */\n    setActiveTool(tool) {\n        this.activeTool$.next(tool);\n        if (tool === undefined) {\n            this.clearActiveToolHistory();\n        }\n        else {\n            this.activeToolHistory = this.activeToolHistory\n                .filter((name) => name !== tool.name)\n                .concat([tool.name]);\n        }\n    }\n    /**\n     * Clear the tool history\n     */\n    clearActiveToolHistory() {\n        this.activeToolHistory = [];\n    }\n}\n\n/**\n * Service where runtime tool configurations are registered\n */\nclass ToolService {\n    constructor() {\n        /**\n         * Toolbox that holds main tools\n         */\n        this.toolbox = new Toolbox();\n        this.toolbox.setTools(this.getTools());\n    }\n    static register(tool) {\n        ToolService.tools[tool.name] = tool;\n    }\n    /**\n     * Return a tool\n     * @param name Tool name\n     * @returns tool Tool\n     */\n    getTool(name) {\n        return ToolService.tools[name];\n    }\n    /**\n     * Return all tools\n     * @returns tTols\n     */\n    getTools() {\n        return Object.values(ToolService.tools);\n    }\n}\nToolService.ɵfac = function ToolService_Factory(t) { return new (t || ToolService)(); };\nToolService.tools = {};\nToolService.ɵprov = ɵɵdefineInjectable({ factory: function ToolService_Factory() { return new ToolService(); }, token: ToolService, providedIn: \"root\" });\nToolService.ctorParameters = () => [];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ToolService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nclass InteractiveTourComponent {\n    constructor(interactiveTourService, toolService) {\n        this.interactiveTourService = interactiveTourService;\n        this.toolService = toolService;\n        /**\n         * Toolbox that holds main tools\n         */\n        this.tourToStart = '';\n        this.discoverTitleInLocale$ = of('IGO');\n    }\n    getClass() {\n        return {\n            'tour-button-tool-icon': this.styleButton === 'icon',\n            'tour-button-tool': this.styleButton === 'raised'\n        };\n    }\n    get toolbox() {\n        return this.toolService.toolbox;\n    }\n    getTourToStart() {\n        if (this.tourToStart) {\n            return this.tourToStart;\n        }\n        else {\n            return this.activeToolName;\n        }\n    }\n    get activeToolName() {\n        if (this.toolbox) {\n            if (this.isActiveTool) {\n                return this.toolbox.activeTool$.getValue().name;\n            }\n            else {\n                return 'global';\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    get isActiveTool() {\n        if (this.toolbox) {\n            return this.toolbox.activeTool$.getValue() !== undefined;\n        }\n        else {\n            return undefined;\n        }\n    }\n    get isToolHaveTour() {\n        if (this.activeToolName === 'about' && !this.tourToStart) {\n            return false;\n        }\n        return this.interactiveTourService.isToolHaveTourConfig(this.getTourToStart());\n    }\n    get showTourButton() {\n        // 2 conditions to show: have Tour on tool in Config file and if we are in mobile displayInMobile= true\n        let haveTour;\n        haveTour = this.isToolHaveTour;\n        if (haveTour === false) {\n            return false;\n        }\n        let inMobileAndShow;\n        if (this.interactiveTourService.isMobile()) {\n            inMobileAndShow = this.isTourDisplayInMobile;\n            if (inMobileAndShow === false) {\n                return false;\n            }\n        }\n        return true;\n    }\n    get isTourDisplayInMobile() {\n        return this.interactiveTourService.isTourDisplayInMobile();\n    }\n    get disabledTourButton() {\n        return this.interactiveTourService.disabledTourButton(this.activeToolName);\n    }\n    startInteractiveTour() {\n        const tour = this.getTourToStart();\n        if (tour) {\n            this.interactiveTourService.startTour(tour);\n        }\n        else {\n            return;\n        }\n    }\n}\nInteractiveTourComponent.ɵfac = function InteractiveTourComponent_Factory(t) { return new (t || InteractiveTourComponent)(ɵngcc0.ɵɵdirectiveInject(InteractiveTourService), ɵngcc0.ɵɵdirectiveInject(ToolService)); };\nInteractiveTourComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: InteractiveTourComponent, selectors: [[\"igo-interactive-tour\"]], inputs: { tourToStart: \"tourToStart\", discoverTitleInLocale$: \"discoverTitleInLocale$\", styleButton: \"styleButton\" }, decls: 1, vars: 1, consts: [[\"mat-raised-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"ngClass\", \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"ngClass\", \"disabled\", \"click\"], [1, \"interactive-tour-button-title\"], [\"svgIcon\", \"presentation-play\", 3, \"matTooltip\"]], template: function InteractiveTourComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, InteractiveTourComponent_button_0_Template, 9, 15, \"button\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showTourButton);\n    } }, directives: [ɵngcc3.NgIf, ɵngcc9.MatButton, ɵngcc3.NgClass, ɵngcc8.MatIcon, ɵngcc14.MatTooltip], pipes: [ɵngcc17.TranslatePipe, ɵngcc3.AsyncPipe], styles: [\".shepherd-has-title .shepherd-content .shepherd-header{padding:.5em .75em}.shepherd-title{margin:0!important}.shepherd-progress{color:#737373;margin-right:15px}\"], encapsulation: 2 });\nInteractiveTourComponent.ctorParameters = () => [\n    { type: InteractiveTourService },\n    { type: ToolService }\n];\nInteractiveTourComponent.propDecorators = {\n    tourToStart: [{ type: Input }],\n    styleButton: [{ type: Input }],\n    discoverTitleInLocale$: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(InteractiveTourComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-interactive-tour',\n                template: \"<button *ngIf=\\\"showTourButton\\\"\\n  (click) = \\\"startInteractiveTour()\\\"\\n  [ngClass]=\\\"getClass()\\\"\\n  mat-raised-button\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [disabled]=disabledTourButton>\\n  <span class=\\\"interactive-tour-button-title\\\">{{'igo.common.interactiveTour.buttonTitle' | translate}} {{(discoverTitleInLocale$ | async) | translate}}</span>\\n  <mat-icon\\n    svgIcon=\\\"presentation-play\\\"\\n    [matTooltip]=\\\"disabledTourButton ?\\n    ('igo.common.interactiveTour.disaledTooltipTourToolButton' | translate) :\\n    ('igo.common.interactiveTour.tooltipTourToolButton' | translate)\\\">\\n  </mat-icon>\\n</button>\\n\",\n                encapsulation: ViewEncapsulation.None,\n                styles: [\".shepherd-has-title .shepherd-content .shepherd-header{padding:.5em .75em}.shepherd-title{margin:0!important}.shepherd-progress{color:#737373;margin-right:15px}\"]\n            }]\n    }], function () { return [{ type: InteractiveTourService }, { type: ToolService }]; }, { tourToStart: [{\n            type: Input\n        }], discoverTitleInLocale$: [{\n            type: Input\n        }], styleButton: [{\n            type: Input\n        }] }); })();\n\nclass IgoInteractiveTourModule {\n}\nIgoInteractiveTourModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoInteractiveTourModule });\nIgoInteractiveTourModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoInteractiveTourModule_Factory(t) { return new (t || IgoInteractiveTourModule)(); }, providers: [InteractiveTourService, InteractiveTourLoader], imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoInteractiveTourModule, { declarations: function () { return [InteractiveTourComponent]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        IgoLanguageModule]; }, exports: function () { return [InteractiveTourComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoInteractiveTourModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [InteractiveTourComponent],\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    IgoLanguageModule\n                ],\n                providers: [InteractiveTourService, InteractiveTourLoader],\n                exports: [InteractiveTourComponent]\n            }]\n    }], null, null); })();\n\nclass KeyValuePipe {\n    transform(value, args) {\n        const keyValues = [];\n        Object.getOwnPropertyNames(value).forEach((key) => keyValues.push({ key, value: value[key] }));\n        return keyValues;\n    }\n}\nKeyValuePipe.ɵfac = function KeyValuePipe_Factory(t) { return new (t || KeyValuePipe)(); };\nKeyValuePipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: \"keyvalue\", type: KeyValuePipe, pure: true });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(KeyValuePipe, [{\n        type: Pipe,\n        args: [{\n                name: 'keyvalue'\n            }]\n    }], null, null); })();\n\nclass IgoKeyValueModule {\n    static forRoot() {\n        return {\n            ngModule: IgoKeyValueModule,\n            providers: []\n        };\n    }\n}\nIgoKeyValueModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoKeyValueModule });\nIgoKeyValueModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoKeyValueModule_Factory(t) { return new (t || IgoKeyValueModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoKeyValueModule, { declarations: [KeyValuePipe], exports: [KeyValuePipe] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoKeyValueModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [KeyValuePipe],\n                exports: [KeyValuePipe]\n            }]\n    }], null, null); })();\n\nclass JsonDialogComponent {\n    constructor(dialogRef) {\n        this.dialogRef = dialogRef;\n    }\n    isObject(val) {\n        return typeof val === 'object' && !Array.isArray(val);\n    }\n    getKey(baseKey, key) {\n        return (baseKey ? baseKey + '.' : '') + key;\n    }\n}\nJsonDialogComponent.ɵfac = function JsonDialogComponent_Factory(t) { return new (t || JsonDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc18.MatDialogRef)); };\nJsonDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: JsonDialogComponent, selectors: [[\"igo-json-dialog\"]], decls: 9, vars: 5, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\", 1, \"mat-typography\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"loopObject\", \"\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"notObject\", \"\"], [1, \"propertyValue\", 3, \"innerHtml\"]], template: function JsonDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"h1\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(3, JsonDialogComponent_ng_container_3_Template, 1, 0, \"ng-container\", 2);\n        ɵngcc0.ɵɵtemplate(4, JsonDialogComponent_ng_template_4_Template, 2, 3, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"div\", 4);\n        ɵngcc0.ɵɵelementStart(7, \"button\", 5);\n        ɵngcc0.ɵɵlistener(\"click\", function JsonDialogComponent_Template_button_click_7_listener() { return ctx.dialogRef.close(false); });\n        ɵngcc0.ɵɵtext(8, \" OK \");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(5);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.title);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(3, _c11, ctx.data));\n    } }, directives: [ɵngcc18.MatDialogTitle, ɵngcc18.MatDialogContent, ɵngcc3.NgTemplateOutlet, ɵngcc18.MatDialogActions, ɵngcc9.MatButton, ɵngcc3.NgForOf, ɵngcc3.NgIf], pipes: [KeyValuePipe], encapsulation: 2 });\nJsonDialogComponent.ctorParameters = () => [\n    { type: MatDialogRef }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(JsonDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-json-dialog',\n                template: \"<h1 mat-dialog-title class=\\\"mat-typography\\\">{{ title }}</h1>\\n\\n<div mat-dialog-content class=\\\"mat-typography\\\">\\n  <ng-container *ngTemplateOutlet=\\\"loopObject;context:{ obj: data }\\\"></ng-container>\\n\\n  <ng-template #loopObject let-obj='obj' let-baseKey='baseKey'>\\n    <ng-container *ngFor=\\\"let property of obj | keyvalue\\\">\\n      <ng-container *ngIf=\\\"ignoreKeys.indexOf(getKey(baseKey, property.key)) === -1\\\">\\n\\n        <ng-container *ngIf=\\\"isObject(property.value); else notObject\\\">\\n          <ng-container *ngTemplateOutlet=\\\"loopObject;context:{ obj: property.value, baseKey: getKey(baseKey, property.key) }\\\"></ng-container>\\n        </ng-container>\\n\\n        <ng-template #notObject>\\n          <p><span><b>{{getKey(baseKey, property.key)}}</b> : </span><span class=\\\"propertyValue\\\" [innerHtml]=\\\"property.value\\\"></span></p>\\n        </ng-template>\\n\\n      </ng-container>\\n    </ng-container>\\n  </ng-template>\\n</div>\\n\\n<div mat-dialog-actions>\\n  <button mat-button color=\\\"primary\\\"\\n          (click)=\\\"dialogRef.close(false)\\\">\\n    OK\\n  </button>\\n</div>\\n\"\n            }]\n    }], function () { return [{ type: ɵngcc18.MatDialogRef }]; }, null); })();\n\nclass JsonDialogService {\n    constructor(dialog) {\n        this.dialog = dialog;\n    }\n    open(title, data, ignoreKeys) {\n        const dialogRef = this.dialog.open(JsonDialogComponent, {\n            disableClose: false\n        });\n        dialogRef.componentInstance.data = data;\n        dialogRef.componentInstance.title = title;\n        dialogRef.componentInstance.ignoreKeys = ignoreKeys;\n        return dialogRef.afterClosed();\n    }\n}\nJsonDialogService.ɵfac = function JsonDialogService_Factory(t) { return new (t || JsonDialogService)(ɵngcc0.ɵɵinject(ɵngcc18.MatDialog)); };\nJsonDialogService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: JsonDialogService, factory: JsonDialogService.ɵfac });\nJsonDialogService.ctorParameters = () => [\n    { type: MatDialog }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(JsonDialogService, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc18.MatDialog }]; }, null); })();\n\nclass IgoJsonDialogModule {\n    static forRoot() {\n        return {\n            ngModule: IgoJsonDialogModule\n        };\n    }\n}\nIgoJsonDialogModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoJsonDialogModule });\nIgoJsonDialogModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoJsonDialogModule_Factory(t) { return new (t || IgoJsonDialogModule)(); }, providers: [JsonDialogService], imports: [[CommonModule, MatButtonModule, MatDialogModule, IgoKeyValueModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoJsonDialogModule, { declarations: function () { return [JsonDialogComponent]; }, imports: function () { return [CommonModule, MatButtonModule, MatDialogModule, IgoKeyValueModule]; }, exports: function () { return [JsonDialogComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoJsonDialogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, MatButtonModule, MatDialogModule, IgoKeyValueModule],\n                exports: [JsonDialogComponent],\n                declarations: [JsonDialogComponent],\n                providers: [JsonDialogService]\n            }]\n    }], null, null); })();\n\nclass ListItemDirective {\n    constructor(renderer, el) {\n        this.renderer = renderer;\n        this.el = el;\n        this._color = 'primary';\n        this._focused = false;\n        this._selected = false;\n        this._disabled = false;\n        this.beforeSelect = new EventEmitter();\n        this.beforeFocus = new EventEmitter();\n        this.beforeUnselect = new EventEmitter();\n        this.beforeUnfocus = new EventEmitter();\n        this.beforeDisable = new EventEmitter();\n        this.beforeEnable = new EventEmitter();\n        this.focus = new EventEmitter();\n        this.unfocus = new EventEmitter();\n        this.select = new EventEmitter();\n        this.unselect = new EventEmitter();\n        this.disable = new EventEmitter();\n        this.enable = new EventEmitter();\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    get focused() {\n        return this._focused;\n    }\n    set focused(value) {\n        if (value === this._focused) {\n            return;\n        }\n        if (this.disabled) {\n            return;\n        }\n        value ? this.beforeFocus.emit(this) : this.beforeUnfocus.emit(this);\n        this._focused = value;\n        if (this.selected !== true) {\n            this.toggleFocusedClass();\n        }\n        value ? this.focus.emit(this) : this.unfocus.emit(this);\n    }\n    get selected() {\n        return this._selected;\n    }\n    set selected(value) {\n        if (value === this._selected) {\n            return;\n        }\n        if (this.disabled) {\n            return;\n        }\n        value ? this.beforeSelect.emit(this) : this.beforeUnselect.emit(this);\n        this._selected = value;\n        this._focused = value;\n        this.toggleSelectedClass();\n        value ? this.select.emit(this) : this.unselect.emit(this);\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        if (value === this._disabled) {\n            return;\n        }\n        if (value === true) {\n            this.selected = false;\n        }\n        value ? this.beforeDisable.emit(this) : this.beforeEnable.emit(this);\n        this._disabled = value;\n        this.toggleDisabledClass();\n        value ? this.disable.emit(this) : this.enable.emit(this);\n    }\n    onClick() {\n        this.selected = true;\n    }\n    getOffsetTop() {\n        const padding = 5;\n        return this.el.nativeElement.offsetTop - padding;\n    }\n    toggleFocusedClass() {\n        if (this.focused) {\n            this.addCls(ListItemDirective.focusedCls);\n        }\n        else {\n            this.removeCls(ListItemDirective.focusedCls);\n        }\n    }\n    toggleSelectedClass() {\n        if (this.selected) {\n            this.addCls(ListItemDirective.selectedCls);\n            this.removeCls(ListItemDirective.focusedCls);\n        }\n        else {\n            this.removeCls(ListItemDirective.selectedCls);\n        }\n    }\n    toggleDisabledClass() {\n        if (this.disabled) {\n            this.addCls(ListItemDirective.disabledCls);\n        }\n        else {\n            this.removeCls(ListItemDirective.disabledCls);\n        }\n    }\n    addCls(cls) {\n        this.renderer.addClass(this.el.nativeElement, cls);\n    }\n    removeCls(cls) {\n        this.renderer.removeClass(this.el.nativeElement, cls);\n    }\n}\nListItemDirective.ɵfac = function ListItemDirective_Factory(t) { return new (t || ListItemDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nListItemDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ListItemDirective, selectors: [[\"\", \"igoListItem\", \"\"]], hostBindings: function ListItemDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function ListItemDirective_click_HostBindingHandler() { return ctx.onClick(); });\n    } }, inputs: { color: \"color\", focused: \"focused\", selected: \"selected\", disabled: \"disabled\" }, outputs: { beforeSelect: \"beforeSelect\", beforeFocus: \"beforeFocus\", beforeUnselect: \"beforeUnselect\", beforeUnfocus: \"beforeUnfocus\", beforeDisable: \"beforeDisable\", beforeEnable: \"beforeEnable\", focus: \"focus\", unfocus: \"unfocus\", select: \"select\", unselect: \"unselect\", disable: \"disable\", enable: \"enable\" } });\nListItemDirective.focusedCls = 'igo-list-item-focused';\nListItemDirective.selectedCls = 'igo-list-item-selected';\nListItemDirective.disabledCls = 'igo-list-item-disabled';\nListItemDirective.ctorParameters = () => [\n    { type: Renderer2 },\n    { type: ElementRef }\n];\nListItemDirective.propDecorators = {\n    color: [{ type: Input }],\n    focused: [{ type: Input }],\n    selected: [{ type: Input }],\n    disabled: [{ type: Input }],\n    beforeSelect: [{ type: Output }],\n    beforeFocus: [{ type: Output }],\n    beforeUnselect: [{ type: Output }],\n    beforeUnfocus: [{ type: Output }],\n    beforeDisable: [{ type: Output }],\n    beforeEnable: [{ type: Output }],\n    focus: [{ type: Output }],\n    unfocus: [{ type: Output }],\n    select: [{ type: Output }],\n    unselect: [{ type: Output }],\n    disable: [{ type: Output }],\n    enable: [{ type: Output }],\n    onClick: [{ type: HostListener, args: ['click',] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ListItemDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoListItem]'\n            }]\n    }], function () { return [{ type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }]; }, { beforeSelect: [{\n            type: Output\n        }], beforeFocus: [{\n            type: Output\n        }], beforeUnselect: [{\n            type: Output\n        }], beforeUnfocus: [{\n            type: Output\n        }], beforeDisable: [{\n            type: Output\n        }], beforeEnable: [{\n            type: Output\n        }], focus: [{\n            type: Output\n        }], unfocus: [{\n            type: Output\n        }], select: [{\n            type: Output\n        }], unselect: [{\n            type: Output\n        }], disable: [{\n            type: Output\n        }], enable: [{\n            type: Output\n        }], color: [{\n            type: Input\n        }], focused: [{\n            type: Input\n        }], selected: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], onClick: [{\n            type: HostListener,\n            args: ['click']\n        }] }); })();\n\nclass ListComponent {\n    constructor(el) {\n        this.el = el;\n        this._navigation = true;\n        this._selection = true;\n        this.subscriptions = [];\n    }\n    get navigation() {\n        return this._navigation;\n    }\n    set navigation(value) {\n        this._navigation = value;\n    }\n    get selection() {\n        return this._selection;\n    }\n    set selection(value) {\n        this._selection = value;\n    }\n    get selectedItem() {\n        return this._selectedItem;\n    }\n    set selectedItem(value) {\n        this.focusedItem = value;\n        this._selectedItem = value;\n    }\n    get focusedItem() {\n        return this._focusedItem;\n    }\n    set focusedItem(value) {\n        this._focusedItem = value;\n    }\n    handleKeyboardEvent(event) {\n        // It would be nice to be able to unsubscribe to the event\n        // completely but until ES7 this won't be possible because\n        // document events are not observables\n        if (this.navigationEnabled) {\n            if (event.key === 'ArrowUp' || event.key === 'ArrowDown') {\n                event.preventDefault();\n                this.navigate(event.key);\n            }\n            else if (event.key === 'Enter') {\n                this.select(this.focusedItem);\n            }\n        }\n    }\n    ngOnInit() {\n        this.enableNavigation();\n    }\n    ngAfterViewInit() {\n        if (this.listItems.length) {\n            this.init();\n        }\n        this.listItems$$ = this.listItems.changes.subscribe((items) => this.init());\n    }\n    ngOnDestroy() {\n        this.listItems$$.unsubscribe();\n    }\n    focus(item) {\n        if (!this.selection) {\n            return;\n        }\n        this.unfocus();\n        // We need to make this check because dynamic\n        // lists such as in the search results list may fail\n        if (item !== undefined) {\n            item.focused = true;\n        }\n    }\n    unfocus() {\n        if (this.focusedItem !== undefined) {\n            this.focusedItem.focused = false;\n        }\n        this.focusedItem = undefined;\n    }\n    focusNext() {\n        const items = this.listItems.toArray();\n        let item;\n        const igoList = this.el.nativeElement;\n        let disabled = true;\n        let index = this.getFocusedIndex();\n        if (index === undefined) {\n            index = -1;\n        }\n        while (disabled && index < items.length - 1) {\n            index += 1;\n            item = items[index];\n            disabled = item.disabled;\n        }\n        if (item !== undefined) {\n            this.focus(item);\n        }\n        if (!items[index + 1]) {\n            igoList.scrollTop = igoList.scrollHeight - igoList.clientHeight;\n            return;\n        }\n        if (item !== undefined && !this.isScrolledIntoView(item.el.nativeElement)) {\n            igoList.scrollTop =\n                item.el.nativeElement.offsetTop +\n                    item.el.nativeElement.children[0].offsetHeight -\n                    igoList.clientHeight;\n        }\n    }\n    focusPrevious() {\n        const items = this.listItems.toArray();\n        let item;\n        const igoList = this.el.nativeElement;\n        let disabled = true;\n        let index = this.getFocusedIndex();\n        while (disabled && index > 0) {\n            index -= 1;\n            item = items[index];\n            disabled = item.disabled;\n        }\n        if (item !== undefined) {\n            this.focus(item);\n        }\n        if (!items[index - 1]) {\n            igoList.scrollTop = 0;\n            return;\n        }\n        if (item !== undefined && !this.isScrolledIntoView(item.el.nativeElement)) {\n            const padding = 3;\n            igoList.scrollTop = item.el.nativeElement.offsetTop - padding;\n        }\n    }\n    select(item) {\n        if (!this.selection) {\n            return;\n        }\n        this.unselect();\n        if (item !== undefined) {\n            item.selected = true;\n        }\n    }\n    unselect() {\n        this.unfocus();\n        if (this.selectedItem !== undefined) {\n            this.selectedItem.selected = false;\n        }\n        this.selectedItem = undefined;\n    }\n    enableNavigation() {\n        if (this.navigation) {\n            this.navigationEnabled = true;\n        }\n    }\n    disableNavigation() {\n        this.navigationEnabled = false;\n    }\n    scrollToItem(item) {\n        this.el.nativeElement.scrollTop = item.getOffsetTop();\n    }\n    isScrolledIntoView(elem) {\n        const docViewTop = this.el.nativeElement.scrollTop + this.el.nativeElement.offsetTop;\n        const docViewBottom = docViewTop + this.el.nativeElement.clientHeight;\n        const elemTop = elem.offsetTop;\n        const elemBottom = elemTop + elem.children[0].offsetHeight;\n        return elemBottom <= docViewBottom && elemTop >= docViewTop;\n    }\n    init() {\n        this.subscribe();\n        this.selectedItem = this.findSelectedItem();\n        this.focusedItem = this.findFocusedItem();\n        this.enableNavigation();\n    }\n    subscribe() {\n        this.unsubscribe();\n        this.listItems.toArray().forEach(item => {\n            this.subscriptions.push(item.beforeSelect.subscribe((item2) => this.handleItemBeforeSelect(item2)));\n            this.subscriptions.push(item.select.subscribe((item2) => this.handleItemSelect(item2)));\n            this.subscriptions.push(item.beforeFocus.subscribe((item2) => this.handleItemBeforeFocus(item2)));\n            this.subscriptions.push(item.focus.subscribe((item2) => this.handleItemFocus(item2)));\n        }, this);\n    }\n    unsubscribe() {\n        this.subscriptions.forEach((sub) => sub.unsubscribe());\n        this.subscriptions = [];\n    }\n    handleItemBeforeFocus(item) {\n        if (item !== this.focusedItem) {\n            this.unfocus();\n        }\n    }\n    handleItemFocus(item) {\n        this.focusedItem = item;\n    }\n    handleItemBeforeSelect(item) {\n        if (item !== this.focusedItem) {\n            this.unselect();\n        }\n    }\n    handleItemSelect(item) {\n        this.selectedItem = item;\n    }\n    findSelectedItem() {\n        return this.listItems.toArray().find(item => item.selected);\n    }\n    findFocusedItem() {\n        return this.listItems.toArray().find(item => item.focused);\n    }\n    getFocusedIndex() {\n        return this.listItems\n            .toArray()\n            .findIndex(item => item === this.focusedItem);\n    }\n    navigate(key) {\n        switch (key) {\n            case 'ArrowUp':\n                this.focusPrevious();\n                break;\n            case 'ArrowDown':\n                this.focusNext();\n                break;\n            default:\n                break;\n        }\n    }\n}\nListComponent.ɵfac = function ListComponent_Factory(t) { return new (t || ListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ListComponent, selectors: [[\"igo-list\"]], contentQueries: function ListComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, ListItemDirective, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.listItems = _t);\n    } }, hostBindings: function ListComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"keydown\", function ListComponent_keydown_HostBindingHandler($event) { return ctx.handleKeyboardEvent($event); }, false, ɵngcc0.ɵɵresolveDocument)(\"enter\", function ListComponent_enter_HostBindingHandler($event) { return ctx.handleKeyboardEvent($event); }, false, ɵngcc0.ɵɵresolveDocument);\n    } }, inputs: { navigation: \"navigation\", selection: \"selection\" }, ngContentSelectors: _c1, decls: 2, vars: 3, consts: [[\"igoClickout\", \"\", 3, \"ngClass\", \"clickout\", \"click\"]], template: function ListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"mat-list\", 0);\n        ɵngcc0.ɵɵlistener(\"clickout\", function ListComponent_Template_mat_list_clickout_0_listener() { return ctx.disableNavigation(); })(\"click\", function ListComponent_Template_mat_list_click_0_listener() { return ctx.enableNavigation(); });\n        ɵngcc0.ɵɵprojection(1);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(1, _c12, ctx.selection));\n    } }, directives: [ɵngcc13.MatList, ClickoutDirective, ɵngcc3.NgClass], styles: [\"[_nghost-%COMP%]{display:block;height:100%;overflow:auto;position:relative}mat-list[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]{position:static}[_nghost-%COMP%]     .mat-list .mat-list-item .mat-list-text>*{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;line-height:18px;max-height:36px;overflow:hidden;text-overflow:ellipsis;white-space:normal}[_nghost-%COMP%]     .mat-list .mat-list-item.mat-list-item-avatar .mat-list-item-content{display:-webkit-flex;height:46px;padding:3px}[_nghost-%COMP%]     .mat-list .mat-list-item.mat-list-item-avatar{height:46px}[_nghost-%COMP%]     .mat-list   igo-collapsible>.mat-list-item>.mat-list-item-content>.mat-list-text>.mat-line{font-weight:700;opacity:.9}[_nghost-%COMP%]     .mat-list .mat-list-item.mat-list-item-avatar .mat-list-item-content>mat-icon{padding:8px}[_nghost-%COMP%]     [igolistitem] mat-list-item [mat-list-avatar]{height:auto;width:40px}[_nghost-%COMP%]   mat-list.selectable[_ngcontent-%COMP%]     [igolistitem]:not(.igo-list-item-disabled) mat-list-item:hover{cursor:pointer}[_nghost-%COMP%]     [igolistitem]:focus{outline:none}\"] });\nListComponent.ctorParameters = () => [\n    { type: ElementRef }\n];\nListComponent.propDecorators = {\n    navigation: [{ type: Input }],\n    selection: [{ type: Input }],\n    listItems: [{ type: ContentChildren, args: [ListItemDirective, { descendants: true },] }],\n    handleKeyboardEvent: [{ type: HostListener, args: ['document:keydown', ['$event'],] }, { type: HostListener, args: ['document:enter', ['$event'],] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-list',\n                template: \"<mat-list\\n  igoClickout\\n  [ngClass]=\\\"{'selectable': selection}\\\"\\n  (clickout)=\\\"disableNavigation()\\\"\\n  (click)=\\\"enableNavigation()\\\">\\n  <ng-content></ng-content>\\n</mat-list>\\n\",\n                styles: [\":host{display:block;height:100%;overflow:auto;position:relative}mat-list{padding-top:0}:host{position:static}:host ::ng-deep .mat-list .mat-list-item .mat-list-text>*{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:-webkit-box;line-height:18px;max-height:36px;overflow:hidden;text-overflow:ellipsis;white-space:normal}:host ::ng-deep .mat-list .mat-list-item.mat-list-item-avatar .mat-list-item-content{display:-webkit-flex;height:46px;padding:3px}:host ::ng-deep .mat-list .mat-list-item.mat-list-item-avatar{height:46px}:host ::ng-deep .mat-list ::ng-deep igo-collapsible>.mat-list-item>.mat-list-item-content>.mat-list-text>.mat-line{font-weight:700;opacity:.9}:host ::ng-deep .mat-list .mat-list-item.mat-list-item-avatar .mat-list-item-content>mat-icon{padding:8px}:host ::ng-deep [igolistitem] mat-list-item [mat-list-avatar]{height:auto;width:40px}:host mat-list.selectable ::ng-deep [igolistitem]:not(.igo-list-item-disabled) mat-list-item:hover{cursor:pointer}:host ::ng-deep [igolistitem]:focus{outline:none}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { navigation: [{\n            type: Input\n        }], selection: [{\n            type: Input\n        }], handleKeyboardEvent: [{\n            type: HostListener,\n            args: ['document:keydown', ['$event']]\n        }, {\n            type: HostListener,\n            args: ['document:enter', ['$event']]\n        }], listItems: [{\n            type: ContentChildren,\n            args: [ListItemDirective, { descendants: true }]\n        }] }); })();\n\nclass IgoListModule {\n    static forRoot() {\n        return {\n            ngModule: IgoListModule,\n            providers: []\n        };\n    }\n}\nIgoListModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoListModule });\nIgoListModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoListModule_Factory(t) { return new (t || IgoListModule)(); }, imports: [[CommonModule, MatIconModule, MatListModule, IgoClickoutModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoListModule, { declarations: function () { return [ListItemDirective, ListComponent]; }, imports: function () { return [CommonModule, MatIconModule, MatListModule, IgoClickoutModule]; }, exports: function () { return [ListItemDirective, ListComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoListModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, MatIconModule, MatListModule, IgoClickoutModule],\n                declarations: [ListItemDirective, ListComponent],\n                exports: [ListItemDirective, ListComponent]\n            }]\n    }], null, null); })();\n\nclass PanelComponent {\n    constructor() {\n        this._withHeader = true;\n    }\n    get title() {\n        return this._title;\n    }\n    set title(value) {\n        this._title = value;\n    }\n    get withHeader() {\n        return this._withHeader;\n    }\n    set withHeader(value) {\n        this._withHeader = value;\n    }\n}\nPanelComponent.ɵfac = function PanelComponent_Factory(t) { return new (t || PanelComponent)(); };\nPanelComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PanelComponent, selectors: [[\"igo-panel\"]], hostVars: 2, hostBindings: function PanelComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"igo-panel-with-header\", ctx.withHeader);\n    } }, inputs: { title: \"title\", withHeader: \"withHeader\" }, ngContentSelectors: _c14, decls: 3, vars: 1, consts: [[\"class\", \"igo-panel-header mat-typography\", \"title\", \"\", 4, \"ngIf\"], [\"title\", \"\", 1, \"igo-panel-content\"], [\"title\", \"\", 1, \"igo-panel-header\", \"mat-typography\"], [1, \"igo-panel-title\"]], template: function PanelComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c13);\n        ɵngcc0.ɵɵtemplate(0, PanelComponent_div_0_Template, 7, 1, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.withHeader);\n    } }, directives: [ɵngcc3.NgIf], styles: [\"[_nghost-%COMP%]{display:block}.igo-panel-header[_ngcontent-%COMP%]{height:46px;padding:3px;text-align:center}.igo-panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{height:40px;margin:0}.igo-panel-header[_ngcontent-%COMP%]     [panelleftbutton]{float:left;margin-right:-40px}.igo-panel-header[_ngcontent-%COMP%]     [panelrightbutton]{float:right}.igo-panel-content[_ngcontent-%COMP%]{overflow:auto}.igo-panel-with-header[_nghost-%COMP%]   .igo-panel-content[_ngcontent-%COMP%]{height:calc(100% - 46px)}[_nghost-%COMP%]:not(.igo-panel-with-header)   .igo-panel-content[_ngcontent-%COMP%]{height:100%}.igo-panel-title[_ngcontent-%COMP%]{display:block;float:left;font-size:1.17em;font-weight:700;height:100%;line-height:40px;margin-left:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:calc(100% - 80px)}\"], changeDetection: 0 });\nPanelComponent.propDecorators = {\n    title: [{ type: Input }],\n    withHeader: [{ type: Input }, { type: HostBinding, args: ['class.igo-panel-with-header',] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PanelComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-panel',\n                template: \"<div *ngIf=\\\"withHeader\\\" class=\\\"igo-panel-header mat-typography\\\" title=\\\"\\\">\\n  <h3>\\n    <ng-content select=\\\"[panelLeftButton]\\\"></ng-content>\\n    <div class=\\\"igo-panel-title\\\">\\n      {{ title }}\\n      <ng-content select=\\\"[panelHeader]\\\"></ng-content>\\n    </div>\\n    <ng-content select=\\\"[panelRightButton]\\\"></ng-content>\\n  </h3>\\n</div>\\n<div class=\\\"igo-panel-content\\\" title=\\\"\\\">\\n  <ng-content></ng-content>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block}.igo-panel-header{height:46px;padding:3px;text-align:center}.igo-panel-header h3{height:40px;margin:0}.igo-panel-header ::ng-deep [panelleftbutton]{float:left;margin-right:-40px}.igo-panel-header ::ng-deep [panelrightbutton]{float:right}.igo-panel-content{overflow:auto}:host.igo-panel-with-header .igo-panel-content{height:calc(100% - 46px)}:host:not(.igo-panel-with-header) .igo-panel-content{height:100%}.igo-panel-title{display:block;float:left;font-size:1.17em;font-weight:700;height:100%;line-height:40px;margin-left:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:calc(100% - 80px)}\"]\n            }]\n    }], function () { return []; }, { title: [{\n            type: Input\n        }], withHeader: [{\n            type: Input\n        }, {\n            type: HostBinding,\n            args: ['class.igo-panel-with-header']\n        }] }); })();\n\nclass IgoPanelModule {\n}\nIgoPanelModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoPanelModule });\nIgoPanelModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoPanelModule_Factory(t) { return new (t || IgoPanelModule)(); }, imports: [[CommonModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoPanelModule, { declarations: function () { return [PanelComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [PanelComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoPanelModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule],\n                exports: [PanelComponent],\n                declarations: [PanelComponent]\n            }]\n    }], null, null); })();\n\n/**\n * <igoSidenavShim> directive.\n *\n * This directive prevents a material sidenav with mode=\"side\"\n * from focusing an element after it's closed\n */\nclass SidenavShimDirective {\n    constructor(component, renderer) {\n        this.renderer = renderer;\n    }\n    onOpen() {\n        this.focusedElement = document.activeElement;\n    }\n    onCloseStart() {\n        const focusedElement = document.activeElement;\n        if (focusedElement !== this.focusedElement) {\n            this.blurElement = this.focusedElement;\n        }\n        else {\n            this.blurElement = undefined;\n        }\n    }\n    onClose() {\n        if (this.blurElement) {\n            this.renderer.selectRootElement(this.blurElement).blur();\n        }\n        this.blurElement = undefined;\n        this.focusedElement = undefined;\n    }\n}\nSidenavShimDirective.ɵfac = function SidenavShimDirective_Factory(t) { return new (t || SidenavShimDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc24.MatSidenav, 2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2)); };\nSidenavShimDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: SidenavShimDirective, selectors: [[\"\", \"igoSidenavShim\", \"\"]], hostBindings: function SidenavShimDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"open\", function SidenavShimDirective_open_HostBindingHandler($event) { return ctx.onOpen($event); })(\"close-start\", function SidenavShimDirective_close_start_HostBindingHandler($event) { return ctx.onCloseStart($event); })(\"close\", function SidenavShimDirective_close_HostBindingHandler($event) { return ctx.onClose($event); });\n    } } });\nSidenavShimDirective.ctorParameters = () => [\n    { type: MatSidenav, decorators: [{ type: Self }] },\n    { type: Renderer2 }\n];\nSidenavShimDirective.propDecorators = {\n    onOpen: [{ type: HostListener, args: ['open', ['$event'],] }],\n    onCloseStart: [{ type: HostListener, args: ['close-start', ['$event'],] }],\n    onClose: [{ type: HostListener, args: ['close', ['$event'],] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SidenavShimDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSidenavShim]'\n            }]\n    }], function () { return [{ type: ɵngcc24.MatSidenav, decorators: [{\n                type: Self\n            }] }, { type: ɵngcc0.Renderer2 }]; }, { onOpen: [{\n            type: HostListener,\n            args: ['open', ['$event']]\n        }], onCloseStart: [{\n            type: HostListener,\n            args: ['close-start', ['$event']]\n        }], onClose: [{\n            type: HostListener,\n            args: ['close', ['$event']]\n        }] }); })();\n\nclass IgoSidenavModule {\n    static forRoot() {\n        return {\n            ngModule: IgoSidenavModule,\n            providers: []\n        };\n    }\n}\nIgoSidenavModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoSidenavModule });\nIgoSidenavModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoSidenavModule_Factory(t) { return new (t || IgoSidenavModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoSidenavModule, { declarations: [SidenavShimDirective], exports: [SidenavShimDirective] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoSidenavModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [SidenavShimDirective],\n                exports: [SidenavShimDirective]\n            }]\n    }], null, null); })();\n\nclass SpinnerComponent {\n    constructor() {\n        this.shown$ = new BehaviorSubject(false);\n    }\n    set shown(value) { this.shown$.next(value); }\n    get shown() { return this.shown$.value; }\n    show() {\n        this.shown = true;\n    }\n    hide() {\n        this.shown = false;\n    }\n}\nSpinnerComponent.ɵfac = function SpinnerComponent_Factory(t) { return new (t || SpinnerComponent)(); };\nSpinnerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SpinnerComponent, selectors: [[\"igo-spinner\"]], inputs: { shown: \"shown\" }, decls: 4, vars: 5, consts: [[3, \"ngClass\"], [1, \"igo-spinner-background\"], [\"diameter\", \"40\", \"mode\", \"indeterminate\"]], template: function SpinnerComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵelement(2, \"div\", 1);\n        ɵngcc0.ɵɵelement(3, \"mat-progress-spinner\", 2);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(3, _c15, ɵngcc0.ɵɵpipeBind1(1, 1, ctx.shown$)));\n    } }, directives: [ɵngcc3.NgClass, ɵngcc25.MatProgressSpinner], pipes: [ɵngcc3.AsyncPipe], styles: [\".igo-spinner-container[_ngcontent-%COMP%]{display:none;pointer-events:none}.igo-spinner-container.igo-spinner-shown[_ngcontent-%COMP%]{display:block}mat-progress-spinner[_ngcontent-%COMP%]{border-radius:50%;height:40px;width:40px}.igo-spinner-background[_ngcontent-%COMP%]{border:4px solid #fff;border-radius:50%;height:36px;left:2px;position:absolute;top:2px;width:36px}\"] });\nSpinnerComponent.ctorParameters = () => [];\nSpinnerComponent.propDecorators = {\n    shown: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SpinnerComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spinner',\n                template: \"<div\\n  [ngClass]=\\\"{'igo-spinner-container': true, 'igo-spinner-shown': (shown$ | async)}\\\">\\n  <div class=\\\"igo-spinner-background\\\"></div>\\n  <mat-progress-spinner diameter=\\\"40\\\" mode=\\\"indeterminate\\\"></mat-progress-spinner>\\n</div>\\n\",\n                styles: [\".igo-spinner-container{display:none;pointer-events:none}.igo-spinner-container.igo-spinner-shown{display:block}mat-progress-spinner{border-radius:50%;height:40px;width:40px}.igo-spinner-background{border:4px solid #fff;border-radius:50%;height:36px;left:2px;position:absolute;top:2px;width:36px}\"]\n            }]\n    }], function () { return []; }, { shown: [{\n            type: Input\n        }] }); })();\n\n/**\n * A directive to bind a SpinnerComponent to the activity service.\n * The activity service tracks any HTTP request and this directive\n * will display the spinner it's attached to when the activity counter\n * is greater than 0.\n */\nclass SpinnerActivityDirective {\n    constructor(spinner, activityService) {\n        this.spinner = spinner;\n        this.activityService = activityService;\n    }\n    /**\n     * Subscribe to the activity service counter and display the spinner\n     * when it's is greater than 0.\n     * @internal\n     */\n    ngOnInit() {\n        this.counter$$ = this.activityService.counter$\n            .pipe(debounceTime(50))\n            .subscribe((count) => {\n            count > 0 ? this.spinner.show() : this.spinner.hide();\n        });\n    }\n    /**\n     * Unsubcribe to the activity service counter.\n     * @internal\n     */\n    ngOnDestroy() {\n        this.counter$$.unsubscribe();\n    }\n}\nSpinnerActivityDirective.ɵfac = function SpinnerActivityDirective_Factory(t) { return new (t || SpinnerActivityDirective)(ɵngcc0.ɵɵdirectiveInject(SpinnerComponent, 2), ɵngcc0.ɵɵdirectiveInject(ɵngcc10.ActivityService)); };\nSpinnerActivityDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: SpinnerActivityDirective, selectors: [[\"\", \"igoSpinnerActivity\", \"\"]], features: [ɵngcc0.ɵɵProvidersFeature([SpinnerComponent])] });\nSpinnerActivityDirective.ctorParameters = () => [\n    { type: SpinnerComponent, decorators: [{ type: Self }] },\n    { type: ActivityService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SpinnerActivityDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSpinnerActivity]',\n                providers: [SpinnerComponent]\n            }]\n    }], function () { return [{ type: SpinnerComponent, decorators: [{\n                type: Self\n            }] }, { type: ɵngcc10.ActivityService }]; }, null); })();\n\nclass IgoSpinnerModule {\n}\nIgoSpinnerModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoSpinnerModule });\nIgoSpinnerModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoSpinnerModule_Factory(t) { return new (t || IgoSpinnerModule)(); }, imports: [[CommonModule, MatProgressSpinnerModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoSpinnerModule, { declarations: function () { return [SpinnerActivityDirective, SpinnerComponent]; }, imports: function () { return [CommonModule, MatProgressSpinnerModule]; }, exports: function () { return [SpinnerActivityDirective, SpinnerComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoSpinnerModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, MatProgressSpinnerModule],\n                declarations: [SpinnerActivityDirective, SpinnerComponent],\n                exports: [SpinnerActivityDirective, SpinnerComponent]\n            }]\n    }], null, null); })();\n\nclass TableDatabase {\n    constructor(data) {\n        /** Stream that emits whenever the data has been modified. */\n        this.dataChange = new BehaviorSubject([]);\n        if (data) {\n            this.dataChange.next(data);\n        }\n    }\n    get data() {\n        return this.dataChange.value;\n    }\n    set(data) {\n        this.dataChange.next(data);\n    }\n    add(item) {\n        const copiedData = this.data.slice();\n        copiedData.push(item);\n        this.set(copiedData);\n    }\n    remove(item) {\n        const copiedData = this.data.slice();\n        const index = copiedData.indexOf(item);\n        copiedData.splice(index, 1);\n        this.set(copiedData);\n    }\n}\n\nclass TableDataSource extends DataSource {\n    constructor(_database, _model, _sort) {\n        super();\n        this._database = _database;\n        this._model = _model;\n        this._sort = _sort;\n        this._filterChange = new BehaviorSubject('');\n    }\n    get filter() {\n        return this._filterChange.value;\n    }\n    set filter(filter) {\n        this._filterChange.next(filter);\n    }\n    // Connect function called by the table to retrieve one stream containing\n    // the data to render.\n    connect() {\n        if (!this._database) {\n            return merge([]);\n        }\n        const displayDataChanges = [\n            this._database.dataChange,\n            this._filterChange,\n            this._sort.sortChange\n        ];\n        return merge(...displayDataChanges).pipe(map(() => {\n            return this.getFilteredData(this._database.data);\n        }), map(data => {\n            return this.getSortedData(data);\n        }));\n    }\n    disconnect() { }\n    getFilteredData(data) {\n        if (!this.filter) {\n            return data;\n        }\n        return data.slice().filter((item) => {\n            const searchStr = this._model.columns\n                .filter(c => c.filterable)\n                .map(c => ObjectUtils.resolve(item, c.name))\n                .join(' ')\n                .toLowerCase();\n            return searchStr.indexOf(this.filter.toLowerCase()) !== -1;\n        });\n    }\n    getSortedData(data) {\n        if (!this._sort.active || this._sort.direction === '') {\n            return data;\n        }\n        return data.sort((a, b) => {\n            const propertyA = ObjectUtils.resolve(a, this._sort.active);\n            const propertyB = ObjectUtils.resolve(b, this._sort.active);\n            return ObjectUtils.naturalCompare(propertyB, propertyA, this._sort.direction);\n        });\n    }\n}\n\nvar TableActionColor;\n(function (TableActionColor) {\n    TableActionColor[TableActionColor[\"primary\"] = 0] = \"primary\";\n    TableActionColor[TableActionColor[\"accent\"] = 1] = \"accent\";\n    TableActionColor[TableActionColor[\"warn\"] = 2] = \"warn\";\n})(TableActionColor || (TableActionColor = {}));\n\nclass TableComponent {\n    constructor() {\n        this._hasFIlterInput = true;\n        this.selection = new SelectionModel(true, []);\n        this.select = new EventEmitter();\n    }\n    get database() {\n        return this._database;\n    }\n    set database(value) {\n        this._database = value;\n    }\n    get model() {\n        return this._model;\n    }\n    set model(value) {\n        this._model = value;\n    }\n    get hasFilterInput() {\n        return this._hasFIlterInput;\n    }\n    set hasFilterInput(value) {\n        this._hasFIlterInput = value;\n    }\n    ngOnInit() {\n        this.dataSource = new TableDataSource(this.database, this.model, this.sort);\n        if (this.model) {\n            this.displayedColumns = this.model.columns\n                .filter(c => c.displayed !== false)\n                .map(c => c.name);\n            if (this.model.selectionCheckbox) {\n                this.displayedColumns.unshift('selectionCheckbox');\n            }\n            if (this.model.actions && this.model.actions.length) {\n                this.displayedColumns.push('action');\n            }\n        }\n        this.selection.changed.subscribe(e => this.select.emit(e));\n    }\n    ngAfterViewInit() {\n        if (this.filter) {\n            fromEvent(this.filter.nativeElement, 'keyup')\n                .pipe(debounceTime(150), distinctUntilChanged())\n                .subscribe(() => {\n                if (!this.dataSource) {\n                    return;\n                }\n                this.dataSource.filter = this.filter.nativeElement.value;\n            });\n        }\n    }\n    ngOnChanges(change) {\n        if (change.database) {\n            this.dataSource = new TableDataSource(this.database, this.model, this.sort);\n            this.selection.clear();\n        }\n    }\n    getActionColor(colorId) {\n        return TableActionColor[colorId];\n    }\n    getValue(row, key) {\n        return ObjectUtils.resolve(row, key);\n    }\n    /** Whether the number of selected elements matches the total number of rows. */\n    isAllSelected() {\n        const numSelected = this.selection.selected.length;\n        const numRows = this.database.data.length;\n        return numSelected === numRows;\n    }\n    /** Selects all rows if they are not all selected; otherwise clear selection. */\n    masterToggle() {\n        this.isAllSelected()\n            ? this.selection.clear()\n            : this.database.data.forEach(row => this.selection.select(row));\n    }\n    handleClickAction(event, action, row) {\n        event.stopPropagation();\n        action.click(row);\n    }\n}\nTableComponent.ɵfac = function TableComponent_Factory(t) { return new (t || TableComponent)(); };\nTableComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TableComponent, selectors: [[\"igo-table\"]], viewQuery: function TableComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c16, true);\n        ɵngcc0.ɵɵstaticViewQuery(MatSort, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.filter = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n    } }, inputs: { database: \"database\", model: \"model\", hasFilterInput: \"hasFilterInput\" }, outputs: { select: \"select\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 14, vars: 5, consts: [[1, \"table-box\"], [\"class\", \"table-header\", 4, \"ngIf\"], [1, \"table-container\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [\"table\", \"\"], [\"matColumnDef\", \"selectionCheckbox\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [3, \"matColumnDef\", 4, \"ngFor\", \"ngForOf\"], [\"matColumnDef\", \"action\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 3, \"ngClass\", \"click\", 4, \"matRowDef\", \"matRowDefColumns\"], [1, \"table-header\"], [\"floatPlaceholder\", \"never\"], [\"matInput\", \"\", 3, \"placeholder\"], [\"filter\", \"\"], [\"mat-header-cell\", \"\"], [3, \"checked\", \"indeterminate\", \"change\"], [\"mat-cell\", \"\"], [3, \"checked\", \"click\", \"change\"], [3, \"matColumnDef\"], [4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"cellHTML\", \"\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\", \"class\", \"mat-cell-text\", 3, \"ngClass\", 4, \"matCellDef\"], [\"mat-cell\", \"\", 1, \"mat-cell-text\", 3, \"ngClass\"], [\"mat-cell\", \"\", \"class\", \"mat-cell-text\", 3, \"ngClass\", \"innerHTML\", 4, \"matCellDef\"], [\"mat-cell\", \"\", 1, \"mat-cell-text\", 3, \"ngClass\", \"innerHTML\"], [\"mat-mini-fab\", \"\", 3, \"color\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"mat-mini-fab\", \"\", 3, \"color\", \"click\"], [3, \"svgIcon\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", 3, \"ngClass\", \"click\"]], template: function TableComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, TableComponent_div_1_Template, 5, 3, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"table\", 3, 4);\n        ɵngcc0.ɵɵelementContainerStart(5, 5);\n        ɵngcc0.ɵɵtemplate(6, TableComponent_th_6_Template, 2, 2, \"th\", 6);\n        ɵngcc0.ɵɵtemplate(7, TableComponent_td_7_Template, 2, 1, \"td\", 7);\n        ɵngcc0.ɵɵelementContainerEnd();\n        ɵngcc0.ɵɵtemplate(8, TableComponent_ng_container_8_Template, 6, 5, \"ng-container\", 8);\n        ɵngcc0.ɵɵelementContainerStart(9, 9);\n        ɵngcc0.ɵɵtemplate(10, TableComponent_th_10_Template, 1, 0, \"th\", 6);\n        ɵngcc0.ɵɵtemplate(11, TableComponent_td_11_Template, 2, 1, \"td\", 7);\n        ɵngcc0.ɵɵelementContainerEnd();\n        ɵngcc0.ɵɵtemplate(12, TableComponent_tr_12_Template, 1, 0, \"tr\", 10);\n        ɵngcc0.ɵɵtemplate(13, TableComponent_tr_13_Template, 1, 2, \"tr\", 11);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasFilterInput);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.model.columns);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n    } }, directives: [ɵngcc3.NgIf, ɵngcc5.MatTable, ɵngcc6.MatSort, ɵngcc5.MatColumnDef, ɵngcc5.MatHeaderCellDef, ɵngcc5.MatCellDef, ɵngcc3.NgForOf, ɵngcc5.MatHeaderRowDef, ɵngcc5.MatRowDef, ɵngcc1.MatFormField, ɵngcc21.MatInput, ɵngcc5.MatHeaderCell, ɵngcc7.MatCheckbox, ɵngcc5.MatCell, ɵngcc6.MatSortHeader, ɵngcc3.NgClass, ɵngcc9.MatButton, ɵngcc8.MatIcon, ɵngcc5.MatHeaderRow, ɵngcc5.MatRow], pipes: [ɵngcc17.TranslatePipe], styles: [\"[_nghost-%COMP%]{display:block;height:100%;width:100%}.table-container[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;height:100%;overflow:auto}.table-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.table-header[_ngcontent-%COMP%]{align-items:baseline;display:flex;flex:0 1 auto;font-size:20px;justify-content:space-between;max-width:500px;min-height:64px;padding:8px 24px 0}tr[mat-header-row][_ngcontent-%COMP%], tr[mat-row][_ngcontent-%COMP%]{height:60px}.mat-cell-text[_ngcontent-%COMP%]{overflow:hidden;word-wrap:break-word}td[mat-cell][_ngcontent-%COMP%]{padding-right:15px}th.mat-header-cell[_ngcontent-%COMP%]{padding-right:5px}button[_ngcontent-%COMP%]{margin-right:10px}\"] });\nTableComponent.propDecorators = {\n    database: [{ type: Input }],\n    model: [{ type: Input }],\n    hasFilterInput: [{ type: Input }],\n    select: [{ type: Output }],\n    filter: [{ type: ViewChild, args: ['filter',] }],\n    sort: [{ type: ViewChild, args: [MatSort, { static: true },] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TableComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-table',\n                template: \"<div class='table-box'>\\n  <div class='table-header' *ngIf=\\\"hasFilterInput\\\">\\n    <mat-form-field floatPlaceholder='never'>\\n      <input matInput #filter [placeholder]=\\\"'igo.common.table.filter' | translate\\\">\\n    </mat-form-field>\\n  </div>\\n\\n  <div class='table-container'>\\n    <table mat-table #table [dataSource]='dataSource' matSort>\\n\\n      <!-- Checkbox Column -->\\n      <ng-container matColumnDef=\\\"selectionCheckbox\\\">\\n        <th mat-header-cell *matHeaderCellDef>\\n          <mat-checkbox (change)=\\\"$event ? masterToggle() : null\\\"\\n                        [checked]=\\\"selection.hasValue() && isAllSelected()\\\"\\n                        [indeterminate]=\\\"selection.hasValue() && !isAllSelected()\\\">\\n          </mat-checkbox>\\n        </th>\\n        <td mat-cell *matCellDef=\\\"let row\\\">\\n          <mat-checkbox (click)=\\\"$event.stopPropagation()\\\"\\n                        (change)=\\\"$event ? selection.toggle(row) : null\\\"\\n                        [checked]=\\\"selection.isSelected(row)\\\">\\n          </mat-checkbox>\\n        </td>\\n      </ng-container>\\n\\n      <ng-container [matColumnDef]='column.name' *ngFor='let column of model.columns'>\\n        <ng-container *ngIf='column.sortable'>\\n          <th mat-header-cell *matHeaderCellDef mat-sort-header> {{column.title}} </th>\\n        </ng-container>\\n\\n        <ng-container *ngIf='!column.sortable'>\\n          <th mat-header-cell *matHeaderCellDef> {{column.title}} </th>\\n        </ng-container>\\n\\n        <ng-container *ngIf=\\\"!column.html; else cellHTML\\\">\\n          <td mat-cell *matCellDef='let row' class=\\\"mat-cell-text\\\"\\n            [ngClass]=\\\"model.cellClassFunc ? model.cellClassFunc(row, column) : {}\\\">\\n            {{getValue(row, column.name)}}\\n          </td>\\n        </ng-container>\\n\\n        <ng-template #cellHTML>\\n          <td mat-cell *matCellDef='let row' class=\\\"mat-cell-text\\\"\\n            [ngClass]=\\\"model.cellClassFunc ? model.cellClassFunc(row, column) : {}\\\"\\n            [innerHTML]=\\\"getValue(row, column.name)\\\">\\n          </td>\\n        </ng-template>\\n      </ng-container>\\n\\n      <!-- Action Column -->\\n      <ng-container matColumnDef='action'>\\n        <th mat-header-cell *matHeaderCellDef></th>\\n        <td mat-cell *matCellDef='let row'>\\n          <button *ngFor='let action of model.actions'\\n          mat-mini-fab\\n          [color]='getActionColor(action.color)'\\n          (click)='handleClickAction($event, action, row)'>\\n            <mat-icon svgIcon=\\\"{{action.icon}}\\\"></mat-icon>\\n          </button>\\n        </td>\\n      </ng-container>\\n\\n      <tr mat-header-row *matHeaderRowDef='displayedColumns;'></tr>\\n      <tr mat-row\\n        *matRowDef='let row; columns: displayedColumns;'\\n        [ngClass]=\\\"model.rowClassFunc ? model.rowClassFunc(row) : {}\\\"\\n        (click)=\\\"selection.toggle(row)\\\">\\n      </tr>\\n\\n    </table>\\n  </div>\\n\\n</div>\\n\",\n                styles: [\":host{display:block;height:100%;width:100%}.table-container{display:flex;flex:1 1 auto;flex-direction:column;height:100%;overflow:auto}.table-box{display:flex;flex-direction:column;height:100%}.table-header{align-items:baseline;display:flex;flex:0 1 auto;font-size:20px;justify-content:space-between;max-width:500px;min-height:64px;padding:8px 24px 0}tr[mat-header-row],tr[mat-row]{height:60px}.mat-cell-text{overflow:hidden;word-wrap:break-word}td[mat-cell]{padding-right:15px}th.mat-header-cell{padding-right:5px}button{margin-right:10px}\"]\n            }]\n    }], function () { return []; }, { select: [{\n            type: Output\n        }], database: [{\n            type: Input\n        }], model: [{\n            type: Input\n        }], hasFilterInput: [{\n            type: Input\n        }], filter: [{\n            type: ViewChild,\n            args: ['filter']\n        }], sort: [{\n            type: ViewChild,\n            args: [MatSort, { static: true }]\n        }] }); })();\n\nclass IgoTableModule {\n    static forRoot() {\n        return {\n            ngModule: IgoTableModule,\n            providers: []\n        };\n    }\n}\nIgoTableModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoTableModule });\nIgoTableModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoTableModule_Factory(t) { return new (t || IgoTableModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            CdkTableModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTableModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatSortModule,\n            MatCheckboxModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoTableModule, { declarations: function () { return [TableComponent]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        CdkTableModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTableModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatSortModule,\n        MatCheckboxModule,\n        IgoLanguageModule]; }, exports: function () { return [TableComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoTableModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    CdkTableModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTableModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatSortModule,\n                    MatCheckboxModule,\n                    IgoLanguageModule\n                ],\n                declarations: [TableComponent],\n                exports: [TableComponent]\n            }]\n    }], null, null); })();\n\nvar ToolboxColor;\n(function (ToolboxColor) {\n    ToolboxColor[\"White\"] = \"white\";\n    ToolboxColor[\"Grey\"] = \"grey\";\n    ToolboxColor[\"Primary\"] = \"primary\";\n})(ToolboxColor || (ToolboxColor = {}));\n\nfunction toolSlideInOut(speed = '300ms', type = 'ease-in-out') {\n    return trigger('toolSlideInOut', [\n        state('enter', style({\n            transform: 'translate3d(0, 0, 0)'\n        })),\n        transition('void => enter', animate(speed + ' ' + type))\n    ]);\n}\n\nclass ToolboxComponent {\n    constructor() {\n        /**\n         * Observable of the active tool\n         */\n        this.activeTool$ = new BehaviorSubject(undefined);\n        /**\n         * Store of actions that toggle tools\n         */\n        this.actionStore = new ActionStore([]);\n        /**\n         * Observable of he anmation state\n         */\n        this.animation$ = new BehaviorSubject('none');\n        /**\n         * Observable of the toolbar\n         */\n        this.toolbar$ = new BehaviorSubject([]);\n        /**\n         * Whether the Toolbar should display actions' titles\n         */\n        this.toolbarWithTitle$ = this.activeTool$.pipe(map((tool) => tool === undefined));\n        /**\n         * Observable of the ongoing animation. This is useful when\n         * multiple animations are triggered at once i.e. when the user clicks\n         * too fast on different actions\n         */\n        this.animating$ = new BehaviorSubject(false);\n        /**\n         * Whether the toolbox should animate the first tool entering\n         */\n        this.animate = false;\n        /**\n         * Color of Toolbox\n         */\n        this.color = ToolboxColor.White;\n    }\n    /**\n     * @ignore\n     */\n    get classColorGrey() {\n        return this.color === ToolboxColor.Grey;\n    }\n    /**\n     * @ignore\n     */\n    get classColorPrimary() {\n        return this.color === ToolboxColor.Primary;\n    }\n    /**\n     * Initialize the toolbar and subscribe to the active tool\n     * @internal\n     */\n    ngOnInit() {\n        this.toolbar$$ = this.toolbox.toolbar$.subscribe((toolbar) => this.onToolbarChange(toolbar));\n        this.activeTool$$ = this.toolbox.activeTool$.subscribe((tool) => this.onActiveToolChange(tool));\n    }\n    /**\n     * Unsubscribe to the active tool and destroy the action store\n     * @internal\n     */\n    ngOnDestroy() {\n        this.toolbar$$.unsubscribe();\n        this.activeTool$$.unsubscribe();\n        this.actionStore.destroy();\n    }\n    /**\n     * Track the starting animation\n     * @internal\n     */\n    onAnimationStart() {\n        this.animating$.next(true);\n    }\n    /**\n     * Untrack the completed animation\n     * @internal\n     */\n    onAnimationComplete() {\n        this.animating$.next(false);\n    }\n    /**\n     * Return a tool's inputs\n     * @param tool Tool\n     * @returns Tool inputs\n     * @internal\n     */\n    getToolInputs(tool) {\n        return tool.options || {};\n    }\n    /**\n     * Initialize an action store\n     * @param toolbar Toolbar\n     */\n    onToolbarChange(toolbar) {\n        this.setToolbar(toolbar);\n    }\n    /**\n     * Activate a tool and trigger an animation or not\n     * @param tool Tool to activate\n     */\n    onActiveToolChange(tool) {\n        if (!this.animate) {\n            this.setActiveTool(tool);\n            return;\n        }\n        this.onAnimate(() => this.setActiveTool(tool));\n    }\n    /**\n     * Set the active tool\n     * @param tool Tool to activate\n     */\n    setActiveTool(tool) {\n        if (tool === undefined) {\n            this.actionStore.state.updateAll({ active: false });\n        }\n        else {\n            const action = this.actionStore.get(tool.name);\n            if (action !== undefined) {\n                this.actionStore.state.update(action, { active: true }, true);\n            }\n        }\n        this.activeTool$.next(tool);\n        if (this.animate) {\n            this.animation$.next('enter');\n        }\n    }\n    /**\n     * Initialize the toolbar\n     */\n    setToolbar(toolbar) {\n        const actions = toolbar.reduce((acc, toolName) => {\n            const tool = this.toolbox.getTool(toolName);\n            if (tool === undefined) {\n                return acc;\n            }\n            acc.push({\n                id: tool.name,\n                title: tool.title,\n                icon: tool.icon,\n                // iconImage: tool.iconImage,\n                tooltip: tool.tooltip,\n                args: [tool, this.toolbox],\n                handler: (_tool, _toolbox) => {\n                    _toolbox.activateTool(_tool.name);\n                },\n                ngClass: (_tool, _toolbox) => {\n                    return this.toolbox.activeTool$.pipe(map((activeTool) => {\n                        let toolActivated = false;\n                        if (activeTool !== undefined && _tool.name === activeTool.name) {\n                            toolActivated = true;\n                        }\n                        let childrenToolActivated = false;\n                        if (activeTool !== undefined &&\n                            _tool.name === activeTool.parent) {\n                            childrenToolActivated = true;\n                        }\n                        return {\n                            'tool-activated': toolActivated,\n                            'children-tool-activated': childrenToolActivated\n                        };\n                    }));\n                }\n            });\n            return acc;\n        }, []);\n        this.actionStore.load(actions);\n        this.toolbar$.next(toolbar);\n    }\n    /**\n     * Observe the ongoing animation and ignore any incoming animation\n     * while one is still ongoing.\n     * @param callback Callback to execute when the animation completes\n     */\n    onAnimate(callback) {\n        this.unAnimate();\n        this.animating$$ = this.animating$.subscribe((animation) => {\n            if (!animation) {\n                callback.call(this);\n                this.unAnimate();\n            }\n        });\n    }\n    /**\n     * Stop observing an animation when it's complete\n     */\n    unAnimate() {\n        if (this.animating$$) {\n            this.animating$$.unsubscribe();\n        }\n    }\n}\nToolboxComponent.ɵfac = function ToolboxComponent_Factory(t) { return new (t || ToolboxComponent)(); };\nToolboxComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ToolboxComponent, selectors: [[\"igo-toolbox\"]], hostVars: 4, hostBindings: function ToolboxComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"color-grey\", ctx.classColorGrey)(\"color-primary\", ctx.classColorPrimary);\n    } }, inputs: { animate: \"animate\", color: \"color\", toolbox: \"toolbox\" }, decls: 4, vars: 6, consts: [[3, \"store\", \"withIcon\", \"withTitle\", \"withTooltip\", \"scrollActive\", \"horizontal\", 4, \"ngIf\"], [\"class\", \"igo-tool-container\", 3, \"ngClass\", 4, \"ngIf\"], [3, \"store\", \"withIcon\", \"withTitle\", \"withTooltip\", \"scrollActive\", \"horizontal\"], [1, \"igo-tool-container\", 3, \"ngClass\"], [3, \"component\", \"inputs\"]], template: function ToolboxComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ToolboxComponent_igo_actionbar_0_Template, 4, 12, \"igo-actionbar\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵtemplate(2, ToolboxComponent_div_2_Template, 3, 9, \"div\", 1);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 2, ctx.toolbar$).length > 0);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(3, 4, ctx.activeTool$));\n    } }, directives: [ɵngcc3.NgIf, ActionbarComponent, ɵngcc3.NgClass, DynamicOutletComponent], pipes: [ɵngcc3.AsyncPipe], styles: [\"[_nghost-%COMP%]{display:block;height:100%;overflow:hidden;position:relative;width:100%}.igo-tool-container[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0}.igo-tool-container-with-animation[_ngcontent-%COMP%]{transform:translate3d(100%,0,0)}.igo-tool-container-with-toolbar[_ngcontent-%COMP%]{left:50px}igo-actionbar[_ngcontent-%COMP%]{height:100%}igo-actionbar.with-title[_ngcontent-%COMP%]{overflow:auto;width:100%}igo-actionbar[_ngcontent-%COMP%]:not(.with-title){-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd;overflow:hidden;width:48px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-actionbar[_ngcontent-%COMP%]:not(.with-title){overflow:auto}}igo-dynamic-outlet[_ngcontent-%COMP%]{overflow:auto}\"], data: { animation: [toolSlideInOut()] }, changeDetection: 0 });\nToolboxComponent.propDecorators = {\n    toolbox: [{ type: Input }],\n    animate: [{ type: Input }],\n    color: [{ type: Input }],\n    classColorGrey: [{ type: HostBinding, args: ['class.color-grey',] }],\n    classColorPrimary: [{ type: HostBinding, args: ['class.color-primary',] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ToolboxComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-toolbox',\n                template: \"<igo-actionbar\\n  *ngIf=\\\"(toolbar$ | async).length > 0\\\"\\n  [store]=\\\"actionStore\\\"\\n  [withIcon]=\\\"true\\\"\\n  [withTitle]=\\\"toolbarWithTitle$ | async\\\"\\n  [withTooltip]=\\\"!(toolbarWithTitle$ | async)\\\"\\n  [scrollActive]=\\\"toolbarWithTitle$ | async\\\"\\n  [horizontal]=\\\"false\\\">\\n</igo-actionbar>\\n\\n<div\\n  *ngIf=\\\"activeTool$ | async as tool\\\"\\n  class=\\\"igo-tool-container\\\"\\n  [ngClass]=\\\"{'igo-tool-container-with-toolbar': !actionStore.empty, 'igo-tool-container-with-animation': animate}\\\"\\n  [@toolSlideInOut]=\\\"animation$ | async\\\"\\n  (@toolSlideInOut.start)=\\\"onAnimationStart()\\\"\\n  (@toolSlideInOut.done)=\\\"onAnimationComplete()\\\">\\n\\n  <igo-dynamic-outlet\\n    [component]=\\\"tool.component\\\"\\n    [inputs]=\\\"getToolInputs(tool)\\\">\\n  </igo-dynamic-outlet>\\n\\n</div>\\n\",\n                animations: [toolSlideInOut()],\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block;height:100%;overflow:hidden;position:relative;width:100%}.igo-tool-container{bottom:0;left:0;position:absolute;right:0;top:0}.igo-tool-container-with-animation{transform:translate3d(100%,0,0)}.igo-tool-container-with-toolbar{left:50px}igo-actionbar{height:100%}igo-actionbar.with-title{overflow:auto;width:100%}igo-actionbar:not(.with-title){-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd;overflow:hidden;width:48px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-actionbar:not(.with-title){overflow:auto}}igo-dynamic-outlet{overflow:auto}\"]\n            }]\n    }], function () { return []; }, { animate: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], classColorGrey: [{\n            type: HostBinding,\n            args: ['class.color-grey']\n        }], classColorPrimary: [{\n            type: HostBinding,\n            args: ['class.color-primary']\n        }], toolbox: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoToolboxModule {\n}\nIgoToolboxModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoToolboxModule });\nIgoToolboxModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoToolboxModule_Factory(t) { return new (t || IgoToolboxModule)(); }, imports: [[\n            CommonModule,\n            IgoActionModule,\n            IgoDynamicComponentModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoToolboxModule, { declarations: function () { return [ToolboxComponent]; }, imports: function () { return [CommonModule, IgoActionModule, IgoDynamicComponentModule]; }, exports: function () { return [ToolboxComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoToolboxModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoActionModule,\n                    IgoDynamicComponentModule\n                ],\n                exports: [\n                    ToolboxComponent\n                ],\n                declarations: [\n                    ToolboxComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoToolModule {\n    static forRoot() {\n        return {\n            ngModule: IgoToolModule,\n            providers: [\n                ToolService\n            ]\n        };\n    }\n}\nIgoToolModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoToolModule });\nIgoToolModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoToolModule_Factory(t) { return new (t || IgoToolModule)(); }, imports: [[\n            CommonModule\n        ], IgoToolboxModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoToolModule, { imports: function () { return [CommonModule]; }, exports: function () { return [IgoToolboxModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    IgoToolboxModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n\n/**\n * This component dynamically renders a widget. It also subscribes\n * to the widget's 'cancel' and 'complete' events and destroys it\n * when any of those event is emitted.\n */\nclass WidgetOutletComponent {\n    constructor() {\n        /**\n         * Widget subscribers to 'cancel' and 'complete'\n         * @internal\n         */\n        this.baseSubscribers = {\n            cancel: (event) => this.onCancel(event),\n            complete: (event) => this.onComplete(event)\n        };\n        /**\n         * Widget subscribers\n         */\n        this.subscribers = {};\n        /**\n         * Event emitted when the widget emits 'complete'\n         */\n        this.complete = new EventEmitter();\n        /**\n         * Event emitted when the widget emits 'cancel'\n         */\n        this.cancel = new EventEmitter();\n    }\n    /**\n     * Destroy the current widget and all it's inner subscriptions\n     * @internal\n     */\n    ngOnDestroy() {\n        this.destroyWidget();\n    }\n    /**\n     * Get the effective subscribers. That means a combination of the base\n     * subscribers and any subscriber given as input.\n     * @returns Combined subscribers\n     * @internal\n     */\n    getEffectiveSubscribers() {\n        const subscribers = Object.assign({}, this.subscribers);\n        // Base subscribers\n        Object.keys(this.baseSubscribers).forEach((key) => {\n            const subscriber = subscribers[key];\n            const baseSubscriber = this.baseSubscribers[key];\n            if (subscriber !== undefined) {\n                subscribers[key] = (event) => {\n                    subscriber(event);\n                    baseSubscriber(event);\n                };\n            }\n            else {\n                subscribers[key] = baseSubscriber;\n            }\n        });\n        return subscribers;\n    }\n    /**\n     * When the widget emits 'cancel', propagate that event and destroy\n     * the widget\n     */\n    onCancel(event) {\n        this.cancel.emit(event);\n        this.destroyWidget();\n    }\n    /**\n     * When the widget emits 'complete', propagate that event and destroy\n     * the widget\n     */\n    onComplete(event) {\n        this.complete.emit(event);\n        this.destroyWidget();\n    }\n    /**\n     * Destroy the current widget\n     */\n    destroyWidget() {\n        if (this.widget !== undefined) {\n            this.widget.destroy();\n        }\n        this.widget = undefined;\n    }\n}\nWidgetOutletComponent.ɵfac = function WidgetOutletComponent_Factory(t) { return new (t || WidgetOutletComponent)(); };\nWidgetOutletComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: WidgetOutletComponent, selectors: [[\"igo-widget-outlet\"]], inputs: { subscribers: \"subscribers\", widget: \"widget\", inputs: \"inputs\" }, outputs: { complete: \"complete\", cancel: \"cancel\" }, decls: 1, vars: 1, consts: [[3, \"component\", \"inputs\", \"subscribers\", 4, \"ngIf\"], [3, \"component\", \"inputs\", \"subscribers\"]], template: function WidgetOutletComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, WidgetOutletComponent_igo_dynamic_outlet_0_Template, 1, 3, \"igo-dynamic-outlet\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.widget);\n    } }, directives: [ɵngcc3.NgIf, DynamicOutletComponent], styles: [\"igo-dynamic-outlet[_ngcontent-%COMP%]{height:100%}\"], changeDetection: 0 });\nWidgetOutletComponent.ctorParameters = () => [];\nWidgetOutletComponent.propDecorators = {\n    widget: [{ type: Input }],\n    inputs: [{ type: Input }],\n    subscribers: [{ type: Input }],\n    complete: [{ type: Output }],\n    cancel: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WidgetOutletComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-widget-outlet',\n                template: \"<igo-dynamic-outlet\\n  *ngIf=\\\"widget\\\"\\n  [component]=\\\"widget\\\"\\n  [inputs]=\\\"inputs\\\"\\n  [subscribers]=\\\"getEffectiveSubscribers()\\\">\\n</igo-dynamic-outlet>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"igo-dynamic-outlet{height:100%}\"]\n            }]\n    }], function () { return []; }, { subscribers: [{\n            type: Input\n        }], complete: [{\n            type: Output\n        }], cancel: [{\n            type: Output\n        }], widget: [{\n            type: Input\n        }], inputs: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWidgetOutletModule {\n}\nIgoWidgetOutletModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoWidgetOutletModule });\nIgoWidgetOutletModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoWidgetOutletModule_Factory(t) { return new (t || IgoWidgetOutletModule)(); }, imports: [[\n            CommonModule,\n            IgoDynamicComponentModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoWidgetOutletModule, { declarations: function () { return [WidgetOutletComponent]; }, imports: function () { return [CommonModule, IgoDynamicComponentModule]; }, exports: function () { return [WidgetOutletComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoWidgetOutletModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoDynamicComponentModule\n                ],\n                exports: [\n                    WidgetOutletComponent\n                ],\n                declarations: [\n                    WidgetOutletComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass WidgetService {\n    constructor(dynamicComponentService) {\n        this.dynamicComponentService = dynamicComponentService;\n    }\n    create(widgetCls) {\n        return this.dynamicComponentService.create(widgetCls);\n    }\n}\nWidgetService.ɵfac = function WidgetService_Factory(t) { return new (t || WidgetService)(ɵngcc0.ɵɵinject(DynamicComponentService)); };\nWidgetService.ɵprov = ɵɵdefineInjectable({ factory: function WidgetService_Factory() { return new WidgetService(ɵɵinject(DynamicComponentService)); }, token: WidgetService, providedIn: \"root\" });\nWidgetService.ctorParameters = () => [\n    { type: DynamicComponentService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WidgetService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: DynamicComponentService }]; }, null); })();\n\nclass IgoWidgetModule {\n}\nIgoWidgetModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoWidgetModule });\nIgoWidgetModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoWidgetModule_Factory(t) { return new (t || IgoWidgetModule)(); }, providers: [\n        WidgetService\n    ], imports: [[\n            CommonModule,\n            IgoWidgetOutletModule\n        ], IgoWidgetOutletModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoWidgetModule, { imports: function () { return [CommonModule, IgoWidgetOutletModule]; }, exports: function () { return [IgoWidgetOutletModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoWidgetModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoWidgetOutletModule\n                ],\n                exports: [\n                    IgoWidgetOutletModule\n                ],\n                declarations: [],\n                providers: [\n                    WidgetService\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * The class is a specialized version of an EntityStore that stores\n * workspaces.\n */\nclass WorkspaceStore extends EntityStore {\n    constructor() {\n        super(...arguments);\n        this.activeWorkspace$ = new BehaviorSubject(undefined);\n    }\n    /**\n     * Activate the an workspace workspace and deactivate the one currently active\n     * @param workspace Workspace\n     */\n    activateWorkspace(workspace) {\n        const active = this.activeWorkspace$.value;\n        if (active !== undefined) {\n            active.deactivate();\n        }\n        this.deactivateWorkspace();\n        if (workspace !== undefined) {\n            this.state.update(workspace, { active: true, selected: true }, true);\n            this.activeWorkspace$.next(workspace);\n            workspace.activate();\n        }\n    }\n    /**\n     * Deactivate the current workspace\n     * @param workspace Workspace\n     */\n    deactivateWorkspace() {\n        const active = this.activeWorkspace$.value;\n        if (active !== undefined) {\n            active.deactivate();\n            this.activeWorkspace$.next(undefined);\n        }\n    }\n}\n\n/**\n * Drop list that activates the selected workspace emit an event.\n */\nclass WorkspaceSelectorComponent {\n    constructor() {\n        /**\n         * Event emitted when an workspace is selected or unselected\n         */\n        this.selectedChange = new EventEmitter();\n    }\n    /**\n     * @internal\n     */\n    getWorkspaceTitle(workspace) {\n        return getEntityTitle(workspace);\n    }\n    /**\n     * When an workspace is manually selected, select it into the\n     * store and emit an event.\n     * @internal\n     * @param event The selection change event\n     */\n    onSelectedChange(event) {\n        const workspace = event.value;\n        this.store.activateWorkspace(workspace);\n        this.selectedChange.emit({ selected: true, value: workspace });\n    }\n}\nWorkspaceSelectorComponent.ɵfac = function WorkspaceSelectorComponent_Factory(t) { return new (t || WorkspaceSelectorComponent)(); };\nWorkspaceSelectorComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: WorkspaceSelectorComponent, selectors: [[\"igo-workspace-selector\"]], inputs: { store: \"store\" }, outputs: { selectedChange: \"selectedChange\" }, decls: 1, vars: 3, consts: [[3, \"store\", \"multi\", \"titleAccessor\", \"selectedChange\"]], template: function WorkspaceSelectorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-entity-selector\", 0);\n        ɵngcc0.ɵɵlistener(\"selectedChange\", function WorkspaceSelectorComponent_Template_igo_entity_selector_selectedChange_0_listener($event) { return ctx.onSelectedChange($event); });\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"store\", ctx.store)(\"multi\", false)(\"titleAccessor\", ctx.getWorkspaceTitle);\n    } }, directives: [EntitySelectorComponent], styles: [\"igo-entity-selector[_ngcontent-%COMP%]     mat-form-field .mat-form-field-infix{padding:0}igo-entity-selector[_ngcontent-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:1.75em}\"], changeDetection: 0 });\nWorkspaceSelectorComponent.propDecorators = {\n    store: [{ type: Input }],\n    selectedChange: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WorkspaceSelectorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-workspace-selector',\n                template: \"<igo-entity-selector\\n  [store]=\\\"store\\\"\\n  [multi]=\\\"false\\\"\\n  [titleAccessor]=\\\"getWorkspaceTitle\\\"\\n  (selectedChange)=\\\"onSelectedChange($event)\\\">\\n</igo-entity-selector>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"igo-entity-selector ::ng-deep mat-form-field .mat-form-field-infix{padding:0}igo-entity-selector ::ng-deep mat-form-field .mat-form-field-wrapper{padding-bottom:1.75em}\"]\n            }]\n    }], function () { return []; }, { selectedChange: [{\n            type: Output\n        }], store: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWorkspaceSelectorModule {\n}\nIgoWorkspaceSelectorModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoWorkspaceSelectorModule });\nIgoWorkspaceSelectorModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoWorkspaceSelectorModule_Factory(t) { return new (t || IgoWorkspaceSelectorModule)(); }, imports: [[\n            CommonModule,\n            IgoEntitySelectorModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoWorkspaceSelectorModule, { declarations: function () { return [WorkspaceSelectorComponent]; }, imports: function () { return [CommonModule, IgoEntitySelectorModule]; }, exports: function () { return [WorkspaceSelectorComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoWorkspaceSelectorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoEntitySelectorModule\n                ],\n                exports: [\n                    WorkspaceSelectorComponent\n                ],\n                declarations: [\n                    WorkspaceSelectorComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * This class is responsible of managing the relations between\n * entities and the actions that consume them. It also defines an\n * entity table template that may be used by an entity table component.\n */\nclass Workspace {\n    constructor(options) {\n        this.options = options;\n        /**\n         * Observable of the selected widget\n         */\n        this.widget$ = new BehaviorSubject(undefined);\n        /**\n         * Observable of the selected widget's inputs\n         */\n        this.widgetInputs$ = new BehaviorSubject({});\n        /**\n         * Observable of the selected widget's subscribers\n         */\n        this.widgetSubscribers$ = new BehaviorSubject({});\n        /**\n         * State change that trigger an update of the actions availability\n         */\n        this.change = new Subject();\n        this.active$ = new BehaviorSubject(false);\n    }\n    /**\n     * Workspace id\n     */\n    get id() { return this.options.id; }\n    /**\n     * Workspace title\n     */\n    get title() { return this.options.title; }\n    /**\n     * Workspace title\n     */\n    get meta() { return this.options.meta || {}; }\n    /**\n     * Entities store\n     */\n    get entityStore() { return this.options.entityStore; }\n    /**\n     * Actions store (some actions activate a widget)\n     */\n    get actionStore() { return this.options.actionStore; }\n    /**\n     * Selected widget\n     */\n    get widget() { return this.widget$.value; }\n    /**\n     * Whether a widget is selected\n     */\n    get hasWidget() { return this.widget !== undefined; }\n    /**\n     * Whether this strategy is active\n     * @internal\n     */\n    get active() { return this.active$.value; }\n    /**\n     * Activate the workspace. By doing that, the workspace will observe\n     * the selected entity (from the store) and update the actions availability.\n     * For example, some actions require an entity to be selected.\n     */\n    activate() {\n        if (this.active === true) {\n            this.deactivate();\n        }\n        this.active$.next(true);\n        if (this.entityStore !== undefined) {\n            this.entities$$ = this.entityStore.stateView.all$()\n                .subscribe(() => this.onStateChange());\n        }\n        this.change.next();\n    }\n    /**\n     * Deactivate the workspace. Unsubcribe to the selected entity.\n     */\n    deactivate() {\n        this.active$.next(false);\n        this.deactivateWidget();\n        if (this.entities$$ !== undefined) {\n            this.entities$$.unsubscribe();\n        }\n        if (this.change$ !== undefined) {\n            this.change$.unsubscribe();\n        }\n    }\n    /**\n     * Activate a widget. In itself, activating a widget doesn't render it but,\n     * if an WorkspaceWidgetOutlet component is bound to this workspace, the widget will\n     * show up.\n     * @param widget Widget\n     * @param inputs Inputs the widget will receive\n     */\n    activateWidget(widget, inputs = {}, subscribers = {}) {\n        this.widget$.next(widget);\n        this.widgetInputs$.next(inputs);\n        this.widgetSubscribers$.next(subscribers);\n        this.change.next();\n    }\n    /**\n     * Deactivate a widget.\n     */\n    deactivateWidget() {\n        this.widget$.next(undefined);\n        this.change.next();\n    }\n    /**\n     * When the state changes, update the actions availability.\n     */\n    onStateChange() {\n        this.change.next();\n    }\n}\n\n/**\n * This component dynamically render an Workspace's active widget.\n * It also deactivate that widget whenever the widget's component\n * emit the 'cancel' or 'complete' event.\n */\nclass WorkspaceWidgetOutletComponent {\n    constructor() {\n        /**\n         * Event emitted when a widget is deactivate which happens\n         * when the widget's component emits the 'cancel' or 'complete' event.\n         */\n        this.deactivateWidget = new EventEmitter();\n    }\n    /**\n     * Observable of the workspace's active widget\n     * @internal\n     */\n    get widget$() { return this.workspace.widget$; }\n    /**\n     * Observable of the workspace's widget inputs\n     * @internal\n     */\n    get widgetInputs$() {\n        return this.workspace.widgetInputs$;\n    }\n    /**\n     * Observable of the workspace's widget inputs\n     * @internal\n     */\n    get widgetSubscribers$() {\n        return this.workspace.widgetSubscribers$;\n    }\n    /**\n     * When a widget's component emit the 'cancel' event,\n     * deactivate that widget and emit the 'deactivateWidget' event.\n     * @param widget Widget\n     * @internal\n     */\n    onWidgetCancel(widget) {\n        this.workspace.deactivateWidget();\n        this.deactivateWidget.emit(widget);\n    }\n    /**\n     * When a widget's component emit the 'cancel' event,\n     * deactivate that widget and emit the 'deactivateWidget' event.\n     * @param widget Widget\n     * @internal\n     */\n    onWidgetComplete(widget) {\n        this.workspace.deactivateWidget();\n        this.deactivateWidget.emit(widget);\n    }\n}\nWorkspaceWidgetOutletComponent.ɵfac = function WorkspaceWidgetOutletComponent_Factory(t) { return new (t || WorkspaceWidgetOutletComponent)(); };\nWorkspaceWidgetOutletComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: WorkspaceWidgetOutletComponent, selectors: [[\"igo-workspace-widget-outlet\"]], inputs: { workspace: \"workspace\" }, outputs: { deactivateWidget: \"deactivateWidget\" }, decls: 2, vars: 3, consts: [[4, \"ngIf\"], [3, \"widget\", \"inputs\", \"subscribers\", \"cancel\", \"complete\"]], template: function WorkspaceWidgetOutletComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, WorkspaceWidgetOutletComponent_ng_container_0_Template, 4, 7, \"ng-container\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx.widget$));\n    } }, directives: [ɵngcc3.NgIf, WidgetOutletComponent], pipes: [ɵngcc3.AsyncPipe], styles: [\"igo-widget-outlet[_ngcontent-%COMP%]{height:100%}\"], changeDetection: 0 });\nWorkspaceWidgetOutletComponent.ctorParameters = () => [];\nWorkspaceWidgetOutletComponent.propDecorators = {\n    workspace: [{ type: Input }],\n    deactivateWidget: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WorkspaceWidgetOutletComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-workspace-widget-outlet',\n                template: \"<ng-container *ngIf=\\\"widget$ | async as widget\\\">\\n  <igo-widget-outlet\\n    [widget]=\\\"widget\\\"\\n    [inputs]=\\\"widgetInputs$ | async\\\"\\n    [subscribers]=\\\"widgetSubscribers$ | async\\\"\\n    (cancel)=\\\"onWidgetCancel(widget)\\\"\\n    (complete)=\\\"onWidgetComplete(widget)\\\">\\n  </igo-widget-outlet>\\n</ng-container>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"igo-widget-outlet{height:100%}\"]\n            }]\n    }], function () { return []; }, { deactivateWidget: [{\n            type: Output\n        }], workspace: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWorkspaceWidgetOutletModule {\n}\nIgoWorkspaceWidgetOutletModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoWorkspaceWidgetOutletModule });\nIgoWorkspaceWidgetOutletModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoWorkspaceWidgetOutletModule_Factory(t) { return new (t || IgoWorkspaceWidgetOutletModule)(); }, imports: [[\n            CommonModule,\n            IgoWidgetOutletModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoWorkspaceWidgetOutletModule, { declarations: function () { return [WorkspaceWidgetOutletComponent]; }, imports: function () { return [CommonModule, IgoWidgetOutletModule]; }, exports: function () { return [WorkspaceWidgetOutletComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoWorkspaceWidgetOutletModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoWidgetOutletModule\n                ],\n                exports: [\n                    WorkspaceWidgetOutletComponent\n                ],\n                declarations: [\n                    WorkspaceWidgetOutletComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoWorkspaceModule {\n}\nIgoWorkspaceModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoWorkspaceModule });\nIgoWorkspaceModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoWorkspaceModule_Factory(t) { return new (t || IgoWorkspaceModule)(); }, imports: [[\n            CommonModule\n        ], IgoWorkspaceSelectorModule, IgoWorkspaceWidgetOutletModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoWorkspaceModule, { imports: function () { return [CommonModule]; }, exports: function () { return [IgoWorkspaceSelectorModule, IgoWorkspaceWidgetOutletModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoWorkspaceModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    IgoWorkspaceSelectorModule,\n                    IgoWorkspaceWidgetOutletModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n\nfunction ToolComponent(tool) {\n    return (compType) => {\n        ToolService.register(Object.assign({}, tool, {\n            component: compType\n        }));\n    };\n}\n\nclass Widget extends DynamicComponent {\n}\n\n/*\n * Public API Surface of common\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ActionStore, ActionbarComponent, ActionbarMode, BackdropComponent, ClickoutDirective, ClonePipe, CollapseDirective, CollapsibleComponent, ConfirmDialogComponent, ConfirmDialogService, ContextMenuDirective, CustomHtmlComponent, DragAndDropDirective, DynamicComponent, DynamicComponentService, DynamicOutletComponent, EntityOperationType, EntitySelectorComponent, EntityStateManager, EntityStore, EntityStoreFilterCustomFuncStrategy, EntityStoreFilterSelectionStrategy, EntityStoreStrategy, EntityStoreWatcher, EntityTableColumnRenderer, EntityTableComponent, EntityTablePaginatorComponent, EntityTableScrollBehavior, EntityTableSelectionState, EntityTransaction, EntityView, FlexibleComponent, FormComponent, FormFieldComponent, FormFieldSelectComponent, FormFieldService, FormFieldTextComponent, FormFieldTextareaComponent, FormGroupComponent, FormService, IgoActionModule, IgoActionbarModule, IgoBackdropModule, IgoBadgeIconDirective, IgoClickoutModule, IgoCloneModule, IgoCollapsibleModule, IgoConfirmDialogModule, IgoContextMenuModule, IgoCustomHtmlModule, IgoDrapDropModule, IgoDynamicComponentModule, IgoDynamicOutletModule, IgoEntityModule, IgoEntitySelectorModule, IgoEntityTableModule, IgoEntityTablePaginatorModule, IgoFlexibleModule, IgoFormFieldComponent, IgoFormFieldModule, IgoFormFormModule, IgoFormGroupModule, IgoFormModule, IgoImageModule, IgoInteractiveTourModule, IgoJsonDialogModule, IgoKeyValueModule, IgoListModule, IgoMatBadgeIconModule, IgoPanelModule, IgoSidenavModule, IgoSpinnerModule, IgoStopPropagationModule, IgoTableModule, IgoToolModule, IgoToolboxModule, IgoWidgetModule, IgoWidgetOutletModule, IgoWorkspaceModule, IgoWorkspaceSelectorModule, IgoWorkspaceWidgetOutletModule, InteractiveTourComponent, InteractiveTourLoader, InteractiveTourService, JsonDialogComponent, JsonDialogService, KeyValuePipe, ListComponent, ListItemDirective, PanelComponent, SanitizeHtmlPipe, SecureImagePipe, SidenavShimDirective, SpinnerActivityDirective, SpinnerComponent, StopDropPropagationDirective, StopPropagationDirective, TableActionColor, TableComponent, TableDataSource, TableDatabase, ToolComponent, ToolService, Toolbox, ToolboxColor, ToolboxComponent, Widget, WidgetOutletComponent, WidgetService, Workspace, WorkspaceSelectorComponent, WorkspaceStore, WorkspaceWidgetOutletComponent, formControlIsRequired, getAllFormFields, getControlErrorMessage, getDefaultErrorMessages, getEntityIcon, getEntityId, getEntityProperty, getEntityRevision, getEntityTitle, getEntityTitleHtml, getFormFieldByName, ActionbarComponent as ɵa, ActionbarItemComponent as ɵb, EntitySelectorComponent as ɵba, StopDropPropagationDirective as ɵbb, StopPropagationDirective as ɵbc, EntityTablePaginatorComponent as ɵbd, EntityTableComponent as ɵbe, EntityTableRowDirective as ɵbf, SecureImagePipe as ɵbg, InteractiveTourComponent as ɵbh, InteractiveTourService as ɵbi, InteractiveTourLoader as ɵbj, ToolService as ɵbk, KeyValuePipe as ɵbl, JsonDialogComponent as ɵbm, JsonDialogService as ɵbn, ListItemDirective as ɵbo, ListComponent as ɵbp, PanelComponent as ɵbq, SidenavShimDirective as ɵbr, SpinnerActivityDirective as ɵbs, SpinnerComponent as ɵbt, TableComponent as ɵbu, ToolboxComponent as ɵbv, toolSlideInOut as ɵbw, WidgetOutletComponent as ɵbx, WidgetService as ɵby, WorkspaceSelectorComponent as ɵbz, BackdropComponent as ɵc, WorkspaceWidgetOutletComponent as ɵca, IgoBadgeIconDirective as ɵd, ClickoutDirective as ɵe, ClonePipe as ɵf, CollapsibleComponent as ɵg, CollapseDirective as ɵh, ConfirmDialogComponent as ɵi, ConfirmDialogService as ɵj, ContextMenuDirective as ɵk, SanitizeHtmlPipe as ɵl, CustomHtmlComponent as ɵm, DragAndDropDirective as ɵn, DynamicOutletComponent as ɵo, DynamicComponentService as ɵp, FlexibleComponent as ɵq, FormFieldComponent as ɵr, FormFieldService as ɵs, FormFieldSelectComponent as ɵt, IgoFormFieldComponent as ɵu, FormFieldTextComponent as ɵv, FormFieldTextareaComponent as ɵw, FormGroupComponent as ɵx, FormComponent as ɵy, FormService as ɵz };\n\n//# sourceMappingURL=igo2-common.js.map","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppHomeComponent } from './home.component';\n\nconst routes: Routes = [\n  {\n    path: 'home',\n    component: AppHomeComponent\n  }\n];\n\nexport const AppHomeRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\nimport { InteractiveTourService } from '@igo2/common';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class AppHomeComponent {\n  constructor(private interactiveTourService: InteractiveTourService) {}\n\n  startTour() {\n    this.interactiveTourService.startTour('global');\n  }\n}\n","<div style=\"text-align:center\">\n  <h1 id=\"igo-title\">\n    Welcome to IGO\n  </h1>\n  <img  class=\"igo-logo\" width=\"180\" src=\"assets/igo2/core/logo.png\">\n</div>\n\n<p>\n  <igo-interactive-tour\n    tourToStart = \"global\"\n    menuIsOpen = true\n    styleButton = \"raised\">\n  </igo-interactive-tour>\n</p>\n\n<p>\n  IGO2 library contains many components and services that may benefit any web application. <br>\n  IGO2 library is open source project using Angular, Angular Material and OpenLayers.\n</p>\n\n<h3>IGO2 library is divided into several elements: </h3>\n<ul>\n  <li><b>@igo2/utils</b> : Basic utilies without dependency (ex: base64, clipboard, uuid)</li>\n  <li><b>@igo2/core</b> : Element affecting the core of the application (ex: config, language, message, media, request)</li>\n  <li><b>@igo2/common</b> : Library containing reusable components (ex: clickout, drag-drop, list, panel, spinner, table)</li>\n  <li><b>@igo2/auth</b> : Library grouping the authentication and security module</li>\n  <li><b>@igo2/geo</b> : Library containing the geomatic components. Depends on Openlayers.</li>\n  <li><b>@igo2/context</b> : Library of components uniting @igo2/geo and @igo2/auth</li>\n  <li><b>@igo2/integration</b> : Library integrate basic components</li>\n</ul>\n\n<h2>Here are some links to help you start: </h2>\n<ul>\n  <li>\n    <h2><a target=\"_blank\" rel=\"noopener\" href=\"https://github.com/infra-geo-ouverte/igo2-lib/blob/master/README.md#user-installation\">Installation</a></h2>\n  </li>\n  <li>\n    <h2><a target=\"_blank\" rel=\"noopener\" href=\"https://angular.io/docs\">Angular Documentation</a></h2>\n  </li>\n</ul>\n\n*** Modules in <code>@igo2/core</code> must be imported only once\n","import { NgModule } from '@angular/core';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { AppHomeComponent } from './home.component';\nimport { AppHomeRoutingModule } from './home-routing.module';\nimport { IgoInteractiveTourModule } from '@igo2/common';\n\n@NgModule({\n  declarations: [AppHomeComponent],\n  imports: [\n    AppHomeRoutingModule,\n    IgoInteractiveTourModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatButtonModule\n  ],\n  exports: [AppHomeComponent]\n})\nexport class AppHomeModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\nimport { AppActivityComponent } from './activity.component';\n\nconst routes: Routes = [\n  {\n    path: 'activity',\n    component: AppActivityComponent\n  }\n];\n\nexport const AppActivityRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { ActivityService } from '@igo2/core';\n\n@Component({\n  selector: 'app-activity',\n  templateUrl: './activity.component.html',\n  styleUrls: ['./activity.component.scss']\n})\nexport class AppActivityComponent {\n  private idsActivity: string[] = [];\n\n  constructor(private activityService: ActivityService) {}\n\n  register() {\n    this.idsActivity.push(this.activityService.register());\n  }\n\n  unregister() {\n    this.activityService.unregister(this.idsActivity.pop());\n  }\n\n  get counter() {\n    return this.activityService.counter$.value;\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>Activity</mat-card-title>\n  <mat-card-content>\n    <p>Register activities in service. Use to display a loading icon</p>\n\n    <li>Import <code>IgoActivityModule</code> only if you want register http calls</li>\n    <li>Import <code>IgoActivityModule</code> only once</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/activity\"> code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <mat-card-actions>\n    <button mat-raised-button (click)=\"register()\">Register</button>\n    <button mat-raised-button (click)=\"unregister()\">Unregister</button>\n  </mat-card-actions>\n  <p>Counter: {{counter}}</p>\n\n  <igo-spinner igoSpinnerActivity></igo-spinner>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoActivityModule } from '@igo2/core';\nimport { IgoSpinnerModule } from '@igo2/common';\n\nimport { AppActivityComponent } from './activity.component';\nimport { AppActivityRoutingModule } from './activity-routing.module';\n\n@NgModule({\n  declarations: [AppActivityComponent],\n  imports: [\n    AppActivityRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoActivityModule.forRoot(), // Only if you want register http calls\n    IgoSpinnerModule\n  ],\n  exports: [AppActivityComponent]\n})\nexport class AppActivityModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppConfigComponent } from './config.component';\n\nconst routes: Routes = [\n  {\n    path: 'config',\n    component: AppConfigComponent\n  }\n];\n\nexport const AppConfigRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\nimport { ConfigService, LanguageOptions } from '@igo2/core';\n\n@Component({\n  selector: 'app-config',\n  templateUrl: './config.component.html',\n  styleUrls: ['./config.component.scss']\n})\nexport class AppConfigComponent {\n  public configLanguage: LanguageOptions;\n\n  constructor(private configService: ConfigService) {\n    this.configLanguage = this.configService.getConfig('language');\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>config</mat-card-title>\n  <mat-card-content>\n    <p>Load config in your angular application</p>\n\n    <li>Import <code>IgoConfigModule</code> only once</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/config\"> code of this example</a> <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a>\n    <hr>\n  </mat-card-content>\n\n  <p>Config language: {{configLanguage | json }}<p>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoConfigModule, provideConfigOptions } from '@igo2/core';\n\nimport { environment } from '../../../environments/environment';\nimport { AppConfigComponent } from './config.component';\nimport { AppConfigRoutingModule } from './config-routing.module';\n\n@NgModule({\n  declarations: [AppConfigComponent],\n  imports: [\n    AppConfigRoutingModule,\n    CommonModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoConfigModule.forRoot()\n  ],\n  exports: [AppConfigComponent],\n  providers: [\n    provideConfigOptions({\n      default: environment.igo\n    })\n  ]\n})\nexport class AppConfigModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppLanguageComponent } from './language.component';\n\nconst routes: Routes = [\n  {\n    path: 'language',\n    component: AppLanguageComponent\n  }\n];\n\nexport const AppLanguageRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\nimport { LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-language',\n  templateUrl: './language.component.html',\n  styleUrls: ['./language.component.scss']\n})\nexport class AppLanguageComponent {\n  public app = {\n    title: 'IGO'\n  };\n  constructor(private languageService: LanguageService) {}\n\n  changeLanguage(language: string) {\n    this.languageService.setLanguage(language);\n    console.log(this.languageService);\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>language</mat-card-title>\n  <mat-card-content>\n    <p>Translate your angular application</p>\n\n    <li>Import <code>IgoLanguageModule</code> only once</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/language\">code of this example</a><br>\n    See language section of the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a><br>\n    See <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/locale\">locale files</a>\n    <hr>\n  </mat-card-content>\n\n  <mat-card-actions>\n    <button mat-raised-button (click)=\"changeLanguage('en')\">English</button>\n    <button mat-raised-button (click)=\"changeLanguage('fr')\">Français</button>\n  </mat-card-actions>\n\n  <p>{{'welcome' | translate: app}}<p>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoLanguageModule } from '@igo2/core';\n\nimport { AppLanguageComponent } from './language.component';\nimport { AppLanguageRoutingModule } from './language-routing.module';\n\n@NgModule({\n  declarations: [AppLanguageComponent],\n  imports: [\n    AppLanguageRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoLanguageModule.forRoot()\n  ],\n  exports: [AppLanguageComponent]\n})\nexport class AppLanguageModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppMediaComponent } from './media.component';\n\nconst routes: Routes = [\n  {\n    path: 'media',\n    component: AppMediaComponent\n  }\n];\n\nexport const AppMediaRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { MediaService } from '@igo2/core';\n\n@Component({\n  selector: 'app-media',\n  templateUrl: './media.component.html',\n  styleUrls: ['./media.component.scss']\n})\nexport class AppMediaComponent {\n  constructor(private mediaService: MediaService) {}\n\n  get media() {\n    return this.mediaService.getMedia();\n  }\n\n  get orientation() {\n    return this.mediaService.getOrientation();\n  }\n\n  get isTouchScreen() {\n    return this.mediaService.isTouchScreen();\n  }\n\n}\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>Media</mat-card-title>\n  <mat-card-content>\n    <p>Detect type of media (mobile, tablet, desktop)</p>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/media\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <p>Current media: {{media}}</p>\n  <p>Current orientation: {{orientation}}</p>\n  <p>Device mode:  {{isTouchScreen ? 'Touch device' : 'Not a touch device '}}</p>\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { AppMediaComponent } from './media.component';\nimport { AppMediaRoutingModule } from './media-routing.module';\n\n@NgModule({\n  declarations: [AppMediaComponent],\n  imports: [AppMediaRoutingModule, MatCardModule],\n  exports: [AppMediaComponent]\n})\nexport class AppMediaModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppMessageComponent } from './message.component';\n\nconst routes: Routes = [\n  {\n    path: 'message',\n    component: AppMessageComponent\n  }\n];\n\nexport const AppMessageRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { MessageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-message',\n  templateUrl: './message.component.html',\n  styleUrls: ['./message.component.scss']\n})\nexport class AppMessageComponent {\n  constructor(private messageService: MessageService) {}\n\n  success() {\n    this.messageService.success('Congratulations', 'Success');\n  }\n\n  info() {\n    this.messageService.info('Welcome to IGO', 'Info');\n  }\n\n  alert() {\n    this.messageService.alert('Warning', 'Alert');\n  }\n  error() {\n    this.messageService.error('There is a bug', 'Error');\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>Message</mat-card-title>\n  <mat-card-content>\n    <p>Show message to user.</p>\n\n    <li>Import <code>IgoMessageModule</code> only once</li>\n    <li>Dependencies: BrowserAnimationsModule </li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/message\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <mat-card-actions>\n    <button mat-raised-button (click)=\"success()\">Success message</button>\n    <button mat-raised-button color='primary' (click)=\"info()\">Info message</button>\n    <button mat-raised-button color='accent' (click)=\"alert()\">Alert message</button>\n    <button mat-raised-button color='warn' (click)=\"error()\">Error message</button>\n  </mat-card-actions>\n</mat-card>\n\n<igo-message-center></igo-message-center>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMessageModule } from '@igo2/core';\n\nimport { AppMessageComponent } from './message.component';\nimport { AppMessageRoutingModule } from './message-routing.module';\n\n@NgModule({\n  declarations: [AppMessageComponent],\n  imports: [\n    AppMessageRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMessageModule.forRoot()\n  ],\n  exports: [AppMessageComponent]\n})\nexport class AppMessageModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppRequestComponent } from './request.component';\n\nconst routes: Routes = [\n  {\n    path: 'request',\n    component: AppRequestComponent\n  }\n];\n\nexport const AppRequestRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-request',\n  templateUrl: './request.component.html',\n  styleUrls: ['./request.component.scss']\n})\nexport class AppRequestComponent {\n  constructor(\n    private http: HttpClient,\n    public languageService: LanguageService\n  ) {}\n\n  callHttp() {\n    const url = 'https://geoegl.msp.gouv.qc.ca/apis/icherche/info';\n    this.http.get(url).subscribe(rep => {\n      console.log(rep);\n    });\n  }\n\n  callHttpError() {\n    const url = '404';\n    this.http.get(url).subscribe(rep => {\n      console.log(rep);\n    });\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Core</mat-card-subtitle>\n  <mat-card-title>Request</mat-card-title>\n  <mat-card-content>\n    <p>Register http calls in console</p>\n\n    <li>Import <code>IgoLoggingModule</code> only if you want register http calls in console</li>\n    <li>Import <code>IgoErrorModule</code> only if you want register errors from http call in console</li>\n    <li>Import modules only once</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/core/request\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <mat-card-actions>\n    <button mat-raised-button (click)=\"callHttp()\">Log</button>\n    <button mat-raised-button (click)=\"callHttpError()\">Error</button>\n  </mat-card-actions>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoErrorModule, IgoLanguageModule } from '@igo2/core';\n\nimport { AppRequestComponent } from './request.component';\nimport { AppRequestRoutingModule } from './request-routing.module';\n\n@NgModule({\n  declarations: [AppRequestComponent],\n  imports: [\n    AppRequestRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    HttpClientModule,\n    IgoLanguageModule.forRoot(),\n    IgoErrorModule.forRoot() // Only if you want register errors from http call in console\n    // IgoLoggingModule.forRoot() // Only if you want register http calls in console\n  ],\n  exports: [AppRequestComponent]\n})\nexport class AppRequestModule {}\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Action</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/action\">code of this example</a>\n  </mat-card-content>\n\n  <igo-actionbar\n    [store]=\"store\"\n    [withIcon]=\"true\"\n    [withTitle]=\"actionbarMode === 'overlay'\"\n    [horizontal]=\"true\"\n    [mode]=\"actionbarMode\">\n  </igo-actionbar>\n\n</mat-card>\n<p></p>\n\n<mat-card [igoContextMenu]= actionbarMenu>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Action context-menu</mat-card-title>\n  <div></div>\n</mat-card>\n\n\n\n<ng-template #actionbarMenu>\n  <igo-actionbar\n    [store]=\"store\"\n    [withIcon]=\"true\"\n    [horizontal]=\"true\"\n    [mode]=\"'context'\">\n  </igo-actionbar>\n</ng-template>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppActionComponent } from './action.component';\n\nconst routes: Routes = [\n  {\n    path: 'action',\n    component: AppActionComponent\n  }\n];\n\nexport const AppActionRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport {\n  Media,\n  MediaOrientation,\n  MediaService,\n  LanguageService\n} from '@igo2/core';\nimport { ActionStore, ActionbarMode } from '@igo2/common';\nimport { Overlay } from '@angular/cdk/overlay';\n\n@Component({\n  selector: 'app-action',\n  templateUrl: './action.component.html',\n  styleUrls: ['./action.component.scss']\n})\nexport class AppActionComponent implements OnInit, OnDestroy {\n  public store = new ActionStore([]);\n\n  private added$ = new BehaviorSubject(false);\n\n  get actionbarMode(): ActionbarMode {\n    const media = this.mediaService.media$.value;\n    const orientation = this.mediaService.orientation$.value;\n    if (media === Media.Desktop && orientation === MediaOrientation.Landscape) {\n      return ActionbarMode.Dock;\n    }\n    return ActionbarMode.Overlay;\n  }\n\n  constructor(\n    public overlay: Overlay,\n    private mediaService: MediaService,\n    private languageService: LanguageService\n  ) {}\n\n  ngOnInit() {\n    this.store.load([\n      {\n        id: 'add',\n        title: 'Add',\n        icon: 'plus',\n        tooltip: 'Add Tooltip',\n        handler: () => {\n          alert('Add!');\n          this.added$.next(true);\n        }\n      },\n      {\n        id: 'edit',\n        title: 'Edit',\n        icon: 'pencil',\n        tooltip: 'Edit Tooltip',\n        args: ['1'],\n        handler: (item: string) => {\n          alert(`Edit item ${item}!`);\n        },\n        availability: () => this.added$\n      },\n      {\n        id: 'delete',\n        title: 'Delete',\n        tooltip: 'Delete Tooltip',\n        icon: 'delete',\n        handler: () => {\n          alert('Delete!');\n          this.added$.next(false);\n        },\n        availability: () => this.added$\n      }\n    ]);\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoActionModule, IgoContextMenuModule } from '@igo2/common';\n\nimport { AppActionComponent } from './action.component';\nimport { AppActionRoutingModule } from './action-routing.module';\n\n@NgModule({\n  declarations: [AppActionComponent],\n  imports: [\n    AppActionRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoActionModule,\n    IgoContextMenuModule\n  ],\n  exports: [AppActionComponent]\n})\nexport class AppActionModule {}\n","import { Component, Input, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\n\nimport { OnUpdateInputs } from '@igo2/common';\n\n@Component({\n  selector: 'app-salutation-component',\n  template: '<p>Hello, my name is {{name}}.</p>',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppSalutationComponent implements OnUpdateInputs {\n\n  @Input() name: string;\n\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  onUpdateInputs() {\n    this.cdRef.detectChanges();\n  }\n\n}\n\n@Component({\n  selector: 'app-explanation-component',\n  template: '<p>I am a dynamic component, rendered into an IgoDynamicOutlet.</p>',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppExplanationComponent implements OnUpdateInputs {\n\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  onUpdateInputs() {\n    this.cdRef.detectChanges();\n  }\n\n}\n\n@Component({\n  selector: 'app-dynamic-component',\n  templateUrl: './dynamic-component.component.html',\n  styleUrls: ['./dynamic-component.component.scss']\n})\nexport class AppDynamicComponentComponent {\n\n  component: any = AppSalutationComponent;\n\n  inputs = {name: 'Bob'};\n\n  toggleComponent() {\n    this.component = this.component === AppSalutationComponent ?\n      AppExplanationComponent :\n      AppSalutationComponent;\n  }\n\n}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppDynamicComponentComponent } from './dynamic-component.component';\n\nconst routes: Routes = [\n  {\n    path: 'dynamic-component',\n    component: AppDynamicComponentComponent\n  }\n];\n\nexport const AppDynamicComponentRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Dynamic Component</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/dynamic-component\">code of this example</a>\n  </mat-card-content>\n\n  <igo-dynamic-outlet\n    [component]=\"component\"\n    [inputs]=\"inputs\">\n  </igo-dynamic-outlet>\n\n  <button mat-flat-button color=\"primary\" (click)=\"toggleComponent()\">Toggle Component</button>\n</mat-card>\n\n\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoDynamicComponentModule } from '@igo2/common';\n\nimport {\n  AppSalutationComponent,\n  AppExplanationComponent,\n  AppDynamicComponentComponent\n} from './dynamic-component.component';\nimport { AppDynamicComponentRoutingModule } from './dynamic-component-routing.module';\n\n@NgModule({\n  declarations: [\n    AppSalutationComponent,\n    AppDynamicComponentComponent,\n    AppExplanationComponent\n  ],\n  imports: [\n    AppDynamicComponentRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoDynamicComponentModule\n  ],\n  exports: [AppDynamicComponentComponent],\n  entryComponents: [\n    AppSalutationComponent,\n    AppExplanationComponent\n  ]\n})\nexport class AppDynamicComponentModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppEntityTableComponent } from './entity-table.component';\n\nconst routes: Routes = [\n  {\n    path: 'entity-table',\n    component: AppEntityTableComponent\n  }\n];\n\nexport const AppEntityTableRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  EntityStore,\n  EntityTableButton,\n  getEntityProperty,\n  EntityTableColumnRenderer,\n  EntityTablePaginatorOptions\n} from '@igo2/common';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'app-entity-table',\n  templateUrl: './entity-table.component.html',\n  styleUrls: ['./entity-table.component.scss']\n})\nexport class AppEntityTableComponent implements OnInit, OnDestroy {\n  public store = new EntityStore([]);\n  public paginator: MatPaginator;\n  entitySortChange$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n\n  public paginatorOptions: EntityTablePaginatorOptions = {pageSize: 10};\n\n  public template = {\n    selection: true,\n    selectionCheckbox: true,\n    selectMany: true,\n    sort: true,\n    valueAccessor: (entity: object, name: string) => {\n      return getEntityProperty(entity, name);\n    },\n    columns: [\n      {\n        name: 'selected',\n        title: 'Selected',\n        valueAccessor: (entity: object) => {\n          return this.store.state.get(entity).selected\n            ? 'radiobox-marked'\n            : 'radiobox-blank';\n        },\n        renderer: EntityTableColumnRenderer.Icon\n      },\n      {\n        name: 'id',\n        title: 'ID'\n      },\n      {\n        name: 'name',\n        title: 'Name'\n      },\n      {\n        name: 'description',\n        title: 'Description',\n        renderer: EntityTableColumnRenderer.HTML\n      },\n      {\n        name: 'action',\n        title: '',\n        valueAccessor: (entity: object) => {\n          return [{\n            icon: 'home',\n            color: 'warn',\n            click: (row) => { console.log(row); }\n          }] as EntityTableButton[];\n        },\n        renderer: EntityTableColumnRenderer.ButtonGroup\n      }\n    ]\n  };\n\n  constructor(private languageService: LanguageService) {}\n\n  ngOnInit() {\n    const ids = [2, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13];\n\n    const entities = ids.map(id => {\n      return { id , name: `Name ${id}`, description: `<b>Description ${id}</b>`};\n    });\n    this.store.load(entities);\n  }\n\n  entitySortChange() {\n    this.entitySortChange$.next(true);\n  }\n\n  paginatorChange(event: MatPaginator) {\n    this.paginator = event;\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Entity Table</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/entity-table\">code of this example</a>\n  </mat-card-content>\n  <igo-entity-table\n    [store]=\"store\"\n    [withPaginator]=\"true\"\n    [paginatorOptions]=\"paginatorOptions\"\n    [template]=\"template\"\n    (entitySortChange)=\"entitySortChange()\">\n  </igo-entity-table>\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoEntityTableModule, IgoEntityTablePaginatorModule } from '@igo2/common';\n\nimport { AppEntityTableComponent } from './entity-table.component';\nimport { AppEntityTableRoutingModule } from './entity-table-routing.module';\n\n@NgModule({\n  declarations: [AppEntityTableComponent],\n  imports: [\n    AppEntityTableRoutingModule,\n    MatCardModule,\n    IgoEntityTableModule,\n    IgoEntityTablePaginatorModule\n  ],\n  exports: [AppEntityTableComponent]\n})\nexport class AppEntityTableModule {}\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Entity Selector</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/entity-selector\">code of this example</a>\n  </mat-card-content>\n\n  <igo-entity-selector\n    [store]=\"store\"\n    [titleAccessor]=\"getTitle\"\n    [emptyText]=\"''\"\n    [placeholder]=\"'Select an entity'\"\n    (selectedChange)=\"onSelectedChange($event)\">\n  </igo-entity-selector>\n\n  <div *ngIf=\"selected$ | async as selected\">\n    <p>ID: {{selected.id}}</p>\n    <p>Name: {{selected.name}}</p>\n    <p>Description: <span [innerHtml]=\"selected.description\"></span></p>\n  </div>\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppEntitySelectorComponent } from './entity-selector.component';\n\nconst routes: Routes = [\n  {\n    path: 'entity-selector',\n    component: AppEntitySelectorComponent\n  }\n];\n\nexport const AppEntitySelectorRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport { LanguageService } from '@igo2/core';\nimport { EntityStore } from '@igo2/common';\n\ninterface DemoEntity {\n  id: string;\n  name: string;\n  description: string;\n}\n\n@Component({\n  selector: 'app-entity-selector',\n  templateUrl: './entity-selector.component.html',\n  styleUrls: ['./entity-selector.component.scss']\n})\nexport class AppEntitySelectorComponent implements OnInit, OnDestroy {\n\n  public store = new EntityStore([]);\n\n  public selected$ = new BehaviorSubject<DemoEntity>(undefined);\n\n  constructor(private languageService: LanguageService) {}\n\n  ngOnInit() {\n    this.store.load([\n      {id: '2', name: 'Name 2', description: '<b>Description 2</b>'},\n      {id: '1', name: 'Name 1', description: '<b>Description 1</b>'},\n      {id: '3', name: 'Name 3', description: '<b>Description 3</b>'}\n    ]);\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n\n  getTitle(entity: DemoEntity): string {\n    return entity.name;\n  }\n\n  onSelectedChange(event: {selected: boolean; entity: DemoEntity}) {\n    this.selected$.next(event.entity);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoEntitySelectorModule } from '@igo2/common';\n\nimport { AppEntitySelectorComponent } from './entity-selector.component';\nimport { AppEntitySelectorRoutingModule } from './entity-selector-routing.module';\n\n@NgModule({\n  declarations: [AppEntitySelectorComponent],\n  imports: [\n    CommonModule,\n    AppEntitySelectorRoutingModule,\n    MatCardModule,\n    IgoEntitySelectorModule\n  ],\n  exports: [AppEntitySelectorComponent]\n})\nexport class AppEntitySelectorModule {}\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Form</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/form\">code of this example</a>\n  </mat-card-content>\n\n  <igo-form\n    *ngIf=\"form$ | async as form\"\n    [form]=\"form\"\n    [formData]=\"data$ | async\"\n    (submitForm)=\"onSubmit($event)\">\n\n    <igo-form-group [group]=\"form.groups[0]\"></igo-form-group>\n\n    <div formButtons>\n      <button\n        mat-stroked-button\n        type=\"button\"\n        color=\"primary\"\n        (click)=\"fillForm()\">\n        Fill Form\n      </button>\n      <button\n        mat-stroked-button\n        type=\"button\"\n        color=\"primary\"\n        (click)=\"clearForm()\">\n        Clear Form\n      </button>\n      <button\n        mat-flat-button\n        type=\"submit\"\n        color=\"primary\"\n        [disabled]=\"submitDisabled\">\n        Submit\n      </button>\n    </div>\n  </igo-form>\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppFormComponent } from './form.component';\n\nconst routes: Routes = [\n  {\n    path: 'form',\n    component: AppFormComponent\n  }\n];\n\nexport const AppFormRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { BehaviorSubject, Subscription } from 'rxjs';\n\nimport { LanguageService } from '@igo2/core';\nimport { Form, FormService } from '@igo2/common';\n\n@Component({\n  selector: 'app-form',\n  templateUrl: './form.component.html',\n  styleUrls: ['./form.component.scss']\n})\nexport class AppFormComponent implements OnInit, OnDestroy {\n\n  form$ = new BehaviorSubject<Form>(undefined);\n\n  data$ = new BehaviorSubject<{[key: string]: any}>(undefined);\n\n  submitDisabled = true;\n\n  private valueChanges$$: Subscription;\n\n  constructor(\n    private formService: FormService,\n    private languageService: LanguageService\n  ) {}\n\n  ngOnInit() {\n    const fieldConfigs = [\n      {\n        name: 'id',\n        title: 'ID',\n        options:  {\n          cols: 1,\n          validator: Validators.required\n        }\n      },\n      {\n        name: 'name',\n        title: 'Name',\n        options:  {\n          cols: 1,\n          validator: Validators.required\n        }\n      },\n      {\n        name: 'status',\n        title: 'Status',\n        type: 'select',\n        options:  {\n          cols: 2\n        },\n        inputs: {\n          choices: [\n            {value: 1, title: 'Single'},\n            {value: 2, title: 'Married'}\n          ]\n        }\n      }\n    ];\n\n    const fields = fieldConfigs.map((config) => this.formService.field(config));\n    const form = this.formService.form([], [this.formService.group({name: 'info'}, fields)]);\n\n    this.valueChanges$$ = form.control.valueChanges.subscribe(() => {\n      this.submitDisabled = !form.control.valid;\n    });\n\n    this.form$.next(form);\n  }\n\n  ngOnDestroy() {\n    this.valueChanges$$.unsubscribe();\n  }\n\n  fillForm() {\n    this.data$.next({\n      id: 1,\n      name: 'Bob',\n      status: 2\n    });\n  }\n\n  clearForm() {\n    this.form$.value.control.reset();\n  }\n\n  onSubmit(data: {[key: string]: any}) {\n    alert(JSON.stringify(data));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoFormModule } from '@igo2/common';\n\nimport { AppFormComponent } from './form.component';\nimport { AppFormRoutingModule } from './form-routing.module';\n\n@NgModule({\n  declarations: [AppFormComponent],\n  imports: [\n    CommonModule,\n    AppFormRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoFormModule\n  ],\n  exports: [AppFormComponent]\n})\nexport class AppFormModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppTableComponent } from './table.component';\n\nconst routes: Routes = [\n  {\n    path: 'table',\n    component: AppTableComponent\n  }\n];\n\nexport const AppTableRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport { TableDatabase, TableActionColor } from '@igo2/common';\n\n@Component({\n  selector: 'app-table',\n  templateUrl: './table.component.html',\n  styleUrls: ['./table.component.scss']\n})\nexport class AppTableComponent implements OnInit {\n  public database: TableDatabase;\n\n  public model = {\n    columns: [\n      {\n        name: 'id',\n        title: 'ID',\n        sortable: false,\n        filterable: true\n      },\n      {\n        name: 'name',\n        title: 'Name',\n        sortable: true,\n        filterable: true\n      },\n      {\n        name: 'description',\n        title: 'Description',\n        sortable: true,\n        filterable: true\n      }\n    ],\n    actions: [\n      {\n        icon: 'file-document',\n        color: TableActionColor.primary,\n        click: row => this.showName(row.name)\n      }\n    ],\n    selectionCheckbox: true\n  };\n\n  constructor(private languageService: LanguageService) {}\n\n  ngOnInit() {\n    this.database = new TableDatabase([\n      { id: '2', name: 'Name 2', description: 'Hello 2' },\n      { id: '1', name: 'Name 1', description: 'Bonjour 1' },\n      { id: '3', name: 'Name 3', description: 'Hola 3' }\n    ]);\n  }\n\n  showName(name) {\n    alert(name);\n  }\n\n  handleSelect(rows) {\n    console.log(rows);\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Table</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/table\">code of this example</a>\n  </mat-card-content>\n\n  <igo-table\n    [database]=\"database\"\n    [model]=\"model\"\n    [hasFilterInput]=\"true\"\n    (select)=\"handleSelect($event)\">\n  </igo-table>\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoTableModule } from '@igo2/common';\n\nimport { AppTableComponent } from './table.component';\nimport { AppTableRoutingModule } from './table-routing.module';\n\n@NgModule({\n  declarations: [AppTableComponent],\n  imports: [\n    AppTableRoutingModule,\n    MatCardModule,\n    IgoTableModule\n  ],\n  exports: [AppTableComponent]\n})\nexport class AppTableModule {}\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Tool</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/tool\">code of this example</a>\n  </mat-card-content>\n\n  <igo-panel [title]=\"panelTitle\">\n    <button\n      mat-icon-button\n      panelLeftButton\n      (click)=\"toolbox.activatePreviousTool()\"\n      *ngIf=\"activeTool$ | async\">\n      <mat-icon svgIcon=\"arrow-back\"></mat-icon>\n    </button>\n\n    <button\n      mat-icon-button\n      panelRightButton\n      (click)=\"toolbox.deactivateTool()\"\n      *ngIf=\"activeTool$ | async\">\n      <mat-icon svgIcon=\"menu\"></mat-icon>\n    </button>\n\n    <igo-toolbox [toolbox]=\"toolbox\" [animate]=\"true\"></igo-toolbox>\n  </igo-panel>\n\n  <button\n    mat-flat-button\n    type=\"button\"\n    color=\"primary\"\n    (click)=\"activateSalutationTool()\">\n    Activate Salutation Tool\n  </button>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppToolComponent } from './tool.component';\n\nconst routes: Routes = [\n  {\n    path: 'tool',\n    component: AppToolComponent\n  }\n];\n\nexport const AppToolRoutingModule = RouterModule.forChild(\n  routes\n);\n","import {\n  Component,\n  OnInit,\n  OnDestroy,\n  Input,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef\n} from '@angular/core';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  OnUpdateInputs,\n  Tool,\n  Toolbox,\n  ToolComponent,\n  ToolService\n} from '@igo2/common';\n\n@ToolComponent({\n  name: 'demo-salutation',\n  title: 'Salutation',\n  icon: 'account',\n  options: {name: 'Jack'}\n})\n@Component({\n  selector: 'app-salutation-tool',\n  template: `\n    <p>Hello, my name is {{name}}.</p>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppSalutationToolComponent implements OnUpdateInputs {\n\n  @Input() name: string;\n\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  onUpdateInputs() {\n    this.cdRef.detectChanges();\n  }\n\n}\n\n@ToolComponent({\n  name: 'demo-about',\n  title: 'About',\n  icon: 'information'\n})\n@Component({\n  selector: 'app-about-tool',\n  template: `\n    <p>I'm a tool inside a toolbox.</p>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppAboutToolComponent {}\n\n@Component({\n  selector: 'app-tool',\n  templateUrl: './tool.component.html',\n  styleUrls: ['./tool.component.scss']\n})\nexport class AppToolComponent implements OnInit, OnDestroy {\n\n  toolbox = new Toolbox();\n\n  get activeTool$(): BehaviorSubject<Tool> {\n    return this.toolbox.activeTool$;\n  }\n\n  get panelTitle(): string {\n    return this.activeTool$.value ? this.activeTool$.value.title : 'Toolbox';\n  }\n\n  constructor(\n    private toolService: ToolService,\n    private languageService: LanguageService\n  ) {}\n\n  ngOnInit() {\n    this.toolbox.setToolbar(['demo-salutation', 'demo-about']);\n    this.toolbox.setTools(this.toolService.getTools());\n  }\n\n  ngOnDestroy() {\n    this.toolbox.destroy();\n  }\n\n  activateSalutationTool() {\n    this.toolbox.activateTool('demo-salutation', {name: 'Bob'});\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoLanguageModule } from '@igo2/core';\nimport { IgoPanelModule, IgoToolModule } from '@igo2/common';\n\nimport {\n  AppToolComponent,\n  AppSalutationToolComponent,\n  AppAboutToolComponent\n} from './tool.component';\nimport { AppToolRoutingModule } from './tool-routing.module';\n\n@NgModule({\n  declarations: [\n    AppToolComponent,\n    AppSalutationToolComponent,\n    AppAboutToolComponent\n  ],\n  imports: [\n    CommonModule,\n    AppToolRoutingModule,\n    MatButtonModule,\n    MatIconModule,\n    MatCardModule,\n    IgoLanguageModule,\n    IgoPanelModule,\n    IgoToolModule.forRoot()\n  ],\n  exports: [AppToolComponent],\n  entryComponents: [\n    AppSalutationToolComponent,\n    AppAboutToolComponent\n  ]\n})\nexport class AppToolModule {}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef\n} from '@angular/core';\n\nimport { DynamicComponent, OnUpdateInputs, WidgetComponent, WidgetService } from '@igo2/common';\n\n@Component({\n  selector: 'app-salutation-widget',\n  template: `\n    <p>Hello, my name is {{name}}.</p>\n    <button mat-flat-button (click)=\"complete.emit(name)\">Nice to meet you</button>\n    <button mat-flat-button (click)=\"cancel.emit(name)\">Dismiss</button>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppSalutationWidgetComponent implements OnUpdateInputs, WidgetComponent {\n\n  @Input() name: string;\n\n  @Output() complete = new EventEmitter<string>();\n\n  @Output() cancel = new EventEmitter<string>();\n\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  onUpdateInputs() {\n    this.cdRef.detectChanges();\n  }\n\n}\n\n@Component({\n  selector: 'app-widget',\n  templateUrl: './widget.component.html',\n  styleUrls: ['./widget.component.scss']\n})\nexport class AppWidgetComponent {\n\n  widget: DynamicComponent<WidgetComponent> = this.widgetService.create(AppSalutationWidgetComponent);\n\n  inputs = {name: 'Bob'};\n\n  constructor(private widgetService: WidgetService) {}\n\n  onWidgetComplete(name: string) {\n    alert(`${name} emitted event 'complete' then got automatically destroyed.`);\n  }\n\n  onWidgetCancel() {\n    alert(`Widget emitted event 'cancel' then got automatically destroyed.`);\n  }\n\n}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppWidgetComponent } from './widget.component';\n\nconst routes: Routes = [\n  {\n    path: 'widget',\n    component: AppWidgetComponent\n  }\n];\n\nexport const AppWidgetRoutingModule = RouterModule.forChild(\n  routes\n);\n","<mat-card>\n  <mat-card-subtitle>Common</mat-card-subtitle>\n  <mat-card-title>Widget</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/widget\">code of this example</a>\n  </mat-card-content>\n\n  <igo-widget-outlet\n    [widget]=\"widget\"\n    [inputs]=\"inputs\"\n    (complete)=\"onWidgetComplete($event)\"\n    (cancel)=\"onWidgetCancel()\">\n  </igo-widget-outlet>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoWidgetModule } from '@igo2/common';\n\nimport {\n  AppSalutationWidgetComponent,\n  AppWidgetComponent\n} from './widget.component';\nimport { AppWidgetRoutingModule } from './widget-routing.module';\n\n@NgModule({\n  declarations: [\n    AppSalutationWidgetComponent,\n    AppWidgetComponent\n  ],\n  imports: [\n    AppWidgetRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoWidgetModule\n  ],\n  exports: [AppWidgetComponent],\n  entryComponents: [\n    AppSalutationWidgetComponent\n  ]\n})\nexport class AppWidgetModule {}\n","import { ɵɵdefineInjectable, ɵɵinject, INJECTOR, Injectable, Injector, Optional, EventEmitter, Component, ChangeDetectionStrategy, Input, Output, ApplicationRef, Directive, ElementRef, NgModule } from '@angular/core';\nimport { Router, NavigationStart, RouterModule } from '@angular/router';\nimport { tap, catchError, filter, map } from 'rxjs/operators';\nimport { ConfigService, LanguageService, MessageService, StorageService, StorageScope, IgoLanguageModule } from '@igo2/core';\nimport { HttpHeaders, HttpClient, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { BehaviorSubject, of } from 'rxjs';\nimport { globalCacheBusterNotifier } from 'ngx-cacheable';\nimport { Base64 } from '@igo2/utils';\nimport jwtDecode from 'jwt-decode';\nimport { Validators, FormBuilder, ReactiveFormsModule } from '@angular/forms';\nimport { Md5 } from 'ts-md5';\nimport { MSAL_CONFIG, MSAL_CONFIG_ANGULAR, MsalService, BroadcastService, MsalModule } from '@azure/msal-angular';\nimport { CommonModule } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common/http';\nimport * as ɵngcc2 from '@igo2/core';\nimport * as ɵngcc3 from '@angular/router';\nimport * as ɵngcc4 from '@angular/common';\nimport * as ɵngcc5 from '@angular/material/button';\nimport * as ɵngcc6 from '@ngx-translate/core';\nimport * as ɵngcc7 from '@angular/forms';\nimport * as ɵngcc8 from '@angular/material/form-field';\nimport * as ɵngcc9 from '@angular/material/input';\nimport * as ɵngcc10 from '@azure/msal-angular';\nimport * as ɵngcc11 from '@angular/material/icon';\n\nfunction AuthFormComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 3);\n} }\nfunction AuthFormComponent_div_0_div_2_igo_auth_google_4_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-auth-google\", 7);\n    ɵngcc0.ɵɵlistener(\"login\", function AuthFormComponent_div_0_div_2_igo_auth_google_4_Template_igo_auth_google_login_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(3); return ctx_r9.onLogin(); });\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction AuthFormComponent_div_0_div_2_igo_auth_microsoft_5_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-auth-microsoft\", 7);\n    ɵngcc0.ɵɵlistener(\"login\", function AuthFormComponent_div_0_div_2_igo_auth_microsoft_5_Template_igo_auth_microsoft_login_0_listener() { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(3); return ctx_r11.onLogin(); });\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction AuthFormComponent_div_0_div_2_igo_auth_facebook_6_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-auth-facebook\", 7);\n    ɵngcc0.ɵɵlistener(\"login\", function AuthFormComponent_div_0_div_2_igo_auth_facebook_6_Template_igo_auth_facebook_login_0_listener() { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(3); return ctx_r13.onLogin(); });\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction AuthFormComponent_div_0_div_2_igo_auth_intern_7_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-auth-intern\", 8);\n    ɵngcc0.ɵɵlistener(\"login\", function AuthFormComponent_div_0_div_2_igo_auth_intern_7_Template_igo_auth_intern_login_0_listener() { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r15 = ɵngcc0.ɵɵnextContext(3); return ctx_r15.onLogin(); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"allowAnonymous\", ctx_r8.options.allowAnonymous);\n} }\nfunction AuthFormComponent_div_0_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(1, \"h1\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, AuthFormComponent_div_0_div_2_igo_auth_google_4_Template, 1, 0, \"igo-auth-google\", 5);\n    ɵngcc0.ɵɵtemplate(5, AuthFormComponent_div_0_div_2_igo_auth_microsoft_5_Template, 1, 0, \"igo-auth-microsoft\", 5);\n    ɵngcc0.ɵɵtemplate(6, AuthFormComponent_div_0_div_2_igo_auth_facebook_6_Template, 1, 0, \"igo-auth-facebook\", 5);\n    ɵngcc0.ɵɵtemplate(7, AuthFormComponent_div_0_div_2_igo_auth_intern_7_Template, 1, 1, \"igo-auth-intern\", 6);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 5, \"igo.auth.connection\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.options.google && ctx_r2.options.google.enabled !== false);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.options.microsoft && ctx_r2.options.microsoft.enabled !== false);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.options.facebook && ctx_r2.options.facebook.enabled !== false);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r2.options.intern || ctx_r2.options.intern.enabled !== false);\n} }\nfunction AuthFormComponent_div_0_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(1, \"p\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function AuthFormComponent_div_0_div_3_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r17 = ɵngcc0.ɵɵnextContext(2); return ctx_r17.logout(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(3, 2, \"igo.auth.welcome\", ctx_r3.user));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 5, \"igo.auth.signOut\"));\n} }\nfunction AuthFormComponent_div_0_div_4_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function AuthFormComponent_div_0_div_4_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r21); const ctx_r20 = ɵngcc0.ɵɵnextContext(3); return ctx_r20.home(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.auth.home\"));\n} }\nfunction AuthFormComponent_div_0_div_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(1, \"p\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, AuthFormComponent_div_0_div_4_button_4_Template, 3, 3, \"button\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"igo.auth.deconnection\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.options.homeRoute);\n} }\nfunction AuthFormComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtemplate(1, AuthFormComponent_div_0_div_1_Template, 1, 0, \"div\", 1);\n    ɵngcc0.ɵɵtemplate(2, AuthFormComponent_div_0_div_2_Template, 8, 7, \"div\", 2);\n    ɵngcc0.ɵɵtemplate(3, AuthFormComponent_div_0_div_3_Template, 7, 7, \"div\", 2);\n    ɵngcc0.ɵɵtemplate(4, AuthFormComponent_div_0_div_4_Template, 5, 4, \"div\", 2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.auth.logged && ctx_r0.backgroundDisable);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.auth.logged && ctx_r0.showLoginDiv);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.auth.logged && ctx_r0.showAlreadyConnectedDiv);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.showLogoutDiv);\n} }\nfunction AuthInternComponent_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function AuthInternComponent_button_12_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.loginAnonymous(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.loading);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.auth.accessAnonymous\"), \" \");\n} }\nfunction AuthInternComponent_div_13_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelement(1, \"br\");\n    ɵngcc0.ɵɵelementStart(2, \"font\", 8);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.error);\n} }\nclass TokenService {\n    constructor(injector) {\n        this.injector = injector;\n    }\n    set(token) {\n        localStorage.setItem(this.tokenKey, token);\n    }\n    remove() {\n        localStorage.removeItem(this.tokenKey);\n    }\n    get() {\n        return localStorage.getItem(this.tokenKey);\n    }\n    decode() {\n        const token = this.get();\n        if (!token) {\n            return;\n        }\n        return jwtDecode(token);\n    }\n    isExpired() {\n        const jwt = this.decode();\n        const currentTime = new Date().getTime() / 1000;\n        if (jwt && currentTime < jwt.exp) {\n            return false;\n        }\n        return true;\n    }\n    get tokenKey() {\n        const config = this.injector.get(ConfigService);\n        this.options = config.getConfig('auth') || {};\n        return this.options.tokenKey;\n    }\n}\nTokenService.ɵfac = function TokenService_Factory(t) { return new (t || TokenService)(ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nTokenService.ɵprov = ɵɵdefineInjectable({ factory: function TokenService_Factory() { return new TokenService(ɵɵinject(INJECTOR)); }, token: TokenService, providedIn: \"root\" });\nTokenService.ctorParameters = () => [\n    { type: Injector }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TokenService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc0.Injector }]; }, null); })();\n\nclass AuthService {\n    constructor(http, tokenService, config, languageService, messageService, router) {\n        this.http = http;\n        this.tokenService = tokenService;\n        this.config = config;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.router = router;\n        this.authenticate$ = new BehaviorSubject(undefined);\n        this.logged$ = new BehaviorSubject(undefined);\n        this.anonymous = false;\n        this.authenticate$.next(this.authenticated);\n        this.authenticate$.subscribe((authenticated) => {\n            this.logged$.next(authenticated);\n            globalCacheBusterNotifier.next();\n        });\n    }\n    login(username, password) {\n        const myHeader = new HttpHeaders();\n        myHeader.append('Content-Type', 'application/json');\n        const body = JSON.stringify({\n            username,\n            password: this.encodePassword(password)\n        });\n        return this.loginCall(body, myHeader);\n    }\n    loginWithToken(token, type) {\n        const myHeader = new HttpHeaders();\n        myHeader.append('Content-Type', 'application/json');\n        const body = JSON.stringify({\n            token,\n            typeConnection: type\n        });\n        return this.loginCall(body, myHeader);\n    }\n    loginAnonymous() {\n        this.anonymous = true;\n        this.logged$.next(true);\n        return of(true);\n    }\n    refresh() {\n        const url = this.config.getConfig('auth.url');\n        return this.http.post(`${url}/refresh`, {}).pipe(tap((data) => {\n            this.tokenService.set(data.token);\n        }), catchError((err) => {\n            err.error.caught = true;\n            throw err;\n        }));\n    }\n    logout() {\n        this.anonymous = false;\n        this.tokenService.remove();\n        this.authenticate$.next(false);\n        return of(true);\n    }\n    isAuthenticated() {\n        return !this.tokenService.isExpired();\n    }\n    getToken() {\n        return this.tokenService.get();\n    }\n    decodeToken() {\n        if (this.isAuthenticated()) {\n            return this.tokenService.decode();\n        }\n        return false;\n    }\n    goToRedirectUrl() {\n        if (!this.router) {\n            return;\n        }\n        const redirectUrl = this.redirectUrl || this.router.url;\n        const options = this.config.getConfig('auth') || {};\n        if (redirectUrl === options.loginRoute) {\n            const homeRoute = options.homeRoute || '/';\n            this.router.navigateByUrl(homeRoute);\n        }\n        else if (redirectUrl) {\n            this.router.navigateByUrl(redirectUrl);\n        }\n    }\n    getUserInfo() {\n        const url = this.config.getConfig('auth.url') + '/info';\n        return this.http.get(url);\n    }\n    getProfils() {\n        const url = this.config.getConfig('auth.url');\n        return this.http.get(`${url}/profils`);\n    }\n    updateUser(user) {\n        const url = this.config.getConfig('auth.url');\n        return this.http.patch(url, JSON.stringify(user));\n    }\n    encodePassword(password) {\n        return Base64.encode(password);\n    }\n    // authenticated or anonymous\n    get logged() {\n        return this.authenticated || this.isAnonymous;\n    }\n    get isAnonymous() {\n        return this.anonymous;\n    }\n    get authenticated() {\n        return this.isAuthenticated();\n    }\n    get isAdmin() {\n        const token = this.decodeToken();\n        if (token && token.user && token.user.isAdmin) {\n            return true;\n        }\n        return false;\n    }\n    loginCall(body, headers) {\n        const url = this.config.getConfig('auth.url');\n        return this.http.post(`${url}/login`, body, { headers }).pipe(tap((data) => {\n            this.tokenService.set(data.token);\n            const tokenDecoded = this.decodeToken();\n            if (tokenDecoded && tokenDecoded.user) {\n                if (tokenDecoded.user.locale) {\n                    this.languageService.setLanguage(tokenDecoded.user.locale);\n                }\n                if (tokenDecoded.user.isExpired) {\n                    this.languageService.translate\n                        .get('igo.auth.error.Password expired')\n                        .subscribe((expiredAlert) => this.messageService.alert(expiredAlert));\n                }\n            }\n            this.authenticate$.next(true);\n        }), catchError((err) => {\n            err.error.caught = true;\n            throw err;\n        }));\n    }\n}\nAuthService.ɵfac = function AuthService_Factory(t) { return new (t || AuthService)(ɵngcc0.ɵɵinject(ɵngcc1.HttpClient), ɵngcc0.ɵɵinject(TokenService), ɵngcc0.ɵɵinject(ɵngcc2.ConfigService), ɵngcc0.ɵɵinject(ɵngcc2.LanguageService), ɵngcc0.ɵɵinject(ɵngcc2.MessageService), ɵngcc0.ɵɵinject(ɵngcc3.Router, 8)); };\nAuthService.ɵprov = ɵɵdefineInjectable({ factory: function AuthService_Factory() { return new AuthService(ɵɵinject(HttpClient), ɵɵinject(TokenService), ɵɵinject(ConfigService), ɵɵinject(LanguageService), ɵɵinject(MessageService), ɵɵinject(Router, 8)); }, token: AuthService, providedIn: \"root\" });\nAuthService.ctorParameters = () => [\n    { type: HttpClient },\n    { type: TokenService },\n    { type: ConfigService },\n    { type: LanguageService },\n    { type: MessageService },\n    { type: Router, decorators: [{ type: Optional }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.HttpClient }, { type: TokenService }, { type: ɵngcc2.ConfigService }, { type: ɵngcc2.LanguageService }, { type: ɵngcc2.MessageService }, { type: ɵngcc3.Router, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nclass AuthFormComponent {\n    constructor(auth, config, router) {\n        this.auth = auth;\n        this.config = config;\n        this.router = router;\n        this._backgroundDisable = true;\n        this._hasAlreadyConnectedDiv = true;\n        this._hasLogoutDiv = true;\n        this._showAlreadyConnectedDiv = false;\n        this._showLogoutDiv = false;\n        this.login = new EventEmitter();\n        this.visible = true;\n        this.options = this.config.getConfig('auth') || {};\n        this.visible = Object.getOwnPropertyNames(this.options).length !== 0;\n    }\n    get backgroundDisable() {\n        if (this.isLogoutRoute || this.isLogoutRoute) {\n            return false;\n        }\n        return this._backgroundDisable;\n    }\n    set backgroundDisable(value) {\n        this._backgroundDisable = value.toString() === 'true';\n    }\n    get hasAlreadyConnectedDiv() {\n        return this._hasAlreadyConnectedDiv;\n    }\n    set hasAlreadyConnectedDiv(value) {\n        this._hasAlreadyConnectedDiv = value.toString() === 'true';\n    }\n    get hasLogoutDiv() {\n        return this._hasLogoutDiv;\n    }\n    set hasLogoutDiv(value) {\n        this._hasLogoutDiv = value.toString() === 'true';\n    }\n    get showAlreadyConnectedDiv() {\n        if (this.isLogoutRoute) {\n            return this.hasAlreadyConnectedDiv;\n        }\n        return this._showAlreadyConnectedDiv;\n    }\n    set showAlreadyConnectedDiv(value) {\n        this._showAlreadyConnectedDiv = value.toString() === 'true';\n    }\n    get showLogoutDiv() {\n        if (this.isLogoutRoute) {\n            return this.hasLogoutDiv;\n        }\n        return this._showLogoutDiv;\n    }\n    set showLogoutDiv(value) {\n        this._showLogoutDiv = value.toString() === 'true';\n    }\n    get showLoginDiv() {\n        if (!this.isLogoutRoute) {\n            return true;\n        }\n    }\n    ngOnInit() {\n        this.analyzeRoute();\n        this.getName();\n    }\n    onLogin() {\n        this.auth.goToRedirectUrl();\n        this.getName();\n        this.login.emit(true);\n    }\n    logout() {\n        this.auth.logout().subscribe(() => {\n            this.user = undefined;\n            if (this.router) {\n                if (this.options.logoutRoute) {\n                    this.router.navigate([this.options.logoutRoute]);\n                }\n                else if (this.options.homeRoute) {\n                    this.router.navigate([this.options.homeRoute]);\n                }\n            }\n        });\n    }\n    home() {\n        if (this.router && this.options.homeRoute) {\n            this.router.navigate([this.options.homeRoute]);\n        }\n    }\n    getName() {\n        const tokenDecoded = this.auth.decodeToken();\n        if (tokenDecoded) {\n            this.user = {\n                name: tokenDecoded.user.firstName || tokenDecoded.user.sourceId\n            };\n        }\n    }\n    analyzeRoute() {\n        if (!this.router) {\n            return;\n        }\n        this.router.events\n            .pipe(filter((event) => event instanceof NavigationStart))\n            .subscribe((changeEvent) => {\n            if (changeEvent.url) {\n                const currentRoute = changeEvent.url;\n                const logoutRoute = this.options.logoutRoute;\n                const loginRoute = this.options.loginRoute;\n                this.isLogoutRoute = currentRoute === logoutRoute;\n                this.isLoginRoute = currentRoute === loginRoute;\n                if (this.isLogoutRoute) {\n                    this.auth.logout();\n                }\n            }\n        });\n    }\n}\nAuthFormComponent.ɵfac = function AuthFormComponent_Factory(t) { return new (t || AuthFormComponent)(ɵngcc0.ɵɵdirectiveInject(AuthService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.Router, 8)); };\nAuthFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AuthFormComponent, selectors: [[\"igo-auth-form\"]], inputs: { backgroundDisable: \"backgroundDisable\", hasAlreadyConnectedDiv: \"hasAlreadyConnectedDiv\", hasLogoutDiv: \"hasLogoutDiv\", showAlreadyConnectedDiv: \"showAlreadyConnectedDiv\", showLogoutDiv: \"showLogoutDiv\" }, outputs: { login: \"login\" }, decls: 1, vars: 1, consts: [[4, \"ngIf\"], [\"class\", \"backgroundDisable\", 4, \"ngIf\"], [\"class\", \"login center-block\", 4, \"ngIf\"], [1, \"backgroundDisable\"], [1, \"login\", \"center-block\"], [3, \"login\", 4, \"ngIf\"], [3, \"allowAnonymous\", \"login\", 4, \"ngIf\"], [3, \"login\"], [3, \"allowAnonymous\", \"login\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"click\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"click\", 4, \"ngIf\"]], template: function AuthFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, AuthFormComponent_div_0_Template, 5, 4, \"div\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.visible);\n    } }, directives: function () { return [ɵngcc4.NgIf, AuthGoogleComponent, AuthMicrosoftComponent, AuthFacebookComponent, AuthInternComponent, ɵngcc5.MatButton]; }, pipes: function () { return [ɵngcc6.TranslatePipe]; }, styles: [\"[_nghost-%COMP%]{z-index:999}div.login[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #888;max-width:600px;min-width:360px;padding:25px 50px;width:90%;z-index:200}.center-block[_ngcontent-%COMP%]{left:50%;position:fixed;top:20%;transform:translate(-50%)}.backgroundDisable[_ngcontent-%COMP%]{background:#000;height:100%;left:0;opacity:.8;position:fixed;top:0;width:100%;z-index:100}\"] });\nAuthFormComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: ConfigService },\n    { type: Router, decorators: [{ type: Optional }] }\n];\nAuthFormComponent.propDecorators = {\n    backgroundDisable: [{ type: Input }],\n    hasAlreadyConnectedDiv: [{ type: Input }],\n    hasLogoutDiv: [{ type: Input }],\n    showAlreadyConnectedDiv: [{ type: Input }],\n    showLogoutDiv: [{ type: Input }],\n    login: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-form',\n                template: \"<div *ngIf=\\\"visible\\\">\\n  <div *ngIf=\\\"!auth.logged && backgroundDisable\\\" class=\\\"backgroundDisable\\\"></div>\\n\\n  <div *ngIf=\\\"!auth.logged && showLoginDiv\\\" class=\\\"login center-block\\\">\\n    <h1>{{'igo.auth.connection' | translate}}</h1>\\n\\n    <igo-auth-google\\n      *ngIf=\\\"options.google && options.google.enabled !== false\\\"\\n      (login)=\\\"onLogin()\\\">\\n    </igo-auth-google>\\n    <igo-auth-microsoft\\n      *ngIf=\\\"options.microsoft && options.microsoft.enabled !== false\\\"\\n      (login)=\\\"onLogin()\\\">\\n    </igo-auth-microsoft>\\n    <igo-auth-facebook\\n      *ngIf=\\\"options.facebook && options.facebook.enabled !== false\\\"\\n      (login)=\\\"onLogin()\\\">\\n    </igo-auth-facebook>\\n    <igo-auth-intern\\n      *ngIf=\\\"!options.intern || options.intern.enabled !== false\\\"\\n      [allowAnonymous]=\\\"options.allowAnonymous\\\"\\n      (login)=\\\"onLogin()\\\">\\n    </igo-auth-intern>\\n  </div>\\n\\n  <div *ngIf=\\\"auth.logged && showAlreadyConnectedDiv\\\" class=\\\"login center-block\\\">\\n    <p>{{'igo.auth.welcome' |\\u00A0translate: user}}</p>\\n    <button mat-raised-button type=\\\"button\\\" (click)=\\\"logout()\\\">{{'igo.auth.signOut' |\\u00A0translate}}</button>\\n  </div>\\n\\n  <div *ngIf=\\\"showLogoutDiv\\\" class=\\\"login center-block\\\">\\n    <p>{{'igo.auth.deconnection' |\\u00A0translate}}</p>\\n    <button *ngIf=\\\"options.homeRoute\\\" mat-raised-button type=\\\"button\\\" (click)=\\\"home()\\\">{{'igo.auth.home' |\\u00A0translate}}</button>\\n  </div>\\n\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.Default,\n                styles: [\":host{z-index:999}div.login{background-color:#fff;border:1px solid #888;max-width:600px;min-width:360px;padding:25px 50px;width:90%;z-index:200}.center-block{left:50%;position:fixed;top:20%;transform:translate(-50%)}.backgroundDisable{background:#000;height:100%;left:0;opacity:.8;position:fixed;top:0;width:100%;z-index:100}\"]\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc2.ConfigService }, { type: ɵngcc3.Router, decorators: [{\n                type: Optional\n            }] }]; }, { login: [{\n            type: Output\n        }], backgroundDisable: [{\n            type: Input\n        }], hasAlreadyConnectedDiv: [{\n            type: Input\n        }], hasLogoutDiv: [{\n            type: Input\n        }], showAlreadyConnectedDiv: [{\n            type: Input\n        }], showLogoutDiv: [{\n            type: Input\n        }] }); })();\n\nclass AuthInternComponent {\n    constructor(auth, languageService, fb) {\n        this.auth = auth;\n        this.languageService = languageService;\n        this._allowAnonymous = true;\n        this.error = '';\n        this.loading = false;\n        this.login = new EventEmitter();\n        this.form = fb.group({\n            username: ['', Validators.required],\n            password: ['', Validators.required]\n        });\n    }\n    get allowAnonymous() {\n        return this._allowAnonymous;\n    }\n    set allowAnonymous(value) {\n        this._allowAnonymous = value;\n    }\n    loginUser(values) {\n        this.loading = true;\n        this.auth.login(values.username, values.password).subscribe(() => {\n            this.login.emit(true);\n            this.loading = false;\n        }, (error) => {\n            try {\n                this.languageService.translate\n                    .get('igo.auth.error.' + error.error.message)\n                    .subscribe(errorMsg => (this.error = errorMsg));\n            }\n            catch (e) {\n                this.error = error.error.message;\n            }\n            this.loading = false;\n        });\n        return false;\n    }\n    loginAnonymous() {\n        this.auth.loginAnonymous().subscribe(() => {\n            this.login.emit(true);\n        });\n    }\n}\nAuthInternComponent.ɵfac = function AuthInternComponent_Factory(t) { return new (t || AuthInternComponent)(ɵngcc0.ɵɵdirectiveInject(AuthService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.FormBuilder)); };\nAuthInternComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AuthInternComponent, selectors: [[\"igo-auth-intern\"]], inputs: { allowAnonymous: \"allowAnonymous\" }, outputs: { login: \"login\" }, decls: 14, vars: 13, consts: [[\"role\", \"form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"full-width\"], [\"matInput\", \"\", \"required\", \"\", \"formControlName\", \"username\", 3, \"placeholder\"], [\"matInput\", \"\", \"required\", \"\", \"type\", \"password\", \"formControlName\", \"password\", 3, \"placeholder\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [\"mat-raised-button\", \"\", \"class\", \"anonymous\", \"type\", \"button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 1, \"anonymous\", 3, \"disabled\", \"click\"], [\"size\", \"3\", \"color\", \"red\"]], template: function AuthInternComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"form\", 0);\n        ɵngcc0.ɵɵlistener(\"ngSubmit\", function AuthInternComponent_Template_form_ngSubmit_0_listener() { return ctx.loginUser(ctx.form.value); });\n        ɵngcc0.ɵɵelementStart(1, \"div\");\n        ɵngcc0.ɵɵelementStart(2, \"mat-form-field\", 1);\n        ɵngcc0.ɵɵelement(3, \"input\", 2);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"div\");\n        ɵngcc0.ɵɵelementStart(6, \"mat-form-field\", 1);\n        ɵngcc0.ɵɵelement(7, \"input\", 3);\n        ɵngcc0.ɵɵpipe(8, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"button\", 4);\n        ɵngcc0.ɵɵtext(10);\n        ɵngcc0.ɵɵpipe(11, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(12, AuthInternComponent_button_12_Template, 3, 4, \"button\", 5);\n        ɵngcc0.ɵɵtemplate(13, AuthInternComponent_div_13_Template, 4, 1, \"div\", 6);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"formGroup\", ctx.form);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(4, 7, \"igo.auth.user\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(8, 9, \"igo.auth.password\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.form.valid || ctx.loading);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 11, \"igo.auth.login\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.allowAnonymous);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.error);\n    } }, directives: [ɵngcc7.ɵangular_packages_forms_forms_y, ɵngcc7.NgControlStatusGroup, ɵngcc7.FormGroupDirective, ɵngcc8.MatFormField, ɵngcc9.MatInput, ɵngcc7.DefaultValueAccessor, ɵngcc7.RequiredValidator, ɵngcc7.NgControlStatus, ɵngcc7.FormControlName, ɵngcc5.MatButton, ɵngcc4.NgIf], pipes: [ɵngcc6.TranslatePipe], styles: [\".full-width[_ngcontent-%COMP%]{width:100%}.anonymous[_ngcontent-%COMP%]{margin-left:10px}\"] });\nAuthInternComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: LanguageService },\n    { type: FormBuilder }\n];\nAuthInternComponent.propDecorators = {\n    allowAnonymous: [{ type: Input }],\n    login: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthInternComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-intern',\n                template: \"<form [formGroup]=\\\"form\\\" role=\\\"form\\\" (ngSubmit)=\\\"loginUser(form.value)\\\">\\n  <div>\\n    <mat-form-field class=\\\"full-width\\\">\\n      <input matInput required placeholder=\\\"{{'igo.auth.user' | translate}}\\\" formControlName=\\\"username\\\">\\n    </mat-form-field>\\n  </div>\\n\\n  <div>\\n    <mat-form-field class=\\\"full-width\\\">\\n      <input matInput required type=\\\"password\\\" placeholder=\\\"{{'igo.auth.password' | translate}}\\\" formControlName=\\\"password\\\">\\n    </mat-form-field>\\n  </div>\\n\\n  <button mat-raised-button type=\\\"submit\\\" [disabled]=\\\"!form.valid || loading\\\">{{'igo.auth.login' | translate}}</button>\\n  <button *ngIf=\\\"allowAnonymous\\\" mat-raised-button class=\\\"anonymous\\\" type=\\\"button\\\" [disabled]=\\\"loading\\\" (click)=\\\"loginAnonymous()\\\">\\n    {{'igo.auth.accessAnonymous' | translate }}\\n  </button>\\n  <div *ngIf=\\\"error\\\">\\n    <br/>\\n    <font size=\\\"3\\\" color=\\\"red\\\">{{error}}</font>\\n  </div>\\n</form>\\n\",\n                changeDetection: ChangeDetectionStrategy.Default,\n                styles: [\".full-width{width:100%}.anonymous{margin-left:10px}\"]\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc2.LanguageService }, { type: ɵngcc7.FormBuilder }]; }, { login: [{\n            type: Output\n        }], allowAnonymous: [{\n            type: Input\n        }] }); })();\n\nclass AuthFacebookComponent {\n    constructor(authService, config, appRef) {\n        this.authService = authService;\n        this.config = config;\n        this.appRef = appRef;\n        this.login = new EventEmitter();\n        this.options = this.config.getConfig('auth.facebook') || {};\n        if (this.options.appId) {\n            this.loadSDKFacebook();\n        }\n        else {\n            console.warn('Facebook authentification needs \"appId\" option');\n        }\n    }\n    subscribeEvents() {\n        window.FB.Event.subscribe('auth.statusChange', rep => {\n            this.statusChangeCallback(rep);\n        });\n    }\n    statusChangeCallback(response) {\n        if (response.status === 'connected') {\n            const accessToken = response.authResponse.accessToken;\n            this.loginFacebook(accessToken);\n        }\n    }\n    loginFacebook(token) {\n        this.authService.loginWithToken(token, 'facebook').subscribe(() => {\n            this.appRef.tick();\n            this.login.emit(true);\n        });\n    }\n    loadSDKFacebook() {\n        if (document.getElementById('facebook-jssdk')) {\n            return;\n        }\n        const urlSDK = 'https://connect.facebook.net/fr_CA/sdk.js#xfbml=1&version=v2.9';\n        const fjs = document.getElementsByTagName('script')[0];\n        const js = document.createElement('script');\n        js.id = 'facebook-jssdk';\n        js.src = `${urlSDK}&appId=${this.options.appId}`;\n        js.onload = () => {\n            this.subscribeEvents();\n        };\n        fjs.parentNode.insertBefore(js, fjs);\n    }\n}\nAuthFacebookComponent.ɵfac = function AuthFacebookComponent_Factory(t) { return new (t || AuthFacebookComponent)(ɵngcc0.ɵɵdirectiveInject(AuthService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ApplicationRef)); };\nAuthFacebookComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AuthFacebookComponent, selectors: [[\"igo-auth-facebook\"]], outputs: { login: \"login\" }, decls: 1, vars: 0, consts: [[\"scope\", \"public_profile,email\", \"data-max-rows\", \"1\", \"data-size\", \"large\", \"data-button-type\", \"login_with\", \"data-show-faces\", \"false\", \"data-auto-logout-link\", \"false\", \"data-use-continue-as\", \"false\", 1, \"fb-login-button\"]], template: function AuthFacebookComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"div\", 0);\n    } }, styles: [\"[_nghost-%COMP%]{display:inline-block;padding:10px 10px 10px 0;position:relative;top:-3px}\"], changeDetection: 0 });\nAuthFacebookComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: ConfigService },\n    { type: ApplicationRef }\n];\nAuthFacebookComponent.propDecorators = {\n    login: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthFacebookComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-facebook',\n                template: \"<div scope=\\\"public_profile,email\\\"\\n     class=\\\"fb-login-button\\\" data-max-rows=\\\"1\\\" data-size=\\\"large\\\"\\n     data-button-type=\\\"login_with\\\" data-show-faces=\\\"false\\\"\\n     data-auto-logout-link=\\\"false\\\" data-use-continue-as=\\\"false\\\">\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:inline-block;padding:10px 10px 10px 0;position:relative;top:-3px}\"]\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc2.ConfigService }, { type: ɵngcc0.ApplicationRef }]; }, { login: [{\n            type: Output\n        }] }); })();\n\nclass AuthGoogleComponent {\n    constructor(authService, config, languageService, appRef) {\n        this.authService = authService;\n        this.config = config;\n        this.languageService = languageService;\n        this.appRef = appRef;\n        this.login = new EventEmitter();\n        this.options = this.config.getConfig('auth.google') || {};\n        if (this.options.apiKey && this.options.clientId) {\n            this.loadSDKGoogle();\n            this.loadPlatform();\n        }\n        else {\n            console.warn('Google authentification needs \"apiKey\" and \"clientId\" options');\n        }\n    }\n    handleSignInClick() {\n        window.gapi.auth2.getAuthInstance().signIn();\n    }\n    handleSignOutClick() {\n        window.gapi.auth2.getAuthInstance().signOut();\n    }\n    handleClientLoad() {\n        window.gapi.load('client:auth2', () => this.initClient());\n    }\n    initClient() {\n        window.gapi.client\n            .init({\n            apiKey: this.options.apiKey,\n            clientId: this.options.clientId,\n            discoveryDocs: [\n                'https://people.googleapis.com/$discovery/rest?version=v1'\n            ],\n            scope: 'profile'\n        })\n            .then(() => {\n            this.handleSignOutClick();\n            this.updateTextButton();\n            window.gapi.auth2.getAuthInstance().isSignedIn.listen(rep => {\n                this.updateSigninStatus(rep);\n            });\n        });\n    }\n    updateSigninStatus(isSignedIn) {\n        this.updateTextButton();\n        if (isSignedIn) {\n            this.loginGoogle(window.gapi.client.getToken().access_token);\n        }\n    }\n    updateTextButton() {\n        const btn = document.querySelector('span[id^=\"not_signed_\"]');\n        if (btn && this.languageService.getLanguage() !== 'en') {\n            if (btn.innerHTML === 'Sign in with Google') {\n                btn.innerHTML = this.languageService.translate.instant('igo.auth.google.login');\n            }\n            else if (btn.innerHTML === 'Signed in with Google') {\n                btn.innerHTML = this.languageService.translate.instant('igo.auth.google.logged');\n            }\n        }\n    }\n    loginGoogle(token) {\n        this.authService.loginWithToken(token, 'google').subscribe(() => {\n            this.appRef.tick();\n            this.login.emit(true);\n        });\n    }\n    loadSDKGoogle() {\n        const fjs = document.getElementsByTagName('script')[0];\n        const js = document.createElement('script');\n        js.id = 'google-jssdk';\n        js.src = 'https://apis.google.com/js/api.js';\n        js.onload = () => {\n            this.handleClientLoad();\n        };\n        fjs.parentNode.insertBefore(js, fjs);\n    }\n    loadPlatform() {\n        const fjs = document.getElementsByTagName('script')[0];\n        const js = document.createElement('script');\n        js.id = 'google-platform';\n        js.src = 'https://apis.google.com/js/platform.js';\n        fjs.parentNode.insertBefore(js, fjs);\n    }\n}\nAuthGoogleComponent.ɵfac = function AuthGoogleComponent_Factory(t) { return new (t || AuthGoogleComponent)(ɵngcc0.ɵɵdirectiveInject(AuthService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ApplicationRef)); };\nAuthGoogleComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AuthGoogleComponent, selectors: [[\"igo-auth-google\"]], outputs: { login: \"login\" }, decls: 1, vars: 0, consts: [[\"data-height\", \"40\", \"data-width\", \"265\", \"data-longtitle\", \"true\", 1, \"g-signin2\", \"google-login-button\"]], template: function AuthGoogleComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"div\", 0);\n    } }, styles: [\"[_nghost-%COMP%]{display:inline-block;padding:10px 10px 10px 0}.google-login-button[_ngcontent-%COMP%]     .abcRioButton{color:rgba(0,0,0,.87)}\"], changeDetection: 0 });\nAuthGoogleComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: ConfigService },\n    { type: LanguageService },\n    { type: ApplicationRef }\n];\nAuthGoogleComponent.propDecorators = {\n    login: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthGoogleComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-google',\n                template: \"<div class=\\\"g-signin2 google-login-button\\\" data-height=\\\"40\\\" data-width=\\\"265\\\" data-longtitle=\\\"true\\\">\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:inline-block;padding:10px 10px 10px 0}.google-login-button ::ng-deep .abcRioButton{color:rgba(0,0,0,.87)}\"]\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc2.ConfigService }, { type: ɵngcc2.LanguageService }, { type: ɵngcc0.ApplicationRef }]; }, { login: [{\n            type: Output\n        }] }); })();\n\nclass LoggedGuard {\n    constructor(authService, config, router) {\n        this.authService = authService;\n        this.config = config;\n        this.router = router;\n    }\n    canActivate(route, state) {\n        if (this.authService.logged) {\n            return true;\n        }\n        this.authService.redirectUrl = state.url;\n        const authConfig = this.config.getConfig('auth');\n        if (authConfig && authConfig.loginRoute) {\n            this.router.navigateByUrl(authConfig.loginRoute);\n        }\n        return false;\n    }\n}\nLoggedGuard.ɵfac = function LoggedGuard_Factory(t) { return new (t || LoggedGuard)(ɵngcc0.ɵɵinject(AuthService), ɵngcc0.ɵɵinject(ɵngcc2.ConfigService), ɵngcc0.ɵɵinject(ɵngcc3.Router)); };\nLoggedGuard.ɵprov = ɵɵdefineInjectable({ factory: function LoggedGuard_Factory() { return new LoggedGuard(ɵɵinject(AuthService), ɵɵinject(ConfigService), ɵɵinject(Router)); }, token: LoggedGuard, providedIn: \"root\" });\nLoggedGuard.ctorParameters = () => [\n    { type: AuthService },\n    { type: ConfigService },\n    { type: Router }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LoggedGuard, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc2.ConfigService }, { type: ɵngcc3.Router }]; }, null); })();\n\nclass AuthGuard {\n    constructor(authService, config, router) {\n        this.authService = authService;\n        this.config = config;\n        this.router = router;\n    }\n    canActivate(route, state) {\n        if (this.authService.authenticated) {\n            return true;\n        }\n        this.authService.redirectUrl = state.url;\n        const authConfig = this.config.getConfig('auth');\n        if (authConfig && authConfig.loginRoute) {\n            this.router.navigateByUrl(authConfig.loginRoute);\n        }\n        return false;\n    }\n}\nAuthGuard.ɵfac = function AuthGuard_Factory(t) { return new (t || AuthGuard)(ɵngcc0.ɵɵinject(AuthService), ɵngcc0.ɵɵinject(ɵngcc2.ConfigService), ɵngcc0.ɵɵinject(ɵngcc3.Router)); };\nAuthGuard.ɵprov = ɵɵdefineInjectable({ factory: function AuthGuard_Factory() { return new AuthGuard(ɵɵinject(AuthService), ɵɵinject(ConfigService), ɵɵinject(Router)); }, token: AuthGuard, providedIn: \"root\" });\nAuthGuard.ctorParameters = () => [\n    { type: AuthService },\n    { type: ConfigService },\n    { type: Router }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthGuard, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc2.ConfigService }, { type: ɵngcc3.Router }]; }, null); })();\n\nclass AdminGuard {\n    constructor(authService, config, router) {\n        this.authService = authService;\n        this.config = config;\n        this.router = router;\n    }\n    canActivate(route, state) {\n        const token = this.authService.decodeToken();\n        if (token && token.user && token.user.isAdmin) {\n            return true;\n        }\n        this.authService.redirectUrl = state.url;\n        const authConfig = this.config.getConfig('auth');\n        if (authConfig && authConfig.loginRoute) {\n            this.router.navigateByUrl(authConfig.loginRoute);\n        }\n        return false;\n    }\n}\nAdminGuard.ɵfac = function AdminGuard_Factory(t) { return new (t || AdminGuard)(ɵngcc0.ɵɵinject(AuthService), ɵngcc0.ɵɵinject(ɵngcc2.ConfigService), ɵngcc0.ɵɵinject(ɵngcc3.Router)); };\nAdminGuard.ɵprov = ɵɵdefineInjectable({ factory: function AdminGuard_Factory() { return new AdminGuard(ɵɵinject(AuthService), ɵɵinject(ConfigService), ɵɵinject(Router)); }, token: AdminGuard, providedIn: \"root\" });\nAdminGuard.ctorParameters = () => [\n    { type: AuthService },\n    { type: ConfigService },\n    { type: Router }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AdminGuard, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc2.ConfigService }, { type: ɵngcc3.Router }]; }, null); })();\n\nclass ProfilsGuard {\n    constructor(authService, config, router) {\n        this.authService = authService;\n        this.config = config;\n        this.router = router;\n    }\n    canActivate(_route, state) {\n        return this.authService.getProfils().pipe(map((profils) => {\n            const authConfig = this.config.getConfig('auth');\n            if (profils &&\n                profils.profils &&\n                profils.profils.some(v => authConfig.profilsGuard.indexOf(v) !== -1)) {\n                return true;\n            }\n            this.authService.redirectUrl = state.url;\n            if (authConfig && authConfig.loginRoute) {\n                this.router.navigateByUrl(authConfig.loginRoute);\n            }\n            return false;\n        }));\n    }\n}\nProfilsGuard.ɵfac = function ProfilsGuard_Factory(t) { return new (t || ProfilsGuard)(ɵngcc0.ɵɵinject(AuthService), ɵngcc0.ɵɵinject(ɵngcc2.ConfigService), ɵngcc0.ɵɵinject(ɵngcc3.Router)); };\nProfilsGuard.ɵprov = ɵɵdefineInjectable({ factory: function ProfilsGuard_Factory() { return new ProfilsGuard(ɵɵinject(AuthService), ɵɵinject(ConfigService), ɵɵinject(Router)); }, token: ProfilsGuard, providedIn: \"root\" });\nProfilsGuard.ctorParameters = () => [\n    { type: AuthService },\n    { type: ConfigService },\n    { type: Router }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProfilsGuard, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc2.ConfigService }, { type: ɵngcc3.Router }]; }, null); })();\n\nclass AuthInterceptor {\n    constructor(config, tokenService, http) {\n        this.config = config;\n        this.tokenService = tokenService;\n        this.http = http;\n        this.refreshInProgress = false;\n    }\n    get trustHosts() {\n        const trustHosts = this.config.getConfig('auth.trustHosts') || [];\n        trustHosts.push(window.location.hostname);\n        return trustHosts;\n    }\n    intercept(req, next) {\n        this.refreshToken();\n        const token = this.tokenService.get();\n        const element = document.createElement('a');\n        element.href = req.url;\n        if (element.host === '') {\n            element.href = element.href; // FIX IE11, DO NOT REMOVE\n        }\n        if (!token || this.trustHosts.indexOf(element.hostname) === -1) {\n            return next.handle(req);\n        }\n        const authHeader = `Bearer ${token}`;\n        let authReq = req.clone({\n            headers: req.headers.set('Authorization', authHeader)\n        });\n        const tokenDecoded = this.tokenService.decode();\n        if (authReq.params.get('_i') === 'true' &&\n            tokenDecoded &&\n            tokenDecoded.user &&\n            tokenDecoded.user.sourceId) {\n            const hashUser = Md5.hashStr(tokenDecoded.user.sourceId);\n            authReq = authReq.clone({\n                params: authReq.params.set('_i', hashUser)\n            });\n        }\n        else if (authReq.params.get('_i') === 'true') {\n            authReq = authReq.clone({\n                params: authReq.params.delete('_i')\n            });\n        }\n        return next.handle(authReq);\n    }\n    interceptXhr(xhr, url) {\n        this.refreshToken();\n        const element = document.createElement('a');\n        element.href = url;\n        const token = this.tokenService.get();\n        if (!token || this.trustHosts.indexOf(element.hostname) === -1) {\n            return false;\n        }\n        xhr.setRequestHeader('Authorization', 'Bearer ' + token);\n        return true;\n    }\n    refreshToken() {\n        const jwt = this.tokenService.decode();\n        const currentTime = new Date().getTime() / 1000;\n        if (!this.refreshInProgress &&\n            jwt &&\n            currentTime < jwt.exp &&\n            currentTime > jwt.exp - 1800) {\n            this.refreshInProgress = true;\n            const url = this.config.getConfig('auth.url');\n            return this.http.post(`${url}/refresh`, {}).subscribe((data) => {\n                this.tokenService.set(data.token);\n                this.refreshInProgress = false;\n            }, err => {\n                err.error.caught = true;\n                return err;\n            });\n        }\n    }\n}\nAuthInterceptor.ɵfac = function AuthInterceptor_Factory(t) { return new (t || AuthInterceptor)(ɵngcc0.ɵɵinject(ɵngcc2.ConfigService), ɵngcc0.ɵɵinject(TokenService), ɵngcc0.ɵɵinject(ɵngcc1.HttpClient)); };\nAuthInterceptor.ɵprov = ɵɵdefineInjectable({ factory: function AuthInterceptor_Factory() { return new AuthInterceptor(ɵɵinject(ConfigService), ɵɵinject(TokenService), ɵɵinject(HttpClient)); }, token: AuthInterceptor, providedIn: \"root\" });\nAuthInterceptor.ctorParameters = () => [\n    { type: ConfigService },\n    { type: TokenService },\n    { type: HttpClient }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthInterceptor, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc2.ConfigService }, { type: TokenService }, { type: ɵngcc1.HttpClient }]; }, null); })();\n\nfunction MSALConfigFactory(config) {\n    const msConf = config.getConfig('auth.microsoft') || {};\n    return {\n        auth: {\n            clientId: msConf.clientId,\n            authority: 'https://login.microsoftonline.com/organizations',\n            redirectUri: window.location.href\n        },\n        cache: {\n            cacheLocation: 'sessionStorage'\n        }\n    };\n}\nfunction MSALAngularConfigFactory() {\n    return {\n        popUp: true,\n        consentScopes: ['user.read']\n    };\n}\nfunction provideAuthMicrosoft() {\n    return [\n        {\n            provide: MSAL_CONFIG,\n            useFactory: MSALConfigFactory,\n            deps: [ConfigService]\n        },\n        {\n            provide: MSAL_CONFIG_ANGULAR,\n            useFactory: MSALAngularConfigFactory\n        },\n        MsalService\n    ];\n}\n\nclass ProtectedDirective {\n    constructor(authentication, el) {\n        if (!authentication.isAuthenticated()) {\n            el.nativeElement.parentNode.removeChild(el.nativeElement);\n        }\n    }\n}\nProtectedDirective.ɵfac = function ProtectedDirective_Factory(t) { return new (t || ProtectedDirective)(ɵngcc0.ɵɵdirectiveInject(AuthService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nProtectedDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ProtectedDirective, selectors: [[\"\", \"igoProtected\", \"\"]] });\nProtectedDirective.ctorParameters = () => [\n    { type: AuthService },\n    { type: ElementRef }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProtectedDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoProtected]'\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc0.ElementRef }]; }, null); })();\n\nclass AuthStorageService extends StorageService {\n    constructor(config, http, authService) {\n        super(config);\n        this.http = http;\n        this.authService = authService;\n        this.authService.authenticate$.subscribe(isAuthenticated => {\n            if (isAuthenticated && this.options.url) {\n                this.http\n                    .get(this.options.url)\n                    .subscribe((userIgo) => {\n                    if (userIgo && userIgo.preference) {\n                        for (const key of Object.keys(userIgo.preference)) {\n                            const value = userIgo.preference[key];\n                            super.set(key, value);\n                        }\n                    }\n                });\n            }\n        });\n    }\n    set(key, value, scope = StorageScope.LOCAL) {\n        if (scope === StorageScope.LOCAL &&\n            this.authService.authenticated &&\n            this.options.url) {\n            const preference = {};\n            preference[key] = value;\n            this.http.patch(this.options.url, { preference }).subscribe();\n        }\n        super.set(key, value, scope);\n    }\n    remove(key, scope = StorageScope.LOCAL) {\n        if (scope === StorageScope.LOCAL &&\n            this.authService.authenticated &&\n            this.options.url) {\n            const preference = {};\n            preference[key] = undefined;\n            this.http.patch(this.options.url, { preference }).subscribe();\n        }\n        return super.remove(key, scope);\n    }\n}\nAuthStorageService.ɵfac = function AuthStorageService_Factory(t) { return new (t || AuthStorageService)(ɵngcc0.ɵɵinject(ɵngcc2.ConfigService), ɵngcc0.ɵɵinject(ɵngcc1.HttpClient), ɵngcc0.ɵɵinject(AuthService)); };\nAuthStorageService.ɵprov = ɵɵdefineInjectable({ factory: function AuthStorageService_Factory() { return new AuthStorageService(ɵɵinject(ConfigService), ɵɵinject(HttpClient), ɵɵinject(AuthService)); }, token: AuthStorageService, providedIn: \"root\" });\nAuthStorageService.ctorParameters = () => [\n    { type: ConfigService },\n    { type: HttpClient },\n    { type: AuthService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthStorageService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc2.ConfigService }, { type: ɵngcc1.HttpClient }, { type: AuthService }]; }, null); })();\n\nconst routes = [\n    { path: 'login', component: AuthFormComponent },\n    { path: 'logout', component: AuthFormComponent }\n];\nclass AuthRoutingModule {\n}\nAuthRoutingModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AuthRoutingModule });\nAuthRoutingModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AuthRoutingModule_Factory(t) { return new (t || AuthRoutingModule)(); }, providers: [], imports: [[RouterModule.forChild(routes)], RouterModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(AuthRoutingModule, { imports: function () { return [ɵngcc3.RouterModule]; }, exports: function () { return [RouterModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthRoutingModule, [{\n        type: NgModule,\n        args: [{\n                imports: [RouterModule.forChild(routes)],\n                exports: [RouterModule],\n                providers: []\n            }]\n    }], null, null); })();\n\nclass AuthMicrosoftComponent {\n    constructor(authService, config, appRef, broadcastService, msalService) {\n        this.authService = authService;\n        this.config = config;\n        this.appRef = appRef;\n        this.broadcastService = broadcastService;\n        this.msalService = msalService;\n        this.login = new EventEmitter();\n        this.options = this.config.getConfig('auth.microsoft') || {};\n        if (this.options.clientId) {\n            this.broadcastService.subscribe('msal:loginSuccess', () => {\n                this.checkAccount();\n            });\n        }\n        else {\n            console.warn('Microsoft authentification needs \"clientId\" option');\n        }\n    }\n    loginMicrosoft() {\n        this.msalService.loginPopup();\n    }\n    checkAccount() {\n        this.msalService\n            .acquireTokenSilent({ scopes: ['user.read'] })\n            .then((response) => {\n            const token = response.accessToken;\n            this.authService.loginWithToken(token, 'microsoft').subscribe(() => {\n                this.appRef.tick();\n                this.login.emit(true);\n            });\n        });\n    }\n}\nAuthMicrosoftComponent.ɵfac = function AuthMicrosoftComponent_Factory(t) { return new (t || AuthMicrosoftComponent)(ɵngcc0.ɵɵdirectiveInject(AuthService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.ConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ApplicationRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc10.BroadcastService), ɵngcc0.ɵɵdirectiveInject(ɵngcc10.MsalService)); };\nAuthMicrosoftComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AuthMicrosoftComponent, selectors: [[\"igo-auth-microsoft\"]], outputs: { login: \"login\" }, decls: 4, vars: 3, consts: [[\"mat-raised-button\", \"\", 1, \"microsoft-login-button\", 3, \"click\"], [\"svgIcon\", \"microsoft\"]], template: function AuthMicrosoftComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function AuthMicrosoftComponent_Template_button_click_0_listener() { return ctx.loginMicrosoft(); });\n        ɵngcc0.ɵɵelement(1, \"mat-icon\", 1);\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵpipe(3, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 1, \"igo.auth.microsoft.login\"), \"\\n\");\n    } }, directives: [ɵngcc5.MatButton, ɵngcc11.MatIcon], pipes: [ɵngcc6.TranslatePipe], styles: [\"[_nghost-%COMP%]{display:inline-block;padding:10px 10px 10px 0;position:relative;top:-15px}[_nghost-%COMP%] > button[_ngcontent-%COMP%]{font-size:15px;height:40px;width:265px}mat-icon[_ngcontent-%COMP%]{margin-right:10px}\"], changeDetection: 0 });\nAuthMicrosoftComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: ConfigService },\n    { type: ApplicationRef },\n    { type: BroadcastService },\n    { type: MsalService }\n];\nAuthMicrosoftComponent.propDecorators = {\n    login: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AuthMicrosoftComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-auth-microsoft',\n                template: \"<button class=\\\"microsoft-login-button\\\" mat-raised-button (click)=\\\"loginMicrosoft()\\\">\\n  <mat-icon svgIcon=\\\"microsoft\\\"></mat-icon>\\n  {{'igo.auth.microsoft.login' | translate}}\\n</button>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:inline-block;padding:10px 10px 10px 0;position:relative;top:-15px}:host>button{font-size:15px;height:40px;width:265px}mat-icon{margin-right:10px}\"]\n            }]\n    }], function () { return [{ type: AuthService }, { type: ɵngcc2.ConfigService }, { type: ɵngcc0.ApplicationRef }, { type: ɵngcc10.BroadcastService }, { type: ɵngcc10.MsalService }]; }, { login: [{\n            type: Output\n        }] }); })();\n\nclass IgoAuthModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAuthModule,\n            providers: [\n                {\n                    provide: HTTP_INTERCEPTORS,\n                    useClass: AuthInterceptor,\n                    multi: true\n                },\n                {\n                    provide: StorageService,\n                    useClass: AuthStorageService\n                },\n                ...provideAuthMicrosoft()\n            ]\n        };\n    }\n}\nIgoAuthModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAuthModule });\nIgoAuthModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAuthModule_Factory(t) { return new (t || IgoAuthModule)(); }, imports: [[\n            CommonModule,\n            ReactiveFormsModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatIconModule,\n            MatButtonModule,\n            IgoLanguageModule,\n            MsalModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAuthModule, { declarations: function () { return [AuthFormComponent, AuthGoogleComponent, AuthInternComponent, AuthFacebookComponent, AuthMicrosoftComponent, ProtectedDirective]; }, imports: function () { return [CommonModule,\n        ReactiveFormsModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatIconModule,\n        MatButtonModule,\n        IgoLanguageModule,\n        MsalModule]; }, exports: function () { return [AuthFormComponent, ProtectedDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAuthModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    ReactiveFormsModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    IgoLanguageModule,\n                    MsalModule\n                ],\n                declarations: [\n                    AuthFormComponent,\n                    AuthGoogleComponent,\n                    AuthInternComponent,\n                    AuthFacebookComponent,\n                    AuthMicrosoftComponent,\n                    ProtectedDirective\n                ],\n                exports: [AuthFormComponent, ProtectedDirective]\n            }]\n    }], null, null); })();\n\n/*\n * Public API Surface of auth\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AdminGuard, AuthFormComponent, AuthGuard, AuthInterceptor, AuthRoutingModule, AuthService, AuthStorageService, IgoAuthModule, LoggedGuard, MSALAngularConfigFactory, MSALConfigFactory, ProfilsGuard, ProtectedDirective, TokenService, provideAuthMicrosoft, AuthFormComponent as ɵa, AuthGoogleComponent as ɵb, AuthInternComponent as ɵc, AuthFacebookComponent as ɵd, AuthMicrosoftComponent as ɵe };\n\n//# sourceMappingURL=igo2-auth.js.map","import { Routes, RouterModule } from '@angular/router';\n\nimport { AppAuthFormComponent } from './auth-form.component';\n\nconst routes: Routes = [\n  {\n    path: 'auth-form',\n    component: AppAuthFormComponent\n  }\n];\n\nexport const AppAuthFormRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\n\n@Component({\n  selector: 'app-auth-form',\n  templateUrl: './auth-form.component.html',\n  styleUrls: ['./auth-form.component.scss']\n})\nexport class AppAuthFormComponent {\n  private idsActivity: string[] = [];\n\n  constructor(private languageService: LanguageService) {}\n}\n","<mat-card>\n  <mat-card-subtitle>Auth</mat-card-subtitle>\n  <mat-card-title>Authentification</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: ConfigService, LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/auth/auth-form\">code of this example</a><br>\n    See auth section of the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a>\n  </mat-card-content>\n</mat-card>\n\n<igo-auth-form></igo-auth-form>\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoAuthModule } from '@igo2/auth';\n\nimport { AppAuthFormComponent } from './auth-form.component';\nimport { AppAuthFormRoutingModule } from './auth-form-routing.module';\n\n@NgModule({\n  declarations: [AppAuthFormComponent],\n  imports: [AppAuthFormRoutingModule, MatCardModule, IgoAuthModule.forRoot()],\n  exports: [AppAuthFormComponent]\n})\nexport class AppAuthFormModule {}\n","import { ɵɵdefineInjectable, Injectable, Component, ChangeDetectionStrategy, Input, NgModule, ɵɵinject, Optional, Inject, Directive, EventEmitter, Self, Output, ApplicationRef, ChangeDetectorRef, Renderer2, ElementRef, ViewChildren, ContentChild, Pipe, HostListener, ViewChild, INJECTOR, Injector, InjectionToken, APP_INITIALIZER } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { getEntityId, getEntityTitle, getEntityProperty, getEntityRevision, getEntityIcon, EntityStore, EntityStoreStrategy, EntityStoreWatcher, IgoListModule, IgoCollapsibleModule, IgoImageModule, IgoPanelModule, IgoMatBadgeIconModule, IgoKeyValueModule, IgoFormModule, IgoFormFieldComponent, EntityTableColumnRenderer, DragAndDropDirective, IgoSpinnerModule, IgoDrapDropModule, IgoConfirmDialogModule, IgoEntityTableModule, getEntityTitleHtml, IgoStopPropagationModule, IgoFlexibleModule, WidgetService, Workspace, ActionStore, EntityStoreFilterSelectionStrategy, EntityStoreFilterCustomFuncStrategy, WorkspaceSelectorComponent, IgoWidgetModule } from '@igo2/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { IgoLanguageModule, ConfigService, LanguageService, MessageService, ActivityService, NetworkService, MediaService, Media, RouteService, StorageService, StorageScope } from '@igo2/core';\nimport { BehaviorSubject, combineLatest, Observable, of, forkJoin, Subject, zip, EMPTY, ReplaySubject, timer, fromEvent, throwError } from 'rxjs';\nimport { map, concatMap, catchError, skipWhile, debounceTime, skip, distinctUntilChanged, mergeMap, first, debounce, take } from 'rxjs/operators';\nimport { transform, METERS_PER_UNIT, get, transformExtent, fromLonLat } from 'ol/proj';\nimport { MAC } from 'ol/has';\nimport { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\nimport stylefunction from 'ol-mapbox-style/dist/stylefunction';\nimport { AuthInterceptor, AuthService } from '@igo2/auth';\nimport { uuid, ObjectUtils, Watcher, SubjectStatus, downloadContent, strEnum, Clipboard } from '@igo2/utils';\nimport { Md5 } from 'ts-md5';\nimport OlVectorSource from 'ol/source/Vector';\nimport * as olformat from 'ol/format';\nimport { GeoJSON, WFS, TopoJSON, EsriJSON, GPX, WKT, KML, WMSCapabilities, WMTSCapabilities, WMSGetFeatureInfo, GML } from 'ol/format';\nimport olSourceOSM from 'ol/source/OSM';\nimport olSourceXYZ from 'ol/source/XYZ';\nimport { bbox as bbox$1 } from 'ol/loadingstrategy';\nimport { bbox, and, not, or, within, notEqualTo, like, lessThanOrEqualTo, lessThan, isNull, intersects, greaterThanOrEqualTo, greaterThan, equalTo, during, contains, between } from 'ol/format/filter';\nimport olWKT from 'ol/format/WKT';\nimport olFormatWFS from 'ol/format/WFS';\nimport * as moment_ from 'moment';\nimport { duration } from 'moment';\nimport olFormatGML2 from 'ol/format/GML2';\nimport olFormatGML3 from 'ol/format/GML3';\nimport olFormatGML32 from 'ol/format/GML32';\nimport olFormatOSMXML from 'ol/format/OSMXML';\nimport olSourceImageWMS from 'ol/source/ImageWMS';\nimport olSourceWMTS from 'ol/source/WMTS';\nimport olTileGridWMTS from 'ol/tilegrid/WMTS';\nimport { getWidth, getTopLeft } from 'ol/extent.js';\nimport olSourceCarto from 'ol/source/CartoDB';\nimport olFormatEsriJSON from 'ol/format/EsriJSON';\nimport olSourceTileArcGISRest from 'ol/source/TileArcGISRest';\nimport olFeature from 'ol/Feature';\nimport olSourceVectorTile from 'ol/source/VectorTile';\nimport olFormatMVT from 'ol/format/MVT';\nimport olSourceCluster from 'ol/source/Cluster';\nimport { __decorate, __metadata } from 'tslib';\nimport { Cacheable } from 'ngx-cacheable';\nimport { optionsFromCapabilities } from 'ol/source/WMTS.js';\nimport olAttribution from 'ol/control/Attribution';\nimport * as olstyle from 'ol/style';\nimport { Style, Text, Fill, Icon, Stroke, Circle, RegularShape } from 'ol/style';\nimport proj4 from 'proj4';\nimport { register } from 'ol/proj/proj4';\nimport olLayerImage from 'ol/layer/Image';\nimport olLayerTile from 'ol/layer/Tile';\nimport OlVectorLayer from 'ol/layer/Vector';\nimport { unByKey } from 'ol/Observable';\nimport { easeOut } from 'ol/easing';\nimport { asArray } from 'ol/color';\nimport { getVectorContext } from 'ol/render';\nimport olLayerVectorTile from 'ol/layer/VectorTile';\nimport olMap from 'ol/Map';\nimport olView from 'ol/View';\nimport olGeolocation from 'ol/Geolocation';\nimport olControlScaleLine from 'ol/control/ScaleLine';\nimport { defaults, Select, Translate } from 'ol/interaction';\nimport olCircle from 'ol/geom/Circle';\nimport { createEmpty, extend, getSize, containsExtent, getArea, intersects as intersects$1, boundingExtent, buffer, getCenter } from 'ol/extent';\nimport OlGeometryLayout from 'ol/geom/GeometryLayout';\nimport OlPolygon from 'ol/geom/Polygon';\nimport OlPoint from 'ol/geom/Point';\nimport OlLineString from 'ol/geom/LineString';\nimport OlGeoJSON from 'ol/format/GeoJSON';\nimport OlDragBoxInteraction from 'ol/interaction/DragBox';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { MultiLineString, MultiPolygon, Polygon, LineString, Point } from 'ol/geom';\nimport OlRenderFeature from 'ol/render/Feature';\nimport { FormsModule, NgControl, ReactiveFormsModule, Validators, FormBuilder, FormControl } from '@angular/forms';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatSliderModule, MatSlider } from '@angular/material/slider';\nimport olProjection from 'ol/proj/Projection';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport pointOnFeature from '@turf/point-on-feature';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { DateAdapter, MAT_DATE_LOCALE, MatOptionModule, MatNativeDateModule } from '@angular/material/core';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatTreeNestedDataSource, MatTreeModule } from '@angular/material/tree';\nimport { MatDatetimepickerModule, MatNativeDatetimeModule } from '@mat-datetimepicker/core';\nimport OlOverlay from 'ol/Overlay';\nimport { getLength, getArea as getArea$1 } from 'ol/sphere';\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\nimport OlStyle from 'ol/style/Style';\nimport lineIntersect from '@turf/line-intersect';\nimport { lineString } from '@turf/helpers';\nimport OlDraw from 'ol/interaction/Draw';\nimport OlModify from 'ol/interaction/Modify';\nimport OlTranslate from 'ol/interaction/Translate';\nimport OlLinearRing from 'ol/geom/LinearRing';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { NestedTreeControl } from '@angular/cdk/tree';\nimport { saveAs } from 'file-saver';\nimport * as jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport * as JSZip from 'jszip';\nimport { pointerMove, click } from 'ol/events/condition';\n\n/**\n * This method extracts a coordinate tuple from a string.\n * @param str Any string\n * @param mapProjection string Map Projection\n * @param opts.forceNA boolean Force North America Zone\n * @returns object:\n *             lonLat: Coordinate,\n *             message: Message of error,\n *             radius: radius of the confience of coordinate,\n *             conf: confidence of the coordinate}\n */\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nimport * as ɵngcc2 from '@angular/material/button';\nimport * as ɵngcc3 from '@angular/material/tooltip';\nimport * as ɵngcc4 from '@angular/material/icon';\nimport * as ɵngcc5 from '@ngx-translate/core';\nimport * as ɵngcc6 from '@angular/common/http';\nimport * as ɵngcc7 from '@igo2/core';\nimport * as ɵngcc8 from '@igo2/auth';\nimport * as ɵngcc9 from '@igo2/common';\nimport * as ɵngcc10 from '@angular/material/list';\nimport * as ɵngcc11 from '@angular/material/core';\nimport * as ɵngcc12 from '@angular/material/badge';\nimport * as ɵngcc13 from '@angular/material/checkbox';\nimport * as ɵngcc14 from '@angular/material/form-field';\nimport * as ɵngcc15 from '@angular/material/select';\nimport * as ɵngcc16 from '@angular/forms';\nimport * as ɵngcc17 from '@angular/material/menu';\nimport * as ɵngcc18 from '@angular/material/slider';\nimport * as ɵngcc19 from '@angular/material/input';\nimport * as ɵngcc20 from '@angular/material/slide-toggle';\nimport * as ɵngcc21 from '@angular/material/divider';\nimport * as ɵngcc22 from '@angular/platform-browser';\nimport * as ɵngcc23 from '@angular/material/button-toggle';\nimport * as ɵngcc24 from '@angular/material/dialog';\nimport * as ɵngcc25 from '@mat-datetimepicker/core';\nimport * as ɵngcc26 from '@angular/material/autocomplete';\nimport * as ɵngcc27 from '@angular/material/tabs';\nimport * as ɵngcc28 from '@angular/material/radio';\nimport * as ɵngcc29 from '@angular/material/table';\nimport * as ɵngcc30 from '@angular/material/tree';\nimport * as ɵngcc31 from '@angular/material/datepicker';\n\nfunction MetadataButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 1);\n    ɵngcc0.ɵɵlistener(\"click\", function MetadataButtonComponent_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.openMetadata(ctx_r1.options.metadata); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.geo.metadata.show\"))(\"color\", ctx_r0.color);\n} }\nconst _c0 = [\"*\"];\nconst _c1 = function (a0) { return { zoom: a0 }; };\nconst _c2 = function (a0) { return [a0]; };\nfunction OfflineButtonComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵelementStart(1, \"div\");\n    ɵngcc0.ɵɵelementStart(2, \"button\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function OfflineButtonComponent_div_0_Template_button_click_2_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.onToggle(); })(\"click\", function OfflineButtonComponent_div_0_Template_button_click_2_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.map.onOfflineToggle(ctx_r3.check); });\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelement(5, \"mat-icon\", 3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r0.checked ? ɵngcc0.ɵɵpipeBind1(3, 3, \"igo.geo.mapButtons.online\") : ɵngcc0.ɵɵpipeBind1(4, 5, \"igo.geo.mapButtons.offline\"))(\"ngClass\", ɵngcc0.ɵɵpureFunction1(7, _c2, ctx_r0.btnStyle))(\"color\", ctx_r0.checked ? ctx_r0.color : ɵngcc0.ɵɵpureFunction1(9, _c2, ctx_r0.colorOff));\n} }\nfunction BaseLayersSwitcherComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 6);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 7);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelement(3, \"mat-icon\", 8);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.mapButtons.baselayerSwitcher\"));\n} }\nfunction BaseLayersSwitcherComponent_div_0_igo_mini_basemap_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-mini-basemap\", 9);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n} if (rf & 2) {\n    const baseLayer_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"map\", ctx_r2.map)(\"baseLayer\", baseLayer_r3)(\"title\", ctx_r2.baseLayers.length > 2 && !ctx_r2.expand ? ɵngcc0.ɵɵpipeBind1(1, 5, \"igo.geo.baselayersSwitcher.title\") : baseLayer_r3.title)(\"display\", ctx_r2.expand || i_r4 === 0 && !ctx_r2.useStaticIcon)(\"disabled\", !ctx_r2.expand && ctx_r2.baseLayers.length > 1);\n} }\nconst _c3 = function (a0) { return { \"container-expand\": a0 }; };\nfunction BaseLayersSwitcherComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵlistener(\"@baseLayerSwitcherState.start\", function BaseLayersSwitcherComponent_div_0_Template_div_animation_baseLayerSwitcherState_start_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.showButton = false; })(\"@baseLayerSwitcherState.done\", function BaseLayersSwitcherComponent_div_0_Template_div_animation_baseLayerSwitcherState_done_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.showButton = true; })(\"click\", function BaseLayersSwitcherComponent_div_0_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.collapseOrExpand(); });\n    ɵngcc0.ɵɵtemplate(1, BaseLayersSwitcherComponent_div_0_div_1_Template, 4, 3, \"div\", 2);\n    ɵngcc0.ɵɵtemplate(2, BaseLayersSwitcherComponent_div_0_igo_mini_basemap_2_Template, 2, 7, \"igo-mini-basemap\", 3);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 4);\n    ɵngcc0.ɵɵelement(4, \"mat-icon\", 5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(4, _c3, ctx_r0.expand))(\"@baseLayerSwitcherState\", ctx_r0.expand ? \"expand\" : ctx_r0.useStaticIcon ? \"collapseIcon\" : \"collapseMap\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.useStaticIcon && !ctx_r0.expand && ctx_r0.showButton);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.baseLayers);\n} }\nfunction MiniBaseMapComponent_div_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 5);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r1.title, \" \");\n} }\nfunction MiniBaseMapComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function MiniBaseMapComponent_div_1_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.changeBaseLayer(ctx_r2.baseLayer); });\n    ɵngcc0.ɵɵelement(1, \"igo-map-browser\", 3);\n    ɵngcc0.ɵɵtemplate(2, MiniBaseMapComponent_div_1_div_2_Template, 2, 1, \"div\", 4);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"map\", ctx_r0.basemap);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.title);\n} }\nfunction RotationButtonComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementStart(3, \"button\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function RotationButtonComponent_div_0_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.map.viewController.resetRotation(); });\n    ɵngcc0.ɵɵelement(4, \"mat-icon\", 3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r0.rotated ? ɵngcc0.ɵɵpipeBind1(1, 4, \"igo.geo.mapButtons.resetRotation\") : ɵngcc0.ɵɵpipeBind1(2, 6, \"igo.geo.mapButtons.tipRotation\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r0.color)(\"disabled\", !ctx_r0.rotated);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngStyle\", ctx_r0.rotationStyle(ctx_r0.map.viewController.getRotation()));\n} }\nfunction RotationButtonComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementStart(3, \"button\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function RotationButtonComponent_div_1_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.map.viewController.resetRotation(); });\n    ɵngcc0.ɵɵelement(4, \"mat-icon\", 3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r1.rotated ? ɵngcc0.ɵɵpipeBind1(1, 4, \"igo.geo.mapButtons.resetRotation\") : ɵngcc0.ɵɵpipeBind1(2, 6, \"igo.geo.mapButtons.tipRotation\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r1.color)(\"disabled\", !ctx_r1.rotated);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngStyle\", ctx_r1.rotationStyle(ctx_r1.map.viewController.getRotation()));\n} }\nfunction CatalogBrowserComponent_ng_template_1_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"igo-catalog-browser-group\", 3);\n    ɵngcc0.ɵɵlistener(\"addedChange\", function CatalogBrowserComponent_ng_template_1_ng_container_0_Template_igo_catalog_browser_group_addedChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(2); return ctx_r4.onGroupAddedChange($event); })(\"layerAddedChange\", function CatalogBrowserComponent_ng_template_1_ng_container_0_Template_igo_catalog_browser_group_layerAddedChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r6 = ɵngcc0.ɵɵnextContext(2); return ctx_r6.onLayerAddedChange($event); });\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"catalog\", ctx_r2.catalog)(\"group\", item_r1)(\"state\", ctx_r2.store.state)(\"resolution\", ɵngcc0.ɵɵpipeBind1(2, 6, ctx_r2.resolution$))(\"catalogAllowLegend\", ctx_r2.catalogAllowLegend)(\"toggleCollapsed\", ctx_r2.toggleCollapsedGroup);\n} }\nfunction CatalogBrowserComponent_ng_template_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"igo-catalog-browser-layer\", 4);\n    ɵngcc0.ɵɵlistener(\"addedChange\", function CatalogBrowserComponent_ng_template_1_ng_container_1_Template_igo_catalog_browser_layer_addedChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(2); return ctx_r8.onLayerAddedChange($event); });\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"layer\", item_r1)(\"resolution\", ɵngcc0.ɵɵpipeBind1(2, 4, ctx_r3.resolution$))(\"catalogAllowLegend\", ctx_r3.catalogAllowLegend)(\"added\", ctx_r3.store.state.get(item_r1).added);\n} }\nfunction CatalogBrowserComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, CatalogBrowserComponent_ng_template_1_ng_container_0_Template, 3, 8, \"ng-container\", 2);\n    ɵngcc0.ɵɵtemplate(1, CatalogBrowserComponent_ng_template_1_ng_container_1_Template, 3, 6, \"ng-container\", 2);\n} if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.isGroup(item_r1));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.isLayer(item_r1));\n} }\nfunction CatalogBrowserLayerComponent_mat_icon_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"mat-icon\", 8);\n} }\nfunction CatalogBrowserLayerComponent_igo_layer_legend_12_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-layer-legend\", 2);\n    ɵngcc0.ɵɵpipe(1, \"async\");\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"layer\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx_r2.igoLayer$));\n} }\nfunction CatalogBrowserGroupComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function CatalogBrowserGroupComponent_ng_container_4_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.onToggleClick(); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelement(4, \"mat-icon\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.catalog.group.removeFromMap\"))(\"disabled\", ɵngcc0.ɵɵpipeBind1(3, 4, ctx_r0.disabled$));\n} }\nfunction CatalogBrowserGroupComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 8);\n    ɵngcc0.ɵɵlistener(\"click\", function CatalogBrowserGroupComponent_ng_template_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.onToggleClick(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelement(3, \"mat-icon\", 9);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.geo.catalog.group.addToMap\"))(\"disabled\", ɵngcc0.ɵɵpipeBind1(2, 4, ctx_r2.disabled$));\n} }\nfunction CatalogBrowserGroupComponent_ng_template_11_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nfunction CatalogBrowserGroupComponent_ng_template_11_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"igo-catalog-browser-layer\", 11);\n    ɵngcc0.ɵɵlistener(\"addedLayerIsPreview\", function CatalogBrowserGroupComponent_ng_template_11_ng_container_1_Template_igo_catalog_browser_layer_addedLayerIsPreview_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.onLayerPreview($event); })(\"addedChange\", function CatalogBrowserGroupComponent_ng_template_11_ng_container_1_Template_igo_catalog_browser_layer_addedChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r14 = ɵngcc0.ɵɵnextContext(2); return ctx_r14.onLayerAddedChange($event); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r9 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r11 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"layer\", item_r9)(\"resolution\", ctx_r11.resolution)(\"catalogAllowLegend\", ctx_r11.catalogAllowLegend)(\"added\", ctx_r11.state.get(item_r9).added);\n} }\nfunction CatalogBrowserGroupComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, CatalogBrowserGroupComponent_ng_template_11_ng_container_0_Template, 1, 0, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(1, CatalogBrowserGroupComponent_ng_template_11_ng_container_1_Template, 2, 4, \"ng-container\", 10);\n} if (rf & 2) {\n    const item_r9 = ctx.$implicit;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.isGroup(item_r9));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.isLayer(item_r9));\n} }\nfunction LayerItemComponent_mat_checkbox_1_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-checkbox\", 9);\n    ɵngcc0.ɵɵlistener(\"change\", function LayerItemComponent_mat_checkbox_1_Template_mat_checkbox_change_0_listener() { ɵngcc0.ɵɵrestoreView(_r7); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.check(); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r0.layerCheck);\n} }\nconst _c4 = function (a0) { return { disabled: a0 }; };\nfunction LayerItemComponent_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerItemComponent_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.toggleVisibility(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelement(3, \"mat-icon\", 11);\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r1.layer.visible ? \"primary\" : \"default\")(\"matTooltip\", ctx_r1.layer.visible ? ɵngcc0.ɵɵpipeBind1(1, 5, \"igo.geo.layer.hideLayer\") : ɵngcc0.ɵɵpipeBind1(2, 7, \"igo.geo.layer.showLayer\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"matBadgeHidden\", ɵngcc0.ɵɵpipeBind1(4, 9, ctx_r1.queryBadgeHidden$))(\"ngClass\", ɵngcc0.ɵɵpureFunction1(13, _c4, !ɵngcc0.ɵɵpipeBind1(5, 11, ctx_r1.inResolutionRange$)))(\"svgIcon\", ctx_r1.layer.visible ? \"eye\" : \"eye-off\");\n} }\nfunction LayerItemComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerItemComponent_button_5_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.toggleVisibility(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelement(3, \"mat-icon\", 11);\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r2.layer.visible ? \"primary\" : \"default\")(\"matTooltip\", ctx_r2.layer.visible ? ɵngcc0.ɵɵpipeBind1(1, 5, \"igo.geo.layer.hideLayer\") : ɵngcc0.ɵɵpipeBind1(2, 7, \"igo.geo.layer.showLayer\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"matBadgeHidden\", ɵngcc0.ɵɵpipeBind1(4, 9, ctx_r2.queryBadgeHidden$))(\"ngClass\", ɵngcc0.ɵɵpureFunction1(13, _c4, !ɵngcc0.ɵɵpipeBind1(5, 11, ctx_r2.inResolutionRange$)))(\"svgIcon\", ctx_r2.layer.visible ? \"eye\" : \"eye-off\");\n} }\nfunction LayerItemComponent_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerItemComponent_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12.toggleLayerTool(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 14);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.geo.layer.moreOptions\"));\n} }\nfunction LayerItemComponent_igo_layer_legend_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-layer-legend\", 15);\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"layer\", ctx_r5.layer)(\"updateLegendOnResolutionChange\", ctx_r5.updateLegendOnResolutionChange);\n} }\nconst _c5 = [\"renderedLegend\"];\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_mat_list_item_2_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵngcc0.ɵɵlistener(\"toggle\", function LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_mat_list_item_2_Template_mat_icon_toggle_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const item_r6 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r12 = ɵngcc0.ɵɵnextContext(3); return ctx_r12.toggleLegendItem($event, item_r6); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"h4\", 8);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    const _r9 = ɵngcc0.ɵɵreference(4);\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"target\", _r9)(\"collapsed\", item_r6.collapsed);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ɵngcc0.ɵɵpipeBind1(4, 3, ctx_r8.computeItemTitle(item_r6)), \" \");\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_5_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 11);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const style_r17 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", style_r17.name);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(style_r17.title);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_5_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(2, \"mat-select\", 9);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_5_Template_mat_select_ngModelChange_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r19); const ctx_r18 = ɵngcc0.ɵɵnextContext(4); return ctx_r18.currentStyle = $event; })(\"selectionChange\", function LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_5_Template_mat_select_selectionChange_2_listener() { ɵngcc0.ɵɵrestoreView(_r19); const ctx_r20 = ɵngcc0.ɵɵnextContext(4); return ctx_r20.onChangeStyle(); });\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵtemplate(4, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_5_mat_option_4_Template, 2, 2, \"mat-option\", 10);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(3, 3, \"igo.geo.layer.legend.selectStyle\"))(\"ngModel\", ctx_r10.currentStyle);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r10.styles);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_1_small_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"small\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLegendScale\"), \" \");\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"img\", 13, 14);\n    ɵngcc0.ɵɵlistener(\"load\", function LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_1_Template_img_load_1_listener() { ɵngcc0.ɵɵrestoreView(_r27); const item_r6 = ɵngcc0.ɵɵnextContext(2).$implicit; const ctx_r25 = ɵngcc0.ɵɵnextContext(3); return ctx_r25.onLoadImage(item_r6.title); });\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵpipe(4, \"secureImage\");\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(6, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_1_small_6_Template, 3, 3, \"small\", 0);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r6 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r21 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"id\", item_r6.title);\n    ɵngcc0.ɵɵpropertyInterpolate(\"src\", ɵngcc0.ɵɵpipeBind1(3, 4, ɵngcc0.ɵɵpipeBind1(4, 6, item_r6.url)), ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵpropertyInterpolate(\"alt\", ɵngcc0.ɵɵpipeBind1(5, 8, \"igo.geo.layer.legend.loadingLegendText\"));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r21.imagesHeight[item_r6.title] < 16);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 15);\n} if (rf & 2) {\n    const item_r6 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵproperty(\"ngStyle\", item_r6.style)(\"innerHTML\", item_r6.html, ɵngcc0.ɵɵsanitizeHtml);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtemplate(1, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_1_Template, 7, 10, \"div\", 0);\n    ɵngcc0.ɵɵtemplate(2, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_div_2_Template, 1, 2, \"div\", 12);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", item_r6.url);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", item_r6.html);\n} }\nconst _c6 = function (a0) { return { \"with-title\": a0 }; };\nfunction LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0, null, 4);\n    ɵngcc0.ɵɵtemplate(2, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_mat_list_item_2_Template, 5, 5, \"mat-list-item\", 0);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 5, 6);\n    ɵngcc0.ɵɵtemplate(5, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_5_Template, 5, 5, \"div\", 0);\n    ɵngcc0.ɵɵtemplate(6, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_div_6_Template, 3, 2, \"div\", 0);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", item_r6.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(4, _c6, item_r6.title));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.currentStyle !== undefined);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !item_r6.collapsed);\n} }\nfunction LayerLegendComponent_ng_container_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, LayerLegendComponent_ng_container_0_ng_container_1_ng_container_1_Template, 7, 6, \"ng-container\", 3);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const items_r1 = ɵngcc0.ɵɵnextContext().ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", items_r1.slice().reverse());\n} }\nfunction LayerLegendComponent_ng_container_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"small\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLegendText\"), \" \");\n} }\nfunction LayerLegendComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, LayerLegendComponent_ng_container_0_ng_container_1_Template, 2, 1, \"ng-container\", 1);\n    ɵngcc0.ɵɵtemplate(2, LayerLegendComponent_ng_container_0_ng_template_2_Template, 3, 3, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const items_r1 = ctx.ngIf;\n    const _r3 = ɵngcc0.ɵɵreference(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", items_r1.length)(\"ngIfElse\", _r3);\n} }\nconst _c7 = [\"igoLayerItemToolbar\"];\nfunction LayerListComponent_igo_layer_list_tool_2_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-layer-list-tool\", 5);\n    ɵngcc0.ɵɵlistener(\"appliedFilterAndSort\", function LayerListComponent_igo_layer_list_tool_2_Template_igo_layer_list_tool_appliedFilterAndSort_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.onAppliedFilterAndSortChange($event); })(\"selection\", function LayerListComponent_igo_layer_list_tool_2_Template_igo_layer_list_tool_selection_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.toggleSelectionMode($event); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"layersAreAllVisible\", ctx_r1.layersAreAllVisible)(\"term\", ctx_r1.layerFilterAndSortOptions.keyword)(\"onlyVisible\", ctx_r1.layerFilterAndSortOptions.onlyVisible)(\"sortAlpha\", ctx_r1.layerFilterAndSortOptions.sortAlpha);\n} }\nfunction LayerListComponent_ng_template_4_igo_layer_item_0_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-layer-item\", 7);\n    ɵngcc0.ɵɵlistener(\"action\", function LayerListComponent_ng_template_4_igo_layer_item_0_Template_igo_layer_item_action_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(2); return ctx_r11.toggleLayerTool($event); })(\"checkbox\", function LayerListComponent_ng_template_4_igo_layer_item_0_Template_igo_layer_item_checkbox_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r13 = ɵngcc0.ɵɵnextContext(2); return ctx_r13.layersCheck($event); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const layer_r8 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r8)(\"activeLayer\", ctx_r10.activeLayer)(\"orderable\", ctx_r10.orderable && !layer_r8.baseLayer)(\"lowerDisabled\", ctx_r10.getLowerLayer().id === layer_r8.id)(\"raiseDisabled\", ctx_r10.getUpperLayer().id === layer_r8.id)(\"queryBadge\", ctx_r10.queryBadge)(\"expandLegendIfVisible\", ctx_r10.expandLegendOfVisibleLayers)(\"updateLegendOnResolutionChange\", ctx_r10.updateLegendOnResolutionChange)(\"toggleLegendOnVisibilityChange\", ctx_r10.toggleLegendOnVisibilityChange)(\"selectionMode\", ctx_r10.selection)(\"selectAll\", ctx_r10.selectAllCheck)(\"layerCheck\", layer_r8.options.check)(\"changeDetection\", ctx_r10.layerItemChangeDetection$);\n} }\nfunction LayerListComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, LayerListComponent_ng_template_4_igo_layer_item_0_Template, 1, 13, \"igo-layer-item\", 6);\n} if (rf & 2) {\n    const layer_r8 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", !(ctx_r2.excludeBaseLayers && layer_r8.baseLayer));\n} }\nconst _c8 = function (a0) { return { layer: a0 }; };\nfunction LayerListComponent_igo_panel_6_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-panel\", 8);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 9);\n    ɵngcc0.ɵɵelementContainer(2, 10);\n    ɵngcc0.ɵɵprojection(3);\n    ɵngcc0.ɵɵelementStart(4, \"button\", 11);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelement(6, \"mat-icon\", 12);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"mat-menu\", 13, 14);\n    ɵngcc0.ɵɵelementStart(9, \"div\", 15);\n    ɵngcc0.ɵɵelementStart(10, \"mat-slider\", 16);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function LayerListComponent_igo_panel_6_Template_mat_slider_ngModelChange_10_listener($event) { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16.opacity = $event; })(\"click\", function LayerListComponent_igo_panel_6_Template_mat_slider_click_10_listener($event) { ɵngcc0.ɵɵrestoreView(_r17); return $event.stopPropagation(); });\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"button\", 17);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerListComponent_igo_panel_6_Template_button_click_12_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19.activeLayer.map.raiseLayer(ctx_r19.activeLayer); });\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵpipe(14, \"translate\");\n    ɵngcc0.ɵɵelement(15, \"mat-icon\", 18);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"button\", 19);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerListComponent_igo_panel_6_Template_button_click_16_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r20 = ɵngcc0.ɵɵnextContext(); return ctx_r20.activeLayer.map.lowerLayer(ctx_r20.activeLayer); });\n    ɵngcc0.ɵɵpipe(17, \"translate\");\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelement(19, \"mat-icon\", 20);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(20, \"button\", 21);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerListComponent_igo_panel_6_Template_button_click_20_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r21 = ɵngcc0.ɵɵnextContext(); return ctx_r21.removeLayers(); });\n    ɵngcc0.ɵɵpipe(21, \"translate\");\n    ɵngcc0.ɵɵelement(22, \"mat-icon\", 22);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r15 = ɵngcc0.ɵɵreference(8);\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"title\", ctx_r3.activeLayer.title);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r3.templateLayerToolbar)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(33, _c8, ctx_r3.activeLayer));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"matMenuTriggerFor\", _r15)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(5, 19, \"igo.geo.layer.opacity\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"matBadge\", ctx_r3.badgeOpacity);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"min\", 0)(\"max\", 100)(\"ngModel\", ctx_r3.opacity)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(11, 21, \"igo.geo.layer.opacity\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r3.sortAlpha || ctx_r3.onlyVisible || ctx_r3.keyword ? ɵngcc0.ɵɵpipeBind1(13, 23, \"igo.geo.layer.filterRaiseLayer\") : ɵngcc0.ɵɵpipeBind1(14, 25, \"igo.geo.layer.raiseLayer\"))(\"disabled\", ctx_r3.raiseDisabled);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"matBadge\", ctx_r3.sortAlpha || ctx_r3.onlyVisible || ctx_r3.keyword ? \"!\" : \"\")(\"matBadgeHidden\", ctx_r3.raiseDisabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r3.sortAlpha || ctx_r3.onlyVisible || ctx_r3.keyword ? ɵngcc0.ɵɵpipeBind1(17, 27, \"igo.geo.layer.filterLowerLayer\") : ɵngcc0.ɵɵpipeBind1(18, 29, \"igo.geo.layer.lowerLayer\"))(\"disabled\", ctx_r3.lowerDisabled);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"matBadge\", ctx_r3.sortAlpha || ctx_r3.onlyVisible || ctx_r3.keyword ? \"!\" : \"\")(\"matBadgeHidden\", ctx_r3.lowerDisabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(21, 31, \"igo.geo.layer.removeLayer\"));\n} }\nfunction LayerListComponent_igo_panel_7_mat_slider_15_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-slider\", 16);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function LayerListComponent_igo_panel_7_mat_slider_15_Template_mat_slider_ngModelChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r25); const ctx_r24 = ɵngcc0.ɵɵnextContext(2); return ctx_r24.checkOpacity = $event; })(\"click\", function LayerListComponent_igo_panel_7_mat_slider_15_Template_mat_slider_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r25); return $event.stopPropagation(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r23 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"min\", 0)(\"max\", 100)(\"ngModel\", ctx_r23.checkOpacity)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 4, \"igo.geo.layer.opacity\"));\n} }\nfunction LayerListComponent_igo_panel_7_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-panel\", 8);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelementStart(2, \"div\", 9);\n    ɵngcc0.ɵɵelementStart(3, \"button\", 23);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerListComponent_igo_panel_7_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r28); const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.selectAll(); });\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵpipe(8, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"button\", 24);\n    ɵngcc0.ɵɵpipe(10, \"translate\");\n    ɵngcc0.ɵɵelement(11, \"mat-icon\", 25);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"mat-menu\", 13, 14);\n    ɵngcc0.ɵɵelementStart(14, \"div\", 15);\n    ɵngcc0.ɵɵtemplate(15, LayerListComponent_igo_panel_7_mat_slider_15_Template, 2, 6, \"mat-slider\", 26);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"button\", 17);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerListComponent_igo_panel_7_Template_button_click_16_listener() { ɵngcc0.ɵɵrestoreView(_r28); const ctx_r29 = ɵngcc0.ɵɵnextContext(); return ctx_r29.raiseLayers(ctx_r29.layersChecked); });\n    ɵngcc0.ɵɵpipe(17, \"translate\");\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelement(19, \"mat-icon\", 18);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(20, \"button\", 19);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerListComponent_igo_panel_7_Template_button_click_20_listener() { ɵngcc0.ɵɵrestoreView(_r28); const ctx_r30 = ɵngcc0.ɵɵnextContext(); return ctx_r30.lowerLayers(ctx_r30.layersChecked); });\n    ɵngcc0.ɵɵpipe(21, \"translate\");\n    ɵngcc0.ɵɵpipe(22, \"translate\");\n    ɵngcc0.ɵɵelement(23, \"mat-icon\", 20);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(24, \"button\", 27);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerListComponent_igo_panel_7_Template_button_click_24_listener() { ɵngcc0.ɵɵrestoreView(_r28); const ctx_r31 = ɵngcc0.ɵɵnextContext(); return ctx_r31.toggleVisibility(ctx_r31.layersChecked); });\n    ɵngcc0.ɵɵpipe(25, \"translate\");\n    ɵngcc0.ɵɵpipe(26, \"translate\");\n    ɵngcc0.ɵɵelement(27, \"mat-icon\", 28);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(28, \"button\", 29);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerListComponent_igo_panel_7_Template_button_click_28_listener() { ɵngcc0.ɵɵrestoreView(_r28); const ctx_r32 = ɵngcc0.ɵɵnextContext(); return ctx_r32.removeLayers(ctx_r32.layersChecked); });\n    ɵngcc0.ɵɵpipe(29, \"translate\");\n    ɵngcc0.ɵɵelement(30, \"mat-icon\", 22);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r22 = ɵngcc0.ɵɵreference(13);\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(1, 21, \"igo.geo.layer.tools\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r4.layers.length === 0)(\"matTooltip\", ctx_r4.selectAllCheck ? ɵngcc0.ɵɵpipeBind1(4, 23, \"igo.geo.layer.deselectAll\") : ɵngcc0.ɵɵpipeBind1(5, 25, \"igo.geo.layer.selectAll\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r4.selectAllCheck ? ɵngcc0.ɵɵpipeBind1(7, 27, \"igo.geo.layer.deselectAll\") : ɵngcc0.ɵɵpipeBind1(8, 29, \"igo.geo.layer.selectAll\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r4.layersChecked.length === 0)(\"matMenuTriggerFor\", _r22)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(10, 31, \"igo.geo.layer.opacity\"));\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.layersChecked.length);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r4.sortAlpha || ctx_r4.onlyVisible || ctx_r4.keyword ? ɵngcc0.ɵɵpipeBind1(17, 33, \"igo.geo.layer.filterRaiseLayer\") : ɵngcc0.ɵɵpipeBind1(18, 35, \"igo.geo.layer.raiseLayer\"))(\"disabled\", ctx_r4.raiseDisabledSelection);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"matBadge\", ctx_r4.sortAlpha || ctx_r4.onlyVisible || ctx_r4.keyword ? \"!\" : \"\")(\"matBadgeHidden\", ctx_r4.raiseDisabledSelection);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r4.sortAlpha || ctx_r4.onlyVisible || ctx_r4.keyword ? ɵngcc0.ɵɵpipeBind1(21, 37, \"igo.geo.layer.filterLowerLayer\") : ɵngcc0.ɵɵpipeBind1(22, 39, \"igo.geo.layer.lowerLayer\"))(\"disabled\", ctx_r4.lowerDisabledSelection);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"matBadge\", ctx_r4.sortAlpha || ctx_r4.onlyVisible || ctx_r4.keyword ? \"!\" : \"\")(\"matBadgeHidden\", ctx_r4.lowerDisabledSelection);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r4.layersChecked.length === 0)(\"matTooltip\", ctx_r4.statusSelectedLayersCheck === \"ALL_HIDDEN\" ? ɵngcc0.ɵɵpipeBind1(25, 41, \"igo.geo.layer.showSelectedLayers\") : ɵngcc0.ɵɵpipeBind1(26, 43, \"igo.geo.layer.hideSelectedLayers\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"svgIcon\", ctx_r4.statusSelectedLayersCheck === \"ALL_HIDDEN\" ? \"eye-off\" : \"eye\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r4.layersChecked.length === 0)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(29, 45, \"igo.geo.layer.removeLayer\"));\n} }\nconst _c9 = [[[\"\", \"igoLayerItemToolbar\", \"\"]]];\nconst _c10 = [\"[igoLayerItemToolbar]\"];\nfunction LayerListToolComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function LayerListToolComponent_button_5_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.clearTerm(); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction LayerLegendListComponent_mat_slide_toggle_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-slide-toggle\", 5);\n    ɵngcc0.ɵɵlistener(\"change\", function LayerLegendListComponent_mat_slide_toggle_0_Template_mat_slide_toggle_change_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.toggleShowAllLegends($event.checked); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 4, \"igo.geo.layer.legend.showAll\"))(\"checked\", ctx_r0.showAllLegendsValue)(\"labelPosition\", \"before\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 6, \"igo.geo.layer.legend.showAll\"), \"\\n\");\n} }\nfunction LayerLegendListComponent_mat_divider_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"mat-divider\");\n} }\nfunction LayerLegendListComponent_ng_template_5_igo_layer_legend_item_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-layer-legend-item\", 7);\n} if (rf & 2) {\n    const layer_r9 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r11 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r9)(\"updateLegendOnResolutionChange\", ctx_r11.updateLegendOnResolutionChange);\n} }\nfunction LayerLegendListComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, LayerLegendListComponent_ng_template_5_igo_layer_legend_item_0_Template, 1, 2, \"igo-layer-legend-item\", 6);\n} if (rf & 2) {\n    const layer_r9 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", !(ctx_r2.excludeBaseLayers && layer_r9.baseLayer));\n} }\nfunction LayerLegendListComponent_p_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLayersVisibleWithShowAllButton\"), \" \");\n} }\nfunction LayerLegendListComponent_p_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLayersVisibleWithShowAllButtonButZoom\"), \" \");\n} }\nfunction LayerLegendListComponent_p_15_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLayersVisible\"), \" \");\n} }\nfunction LayerLegendListComponent_p_19_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.layer.legend.noLayersVisibleButZoom\"), \" \");\n} }\nfunction TrackFeatureButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 1);\n    ɵngcc0.ɵɵlistener(\"click\", function TrackFeatureButtonComponent_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.toggleTrackFeature(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.geo.layer.trackFeature\"))(\"color\", ctx_r0.color);\n} }\nfunction CatalogLibaryComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-catalog-library-item\", 2);\n    ɵngcc0.ɵɵlistener(\"select\", function CatalogLibaryComponent_ng_template_1_Template_igo_catalog_library_item_select_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const catalog_r1 = ctx.$implicit; const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.onCatalogSelect(catalog_r1); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const catalog_r1 = ctx.$implicit;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"map\", ctx_r0.map)(\"catalog\", catalog_r1);\n} }\nfunction DownloadButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 1);\n    ɵngcc0.ɵɵlistener(\"click\", function DownloadButtonComponent_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.openDownload(ctx_r1.layer); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.geo.download.action\"))(\"color\", ctx_r0.color);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\");\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 7);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ctx_r4.icon);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\");\n    ɵngcc0.ɵɵelementStart(1, \"a\", 8);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const property_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"href\", property_r3.value, ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" \", ɵngcc0.ɵɵpipeBind1(3, 3, \"igo.geo.targetHtmlUrl\"), \" \", ctx_r5.title, \"\");\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\", 9);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const property_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", property_r3.key, \" \");\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"td\", 10);\n} if (rf & 2) {\n    const property_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"innerHTML\", property_r3.value, ɵngcc0.ɵɵsanitizeHtml);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_5_img_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 13);\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵpipe(2, \"secureImage\");\n} if (rf & 2) {\n    const property_r3 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵpropertyInterpolate(\"src\", ɵngcc0.ɵɵpipeBind1(1, 1, ɵngcc0.ɵɵpipeBind1(2, 3, property_r3.value)), ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_5_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.targetHtmlUrl\"), \" \");\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"td\");\n    ɵngcc0.ɵɵelementStart(1, \"a\", 8);\n    ɵngcc0.ɵɵtemplate(2, FeatureDetailsComponent_table_0_tr_2_td_5_img_2_Template, 3, 5, \"img\", 11);\n    ɵngcc0.ɵɵtemplate(3, FeatureDetailsComponent_table_0_tr_2_td_5_ng_template_3_Template, 3, 3, \"ng-template\", null, 12, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r14 = ɵngcc0.ɵɵreference(4);\n    const property_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"href\", property_r3.value, ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.isImg(property_r3.value))(\"ngIfElse\", _r14);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_td_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"td\", 10);\n    ɵngcc0.ɵɵpipe(1, \"json\");\n} if (rf & 2) {\n    const property_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"innerHTML\", ɵngcc0.ɵɵpipeBind1(1, 1, property_r3.value), ɵngcc0.ɵɵsanitizeHtml);\n} }\nfunction FeatureDetailsComponent_table_0_tr_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"tr\");\n    ɵngcc0.ɵɵtemplate(1, FeatureDetailsComponent_table_0_tr_2_td_1_Template, 2, 1, \"td\", 4);\n    ɵngcc0.ɵɵtemplate(2, FeatureDetailsComponent_table_0_tr_2_td_2_Template, 4, 5, \"td\", 4);\n    ɵngcc0.ɵɵtemplate(3, FeatureDetailsComponent_table_0_tr_2_td_3_Template, 2, 1, \"td\", 5);\n    ɵngcc0.ɵɵtemplate(4, FeatureDetailsComponent_table_0_tr_2_td_4_Template, 1, 1, \"td\", 6);\n    ɵngcc0.ɵɵtemplate(5, FeatureDetailsComponent_table_0_tr_2_td_5_Template, 5, 3, \"td\", 4);\n    ɵngcc0.ɵɵtemplate(6, FeatureDetailsComponent_table_0_tr_2_td_6_Template, 2, 3, \"td\", 6);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const property_r3 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === \"_blank\" && property_r3.key === \"url\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === \"_blank\" && property_r3.key === \"url\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === undefined);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === undefined && !ctx_r2.isObject(property_r3.value) && !ctx_r2.isUrl(property_r3.value));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === undefined && !ctx_r2.isObject(property_r3.value) && ctx_r2.isUrl(property_r3.value));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.feature.properties.target === undefined && ctx_r2.isObject(property_r3.value));\n} }\nfunction FeatureDetailsComponent_table_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"table\", 2);\n    ɵngcc0.ɵɵelementStart(1, \"tbody\");\n    ɵngcc0.ɵɵtemplate(2, FeatureDetailsComponent_table_0_tr_2_Template, 7, 6, \"tr\", 3);\n    ɵngcc0.ɵɵpipe(3, \"keyvalue\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(3, 1, ctx_r0.filterFeatureProperties(ctx_r0.feature)));\n} }\nfunction FeatureDetailsComponent_iframe_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"iframe\", 14);\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r1.htmlSanitizer(ctx_r1.feature.properties.url), ɵngcc0.ɵɵsanitizeResourceUrl);\n} }\nconst _c11 = [\"igoForm\"];\nconst _c12 = [\"*\", [[\"\", \"formButtons\", \"\"]]];\nconst _c13 = [\"*\", \"[formButtons]\"];\nfunction GeometryFormFieldComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"mat-button-toggle-group\", 4);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GeometryFormFieldComponent_div_3_Template_mat_button_toggle_group_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.geometryType = $event; });\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementStart(3, \"mat-button-toggle\", 5);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"mat-button-toggle\", 6);\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵpipe(8, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"mat-button-toggle\", 7);\n    ɵngcc0.ɵɵtext(10);\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"disabled\", ɵngcc0.ɵɵpipeBind1(2, 8, ctx_r0.value$) !== undefined)(\"ngModel\", ctx_r0.geometryType);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.geometryTypes.indexOf(\"Point\") < 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 10, \"igo.geo.geometry.point\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.geometryTypes.indexOf(\"LineString\") < 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(8, 12, \"igo.geo.geometry.line\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r0.geometryTypes.indexOf(\"Polygon\") < 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(11, 14, \"igo.geo.geometry.polygon\"), \" \");\n} }\nfunction GeometryFormFieldComponent_mat_form_field_4_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 8);\n    ɵngcc0.ɵɵelementStart(1, \"input\", 9);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function GeometryFormFieldComponent_mat_form_field_4_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.drawGuide = $event; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 10);\n    ɵngcc0.ɵɵelementStart(3, \"span\", 11);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ctx_r1.drawGuidePlaceholder)(\"ngModel\", ctx_r1.drawGuide);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"color\", \"primary\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 4, \"igo.geo.measure.meters\"));\n} }\nconst _c14 = [\"table\"];\nfunction MeasurerComponent_ng_container_19_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"igo-measurer-item\", 12);\n    ɵngcc0.ɵɵlistener(\"measureUnitChange\", function MeasurerComponent_ng_container_19_Template_igo_measurer_item_measureUnitChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.onLengthUnitChange($event); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"igo-measurer-item\", 12);\n    ɵngcc0.ɵɵlistener(\"measureUnitChange\", function MeasurerComponent_ng_container_19_Template_igo_measurer_item_measureUnitChange_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.onAreaUnitChange($event); });\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const measure_r2 = ctx.ngIf;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"measureType\", ctx_r0.measureType.Length)(\"measureUnit\", ctx_r0.measureLengthUnit.Meters)(\"measure\", measure_r2.length)(\"auto\", ctx_r0.measureUnitsAuto)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 10, ctx_r0.activeMeasureType === ctx_r0.measureType.Area ? \"igo.geo.measure.perimeter\" : \"igo.geo.measure.length\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"measureType\", ctx_r0.measureType.Area)(\"measureUnit\", ctx_r0.measureAreaUnit.SquareMeters)(\"measure\", measure_r2.area)(\"auto\", ctx_r0.measureUnitsAuto)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(4, 12, \"igo.geo.measure.area\"));\n} }\nfunction GeometryFormFieldInputComponent_ng_template_0_Template(rf, ctx) { }\nfunction TimeFilterButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 2);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 3);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 3, \"igo.geo.filter.filterBy\"))(\"color\", ctx_r0.color);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"matBadge\", ctx_r0.badge);\n} }\nfunction TimeFilterButtonComponent_div_1_igo_time_filter_item_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-time-filter-item\", 7);\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"header\", false)(\"layer\", ctx_r3.layer);\n} }\nfunction TimeFilterButtonComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4, 5);\n    ɵngcc0.ɵɵtemplate(2, TimeFilterButtonComponent_div_1_igo_time_filter_item_2_Template, 1, 2, \"igo-time-filter-item\", 6);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.timeFilterCollapse && ctx_r1.options.timeFilter);\n} }\nfunction TimeFilterFormComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n    ɵngcc0.ɵɵelement(2, \"mat-datetimepicker-toggle\", 4);\n    ɵngcc0.ɵɵelement(3, \"mat-datetimepicker\", 5, 6);\n    ɵngcc0.ɵɵelementStart(5, \"input\", 7);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_0_div_1_Template_input_ngModelChange_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.date = $event; })(\"dateChange\", function TimeFilterFormComponent_div_0_div_1_Template_input_dateChange_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r9 = ɵngcc0.ɵɵnextContext(2); return ctx_r9.handleDateChange($event); });\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r6 = ɵngcc0.ɵɵreference(4);\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"for\", _r6);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"type\", ctx_r4.type);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(6, 7, \"igo.geo.timeFilter.date\"));\n    ɵngcc0.ɵɵproperty(\"matDatetimepicker\", _r6)(\"ngModel\", ctx_r4.date)(\"min\", ctx_r4.min)(\"max\", ctx_r4.max);\n} }\nfunction TimeFilterFormComponent_div_0_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(2, \"mat-form-field\");\n    ɵngcc0.ɵɵelement(3, \"mat-datetimepicker-toggle\", 4);\n    ɵngcc0.ɵɵelement(4, \"mat-datetimepicker\", 5, 9);\n    ɵngcc0.ɵɵelementStart(6, \"input\", 10);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_0_div_2_Template_input_ngModelChange_6_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.startDate = $event; })(\"input\", function TimeFilterFormComponent_div_0_div_2_Template_input_input_6_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r14 = ɵngcc0.ɵɵnextContext(2); return ctx_r14.startDate; })(\"dateChange\", function TimeFilterFormComponent_div_0_div_2_Template_input_dateChange_6_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r15 = ɵngcc0.ɵɵnextContext(2); return ctx_r15.handleDateChange($event); });\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(9, \"mat-form-field\");\n    ɵngcc0.ɵɵelement(10, \"mat-datetimepicker-toggle\", 4);\n    ɵngcc0.ɵɵelement(11, \"mat-datetimepicker\", 5, 11);\n    ɵngcc0.ɵɵelementStart(13, \"input\", 7);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_0_div_2_Template_input_ngModelChange_13_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r16 = ɵngcc0.ɵɵnextContext(2); return ctx_r16.endDate = $event; })(\"dateChange\", function TimeFilterFormComponent_div_0_div_2_Template_input_dateChange_13_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r17 = ɵngcc0.ɵɵnextContext(2); return ctx_r17.handleDateChange($event); });\n    ɵngcc0.ɵɵpipe(14, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r10 = ɵngcc0.ɵɵreference(5);\n    const _r11 = ɵngcc0.ɵɵreference(12);\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"for\", _r10);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"type\", ctx_r5.type);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(7, 14, \"igo.geo.timeFilter.startDate\"));\n    ɵngcc0.ɵɵproperty(\"matDatetimepicker\", _r10)(\"ngModel\", ctx_r5.startDate)(\"min\", ctx_r5.min)(\"max\", ctx_r5.getRangeMaxDate());\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"for\", _r11);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"type\", ctx_r5.type);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(14, 16, \"igo.geo.timeFilter.endDate\"));\n    ɵngcc0.ɵɵproperty(\"matDatetimepicker\", _r11)(\"ngModel\", ctx_r5.endDate)(\"min\", ctx_r5.getRangeMinDate())(\"max\", ctx_r5.max);\n} }\nfunction TimeFilterFormComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtemplate(1, TimeFilterFormComponent_div_0_div_1_Template, 7, 9, \"div\", 2);\n    ɵngcc0.ɵɵtemplate(2, TimeFilterFormComponent_div_0_div_2_Template, 15, 18, \"div\", 0);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.isRange);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.isRange);\n} }\nfunction TimeFilterFormComponent_div_1_div_1_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 14);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const year_r21 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", year_r21);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(year_r21);\n} }\nfunction TimeFilterFormComponent_div_1_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(2, \"mat-select\", 12);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_1_div_1_Template_mat_select_ngModelChange_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); const ctx_r22 = ɵngcc0.ɵɵnextContext(2); return ctx_r22.year = $event; })(\"selectionChange\", function TimeFilterFormComponent_div_1_div_1_Template_mat_select_selectionChange_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); const ctx_r24 = ɵngcc0.ɵɵnextContext(2); return ctx_r24.handleYearChange($event); });\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵtemplate(4, TimeFilterFormComponent_div_1_div_1_mat_option_4_Template, 2, 2, \"mat-option\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(3, 3, \"igo.geo.timeFilter.date\"));\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r18.year);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r18.listYears);\n} }\nfunction TimeFilterFormComponent_div_1_div_2_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 14);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const startYear_r27 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", startYear_r27);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(startYear_r27);\n} }\nfunction TimeFilterFormComponent_div_1_div_2_mat_option_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 14);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const endYear_r28 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", endYear_r28);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(endYear_r28);\n} }\nfunction TimeFilterFormComponent_div_1_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(2, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(3, \"mat-select\", 12);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_1_div_2_Template_mat_select_ngModelChange_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r30); const ctx_r29 = ɵngcc0.ɵɵnextContext(2); return ctx_r29.startYear = $event; })(\"selectionChange\", function TimeFilterFormComponent_div_1_div_2_Template_mat_select_selectionChange_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r30); const ctx_r31 = ɵngcc0.ɵɵnextContext(2); return ctx_r31.handleYearChange($event); });\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵtemplate(5, TimeFilterFormComponent_div_1_div_2_mat_option_5_Template, 2, 2, \"mat-option\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(7, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(8, \"mat-select\", 12);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function TimeFilterFormComponent_div_1_div_2_Template_mat_select_ngModelChange_8_listener($event) { ɵngcc0.ɵɵrestoreView(_r30); const ctx_r32 = ɵngcc0.ɵɵnextContext(2); return ctx_r32.endYear = $event; })(\"selectionChange\", function TimeFilterFormComponent_div_1_div_2_Template_mat_select_selectionChange_8_listener($event) { ɵngcc0.ɵɵrestoreView(_r30); const ctx_r33 = ɵngcc0.ɵɵnextContext(2); return ctx_r33.handleYearChange($event); });\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵtemplate(10, TimeFilterFormComponent_div_1_div_2_mat_option_10_Template, 2, 2, \"mat-option\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(4, 6, \"igo.geo.timeFilter.startDate\"));\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r19.startYear);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r19.startListYears);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(9, 8, \"igo.geo.timeFilter.endDate\"));\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r19.endYear);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r19.endListYears);\n} }\nfunction TimeFilterFormComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtemplate(1, TimeFilterFormComponent_div_1_div_1_Template, 5, 5, \"div\", 2);\n    ɵngcc0.ɵɵtemplate(2, TimeFilterFormComponent_div_1_div_2_Template, 11, 10, \"div\", 0);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r1.isRange);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.isRange);\n} }\nfunction TimeFilterFormComponent_div_3_p_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 23);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r34 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r34.year);\n} }\nfunction TimeFilterFormComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    const _r37 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 15);\n    ɵngcc0.ɵɵelementStart(1, \"span\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"mat-slider\", 16);\n    ɵngcc0.ɵɵlistener(\"input\", function TimeFilterFormComponent_div_3_Template_mat_slider_input_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r37); const ctx_r36 = ɵngcc0.ɵɵnextContext(); return ctx_r36.handleSliderYearChange($event); })(\"change\", function TimeFilterFormComponent_div_3_Template_mat_slider_change_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r37); const ctx_r38 = ɵngcc0.ɵɵnextContext(); return ctx_r38.handleSliderYearChange($event); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"span\");\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(6, TimeFilterFormComponent_div_3_p_6_Template, 2, 1, \"p\", 17);\n    ɵngcc0.ɵɵelementStart(7, \"div\", 18, 19);\n    ɵngcc0.ɵɵelementStart(9, \"mat-slide-toggle\", 20);\n    ɵngcc0.ɵɵlistener(\"change\", function TimeFilterFormComponent_div_3_Template_mat_slide_toggle_change_9_listener() { ɵngcc0.ɵɵrestoreView(_r37); const ctx_r39 = ɵngcc0.ɵɵnextContext(); return ctx_r39.toggleFilterState(); });\n    ɵngcc0.ɵɵpipe(10, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"button\", 21);\n    ɵngcc0.ɵɵlistener(\"click\", function TimeFilterFormComponent_div_3_Template_button_click_11_listener($event) { ɵngcc0.ɵɵrestoreView(_r37); const ctx_r40 = ɵngcc0.ɵɵnextContext(); return ctx_r40.playYear($event); });\n    ɵngcc0.ɵɵelement(12, \"mat-icon\", 22);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"button\", 21);\n    ɵngcc0.ɵɵlistener(\"click\", function TimeFilterFormComponent_div_3_Template_button_click_13_listener($event) { ɵngcc0.ɵɵrestoreView(_r37); const ctx_r41 = ɵngcc0.ɵɵnextContext(); return ctx_r41.resetFilter($event); });\n    ɵngcc0.ɵɵelement(14, \"mat-icon\", 22);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r2.startYear);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"step\", ctx_r2.step);\n    ɵngcc0.ɵɵproperty(\"min\", ctx_r2.startYear)(\"max\", ctx_r2.endYear)(\"value\", ctx_r2.handleSliderValue())(\"color\", ctx_r2.color)(\"disabled\", !ctx_r2.options.enabled || !ctx_r2.layer.visible);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r2.endYear);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.options.enabled);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(10, 17, \"igo.geo.filter.toggleFilterState\"))(\"color\", ctx_r2.color)(\"checked\", ctx_r2.options.enabled)(\"disabled\", !ctx_r2.layer.visible);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r2.options.enabled || !ctx_r2.layer.visible);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ctx_r2.playIcon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r2.options.enabled || !ctx_r2.layer.visible);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ctx_r2.resetIcon);\n} }\nfunction TimeFilterFormComponent_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r43 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"mat-slider\", 24);\n    ɵngcc0.ɵɵlistener(\"input\", function TimeFilterFormComponent_div_4_Template_mat_slider_input_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r43); const ctx_r42 = ɵngcc0.ɵɵnextContext(); return ctx_r42.handleSliderDateChange($event); })(\"selectionChange\", function TimeFilterFormComponent_div_4_Template_mat_slider_selectionChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r43); const ctx_r44 = ɵngcc0.ɵɵnextContext(); return ctx_r44.handleSliderDateChange($event); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"p\", 23);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"button\", 25);\n    ɵngcc0.ɵɵlistener(\"click\", function TimeFilterFormComponent_div_4_Template_button_click_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r43); const ctx_r45 = ɵngcc0.ɵɵnextContext(); return ctx_r45.playFilter($event); });\n    ɵngcc0.ɵɵelement(5, \"mat-icon\", 22);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"step\", ctx_r3.step);\n    ɵngcc0.ɵɵproperty(\"min\", ctx_r3.dateToNumber(ctx_r3.min))(\"max\", ctx_r3.dateToNumber(ctx_r3.max))(\"value\", ctx_r3.handleSliderValue());\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r3.handleSliderTooltip());\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ctx_r3.playIcon);\n} }\nfunction TimeFilterItemComponent_mat_list_item_0_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function TimeFilterItemComponent_mat_list_item_0_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(2); return ctx_r5.setVisible(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 11);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.geo.layer.showLayer\"));\n} }\nconst _c15 = function (a0) { return { \"cursor\": a0 }; };\nfunction TimeFilterItemComponent_mat_list_item_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function TimeFilterItemComponent_mat_list_item_0_Template_mat_icon_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.toggleFiltersCollapsed(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"h4\", 8);\n    ɵngcc0.ɵɵlistener(\"click\", function TimeFilterItemComponent_mat_list_item_0_Template_h4_click_2_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.toggleLegendOnClick(); });\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, TimeFilterItemComponent_mat_list_item_0_button_4_Template, 3, 3, \"button\", 9);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    const _r1 = ɵngcc0.ɵɵreference(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"target\", _r1)(\"collapsed\", ctx_r0.filtersCollapsed);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngStyle\", ɵngcc0.ɵɵpureFunction1(5, _c15, ctx_r0.filtersCollapsed ? \"default\" : \"pointer\"));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.layer.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.layer.visible);\n} }\nfunction TimeFilterItemComponent_igo_layer_legend_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-layer-legend\", 12);\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"layer\", ctx_r3.layer);\n} }\nfunction TimeFilterListComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-time-filter-item\", 2);\n} if (rf & 2) {\n    const layer_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"header\", true)(\"layer\", layer_r1);\n} }\nfunction OgcFilterFormComponent_mat_form_field_13_mat_option_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 23);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const field_r12 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", field_r12.alias)(\"id\", field_r12.name)(\"matTooltip\", field_r12.alias);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", field_r12.alias, \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_13_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_13_button_12_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(2); return ctx_r13.clearSelectedField(); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 25);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r11.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_13_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 17);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_13_Template_mat_form_field_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15.inputClearable = \"selectField\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_13_Template_mat_form_field_mouseleave_0_listener() { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.inputClearable = undefined; });\n    ɵngcc0.ɵɵelementStart(1, \"input\", 18);\n    ɵngcc0.ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_13_Template_input_input_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r18 = ɵngcc0.ɵɵnextContext(); return ctx_r18.updateFieldsList($event.target.value); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵpipe(6, \"async\");\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"mat-autocomplete\", 19, 20);\n    ɵngcc0.ɵɵlistener(\"optionSelected\", function OgcFilterFormComponent_mat_form_field_13_Template_mat_autocomplete_optionSelected_8_listener($event) { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19.changeField($event.option.id); });\n    ɵngcc0.ɵɵtemplate(10, OgcFilterFormComponent_mat_form_field_13_mat_option_10_Template, 2, 4, \"mat-option\", 21);\n    ɵngcc0.ɵɵpipe(11, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(12, OgcFilterFormComponent_mat_form_field_13_button_12_Template, 2, 1, \"button\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r9 = ɵngcc0.ɵɵreference(9);\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"floatLabel\", ctx_r0.floatLabel);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 8, \"igo.geo.sourceFields.selectField\"))(\"disabled\", !ctx_r0.currentFilter.active)(\"matAutocomplete\", _r9)(\"value\", ɵngcc0.ɵɵpipeBind1(3, 10, ctx_r0.selectedField$) ? ɵngcc0.ɵɵpipeBind1(4, 12, ctx_r0.selectedField$).alias : \"\")(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(5, 14, ctx_r0.selectedField$) ? ɵngcc0.ɵɵpipeBind1(6, 16, ctx_r0.selectedField$).alias : ɵngcc0.ɵɵpipeBind1(7, 18, \"igo.geo.sourceFields.selectField\"));\n    ɵngcc0.ɵɵadvance(9);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(11, 20, ctx_r0.filteredFields$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.currentFilter.propertyName && ctx_r0.inputClearable === \"selectField\" && ctx_r0.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_option_24_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 3);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const operator_r20 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", operator_r20.key)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 3, \"igo.geo.operators.tooltip.\" + operator_r20.key));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 5, \"igo.geo.operators.\" + operator_r20.key), \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_27_mat_option_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 29);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const igoSpatialSelector_r22 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", igoSpatialSelector_r22.type);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.spatialSelector.\" + igoSpatialSelector_r22.type), \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_27_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 26);\n    ɵngcc0.ɵɵelementStart(1, \"mat-select\", 27);\n    ɵngcc0.ɵɵlistener(\"selectionChange\", function OgcFilterFormComponent_mat_form_field_27_Template_mat_select_selectionChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r24); const ctx_r23 = ɵngcc0.ɵɵnextContext(); return ctx_r23.changeSpatialSelector($event.value); });\n    ɵngcc0.ɵɵtemplate(2, OgcFilterFormComponent_mat_form_field_27_mat_option_2_Template, 3, 4, \"mat-option\", 28);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r2.currentFilter.active)(\"value\", ctx_r2.currentFilter.igoSpatialSelector);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r2.igoSpatialSelectors);\n} }\nfunction OgcFilterFormComponent_mat_form_field_29_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 33);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const value_r28 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", value_r28)(\"matTooltip\", value_r28);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", value_r28, \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_29_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_29_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r30); const ctx_r29 = ɵngcc0.ɵɵnextContext(2); return ctx_r29.clearProperty(); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 25);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r27 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r27.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_29_Template(rf, ctx) { if (rf & 1) {\n    const _r32 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 30);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_29_Template_mat_form_field_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r32); const ctx_r31 = ɵngcc0.ɵɵnextContext(); return ctx_r31.inputClearable = \"selectProperty\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_29_Template_mat_form_field_mouseleave_0_listener() { ɵngcc0.ɵɵrestoreView(_r32); const ctx_r33 = ɵngcc0.ɵɵnextContext(); return ctx_r33.inputClearable = undefined; });\n    ɵngcc0.ɵɵelementStart(1, \"input\", 18);\n    ɵngcc0.ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_29_Template_input_input_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r32); const ctx_r34 = ɵngcc0.ɵɵnextContext(); return ctx_r34.updateValuesList($event.target.value); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"mat-autocomplete\", 19, 31);\n    ɵngcc0.ɵɵlistener(\"optionSelected\", function OgcFilterFormComponent_mat_form_field_29_Template_mat_autocomplete_optionSelected_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r32); const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.changeProperty($event.option.value); });\n    ɵngcc0.ɵɵtemplate(5, OgcFilterFormComponent_mat_form_field_29_mat_option_5_Template, 2, 3, \"mat-option\", 32);\n    ɵngcc0.ɵɵpipe(6, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(7, OgcFilterFormComponent_mat_form_field_29_button_7_Template, 2, 1, \"button\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r25 = ɵngcc0.ɵɵreference(4);\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"floatLabel\", ctx_r3.floatLabel);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 8, \"igo.geo.filter.placeholder\"))(\"disabled\", !ctx_r3.currentFilter.active)(\"matAutocomplete\", _r25)(\"value\", ctx_r3.detectProperty() === \"expression\" ? ctx_r3.currentFilter.expression : ctx_r3.currentFilter.pattern)(\"matTooltip\", ctx_r3.detectProperty() === \"expression\" ? ctx_r3.currentFilter.expression || \"\" : ctx_r3.currentFilter.pattern || \"\");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(6, 10, ctx_r3.filteredValues$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.isClearable() && ctx_r3.inputClearable === \"selectProperty\" && ctx_r3.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_34_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_34_button_3_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const ctx_r37 = ɵngcc0.ɵɵnextContext(2); return ctx_r37.currentFilter.igoSNRC = \"\"; });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 25);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r36 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r36.currentFilter.active && ctx_r36.inputClearable === \"selectSNRC\" && ctx_r36.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_34_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 34);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_34_Template_mat_form_field_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r39 = ɵngcc0.ɵɵnextContext(); return ctx_r39.inputClearable = \"selectSNRC\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_34_Template_mat_form_field_mouseleave_0_listener() { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r41 = ɵngcc0.ɵɵnextContext(); return ctx_r41.inputClearable = undefined; });\n    ɵngcc0.ɵɵelementStart(1, \"input\", 35);\n    ɵngcc0.ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_34_Template_input_input_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r42 = ɵngcc0.ɵɵnextContext(); return ctx_r42.changeSNRC($event.target.value); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(3, OgcFilterFormComponent_mat_form_field_34_button_3_Template, 2, 1, \"button\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"floatLabel\", ctx_r4.floatLabel);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 5, \"igo.geo.filter.placeholderSnrc\"))(\"value\", ctx_r4.currentFilter.igoSNRC)(\"matTooltip\", ctx_r4.currentFilter.igoSNRC ? ctx_r4.currentFilter.igoSNRC : \"\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.currentFilter.igoSNRC);\n} }\nfunction OgcFilterFormComponent_ng_container_36_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r45 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 37);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterFormComponent_ng_container_36_button_1_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r45); const ctx_r44 = ɵngcc0.ɵɵnextContext(2); return ctx_r44.changeMapExtentGeometry(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 38);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r43 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r43.currentFilter.active)(\"disabled\", !ctx_r43.currentFilter.active)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 3, \"igo.geo.spatialSelector.btnSetExtent\"));\n} }\nfunction OgcFilterFormComponent_ng_container_36_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, OgcFilterFormComponent_ng_container_36_button_1_Template, 3, 5, \"button\", 36);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.currentFilter.igoSpatialSelector === \"fixedExtent\");\n} }\nfunction OgcFilterFormComponent_mat_form_field_39_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 33);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const value_r49 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", value_r49)(\"matTooltip\", value_r49);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", value_r49, \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_39_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r51 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_39_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r51); const ctx_r50 = ɵngcc0.ɵɵnextContext(2); return ctx_r50.clearProperty(1); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 25);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r48 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r48.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_39_Template(rf, ctx) { if (rf & 1) {\n    const _r53 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 39);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_39_Template_mat_form_field_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r53); const ctx_r52 = ɵngcc0.ɵɵnextContext(); return ctx_r52.inputClearable = \"selectProperty1\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_39_Template_mat_form_field_mouseleave_0_listener() { ɵngcc0.ɵɵrestoreView(_r53); const ctx_r54 = ɵngcc0.ɵɵnextContext(); return ctx_r54.inputClearable = undefined; });\n    ɵngcc0.ɵɵelementStart(1, \"input\", 40);\n    ɵngcc0.ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_39_Template_input_input_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r53); const ctx_r55 = ɵngcc0.ɵɵnextContext(); return ctx_r55.updateValuesList($event.target.value, 1); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"mat-autocomplete\", 19, 41);\n    ɵngcc0.ɵɵlistener(\"optionSelected\", function OgcFilterFormComponent_mat_form_field_39_Template_mat_autocomplete_optionSelected_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r53); const ctx_r56 = ɵngcc0.ɵɵnextContext(); return ctx_r56.changeNumericProperty($event.option.value, 1); });\n    ɵngcc0.ɵɵtemplate(5, OgcFilterFormComponent_mat_form_field_39_mat_option_5_Template, 2, 3, \"mat-option\", 32);\n    ɵngcc0.ɵɵpipe(6, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(7, OgcFilterFormComponent_mat_form_field_39_button_7_Template, 2, 1, \"button\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r46 = ɵngcc0.ɵɵreference(4);\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"floatLabel\", ctx_r6.floatLabel);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 7, \"igo.geo.filter.placeholder\"))(\"disabled\", !ctx_r6.currentFilter.active)(\"matAutocomplete\", _r46)(\"value\", ctx_r6.detectProperty(1) === \"lowerBoundary\" ? ctx_r6.currentFilter.lowerBoundary : ctx_r6.currentFilter.begin);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(6, 9, ctx_r6.filteredValues$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r6.isClearable(1) && ctx_r6.inputClearable === \"selectProperty1\" && ctx_r6.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_40_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 33);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const value_r60 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", value_r60)(\"matTooltip\", value_r60);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", value_r60, \" \");\n} }\nfunction OgcFilterFormComponent_mat_form_field_40_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r62 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterFormComponent_mat_form_field_40_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r62); const ctx_r61 = ɵngcc0.ɵɵnextContext(2); return ctx_r61.clearProperty(2); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 25);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r59 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r59.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_mat_form_field_40_Template(rf, ctx) { if (rf & 1) {\n    const _r64 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 39);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function OgcFilterFormComponent_mat_form_field_40_Template_mat_form_field_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r64); const ctx_r63 = ɵngcc0.ɵɵnextContext(); return ctx_r63.inputClearable = \"selectProperty2\"; })(\"mouseleave\", function OgcFilterFormComponent_mat_form_field_40_Template_mat_form_field_mouseleave_0_listener() { ɵngcc0.ɵɵrestoreView(_r64); const ctx_r65 = ɵngcc0.ɵɵnextContext(); return ctx_r65.inputClearable = undefined; });\n    ɵngcc0.ɵɵelementStart(1, \"input\", 40);\n    ɵngcc0.ɵɵlistener(\"input\", function OgcFilterFormComponent_mat_form_field_40_Template_input_input_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r64); const ctx_r66 = ɵngcc0.ɵɵnextContext(); return ctx_r66.updateValuesList($event.target.value, 2); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"mat-autocomplete\", 19, 42);\n    ɵngcc0.ɵɵlistener(\"optionSelected\", function OgcFilterFormComponent_mat_form_field_40_Template_mat_autocomplete_optionSelected_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r64); const ctx_r67 = ɵngcc0.ɵɵnextContext(); return ctx_r67.changeNumericProperty($event.option.value, 2); });\n    ɵngcc0.ɵɵtemplate(5, OgcFilterFormComponent_mat_form_field_40_mat_option_5_Template, 2, 3, \"mat-option\", 32);\n    ɵngcc0.ɵɵpipe(6, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(7, OgcFilterFormComponent_mat_form_field_40_button_7_Template, 2, 1, \"button\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r57 = ɵngcc0.ɵɵreference(4);\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"floatLabel\", ctx_r7.floatLabel);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 7, \"igo.geo.filter.placeholder\"))(\"disabled\", !ctx_r7.currentFilter.active)(\"matAutocomplete\", _r57)(\"value\", ctx_r7.detectProperty(2) === \"upperBoundary\" ? ctx_r7.currentFilter.upperBoundary : ctx_r7.currentFilter.end);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(6, 9, ctx_r7.filteredValues$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r7.isClearable(2) && ctx_r7.inputClearable === \"selectProperty2\" && ctx_r7.currentFilter.active);\n} }\nfunction OgcFilterFormComponent_igo_ogc_filter_time_41_Template(rf, ctx) { if (rf & 1) {\n    const _r69 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-ogc-filter-time\", 43);\n    ɵngcc0.ɵɵlistener(\"datasourceChange\", function OgcFilterFormComponent_igo_ogc_filter_time_41_Template_igo_ogc_filter_time_datasourceChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r69); const ctx_r68 = ɵngcc0.ɵɵnextContext(); return ctx_r68.datasource = $event; })(\"currentFilterChange\", function OgcFilterFormComponent_igo_ogc_filter_time_41_Template_igo_ogc_filter_time_currentFilterChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r69); const ctx_r70 = ɵngcc0.ɵɵnextContext(); return ctx_r70.currentFilter = $event; })(\"changeProperty\", function OgcFilterFormComponent_igo_ogc_filter_time_41_Template_igo_ogc_filter_time_changeProperty_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r69); const ctx_r71 = ɵngcc0.ɵɵnextContext(); return ctx_r71.changeProperty($event.value, $event.pos); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"datasource\", ctx_r8.datasource)(\"currentFilter\", ctx_r8.currentFilter);\n} }\nconst _c16 = function (a0, a1) { return { \"logical\": a0, \"logicalHidden\": a1 }; };\nconst _c17 = function (a0, a1) { return { \"operator\": a0, \"dualInput\": a1 }; };\nconst _c18 = function () { return [\"expression\", \"pattern\"]; };\nconst _c19 = function () { return [\"lowerBoundary\", \"begin\"]; };\nconst _c20 = function () { return [\"upperBoundary\", \"end\"]; };\nfunction OgcFilterableFormComponent_igo_ogc_filter_toggle_button_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-ogc-filter-toggle-button\", 2);\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"refreshFilters\", ctx_r0.refreshFunc)(\"datasource\", ctx_r0.datasource)(\"map\", ctx_r0.map);\n} }\nfunction OgcFilterableFormComponent_1_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-ogc-filter-form\", 4);\n} if (rf & 2) {\n    const currentFilter_r3 = ctx.$implicit;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"currentFilter\", currentFilter_r3)(\"refreshFilters\", ctx_r2.refreshFunc)(\"datasource\", ctx_r2.datasource)(\"map\", ctx_r2.map);\n} }\nfunction OgcFilterableFormComponent_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, OgcFilterableFormComponent_1_ng_template_0_Template, 1, 4, \"ng-template\", 3);\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.datasource.options.ogcFilters.interfaceOgcFilters);\n} }\nfunction OgcFilterableItemComponent_mat_icon_1_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-icon\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterableItemComponent_mat_icon_1_Template_mat_icon_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.toggleFiltersCollapsed(); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    const _r5 = ɵngcc0.ɵɵreference(7);\n    ɵngcc0.ɵɵproperty(\"target\", _r5)(\"collapsed\", ctx_r0.filtersCollapsed);\n} }\nfunction OgcFilterableItemComponent_h4_2_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"h4\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterableItemComponent_h4_2_Template_h4_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.toggleLegendOnClick(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngStyle\", ɵngcc0.ɵɵpureFunction1(3, _c15, ctx_r1.filtersCollapsed ? \"default\" : \"pointer\"))(\"matTooltip\", ctx_r1.layer.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.layer.title);\n} }\nfunction OgcFilterableItemComponent_span_3_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵelementStart(1, \"button\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterableItemComponent_span_3_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12.openDownload(); });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelement(3, \"mat-icon\", 12);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.download.action\"))(\"color\", ctx_r2.color);\n} }\nfunction OgcFilterableItemComponent_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterableItemComponent_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.addFilterToSequence(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 14);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r3.addFilterDisabled())(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 3, \"igo.geo.filter.addFilter\"))(\"color\", ctx_r3.color);\n} }\nfunction OgcFilterableItemComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function OgcFilterableItemComponent_button_5_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16.setVisible(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 16);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.geo.layer.showLayer\"));\n} }\nfunction OgcFilterableItemComponent_div_8_igo_layer_legend_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-layer-legend\", 20);\n} if (rf & 2) {\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"layer\", ctx_r19.layer);\n} }\nfunction OgcFilterableItemComponent_div_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 17, 18);\n    ɵngcc0.ɵɵtemplate(2, OgcFilterableItemComponent_div_8_igo_layer_legend_2_Template, 1, 1, \"igo-layer-legend\", 19);\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(3, 1, ctx_r6.showLegend$));\n} }\nfunction OgcFilterableItemComponent_section_10_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"section\", 21);\n    ɵngcc0.ɵɵelement(1, \"mat-divider\");\n    ɵngcc0.ɵɵelementStart(2, \"mat-checkbox\", 22);\n    ɵngcc0.ɵɵlistener(\"change\", function OgcFilterableItemComponent_section_10_Template_mat_checkbox_change_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r21); const ctx_r20 = ɵngcc0.ɵɵnextContext(); return ctx_r20.changeOgcFilterType($event); })(\"ngModelChange\", function OgcFilterableItemComponent_section_10_Template_mat_checkbox_ngModelChange_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r21); const ctx_r22 = ɵngcc0.ɵɵnextContext(); return ctx_r22.datasource.options.ogcFilters.advancedOgcFilters = $event; });\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r7.datasource.options.ogcFilters.advancedOgcFilters);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 2, \"igo.geo.filter.advancedOgcFilters\"), \" \");\n} }\nfunction OgcFilterableListComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-ogc-filterable-item\", 2);\n} if (rf & 2) {\n    const layer_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"header\", true)(\"layer\", layer_r1)(\"map\", layer_r1.map);\n} }\nfunction OgcFilterButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 2);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 3);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 3, \"igo.geo.filter.filterBy\"))(\"color\", ctx_r0.color);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"matBadge\", ctx_r0.badge);\n} }\nfunction OgcFilterButtonComponent_div_1_igo_ogc_filterable_item_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-ogc-filterable-item\", 7);\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"header\", false)(\"map\", ctx_r3.layer.map)(\"layer\", ctx_r3.layer);\n} }\nfunction OgcFilterButtonComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4, 5);\n    ɵngcc0.ɵɵtemplate(2, OgcFilterButtonComponent_div_1_igo_ogc_filterable_item_2_Template, 1, 3, \"igo-ogc-filterable-item\", 6);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.ogcFilterCollapse && ctx_r1.options.ogcFilters.enabled);\n} }\nfunction OgcFilterToggleButtonComponent_div_1_mat_option_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 7);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const pbg_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", pbg_r3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(pbg_r3.title);\n} }\nfunction OgcFilterToggleButtonComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(2, \"mat-select\", 5);\n    ɵngcc0.ɵɵlistener(\"valueChange\", function OgcFilterToggleButtonComponent_div_1_Template_mat_select_valueChange_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.currentPushButtonGroup = $event; });\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵtemplate(4, OgcFilterToggleButtonComponent_div_1_mat_option_4_Template, 2, 2, \"mat-option\", 6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(3, 3, \"igo.geo.layer.legend.selectStyle\"))(\"value\", ctx_r0.currentPushButtonGroup);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.getPushButtonsGroups());\n} }\nfunction OgcFilterToggleButtonComponent_ng_container_3_mat_button_toggle_2_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-button-toggle\", 10);\n    ɵngcc0.ɵɵlistener(\"change\", function OgcFilterToggleButtonComponent_ng_container_3_mat_button_toggle_2_Template_mat_button_toggle_change_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ogcPushButton_r8 = ctx.$implicit; const ctx_r9 = ɵngcc0.ɵɵnextContext(2); return ctx_r9.onButtonChange(ogcPushButton_r8); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ogcPushButton_r8 = ctx.$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngStyle\", ctx_r7.getButtonColor(ogcPushButton_r8))(\"checked\", ogcPushButton_r8.enabled)(\"matTooltip\", ctx_r7.getToolTip(ogcPushButton_r8))(\"value\", ogcPushButton_r8);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ogcPushButton_r8.title, \" \");\n} }\nfunction OgcFilterToggleButtonComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"mat-button-toggle-group\", 8);\n    ɵngcc0.ɵɵtemplate(2, OgcFilterToggleButtonComponent_ng_container_3_mat_button_toggle_2_Template, 2, 5, \"mat-button-toggle\", 9);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const bundle_r6 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"vertical\", ctx_r1.bundleIsVertical(bundle_r6));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", bundle_r6.buttons);\n} }\nfunction SpatialFilterTypeComponent_mat_option_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 10);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const queryType_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", queryType_r1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.terrapi.\" + queryType_r1), \" \");\n} }\nfunction SpatialFilterListComponent_mat_option_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 6);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const entities_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", entities_r3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", entities_r3.properties.nom, \" \");\n} }\nfunction SpatialFilterItemComponent_mat_slide_toggle_5_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-slide-toggle\", 14);\n    ɵngcc0.ɵɵlistener(\"change\", function SpatialFilterItemComponent_mat_slide_toggle_5_Template_mat_slide_toggle_change_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.onDrawControlChange(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r0.drawControlIsActive)(\"labelPosition\", \"before\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 3, \"igo.geo.spatialFilter.drawControl\"), \" \");\n} }\nfunction SpatialFilterItemComponent_mat_slide_toggle_6_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-slide-toggle\", 14);\n    ɵngcc0.ɵɵlistener(\"change\", function SpatialFilterItemComponent_mat_slide_toggle_6_Template_mat_slide_toggle_change_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.onfreehandControlChange(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r1.freehandDrawIsActive)(\"labelPosition\", \"before\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 3, \"igo.geo.spatialFilter.freehandControl\"), \" \");\n} }\nfunction SpatialFilterItemComponent_div_7_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 15);\n    ɵngcc0.ɵɵelementStart(1, \"form\", 16);\n    ɵngcc0.ɵɵelementStart(2, \"mat-form-field\", 17);\n    ɵngcc0.ɵɵelementStart(3, \"input\", 18);\n    ɵngcc0.ɵɵlistener(\"input\", function SpatialFilterItemComponent_div_7_Template_input_input_3_listener() { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.getRadius(); });\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"label\", 19);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(4, 5, \"igo.geo.spatialFilter.radius\"));\n    ɵngcc0.ɵɵproperty(\"formControl\", ctx_r2.radiusFormControl)(\"value\", 1000)(\"readonly\", ctx_r2.freehandDrawIsActive && ctx_r2.formControl.value === null);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(7, 7, \"igo.geo.measure.\" + ctx_r2.measureUnit), \" \");\n} }\nfunction SpatialFilterItemComponent_mat_radio_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-radio-button\", 20);\n    ɵngcc0.ɵɵlistener(\"change\", function SpatialFilterItemComponent_mat_radio_button_12_Template_mat_radio_button_change_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.onItemTypeChange($event); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const item_r13 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", item_r13);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.spatialFilter.\" + item_r13), \" \");\n} }\nfunction SpatialFilterItemComponent_div_13_mat_header_cell_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-header-cell\", 31);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.spatialFilter.Thematics\"));\n} }\nfunction SpatialFilterItemComponent_div_13_mat_header_cell_5_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-header-cell\", 32);\n    ɵngcc0.ɵɵelementStart(1, \"mat-checkbox\", 33);\n    ɵngcc0.ɵɵlistener(\"change\", function SpatialFilterItemComponent_div_13_mat_header_cell_5_Template_mat_checkbox_change_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r23); const ctx_r22 = ɵngcc0.ɵɵnextContext(2); return $event ? ctx_r22.masterToggle() : null; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r17 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r17.isAllSelected())(\"indeterminate\", ctx_r17.selectedThematics.hasValue() && !ctx_r17.isAllSelected());\n} }\nfunction SpatialFilterItemComponent_div_13_mat_header_row_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"mat-header-row\");\n} }\nfunction SpatialFilterItemComponent_div_13_mat_row_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"mat-row\");\n} }\nfunction SpatialFilterItemComponent_div_13_mat_tree_node_9_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-tree-node\", 34);\n    ɵngcc0.ɵɵelementStart(1, \"li\", 35);\n    ɵngcc0.ɵɵelement(2, \"button\", 36);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementStart(4, \"mat-checkbox\", 37);\n    ɵngcc0.ɵɵlistener(\"click\", function SpatialFilterItemComponent_div_13_mat_tree_node_9_Template_mat_checkbox_click_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r27); return $event.stopPropagation(); })(\"change\", function SpatialFilterItemComponent_div_13_mat_tree_node_9_Template_mat_checkbox_change_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r27); const node_r25 = ctx.$implicit; const ctx_r28 = ɵngcc0.ɵɵnextContext(2); return $event ? ctx_r28.onToggleChange(node_r25) : null; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const node_r25 = ctx.$implicit;\n    const ctx_r20 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", node_r25.name, \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r20.selectedThematics.isSelected(node_r25));\n} }\nfunction SpatialFilterItemComponent_div_13_mat_nested_tree_node_10_Template(rf, ctx) { if (rf & 1) {\n    const _r31 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-nested-tree-node\");\n    ɵngcc0.ɵɵelementStart(1, \"div\", 35);\n    ɵngcc0.ɵɵelementStart(2, \"button\", 38);\n    ɵngcc0.ɵɵlistener(\"click\", function SpatialFilterItemComponent_div_13_mat_nested_tree_node_10_Template_button_click_2_listener() { ɵngcc0.ɵɵrestoreView(_r31); const node_r29 = ctx.$implicit; const ctx_r30 = ɵngcc0.ɵɵnextContext(2); return ctx_r30.onToggleClick(node_r29); });\n    ɵngcc0.ɵɵelement(3, \"mat-icon\", 39);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementStart(5, \"mat-checkbox\", 40);\n    ɵngcc0.ɵɵlistener(\"change\", function SpatialFilterItemComponent_div_13_mat_nested_tree_node_10_Template_mat_checkbox_change_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r31); const node_r29 = ctx.$implicit; const ctx_r32 = ɵngcc0.ɵɵnextContext(2); return $event ? ctx_r32.childrensToggle(node_r29) : null; });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"ul\", 41);\n    ɵngcc0.ɵɵelementContainer(7, 42);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const node_r29 = ctx.$implicit;\n    const ctx_r21 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"svgIcon\", ctx_r21.treeControl.isExpanded(node_r29) ? \"chevron-down\" : \"chevron-right\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", node_r29.name, \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r21.isAllSelected(node_r29))(\"indeterminate\", ctx_r21.hasChildrenSelected(node_r29) && !ctx_r21.isAllSelected(node_r29));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"example-tree-invisible\", !ctx_r21.treeControl.isExpanded(node_r29));\n} }\nfunction SpatialFilterItemComponent_div_13_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 21);\n    ɵngcc0.ɵɵelementStart(1, \"mat-table\");\n    ɵngcc0.ɵɵelementContainerStart(2, 22);\n    ɵngcc0.ɵɵtemplate(3, SpatialFilterItemComponent_div_13_mat_header_cell_3_Template, 3, 3, \"mat-header-cell\", 23);\n    ɵngcc0.ɵɵelementContainerEnd();\n    ɵngcc0.ɵɵelementContainerStart(4, 24);\n    ɵngcc0.ɵɵtemplate(5, SpatialFilterItemComponent_div_13_mat_header_cell_5_Template, 2, 2, \"mat-header-cell\", 25);\n    ɵngcc0.ɵɵelementContainerEnd();\n    ɵngcc0.ɵɵtemplate(6, SpatialFilterItemComponent_div_13_mat_header_row_6_Template, 1, 0, \"mat-header-row\", 26);\n    ɵngcc0.ɵɵtemplate(7, SpatialFilterItemComponent_div_13_mat_row_7_Template, 1, 0, \"mat-row\", 27);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"mat-tree\", 28);\n    ɵngcc0.ɵɵtemplate(9, SpatialFilterItemComponent_div_13_mat_tree_node_9_Template, 5, 2, \"mat-tree-node\", 29);\n    ɵngcc0.ɵɵtemplate(10, SpatialFilterItemComponent_div_13_mat_nested_tree_node_10_Template, 8, 6, \"mat-nested-tree-node\", 30);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵproperty(\"matHeaderRowDef\", ctx_r4.displayedColumns);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matRowDefColumns\", ctx_r4.displayedColumns);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"dataSource\", ctx_r4.dataSource)(\"treeControl\", ctx_r4.treeControl);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"matTreeNodeDefWhen\", ctx_r4.hasChild);\n} }\nfunction SpatialFilterItemComponent_button_15_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 43);\n    ɵngcc0.ɵɵlistener(\"click\", function SpatialFilterItemComponent_button_15_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r34); const ctx_r33 = ɵngcc0.ɵɵnextContext(); return ctx_r33.clearSearch(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r5.queryType && !ctx_r5.zone);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.spatialFilter.clearSearch\"), \" \");\n} }\nfunction SpatialFilterItemComponent_button_16_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 44);\n    ɵngcc0.ɵɵlistener(\"click\", function SpatialFilterItemComponent_button_16_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r36); const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.formControl.reset(); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r6.formControl.value === null);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.spatialFilter.clearForm\"), \" \");\n} }\nconst _c21 = [\"endDatepickerTime\"];\nconst _c22 = [\"beginDatepickerTime\"];\nconst _c23 = [\"beginTime\"];\nconst _c24 = [\"endTime\"];\nfunction OgcFilterTimeComponent_mat_form_field_11_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 16);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const hour_r6 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", hour_r6);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(hour_r6);\n} }\nfunction OgcFilterTimeComponent_mat_form_field_11_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 13);\n    ɵngcc0.ɵɵelementStart(1, \"mat-label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"mat-select\", 14);\n    ɵngcc0.ɵɵlistener(\"selectionChange\", function OgcFilterTimeComponent_mat_form_field_11_Template_mat_select_selectionChange_4_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(); const _r0 = ɵngcc0.ɵɵreference(5); return ctx_r7.changeTemporalProperty(_r0.value, 1); });\n    ɵngcc0.ɵɵtemplate(5, OgcFilterTimeComponent_mat_form_field_11_mat_option_5_Template, 2, 2, \"mat-option\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 4, \"igo.geo.timeFilter.hour\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"formControl\", ctx_r2.beginHourFormControl);\n    ɵngcc0.ɵɵattribute(\"disabled\", !ctx_r2.currentFilter.active);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r2.beginHours);\n} }\nfunction OgcFilterTimeComponent_mat_form_field_12_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 16);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const minute_r10 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", minute_r10);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(minute_r10);\n} }\nfunction OgcFilterTimeComponent_mat_form_field_12_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 17);\n    ɵngcc0.ɵɵelementStart(1, \"mat-label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"mat-select\", 14);\n    ɵngcc0.ɵɵlistener(\"selectionChange\", function OgcFilterTimeComponent_mat_form_field_12_Template_mat_select_selectionChange_4_listener() { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(); const _r0 = ɵngcc0.ɵɵreference(5); return ctx_r11.changeTemporalProperty(_r0.value, 1); });\n    ɵngcc0.ɵɵtemplate(5, OgcFilterTimeComponent_mat_form_field_12_mat_option_5_Template, 2, 2, \"mat-option\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 4, \"igo.geo.timeFilter.minute\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"formControl\", ctx_r3.beginMinuteFormControl);\n    ɵngcc0.ɵɵattribute(\"disabled\", !ctx_r3.currentFilter.active);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.beginMinutes);\n} }\nfunction OgcFilterTimeComponent_div_13_mat_form_field_10_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 16);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const hour_r18 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", hour_r18);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(hour_r18);\n} }\nfunction OgcFilterTimeComponent_div_13_mat_form_field_10_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 13);\n    ɵngcc0.ɵɵelementStart(1, \"mat-label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"mat-select\", 14);\n    ɵngcc0.ɵɵlistener(\"selectionChange\", function OgcFilterTimeComponent_div_13_mat_form_field_10_Template_mat_select_selectionChange_4_listener() { ɵngcc0.ɵɵrestoreView(_r20); ɵngcc0.ɵɵnextContext(); const _r13 = ɵngcc0.ɵɵreference(4); const ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19.changeTemporalProperty(_r13.value, 2); });\n    ɵngcc0.ɵɵtemplate(5, OgcFilterTimeComponent_div_13_mat_form_field_10_mat_option_5_Template, 2, 2, \"mat-option\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 4, \"igo.geo.timeFilter.hour\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"formControl\", ctx_r15.endHourFormControl);\n    ɵngcc0.ɵɵattribute(\"disabled\", !ctx_r15.currentFilter.active);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r15.endHours);\n} }\nfunction OgcFilterTimeComponent_div_13_mat_form_field_11_mat_option_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 16);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const minute_r22 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", minute_r22);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(minute_r22);\n} }\nfunction OgcFilterTimeComponent_div_13_mat_form_field_11_Template(rf, ctx) { if (rf & 1) {\n    const _r24 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 17);\n    ɵngcc0.ɵɵelementStart(1, \"mat-label\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"mat-select\", 14);\n    ɵngcc0.ɵɵlistener(\"selectionChange\", function OgcFilterTimeComponent_div_13_mat_form_field_11_Template_mat_select_selectionChange_4_listener() { ɵngcc0.ɵɵrestoreView(_r24); ɵngcc0.ɵɵnextContext(); const _r13 = ɵngcc0.ɵɵreference(4); const ctx_r23 = ɵngcc0.ɵɵnextContext(); return ctx_r23.changeTemporalProperty(_r13.value, 2); });\n    ɵngcc0.ɵɵtemplate(5, OgcFilterTimeComponent_div_13_mat_form_field_11_mat_option_5_Template, 2, 2, \"mat-option\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r16 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 4, \"igo.geo.timeFilter.minute\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"formControl\", ctx_r16.endMinuteFormControl);\n    ɵngcc0.ɵɵattribute(\"disabled\", !ctx_r16.currentFilter.active);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r16.endMinutes);\n} }\nfunction OgcFilterTimeComponent_div_13_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\", 2);\n    ɵngcc0.ɵɵelement(2, \"mat-datepicker-toggle\", 3);\n    ɵngcc0.ɵɵelementStart(3, \"input\", 4, 18);\n    ɵngcc0.ɵɵlistener(\"dateChange\", function OgcFilterTimeComponent_div_13_Template_input_dateChange_3_listener() { ɵngcc0.ɵɵrestoreView(_r26); const _r13 = ɵngcc0.ɵɵreference(4); const ctx_r25 = ɵngcc0.ɵɵnextContext(); return ctx_r25.changeTemporalProperty(_r13.value, 2); });\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(6, \"span\", 6);\n    ɵngcc0.ɵɵelementStart(7, \"mat-datepicker\", 7, 19);\n    ɵngcc0.ɵɵlistener(\"yearSelected\", function OgcFilterTimeComponent_div_13_Template_mat_datepicker_yearSelected_7_listener($event) { ɵngcc0.ɵɵrestoreView(_r26); const _r14 = ɵngcc0.ɵɵreference(8); const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.yearSelected($event, _r14, \"end\"); })(\"monthSelected\", function OgcFilterTimeComponent_div_13_Template_mat_datepicker_monthSelected_7_listener($event) { ɵngcc0.ɵɵrestoreView(_r26); const _r14 = ɵngcc0.ɵɵreference(8); const ctx_r28 = ɵngcc0.ɵɵnextContext(); return ctx_r28.monthSelected($event, _r14, \"end\"); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(9, \"div\", 9);\n    ɵngcc0.ɵɵtemplate(10, OgcFilterTimeComponent_div_13_mat_form_field_10_Template, 6, 6, \"mat-form-field\", 10);\n    ɵngcc0.ɵɵtemplate(11, OgcFilterTimeComponent_div_13_mat_form_field_11_Template, 6, 6, \"mat-form-field\", 11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r14 = ɵngcc0.ɵɵreference(8);\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"for\", _r14);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matDatepicker\", _r14)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(5, 12, \"igo.geo.timeFilter.endDate\"))(\"matDatepickerFilter\", ctx_r4.dateFilter.bind(ctx_r4, \"end\"))(\"value\", ctx_r4.endValue ? ctx_r4.endValue : ctx_r4.handleDate(ctx_r4.datasource.options.maxDate))(\"min\", ctx_r4.beginValue ? ctx_r4.beginValue : ctx_r4.handleDate(ctx_r4.datasource.options.minDate))(\"max\", ctx_r4.handleDate(ctx_r4.datasource.options.maxDate));\n    ɵngcc0.ɵɵattribute(\"disabled\", !ctx_r4.currentFilter.active);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"startView\", ctx_r4.calendarView())(\"startAt\", ctx_r4.endValue);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.calendarType() === \"datetime\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.calendarType() === \"datetime\");\n} }\nfunction ExportButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 1);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.geo.download.action\"))(\"color\", ctx_r0.color);\n} }\nfunction ImportExportComponent_form_8_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 6);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(2, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(3, \"input\", 8);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ImportExportComponent_form_8_Template_input_ngModelChange_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.inputProj = $event; });\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"div\", 9);\n    ɵngcc0.ɵɵelementStart(6, \"button\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function ImportExportComponent_form_8_Template_button_click_6_listener() { ɵngcc0.ɵɵrestoreView(_r6); const _r4 = ɵngcc0.ɵɵreference(13); return _r4.click(); });\n    ɵngcc0.ɵɵpipe(7, \"async\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(10, \"igo-spinner\", 11);\n    ɵngcc0.ɵɵpipe(11, \"async\");\n    ɵngcc0.ɵɵelementStart(12, \"input\", 12, 13);\n    ɵngcc0.ɵɵlistener(\"click\", function ImportExportComponent_form_8_Template_input_click_12_listener() { ɵngcc0.ɵɵrestoreView(_r6); const _r4 = ɵngcc0.ɵɵreference(13); return _r4.value = null; })(\"change\", function ImportExportComponent_form_8_Template_input_change_12_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.importFiles($event.target.files); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(4, 7, \"igo.geo.importExportForm.importProjPlaceholder\"));\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r0.inputProj);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", ɵngcc0.ɵɵpipeBind1(7, 9, ctx_r0.loading$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(9, 11, \"igo.geo.importExportForm.importButton\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"shown\", ɵngcc0.ɵɵpipeBind1(11, 13, ctx_r0.loading$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵstyleProp(\"display\", \"none\");\n} }\nconst _c25 = function (a0) { return { size: a0 }; };\nfunction ImportExportComponent_section_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 14);\n    ɵngcc0.ɵɵelementStart(1, \"h4\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"ul\");\n    ɵngcc0.ɵɵelementStart(5, \"li\");\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(8, \"li\");\n    ɵngcc0.ɵɵtext(9);\n    ɵngcc0.ɵɵpipe(10, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"li\");\n    ɵngcc0.ɵɵtext(12);\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 4, \"igo.geo.importExportForm.importClarifications\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(7, 6, \"igo.geo.importExportForm.importSizeMax\", ɵngcc0.ɵɵpureFunction1(13, _c25, ctx_r1.fileSizeMb)));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(10, 9, \"igo.geo.importExportForm.importFormatAuthorized\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(13, 11, \"igo.geo.importExportForm.importShpZip\"));\n} }\nfunction ImportExportComponent_section_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"section\", 14);\n    ɵngcc0.ɵɵelementStart(1, \"h4\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 1, \"igo.geo.importExportForm.exportNoLayersExportable\"));\n} }\nfunction ImportExportComponent_form_12_span_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 24);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate2(\" (+\", ctx_r10.layers.length - 1, \" \", ɵngcc0.ɵɵpipeBind1(2, 2, (ctx_r10.layers == null ? null : ctx_r10.layers.length) === 2 ? \"igo.geo.importExportForm.other\" : \"igo.geo.importExportForm.others\"), \") \");\n} }\nfunction ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-slide-toggle\", 28);\n    ɵngcc0.ɵɵlistener(\"click\", function ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template_mat_slide_toggle_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const layer_r17 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r19 = ɵngcc0.ɵɵnextContext(2); return ctx_r19.onlySelectedClick($event, layer_r17.id); })(\"checked\", function ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template_mat_slide_toggle_checked_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const layer_r17 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r22 = ɵngcc0.ɵɵnextContext(2); return ctx_r22.inLayersIdToExportSelectionOnly(layer_r17); })(\"change\", function ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template_mat_slide_toggle_change_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const layer_r17 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r24 = ɵngcc0.ɵɵnextContext(2); return ctx_r24.onlySelected($event, layer_r17.id); });\n    ɵngcc0.ɵɵelementStart(1, \"small\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"labelPosition\", \"after\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"igo.geo.importExportForm.exportSelectedFeature\"));\n} }\nconst _c26 = function (a0) { return { \"igo-export-layer-mat-option\": a0 }; };\nfunction ImportExportComponent_form_12_mat_option_10_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 25);\n    ɵngcc0.ɵɵlistener(\"click\", function ImportExportComponent_form_12_mat_option_10_Template_mat_option_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r27); return $event.stopPropagation(); });\n    ɵngcc0.ɵɵelementStart(1, \"p\", 26);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"p\", 26);\n    ɵngcc0.ɵɵtemplate(4, ImportExportComponent_form_12_mat_option_10_mat_slide_toggle_4_Template, 4, 4, \"mat-slide-toggle\", 27);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const layer_r17 = ctx.$implicit;\n    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(4, _c26, ctx_r11.layerHasSelectedFeatures(layer_r17)))(\"value\", layer_r17.id);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(layer_r17.title);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r11.layerHasSelectedFeatures(layer_r17));\n} }\nfunction ImportExportComponent_form_12_ng_container_18_mat_option_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const format_r29 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", format_r29.key);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.export.format.\" + format_r29.value), \" \");\n} }\nfunction ImportExportComponent_form_12_ng_container_18_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ImportExportComponent_form_12_ng_container_18_mat_option_1_Template, 3, 4, \"mat-option\", 29);\n    ɵngcc0.ɵɵpipe(2, \"keyvalue\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(2, 1, ɵngcc0.ɵɵpipeBind1(3, 3, ctx_r12.formats$)));\n} }\nfunction ImportExportComponent_form_12_mat_option_20_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 30);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.geo.export.noFormat.title\"), \" \");\n} }\nfunction ImportExportComponent_form_12_div_22_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n    ɵngcc0.ɵɵelement(2, \"input\", 31);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(3, 1, \"igo.geo.importExportForm.exportFileNamePlaceholder\"));\n} }\nfunction ImportExportComponent_form_12_div_23_ng_container_6_mat_option_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const encoding_r32 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", encoding_r32.key);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.export.encoding.\" + encoding_r32.value), \" \");\n} }\nfunction ImportExportComponent_form_12_div_23_ng_container_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, ImportExportComponent_form_12_div_23_ng_container_6_mat_option_1_Template, 3, 4, \"mat-option\", 29);\n    ɵngcc0.ɵɵpipe(2, \"keyvalue\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r30 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(2, 1, ɵngcc0.ɵɵpipeBind1(3, 3, ctx_r30.encodings$)));\n} }\nfunction ImportExportComponent_form_12_div_23_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(2, \"mat-label\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"mat-select\", 32);\n    ɵngcc0.ɵɵtemplate(6, ImportExportComponent_form_12_div_23_ng_container_6_Template, 4, 5, \"ng-container\", 20);\n    ɵngcc0.ɵɵpipe(7, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(4, 2, \"igo.geo.importExportForm.encodingPlaceholder\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(7, 4, ctx_r15.encodings$).length !== 0);\n} }\nfunction ImportExportComponent_form_12_div_24_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 33);\n    ɵngcc0.ɵɵelementStart(1, \"mat-slide-toggle\", 34);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"labelPosition\", \"before\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"igo.geo.importExportForm.exportFeatureInExtent\"), \" \");\n} }\nfunction ImportExportComponent_form_12_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 15);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(2, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(3, \"mat-label\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"mat-select\", 16);\n    ɵngcc0.ɵɵlistener(\"valueChange\", function ImportExportComponent_form_12_Template_mat_select_valueChange_6_listener($event) { ɵngcc0.ɵɵrestoreView(_r34); const ctx_r33 = ɵngcc0.ɵɵnextContext(); return ctx_r33.layers = $event; });\n    ɵngcc0.ɵɵelementStart(7, \"mat-select-trigger\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵtemplate(9, ImportExportComponent_form_12_span_9_Template, 3, 4, \"span\", 17);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(10, ImportExportComponent_form_12_mat_option_10_Template, 5, 6, \"mat-option\", 18);\n    ɵngcc0.ɵɵpipe(11, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(13, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(14, \"mat-label\");\n    ɵngcc0.ɵɵtext(15);\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(17, \"mat-select\", 19);\n    ɵngcc0.ɵɵtemplate(18, ImportExportComponent_form_12_ng_container_18_Template, 4, 5, \"ng-container\", 20);\n    ɵngcc0.ɵɵpipe(19, \"async\");\n    ɵngcc0.ɵɵtemplate(20, ImportExportComponent_form_12_mat_option_20_Template, 3, 3, \"mat-option\", 21);\n    ɵngcc0.ɵɵpipe(21, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(22, ImportExportComponent_form_12_div_22_Template, 4, 3, \"div\", 22);\n    ɵngcc0.ɵɵtemplate(23, ImportExportComponent_form_12_div_23_Template, 8, 6, \"div\", 22);\n    ɵngcc0.ɵɵtemplate(24, ImportExportComponent_form_12_div_24_Template, 4, 4, \"div\", 23);\n    ɵngcc0.ɵɵelementStart(25, \"div\", 9);\n    ɵngcc0.ɵɵelementStart(26, \"button\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function ImportExportComponent_form_12_Template_button_click_26_listener() { ɵngcc0.ɵɵrestoreView(_r34); const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.handleExportFormSubmit(ctx_r35.form.value); });\n    ɵngcc0.ɵɵpipe(27, \"async\");\n    ɵngcc0.ɵɵtext(28);\n    ɵngcc0.ɵɵpipe(29, \"translate\");\n    ɵngcc0.ɵɵpipe(30, \"translate\");\n    ɵngcc0.ɵɵpipe(31, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(32, \"igo-spinner\", 11);\n    ɵngcc0.ɵɵpipe(33, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r3.form);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 15, \"igo.geo.importExportForm.exportLayerPlaceholder\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r3.layers);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r3.layers.length ? ctx_r3.getLayerTitleById(ctx_r3.layers[0]) : \"\", \" \");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.layers.length > 1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(11, 17, ctx_r3.exportableLayers$));\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(16, 19, \"igo.geo.importExportForm.exportFormatPlaceholder\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(19, 21, ctx_r3.formats$).length !== 0);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(21, 23, ctx_r3.formats$).length === 0);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.forceNaming && ctx_r3.form.value.format !== \"URL\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.form.value.format === \"CSVcomma\" || ctx_r3.form.value.format === \"CSVsemicolon\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.form.value.format !== \"URL\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r3.form.valid || ɵngcc0.ɵɵpipeBind1(27, 25, ctx_r3.loading$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r3.form.value.format !== \"URL\" ? ɵngcc0.ɵɵpipeBind1(29, 27, \"igo.geo.importExportForm.exportButton\") : ctx_r3.form.value.layers.length > 1 ? ɵngcc0.ɵɵpipeBind1(30, 29, \"igo.geo.importExportForm.exportButtonLinks\") : ɵngcc0.ɵɵpipeBind1(31, 31, \"igo.geo.importExportForm.exportButtonLink\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"shown\", ɵngcc0.ɵɵpipeBind1(33, 33, ctx_r3.loading$));\n} }\nfunction MeasurerItemComponent_mat_option_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 5);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const measureUnit_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", measureUnit_r1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.measure.\" + measureUnit_r1), \" \");\n} }\nfunction PrintFormComponent_mat_option_27_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 18);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const outputFormat_r5 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", outputFormat_r5.key);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", outputFormat_r5.value, \" \");\n} }\nfunction PrintFormComponent_mat_option_33_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 18);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const paperFormat_r6 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", paperFormat_r6.key);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.printForm.paperFormats.\" + paperFormat_r6.value), \" \");\n} }\nfunction PrintFormComponent_mat_option_39_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 18);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const imageFormat_r7 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", imageFormat_r7.key);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", imageFormat_r7.value, \" \");\n} }\nfunction PrintFormComponent_mat_option_45_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 18);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const resolution_r8 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", resolution_r8.key);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", resolution_r8.value + \" PPI\", \" \");\n} }\nfunction PrintFormComponent_mat_option_51_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 18);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const orientation_r9 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", orientation_r9.key);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.printForm.\" + orientation_r9.value), \" \");\n} }\nfunction DirectionsFormComponent_div_1_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 17);\n    ɵngcc0.ɵɵlistener(\"click\", function DirectionsFormComponent_div_1_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r16); const i_r7 = ɵngcc0.ɵɵnextContext().index; const ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.geolocateStop(i_r7); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 18);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.geolocate\"));\n} }\nfunction DirectionsFormComponent_div_1_button_8_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 19);\n    ɵngcc0.ɵɵlistener(\"click\", function DirectionsFormComponent_div_1_button_8_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); const i_r7 = ɵngcc0.ɵɵnextContext().index; const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.clearStop(i_r7); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 20);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction DirectionsFormComponent_div_1_mat_optgroup_11_mat_option_1_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 23);\n    ɵngcc0.ɵɵlistener(\"onSelectionChange\", function DirectionsFormComponent_div_1_mat_optgroup_11_mat_option_1_Template_mat_option_onSelectionChange_0_listener() { ɵngcc0.ɵɵrestoreView(_r25); const result_r22 = ctx.$implicit; const i_r7 = ɵngcc0.ɵɵnextContext(2).index; const ctx_r23 = ɵngcc0.ɵɵnextContext(); return ctx_r23.chooseProposal(result_r22, i_r7); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const result_r22 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", result_r22.meta ? result_r22.meta.title : \"\")(\"matTooltip\", result_r22.meta ? result_r22.meta.title : \"\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", result_r22.meta ? result_r22.meta.title : \"\", \" \");\n} }\nfunction DirectionsFormComponent_div_1_mat_optgroup_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-optgroup\", 21);\n    ɵngcc0.ɵɵtemplate(1, DirectionsFormComponent_div_1_mat_optgroup_11_mat_option_1_Template, 2, 3, \"mat-option\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const source_r20 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"label\", source_r20.source.title)(\"disabled\", source_r20.source.enabled === false);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", source_r20.results);\n} }\nfunction DirectionsFormComponent_div_1_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function DirectionsFormComponent_div_1_button_12_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r28); const i_r7 = ɵngcc0.ɵɵnextContext().index; const ctx_r26 = ɵngcc0.ɵɵnextContext(); return ctx_r26.removeStop(i_r7); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 25);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.removeStop\"));\n} }\nfunction DirectionsFormComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 8, 9);\n    ɵngcc0.ɵɵelementStart(2, \"mat-list-item\", 10);\n    ɵngcc0.ɵɵelementStart(3, \"div\", 11);\n    ɵngcc0.ɵɵtemplate(4, DirectionsFormComponent_div_1_button_4_Template, 3, 3, \"button\", 12);\n    ɵngcc0.ɵɵelementStart(5, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(6, \"input\", 13);\n    ɵngcc0.ɵɵlistener(\"focus\", function DirectionsFormComponent_div_1_Template_input_focus_6_listener() { ɵngcc0.ɵɵrestoreView(_r30); const i_r7 = ctx.index; const ctx_r29 = ɵngcc0.ɵɵnextContext(); return ctx_r29.focus(i_r7); })(\"keyup\", function DirectionsFormComponent_div_1_Template_input_keyup_6_listener($event) { ɵngcc0.ɵɵrestoreView(_r30); const i_r7 = ctx.index; const ctx_r31 = ɵngcc0.ɵɵnextContext(); return ctx_r31.keyup(i_r7, $event); })(\"keydown.enter\", function DirectionsFormComponent_div_1_Template_input_keydown_enter_6_listener($event) { ɵngcc0.ɵɵrestoreView(_r30); const ctx_r32 = ɵngcc0.ɵɵnextContext(); return ctx_r32.prevent($event); });\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(8, DirectionsFormComponent_div_1_button_8_Template, 2, 0, \"button\", 14);\n    ɵngcc0.ɵɵelementStart(9, \"mat-autocomplete\", null, 15);\n    ɵngcc0.ɵɵtemplate(11, DirectionsFormComponent_div_1_mat_optgroup_11_Template, 2, 3, \"mat-optgroup\", 16);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(12, DirectionsFormComponent_div_1_button_12_Template, 3, 3, \"button\", 6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const stop_r6 = ctx.$implicit;\n    const i_r7 = ctx.index;\n    const _r11 = ɵngcc0.ɵɵreference(10);\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"formGroupName\", i_r7);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.map.geolocationFeature);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(7, 7, \"igo.geo.directionsForm.\" + stop_r6.value.directionsText));\n    ɵngcc0.ɵɵproperty(\"matAutocomplete\", _r11);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", stop_r6.value && (stop_r6.value.stopPoint.length > 0 || stop_r6.value.stopProposals.length > 0));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", stop_r6.value.stopProposals);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", i_r7 !== 0 && i_r7 !== ctx_r0.stops.length - 1);\n} }\nfunction DirectionsFormComponent_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function DirectionsFormComponent_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r34); const ctx_r33 = ɵngcc0.ɵɵnextContext(); return ctx_r33.zoomRoute(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 26);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.zoomRoute\"));\n} }\nfunction DirectionsFormComponent_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r36 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function DirectionsFormComponent_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r36); const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.resetForm(true); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 27);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.resetDirectionsBtn\"));\n} }\nfunction DirectionsFormComponent_button_8_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function DirectionsFormComponent_button_8_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const ctx_r37 = ɵngcc0.ɵɵnextContext(); return ctx_r37.copyDirectionsToClipboard(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 28);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.copy\"));\n} }\nfunction DirectionsFormComponent_button_9_Template(rf, ctx) { if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function DirectionsFormComponent_button_9_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r40); const ctx_r39 = ɵngcc0.ɵɵnextContext(); return ctx_r39.copyLinkToClipboard(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 29);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.geo.directionsForm.link\"));\n} }\nfunction DirectionsFormComponent_div_10_mat_form_field_1_mat_option_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 36);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const pathDirections_r45 = ctx.$implicit;\n    const cnt_r46 = ctx.index;\n    const ctx_r44 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"value\", pathDirections_r45);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate3(\" Option \", cnt_r46 + 1, \" : \", ctx_r44.formatDistance(pathDirections_r45.distance), \" (\", ctx_r44.formatDuration(pathDirections_r45.duration), \") \");\n} }\nfunction DirectionsFormComponent_div_10_mat_form_field_1_Template(rf, ctx) { if (rf & 1) {\n    const _r48 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-select\", 34);\n    ɵngcc0.ɵɵlistener(\"selectionChange\", function DirectionsFormComponent_div_10_mat_form_field_1_Template_mat_select_selectionChange_1_listener() { ɵngcc0.ɵɵrestoreView(_r48); const ctx_r47 = ɵngcc0.ɵɵnextContext(2); return ctx_r47.changeRoute(); })(\"ngModelChange\", function DirectionsFormComponent_div_10_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r48); const ctx_r49 = ɵngcc0.ɵɵnextContext(2); return ctx_r49.activeRoute = $event; });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵtemplate(3, DirectionsFormComponent_div_10_mat_form_field_1_mat_option_3_Template, 2, 4, \"mat-option\", 35);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r41 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 3, \"igo.geo.directionsForm.drivingOptions\"));\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r41.activeRoute);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r41.routesResults);\n} }\nfunction DirectionsFormComponent_div_10_mat_divider_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"mat-divider\");\n} }\nfunction DirectionsFormComponent_div_10_mat_list_item_8_Template(rf, ctx) { if (rf & 1) {\n    const _r53 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\", 37);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function DirectionsFormComponent_div_10_mat_list_item_8_Template_mat_list_item_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r53); const step_r50 = ctx.$implicit; const ctx_r52 = ɵngcc0.ɵɵnextContext(2); return ctx_r52.showSegment(step_r50); })(\"click\", function DirectionsFormComponent_div_10_mat_list_item_8_Template_mat_list_item_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r53); const step_r50 = ctx.$implicit; const ctx_r54 = ɵngcc0.ɵɵnextContext(2); return ctx_r54.showSegment(step_r50, true); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 38);\n    ɵngcc0.ɵɵelementStart(2, \"h4\", 39);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 40);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const step_r50 = ctx.$implicit;\n    const cnt_r51 = ctx.index;\n    const ctx_r43 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ctx_r43.formatStep(step_r50, cnt_r51).image);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r43.formatStep(step_r50, cnt_r51).cssClass);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate2(\"\", cnt_r51 + 1, \". \", ctx_r43.formatStep(step_r50, cnt_r51).instruction, \"\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r43.formatDistance(step_r50.distance));\n} }\nfunction DirectionsFormComponent_div_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 11);\n    ɵngcc0.ɵɵtemplate(1, DirectionsFormComponent_div_10_mat_form_field_1_Template, 4, 5, \"mat-form-field\", 30);\n    ɵngcc0.ɵɵtemplate(2, DirectionsFormComponent_div_10_mat_divider_2_Template, 1, 0, \"mat-divider\", 30);\n    ɵngcc0.ɵɵelementStart(3, \"mat-list\");\n    ɵngcc0.ɵɵelementStart(4, \"h2\", 31);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"h2\", 32);\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(8, DirectionsFormComponent_div_10_mat_list_item_8_Template, 6, 5, \"mat-list-item\", 33);\n    ɵngcc0.ɵɵelement(9, \"mat-divider\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.routesResults && ctx_r5.routesResults.length > 1);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.routesResults && ctx_r5.routesResults.length === 0);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r5.activeRoute.title);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate2(\"\", ctx_r5.formatDistance(ctx_r5.activeRoute.distance), \", \", ctx_r5.formatDuration(ctx_r5.activeRoute.duration), \"\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r5.activeRoute.steps);\n} }\nfunction SearchSelectorComponent_mat_radio_button_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-radio-button\", 7);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const searchType_r2 = ctx.$implicit;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"value\", searchType_r2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 2, ctx_r1.getSearchTypeTitle(searchType_r2)), \" \");\n} }\nfunction SearchSettingsComponent_div_6_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchSettingsComponent_div_6_Template_button_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.checkUncheckAllSources($event); });\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(!ctx_r1.searchSourcesAllEnabled ? ɵngcc0.ɵɵpipeBind1(3, 1, \"igo.geo.search.searchSources.unselectAll\") : ɵngcc0.ɵɵpipeBind1(4, 3, \"igo.geo.search.searchSources.selectAll\"));\n} }\nfunction SearchSettingsComponent_ng_container_7_button_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 15);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const source_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    const _r9 = ɵngcc0.ɵɵreference(6);\n    ɵngcc0.ɵɵproperty(\"matMenuTriggerFor\", _r9);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", source_r6.title, \" \");\n} }\nfunction SearchSettingsComponent_ng_container_7_button_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 16);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const source_r6 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", source_r6.title, \" \");\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-radio-button\", 22);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template_mat_radio_button_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); return $event.stopPropagation(); })(\"change\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template_mat_radio_button_change_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const settingValue_r18 = ctx.$implicit; const setting_r13 = ɵngcc0.ɵɵnextContext(2).$implicit; const source_r6 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r21 = ɵngcc0.ɵɵnextContext(); return ctx_r21.settingsValueCheckedRadioButton($event, source_r6, setting_r13, settingValue_r18); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const settingValue_r18 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", settingValue_r18)(\"checked\", settingValue_r18.enabled);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 3, settingValue_r18.title), \" \");\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-radio-group\", 20);\n    ɵngcc0.ɵɵtemplate(2, SearchSettingsComponent_ng_container_7_ng_container_7_span_6_mat_radio_button_2_Template, 3, 5, \"mat-radio-button\", 21);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const setting_r13 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"value\", setting_r13);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", setting_r13.values);\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_7_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r28 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 8);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 9);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_7_div_1_Template_button_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r28); const setting_r13 = ɵngcc0.ɵɵnextContext(2).$implicit; const source_r6 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.checkUncheckAll($event, source_r6, setting_r13); });\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const setting_r13 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(setting_r13.allEnabled || setting_r13.allEnabled === undefined ? ɵngcc0.ɵɵpipeBind1(3, 1, \"igo.geo.search.searchSources.settings.unselectAll\") : ɵngcc0.ɵɵpipeBind1(4, 3, \"igo.geo.search.searchSources.settings.selectAll\"));\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template(rf, ctx) { if (rf & 1) {\n    const _r34 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-checkbox\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template_mat_checkbox_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r34); return $event.stopPropagation(); })(\"change\", function SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template_mat_checkbox_change_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r34); const settingValue_r32 = ctx.$implicit; const setting_r13 = ɵngcc0.ɵɵnextContext(2).$implicit; const source_r6 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.settingsValueCheckedCheckbox($event, source_r6, setting_r13, settingValue_r32); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const settingValue_r32 = ctx.$implicit;\n    const setting_r13 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r26 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"checked\", settingValue_r32.enabled)(\"value\", setting_r13)(\"matTooltip\", ctx_r26.getAvailableHashtagsValues(settingValue_r32));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 4, settingValue_r32.title), \" \");\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_span_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtemplate(1, SearchSettingsComponent_ng_container_7_ng_container_7_span_7_div_1_Template, 5, 5, \"div\", 5);\n    ɵngcc0.ɵɵtemplate(2, SearchSettingsComponent_ng_container_7_ng_container_7_span_7_mat_checkbox_2_Template, 3, 6, \"mat-checkbox\", 23);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const setting_r13 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r16 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", setting_r13.values.length > 3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r16.getAvailableValues(setting_r13));\n} }\nfunction SearchSettingsComponent_ng_container_7_ng_container_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 15);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"mat-menu\", 17, 18);\n    ɵngcc0.ɵɵtemplate(6, SearchSettingsComponent_ng_container_7_ng_container_7_span_6_Template, 3, 2, \"span\", 19);\n    ɵngcc0.ɵɵtemplate(7, SearchSettingsComponent_ng_container_7_ng_container_7_span_7_Template, 3, 2, \"span\", 19);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const setting_r13 = ctx.$implicit;\n    const _r14 = ɵngcc0.ɵɵreference(5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matMenuTriggerFor\", _r14);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 5, \"igo.geo.search.searchSources.settings.\" + setting_r13.title), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngSwitch\", setting_r13.type);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", \"radiobutton\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", \"checkbox\");\n} }\nfunction SearchSettingsComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {\n    const _r41 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"span\", 10);\n    ɵngcc0.ɵɵelementStart(2, \"mat-checkbox\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchSettingsComponent_ng_container_7_Template_mat_checkbox_click_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r41); return $event.stopPropagation(); })(\"change\", function SearchSettingsComponent_ng_container_7_Template_mat_checkbox_change_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r41); const source_r6 = ctx.$implicit; const ctx_r42 = ɵngcc0.ɵɵnextContext(); return ctx_r42.onCheckSearchSource($event, source_r6); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(3, SearchSettingsComponent_ng_container_7_button_3_Template, 2, 2, \"button\", 12);\n    ɵngcc0.ɵɵtemplate(4, SearchSettingsComponent_ng_container_7_button_4_Template, 2, 1, \"button\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"mat-menu\", null, 14);\n    ɵngcc0.ɵɵtemplate(7, SearchSettingsComponent_ng_container_7_ng_container_7_Template, 8, 7, \"ng-container\", 6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const source_r6 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"checked\", source_r6.enabled)(\"value\", source_r6);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", source_r6.settings.length > 0);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", source_r6.settings.length === 0);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", source_r6.settings);\n} }\nfunction SearchSettingsComponent_span_8_Template(rf, ctx) { if (rf & 1) {\n    const _r44 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵelement(1, \"mat-divider\");\n    ɵngcc0.ɵɵelementStart(2, \"span\", 25);\n    ɵngcc0.ɵɵelementStart(3, \"mat-slide-toggle\", 26);\n    ɵngcc0.ɵɵlistener(\"change\", function SearchSettingsComponent_span_8_Template_mat_slide_toggle_change_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r44); const ctx_r43 = ɵngcc0.ɵɵnextContext(); return ctx_r43.changePointerReverseSearch($event); })(\"click\", function SearchSettingsComponent_span_8_Template_mat_slide_toggle_click_3_listener($event) { ɵngcc0.ɵɵrestoreView(_r44); return $event.stopPropagation(); });\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(4, 4, \"igo.geo.search.pointerSearchSummary.tooltip\"))(\"checked\", ctx_r3.pointerSummaryEnabled)(\"labelPosition\", \"after\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 6, \"igo.geo.search.pointerSearchSummary.title\"), \" \");\n} }\nconst _c27 = [\"input\"];\nfunction SearchBarComponent_mat_label_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-label\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.label);\n} }\nfunction SearchBarComponent_button_11_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 10);\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 11);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r2.color);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ctx_r2.searchIcon);\n} }\nfunction SearchBarComponent_button_12_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchBarComponent_button_12_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r7); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.onClearButtonClick(); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 13);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r3.color);\n} }\nfunction SearchBarComponent_igo_search_selector_14_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-search-selector\", 14);\n    ɵngcc0.ɵɵlistener(\"searchTypeChange\", function SearchBarComponent_igo_search_selector_14_Template_igo_search_selector_searchTypeChange_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(); return ctx_r8.onSearchTypeChange($event); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"searchTypes\", ctx_r4.searchTypes)(\"searchType\", ɵngcc0.ɵɵpipeBind1(1, 2, ctx_r4.searchType$));\n} }\nfunction SearchBarComponent_igo_search_settings_15_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-search-settings\", 15);\n    ɵngcc0.ɵɵlistener(\"pointerSummaryStatus\", function SearchBarComponent_igo_search_settings_15_Template_igo_search_settings_pointerSummaryStatus_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.pointerSummaryStatus.emit($event); })(\"searchSourceChange\", function SearchBarComponent_igo_search_settings_15_Template_igo_search_settings_searchSourceChange_0_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12.onSearchSettingsChange(); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"pointerSummaryEnabled\", ctx_r5.pointerSummaryEnabled);\n} }\nconst _c28 = function (a0) { return { empty: a0 }; };\nconst _c29 = function (a0) { return { \"hasSearchIcon\": a0 }; };\nconst _c30 = [\"igoSearchItemToolbar\"];\nfunction SearchResultsComponent_ng_template_1_igo_collapsible_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nconst _c31 = function (a0) { return { results: a0 }; };\nfunction SearchResultsComponent_ng_template_1_igo_collapsible_0_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-collapsible\", 6);\n    ɵngcc0.ɵɵlistener(\"toggle\", function SearchResultsComponent_ng_template_1_igo_collapsible_0_Template_igo_collapsible_toggle_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r10); const group_r2 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r9 = ɵngcc0.ɵɵnextContext(); return (ctx_r9.collapsed[group_r2.source.title] = $event); });\n    ɵngcc0.ɵɵtemplate(1, SearchResultsComponent_ng_template_1_igo_collapsible_0_ng_container_1_Template, 1, 0, \"ng-container\", 7);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const group_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    const _r6 = ɵngcc0.ɵɵreference(4);\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassMap(group_r2.source.getId());\n    ɵngcc0.ɵɵproperty(\"title\", ctx_r3.computeGroupTitle(group_r2))(\"collapsed\", ctx_r3.collapsed[group_r2.source.title]);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r6)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(6, _c31, group_r2.results));\n} }\nfunction SearchResultsComponent_ng_template_1_ng_template_1_ng_container_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n} }\nfunction SearchResultsComponent_ng_template_1_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, SearchResultsComponent_ng_template_1_ng_template_1_ng_container_0_Template, 1, 0, \"ng-container\", 7);\n} if (rf & 2) {\n    const group_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    const _r6 = ɵngcc0.ɵɵreference(4);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r6)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(2, _c31, group_r2.results));\n} }\nconst _c32 = function (a0) { return { result: a0 }; };\nfunction SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-search-results-item\", 9);\n    ɵngcc0.ɵɵlistener(\"focus\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_focus_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r19 = ɵngcc0.ɵɵnextContext(3); return ctx_r19.resultFocus.emit(result_r18); })(\"unfocus\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_unfocus_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r21 = ɵngcc0.ɵɵnextContext(3); return ctx_r21.resultUnfocus.emit(result_r18); })(\"select\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_select_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r22 = ɵngcc0.ɵɵnextContext(3); return ctx_r22.onResultSelect(result_r18); })(\"mouseenter\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_mouseenter_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r23 = ɵngcc0.ɵɵnextContext(3); return ctx_r23.resultFocus.emit(result_r18); })(\"mouseleave\", function SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template_igo_search_results_item_mouseleave_0_listener() { ɵngcc0.ɵɵrestoreView(_r20); const result_r18 = ctx.$implicit; const ctx_r24 = ɵngcc0.ɵɵnextContext(3); return ctx_r24.resultUnfocus.emit(result_r18); });\n    ɵngcc0.ɵɵelementContainer(1, 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const result_r18 = ctx.$implicit;\n    const ctx_r16 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"map\", ctx_r16.map)(\"result\", result_r18)(\"showIcons\", ctx_r16.showIcons)(\"withZoomButton\", ctx_r16.withZoomButton)(\"focused\", ctx_r16.store.state.get(result_r18).focused)(\"selected\", ctx_r16.store.state.get(result_r18).selected);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r16.templateSearchToolbar)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(8, _c32, result_r18));\n} }\nfunction SearchResultsComponent_ng_template_1_ng_template_3_span_1_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"span\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchResultsComponent_ng_template_1_ng_template_3_span_1_Template_span_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r27); const group_r2 = ɵngcc0.ɵɵnextContext(2).$implicit; const ctx_r25 = ɵngcc0.ɵɵnextContext(); return ctx_r25.displayMoreResults(group_r2); });\n    ɵngcc0.ɵɵelementStart(1, \"u\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 1, \"igo.geo.search.displayMoreResults\"));\n} }\nfunction SearchResultsComponent_ng_template_1_ng_template_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, SearchResultsComponent_ng_template_1_ng_template_3_ng_template_0_Template, 2, 10, \"ng-template\", 1);\n    ɵngcc0.ɵɵtemplate(1, SearchResultsComponent_ng_template_1_ng_template_3_span_1_Template, 4, 3, \"span\", 8);\n} if (rf & 2) {\n    const results_r15 = ctx.results;\n    const group_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngForOf\", results_r15);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r7.isMoreResults(group_r2));\n} }\nfunction SearchResultsComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, SearchResultsComponent_ng_template_1_igo_collapsible_0_Template, 2, 8, \"igo-collapsible\", 3);\n    ɵngcc0.ɵɵtemplate(1, SearchResultsComponent_ng_template_1_ng_template_1_Template, 1, 4, \"ng-template\", null, 4, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵtemplate(3, SearchResultsComponent_ng_template_1_ng_template_3_Template, 2, 2, \"ng-template\", null, 5, ɵngcc0.ɵɵtemplateRefExtractor);\n} if (rf & 2) {\n    const _r4 = ɵngcc0.ɵɵreference(2);\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.mode === ctx_r1.searchResultMode.Grouped)(\"ngIfElse\", _r4);\n} }\nfunction SearchResultsItemComponent_mat_icon_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"mat-icon\", 4);\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ctx_r0.showIcons ? ctx_r0.icon : \"blank\");\n} }\nfunction SearchResultsItemComponent_h4_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"h4\", 5);\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"innerHtml\", ctx_r1.titleHtml, ɵngcc0.ɵɵsanitizeHtml)(\"matTooltip\", ctx_r1.tooltipHtml);\n} }\nfunction SearchResultsItemComponent_h4_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"h4\", 6);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r2.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r2.title);\n} }\nfunction SearchResultsItemComponent_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchResultsItemComponent_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.onZoomHandler(); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 8);\n    ɵngcc0.ɵɵelementEnd();\n} }\nconst _c33 = [[[\"\", \"igoSearchItemToolbar\", \"\"]]];\nconst _c34 = [\"[igoSearchItemToolbar]\"];\nfunction SearchResultAddButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 1);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function SearchResultAddButtonComponent_button_0_Template_button_mouseenter_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.onMouseEvent($event); })(\"mouseleave\", function SearchResultAddButtonComponent_button_0_Template_button_mouseleave_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.onMouseEvent($event); })(\"click\", function SearchResultAddButtonComponent_button_0_Template_button_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.onToggleClick($event); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelement(4, \"mat-icon\", 2);\n    ɵngcc0.ɵɵpipe(5, \"async\");\n    ɵngcc0.ɵɵpipe(6, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 4, ɵngcc0.ɵɵpipeBind1(2, 6, ctx_r0.tooltip$)))(\"color\", ɵngcc0.ɵɵpipeBind1(3, 8, ctx_r0.isPreview$) ? \"\" : ctx_r0.added ? \"warn\" : \"\");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"matBadgeHidden\", ɵngcc0.ɵɵpipeBind1(5, 10, ctx_r0.inRange$))(\"svgIcon\", ɵngcc0.ɵɵpipeBind1(6, 12, ctx_r0.isPreview$) ? \"plus\" : ctx_r0.added ? \"delete\" : \"plus\");\n} }\nfunction ToastComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function ToastComponent_button_5_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.zoomToFeatureExtent(); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 8);\n    ɵngcc0.ɵɵelementEnd();\n} }\nconst _c35 = function () { return [\"collapsed\", \"initial\"]; };\nfunction stringToLonLat(str, mapProjection, opts = {}) {\n    let lonLat;\n    let coordStr;\n    let negativeLon;\n    let degreesLon;\n    let minutesLon;\n    let secondsLon;\n    let directionLon;\n    let decimalLon;\n    let negativeLat;\n    let degreesLat;\n    let minutesLat;\n    let secondsLat;\n    let directionLat;\n    let decimalLat;\n    let zone;\n    let radius;\n    let conf;\n    let lon;\n    let lat;\n    const projectionPattern = '(\\\\s*;\\\\s*[\\\\d]{4,6})';\n    const toProjection = '4326';\n    let projectionStr;\n    const projectionRegex = new RegExp(projectionPattern, 'g');\n    const lonlatCoord = '([-+])?([\\\\d]{1,3})([,.](\\\\d+))?';\n    const lonLatPattern = `${lonlatCoord}[\\\\s,]+${lonlatCoord}`;\n    const lonLatRegex = new RegExp(`^${lonLatPattern}$`, 'g');\n    const dmsCoord = '([0-9]{1,2})[:|°]?\\\\s*([0-9]{1,2})?[:|\\'|′|’]?\\\\s*([0-9]{1,2}(?:.[0-9]+){0,1})?\\\\s*[\"|″|”]?\\\\s*';\n    const dmsCoordPattern = `${dmsCoord}([N|S|E|W|O]),?\\\\s*${dmsCoord}([N|S|E|W|O])`;\n    const dmsRegex = new RegExp(`^${dmsCoordPattern}`, 'gi');\n    const patternUtm = '(UTM)-?(\\\\d{1,2})[\\\\s,]*(\\\\d+[.,]?\\\\d+)[\\\\s,]+(\\\\d+[.,]?\\\\d+)';\n    const utmRegex = new RegExp(`^${patternUtm}`, 'gi');\n    const patternMtm = '(MTM)-?(\\\\d{1,2})[\\\\s,]*(\\\\d+[.,]?\\\\d+)[\\\\s,]+(\\\\d+[.,]?\\\\d+)';\n    const mtmRegex = new RegExp(`^${patternMtm}`, 'gi');\n    const ddCoord = '([-+])?(\\\\d{1,3})[,.](\\\\d+)';\n    const patternDd = `${ddCoord}\\\\s*[,]?\\\\s*${ddCoord}`;\n    const ddRegex = new RegExp(`^${patternDd}`, 'g');\n    const dmdCoord = '([-+])?(\\\\d{1,3})[\\\\s,.]{1}(\\\\d{1,2})[\\\\s,.]{1}(\\\\d{1,2})[.,]?(\\\\d{1,5})?';\n    const patternDmd = `${dmdCoord}\\\\s*[,.]?\\\\s*${dmdCoord}`;\n    const dmdRegex = new RegExp(`^${patternDmd}`, 'g');\n    // tslint:disable:max-line-length\n    const patternBELL = 'LAT\\\\s*[\\\\s:]*\\\\s*([-+])?(\\\\d{1,2})[\\\\s.,]?(\\\\d+)?[\\\\s.,]?\\\\s*(\\\\d{1,2}([.,]\\\\d+)?)?\\\\s*(N|S|E|W)?\\\\s*LONG\\\\s*[\\\\s:]*\\\\s*([-+])?(\\\\d{1,3})[\\\\s.,]?(\\\\d+)?[\\\\s.,]?\\\\s*(\\\\d{1,2}([.,]\\\\d+)?)?\\\\s*(N|S|E|W)?\\\\s*UNC\\\\s*[\\\\s:]?\\\\s*(\\\\d+)\\\\s*CONF\\\\s*[\\\\s:]?\\\\s*(\\\\d{1,3})';\n    const bellRegex = new RegExp(`^${patternBELL}?`, 'gi');\n    const mmCoord = '([-+]?\\\\d+)[,.]?(\\\\d+)?';\n    const mmPattern = `${mmCoord}[\\\\s,]+${mmCoord}`;\n    const mmRegex = new RegExp(`^${mmPattern}$`, 'g');\n    let isXYCoords = false;\n    str = str.toLocaleUpperCase().trim();\n    // Extract projection\n    if (projectionRegex.test(str)) {\n        [coordStr, projectionStr] = str.split(';').map(s => s.trim());\n    }\n    else {\n        coordStr = str;\n    }\n    if (lonLatRegex.test(coordStr)) {\n        [\n            ,\n            negativeLon,\n            lon,\n            ,\n            decimalLon,\n            negativeLat,\n            lat,\n            ,\n            decimalLat\n        ] = coordStr.match(lonLatPattern);\n        lon = parseFloat((negativeLon ? negativeLon : '') + lon + '.' + decimalLon);\n        lat = parseFloat((negativeLat ? negativeLat : '') + lat + '.' + decimalLat);\n    }\n    else if (dmsRegex.test(coordStr)) {\n        [\n            ,\n            degreesLon,\n            minutesLon,\n            secondsLon,\n            directionLon,\n            degreesLat,\n            minutesLat,\n            secondsLat,\n            directionLat\n        ] = coordStr.match(dmsCoordPattern);\n        if (directionLon === 'S' || directionLon === 'N') {\n            degreesLon = [degreesLat, (degreesLat = degreesLon)][0];\n            minutesLon = [minutesLat, (minutesLat = minutesLon)][0];\n            secondsLon = [secondsLat, (secondsLat = secondsLon)][0];\n            directionLon = [directionLat, (directionLat = directionLon)][0];\n        }\n        lon = convertDMSToDD(parseFloat(degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);\n        lat = convertDMSToDD(parseFloat(degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);\n    }\n    else if (utmRegex.test(coordStr)) {\n        isXYCoords = true;\n        [, , zone, lon, lat] = coordStr.match(patternUtm);\n        const epsgUtm = Number(zone) < 10 ? `EPSG:3260${zone}` : `EPSG:326${zone}`;\n        [lon, lat] = transform([parseFloat(lon), parseFloat(lat)], epsgUtm, 'EPSG:4326');\n    }\n    else if (mtmRegex.test(coordStr)) {\n        isXYCoords = true;\n        [, , zone, lon, lat] = coordStr.match(patternMtm);\n        const epsgMtm = Number(zone) < 10 ? `EPSG:3218${zone}` : `EPSG:321${80 + Number(zone)}`;\n        [lon, lat] = transform([parseFloat(lon), parseFloat(lat)], epsgMtm, 'EPSG:4326');\n    }\n    else if (dmdRegex.test(coordStr)) {\n        [\n            ,\n            negativeLon,\n            degreesLon,\n            minutesLon,\n            secondsLon,\n            decimalLon,\n            negativeLat,\n            degreesLat,\n            minutesLat,\n            secondsLat,\n            decimalLat\n        ] = coordStr.match(patternDmd);\n        lon = convertDMSToDD(parseFloat((negativeLon ? negativeLon : '') + degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);\n        lat = convertDMSToDD(parseFloat((negativeLat ? negativeLat : '') + degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);\n    }\n    else if (ddRegex.test(coordStr)) {\n        [\n            ,\n            negativeLon,\n            degreesLon,\n            decimalLon,\n            negativeLat,\n            degreesLat,\n            decimalLat\n        ] = coordStr.match(patternDd);\n        lon = convertDMSToDD(parseFloat((negativeLon ? negativeLon : '') + degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);\n        lat = convertDMSToDD(parseFloat((negativeLat ? negativeLat : '') + degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);\n    }\n    else if (bellRegex.test(coordStr)) {\n        [\n            ,\n            negativeLat,\n            degreesLat,\n            minutesLat,\n            secondsLat,\n            ,\n            directionLat,\n            negativeLon,\n            degreesLon,\n            minutesLon,\n            secondsLon,\n            ,\n            directionLon,\n            radius,\n            conf\n        ] = coordStr.match(patternBELL);\n        // Set default value for North America\n        if (!directionLon) {\n            directionLon = 'W';\n        }\n        // Check if real minutes or decimals\n        if (minutesLon && minutesLon.length > 2) {\n            lon = parseFloat((negativeLon ? negativeLon : '') + degreesLon + '.' + minutesLon);\n        }\n        else {\n            lon = convertDMSToDD(parseFloat(degreesLon), parseFloat(minutesLon), parseFloat(secondsLon), directionLon);\n        }\n        if (minutesLat && minutesLat.length > 2) {\n            lat = parseFloat((negativeLat ? negativeLat : '') + degreesLat + '.' + minutesLat);\n        }\n        else {\n            lat = convertDMSToDD(parseFloat(degreesLat), parseFloat(minutesLat), parseFloat(secondsLat), directionLat);\n        }\n    }\n    else if (mmRegex.test(coordStr)) {\n        isXYCoords = true;\n        [, lon, decimalLon, lat, decimalLat] = coordStr.match(mmPattern);\n        if (decimalLon) {\n            lon = parseFloat(lon + '.' + decimalLon);\n        }\n        if (decimalLat) {\n            lat = parseFloat(lat + '.' + decimalLat);\n        }\n    }\n    else {\n        return {\n            lonLat: undefined,\n            message: '',\n            radius: undefined,\n            conf: undefined\n        };\n    }\n    if (opts.forceNA && !isXYCoords) {\n        // Set a negative coordinate for North America zone\n        if (lon > 0 && lat > 0) {\n            if (lon > lat) {\n                lon = -lon;\n            }\n            else {\n                lat = -lat;\n            }\n        }\n        // Reverse coordinate to respect lonLat convention\n        if (lon > lat) {\n            lon = [lat, (lat = lon)][0];\n        }\n    }\n    lonLat = [Number(lon), Number(lat)];\n    // Reproject the coordinate if projection parameter have been set and coord is not 4326\n    if ((projectionStr !== undefined && projectionStr !== toProjection) ||\n        (lonLat[0] > 180 || lonLat[0] < -180) ||\n        (lonLat[1] > 90 || lonLat[1] < -90)) {\n        const source = projectionStr ? 'EPSG:' + projectionStr : mapProjection;\n        const dest = 'EPSG:' + toProjection;\n        try {\n            lonLat = transform(lonLat, source, dest);\n        }\n        catch (e) {\n            return {\n                lonLat: undefined,\n                message: 'Projection ' + source + ' not supported',\n                radius: undefined,\n                conf: undefined\n            };\n        }\n    }\n    return {\n        lonLat,\n        message: '',\n        radius: radius ? parseInt(radius, 10) : undefined,\n        conf: conf ? parseInt(conf, 10) : undefined\n    };\n}\n/**\n * Convert degrees minutes seconds to dd\n * @param degrees Degrees\n * @param minutes Minutes\n * @param seconds Seconds\n * @param direction Direction\n */\nfunction convertDMSToDD(degrees, minutes, seconds, direction) {\n    minutes = minutes || 0;\n    seconds = seconds || 0;\n    let dd = degrees + minutes / 60 + seconds / 3600;\n    if (direction === 'S' || direction === 'W') {\n        dd = -dd;\n    } // Don't do anything for N or E\n    return dd;\n}\n/**\n * Return true of two view states are equal.\n * @param state1 View state\n * @param state2 View state\n * @returns True if the view states are equal\n */\nfunction viewStatesAreEqual(state1, state2) {\n    if (state1 === undefined || state2 === undefined) {\n        return false;\n    }\n    const tolerance = 1 / 10000;\n    return (state1.zoom === state2.zoom &&\n        Math.trunc(state1.center[0] / tolerance) ===\n            Math.trunc(state2.center[0] / tolerance) &&\n        Math.trunc(state1.center[1] / tolerance) ===\n            Math.trunc(state2.center[1] / tolerance));\n}\n/**\n * Format the scale to a human readable text\n * @param Scale of the map\n * @returns Human readable scale text\n */\nfunction formatScale(scale) {\n    scale = Math.round(scale);\n    if (scale < 10000) {\n        return scale + '';\n    }\n    scale = Math.round(scale / 1000);\n    if (scale < 1000) {\n        return scale + 'K';\n    }\n    scale = Math.round(scale / 1000);\n    return scale + 'M';\n}\n/**\n * Return the resolution from a scale denom\n * @param scale Scale denom\n * @param dpi DPI\n * @returns Resolution\n */\nfunction getResolutionFromScale(scale, dpi = 96) {\n    const inchesPerMeter = 39.3701;\n    return scale / (inchesPerMeter * dpi);\n}\n/**\n * Return the resolution from a scale denom\n * @param Scale denom\n * @returns Resolution\n */\nfunction getScaleFromResolution(resolution, unit = 'm', dpi = 96) {\n    const inchesPerMeter = 39.3701;\n    return resolution * METERS_PER_UNIT[unit] * inchesPerMeter * dpi;\n}\n/**\n * Returns true if the CTRL key is pushed during an Ol MapBrowserPointerEvent\n * @param event OL MapBrowserPointerEvent\n * @returns Whether the CTRL key is pushed\n */\nfunction ctrlKeyDown(event) {\n    const originalEvent = event.originalEvent;\n    return (!originalEvent.altKey &&\n        (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n        !originalEvent.shiftKey);\n}\nfunction roundCoordTo(coord, decimal = 3) {\n    return [coord[0].toFixed(decimal), coord[1].toFixed(decimal)];\n}\n/**\n * Returns an array of converted coordinates.\n * Conversion is done for every configured projections\n * and for the current UTM zone and MTM zone.\n * @param lonLat [number, number] array of the coordinate to transform.\n * @param projections  Projection[] Array of destination projection.\n * @returns Returns an array of converted coordinates.\n */\nfunction lonLatConversion(lonLat, projections) {\n    const rawCoord3857 = transform(lonLat, 'EPSG:4326', 'EPSG:3857');\n    const convertedLonLat = [\n        {\n            code: 'EPSG:3857',\n            alias: 'Web mercator',\n            coord: rawCoord3857,\n            igo2CoordFormat: `${roundCoordTo(rawCoord3857).join(', ')} ; 3857`\n        }\n    ];\n    // detect the current utm zone.\n    const utmZone = utmZoneFromLonLat(lonLat);\n    const epsgUtm = utmZone < 10 ? `EPSG:3260${utmZone}` : `EPSG:326${utmZone}`;\n    const utmName = `UTM-${utmZone}`;\n    const rawCoordUtm = transform(lonLat, 'EPSG:4326', epsgUtm);\n    convertedLonLat.push({\n        code: epsgUtm,\n        alias: 'UTM',\n        coord: rawCoordUtm,\n        igo2CoordFormat: `${utmName} ${roundCoordTo(rawCoordUtm).join(', ')}`\n    });\n    // detect the current mtm zone.\n    const mtmZone = mtmZoneFromLonLat(lonLat);\n    if (mtmZone) {\n        const epsgMtm = mtmZone < 10 ? `EPSG:3218${mtmZone}` : `EPSG:321${80 + mtmZone}`;\n        const mtmName = `MTM-${mtmZone}`;\n        const rawCoordMtm = transform(lonLat, 'EPSG:4326', epsgMtm);\n        convertedLonLat.push({\n            code: epsgMtm,\n            alias: 'MTM',\n            coord: rawCoordMtm,\n            igo2CoordFormat: `${mtmName} ${roundCoordTo(rawCoordMtm).join(', ')}`\n        });\n    }\n    projections.forEach(projection => {\n        const rawCoord = transform(lonLat, 'EPSG:4326', projection.code);\n        const numericEpsgCode = projection.code.split(':')[1];\n        convertedLonLat.push({\n            code: projection.code,\n            alias: projection.alias || projection.code,\n            coord: rawCoord,\n            igo2CoordFormat: `${roundCoordTo(rawCoord).join(', ')} ; ${numericEpsgCode}`\n        });\n    });\n    return convertedLonLat;\n}\n/**\n * Detect the current utm zone of the lon/lat coordinate.\n * @param lonLat [number, number] array of the coordinate to detect the UTM zone.\n * @returns number The UTM zone.\n */\nfunction utmZoneFromLonLat(lonLat) {\n    return Math.ceil((lonLat[0] + 180) / 6);\n}\n/**\n * Detect the current mtm zone of the lon/lat coordinate.\n * @param lonLat [number, number] array of the coordinate to detect the MTM zone.\n * @returns number The MTM zone. Undefined if outside of the mtm application zone.\n */\nfunction mtmZoneFromLonLat(lonLat) {\n    const long = lonLat[0];\n    let mtmZone;\n    if (long < -51 && long > -54) {\n        mtmZone = 1;\n    }\n    if (long < -54 && long > -57) {\n        mtmZone = 2;\n    }\n    if (long < -57 && long > -60) {\n        mtmZone = 3;\n    }\n    if (long < -60 && long > -63) {\n        mtmZone = 4;\n    }\n    if (long < -63 && long > -66) {\n        mtmZone = 5;\n    }\n    if (long < -66 && long > -69) {\n        mtmZone = 6;\n    }\n    if (long < -69 && long > -72) {\n        mtmZone = 7;\n    }\n    if (long < -72 && long > -75) {\n        mtmZone = 8;\n    }\n    if (long < -75 && long > -78) {\n        mtmZone = 9;\n    }\n    if (long < -78 && long > -81) {\n        mtmZone = 10;\n    }\n    return mtmZone;\n}\n\nclass Layer {\n    constructor(options, authInterceptor) {\n        this.options = options;\n        this.authInterceptor = authInterceptor;\n        this.legendCollapsed = true;\n        this.firstLoadComponent = true;\n        this.isInResolutionsRange$ = new BehaviorSubject(false);\n        this.visible$ = new BehaviorSubject(undefined);\n        this.displayed$ = combineLatest([\n            this.isInResolutionsRange$,\n            this.visible$\n        ]).pipe(map((bunch) => bunch[0] && bunch[1]));\n        this.dataSource = options.source;\n        this.ol = this.createOlLayer();\n        if (options.zIndex !== undefined) {\n            this.zIndex = options.zIndex;\n        }\n        if (options.baseLayer && options.visible === undefined) {\n            options.visible = false;\n        }\n        this.maxResolution = options.maxResolution || getResolutionFromScale(Number(options.maxScaleDenom));\n        this.minResolution = options.minResolution || getResolutionFromScale(Number(options.minScaleDenom));\n        this.visible = options.visible === undefined ? true : options.visible;\n        this.opacity = options.opacity === undefined ? 1 : options.opacity;\n        if (options.legendOptions &&\n            (options.legendOptions.url || options.legendOptions.html)) {\n            this.legend = this.dataSource.setLegend(options.legendOptions);\n        }\n        this.legendCollapsed = options.legendOptions\n            ? options.legendOptions.collapsed\n                ? options.legendOptions.collapsed\n                : true\n            : true;\n        this.ol.set('_layer', this, true);\n    }\n    get id() {\n        return this.options.id || this.dataSource.id;\n    }\n    get alias() {\n        return this.options.alias;\n    }\n    get title() {\n        return this.options.title;\n    }\n    set title(title) {\n        this.options.title = title;\n    }\n    get zIndex() {\n        return this.ol.getZIndex();\n    }\n    set zIndex(zIndex) {\n        this.ol.setZIndex(zIndex);\n    }\n    get baseLayer() {\n        return this.options.baseLayer;\n    }\n    set baseLayer(baseLayer) {\n        this.options.baseLayer = baseLayer;\n    }\n    get opacity() {\n        return this.ol.get('opacity');\n    }\n    set opacity(opacity) {\n        this.ol.setOpacity(opacity);\n    }\n    set isInResolutionsRange(value) {\n        this.isInResolutionsRange$.next(value);\n    }\n    get isInResolutionsRange() {\n        return this.isInResolutionsRange$.value;\n    }\n    set maxResolution(value) {\n        this.ol.setMaxResolution(value || Infinity);\n        this.updateInResolutionsRange();\n    }\n    get maxResolution() {\n        return this.ol.getMaxResolution();\n    }\n    set minResolution(value) {\n        this.ol.setMinResolution(value || 0);\n        this.updateInResolutionsRange();\n    }\n    get minResolution() {\n        return this.ol.getMinResolution();\n    }\n    set visible(value) {\n        this.ol.setVisible(value);\n        this.visible$.next(value);\n    }\n    get visible() {\n        return this.visible$.value;\n    }\n    get displayed() {\n        return this.visible && this.isInResolutionsRange;\n    }\n    get showInLayerList() {\n        return this.options.showInLayerList !== false;\n    }\n    setMap(igoMap) {\n        this.map = igoMap;\n        this.unobserveResolution();\n        if (igoMap !== undefined) {\n            this.observeResolution();\n        }\n    }\n    observeResolution() {\n        this.resolution$$ = this.map.viewController.resolution$.subscribe(() => this.updateInResolutionsRange());\n    }\n    unobserveResolution() {\n        if (this.resolution$$ !== undefined) {\n            this.resolution$$.unsubscribe();\n            this.resolution$$ = undefined;\n        }\n    }\n    updateInResolutionsRange() {\n        if (this.map !== undefined) {\n            const resolution = this.map.viewController.getResolution();\n            const minResolution = this.minResolution;\n            const maxResolution = this.maxResolution === undefined ? Infinity : this.maxResolution;\n            this.isInResolutionsRange = resolution >= minResolution && resolution <= maxResolution;\n        }\n        else {\n            this.isInResolutionsRange = false;\n        }\n    }\n}\n\nclass MetadataService {\n    constructor() { }\n    open(metadata) {\n        if (metadata.extern) {\n            window.open(metadata.url, '_blank');\n        }\n    }\n}\nMetadataService.ɵfac = function MetadataService_Factory(t) { return new (t || MetadataService)(); };\nMetadataService.ɵprov = ɵɵdefineInjectable({ factory: function MetadataService_Factory() { return new MetadataService(); }, token: MetadataService, providedIn: \"root\" });\nMetadataService.ctorParameters = () => [];\n\nclass MetadataButtonComponent {\n    constructor(metadataService) {\n        this.metadataService = metadataService;\n        this._color = 'primary';\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    openMetadata(metadata) {\n        this.metadataService.open(metadata);\n    }\n    get options() {\n        if (!this.layer) {\n            return;\n        }\n        return this.layer.options;\n    }\n}\nMetadataButtonComponent.ɵfac = function MetadataButtonComponent_Factory(t) { return new (t || MetadataButtonComponent)(ɵngcc0.ɵɵdirectiveInject(MetadataService)); };\nMetadataButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MetadataButtonComponent, selectors: [[\"igo-metadata-button\"]], inputs: { layer: \"layer\", color: \"color\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"information-outline\"]], template: function MetadataButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, MetadataButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.options && ctx.options.metadata && ctx.options.metadata.url);\n    } }, directives: [ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon], pipes: [ɵngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\nMetadataButtonComponent.ctorParameters = () => [\n    { type: MetadataService }\n];\nMetadataButtonComponent.propDecorators = {\n    layer: [{ type: Input }],\n    color: [{ type: Input }]\n};\n\nclass IgoMetadataModule {\n    static forRoot() {\n        return {\n            ngModule: IgoMetadataModule,\n            providers: []\n        };\n    }\n}\nIgoMetadataModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoMetadataModule });\nIgoMetadataModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoMetadataModule_Factory(t) { return new (t || IgoMetadataModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            IgoLanguageModule\n        ]] });\n\nclass DataService {\n}\n\n/**\n * Generate a id from it's datasource options.\n * @param options Data source options\n * @returns A id\n */\nfunction generateIdFromSourceOptions(options) {\n    const generators = {\n        wms: generateWMSIdFromSourceOptions,\n        wmts: generateWMTSIdFromSourceOptions,\n        xyz: generateXYZIdFromSourceOptions,\n        feature: generateFeatureIdFromSourceOptions,\n        arcgisrest: generateArcgisRestIdFromSourceOptions,\n        osm: (_options) => 'OSM'\n    };\n    const generator = generators[options.type] || generateId;\n    return generator(options);\n}\n/**\n * Generate a id from WMS data source options\n * @param options WMS data source options\n * @returns A md5 hash of the the url and layers\n */\nfunction generateWMSIdFromSourceOptions(options) {\n    const layers = options.params.LAYERS;\n    const url = options.url.charAt(0) === '/' ? window.location.origin + options.url : options.url;\n    const chain = 'wms' + url + layers;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a id from WMTS data source options\n * @param options WMTS data source options\n * @returns A md5 hash of the the url and layer\n */\nfunction generateWMTSIdFromSourceOptions(options) {\n    const layer = options.layer;\n    const chain = 'wmts' + options.url + layer;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a id from XYZ data source options\n * @param options XYZ data source options\n * @returns A md5 hash of the the url and layer\n */\nfunction generateXYZIdFromSourceOptions(options) {\n    const chain = 'xyz' + options.url;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a id from feature data source options\n * @param options XYZ data source options\n * @returns A md5 hash of the the url and layer\n */\nfunction generateFeatureIdFromSourceOptions(options) {\n    if (!options.url) {\n        return generateId(options);\n    }\n    const chain = 'feature' + options.url;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a id from ArcGIS Rest data source options\n * @param options ArcGIS Rest data source options\n * @returns A md5 hash of the url and layers\n */\nfunction generateArcgisRestIdFromSourceOptions(options) {\n    const layers = options.layer;\n    const url = options.url.charAt(0) === '/' ? window.location.origin + options.url : options.url;\n    const chain = 'arcgis' + url + layers;\n    return Md5.hashStr(chain);\n}\n/**\n * Generate a unique id\n * @returns A uuid\n */\nfunction generateId(options) {\n    return uuid();\n}\n\nclass DataSource {\n    constructor(options = {}, dataService) {\n        this.options = options;\n        this.dataService = dataService;\n        this.options = options;\n        this.id = this.options.id || this.generateId();\n        this.ol = this.createOlSource();\n    }\n    generateId() {\n        return generateIdFromSourceOptions(this.options);\n    }\n    getLegend(style, scale) {\n        return this.legend ? this.legend : [];\n    }\n    setLegend(options) {\n        if (options.url) {\n            this.legend = [{ url: options.url }];\n        }\n        else if (options.html) {\n            this.legend = [{ html: options.html }];\n        }\n        else {\n            this.legend = [];\n        }\n        return this.legend;\n    }\n}\n\nclass FeatureDataSource extends DataSource {\n    createOlSource() {\n        const sourceOptions = {\n            format: this.getSourceFormatFromOptions(this.options)\n        };\n        return new OlVectorSource(Object.assign(sourceOptions, this.options));\n    }\n    getSourceFormatFromOptions(options) {\n        if (options.format) {\n            return options.format;\n        }\n        let olFormatCls;\n        const formatType = options.formatType;\n        if (!formatType) {\n            olFormatCls = GeoJSON;\n        }\n        else {\n            olFormatCls = olformat[formatType];\n            if (olFormatCls === undefined) {\n                throw new Error('Invalid vector source format ${formatType}.');\n            }\n        }\n        const formatOptions = options.formatOptions;\n        let format;\n        if (formatOptions) {\n            format = new olFormatCls(formatOptions);\n        }\n        else {\n            format = new olFormatCls();\n        }\n        return format;\n    }\n    onUnwatch() { }\n    get queryTitle() {\n        return this.options.queryTitle\n            ? this.options.queryTitle\n            : 'title';\n    }\n}\n\nclass OSMDataSource extends DataSource {\n    createOlSource() {\n        this.options.url = 'https://tile.openstreetmap.org/{z}/{x}/{y}.png';\n        return new olSourceOSM(this.options);\n    }\n    onUnwatch() { }\n}\n\nclass XYZDataSource extends DataSource {\n    createOlSource() {\n        return new olSourceXYZ(this.options);\n    }\n    onUnwatch() { }\n}\n\nvar OgcFilterOperatorType;\n(function (OgcFilterOperatorType) {\n    OgcFilterOperatorType[\"BasicNumericOperator\"] = \"basicnumericoperator\";\n    OgcFilterOperatorType[\"Basic\"] = \"basic\";\n    OgcFilterOperatorType[\"BasicAndSpatial\"] = \"basicandspatial\";\n    OgcFilterOperatorType[\"Spatial\"] = \"spatial\";\n    OgcFilterOperatorType[\"All\"] = \"all\";\n    OgcFilterOperatorType[\"Time\"] = \"time\";\n})(OgcFilterOperatorType || (OgcFilterOperatorType = {}));\nvar OgcFilterOperator;\n(function (OgcFilterOperator) {\n    OgcFilterOperator[\"BBOX\"] = \"BBox\";\n    OgcFilterOperator[\"PropertyIsBetween\"] = \"PropertyIsBetween\";\n    OgcFilterOperator[\"Contains\"] = \"Contains\";\n    OgcFilterOperator[\"During\"] = \"During\";\n    OgcFilterOperator[\"PropertyIsEqualTo\"] = \"PropertyIsEqualTo\";\n    OgcFilterOperator[\"PropertyIsGreaterThan\"] = \"PropertyIsGreaterThan\";\n    OgcFilterOperator[\"PropertyIsGreaterThanOrEqualTo\"] = \"PropertyIsGreaterThanOrEqualTo\";\n    OgcFilterOperator[\"Intersects\"] = \"Intersects\";\n    OgcFilterOperator[\"PropertyIsNull\"] = \"PropertyIsNull\";\n    OgcFilterOperator[\"PropertyIsLessThan\"] = \"PropertyIsLessThan\";\n    OgcFilterOperator[\"PropertyIsLessThanOrEqualTo\"] = \"PropertyIsLessThanOrEqualTo\";\n    OgcFilterOperator[\"PropertyIsLike\"] = \"PropertyIsLike\";\n    OgcFilterOperator[\"PropertyIsNotEqualTo\"] = \"PropertyIsNotEqualTo\";\n    OgcFilterOperator[\"Within\"] = \"Within\";\n    OgcFilterOperator[\"And\"] = \"And\";\n    OgcFilterOperator[\"Or\"] = \"Or\";\n    OgcFilterOperator[\"Not\"] = \"Not\";\n})(OgcFilterOperator || (OgcFilterOperator = {}));\n\nconst moment = moment_;\nclass OgcFilterWriter {\n    constructor() {\n        this.filterSequence = [];\n        this.operators = {\n            [OgcFilterOperator.PropertyIsEqualTo]: {\n                spatial: false,\n                fieldRestrict: []\n            },\n            [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                spatial: false,\n                fieldRestrict: []\n            },\n            [OgcFilterOperator.PropertyIsLike]: {\n                spatial: false,\n                fieldRestrict: ['string']\n            },\n            [OgcFilterOperator.PropertyIsGreaterThan]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.PropertyIsGreaterThanOrEqualTo]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.PropertyIsLessThan]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.PropertyIsLessThanOrEqualTo]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.PropertyIsBetween]: {\n                spatial: false,\n                fieldRestrict: ['number']\n            },\n            [OgcFilterOperator.During]: { spatial: false, fieldRestrict: [] },\n            [OgcFilterOperator.PropertyIsNull]: {\n                spatial: false,\n                fieldRestrict: []\n            },\n            [OgcFilterOperator.Intersects]: {\n                spatial: true,\n                fieldRestrict: []\n            },\n            [OgcFilterOperator.Within]: { spatial: true, fieldRestrict: [] },\n            [OgcFilterOperator.Contains]: { spatial: true, fieldRestrict: [] }\n        };\n    }\n    defineOgcFiltersDefaultOptions(ogcFiltersOptions, fieldNameGeometry, srcType) {\n        let ogcFiltersDefaultValue = true; // default values for wfs.\n        if (srcType && srcType === 'wms') {\n            ogcFiltersDefaultValue = false;\n        }\n        ogcFiltersOptions = ogcFiltersOptions || {};\n        ogcFiltersOptions.enabled =\n            ogcFiltersOptions.enabled === undefined\n                ? ogcFiltersDefaultValue\n                : ogcFiltersOptions.enabled;\n        ogcFiltersOptions.editable =\n            ogcFiltersOptions.editable === undefined\n                ? ogcFiltersDefaultValue\n                : ogcFiltersOptions.editable;\n        ogcFiltersOptions.geometryName = fieldNameGeometry;\n        ogcFiltersOptions.advancedOgcFilters = true;\n        if (ogcFiltersOptions.enabled && ogcFiltersOptions.pushButtons) {\n            ogcFiltersOptions.advancedOgcFilters = false;\n        }\n        return ogcFiltersOptions;\n    }\n    buildFilter(filters, extent, proj, fieldNameGeometry, options) {\n        let ourBboxFilter;\n        let enableBbox;\n        if (/intersects|contains|within/gi.test(JSON.stringify(filters))) {\n            enableBbox = false;\n        }\n        else {\n            enableBbox = true;\n        }\n        if (filters) {\n            fieldNameGeometry =\n                filters.geometryName !== undefined\n                    ? filters.geometryName\n                    : fieldNameGeometry;\n        }\n        if (extent && filters) {\n            ourBboxFilter = bbox(fieldNameGeometry, extent, proj.getCode());\n        }\n        let filterAssembly;\n        if (filters) {\n            filters = this.checkIgoFiltersProperties(filters, fieldNameGeometry, proj);\n            if (extent && enableBbox) {\n                filterAssembly = and(ourBboxFilter, this.bundleFilter(filters, options));\n            }\n            else {\n                filterAssembly = this.bundleFilter(filters, options);\n            }\n        }\n        else {\n            return 'bbox=' + extent.join(',') + ',' + proj.getCode();\n        }\n        const wfsOptions = {\n            srsName: '',\n            featureNS: '',\n            featurePrefix: '',\n            featureTypes: ['featureTypes'],\n            filter: filterAssembly,\n            outputFormat: '',\n            geometryName: fieldNameGeometry\n        };\n        const query = new olFormatWFS().writeGetFeature(wfsOptions);\n        const str = new XMLSerializer().serializeToString(query);\n        const regexp1 = /typenames *=|typename *=\\\"featureTypes\\\" *>/gi;\n        const regexp2 = /<\\/Query><\\/GetFeature>/gi;\n        return 'filter=' + str.split(regexp1)[1].split(regexp2)[0];\n    }\n    bundleFilter(filterObject, options) {\n        if (filterObject instanceof Array) {\n            const logicalArray = [];\n            filterObject.forEach((element) => {\n                logicalArray.push(this.bundleFilter(element, options));\n            });\n            return logicalArray;\n        }\n        else {\n            if (filterObject.hasOwnProperty('logical')) {\n                return this.createFilter({\n                    operator: filterObject.logical,\n                    logicalArray: this.bundleFilter(filterObject.filters, options)\n                }, options);\n            }\n            else if (filterObject.hasOwnProperty('operator')) {\n                return this.createFilter(filterObject, options);\n            }\n        }\n    }\n    createFilter(filterOptions, options) {\n        const operator = filterOptions.operator;\n        const logicalArray = filterOptions.logicalArray;\n        const wfsPropertyName = filterOptions.propertyName;\n        const wfsPattern = filterOptions.pattern;\n        const wfsMatchCase = filterOptions.matchCase\n            ? filterOptions.matchCase\n            : true;\n        const wfsWildCard = filterOptions.wildCard ? filterOptions.wildCard : '*';\n        const wfsSingleChar = filterOptions.singleChar\n            ? filterOptions.singleChar\n            : '.';\n        const wfsEscapeChar = filterOptions.escapeChar\n            ? filterOptions.escapeChar\n            : '!';\n        const wfsLowerBoundary = filterOptions.lowerBoundary;\n        const wfsUpperBoundary = filterOptions.upperBoundary;\n        const wfsGeometryName = filterOptions.geometryName;\n        const wfsExtent = filterOptions.extent;\n        const wfsWktGeometry = filterOptions.wkt_geometry;\n        const wfsSrsName = filterOptions.srsName\n            ? filterOptions.srsName\n            : 'EPSG:3857';\n        const wfsBegin = this.parseFilterOptionDate(filterOptions.begin, options ? options.minDate : undefined);\n        const wfsEnd = this.parseFilterOptionDate(filterOptions.end, options ? options.maxDate : undefined);\n        const wfsExpression = filterOptions.expression;\n        let geometry;\n        if (wfsWktGeometry) {\n            const wkt = new olWKT();\n            geometry = wkt.readGeometry(wfsWktGeometry, {\n                dataProjection: wfsSrsName,\n                featureProjection: wfsSrsName || 'EPSG:3857'\n            });\n        }\n        switch (operator.toLowerCase()) {\n            case OgcFilterOperator.BBOX.toLowerCase():\n                return bbox(wfsGeometryName, wfsExtent, wfsSrsName);\n            case OgcFilterOperator.PropertyIsBetween.toLowerCase():\n                return between(wfsPropertyName, wfsLowerBoundary, wfsUpperBoundary);\n            case OgcFilterOperator.Contains.toLowerCase():\n                return contains(wfsGeometryName, geometry, wfsSrsName);\n            case OgcFilterOperator.During.toLowerCase():\n                return during(wfsPropertyName, wfsBegin, wfsEnd);\n            case OgcFilterOperator.PropertyIsEqualTo.toLowerCase():\n                return equalTo(wfsPropertyName, wfsExpression, wfsMatchCase);\n            case OgcFilterOperator.PropertyIsGreaterThan.toLowerCase():\n                return greaterThan(wfsPropertyName, wfsExpression);\n            case OgcFilterOperator.PropertyIsGreaterThanOrEqualTo.toLowerCase():\n                return greaterThanOrEqualTo(wfsPropertyName, wfsExpression);\n            case OgcFilterOperator.Intersects.toLowerCase():\n                return intersects(wfsGeometryName, geometry, wfsSrsName);\n            case OgcFilterOperator.PropertyIsNull.toLowerCase():\n                return isNull(wfsPropertyName);\n            case OgcFilterOperator.PropertyIsLessThan.toLowerCase():\n                return lessThan(wfsPropertyName, wfsExpression);\n            case OgcFilterOperator.PropertyIsLessThanOrEqualTo.toLowerCase():\n                return lessThanOrEqualTo(wfsPropertyName, wfsExpression);\n            case OgcFilterOperator.PropertyIsLike.toLowerCase():\n                return like(wfsPropertyName, wfsPattern.replace(/[()_]/gi, wfsSingleChar), wfsWildCard, wfsSingleChar, wfsEscapeChar, wfsMatchCase);\n            case OgcFilterOperator.PropertyIsNotEqualTo.toLowerCase():\n                return notEqualTo(wfsPropertyName, wfsExpression, wfsMatchCase);\n            case OgcFilterOperator.Within.toLowerCase():\n                return within(wfsGeometryName, geometry, wfsSrsName);\n            // LOGICAL\n            case OgcFilterOperator.And.toLowerCase():\n                return and.apply(null, logicalArray);\n            case OgcFilterOperator.Or.toLowerCase():\n                return or.apply(null, logicalArray);\n            case OgcFilterOperator.Not.toLowerCase():\n                return not.apply(null, logicalArray);\n            default:\n                return undefined;\n        }\n    }\n    defineInterfaceFilterSequence(filterObject, geometryName, logical = '', level = -1) {\n        if (filterObject instanceof Array) {\n            filterObject.forEach((element) => {\n                this.filterSequence.concat(this.defineInterfaceFilterSequence(element, geometryName, logical, level));\n            });\n        }\n        else {\n            if (filterObject.hasOwnProperty('logical')) {\n                level = level + 1;\n                this.filterSequence.concat(this.defineInterfaceFilterSequence(filterObject.filters, geometryName, filterObject.logical, level));\n            }\n            else if (filterObject.hasOwnProperty('operator')) {\n                this.filterSequence.push(this.addInterfaceFilter(filterObject, geometryName, level, logical));\n            }\n        }\n        return this.filterSequence;\n    }\n    computeAllowedOperators(fields, propertyName, defaultOperatorsType) {\n        let effectiveOperators = {};\n        let allowedOperators;\n        let fieldsHasSpatialOperator;\n        let includeContains;\n        if (fields && propertyName) {\n            const srcField = fields.find((field) => field.name === propertyName);\n            allowedOperators =\n                srcField && srcField.allowedOperatorsType\n                    ? srcField.allowedOperatorsType\n                    : defaultOperatorsType;\n        }\n        if (fields) {\n            fields.map((field) => {\n                if (!field.allowedOperatorsType) {\n                    return;\n                }\n                const allowedOperatorsType = field.allowedOperatorsType.toLowerCase();\n                if (allowedOperatorsType === OgcFilterOperatorType.All.toLowerCase() ||\n                    allowedOperatorsType ===\n                        OgcFilterOperatorType.Spatial.toLowerCase() ||\n                    allowedOperatorsType ===\n                        OgcFilterOperatorType.BasicAndSpatial.toLowerCase()) {\n                    fieldsHasSpatialOperator = true;\n                    if (allowedOperatorsType === OgcFilterOperatorType.All.toLowerCase()) {\n                        includeContains = true;\n                    }\n                }\n            });\n        }\n        allowedOperators = allowedOperators\n            ? allowedOperators\n            : OgcFilterOperatorType.BasicAndSpatial;\n        switch (allowedOperators.toLowerCase()) {\n            case OgcFilterOperatorType.All:\n                effectiveOperators = this.operators;\n                break;\n            case OgcFilterOperatorType.Spatial:\n                effectiveOperators = {\n                    [OgcFilterOperator.Intersects]: { spatial: true, fieldRestrict: [] },\n                    [OgcFilterOperator.Within]: { spatial: true, fieldRestrict: [] }\n                };\n                break;\n            case OgcFilterOperatorType.BasicAndSpatial:\n                effectiveOperators = {\n                    [OgcFilterOperator.PropertyIsEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.Intersects]: { spatial: true, fieldRestrict: [] },\n                    [OgcFilterOperator.Within]: { spatial: true, fieldRestrict: [] }\n                };\n                break;\n            case OgcFilterOperatorType.Basic:\n                effectiveOperators = {\n                    [OgcFilterOperator.PropertyIsEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    }\n                };\n                break;\n            case OgcFilterOperatorType.Time:\n                effectiveOperators = {\n                    [OgcFilterOperator.During]: { spatial: false, fieldRestrict: [] }\n                };\n                break;\n            case OgcFilterOperatorType.BasicNumericOperator:\n                effectiveOperators = {\n                    [OgcFilterOperator.PropertyIsEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsGreaterThan]: {\n                        spatial: false,\n                        fieldRestrict: ['number']\n                    },\n                    [OgcFilterOperator.PropertyIsGreaterThanOrEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: ['number']\n                    },\n                    [OgcFilterOperator.PropertyIsLessThan]: {\n                        spatial: false,\n                        fieldRestrict: ['number']\n                    },\n                    [OgcFilterOperator.PropertyIsLessThanOrEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: ['number']\n                    }\n                };\n                break;\n            default:\n                effectiveOperators = {\n                    [OgcFilterOperator.PropertyIsEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.PropertyIsNotEqualTo]: {\n                        spatial: false,\n                        fieldRestrict: []\n                    },\n                    [OgcFilterOperator.Intersects]: { spatial: true, fieldRestrict: [] },\n                    [OgcFilterOperator.Within]: { spatial: true, fieldRestrict: [] }\n                };\n        }\n        if (fieldsHasSpatialOperator) {\n            effectiveOperators.Intersects = {\n                spatial: true,\n                fieldRestrict: []\n            };\n            effectiveOperators.Within = { spatial: true, fieldRestrict: [] };\n            if (includeContains) {\n                effectiveOperators.Contains = {\n                    spatial: true,\n                    fieldRestrict: []\n                };\n            }\n        }\n        return effectiveOperators;\n    }\n    addInterfaceFilter(igoOgcFilterObject, geometryName, level = 0, parentLogical = 'Or') {\n        if (!igoOgcFilterObject) {\n            igoOgcFilterObject = { operator: 'PropertyIsEqualTo' };\n        }\n        const f = {\n            propertyName: '',\n            operator: '',\n            active: '',\n            filterid: uuid(),\n            begin: '',\n            end: '',\n            lowerBoundary: '',\n            upperBoundary: '',\n            expression: '',\n            pattern: '',\n            wildCard: '*',\n            singleChar: '.',\n            escapeChar: '!',\n            matchCase: true,\n            igoSpatialSelector: '',\n            igoSNRC: '',\n            geometryName: '',\n            geometry: '',\n            wkt_geometry: '',\n            extent: '',\n            srsName: '',\n            parentLogical: '',\n            level: 0\n        };\n        return Object.assign(f, {\n            parentLogical,\n            level,\n            geometryName\n        }, igoOgcFilterObject);\n    }\n    checkIgoFiltersProperties(filterObject, fieldNameGeometry, proj, active = false) {\n        const filterArray = [];\n        if (filterObject instanceof Array) {\n            filterObject.forEach((element) => {\n                filterArray.push(this.checkIgoFiltersProperties(element, fieldNameGeometry, proj, active));\n            });\n            return filterArray;\n        }\n        else {\n            if (filterObject.hasOwnProperty('logical')) {\n                return Object.assign({}, {\n                    logical: filterObject.logical,\n                    filters: this.checkIgoFiltersProperties(filterObject.filters, fieldNameGeometry, proj, active)\n                });\n            }\n            else if (filterObject.hasOwnProperty('operator')) {\n                return this.addFilterProperties(filterObject, fieldNameGeometry, proj, active);\n            }\n        }\n    }\n    addFilterProperties(igoOgcFilterObject, fieldNameGeometry, proj, active = false) {\n        const filterid = igoOgcFilterObject.hasOwnProperty('filterid')\n            ? igoOgcFilterObject.filterid\n            : uuid();\n        const status = igoOgcFilterObject.hasOwnProperty('active')\n            ? igoOgcFilterObject.active\n            : active;\n        const srsName = igoOgcFilterObject.hasOwnProperty('srsName')\n            ? igoOgcFilterObject.srsName\n            : proj\n                ? proj.getCode()\n                : 'EPSG:3857';\n        return Object.assign({}, {\n            filterid,\n            active: status,\n            igoSpatialSelector: 'fixedExtent',\n            srsName\n        }, igoOgcFilterObject, { geometryName: fieldNameGeometry });\n    }\n    rebuiltIgoOgcFilterObjectFromSequence(sequence) {\n        if (sequence instanceof Array) {\n            if (sequence.length >= 1) {\n                let lastParentLogical = sequence[0].parentLogical;\n                let nextElement;\n                let logicalArray = [];\n                let lastProcessedFilter;\n                sequence.forEach((uiFilter) => {\n                    const element = Object.assign({}, uiFilter);\n                    const index = sequence.indexOf(uiFilter);\n                    if (index >= 0 && index < sequence.length - 1) {\n                        nextElement = sequence[index + 1];\n                    }\n                    else {\n                        nextElement = element;\n                    }\n                    delete element.active;\n                    delete element.filterid;\n                    delete element.parentLogical;\n                    logicalArray.push(element);\n                    if (sequence.length === 1) {\n                        lastProcessedFilter = element;\n                    }\n                    else if (lastParentLogical !== nextElement.parentLogical) {\n                        if (logicalArray.length === 1) {\n                            console.log('You must set at ' +\n                                'least two operator in a logical (' +\n                                lastParentLogical +\n                                ')');\n                        }\n                        else {\n                            lastProcessedFilter = Object.assign({}, { logical: lastParentLogical, filters: logicalArray });\n                            logicalArray = [lastProcessedFilter];\n                            lastParentLogical = nextElement.parentLogical;\n                        }\n                    }\n                });\n                return lastProcessedFilter;\n            }\n            else {\n                return undefined;\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    computeIgoPushButton(pushButtons) {\n        if (pushButtons.groups.every((group) => group.computedButtons !== undefined)) {\n            return pushButtons;\n        }\n        let pb;\n        if (pushButtons.groups && pushButtons.bundles) {\n            if (!pushButtons.bundles.every((bundle) => bundle.id !== undefined)) {\n                throw new Error('You must set an id for each of your pushButtons bundles');\n            }\n            pb = ObjectUtils.copyDeep(pushButtons);\n            pb.groups.forEach((group) => {\n                group.title = group.title ? group.title : group.name;\n                group.enabled = group.enabled ? group.enabled : false;\n                group.computedButtons = ObjectUtils.copyDeep(pb.bundles.filter((b) => group.ids.includes(b.id)));\n            });\n        }\n        else if (!pushButtons.groups && pushButtons.bundles) {\n            pb = ObjectUtils.copyDeep(pushButtons);\n            pb.groups = [\n                {\n                    title: 'group1',\n                    name: 'group1',\n                    computedButtons: ObjectUtils.copyDeep(pb.bundles)\n                }\n            ];\n        }\n        else {\n            pb = {\n                bundles: pushButtons,\n                groups: [\n                    {\n                        title: 'group1',\n                        name: 'group1',\n                        computedButtons: ObjectUtils.copyDeep(pushButtons)\n                    }\n                ]\n            };\n        }\n        if (!pb.groups.find((pbGroup) => pbGroup.enabled)) {\n            pb.groups[0].enabled = true;\n        }\n        return pb;\n    }\n    handleOgcFiltersAppliedValue(options, fieldNameGeometry, extent, proj) {\n        const ogcFilters = options.ogcFilters;\n        if (!ogcFilters) {\n            return;\n        }\n        let filterQueryStringPushButton = '';\n        let filterQueryStringAdvancedFilters = '';\n        if (ogcFilters.enabled && ogcFilters.pushButtons) {\n            ogcFilters.pushButtons = this.computeIgoPushButton(ogcFilters.pushButtons);\n            const pushButtonBundle = ogcFilters.pushButtons.groups.find((g) => g.enabled).computedButtons;\n            const conditions = [];\n            pushButtonBundle.map((buttonBundle) => {\n                const bundleCondition = [];\n                buttonBundle.buttons\n                    .filter((ogcpb) => ogcpb.enabled === true)\n                    .forEach((enabledPb) => bundleCondition.push(enabledPb.filters));\n                if (bundleCondition.length === 1) {\n                    conditions.push(bundleCondition[0]);\n                }\n                else if (bundleCondition.length > 1) {\n                    conditions.push({\n                        logical: buttonBundle.logical,\n                        filters: bundleCondition\n                    });\n                }\n            });\n            if (conditions.length >= 1) {\n                filterQueryStringPushButton = this.buildFilter(conditions.length === 1\n                    ? conditions[0]\n                    : { logical: 'And', filters: conditions }, extent, proj, ogcFilters.geometryName);\n            }\n        }\n        if (ogcFilters.enabled && ogcFilters.filters) {\n            ogcFilters.geometryName = ogcFilters.geometryName || fieldNameGeometry;\n            const igoFilters = ogcFilters.filters;\n            filterQueryStringAdvancedFilters = this.buildFilter(igoFilters, extent, proj, ogcFilters.geometryName, options);\n        }\n        let filterQueryString = ogcFilters.advancedOgcFilters\n            ? filterQueryStringAdvancedFilters\n            : filterQueryStringPushButton;\n        if (options.type === 'wms') {\n            filterQueryString = this.formatProcessedOgcFilter(filterQueryString, options.params.LAYERS);\n        }\n        if (options.type === 'wfs') {\n            filterQueryString = this.formatProcessedOgcFilter(filterQueryString, options.params.featureTypes);\n        }\n        return filterQueryString;\n    }\n    formatProcessedOgcFilter(processedFilter, layersOrTypenames) {\n        let appliedFilter = '';\n        if (processedFilter.length === 0 && layersOrTypenames.indexOf(',') === -1) {\n            appliedFilter = processedFilter;\n        }\n        else {\n            layersOrTypenames.split(',').forEach((layerOrTypenames) => {\n                appliedFilter = `${appliedFilter}(${processedFilter.replace('filter=', '')})`;\n            });\n        }\n        appliedFilter = appliedFilter.replace(/\\(\\)/g, '');\n        const filterValue = appliedFilter.length > 0\n            ? appliedFilter.replace('filter=', '')\n            : undefined;\n        return filterValue;\n    }\n    parseFilterOptionDate(value, defaultValue) {\n        if (!value) {\n            return defaultValue;\n        }\n        else if (moment(value).isValid()) {\n            return value;\n        }\n        else {\n            return undefined;\n        }\n    }\n}\n\nconst defaultEpsg = 'EPSG:3857';\nconst defaultMaxFeatures = 5000;\nconst defaultWfsVersion = '2.0.0';\nconst defaultFieldNameGeometry = 'geometry';\nconst gmlRegex = new RegExp(/(.*)?gml(.*)?/gi);\nconst jsonRegex = new RegExp(/(.*)?json(.*)?/gi);\n/**\n * This method build/standardize WFS call query params based on the layer property.\n * @param wfsDataSourceOptions  WFSDataSourceOptions The common wfs datasource options interface\n * @param count  Number: Used to control the number of feature. Used to bypass whe wfs datasource options interface (maxFeatures)\n * @param epsg  String: Used to control the EPSG code (es: 'EPSG3857'). Used to bypass whe wfs datasource options interface (srsName)\n * @param properties  String: Used to control the queried fields  (WFS service).\n * @returns An array array of {name: '', value: ''} of predefined query params.\n */\nfunction formatWFSQueryString(dataSourceOptions, count, epsg, properties, startIndex = 0, forceDefaultOutputFormat = false) {\n    const versionWfs200 = '2.0.0'; // not the same usage as defaultWfsVersion.\n    const url = dataSourceOptions.urlWfs;\n    const paramsWFS = dataSourceOptions.paramsWFS;\n    const effectiveCount = count || defaultMaxFeatures;\n    const effectiveStartIndex = paramsWFS.version === versionWfs200 ? `startIndex=${startIndex}` : '';\n    const epsgCode = epsg || defaultEpsg;\n    let outputFormat = paramsWFS.outputFormat\n        ? `outputFormat=${paramsWFS.outputFormat}`\n        : '';\n    let version = paramsWFS.version\n        ? `version=${paramsWFS.version}`\n        : `version=${defaultWfsVersion}`;\n    const paramTypename = paramsWFS.version === versionWfs200 ? 'typenames' : 'typename';\n    const featureTypes = `${paramTypename}=${paramsWFS.featureTypes}`;\n    const paramMaxFeatures = paramsWFS.version === versionWfs200 ? 'count' : 'maxFeatures';\n    let cnt = count\n        ? `${paramMaxFeatures}=${effectiveCount}`\n        : paramsWFS.maxFeatures\n            ? `${paramMaxFeatures}=${paramsWFS.maxFeatures}`\n            : `${paramMaxFeatures}=${effectiveCount}`;\n    if (forceDefaultOutputFormat) {\n        outputFormat = '';\n        version = 'version=1.1.0';\n        cnt = cnt.replace('count', 'maxFeatures');\n    }\n    const srs = epsg\n        ? `srsname=${epsgCode}`\n        : paramsWFS.srsName\n            ? 'srsname=' + paramsWFS.srsName\n            : `srsname=${epsgCode}`;\n    let propertyName = '';\n    let valueReference = '';\n    if (properties) {\n        propertyName = `propertyName=${properties}`;\n        valueReference = `valueReference=${properties}`;\n    }\n    const sourceFields = dataSourceOptions.sourceFields;\n    if (!propertyName && sourceFields && sourceFields.length > 0) {\n        const fieldsNames = [];\n        dataSourceOptions.sourceFields.forEach(sourcefield => {\n            fieldsNames.push(sourcefield.name);\n        });\n        propertyName = `propertyName=${fieldsNames.join(',')},${paramsWFS.fieldNameGeometry}`;\n    }\n    const getCapabilities = `${url}?service=WFS&request=GetCapabilities&${version}`;\n    let getFeature = `${url}?service=WFS&request=GetFeature&${version}&${featureTypes}&`;\n    getFeature += `${outputFormat}&${srs}&${cnt}&${propertyName}&${effectiveStartIndex}`;\n    let getpropertyvalue = `${url}?service=WFS&request=GetPropertyValue&version=${versionWfs200}&${featureTypes}&`;\n    getpropertyvalue += `&${cnt}&${valueReference}`;\n    return [\n        { name: 'outputformat', value: outputFormat },\n        { name: 'version', value: version },\n        { name: 'typename', value: featureTypes },\n        { name: 'count', value: cnt },\n        { name: 'srsname', value: srs },\n        { name: 'propertyname', value: propertyName },\n        { name: 'valuereference', value: valueReference },\n        { name: 'getcapabilities', value: getCapabilities.replace(/&&/g, '&') },\n        { name: 'getfeature', value: getFeature.replace(/&&/g, '&') },\n        { name: 'getpropertyvalue', value: getpropertyvalue.replace(/&&/g, '&') }\n    ];\n}\n/**\n * Validate/Modify layer's wfs options based on :\n * 1- an Openlayers's issue with GML provided from WFS. Refer to\n * https://github.com/openlayers/openlayers/pull/6400\n * 2- Set default values for optionals parameters.\n * @param wfsDataSourceOptions  WFSDataSourceOptions The common wfs datasource options interface\n * @returns An array array of {name: '', value: ''} of predefined query params.\n */\nfunction checkWfsParams(wfsDataSourceOptions, srcType) {\n    if (srcType && srcType === 'wfs') {\n        // reassignation of params to paramsWFS and url to urlWFS to have a common interface with wms-wfs datasources\n        wfsDataSourceOptions.paramsWFS = wfsDataSourceOptions.params;\n    }\n    const paramsWFS = wfsDataSourceOptions.paramsWFS;\n    wfsDataSourceOptions.urlWfs =\n        wfsDataSourceOptions.urlWfs || wfsDataSourceOptions.url;\n    paramsWFS.version = paramsWFS.version || defaultWfsVersion;\n    paramsWFS.fieldNameGeometry =\n        paramsWFS.fieldNameGeometry || defaultFieldNameGeometry;\n    paramsWFS.maxFeatures = paramsWFS.maxFeatures || defaultMaxFeatures;\n    let outputFormat;\n    if (paramsWFS.outputFormat) {\n        outputFormat = paramsWFS.outputFormat;\n    }\n    if (gmlRegex.test(outputFormat) || !outputFormat) {\n        paramsWFS.version = '1.1.0';\n    }\n    return Object.assign({}, wfsDataSourceOptions);\n}\nfunction getFormatFromOptions(options) {\n    const wfsOptions = options;\n    let olFormatCls = WFS;\n    const outputFormat = wfsOptions.paramsWFS.outputFormat\n        ? wfsOptions.paramsWFS.outputFormat\n        : undefined;\n    if (!outputFormat) {\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    if (olformat[outputFormat]) {\n        olFormatCls = olformat[outputFormat];\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('gml2')) {\n        olFormatCls = WFS;\n        return new olFormatCls(Object.assign(Object.assign({}, wfsOptions.formatOptions), { gmlFormat: olFormatGML2 }));\n    }\n    else if (outputFormat.toLowerCase().match('gml32')) {\n        olFormatCls = WFS;\n        return new olFormatCls(Object.assign(Object.assign({}, wfsOptions.formatOptions), { gmlFormat: olFormatGML32 }));\n    }\n    else if (outputFormat.toLowerCase().match('gml3')) {\n        olFormatCls = WFS;\n        return new olFormatCls(Object.assign(Object.assign({}, wfsOptions.formatOptions), { gmlFormat: olFormatGML3 }));\n    }\n    else if (outputFormat.toLowerCase().match('topojson')) {\n        olFormatCls = TopoJSON;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('geojson')) {\n        olFormatCls = GeoJSON;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('esrijson')) {\n        olFormatCls = EsriJSON;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('json')) {\n        olFormatCls = GeoJSON;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('gpx')) {\n        olFormatCls = GPX;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('WKT')) {\n        olFormatCls = WKT;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('osmxml')) {\n        olFormatCls = olFormatOSMXML;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    else if (outputFormat.toLowerCase().match('kml')) {\n        olFormatCls = KML;\n        return new olFormatCls(wfsOptions.formatOptions);\n    }\n    return new olFormatCls();\n}\n\nclass WFSDataSource extends DataSource {\n    constructor(options, wfsService, authInterceptor) {\n        super(checkWfsParams(options, 'wfs'));\n        this.options = options;\n        this.wfsService = wfsService;\n        this.authInterceptor = authInterceptor;\n        const ogcFilters = this.options.ogcFilters;\n        const fieldNameGeometry = this.options.paramsWFS.fieldNameGeometry || defaultFieldNameGeometry;\n        const ogcFilterWriter = new OgcFilterWriter();\n        this.options.ogcFilters =\n            ogcFilterWriter.defineOgcFiltersDefaultOptions(ogcFilters, fieldNameGeometry);\n        if (this.options.ogcFilters.enabled &&\n            this.options.ogcFilters.editable) {\n            this.wfsService.getSourceFieldsFromWFS(this.options);\n        }\n    }\n    createOlSource() {\n        const vectorSource = new OlVectorSource({\n            format: getFormatFromOptions(this.options),\n            loader: (extent, resolution, proj) => {\n                this.options.paramsWFS.srsName = this.options.paramsWFS.srsName || proj.getCode();\n                const url = this.buildUrl(extent, proj, this.options.ogcFilters);\n                let startIndex = 0;\n                if (this.options.paramsWFS.version === '2.0.0' &&\n                    this.options.paramsWFS.maxFeatures > defaultMaxFeatures) {\n                    const nbOfFeature = 1000;\n                    while (startIndex < this.options.paramsWFS.maxFeatures) {\n                        let alteredUrl = url.replace('count=' + this.options.paramsWFS.maxFeatures, 'count=' + nbOfFeature);\n                        alteredUrl = alteredUrl.replace('startIndex=0', '0');\n                        alteredUrl += '&startIndex=' + startIndex;\n                        alteredUrl.replace(/&&/g, '&');\n                        this.getFeatures(vectorSource, extent, alteredUrl, nbOfFeature);\n                        startIndex += nbOfFeature;\n                    }\n                }\n                else {\n                    this.getFeatures(vectorSource, extent, url, this.options.paramsWFS.maxFeatures);\n                }\n            },\n            strategy: bbox$1\n        });\n        return vectorSource;\n    }\n    getFeatures(vectorSource, extent, url, threshold) {\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n        this.authInterceptor.interceptXhr(xhr, url);\n        const onError = () => vectorSource.removeLoadedExtent(extent);\n        xhr.onerror = onError;\n        xhr.onload = () => {\n            if (xhr.status === 200) {\n                const features = vectorSource.getFormat().readFeatures(xhr.responseText);\n                // TODO Manage \"More feature\"\n                /*if (features.length === 0 || features.length < threshold ) {\n                  console.log('No more data to download at this resolution');\n                }*/\n                vectorSource.addFeatures(features);\n            }\n            else {\n                onError();\n            }\n        };\n        xhr.send();\n    }\n    buildUrl(extent, proj, ogcFilters) {\n        const paramsWFS = this.options.paramsWFS;\n        const queryStringValues = formatWFSQueryString(this.options, undefined, this.options.paramsWFS.srsName);\n        let igoFilters;\n        if (ogcFilters && ogcFilters.enabled) {\n            igoFilters = ogcFilters.filters;\n        }\n        const ogcFilterWriter = new OgcFilterWriter();\n        const filterOrBox = ogcFilterWriter.buildFilter(igoFilters, extent, proj, ogcFilters.geometryName, this.options);\n        let filterOrPush = ogcFilterWriter.handleOgcFiltersAppliedValue(this.options, ogcFilters.geometryName, extent, proj);\n        let prefix = 'filter';\n        if (!filterOrPush) {\n            prefix = 'bbox';\n            filterOrPush = extent.join(',') + ',' + proj.getCode();\n        }\n        paramsWFS.xmlFilter = ogcFilters.advancedOgcFilters ? filterOrBox : `${prefix}=${filterOrPush}`;\n        let baseUrl = queryStringValues.find(f => f.name === 'getfeature').value;\n        const patternFilter = /(filter|bbox)=.*/gi;\n        baseUrl = patternFilter.test(paramsWFS.xmlFilter) ? `${baseUrl}&${paramsWFS.xmlFilter}` : baseUrl;\n        this.options.download = Object.assign({}, this.options.download, { dynamicUrl: baseUrl });\n        return baseUrl.replace(/&&/g, '&');\n    }\n    onUnwatch() { }\n}\n\nclass WFSService extends DataService {\n    constructor(http) {\n        super();\n        this.http = http;\n    }\n    getData() {\n        console.log('This is defining a data service.');\n        return 'This is defining a data service.';\n    }\n    getSourceFieldsFromWFS(dataSourceOptions) {\n        if (!dataSourceOptions.sourceFields || dataSourceOptions.sourceFields.length === 0) {\n            dataSourceOptions.sourceFields = [];\n            this.defineFieldAndValuefromWFS(dataSourceOptions).subscribe(getfeatureSourceField => {\n                dataSourceOptions.sourceFields = getfeatureSourceField;\n            });\n        }\n        else {\n            this.defineFieldAndValuefromWFS(dataSourceOptions).subscribe(getfeatureSourceField => {\n                dataSourceOptions.sourceFields.forEach(sourcefield => {\n                    if (sourcefield.alias === undefined) {\n                        sourcefield.alias = sourcefield.name; // to allow only a list of sourcefield with names\n                    }\n                    if (sourcefield.values === undefined || sourcefield.values.length === 0) {\n                        sourcefield.values = getfeatureSourceField.find(sf => sf.name === sourcefield.name).values;\n                    }\n                });\n            });\n        }\n    }\n    wfsGetFeature(dataSourceOptions, nb = defaultMaxFeatures, epsgCode = defaultEpsg, propertyName, startIndex = 0, forceDefaultOutputFormat = false) {\n        const queryStringValues = formatWFSQueryString(dataSourceOptions, nb, epsgCode, propertyName, startIndex, forceDefaultOutputFormat);\n        const baseUrl = queryStringValues.find(f => f.name === 'getfeature').value;\n        const outputFormat = dataSourceOptions.paramsWFS.outputFormat;\n        if (forceDefaultOutputFormat || gmlRegex.test(outputFormat) || !outputFormat) {\n            return this.http.get(baseUrl, { responseType: 'text' });\n        }\n        else {\n            return this.http.get(baseUrl);\n        }\n    }\n    defineFieldAndValuefromWFS(dataSourceOptions) {\n        return new Observable(d => {\n            var _a;\n            const sourceFields = [];\n            let fieldList;\n            let fieldListWoGeom;\n            let fieldListWoGeomStr;\n            let olFormats;\n            let effectiveOlFormats;\n            olFormats = getFormatFromOptions(dataSourceOptions);\n            const gmlDataSourceOptions = JSON.parse(JSON.stringify(dataSourceOptions));\n            delete gmlDataSourceOptions.paramsWFS.outputFormat;\n            delete gmlDataSourceOptions.formatOptions;\n            effectiveOlFormats = getFormatFromOptions(gmlDataSourceOptions);\n            let sourceFieldsToRetrieveValues = (_a = dataSourceOptions.sourceFields) === null || _a === void 0 ? void 0 : _a.filter(f => !f.values).map(f => f.name);\n            // Validate if the service manage no outputformat (wfs 1.0.0 and GML is the default return)\n            this.wfsGetFeature(dataSourceOptions, 1, undefined, undefined, 0, true).pipe(concatMap(res => String(res).toLowerCase().includes('exception') ? of(false) : of(true)), concatMap(allowGml => {\n                // If the service return GML (return no exception)\n                return this.wfsGetFeature(dataSourceOptions, 1).pipe(concatMap(firstFeature => {\n                    const features = olFormats.readFeatures(firstFeature);\n                    fieldList = features[0].getKeys();\n                    if (dataSourceOptions.sourceFields || dataSourceOptions.sourceFields.length === 0) {\n                        sourceFieldsToRetrieveValues = fieldList;\n                    }\n                    fieldListWoGeom = fieldList.filter(field => sourceFieldsToRetrieveValues.includes(field) &&\n                        field !== features[0].getGeometryName() &&\n                        !field.match(/boundedby/gi));\n                    fieldListWoGeomStr = fieldListWoGeom.join(',');\n                    const processingArray = [];\n                    let startIndex = 0;\n                    // If the service do not allow gml return, dice the call in multiple\n                    // calls by increment of chunkSize with the original outputFormat\n                    if (!allowGml && dataSourceOptions.paramsWFS.version === '2.0.0' &&\n                        dataSourceOptions.paramsWFS.maxFeatures > defaultMaxFeatures) {\n                        const chunkSize = 1000;\n                        while (startIndex < dataSourceOptions.paramsWFS.maxFeatures) {\n                            processingArray.push(this.wfsGetFeature(dataSourceOptions, chunkSize, dataSourceOptions.paramsWFS.srsName, fieldListWoGeomStr, startIndex));\n                            startIndex += chunkSize;\n                        }\n                        effectiveOlFormats = olFormats;\n                    }\n                    else {\n                        processingArray.push(this.wfsGetFeature(dataSourceOptions, dataSourceOptions.paramsWFS.maxFeatures || defaultMaxFeatures, dataSourceOptions.paramsWFS.srsName, fieldListWoGeomStr, 0, true));\n                    }\n                    return combineLatest(processingArray);\n                }));\n            })).subscribe((results) => {\n                let mfeatures = [];\n                results.map((result) => {\n                    const loopFeatures = effectiveOlFormats.readFeatures(result);\n                    mfeatures = mfeatures.concat(loopFeatures);\n                });\n                this.built_properties_value(mfeatures).forEach(element => {\n                    sourceFields.push(element);\n                });\n                d.next(sourceFields);\n                d.complete();\n            });\n        });\n    }\n    built_properties_value(features) {\n        if (features.length === 0) {\n            return [];\n        }\n        const kv = Object.assign({}, features[0].getProperties());\n        delete kv[features[0].getGeometryName()];\n        delete kv.boundedBy;\n        const sourceFields = [];\n        for (const property in kv) {\n            if (kv.hasOwnProperty(property)) {\n                const fieldType = typeof features[0].get(property) === 'object'\n                    ? undefined\n                    : typeof features[0].get(property);\n                sourceFields.push({\n                    name: property,\n                    alias: property,\n                    type: fieldType,\n                    values: [kv[property]]\n                });\n            }\n        }\n        features.every((element) => {\n            const featureProperties = element.getProperties();\n            for (const key in featureProperties) {\n                if (featureProperties.hasOwnProperty(key) && key in kv) {\n                    sourceFields.filter(f => f.name === key).forEach(v => {\n                        if (v.values.indexOf(featureProperties[key]) === -1) {\n                            v.values.push(featureProperties[key]);\n                        }\n                    });\n                }\n            }\n            return true;\n        });\n        return sourceFields;\n    }\n}\nWFSService.ɵfac = function WFSService_Factory(t) { return new (t || WFSService)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient)); };\nWFSService.ɵprov = ɵɵdefineInjectable({ factory: function WFSService_Factory() { return new WFSService(ɵɵinject(HttpClient)); }, token: WFSService, providedIn: \"root\" });\nWFSService.ctorParameters = () => [\n    { type: HttpClient }\n];\n\nvar QueryFormat;\n(function (QueryFormat) {\n    QueryFormat[\"GML2\"] = \"gml2\";\n    QueryFormat[\"GML3\"] = \"gml3\";\n    QueryFormat[\"JSON\"] = \"json\";\n    QueryFormat[\"GEOJSON\"] = \"geojson\";\n    QueryFormat[\"GEOJSON2\"] = \"geojson2\";\n    QueryFormat[\"ESRIJSON\"] = \"esrijson\";\n    QueryFormat[\"TEXT\"] = \"text\";\n    QueryFormat[\"HTML\"] = \"html\";\n    QueryFormat[\"HTMLGML2\"] = \"htmlgml2\";\n})(QueryFormat || (QueryFormat = {}));\nvar QueryFormatMimeType;\n(function (QueryFormatMimeType) {\n    QueryFormatMimeType[\"GML2\"] = \"application/vnd.ogc.gml\";\n    QueryFormatMimeType[\"GML3\"] = \"application/vnd.ogc.gml/3.1.1\";\n    QueryFormatMimeType[\"JSON\"] = \"application/json\";\n    QueryFormatMimeType[\"GEOJSON\"] = \"application/geojson\";\n    QueryFormatMimeType[\"GEOJSON2\"] = \"geojson\";\n    QueryFormatMimeType[\"ESRIJSON\"] = \"application/json\";\n    QueryFormatMimeType[\"TEXT\"] = \"text/plain\";\n    QueryFormatMimeType[\"HTML\"] = \"text/html\";\n    QueryFormatMimeType[\"HTMLGML2\"] = \"text/html\";\n})(QueryFormatMimeType || (QueryFormatMimeType = {}));\nvar QueryHtmlTarget;\n(function (QueryHtmlTarget) {\n    QueryHtmlTarget[\"IFRAME\"] = \"iframe\";\n    QueryHtmlTarget[\"BLANK\"] = \"_blank\";\n})(QueryHtmlTarget || (QueryHtmlTarget = {}));\n\nclass WMSDataSource extends DataSource {\n    constructor(options, wfsService) {\n        super(options);\n        this.options = options;\n        this.wfsService = wfsService;\n        const sourceParams = options.params;\n        const dpi = sourceParams.DPI || 96;\n        sourceParams.DPI = dpi;\n        sourceParams.MAP_RESOLUTION = dpi;\n        sourceParams.FORMAT_OPTIONS = 'dpi:' + dpi;\n        if (options.refreshIntervalSec && options.refreshIntervalSec > 0) {\n            setInterval(() => {\n                this.refresh();\n            }, options.refreshIntervalSec * 1000); // Convert seconds to MS\n        }\n        let fieldNameGeometry = defaultFieldNameGeometry;\n        // ####   START if paramsWFS\n        if (options.paramsWFS) {\n            const wfsCheckup = checkWfsParams(options, 'wms');\n            ObjectUtils.mergeDeep(options.paramsWFS, wfsCheckup.paramsWFS);\n            fieldNameGeometry =\n                options.paramsWFS.fieldNameGeometry || fieldNameGeometry;\n            options.download = Object.assign({}, options.download, {\n                dynamicUrl: this.buildDynamicDownloadUrlFromParamsWFS(options)\n            });\n        } //  ####   END  if paramsWFS\n        if (!options.sourceFields || options.sourceFields.length === 0) {\n            options.sourceFields = [];\n        }\n        else {\n            options.sourceFields.forEach(sourceField => {\n                sourceField.alias = sourceField.alias\n                    ? sourceField.alias\n                    : sourceField.name;\n                // to allow only a list of sourcefield with names\n            });\n        }\n        const initOgcFilters = options\n            .ogcFilters;\n        const ogcFilterWriter = new OgcFilterWriter();\n        if (!initOgcFilters) {\n            options.ogcFilters = ogcFilterWriter.defineOgcFiltersDefaultOptions(initOgcFilters, fieldNameGeometry, 'wms');\n        }\n        else {\n            initOgcFilters.advancedOgcFilters = initOgcFilters.pushButtons\n                ? false\n                : true;\n        }\n        if (sourceParams.LAYERS.split(',').length > 1 &&\n            initOgcFilters &&\n            initOgcFilters.enabled) {\n            console.log('*******************************');\n            console.log('BE CAREFULL, YOUR WMS LAYERS (' +\n                sourceParams.LAYERS +\n                ') MUST SHARE THE SAME FIELDS TO ALLOW ogcFilters TO WORK !! ');\n            console.log('*******************************');\n        }\n        if (options.paramsWFS && initOgcFilters && initOgcFilters.enabled && initOgcFilters.editable) {\n            this.wfsService.getSourceFieldsFromWFS(options);\n        }\n        const filterQueryString = ogcFilterWriter.handleOgcFiltersAppliedValue(options, fieldNameGeometry);\n        sourceParams.FILTER = filterQueryString;\n    }\n    get params() {\n        return this.options.params;\n    }\n    get queryTitle() {\n        return this.options.queryTitle\n            ? this.options.queryTitle\n            : 'title';\n    }\n    get mapLabel() {\n        return this.options.mapLabel;\n    }\n    get queryHtmlTarget() {\n        return this.options.queryHtmlTarget\n            ? this.options.queryHtmlTarget\n            : QueryHtmlTarget.BLANK;\n    }\n    refresh() {\n        this.ol.updateParams({ igoRefresh: Math.random() });\n    }\n    buildDynamicDownloadUrlFromParamsWFS(asWFSDataSourceOptions) {\n        const queryStringValues = formatWFSQueryString(asWFSDataSourceOptions);\n        const downloadUrl = queryStringValues.find(f => f.name === 'getfeature')\n            .value;\n        return downloadUrl;\n    }\n    createOlSource() {\n        return new olSourceImageWMS(this.options);\n    }\n    getLegend(style, scale) {\n        let legend = super.getLegend();\n        if (legend.length > 0 && (style === undefined && !scale)) {\n            return legend;\n        }\n        const sourceParams = this.params;\n        let layers = [];\n        if (sourceParams.LAYERS !== undefined) {\n            layers = sourceParams.LAYERS.split(',');\n        }\n        const baseUrl = this.options.url.replace(/\\?$/, '');\n        const params = [\n            'REQUEST=GetLegendGraphic',\n            'SERVICE=WMS',\n            'FORMAT=image/png',\n            'SLD_VERSION=1.1.0',\n            `VERSION=${sourceParams.VERSION || '1.3.0'}`\n        ];\n        if (style !== undefined) {\n            params.push(`STYLE=${style}`);\n        }\n        if (scale !== undefined) {\n            params.push(`SCALE=${scale}`);\n        }\n        legend = layers.map((layer) => {\n            const separator = baseUrl.match(/\\?/) ? '&' : '?';\n            return {\n                url: `${baseUrl}${separator}${params.join('&')}&LAYER=${layer}`,\n                title: layers.length > 1 ? layer : undefined,\n                currentStyle: style === undefined ? undefined : style\n            };\n        });\n        return legend;\n    }\n    onUnwatch() { }\n}\n\nfunction createDefaultTileGrid(epsg) {\n    const projection = epsg ? get(epsg) : get('EPSG:3857');\n    const projectionExtent = projection.getExtent();\n    const size = getWidth(projectionExtent) / 256;\n    const resolutions = new Array(20);\n    const matrixIds = new Array(20);\n    for (let z = 0; z < 20; ++z) {\n        resolutions[z] = size / Math.pow(2, z);\n        matrixIds[z] = z;\n    }\n    return new olTileGridWMTS({\n        origin: getTopLeft(projectionExtent),\n        resolutions,\n        matrixIds\n    });\n}\n\nclass WMTSDataSource extends DataSource {\n    constructor(options) {\n        super(options);\n    }\n    createOlSource() {\n        const sourceOptions = Object.assign({\n            tileGrid: createDefaultTileGrid(this.options.projection)\n        }, this.options);\n        return new olSourceWMTS(sourceOptions);\n    }\n    onUnwatch() { }\n}\n\nclass CartoDataSource extends DataSource {\n    get params() {\n        return this.options.params;\n    }\n    get queryTitle() {\n        return this.options.queryTitle\n            ? this.options.queryTitle\n            : 'title';\n    }\n    get mapLabel() {\n        return this.options.mapLabel;\n    }\n    get queryHtmlTarget() {\n        return this.options.queryHtmlTarget\n            ? this.options.queryHtmlTarget\n            : QueryHtmlTarget.BLANK;\n    }\n    createOlSource() {\n        const crossOrigin = this.options.crossOrigin\n            ? this.options.crossOrigin\n            : 'anonymous';\n        const sourceOptions = Object.assign({\n            crossOrigin\n        }, this.options);\n        return new olSourceCarto(sourceOptions);\n    }\n    getLegend() {\n        const legend = super.getLegend();\n        if (legend.length > 0) {\n            return legend;\n        }\n        let htmlString = '<table>';\n        if (this.options.config.layers[0].legend != null) {\n            this.options.config.layers[0].legend.items.forEach(f => {\n                if (f.visible === true) {\n                    htmlString +=\n                        '<tr><td>' +\n                            '<p><font size=\"5\" color=\"' +\n                            f.value +\n                            '\"> &#9679</font></p></td>' +\n                            '<td>' +\n                            f.name +\n                            '</td></tr>';\n                }\n            });\n            htmlString += '</table>';\n            return [{ html: htmlString }];\n        }\n        else {\n            // Try to build the legend from the cartocss options\n            const layerOptions = this.options.config.layers[0].options;\n            // All available cartocss style options\n            const types = [\n                'polygon-fill:',\n                'marker-fill:',\n                'shield-fill:',\n                'building-fill:',\n                'line-color:'\n            ];\n            for (const oneType of types) {\n                if (layerOptions.cartocss.includes(oneType)) {\n                    const type = layerOptions.cartocss.split(oneType).pop();\n                    const color = type.substr(0, type.indexOf(';'));\n                    if (color.includes('ramp')) {\n                        const colors = color.split(', (')[1].split(',');\n                        const data = color.split(', (')[2].split(',');\n                        for (let j = 0; j < colors.length; j++) {\n                            colors[j] = colors[j].replace(/(\"|\\))/g, '');\n                            data[j] = data[j].replace(/(\"|\\))/g, '');\n                            if (data[j].replace(/\\s+/g, '') === '=') {\n                                data[j] = 'Autres';\n                            }\n                            htmlString +=\n                                '<tr><td>' +\n                                    '<p><font size=\"5\" color=\"' +\n                                    colors[j] +\n                                    '\"> &#9679</font></p></td>' +\n                                    '<td>' +\n                                    data[j] +\n                                    '</td></tr>';\n                        }\n                        break;\n                    }\n                    else {\n                        const title = layerOptions.layer_name\n                            ? layerOptions.layer_name\n                            : '';\n                        htmlString +=\n                            '<tr><td>' +\n                                '<p><font size=\"5\" color=\"' +\n                                color +\n                                '\"> &#9679</font></p>' +\n                                '</td><td>' +\n                                title +\n                                '</td></tr>';\n                        break;\n                    }\n                }\n            }\n            htmlString += '</table>';\n            return [{ html: htmlString }];\n        }\n    }\n    onUnwatch() { }\n}\n\nclass ArcGISRestDataSource extends DataSource {\n    createOlSource() {\n        const esrijsonFormat = new olFormatEsriJSON();\n        return new OlVectorSource({\n            attributions: this.options.params.attributions,\n            overlaps: false,\n            format: esrijsonFormat,\n            url: function (extent, resolution, proj) {\n                const baseUrl = this.options.url + '/' + this.options.layer + '/query/';\n                const geometry = encodeURIComponent('{\"xmin\":' +\n                    extent[0] +\n                    ',\"ymin\":' +\n                    extent[1] +\n                    ',\"xmax\":' +\n                    extent[2] +\n                    ',\"ymax\":' +\n                    extent[3] +\n                    ',\"spatialReference\":{\"wkid\":102100}}');\n                const params = [\n                    'f=json',\n                    `geometry=${geometry}`,\n                    'geometryType=esriGeometryEnvelope',\n                    'inSR=102100',\n                    'spatialRel=esriSpatialRelIntersects',\n                    'outFields=*',\n                    'returnGeometry=true',\n                    'outSR=102100'\n                ];\n                if (this.options.params.timeFilter) {\n                    const time = `time=${this.options.params.timeExtent}`;\n                    params.push(time);\n                }\n                if (this.options.params.customParams) {\n                    this.options.params.customParams.forEach(element => {\n                        params.push(element);\n                    });\n                }\n                return `${baseUrl}?${params.join('&')}`;\n            }.bind(this),\n            strategy: bbox$1\n        });\n    }\n    getLegend() {\n        const legendInfo = this.options.params.legendInfo;\n        const legend = super.getLegend();\n        if (legendInfo === undefined || legend.length > 0) {\n            return legend;\n        }\n        const id = parseInt(this.options.layer, 10);\n        const lyr = legendInfo.layers[id];\n        let htmlString = '<table><tr><td>' + lyr.layerName + '</td></tr>';\n        for (const lyrLegend of lyr.legend) {\n            const modifiedUrl = this.options.url.replace('FeatureServer', 'MapServer');\n            const src = `${modifiedUrl}/${lyr.layerId}/images/${lyrLegend.url}`;\n            const label = lyrLegend.label.replace('<Null>', 'Null');\n            htmlString +=\n                `<tr><td align='left'><img src=\"` +\n                    src +\n                    `\" alt ='' /></td><td>` +\n                    label +\n                    '</td></tr>';\n        }\n        htmlString += '</table>';\n        return [{ html: htmlString }];\n    }\n    onUnwatch() { }\n}\n\nclass TileArcGISRestDataSource extends DataSource {\n    get params() {\n        return this.options.params;\n    }\n    get queryTitle() {\n        return this.options.queryTitle\n            ? this.options.queryTitle\n            : 'title';\n    }\n    get mapLabel() {\n        return this.options.mapLabel;\n    }\n    get queryHtmlTarget() {\n        return this.options.queryHtmlTarget\n            ? this.options.queryHtmlTarget\n            : QueryHtmlTarget.BLANK;\n    }\n    createOlSource() {\n        return new olSourceTileArcGISRest(this.options);\n    }\n    getLegend() {\n        const legend = super.getLegend();\n        if (this.options.legendInfo === undefined || legend.length > 0) {\n            return legend;\n        }\n        const id = parseInt(this.options.layer, 10);\n        const lyr = this.options.legendInfo.layers[id];\n        let htmlString = '<table><tr><td>' + lyr.layerName + '</td></tr>';\n        for (const lyrLegend of lyr.legend) {\n            const src = `${this.options.url}/${lyr.layerId}/images/${lyrLegend.url}`;\n            const label = lyrLegend.label.replace('<Null>', 'Null');\n            htmlString +=\n                `<tr><td align='left'><img src=\"` +\n                    src +\n                    `\" alt ='' /></td><td>` +\n                    label +\n                    '</td></tr>';\n        }\n        htmlString += '</table>';\n        return [{ html: htmlString }];\n    }\n    onUnwatch() { }\n}\n\nclass WebSocketDataSource extends FeatureDataSource {\n    createOlSource() {\n        this.createWebSocket();\n        this.options.format = this.getSourceFormatFromOptions(this.options);\n        return super.createOlSource();\n    }\n    createWebSocket() {\n        this.ws = new WebSocket(this.options.url);\n        this.ws.onmessage = this.onMessage.bind(this);\n        if (this.options.onclose) {\n            this.ws.onclose = this.onClose.bind(this);\n        }\n        if (this.options.onerror) {\n            this.ws.onerror = this.onError.bind(this);\n        }\n        if (this.options.onopen) {\n            this.ws.onopen = this.onOpen.bind(this);\n        }\n    }\n    onMessage(event) {\n        const featureAdded = this.options.format.readFeature(event.data);\n        switch (this.options.onmessage) {\n            case 'update':\n                // ol don't add if same ID\n                const featureToRemove = this.ol.getFeatureById(featureAdded.getId());\n                if (featureToRemove) {\n                    this.ol.removeFeature(featureToRemove);\n                }\n                this.ol.addFeature(featureAdded);\n                break;\n            case 'delete':\n                this.ol.clear(true);\n                this.ol.addFeature(featureAdded);\n                break;\n            case 'add':\n            default:\n                this.ol.addFeature(featureAdded);\n        }\n    }\n    onClose(event) {\n        // thrown message to user\n    }\n    onError(event) {\n        // thrown message to user\n    }\n    onOpen(event) {\n        // thrown message to user ?\n    }\n    onUnwatch() {\n        this.ws.close();\n    }\n}\n\nclass MVTDataSource extends DataSource {\n    createOlSource() {\n        let mvtFormat;\n        if (this.options.featureClass === 'feature') {\n            mvtFormat = new olFormatMVT({ featureClass: olFeature });\n        }\n        else if (this.options.featureClass === undefined) {\n            mvtFormat = new olFormatMVT();\n        }\n        this.options.format = mvtFormat;\n        return new olSourceVectorTile(this.options);\n    }\n    generateId() {\n        if (!this.options.url) {\n            return uuid();\n        }\n        const chain = 'mvt' + this.options.url;\n        return Md5.hashStr(chain);\n    }\n    onUnwatch() { }\n}\n\nclass ClusterDataSource extends FeatureDataSource {\n    createOlSource() {\n        this.options.format = this.getSourceFormatFromOptions(this.options);\n        this.options.source = super.createOlSource();\n        return new olSourceCluster(this.options);\n    }\n    generateId() {\n        return uuid();\n    }\n    onUnwatch() { }\n}\n\nclass EsriStyleGenerator {\n    constructor() {\n        this._converters = {};\n        this._converters.esriPMS = EsriStyleGenerator._convertEsriPMS;\n        this._converters.esriSFS = EsriStyleGenerator._convertEsriSFS;\n        this._converters.esriSLS = EsriStyleGenerator._convertEsriSLS;\n        this._converters.esriSMS = EsriStyleGenerator._convertEsriSMS;\n        this._converters.esriTS = EsriStyleGenerator._convertEsriTS;\n        this._renderers = {};\n        this._renderers.uniqueValue = this._renderUniqueValue;\n        this._renderers.simple = this._renderSimple;\n        this._renderers.classBreaks = this._renderClassBreaks;\n    }\n    static _convertPointToPixel(point) {\n        return point / 0.75;\n    }\n    static _transformColor(color) {\n        // alpha channel is different, runs from 0-255 but in ol3 from 0-1\n        return [color[0], color[1], color[2], color[3] / 255];\n    }\n    static _getResolutionForScale(scale, units) {\n        const dpi = 96;\n        const mpu = METERS_PER_UNIT[units];\n        const inchesPerMeter = 39.3701;\n        return parseFloat(scale) / (mpu * inchesPerMeter * dpi);\n    }\n    /* convert an Esri Text Symbol */\n    static _convertEsriTS(symbol) {\n        const rotation = EsriStyleGenerator._transformAngle(symbol.angle);\n        const text = symbol.text !== undefined ? symbol.text : undefined;\n        return new Style({\n            text: new Text({\n                fill: new Fill({\n                    color: EsriStyleGenerator._transformColor(symbol.color)\n                }),\n                font: symbol.font.style +\n                    ' ' +\n                    symbol.font.weight +\n                    ' ' +\n                    symbol.font.size +\n                    ' px ' +\n                    symbol.font.family,\n                textBaseline: symbol.verticalAlignment,\n                textAlign: symbol.horizontalAlignment,\n                offsetX: EsriStyleGenerator._convertPointToPixel(symbol.xoffset),\n                offsetY: EsriStyleGenerator._convertPointToPixel(symbol.yoffset),\n                rotation,\n                text\n            })\n        });\n    }\n    /* convert an Esri Picture Marker Symbol */\n    static _convertEsriPMS(symbol) {\n        const src = 'data:' + symbol.contentType + ';base64, ' + symbol.imageData;\n        const rotation = EsriStyleGenerator._transformAngle(symbol.angle);\n        return new Style({\n            image: new Icon({\n                src,\n                rotation\n            })\n        });\n    }\n    /* convert an Esri Simple Fill Symbol */\n    static _convertEsriSFS(symbol) {\n        // there is no support in openlayers currently for fill patterns, so style is not interpreted\n        const fill = new Fill({\n            color: EsriStyleGenerator._transformColor(symbol.color)\n        });\n        const stroke = symbol.outline\n            ? EsriStyleGenerator._convertOutline(symbol.outline)\n            : undefined;\n        return new Style({\n            fill,\n            stroke\n        });\n    }\n    static _convertOutline(outline) {\n        let lineDash;\n        const color = EsriStyleGenerator._transformColor(outline.color);\n        if (outline.style === 'esriSLSDash') {\n            lineDash = [5];\n        }\n        else if (outline.style === 'esriSLSDashDot') {\n            lineDash = [5, 5, 1, 2];\n        }\n        else if (outline.style === 'esriSLSDashDotDot') {\n            lineDash = [5, 5, 1, 2, 1, 2];\n        }\n        else if (outline.style === 'esriSLSDot') {\n            lineDash = [1, 2];\n        }\n        else if (outline.style === 'esriSLSNull') {\n            // line not visible, make color fully transparent\n            color[3] = 0;\n        }\n        return new Stroke({\n            color,\n            lineDash,\n            width: EsriStyleGenerator._convertPointToPixel(outline.width)\n        });\n    }\n    /* convert an Esri Simple Line Symbol */\n    static _convertEsriSLS(symbol) {\n        return new Style({\n            stroke: EsriStyleGenerator._convertOutline(symbol)\n        });\n    }\n    static _transformAngle(angle) {\n        if (angle === 0 || angle === undefined) {\n            return undefined;\n        }\n        const normalRad = (angle * Math.PI) / 180;\n        const ol3Rad = -normalRad + Math.PI / 2;\n        if (ol3Rad < 0) {\n            return 2 * Math.PI + ol3Rad;\n        }\n        else {\n            return ol3Rad;\n        }\n    }\n    /* convert an Esri Simple Marker Symbol */\n    static _convertEsriSMS(symbol) {\n        const fill = new Fill({\n            color: EsriStyleGenerator._transformColor(symbol.color)\n        });\n        const stroke = symbol.outline\n            ? EsriStyleGenerator._convertOutline(symbol.outline)\n            : undefined;\n        const radius = EsriStyleGenerator._convertPointToPixel(symbol.size) / 2;\n        const rotation = EsriStyleGenerator._transformAngle(symbol.angle);\n        if (symbol.style === 'esriSMSCircle') {\n            return new Style({\n                image: new Circle({\n                    radius,\n                    fill,\n                    stroke\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSCross') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 4,\n                    radius,\n                    radius2: 0,\n                    angle: 0,\n                    rotation\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSDiamond') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 4,\n                    radius,\n                    rotation\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSSquare') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 4,\n                    radius,\n                    angle: Math.PI / 4,\n                    rotation\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSX') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 4,\n                    radius,\n                    radius2: 0,\n                    angle: Math.PI / 4,\n                    rotation\n                })\n            });\n        }\n        else if (symbol.style === 'esriSMSTriangle') {\n            return new Style({\n                image: new RegularShape({\n                    fill,\n                    stroke,\n                    points: 3,\n                    radius,\n                    angle: 0,\n                    rotation\n                })\n            });\n        }\n    }\n    _convertLabelingInfo(labelingInfo, mapUnits) {\n        const styles = [];\n        for (let i = 0, ii = labelingInfo.length; i < ii; ++i) {\n            const labelExpression = labelingInfo[i].labelExpression;\n            // only limited support for label expressions\n            const field = labelExpression.substr(labelExpression.indexOf('[') + 1, labelExpression.indexOf(']') - 1);\n            const symbol = labelingInfo[i].symbol;\n            const maxScale = labelingInfo[i].maxScale;\n            const minScale = labelingInfo[i].minScale;\n            let minResolution = null;\n            if (maxScale !== 0) {\n                minResolution = EsriStyleGenerator._getResolutionForScale(maxScale, mapUnits);\n            }\n            let maxResolution = null;\n            if (minScale !== 0) {\n                maxResolution = EsriStyleGenerator._getResolutionForScale(minScale, mapUnits);\n            }\n            const style = this._converters[symbol.type].call(this, symbol);\n            styles.push((() => {\n                return function (feature, resolution) {\n                    let visible = true;\n                    if (this.minResolution !== null && this.maxResolution !== null) {\n                        visible =\n                            resolution < this.maxResolution &&\n                                resolution >= this.minResolution;\n                    }\n                    else if (this.minResolution !== null) {\n                        visible = resolution >= this.minResolution;\n                    }\n                    else if (this.maxResolution !== null) {\n                        visible = resolution < this.maxResolution;\n                    }\n                    if (visible) {\n                        const value = feature.get(this.field);\n                        this.style.getText().setText(value);\n                        return [this.style];\n                    }\n                };\n            })().bind({\n                minResolution,\n                maxResolution,\n                field,\n                style\n            }));\n        }\n        return styles;\n    }\n    _renderSimple(renderer) {\n        const style = this._converters[renderer.symbol.type].call(this, renderer.symbol);\n        return (() => {\n            return () => {\n                return [style];\n            };\n        })();\n    }\n    _renderClassBreaks(renderer) {\n        const defaultSymbol = renderer.defaultSymbol;\n        const defaultStyle = this._converters[defaultSymbol.type].call(this, defaultSymbol);\n        const field = renderer.field;\n        const classes = [];\n        for (let i = 0, ii = renderer.classBreakInfos.length; i < ii; ++i) {\n            const classBreakInfo = renderer.classBreakInfos[i];\n            let min;\n            if (classBreakInfo.classMinValue === null ||\n                classBreakInfo.classMinValue === undefined) {\n                if (i === 0) {\n                    min = renderer.minValue;\n                }\n                else {\n                    min = renderer.classBreakInfos[i - 1].classMaxValue;\n                }\n            }\n            else {\n                min = classBreakInfo.classMinValue;\n            }\n            const max = classBreakInfo.classMaxValue;\n            const symbol = classBreakInfo.symbol;\n            const style = this._converters[symbol.type].call(this, symbol);\n            classes.push({ min, max, style });\n        }\n        return (() => {\n            return (feature) => {\n                const value = feature.get(field);\n                for (let i = 0, ii = classes.length; i < ii; ++i) {\n                    let condition;\n                    if (i === 0) {\n                        condition = value >= classes[i].min && value <= classes[i].max;\n                    }\n                    else {\n                        condition = value > classes[i].min && value <= classes[i].max;\n                    }\n                    if (condition) {\n                        return [classes[i].style];\n                    }\n                }\n                return [defaultStyle];\n            };\n        })();\n    }\n    _renderUniqueValue(renderer) {\n        const defaultSymbol = renderer.defaultSymbol;\n        let defaultStyle = [];\n        if (defaultSymbol) {\n            defaultStyle = [\n                this._converters[defaultSymbol.type].call(this, defaultSymbol)\n            ];\n        }\n        const field = renderer.field1;\n        const infos = renderer.uniqueValueInfos;\n        const me = this;\n        return (() => {\n            const hash = {};\n            for (let i = 0, ii = infos.length; i < ii; ++i) {\n                const info = infos[i];\n                const symbol = info.symbol;\n                hash[info.value] = [me._converters[symbol.type].call(me, symbol)];\n            }\n            return (feature) => {\n                const style = hash[feature.get(field)];\n                return style ? style : defaultStyle;\n            };\n        })();\n    }\n    generateStyle(layerInfo, mapUnits) {\n        const drawingInfo = layerInfo.drawingInfo;\n        let styleFunctions = [];\n        const drawingInfoStyle = this._renderers[drawingInfo.renderer.type].call(this, drawingInfo.renderer);\n        if (drawingInfoStyle !== undefined) {\n            styleFunctions.push(drawingInfoStyle);\n        }\n        if (layerInfo.labelingInfo) {\n            const labelingInfoStyleFunctions = this._convertLabelingInfo(layerInfo.labelingInfo, mapUnits);\n            styleFunctions = styleFunctions.concat(labelingInfoStyleFunctions);\n        }\n        if (styleFunctions.length === 1) {\n            return styleFunctions[0];\n        }\n        else {\n            return (() => {\n                return (feature, resolution) => {\n                    let styles = [];\n                    for (let i = 0, ii = styleFunctions.length; i < ii; ++i) {\n                        const result = styleFunctions[i].call(null, feature, resolution);\n                        if (result) {\n                            styles = styles.concat(result);\n                        }\n                    }\n                    return styles;\n                };\n            })();\n        }\n    }\n}\n\nvar TimeFilterType;\n(function (TimeFilterType) {\n    TimeFilterType[\"DATE\"] = \"date\";\n    TimeFilterType[\"TIME\"] = \"time\";\n    TimeFilterType[\"DATETIME\"] = \"datetime\";\n    TimeFilterType[\"YEAR\"] = \"year\";\n})(TimeFilterType || (TimeFilterType = {}));\nvar TimeFilterStyle;\n(function (TimeFilterStyle) {\n    TimeFilterStyle[\"CALENDAR\"] = \"calendar\";\n    TimeFilterStyle[\"SLIDER\"] = \"slider\";\n})(TimeFilterStyle || (TimeFilterStyle = {}));\n\nvar TypeCapabilities;\n(function (TypeCapabilities) {\n    TypeCapabilities[\"wms\"] = \"wms\";\n    TypeCapabilities[\"wmts\"] = \"wmts\";\n    TypeCapabilities[\"arcgisrest\"] = \"esriJSON\";\n})(TypeCapabilities || (TypeCapabilities = {}));\nclass CapabilitiesService {\n    constructor(http) {\n        this.http = http;\n        this.parsers = {\n            wms: new WMSCapabilities(),\n            wmts: new WMTSCapabilities(),\n            esriJSON: new EsriJSON()\n        };\n    }\n    getWMSOptions(baseOptions) {\n        const url = baseOptions.url;\n        const version = baseOptions.params.VERSION;\n        return this.getCapabilities('wms', url, version).pipe(map((capabilities) => {\n            return capabilities\n                ? this.parseWMSOptions(baseOptions, capabilities)\n                : undefined;\n        }));\n    }\n    getWMTSOptions(baseOptions) {\n        const url = baseOptions.url;\n        const version = baseOptions.version;\n        const options = this.getCapabilities('wmts', url, version).pipe(map((capabilities) => {\n            return capabilities\n                ? this.parseWMTSOptions(baseOptions, capabilities)\n                : undefined;\n        }));\n        return options;\n    }\n    getCartoOptions(baseOptions) {\n        const baseUrl = 'https://' +\n            baseOptions.account +\n            '.carto.com/api/v2/viz/' +\n            baseOptions.mapId +\n            '/viz.json';\n        return this.http\n            .jsonp(baseUrl, 'callback')\n            .pipe(map((cartoOptions) => this.parseCartoOptions(baseOptions, cartoOptions)));\n    }\n    getArcgisOptions(baseOptions) {\n        const baseUrl = baseOptions.url + '/' + baseOptions.layer + '?f=json';\n        const modifiedUrl = baseOptions.url.replace('FeatureServer', 'MapServer');\n        const legendUrl = modifiedUrl + '/legend?f=json';\n        const arcgisOptions = this.http.get(baseUrl);\n        const legend = this.http.get(legendUrl).pipe(map((res) => res), catchError((err) => {\n            console.log('No legend associated with this Feature Service');\n            return of(err);\n        }));\n        return forkJoin([arcgisOptions, legend]).pipe(map((res) => {\n            return this.parseArcgisOptions(baseOptions, res[0], res[1]);\n        }));\n    }\n    getTileArcgisOptions(baseOptions) {\n        const baseUrl = baseOptions.url + '/' + baseOptions.layer + '?f=json';\n        const legendUrl = baseOptions.url + '/legend?f=json';\n        const arcgisOptions = this.http.get(baseUrl);\n        const legendInfo = this.http.get(legendUrl);\n        return forkJoin([arcgisOptions, legendInfo]).pipe(map((res) => this.parseTileArcgisOptions(baseOptions, res[0], res[1])));\n    }\n    getCapabilities(service, baseUrl, version) {\n        const params = new HttpParams({\n            fromObject: {\n                request: 'GetCapabilities',\n                service: service.toUpperCase(),\n                version: version || '1.3.0',\n                _i: 'true'\n            }\n        });\n        let request;\n        if (service === 'esriJSON') {\n            request = this.http.get(baseUrl + '?f=json');\n        }\n        else {\n            request = this.http.get(baseUrl, {\n                params,\n                responseType: 'text'\n            });\n        }\n        return request.pipe(map((res) => {\n            if (service === 'esriJSON') {\n                return res;\n            }\n            if (String(res).toLowerCase().includes('serviceexception') &&\n                String(res).toLowerCase().includes('access denied')) {\n                throw {\n                    error: {\n                        message: 'Service error getCapabilities: Access is denied'\n                    }\n                };\n            }\n            else {\n                return this.parsers[service].read(res);\n            }\n        }), catchError((e) => {\n            if (typeof e.error !== 'undefined') {\n                e.error.caught = true;\n            }\n            throw e;\n        }));\n    }\n    parseWMSOptions(baseOptions, capabilities) {\n        const layers = baseOptions.params.LAYERS;\n        const layer = this.findDataSourceInCapabilities(capabilities.Capability.Layer, layers);\n        if (!layer) {\n            throw {\n                error: {\n                    message: 'Layer not found'\n                }\n            };\n        }\n        const metadata = layer.DataURL ? layer.DataURL[0] : undefined;\n        const abstract = layer.Abstract ? layer.Abstract : undefined;\n        const keywordList = layer.KeywordList ? layer.KeywordList : undefined;\n        let queryable = layer.queryable;\n        const timeFilter = this.getTimeFilter(layer);\n        const timeFilterable = timeFilter && Object.keys(timeFilter).length > 0;\n        const legendOptions = layer.Style ? this.getStyle(layer.Style) : undefined;\n        let queryFormat;\n        const queryFormatMimeTypePriority = [\n            QueryFormatMimeType.GEOJSON,\n            QueryFormatMimeType.GEOJSON2,\n            QueryFormatMimeType.GML3,\n            QueryFormatMimeType.GML2,\n            QueryFormatMimeType.JSON,\n            QueryFormatMimeType.HTML\n        ];\n        for (const mimeType of queryFormatMimeTypePriority) {\n            if (capabilities.Capability.Request.GetFeatureInfo.Format.indexOf(mimeType) !== -1) {\n                const keyEnum = Object.keys(QueryFormatMimeType).find((key) => QueryFormatMimeType[key] === mimeType);\n                queryFormat = QueryFormat[keyEnum];\n                break;\n            }\n        }\n        if (!queryFormat) {\n            queryable = false;\n        }\n        const options = ObjectUtils.removeUndefined({\n            _layerOptionsFromSource: {\n                title: layer.Title,\n                maxResolution: getResolutionFromScale(layer.MaxScaleDenominator),\n                minResolution: getResolutionFromScale(layer.MinScaleDenominator),\n                metadata: {\n                    url: metadata ? metadata.OnlineResource : undefined,\n                    extern: metadata ? true : undefined,\n                    abstract,\n                    keywordList\n                },\n                legendOptions\n            },\n            queryable,\n            queryFormat,\n            timeFilterable: timeFilterable ? true : undefined,\n            minDate: timeFilterable ? timeFilter.min : undefined,\n            maxDate: timeFilterable ? timeFilter.max : undefined,\n            stepDate: timeFilterable ? timeFilter.step : undefined\n        });\n        return ObjectUtils.mergeDeep(options, baseOptions);\n    }\n    parseWMTSOptions(baseOptions, capabilities) {\n        // Put Title source in _layerOptionsFromSource. (For source & catalog in _layerOptionsFromSource, if not already on config)\n        const layer = capabilities.Contents.Layer.find((el) => el.Identifier === baseOptions.layer);\n        const options = optionsFromCapabilities(capabilities, baseOptions);\n        const ouputOptions = Object.assign(options, baseOptions);\n        const sourceOptions = ObjectUtils.removeUndefined({\n            _layerOptionsFromSource: {\n                title: layer.Title\n            }\n        });\n        return ObjectUtils.mergeDeep(sourceOptions, ouputOptions);\n    }\n    parseCartoOptions(baseOptions, cartoOptions) {\n        const layers = [];\n        const params = cartoOptions.layers[1].options.layer_definition;\n        params.layers.forEach((element) => {\n            layers.push({\n                type: element.type.toLowerCase(),\n                options: element.options,\n                legend: element.legend\n            });\n        });\n        const options = ObjectUtils.removeUndefined({\n            config: {\n                version: params.version,\n                layers\n            }\n        });\n        return ObjectUtils.mergeDeep(options, baseOptions);\n    }\n    parseArcgisOptions(baseOptions, arcgisOptions, legend) {\n        const title = arcgisOptions.name;\n        const legendInfo = legend.layers ? legend : undefined;\n        const styleGenerator = new EsriStyleGenerator();\n        const units = arcgisOptions.units === 'esriMeters' ? 'm' : 'degrees';\n        const style = styleGenerator.generateStyle(arcgisOptions, units);\n        const attributions = new olAttribution({\n            html: arcgisOptions.copyrightText\n        });\n        let timeExtent;\n        let timeFilter;\n        if (arcgisOptions.timeInfo) {\n            const time = arcgisOptions.timeInfo.timeExtent;\n            timeExtent = time[0] + ',' + time[1];\n            const min = new Date();\n            min.setTime(time[0]);\n            const max = new Date();\n            max.setTime(time[1]);\n            timeFilter = {\n                min: min.toUTCString(),\n                max: max.toUTCString(),\n                range: true,\n                type: TimeFilterType.DATETIME,\n                style: TimeFilterStyle.CALENDAR\n            };\n        }\n        const params = Object.assign({}, {\n            legendInfo,\n            style,\n            timeFilter,\n            timeExtent,\n            attributions\n        });\n        const options = ObjectUtils.removeUndefined({\n            params,\n            _layerOptionsFromSource: {\n                title\n            }\n        });\n        return ObjectUtils.mergeDeep(options, baseOptions);\n    }\n    parseTileArcgisOptions(baseOptions, arcgisOptions, legend) {\n        const legendInfo = legend.layers ? legend : undefined;\n        const attributions = new olAttribution({\n            html: arcgisOptions.copyrightText\n        });\n        let timeExtent;\n        let timeFilter;\n        if (arcgisOptions.timeInfo) {\n            const time = arcgisOptions.timeInfo.timeExtent;\n            timeExtent = time[0] + ',' + time[1];\n            const min = new Date();\n            min.setTime(time[0]);\n            const max = new Date();\n            max.setTime(time[1]);\n            timeFilter = {\n                min: min.toUTCString(),\n                max: max.toUTCString(),\n                range: true,\n                type: TimeFilterType.DATETIME,\n                style: TimeFilterStyle.CALENDAR\n            };\n        }\n        const params = Object.assign({}, {\n            layers: 'show:' + baseOptions.layer,\n            time: timeExtent\n        });\n        const options = ObjectUtils.removeUndefined({\n            params,\n            legendInfo,\n            timeFilter,\n            attributions\n        });\n        return ObjectUtils.mergeDeep(options, baseOptions);\n    }\n    findDataSourceInCapabilities(layerArray, name) {\n        if (Array.isArray(layerArray)) {\n            let layer;\n            layerArray.find((value) => {\n                layer = this.findDataSourceInCapabilities(value, name);\n                return layer !== undefined;\n            }, this);\n            return layer;\n        }\n        else if (layerArray.Layer) {\n            return this.findDataSourceInCapabilities(layerArray.Layer, name);\n        }\n        else {\n            if (layerArray.Name && layerArray.Name === name) {\n                return layerArray;\n            }\n            return undefined;\n        }\n    }\n    getTimeFilter(layer) {\n        let dimension;\n        if (layer.Dimension) {\n            const timeFilter = {};\n            dimension = layer.Dimension[0];\n            if (dimension.values) {\n                const minMaxDim = dimension.values.split('/');\n                timeFilter.min = minMaxDim[0] !== undefined ? minMaxDim[0] : undefined;\n                timeFilter.max = minMaxDim[1] !== undefined ? minMaxDim[1] : undefined;\n                timeFilter.step = minMaxDim[2] !== undefined ? minMaxDim[2] : undefined;\n            }\n            if (dimension.default) {\n                timeFilter.value = dimension.default;\n            }\n            return timeFilter;\n        }\n    }\n    getStyle(Style) {\n        const styleOptions = Style.map((style) => {\n            return {\n                name: style.Name,\n                title: style.Title\n            };\n        })\n            // Handle repeat the style \"default\" in output  (MapServer or OpenLayer)\n            .filter((item, index, self) => self.findIndex((i) => i.name === item.name) ===\n            index);\n        const legendOptions = {\n            stylesAvailable: styleOptions\n        };\n        return legendOptions;\n    }\n}\nCapabilitiesService.ɵfac = function CapabilitiesService_Factory(t) { return new (t || CapabilitiesService)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient)); };\nCapabilitiesService.ɵprov = ɵɵdefineInjectable({ factory: function CapabilitiesService_Factory() { return new CapabilitiesService(ɵɵinject(HttpClient)); }, token: CapabilitiesService, providedIn: \"root\" });\nCapabilitiesService.ctorParameters = () => [\n    { type: HttpClient }\n];\n__decorate([\n    Cacheable({\n        maxCacheCount: 20\n    }),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, String, String]),\n    __metadata(\"design:returntype\", Observable)\n], CapabilitiesService.prototype, \"getCapabilities\", null);\n\nclass OptionsService {\n}\n\n/**\n * When injected, this service automatically registers and\n * projection defined in the application config. A custom projection\n * needs to be registered to be usable by OL.\n */\nclass ProjectionService {\n    constructor(config) {\n        this.config = config;\n        const projections = this.config.getConfig('projections') || [];\n        projections.forEach((projection) => {\n            projection.alias = projection.alias ? projection.alias : projection.code;\n            this.registerProjection(projection);\n        });\n        // register all utm zones\n        for (let utmZone = 1; utmZone < 61; utmZone++) {\n            const code = utmZone < 10 ? `EPSG:3260${utmZone}` : `EPSG:326${utmZone}`;\n            const def = `+proj=utm +zone=${utmZone} +datum=WGS84 +units=m +no_defs`;\n            const proj = { code, def, extent: undefined };\n            this.registerProjection(proj);\n        }\n        // register all mtm zones\n        for (let mtmZone = 1; mtmZone < 11; mtmZone++) {\n            const code = mtmZone < 10 ? `EPSG:3218${mtmZone}` : `EPSG:321${80 + mtmZone}`;\n            let lon0;\n            if (Number(mtmZone) <= 2) {\n                lon0 = -50 - Number(mtmZone) * 3;\n            }\n            else if (Number(mtmZone) >= 12) {\n                lon0 = -81 - (Number(mtmZone) - 12) * 3;\n            }\n            else {\n                lon0 = -49.5 - Number(mtmZone) * 3;\n            }\n            const def = `+proj=tmerc +lat_0=0 +lon_0=${lon0} +k=0.9999 +x_0=304800 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\"`;\n            const proj = { code, def, extent: undefined };\n            this.registerProjection(proj);\n        }\n    }\n    /**\n     * Define a proj4 projection and register it in OL\n     * @param projection Projection\n     */\n    registerProjection(projection) {\n        proj4.defs(projection.code, projection.def);\n        register(proj4);\n        if (projection.extent) {\n            get(projection.code).setExtent(projection.extent);\n        }\n    }\n}\nProjectionService.ɵfac = function ProjectionService_Factory(t) { return new (t || ProjectionService)(ɵngcc0.ɵɵinject(ɵngcc7.ConfigService)); };\nProjectionService.ɵprov = ɵɵdefineInjectable({ factory: function ProjectionService_Factory() { return new ProjectionService(ɵɵinject(ConfigService)); }, token: ProjectionService, providedIn: \"root\" });\nProjectionService.ctorParameters = () => [\n    { type: ConfigService }\n];\n\nclass DataSourceService {\n    constructor(capabilitiesService, optionsService, wfsDataSourceService, languageService, messageService, projectionService, authInterceptor) {\n        this.capabilitiesService = capabilitiesService;\n        this.optionsService = optionsService;\n        this.wfsDataSourceService = wfsDataSourceService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.projectionService = projectionService;\n        this.authInterceptor = authInterceptor;\n        this.datasources$ = new BehaviorSubject([]);\n    }\n    createAsyncDataSource(context) {\n        if (!context.type) {\n            console.error(context);\n            throw new Error('Datasource needs a type');\n        }\n        let dataSource;\n        switch (context.type.toLowerCase()) {\n            case 'osm':\n                dataSource = this.createOSMDataSource(context);\n                break;\n            case 'vector':\n                dataSource = this.createFeatureDataSource(context);\n                break;\n            case 'wfs':\n                dataSource = this.createWFSDataSource(context);\n                break;\n            case 'wms':\n                const wmsContext = context;\n                ObjectUtils.removeDuplicateCaseInsensitive(wmsContext.params);\n                dataSource = this.createWMSDataSource(wmsContext);\n                break;\n            case 'wmts':\n                dataSource = this.createWMTSDataSource(context);\n                break;\n            case 'xyz':\n                dataSource = this.createXYZDataSource(context);\n                break;\n            case 'carto':\n                dataSource = this.createCartoDataSource(context);\n                break;\n            case 'arcgisrest':\n                dataSource = this.createArcGISRestDataSource(context);\n                break;\n            case 'websocket':\n                dataSource = this.createWebSocketDataSource(context);\n                break;\n            case 'mvt':\n                dataSource = this.createMVTDataSource(context);\n                break;\n            case 'tilearcgisrest':\n                dataSource = this.createTileArcGISRestDataSource(context);\n                break;\n            case 'cluster':\n                dataSource = this.createClusterDataSource(context);\n                break;\n            default:\n                console.error(context);\n                throw new Error('Invalid datasource type');\n        }\n        this.datasources$.next(this.datasources$.value.concat([dataSource]));\n        return dataSource;\n    }\n    createOSMDataSource(context) {\n        return new Observable(d => d.next(new OSMDataSource(context)));\n    }\n    createFeatureDataSource(context) {\n        return new Observable(d => d.next(new FeatureDataSource(context)));\n    }\n    createWebSocketDataSource(context) {\n        return new Observable(d => d.next(new WebSocketDataSource(context)));\n    }\n    createWFSDataSource(context) {\n        return new Observable(d => d.next(new WFSDataSource(context, this.wfsDataSourceService, this.authInterceptor)));\n    }\n    createWMSDataSource(context) {\n        const observables = [];\n        if (context.optionsFromCapabilities) {\n            observables.push(this.capabilitiesService.getWMSOptions(context).pipe(catchError(e => {\n                const title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n                const message = this.languageService.translate.instant('igo.geo.dataSource.unavailable', { value: context.params.LAYERS });\n                this.messageService.error(message, title);\n                throw e;\n            })));\n        }\n        if (this.optionsService && context.optionsFromApi === true) {\n            observables.push(this.optionsService.getWMSOptions(context).pipe(catchError(e => {\n                e.error.toDisplay = true;\n                e.error.title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n                e.error.message = this.languageService.translate.instant('igo.geo.dataSource.optionsApiUnavailable');\n                return of({});\n            })));\n        }\n        observables.push(of(context));\n        return forkJoin(observables).pipe(map((options) => {\n            const optionsMerged = options.reduce((a, b) => ObjectUtils.mergeDeep(a, b));\n            return new WMSDataSource(optionsMerged, this.wfsDataSourceService);\n        }), catchError(() => {\n            return of(undefined);\n        }));\n    }\n    createWMTSDataSource(context) {\n        if (context.optionsFromCapabilities) {\n            return this.capabilitiesService.getWMTSOptions(context).pipe(map((options) => {\n                return options ? new WMTSDataSource(options) : undefined;\n            }), catchError(() => {\n                const title = this.languageService.translate.instant('igo.geo.dataSource.unavailableTitle');\n                const message = this.languageService.translate.instant('igo.geo.dataSource.unavailable', { value: context.layer });\n                this.messageService.error(message, title);\n                return of(undefined);\n            }));\n        }\n        return new Observable(d => d.next(new WMTSDataSource(context)));\n    }\n    createXYZDataSource(context) {\n        return new Observable(d => d.next(new XYZDataSource(context)));\n    }\n    createCartoDataSource(context) {\n        if (context.mapId) {\n            return this.capabilitiesService\n                .getCartoOptions(context)\n                .pipe(map((options) => new CartoDataSource(options)));\n        }\n        return new Observable(d => d.next(new CartoDataSource(context)));\n    }\n    createArcGISRestDataSource(context) {\n        return this.capabilitiesService\n            .getArcgisOptions(context)\n            .pipe(map((options) => new ArcGISRestDataSource(options)));\n    }\n    createTileArcGISRestDataSource(context) {\n        return this.capabilitiesService\n            .getTileArcgisOptions(context)\n            .pipe(map((options) => new TileArcGISRestDataSource(options)));\n    }\n    createMVTDataSource(context) {\n        return new Observable(d => d.next(new MVTDataSource(context)));\n    }\n    createClusterDataSource(context) {\n        return new Observable(d => d.next(new ClusterDataSource(context)));\n    }\n}\nDataSourceService.ɵfac = function DataSourceService_Factory(t) { return new (t || DataSourceService)(ɵngcc0.ɵɵinject(CapabilitiesService), ɵngcc0.ɵɵinject(OptionsService, 8), ɵngcc0.ɵɵinject(WFSService), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject(ɵngcc7.MessageService), ɵngcc0.ɵɵinject(ProjectionService), ɵngcc0.ɵɵinject(ɵngcc8.AuthInterceptor)); };\nDataSourceService.ɵprov = ɵɵdefineInjectable({ factory: function DataSourceService_Factory() { return new DataSourceService(ɵɵinject(CapabilitiesService), ɵɵinject(OptionsService, 8), ɵɵinject(WFSService), ɵɵinject(LanguageService), ɵɵinject(MessageService), ɵɵinject(ProjectionService), ɵɵinject(AuthInterceptor)); }, token: DataSourceService, providedIn: \"root\" });\nDataSourceService.ctorParameters = () => [\n    { type: CapabilitiesService },\n    { type: OptionsService, decorators: [{ type: Optional }] },\n    { type: WFSService },\n    { type: LanguageService },\n    { type: MessageService },\n    { type: ProjectionService },\n    { type: AuthInterceptor }\n];\n\nclass OptionsApiService extends OptionsService {\n    constructor(http, options = {}) {\n        super();\n        this.http = http;\n        this.urlApi = options.url || this.urlApi;\n    }\n    getWMSOptions(baseOptions) {\n        if (!this.urlApi) {\n            return of({});\n        }\n        const params = new HttpParams({\n            fromObject: {\n                type: baseOptions.type,\n                url: baseOptions.url,\n                layers: baseOptions.params.LAYERS\n            }\n        });\n        const request = this.http.get(this.urlApi, {\n            params\n        });\n        return request.pipe(map((res) => {\n            if (!res || !res.sourceOptions) {\n                return {};\n            }\n            res.sourceOptions._layerOptionsFromSource = res.layerOptions;\n            return res.sourceOptions;\n        }));\n    }\n}\nOptionsApiService.ɵfac = function OptionsApiService_Factory(t) { return new (t || OptionsApiService)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject('options')); };\nOptionsApiService.ɵprov = ɵɵdefineInjectable({ factory: function OptionsApiService_Factory() { return new OptionsApiService(ɵɵinject(HttpClient), ɵɵinject(\"options\")); }, token: OptionsApiService, providedIn: \"root\" });\nOptionsApiService.ctorParameters = () => [\n    { type: HttpClient },\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] }\n];\n\nfunction optionsApiFactory(http, configService) {\n    return new OptionsApiService(http, configService.getConfig('optionsApi'));\n}\nfunction provideOptionsApi() {\n    return {\n        provide: OptionsService,\n        useFactory: optionsApiFactory,\n        deps: [HttpClient, ConfigService]\n    };\n}\n\nvar TooltipType;\n(function (TooltipType) {\n    TooltipType[\"TITLE\"] = \"title\";\n    TooltipType[\"ABSTRACT\"] = \"abstract\";\n    TooltipType[\"CUSTOM\"] = \"custom\";\n})(TooltipType || (TooltipType = {}));\n\nclass ImageWatcher extends Watcher {\n    constructor(layer) {\n        super();\n        this.loaded = 0;\n        this.loading = 0;\n        this.source = layer.options.source.ol;\n        this.id = uuid();\n    }\n    watch() {\n        this.source.on(`imageloadstart`, e => this.handleLoadStart(e));\n        this.source.on(`imageloadend`, e => this.handleLoadEnd(e));\n        this.source.on(`imageloaderror`, e => this.handleLoadEnd(e));\n    }\n    unwatch() {\n        this.source.un(`imageloadstart`, e => this.handleLoadStart(e));\n        this.source.un(`imageloadend`, e => this.handleLoadEnd(e));\n        this.source.un(`imageloaderror`, e => this.handleLoadEnd(e));\n    }\n    handleLoadStart(event) {\n        if (!event.image.__watchers__) {\n            event.image.__watchers__ = [];\n        }\n        event.image.__watchers__.push(this.id);\n        this.loading += 1;\n        this.status = SubjectStatus.Working;\n    }\n    handleLoadEnd(event) {\n        if (!event.image.__watchers__) {\n            return;\n        }\n        const watcherIndex = event.image.__watchers__.indexOf(this.id);\n        if (watcherIndex < 0) {\n            return;\n        }\n        event.image.__watchers__.splice(watcherIndex, 1);\n        this.loaded += 1;\n        const loading = this.loading;\n        if (this.loaded >= loading) {\n            if (loading === this.loading) {\n                this.status = SubjectStatus.Done;\n                this.loaded = this.loading = 0;\n            }\n        }\n    }\n}\n\nclass TileWatcher extends Watcher {\n    constructor(layer) {\n        super();\n        this.loaded = 0;\n        this.loading = 0;\n        this.source = layer.options.source.ol;\n        this.id = uuid();\n    }\n    watch() {\n        this.source.on(`tileloadstart`, e => this.handleLoadStart(e));\n        this.source.on(`tileloadend`, e => this.handleLoadEnd(e));\n        this.source.on(`tileloaderror`, e => this.handleLoadEnd(e));\n    }\n    unwatch() {\n        this.source.un(`tileloadstart`, e => this.handleLoadStart(e));\n        this.source.un(`tileloadend`, e => this.handleLoadEnd(e));\n        this.source.un(`tileloaderror`, e => this.handleLoadEnd(e));\n    }\n    handleLoadStart(event) {\n        // This is to avoid increasing\n        // the number of loaded tiles if a tile was loading\n        // before subscribing to this watcher\n        if (!event.tile.__watchers__) {\n            event.tile.__watchers__ = [];\n        }\n        event.tile.__watchers__.push(this.id);\n        this.loading += 1;\n        this.status = SubjectStatus.Working;\n    }\n    handleLoadEnd(event) {\n        if (!event.tile.__watchers__) {\n            return;\n        }\n        const watcherIndex = event.tile.__watchers__.indexOf(this.id);\n        if (watcherIndex < 0) {\n            return;\n        }\n        event.tile.__watchers__.splice(watcherIndex, 1);\n        this.loaded += 1;\n        const loading = this.loading;\n        if (this.loaded >= loading) {\n            if (loading === this.loading) {\n                this.status = SubjectStatus.Done;\n                this.loaded = this.loading = 0;\n            }\n        }\n    }\n}\n\n/**\n * Get all the layers legend\n * @return Array of legend\n */\nfunction getLayersLegends(layers, scale) {\n    const legends = [];\n    const newCanvas = document.createElement('canvas');\n    const newContext = newCanvas.getContext('2d');\n    newContext.font = '20px Calibri';\n    let heightPos = 0;\n    for (const layer of layers) {\n        if (layer.visible === false) {\n            continue;\n        }\n        const legendUrls = layer.dataSource.getLegend(undefined, scale) || [];\n        for (const legendUrl of legendUrls) {\n            if (legendUrl.url === undefined) {\n                continue;\n            }\n            const title = layer.title;\n            // Create an image for the legend\n            const legendImage = new Image();\n            legendImage.crossOrigin = 'anonymous';\n            legendImage.src = legendUrl.url;\n            legendImage.onload = () => {\n                newContext.fillText(title, 0, heightPos);\n                newContext.drawImage(legendImage, 0, heightPos + 20);\n                heightPos += legendImage.height + 5;\n            };\n            // Add legend info to the list\n            legends.push({\n                title,\n                url: legendUrl.url,\n                image: legendImage\n            });\n        }\n    }\n    return legends;\n}\n\nclass VectorWatcher extends Watcher {\n    constructor(layer) {\n        super();\n        this.loaded = 0;\n        this.loading = 0;\n        this.layer = layer;\n        this.id = uuid();\n    }\n    watch() {\n    }\n    unwatch() {\n        this.layer.onUnwatch();\n    }\n}\n\nclass ImageLayer extends Layer {\n    constructor(options, authInterceptor) {\n        super(options, authInterceptor);\n        this.authInterceptor = authInterceptor;\n        this.watcher = new ImageWatcher(this);\n        this.status$ = this.watcher.status$;\n    }\n    createOlLayer() {\n        const olOptions = Object.assign({}, this.options, {\n            source: this.options.source.ol\n        });\n        const image = new olLayerImage(olOptions);\n        if (this.authInterceptor) {\n            image.getSource().setImageLoadFunction((tile, src) => {\n                this.customLoader(tile, src, this.authInterceptor);\n            });\n        }\n        return image;\n    }\n    setMap(map) {\n        if (map === undefined) {\n            this.watcher.unsubscribe();\n        }\n        else {\n            this.watcher.subscribe(() => { });\n        }\n        super.setMap(map);\n    }\n    customLoader(tile, src, interceptor) {\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', src);\n        const intercepted = interceptor.interceptXhr(xhr, src);\n        if (!intercepted) {\n            xhr.abort();\n            tile.getImage().src = src;\n            return;\n        }\n        xhr.responseType = 'arraybuffer';\n        xhr.onload = function () {\n            const arrayBufferView = new Uint8Array(this.response);\n            const blob = new Blob([arrayBufferView], { type: 'image/png' });\n            const urlCreator = window.URL;\n            const imageUrl = urlCreator.createObjectURL(blob);\n            tile.getImage().src = imageUrl;\n        };\n        xhr.send();\n    }\n}\n\nclass TileLayer extends Layer {\n    constructor(options) {\n        super(options);\n        this.watcher = new TileWatcher(this);\n        this.status$ = this.watcher.status$;\n    }\n    createOlLayer() {\n        const olOptions = Object.assign({}, this.options, {\n            source: this.options.source.ol\n        });\n        return new olLayerTile(olOptions);\n    }\n    setMap(map) {\n        if (map === undefined) {\n            this.watcher.unsubscribe();\n        }\n        else {\n            this.watcher.subscribe(() => { });\n        }\n        super.setMap(map);\n    }\n}\n\nclass VectorLayer extends Layer {\n    constructor(options, authInterceptor) {\n        super(options, authInterceptor);\n        this.authInterceptor = authInterceptor;\n        this.watcher = new VectorWatcher(this);\n        this.status$ = this.watcher.status$;\n    }\n    get browsable() {\n        return this.options.browsable !== false;\n    }\n    get exportable() {\n        return this.options.exportable !== false;\n    }\n    createOlLayer() {\n        const olOptions = Object.assign({}, this.options, {\n            source: this.options.source.ol\n        });\n        if (this.options.animation) {\n            this.dataSource.ol.on('addfeature', function (e) {\n                this.flash(e.feature);\n            }.bind(this));\n        }\n        if (this.options.trackFeature) {\n            this.enableTrackFeature(this.options.trackFeature);\n        }\n        const vector = new OlVectorLayer(olOptions);\n        const vectorSource = vector.getSource();\n        const url = vectorSource.getUrl();\n        if (url && this.authInterceptor) {\n            const loader = (extent, resolution, proj) => {\n                this.customLoader(vectorSource, url, this.authInterceptor, extent, resolution, proj);\n            };\n            if (loader) {\n                vectorSource.setLoader(loader);\n            }\n        }\n        return vector;\n    }\n    flash(feature) {\n        const start = new Date().getTime();\n        const listenerKey = this.ol.on('postrender', animate.bind(this));\n        function animate(event) {\n            const vectorContext = getVectorContext(event);\n            const frameState = event.frameState;\n            const flashGeom = feature.getGeometry().clone();\n            const elapsed = frameState.time - start;\n            const elapsedRatio = elapsed / this.options.animation.duration;\n            const opacity = easeOut(1 - elapsedRatio);\n            const newColor = asArray(this.options.animation.color || 'red');\n            newColor[3] = opacity;\n            let style = this.ol\n                .getStyleFunction()\n                .call(this, feature)\n                .find(style2 => {\n                return style2.getImage();\n            });\n            if (!style) {\n                style = this.ol.getStyleFunction().call(this, feature)[0];\n            }\n            const styleClone = style.clone();\n            switch (feature.getGeometry().getType()) {\n                case 'Point':\n                    const radius = easeOut(elapsedRatio) * (styleClone.getImage().getRadius() * 3);\n                    styleClone.getImage().setRadius(radius);\n                    styleClone.getImage().setOpacity(opacity);\n                    break;\n                case 'LineString':\n                    // TODO\n                    if (styleClone.getImage()) {\n                        styleClone\n                            .getImage()\n                            .getStroke()\n                            .setColor(newColor);\n                        styleClone\n                            .getImage()\n                            .getStroke()\n                            .setWidth(easeOut(elapsedRatio) *\n                            (styleClone\n                                .getImage()\n                                .getStroke()\n                                .getWidth() *\n                                3));\n                    }\n                    if (styleClone.getStroke()) {\n                        styleClone.getStroke().setColor(newColor);\n                        styleClone\n                            .getStroke()\n                            .setWidth(easeOut(elapsedRatio) * (styleClone.getStroke().getWidth() * 3));\n                    }\n                    break;\n                case 'Polygon':\n                    // TODO\n                    if (styleClone.getImage()) {\n                        styleClone\n                            .getImage()\n                            .getFill()\n                            .setColor(newColor);\n                    }\n                    if (styleClone.getFill()) {\n                        styleClone.getFill().setColor(newColor);\n                    }\n                    break;\n            }\n            styleClone.setText('');\n            vectorContext.setStyle(styleClone);\n            vectorContext.drawGeometry(flashGeom);\n            if (elapsed > this.options.animation.duration) {\n                unByKey(listenerKey);\n                // remove last geometry\n                // there is a little flash before feature disappear, better solution ?\n                this.map.ol.render();\n                return;\n            }\n            // tell OpenLayers to continue postcompose animation\n            this.map.ol.render();\n        }\n    }\n    setMap(map) {\n        if (map === undefined) {\n            this.watcher.unsubscribe();\n        }\n        else {\n            this.watcher.subscribe(() => { });\n        }\n        super.setMap(map);\n    }\n    onUnwatch() {\n        this.dataSource.onUnwatch();\n        this.stopAnimation();\n    }\n    stopAnimation() {\n        this.dataSource.ol.un('addfeature', function (e) {\n            if (this.visible) {\n                this.flash(e.feature);\n            }\n        }.bind(this));\n    }\n    enableTrackFeature(id) {\n        this.trackFeatureListenerId = this.dataSource.ol.on('addfeature', this.trackFeature.bind(this, id));\n    }\n    centerMapOnFeature(id) {\n        const feat = this.dataSource.ol.getFeatureById(id);\n        if (feat) {\n            this.map.ol.getView().setCenter(feat.getGeometry().getCoordinates());\n        }\n    }\n    trackFeature(id, feat) {\n        if (feat.feature.getId() === id && this.visible) {\n            this.centerMapOnFeature(id);\n        }\n    }\n    disableTrackFeature(id) {\n        unByKey(this.trackFeatureListenerId);\n    }\n    /**\n     * Custom loader for vector layer.\n     * @internal\n     * @param vectorSource the vector source to be created\n     * @param url the url string or function to retrieve the data\n     * @param interceptor the interceptor of the data\n     * @param extent the extent of the requested data\n     * @param resolution the current resolution\n     * @param projection the projection to retrieve the data\n     */\n    customLoader(vectorSource, url, interceptor, extent, resolution, projection) {\n        const xhr = new XMLHttpRequest();\n        xhr.open('GET', typeof url === 'function' ? url(extent, resolution, projection) : url);\n        interceptor.interceptXhr(xhr);\n        const onError = () => vectorSource.removeLoadedExtent(extent);\n        xhr.onerror = onError;\n        xhr.onload = () => {\n            if (xhr.status === 200) {\n                vectorSource.addFeatures(vectorSource.getFormat().readFeatures(xhr.responseText));\n            }\n            else {\n                onError();\n            }\n        };\n        xhr.send();\n    }\n}\n\nclass VectorTileLayer extends Layer {\n    constructor(options, authInterceptor) {\n        super(options, authInterceptor);\n        this.authInterceptor = authInterceptor;\n        this.watcher = new TileWatcher(this);\n        this.status$ = this.watcher.status$;\n    }\n    createOlLayer() {\n        const olOptions = Object.assign({}, this.options, {\n            source: this.options.source.ol\n        });\n        const vectorTile = new olLayerVectorTile(olOptions);\n        const vectorTileSource = vectorTile.getSource();\n        if (this.authInterceptor) {\n            vectorTileSource.setTileLoadFunction((tile, url) => {\n                const loader = this.customLoader(url, tile.getFormat(), this.authInterceptor, tile.onLoad.bind(tile));\n                if (loader) {\n                    tile.setLoader(loader);\n                }\n            });\n        }\n        return vectorTile;\n    }\n    /**\n     * Custom loader for vector tile layer. Modified from the loadFeaturesXhr function in ol\\featureloader.js\n     * @internal\n     * @param url the url string or function to retrieve the data\n     * @param format the format of the tile\n     * @param interceptor the interceptor of the data\n     * @param success On success event action to trigger\n     * @param failure On failure event action to trigger TODO\n     */\n    customLoader(url, format, interceptor, success, failure) {\n        return ((extent, resolution, projection) => {\n            const xhr = new XMLHttpRequest();\n            xhr.open('GET', typeof url === 'function' ? url(extent, resolution, projection) : url);\n            interceptor.interceptXhr(xhr);\n            if (format.getType() === 'arraybuffer') {\n                xhr.responseType = 'arraybuffer';\n            }\n            xhr.onload = (event) => {\n                if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n                    const type = format.getType();\n                    let source;\n                    if (type === 'json' || type === 'text') {\n                        source = xhr.responseText;\n                    }\n                    else if (type === 'xml') {\n                        source = xhr.responseXML;\n                        if (!source) {\n                            source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n                        }\n                    }\n                    else if (type === 'arraybuffer') {\n                        source = xhr.response;\n                    }\n                    if (source) {\n                        success.call(this, format.readFeatures(source, {\n                            extent,\n                            featureProjection: projection\n                        }), format.readProjection(source));\n                    }\n                    else {\n                        // TODO\n                        failure.call(this);\n                    }\n                }\n                else {\n                    // TODO\n                    failure.call(this);\n                }\n            };\n            xhr.onerror = () => {\n                // TODO\n                failure.call(this);\n            };\n            xhr.send();\n        });\n    }\n}\n\n/**\n * Create a marker style for points\n * @returns Style\n */\nfunction createOverlayMarkerStyle({ text, opacity = 1, color = 'blue', outlineColor } = {}) {\n    let iconColor;\n    let svgIconColor;\n    let svgOutlineColor;\n    let svg;\n    const isIE = /msie\\s|trident\\/|edge\\//i.test(window.navigator.userAgent); // To fix IE11 svg bug (temporarly)\n    switch (color) {\n        case 'blue':\n            svgIconColor = '\"rgb(0,161,222)\"';\n            iconColor = color;\n            break;\n        case 'red':\n            svgIconColor = '\"rgb(246,65,57)\"';\n            iconColor = color;\n            break;\n        case 'yellow':\n            svgIconColor = '\"rgb(255,215,0)\"';\n            iconColor = color;\n            break;\n        case 'green':\n            svgIconColor = '\"rgb(0,128,0)\"';\n            iconColor = color;\n            break;\n        default:\n            svgIconColor = '\"rgb(0,161,222)\"';\n            iconColor = 'blue';\n            break;\n    }\n    if (outlineColor) {\n        if (outlineColor instanceof Array) {\n            svgOutlineColor =\n                'rgb(' +\n                    outlineColor[0] +\n                    ',' +\n                    outlineColor[1] +\n                    ',' +\n                    outlineColor[2] +\n                    ')';\n        }\n        switch (outlineColor) {\n            case 'blue':\n                svgOutlineColor = 'rgb(0,161,222)';\n                break;\n            case 'red':\n                svgOutlineColor = 'rgb(246,65,57)';\n                break;\n            case 'yellow':\n                svgOutlineColor = 'rgb(255,215,0)';\n                break;\n            case 'green':\n                svgOutlineColor = 'rgb(0,128,0)';\n                break;\n        }\n        svg =\n            '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" height=\"36\" width=\"36\" viewBox=\"0 0 36 36\">' +\n                '<path fill=' +\n                svgIconColor +\n                ' stroke=\"' +\n                svgOutlineColor +\n                '\" stroke-width=\"2\" d=\"M 17.692635,32.565644 C 15.71852,30.330584 13.290925,27.058065 11.6766,24.455732 9.3398623,20.688851 7.8905694,17.205334 7.6297492,14.728733 7.5616025,14.081649 7.5739557,12.528552 7.6513363,12.014724 8.1013861,9.0262716 9.8047068,6.3655569 12.310675,4.7364878 c 1.113691,-0.7239832 2.508083,-1.2834131 3.776687,-1.5152052 0.242945,-0.044389 0.451656,-0.09393 0.463804,-0.1100911 0.01215,-0.016161 0.638282,-0.025502 1.391411,-0.02076 1.088235,0.00685 1.450932,0.024316 1.766871,0.085071 2.650763,0.5097353 4.947142,1.8701891 6.498786,3.8501033 0.628018,0.8013587 1.297046,2.0200608 1.640967,2.9891872 0.191065,0.538399 0.427644,1.447408 0.477391,1.834287 0.0164,0.127546 0.0434,0.231902 0.06,0.231902 0.0166,0 0.03122,0.626135 0.03249,1.391411 0.0013,0.765276 -0.011,1.391411 -0.02726,1.391411 -0.01626,0 -0.05449,0.154049 -0.08495,0.342331 -0.08815,0.544879 -0.387235,1.721449 -0.604837,2.379406 -1.209421,3.656888 -4.014463,8.349762 -7.849521,13.132357 -0.790496,0.985807 -1.795217,2.167992 -1.842543,2.167992 -0.01896,0 -0.161766,-0.144111 -0.317336,-0.320246 z m 1.066937,-15.36525 c 0.133519,-0.02121 0.248766,-0.05657 0.256105,-0.07859 0.0073,-0.02202 0.04918,-0.03066 0.09298,-0.0192 0.0438,0.01145 0.107628,-0.0072 0.141834,-0.04137 0.03421,-0.03421 0.08456,-0.05474 0.111888,-0.04563 0.02733,0.0091 0.07703,-0.01077 0.110429,-0.04417 0.03341,-0.03341 0.08416,-0.05293 0.112796,-0.04338 0.02863,0.0095 0.08974,-0.01867 0.135802,-0.06271 0.04606,-0.04403 0.111902,-0.08625 0.146319,-0.09381 0.204084,-0.04483 0.762371,-0.519108 1.079463,-0.917027 0.26749,-0.335672 0.570987,-0.878795 0.529019,-0.946701 -0.01496,-0.0242 -0.0067,-0.044 0.01835,-0.044 0.05645,0 0.196809,-0.467982 0.158801,-0.529481 -0.01521,-0.02461 -0.0043,-0.04475 0.02427,-0.04475 0.03157,0 0.04365,-0.04329 0.03082,-0.11043 -0.01161,-0.06074 -0.0066,-0.110429 0.01124,-0.110429 0.01779,0 0.03235,-0.258405 0.03235,-0.574233 0,-0.315829 -0.01545,-0.574234 -0.03434,-0.574234 -0.01889,0 -0.02437,-0.03811 -0.01219,-0.08469 0.04412,-0.168712 -0.336329,-1.152668 -0.481536,-1.245401 -0.02327,-0.01486 -0.04022,-0.03992 -0.03765,-0.05568 0.01222,-0.07498 -0.156557,-0.318365 -0.406379,-0.586027 -0.295921,-0.317054 -0.773059,-0.690104 -0.83427,-0.652274 -0.0206,0.01273 -0.03745,0.0024 -0.03745,-0.02289 0,-0.06107 -0.433076,-0.2789369 -0.487546,-0.245273 -0.02338,0.01445 -0.04251,0.0068 -0.04251,-0.01695 0,-0.056281 -0.393995,-0.1865457 -0.613804,-0.2029397 -0.0943,-0.00703 -0.188579,-0.023183 -0.209503,-0.035888 -0.02092,-0.012705 -0.276571,-0.023337 -0.568105,-0.023627 -0.534044,-5.301e-4 -1.12638,0.091025 -1.12638,0.1741017 0,0.023781 -0.01713,0.032648 -0.03808,0.019705 -0.05054,-0.031232 -0.403641,0.1088602 -0.403641,0.1601422 0,0.02204 -0.01988,0.02779 -0.04417,0.01278 -0.0243,-0.01501 -0.04417,-0.0051 -0.04417,0.02209 0,0.02716 -0.01988,0.0371 -0.04417,0.02209 -0.0243,-0.01501 -0.04417,-0.0051 -0.04417,0.02209 0,0.02716 -0.01915,0.03755 -0.04256,0.02308 -0.02341,-0.01447 -0.08138,0.01252 -0.128834,0.05997 -0.04745,0.04745 -0.0974,0.07515 -0.111001,0.06155 -0.0136,-0.0136 -0.03722,0.0078 -0.05248,0.0476 -0.01526,0.03978 -0.0411,0.06408 -0.0574,0.054 -0.03277,-0.02025 -0.462299,0.323995 -0.491977,0.394291 -0.01026,0.02429 -0.07454,0.0912 -0.142856,0.148686 -0.248033,0.208705 -0.730279,0.974169 -0.672565,1.067553 0.0145,0.02346 0.0059,0.04266 -0.01914,0.04266 -0.05907,0 -0.241471,0.599428 -0.208527,0.685278 0.01385,0.0361 0.0044,0.06564 -0.02098,0.06564 -0.02539,0 -0.04169,0.0646 -0.03622,0.143558 0.0055,0.07896 -0.0042,0.213129 -0.02144,0.29816 -0.04741,0.233576 0.0511,1.055502 0.167516,1.397721 0.126048,0.370516 0.310099,0.740163 0.426484,0.856548 0.04776,0.04776 0.07554,0.08684 0.06174,0.08684 -0.0138,0 0.01516,0.05653 0.06436,0.125632 0.131301,0.184396 0.499365,0.587266 0.518785,0.567846 0.0092,-0.0092 0.09821,0.06081 0.197812,0.155562 0.09961,0.09475 0.190589,0.162786 0.202187,0.151188 0.0116,-0.0116 0.05991,0.01774 0.107361,0.06519 0.04745,0.04745 0.105426,0.07444 0.128834,0.05997 0.02341,-0.01447 0.04256,-0.0057 0.04256,0.01958 0,0.06106 0.344664,0.23496 0.399061,0.201341 0.02346,-0.0145 0.04266,-0.0059 0.04266,0.01914 0,0.05907 0.599429,0.241471 0.685279,0.208527 0.0361,-0.01385 0.06564,-0.0065 0.06564,0.01645 0,0.05196 1.079115,0.04833 1.413314,-0.0048 z\"></path>' +\n                '</svg>';\n    }\n    if (!isIE) {\n        return new Style({\n            image: new Icon({\n                src: svg\n                    ? 'data:image/svg+xml;utf8,' + svg\n                    : './assets/igo2/geo/icons/place_' + iconColor + '_36px.svg',\n                opacity,\n                imgSize: [36, 36],\n                anchor: [0.5, 0.92]\n            }),\n            text: new Text({\n                text,\n                font: '12px Calibri,sans-serif',\n                fill: new Fill({ color: '#000' }),\n                stroke: new Stroke({ color: '#fff', width: 3 }),\n                overflow: true\n            })\n        });\n    }\n    else {\n        return new Style({\n            image: new Icon({\n                src: './assets/igo2/geo/icons/place_' + iconColor + '_36px.svg',\n                opacity,\n                imgSize: [36, 36],\n                anchor: [0.5, 0.92]\n            }),\n            text: new Text({\n                text,\n                font: '12px Calibri,sans-serif',\n                fill: new Fill({ color: '#000' }),\n                stroke: new Stroke({ color: '#fff', width: 3 }),\n                overflow: true\n            })\n        });\n    }\n}\n\nclass StyleService {\n    createStyle(options) {\n        if (!options) {\n            return createOverlayMarkerStyle();\n        }\n        if (typeof options === 'function' || options instanceof Style) {\n            return options;\n        }\n        return this.parseStyle('style', options);\n    }\n    parseStyle(key, value) {\n        const styleOptions = {};\n        const olCls = this.getOlCls(key);\n        if (olCls && value instanceof Object) {\n            Object.keys(value).forEach(_key => {\n                const olKey = this.getOlKey(_key);\n                styleOptions[olKey] = this.parseStyle(_key, value[_key]);\n            });\n            return new olCls(styleOptions);\n        }\n        else {\n            return value;\n        }\n    }\n    getOlKey(key) {\n        let olKey;\n        switch (key.toLowerCase()) {\n            case 'circle':\n            case 'regularshape':\n            case 'icon':\n                olKey = 'image';\n                break;\n            default:\n                break;\n        }\n        return olKey || key;\n    }\n    getOlCls(key) {\n        let olCls = olstyle[key.charAt(0).toUpperCase() + key.slice(1)];\n        if (key === 'regularshape') {\n            olCls = RegularShape;\n        }\n        if (key === 'backgroundFill') {\n            olCls = Fill;\n        }\n        if (key === 'backgroundStroke') {\n            olCls = Stroke;\n        }\n        return olCls;\n    }\n    createStyleByAttribute(feature, styleByAttribute) {\n        let style;\n        const type = styleByAttribute.type;\n        const attribute = styleByAttribute.attribute;\n        const data = styleByAttribute.data;\n        const stroke = styleByAttribute.stroke;\n        const width = styleByAttribute.width;\n        const fill = styleByAttribute.fill;\n        const radius = styleByAttribute.radius;\n        const icon = styleByAttribute.icon;\n        const scale = styleByAttribute.scale;\n        const size = data.length;\n        const label = styleByAttribute.label.attribute || styleByAttribute.label;\n        const labelStyle = this.parseStyle('text', styleByAttribute.label.style) ||\n            new Text();\n        labelStyle.setText(this.getLabel(feature, label));\n        const baseStyle = styleByAttribute.baseStyle;\n        if (type === 'circle') {\n            for (let i = 0; i < size; i++) {\n                const val = typeof feature.get(attribute) !== 'undefined'\n                    ? feature.get(attribute)\n                    : '';\n                if (val === data[i] || val.toString().match(data[i])) {\n                    if (icon) {\n                        style = [\n                            new Style({\n                                image: new Icon({\n                                    src: icon[i],\n                                    scale: scale ? scale[i] : 1\n                                })\n                            })\n                        ];\n                        return style;\n                    }\n                    style = [\n                        new Style({\n                            image: new Circle({\n                                radius: radius ? radius[i] : 4,\n                                stroke: new Stroke({\n                                    color: stroke ? stroke[i] : 'black',\n                                    width: width ? width[i] : 1\n                                }),\n                                fill: new Fill({\n                                    color: fill ? fill[i] : 'black'\n                                })\n                            }),\n                            text: labelStyle\n                        })\n                    ];\n                    return style;\n                }\n            }\n            if (!feature.getStyle()) {\n                style = [\n                    new Style({\n                        image: new Circle({\n                            radius: 4,\n                            stroke: new Stroke({\n                                color: 'black'\n                            }),\n                            fill: new Fill({\n                                color: '#bbbbf2'\n                            })\n                        })\n                    })\n                ];\n                return style;\n            }\n        }\n        else if (type === 'regular') {\n            for (let i = 0; i < size; i++) {\n                const val = typeof feature.get(attribute) !== 'undefined'\n                    ? feature.get(attribute)\n                    : '';\n                if (val === data[i] || val.toString().match(data[i])) {\n                    style = [\n                        new Style({\n                            stroke: new Stroke({\n                                color: stroke ? stroke[i] : 'black',\n                                width: width ? width[i] : 1\n                            }),\n                            fill: new Fill({\n                                color: fill ? fill[i] : 'rgba(255,255,255,0.4)'\n                            }),\n                            text: labelStyle\n                        })\n                    ];\n                    return style;\n                }\n            }\n            if (feature instanceof olFeature) {\n                if (!feature.getStyle()) {\n                    if (baseStyle) {\n                        style = this.createStyle(baseStyle);\n                        return style;\n                    }\n                    style = [\n                        new Style({\n                            stroke: new Stroke({\n                                color: 'black'\n                            }),\n                            fill: new Fill({\n                                color: '#bbbbf2'\n                            })\n                        })\n                    ];\n                    return style;\n                }\n            }\n        }\n    }\n    createClusterStyle(feature, clusterParam = {}, layerStyle) {\n        let style;\n        const size = feature.get('features').length;\n        if (size !== 1) {\n            if (clusterParam.clusterRanges) {\n                for (const r of clusterParam.clusterRanges) {\n                    if ((!r.minRadius || r.minRadius <= size) &&\n                        (!r.maxRadius || r.maxRadius >= size)) {\n                        style = this.createStyle(r.style);\n                        if (r.showRange) {\n                            const text = new Text({\n                                text: size.toString(),\n                                fill: new Fill({\n                                    color: '#fff'\n                                })\n                            });\n                            style.setText(text);\n                        }\n                        if (r.dynamicRadius) {\n                            let clusterRadius;\n                            const radiusMin = style.image_.getRadius();\n                            clusterRadius = 5 * Math.log(size);\n                            if (clusterRadius < radiusMin) {\n                                clusterRadius = radiusMin;\n                            }\n                            style.image_.setRadius(clusterRadius);\n                        }\n                        break;\n                    }\n                }\n            }\n            if (!style) {\n                let clusterRadius;\n                if (clusterParam.radiusCalc) {\n                    clusterRadius = clusterParam.radiusCalc(size);\n                }\n                else {\n                    const radiusMin = 6;\n                    clusterRadius = 5 * Math.log(size);\n                    if (clusterRadius < radiusMin) {\n                        clusterRadius = radiusMin;\n                    }\n                }\n                style = [\n                    new Style({\n                        image: new Circle({\n                            radius: clusterRadius,\n                            opacity: 0.4,\n                            stroke: new Stroke({\n                                color: 'black'\n                            }),\n                            fill: new Fill({\n                                color: 'rgba(24, 134, 45, 0.5)'\n                            })\n                        }),\n                        text: new Text({\n                            text: size.toString(),\n                            fill: new Fill({\n                                color: '#fff'\n                            })\n                        })\n                    })\n                ];\n            }\n        }\n        else {\n            style = this.createStyle(layerStyle);\n        }\n        return style;\n    }\n    getLabel(feature, labelMatch) {\n        let label = labelMatch;\n        const labelToGet = Array.from(labelMatch.matchAll(/\\$\\{([^\\{\\}]+)\\}/g));\n        labelToGet.forEach(v => {\n            label = label.replace(v[0], feature.get(v[1]));\n        });\n        // Nothing done? check feature's attribute\n        if (labelToGet.length === 0 && label === labelMatch) {\n            label = feature.get(labelMatch) || labelMatch;\n        }\n        return label;\n    }\n}\nStyleService.ɵfac = function StyleService_Factory(t) { return new (t || StyleService)(); };\nStyleService.ɵprov = ɵɵdefineInjectable({ factory: function StyleService_Factory() { return new StyleService(); }, token: StyleService, providedIn: \"root\" });\n\nclass LayerService {\n    constructor(http, styleService, dataSourceService, authInterceptor) {\n        this.http = http;\n        this.styleService = styleService;\n        this.dataSourceService = dataSourceService;\n        this.authInterceptor = authInterceptor;\n    }\n    createLayer(layerOptions) {\n        if (!layerOptions.source) {\n            return;\n        }\n        if (layerOptions.source.options &&\n            layerOptions.source.options._layerOptionsFromSource) {\n            layerOptions = ObjectUtils.mergeDeep(layerOptions.source.options._layerOptionsFromSource, layerOptions || {});\n        }\n        let layer;\n        switch (layerOptions.source.constructor) {\n            case OSMDataSource:\n            case WMTSDataSource:\n            case XYZDataSource:\n            case CartoDataSource:\n            case TileArcGISRestDataSource:\n                layer = this.createTileLayer(layerOptions);\n                break;\n            case FeatureDataSource:\n            case WFSDataSource:\n            case ArcGISRestDataSource:\n            case WebSocketDataSource:\n            case ClusterDataSource:\n                layer = this.createVectorLayer(layerOptions);\n                break;\n            case WMSDataSource:\n                layer = this.createImageLayer(layerOptions);\n                break;\n            case MVTDataSource:\n                layer = this.createVectorTileLayer(layerOptions);\n                break;\n            default:\n                break;\n        }\n        return layer;\n    }\n    createAsyncLayer(layerOptions) {\n        if (layerOptions.source) {\n            return new Observable(d => d.next(this.createLayer(layerOptions)));\n        }\n        return this.dataSourceService\n            .createAsyncDataSource(layerOptions.sourceOptions)\n            .pipe(map(source => {\n            if (source === undefined) {\n                return undefined;\n            }\n            return this.createLayer(Object.assign(layerOptions, { source }));\n        }));\n    }\n    createImageLayer(layerOptions) {\n        return new ImageLayer(layerOptions, this.authInterceptor);\n    }\n    createTileLayer(layerOptions) {\n        return new TileLayer(layerOptions);\n    }\n    createVectorLayer(layerOptions) {\n        let style;\n        let olLayer;\n        if (layerOptions.style !== undefined) {\n            style = this.styleService.createStyle(layerOptions.style);\n        }\n        if (layerOptions.source instanceof ArcGISRestDataSource) {\n            const source = layerOptions.source;\n            style = source.options.params.style;\n        }\n        else if (layerOptions.styleByAttribute) {\n            const serviceStyle = this.styleService;\n            layerOptions.style = feature => {\n                return serviceStyle.createStyleByAttribute(feature, layerOptions.styleByAttribute);\n            };\n            olLayer = new VectorLayer(layerOptions, this.authInterceptor);\n        }\n        if (layerOptions.source instanceof ClusterDataSource) {\n            const serviceStyle = this.styleService;\n            const baseStyle = layerOptions.clusterBaseStyle;\n            layerOptions.style = feature => {\n                return serviceStyle.createClusterStyle(feature, layerOptions.clusterParam, baseStyle);\n            };\n            olLayer = new VectorLayer(layerOptions, this.authInterceptor);\n        }\n        const layerOptionsOl = Object.assign({}, layerOptions, {\n            style\n        });\n        if (!olLayer) {\n            olLayer = new VectorLayer(layerOptionsOl, this.authInterceptor);\n        }\n        this.applyMapboxStyle(olLayer, layerOptionsOl);\n        return olLayer;\n    }\n    createVectorTileLayer(layerOptions) {\n        let style;\n        let olLayer;\n        if (layerOptions.style !== undefined) {\n            style = this.styleService.createStyle(layerOptions.style);\n        }\n        if (layerOptions.styleByAttribute) {\n            const serviceStyle = this.styleService;\n            layerOptions.style = feature => {\n                return serviceStyle.createStyleByAttribute(feature, layerOptions.styleByAttribute);\n            };\n            olLayer = new VectorTileLayer(layerOptions, this.authInterceptor);\n        }\n        const layerOptionsOl = Object.assign({}, layerOptions, {\n            style\n        });\n        if (!olLayer) {\n            olLayer = new VectorTileLayer(layerOptionsOl, this.authInterceptor);\n        }\n        this.applyMapboxStyle(olLayer, layerOptionsOl);\n        return olLayer;\n    }\n    applyMapboxStyle(layer, layerOptions) {\n        if (layerOptions.mapboxStyle) {\n            this.getMapboxGlStyle(layerOptions.mapboxStyle.url).subscribe(res => {\n                stylefunction(layer.ol, res, layerOptions.mapboxStyle.source);\n            });\n        }\n    }\n    getMapboxGlStyle(url) {\n        return this.http.get(url).pipe(map((res) => res), catchError(err => {\n            console.log('No style was found');\n            return of(err);\n        }));\n    }\n}\nLayerService.ɵfac = function LayerService_Factory(t) { return new (t || LayerService)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(StyleService), ɵngcc0.ɵɵinject(DataSourceService), ɵngcc0.ɵɵinject(ɵngcc8.AuthInterceptor, 8)); };\nLayerService.ɵprov = ɵɵdefineInjectable({ factory: function LayerService_Factory() { return new LayerService(ɵɵinject(HttpClient), ɵɵinject(StyleService), ɵɵinject(DataSourceService), ɵɵinject(AuthInterceptor, 8)); }, token: LayerService, providedIn: \"root\" });\nLayerService.ctorParameters = () => [\n    { type: HttpClient },\n    { type: StyleService },\n    { type: DataSourceService },\n    { type: AuthInterceptor, decorators: [{ type: Optional }] }\n];\n\nconst FEATURE = 'Feature';\nvar FeatureMotion;\n(function (FeatureMotion) {\n    FeatureMotion[FeatureMotion[\"None\"] = 0] = \"None\";\n    FeatureMotion[FeatureMotion[\"Move\"] = 1] = \"Move\";\n    FeatureMotion[FeatureMotion[\"Zoom\"] = 2] = \"Zoom\";\n    FeatureMotion[FeatureMotion[\"Default\"] = 3] = \"Default\";\n})(FeatureMotion || (FeatureMotion = {}));\n\n/**\n * Create an Openlayers feature object out of a feature definition.\n * The output object has a reference to the feature id.\n * @param feature Feature definition\n * @param projectionOut Feature object projection\n * @returns OpenLayers feature object\n */\nfunction featureToOl(feature, projectionOut, getId) {\n    getId = getId ? getId : getEntityId;\n    const olFormat = new OlGeoJSON();\n    const olFeature = olFormat.readFeature(feature, {\n        dataProjection: feature.projection,\n        featureProjection: projectionOut\n    });\n    olFeature.setId(getId(feature));\n    const title = getEntityTitle(feature);\n    if (title !== undefined) {\n        olFeature.set('_title', title, true);\n    }\n    if (feature.extent !== undefined) {\n        olFeature.set('_extent', feature.extent, true);\n    }\n    if (feature.projection !== undefined) {\n        olFeature.set('_projection', feature.projection, true);\n    }\n    const mapTitle = getEntityProperty(feature, 'meta.mapTitle');\n    if (mapTitle !== undefined) {\n        olFeature.set('_mapTitle', mapTitle, true);\n    }\n    olFeature.set('_entityRevision', getEntityRevision(feature), true);\n    const icon = getEntityIcon(feature);\n    if (icon !== undefined) {\n        olFeature.set('_icon', icon, true);\n    }\n    if (feature.meta && feature.meta.style) {\n        olFeature.set('_style', feature.meta.style, true);\n    }\n    if (feature.sourceId) {\n        olFeature.set('_sourceId', feature.sourceId, true);\n    }\n    return olFeature;\n}\nfunction renderFeatureFromOl(olRenderFeature, projectionIn, olLayer, projectionOut = 'EPSG:4326') {\n    let geom;\n    let title;\n    let exclude;\n    let excludeOffline;\n    if (olLayer) {\n        title = olLayer.get('title');\n        if (olLayer.get('sourceOptions')) {\n            exclude = olLayer.get('sourceOptions').excludeAttribute;\n            excludeOffline = olLayer.get('sourceOptions').excludeAttributeOffline;\n        }\n    }\n    else {\n        title = olRenderFeature.get('_title');\n    }\n    const olFormat = new OlGeoJSON();\n    const properties = olRenderFeature.getProperties();\n    const geometryType = olRenderFeature.getType();\n    if (geometryType === 'Polygon') {\n        const ends = olRenderFeature.ends_;\n        geom = new OlPolygon(olRenderFeature.flatCoordinates_, OlGeometryLayout.XY, ends);\n    }\n    else if (geometryType === 'Point') {\n        geom = new OlPoint(olRenderFeature.flatCoordinates_, OlGeometryLayout.XY);\n    }\n    else if (geometryType === 'LineString') {\n        geom = new OlLineString(olRenderFeature.flatCoordinates_, OlGeometryLayout.XY);\n    }\n    const geometry = olFormat.writeGeometryObject(geom, {\n        dataProjection: projectionOut,\n        featureProjection: projectionIn\n    });\n    const id = olRenderFeature.getId() ? olRenderFeature.getId() : uuid();\n    const mapTitle = olRenderFeature.get('_mapTitle');\n    return {\n        type: FEATURE,\n        projection: projectionOut,\n        extent: olRenderFeature.getExtent(),\n        meta: {\n            id,\n            title: title ? title : mapTitle ? mapTitle : id,\n            mapTitle,\n            excludeAttribute: exclude,\n            excludeAttributeOffline: excludeOffline\n        },\n        properties,\n        geometry,\n        ol: olRenderFeature\n    };\n}\n/**\n * Create a feature object out of an OL feature\n * The output object has a reference to the feature id.\n * @param olFeature OL Feature\n * @param projectionIn OL feature projection\n * @param olLayer OL Layer\n * @param projectionOut Feature projection\n * @returns Feature\n */\nfunction featureFromOl(olFeature, projectionIn, olLayer, projectionOut = 'EPSG:4326') {\n    let title;\n    let exclude;\n    let excludeOffline;\n    const olFormat = new OlGeoJSON();\n    const keys = olFeature.getKeys().filter((key) => {\n        return !key.startsWith('_') && key !== 'geometry';\n    });\n    const properties = keys.reduce((acc, key) => {\n        acc[key] = olFeature.get(key);\n        return acc;\n    }, {});\n    const geometry = olFormat.writeGeometryObject(olFeature.getGeometry(), {\n        dataProjection: projectionOut,\n        featureProjection: projectionIn\n    });\n    if (olLayer) {\n        title = olLayer.get('title');\n        if (olLayer.get('sourceOptions')) {\n            exclude = olLayer.get('sourceOptions').excludeAttribute;\n            excludeOffline = olLayer.get('sourceOptions').excludeAttributeOffline;\n        }\n    }\n    else {\n        title = olFeature.get('_title');\n    }\n    const mapTitle = olFeature.get('_mapTitle');\n    const id = olFeature.getId() ? olFeature.getId() : uuid();\n    return {\n        type: FEATURE,\n        projection: projectionOut,\n        extent: olFeature.get('_extent'),\n        meta: {\n            id,\n            title: title ? title : mapTitle ? mapTitle : id,\n            mapTitle,\n            revision: olFeature.getRevision(),\n            style: olFeature.get('_style'),\n            excludeAttribute: exclude,\n            excludeAttributeOffline: excludeOffline\n        },\n        properties,\n        geometry,\n        ol: olFeature\n    };\n}\n/**\n * Compute an OL feature extent in it's map projection\n * @param map Map\n * @param olFeature OL feature\n * @returns Extent in the map projection\n */\nfunction computeOlFeatureExtent(map, olFeature) {\n    let olExtent = createEmpty();\n    const olFeatureExtent = olFeature.get('_extent');\n    const olFeatureProjection = olFeature.get('_projection');\n    if (olFeatureExtent !== undefined && olFeatureProjection !== undefined) {\n        olExtent = transformExtent(olFeatureExtent, olFeatureProjection, map.projection);\n    }\n    else {\n        const olGeometry = olFeature.getGeometry();\n        if (olGeometry !== null) {\n            olExtent = olGeometry.getExtent();\n        }\n    }\n    return olExtent;\n}\n/**\n * Compute a multiple OL features extent in their map projection\n * @param map Map\n * @param olFeatures OL features\n * @returns Extent in the map projection\n */\nfunction computeOlFeaturesExtent(map, olFeatures) {\n    const extent = createEmpty();\n    olFeatures.forEach((olFeature) => {\n        const featureExtent = computeOlFeatureExtent(map, olFeature);\n        extend(extent, featureExtent);\n    });\n    return extent;\n}\n/**\n * Scale an extent.\n * @param extent Extent\n * @param Scaling factors for top, right, bottom and left directions, in that order\n * @returns Scaled extent\n */\nfunction scaleExtent(extent, scale) {\n    const [width, height] = getSize(extent);\n    return [\n        scale[3] ? extent[0] - width * scale[3] : extent[0],\n        scale[2] ? extent[1] - height * scale[2] : extent[1],\n        scale[1] ? extent[2] + width * scale[1] : extent[2],\n        scale[0] ? extent[3] + height * scale[0] : extent[3]\n    ];\n}\n/**\n * Return true if features are out of view.\n * If features are too close to the edge, they are considered out of view.\n * We define the edge as 5% of the extent size.\n * @param map Map\n * @param featuresExtent The features's extent\n * @returns Return true if features are out of view\n */\nfunction featuresAreOutOfView(map, featuresExtent) {\n    const mapExtent = map.viewController.getExtent();\n    const edgeRatio = 0.05;\n    const scale = [-1, -1, -1, -1].map(x => x * edgeRatio);\n    const viewExtent = scaleExtent(mapExtent, scale);\n    return !containsExtent(viewExtent, featuresExtent);\n}\n/**\n * Return true if features are too deep into the view. This results\n * in features being too small.\n * Features are considered too small if their extent occupies less than\n * 1% of the map extent.\n * @param map Map\n * @param featuresExtent The features's extent\n * @param areaRatio The features extent to view extent acceptable ratio\n * @returns Return true if features are too deep in the view\n */\nfunction featuresAreTooDeepInView(map, featuresExtent, areaRatio) {\n    // An area ratio of 0.004 means that the feature extent's width and height\n    // should be about 1/16 of the map extent's width and height\n    areaRatio = areaRatio ? areaRatio : 0.004;\n    const mapExtent = map.viewController.getExtent();\n    const mapExtentArea = getArea(mapExtent);\n    const featuresExtentArea = getArea(featuresExtent);\n    if (featuresExtentArea === 0 && map.viewController.getZoom() > 13) {\n        // In case it's a point\n        return false;\n    }\n    return featuresExtentArea / mapExtentArea < areaRatio;\n}\n/**\n * Fit view to include the features extent.\n * By default, this method will let the features occupy about 50% of the viewport.\n * @param map Map\n * @param olFeatures OL features\n * @param motion To motion to the new map view\n * @param scale If this is defined, the original view will be scaled\n *  by that factor before any logic is applied.\n */\nfunction moveToOlFeatures(map, olFeatures, motion = FeatureMotion.Default, scale, areaRatio) {\n    const featuresExtent = computeOlFeaturesExtent(map, olFeatures);\n    let viewExtent = featuresExtent;\n    if (scale !== undefined) {\n        viewExtent = scaleExtent(viewExtent, scale);\n    }\n    if (motion === FeatureMotion.Zoom) {\n        map.viewController.zoomToExtent(viewExtent);\n    }\n    else if (motion === FeatureMotion.Move) {\n        map.viewController.moveToExtent(viewExtent);\n    }\n    else if (motion === FeatureMotion.Default) {\n        if (featuresAreOutOfView(map, featuresExtent) ||\n            featuresAreTooDeepInView(map, featuresExtent, areaRatio)) {\n            map.viewController.zoomToExtent(viewExtent);\n        }\n    }\n}\n/**\n * Hide an OL feature\n * @param olFeature OL feature\n */\nfunction hideOlFeature(olFeature) {\n    olFeature.setStyle(new Style({}));\n}\n/**\n * Try to bind a layer to a store if none is bound already.\n * The layer will also be added to the store's map.\n * If no layer is given to that function, a basic one will be created.\n * @param store The store to bind the layer\n * @param layer An optional VectorLayer\n */\nfunction tryBindStoreLayer(store, layer) {\n    if (store.layer !== undefined) {\n        if (store.layer.map === undefined) {\n            store.map.addLayer(store.layer);\n        }\n        return;\n    }\n    layer = layer\n        ? layer\n        : new VectorLayer({\n            source: new FeatureDataSource()\n        });\n    store.bindLayer(layer);\n    if (store.layer.map === undefined) {\n        store.map.addLayer(store.layer);\n    }\n}\n/**\n * Compute a diff between a source array of Ol features and a target array\n * @param source Source array of OL features\n * @param starget Target array of OL features\n * @returns Features to add and remove\n */\nfunction computeOlFeaturesDiff(source, target) {\n    const olFeaturesMap = new Map();\n    target.forEach((olFeature) => {\n        olFeaturesMap.set(olFeature.getId(), olFeature);\n    });\n    const olFeaturesToRemove = [];\n    source.forEach((olFeature) => {\n        const newOlFeature = olFeaturesMap.get(olFeature.getId());\n        if (newOlFeature === undefined) {\n            olFeaturesToRemove.push(olFeature);\n        }\n        else if (newOlFeature.get('_entityRevision') !== olFeature.get('_entityRevision')) {\n            olFeaturesToRemove.push(olFeature);\n        }\n        else {\n            olFeaturesMap.delete(newOlFeature.getId());\n        }\n    });\n    const olFeaturesToAddIds = Array.from(olFeaturesMap.keys());\n    const olFeaturesToAdd = target.filter((olFeature) => {\n        return olFeaturesToAddIds.indexOf(olFeature.getId()) >= 0;\n    });\n    return {\n        add: olFeaturesToAdd,\n        remove: olFeaturesToRemove\n    };\n}\n\n/**\n * The class is a specialized version of an EntityStore that stores\n * features and the map layer to display them on. Synchronization\n * between the store and the layer is handled by strategies.\n */\nclass FeatureStore extends EntityStore {\n    constructor(entities, options) {\n        super(entities, options);\n        this.map = options.map;\n    }\n    /**\n     * The layer's data source\n     */\n    get source() {\n        return this.layer ? this.layer.dataSource : undefined;\n    }\n    /**\n     * Bind this store to a vector layer\n     * @param layer Vector layer\n     * @returns Feature store\n     */\n    bindLayer(layer) {\n        this.layer = layer;\n        return this;\n    }\n    /**\n     * Set the layer's features and perform a motion to make them visible. Strategies\n     * make extensive use of that method.\n     * @param features Features\n     * @param motion Optional: The type of motion to perform\n     */\n    setLayerFeatures(features, motion = FeatureMotion.Default, viewScale, areaRatio, getId) {\n        getId = getId ? getId : getEntityId;\n        this.checkLayer();\n        const olFeatures = features\n            .map((feature) => featureToOl(feature, this.map.projection, getId));\n        this.setLayerOlFeatures(olFeatures, motion, viewScale, areaRatio);\n    }\n    /**\n     * Set the store's features from an array of OL features.\n     * @param olFeatures Ol features\n     */\n    setStoreOlFeatures(olFeatures) {\n        this.checkLayer();\n        const features = olFeatures.map((olFeature) => {\n            olFeature.set('_featureStore', this, true);\n            return featureFromOl(olFeature, this.layer.map.projection);\n        });\n        this.load(features);\n    }\n    /**\n     * Remove all features from the layer\n     */\n    clearLayer() {\n        this.checkLayer();\n        this.source.ol.clear();\n    }\n    /**\n     * Check wether a layer is bound or not and throw an error if not.\n     */\n    checkLayer() {\n        if (this.layer === undefined) {\n            throw new Error('This FeatureStore is not bound to a layer.');\n        }\n    }\n    /**\n     * Set the layer's features and perform a motion to make them visible.\n     * @param features Openlayers feature objects\n     * @param motion Optional: The type of motion to perform\n     */\n    setLayerOlFeatures(olFeatures, motion = FeatureMotion.Default, viewScale, areaRatio) {\n        const olSource = this.layer.ol.getSource();\n        const diff = computeOlFeaturesDiff(olSource.getFeatures(), olFeatures);\n        if (diff.remove.length > 0) {\n            this.removeOlFeaturesFromLayer(diff.remove);\n        }\n        if (diff.add.length > 0) {\n            this.addOlFeaturesToLayer(diff.add);\n        }\n        if (diff.add.length > 0) {\n            // If features are added, do a motion toward the newly added features\n            moveToOlFeatures(this.map, diff.add, motion, viewScale, areaRatio);\n        }\n        else if (diff.remove.length > 0) {\n            // Else, do a motion toward all the features\n            moveToOlFeatures(this.map, olFeatures, motion, viewScale, areaRatio);\n        }\n    }\n    /**\n     * Add features to the the layer\n     * @param features Openlayers feature objects\n     */\n    addOlFeaturesToLayer(olFeatures) {\n        olFeatures.forEach((olFeature) => {\n            olFeature.set('_featureStore', this, true);\n        });\n        this.source.ol.addFeatures(olFeatures);\n    }\n    /**\n     * Remove features from the the layer\n     * @param features Openlayers feature objects\n     */\n    removeOlFeaturesFromLayer(olFeatures) {\n        olFeatures.forEach((olFeature) => {\n            this.source.ol.removeFeature(olFeature);\n        });\n    }\n}\n\n/**\n * This strategy maintain the store features updated while the map is moved.\n * The features's state inside the map are tagged inMapExtent = true;\n */\nclass FeatureStoreInMapExtentStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        /**\n         * Subscription to the store's OL source changes\n         */\n        this.stores$$ = new Map();\n        this.states$$ = [];\n    }\n    /**\n     * Bind this strategy to a store and start watching for Ol source changes\n     * @param store Feature store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.watchStore(store);\n        }\n        this.empty$$ = store.empty$\n            .pipe(skipWhile((empty) => !empty))\n            .subscribe(() => this.updateEntitiesInExtent(store));\n    }\n    /**\n     * Unbind this strategy from a store and stop watching for Ol source changes\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unwatchStore(store);\n        }\n    }\n    /**\n     * Start watching all stores already bound to that strategy at once.\n     * @internal\n     */\n    doActivate() {\n        this.stores.forEach((store) => this.watchStore(store));\n    }\n    /**\n     * Stop watching all stores bound to that strategy\n     * @internal\n     */\n    doDeactivate() {\n        this.unwatchAll();\n    }\n    /**\n     * Watch for a store's  OL source changes\n     * @param store Feature store\n     */\n    watchStore(store) {\n        if (this.stores$$.has(store)) {\n            return;\n        }\n        this.updateEntitiesInExtent(store);\n        this.states$$.push(store.layer.map.viewController.state$.subscribe(() => {\n            this.updateEntitiesInExtent(store);\n        }));\n    }\n    updateEntitiesInExtent(store) {\n        store.state.updateAll({ inMapExtent: false });\n        const mapExtent = store.layer.map.viewController.getExtent();\n        const entitiesInMapExtent = store.entities$.value\n            .filter((entity) => intersects$1(entity.ol.getGeometry().getExtent(), mapExtent));\n        if (entitiesInMapExtent.length > 0) {\n            store.state.updateMany(entitiesInMapExtent, { inMapExtent: true }, true);\n        }\n    }\n    /**\n     * Stop watching for a store's OL source changes\n     * @param store Feature store\n     */\n    unwatchStore(store) {\n        const key = this.stores$$.get(store);\n        if (key !== undefined) {\n            unByKey(key);\n            this.stores$$.delete(store);\n        }\n    }\n    /**\n     * Stop watching for OL source changes in all stores.\n     */\n    unwatchAll() {\n        Array.from(this.stores$$.entries()).forEach((entries) => {\n            unByKey(entries[1]);\n        });\n        this.stores$$.clear();\n        this.states$$.map(state => state.unsubscribe());\n        if (this.empty$$) {\n            this.empty$$.unsubscribe();\n        }\n    }\n}\n\n/**\n * This strategy loads a store's features into it's layer counterpart.\n * The store -> layer binding is a one-way binding. That means any entity\n * added to the store will be added to the layer but the opposite is false.\n *\n * Important: This strategy observes filtered entities, not raw entities. This\n * is not configurable yet.\n */\nclass FeatureStoreLoadingStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        /**\n         * Subscription to the store's features\n         */\n        this.stores$$ = new Map();\n        this.setMotion(options.motion);\n    }\n    /**\n     * Bind this strategy to a store and start watching for entities changes\n     * @param store Feature store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.watchStore(store);\n        }\n    }\n    /**\n     * Unbind this strategy from a store and stop watching for entities changes\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unwatchStore(store);\n        }\n    }\n    /**\n     * Define the motion to apply on load\n     * @param motion Feature motion\n     */\n    setMotion(motion) {\n        this.motion = motion;\n    }\n    /**\n     * Start watching all stores already bound to that strategy at once.\n     * @internal\n     */\n    doActivate() {\n        this.stores.forEach((store) => this.watchStore(store));\n    }\n    /**\n     * Stop watching all stores bound to that strategy\n     * @internal\n     */\n    doDeactivate() {\n        this.unwatchAll();\n    }\n    /**\n     * Watch for entities changes in a store.\n     * Important: Never observe a store's sorted entities. It makes no sense\n     * to display sorted entities (instead of unsorted) on a layer and it\n     * would potentially result in a lot of useless computation.\n     * @param store Feature store\n     */\n    watchStore(store) {\n        if (this.stores$$.has(store)) {\n            return;\n        }\n        const subscription = store.view.all$()\n            .subscribe((features) => this.onFeaturesChange(features, store));\n        this.stores$$.set(store, subscription);\n    }\n    /**\n     * Stop watching for entities changes in a store.\n     * @param store Feature store\n     */\n    unwatchStore(store) {\n        const subscription = this.stores$$.get(store);\n        if (subscription !== undefined) {\n            subscription.unsubscribe();\n            this.stores$$.delete(store);\n        }\n    }\n    /**\n     * Stop watching for entities changes in all stores.\n     */\n    unwatchAll() {\n        Array.from(this.stores$$.entries()).forEach((entries) => {\n            entries[1].unsubscribe();\n        });\n        this.stores$$.clear();\n    }\n    /**\n     * Load features into a layer or clear the layer if the array of features is empty.\n     * @param features Store filtered features\n     * @param store Feature store\n     */\n    onFeaturesChange(features, store) {\n        if (features.length === 0) {\n            store.clearLayer();\n        }\n        else {\n            store.setLayerFeatures(features, this.selectMotion(store), this.options.viewScale, this.options.areaRatio, this.options.getFeatureId);\n        }\n    }\n    /**\n     * Selects the best motion\n     * @param store A FeatureStore to apply the motion\n     * @returns The motion selected\n     */\n    selectMotion(store) {\n        if (this.motion !== undefined) {\n            return this.motion;\n        }\n        if (store.pristine === true) {\n            // If features have just been loaded into the store, move/zoom on them\n            return FeatureMotion.Default;\n        }\n        else if (store.count > store.view.count) {\n            // If features have been filtered, move/zoom on the remaining ones\n            return FeatureMotion.Default;\n        }\n        else {\n            // On insert, update or delete, do nothing\n            return FeatureMotion.None;\n        }\n    }\n}\n\n/**\n * This strategy loads a layer's features into it's store counterpart.\n * The layer -> store binding is a one-way binding. That means any OL feature\n * added to the layer will be added to the store but the opposite is false.\n *\n * Important: In it's current state, this strategy is to meant to be combined\n * with a standard Loading strategy and it would probably cause recursion issues.\n */\nclass FeatureStoreLoadingLayerStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        /**\n         * Subscription to the store's OL source changes\n         */\n        this.stores$$ = new Map();\n    }\n    /**\n     * Bind this strategy to a store and start watching for Ol source changes\n     * @param store Feature store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            this.watchStore(store);\n        }\n    }\n    /**\n     * Unbind this strategy from a store and stop watching for Ol source changes\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            this.unwatchStore(store);\n        }\n    }\n    /**\n     * Start watching all stores already bound to that strategy at once.\n     * @internal\n     */\n    doActivate() {\n        this.stores.forEach((store) => this.watchStore(store));\n    }\n    /**\n     * Stop watching all stores bound to that strategy\n     * @internal\n     */\n    doDeactivate() {\n        this.unwatchAll();\n    }\n    /**\n     * Watch for a store's  OL source changes\n     * @param store Feature store\n     */\n    watchStore(store) {\n        if (this.stores$$.has(store)) {\n            return;\n        }\n        this.onSourceChanges(store);\n        const olSource = store.layer.ol.getSource();\n        olSource.on('change', (event) => {\n            this.onSourceChanges(store);\n        });\n    }\n    /**\n     * Stop watching for a store's OL source changes\n     * @param store Feature store\n     */\n    unwatchStore(store) {\n        const key = this.stores$$.get(store);\n        if (key !== undefined) {\n            unByKey(key);\n            this.stores$$.delete(store);\n        }\n    }\n    /**\n     * Stop watching for OL source changes in all stores.\n     */\n    unwatchAll() {\n        Array.from(this.stores$$.entries()).forEach((entries) => {\n            unByKey(entries[1]);\n        });\n        this.stores$$.clear();\n    }\n    /**\n     * Load features from an OL source into a  store or clear the store if the source is empty\n     * @param features Store filtered features\n     * @param store Feature store\n     */\n    onSourceChanges(store) {\n        let olFeatures = store.layer.ol.getSource().getFeatures();\n        if (store.layer.dataSource instanceof ClusterDataSource) {\n            olFeatures = olFeatures.flatMap((cluster) => cluster.get('features'));\n        }\n        if (olFeatures.length === 0) {\n            store.clear();\n        }\n        else {\n            store.setStoreOlFeatures(olFeatures);\n        }\n    }\n}\n\nclass OlDragSelectInteraction extends OlDragBoxInteraction {\n    constructor(options) {\n        super(options);\n    }\n}\n/**\n * This strategy synchronizes a store and a layer selected entities.\n * The store <-> layer binding is a two-way binding.\n *\n * In many cases, a single strategy bound to multiple stores\n * will yield better results that multiple strategies with each their\n * own store. In the latter scenario, a click on overlapping features\n * would trigger the strategy of each layer and they would cancel\n * each other as well as move the map view around needlessly.\n */\nclass FeatureStoreSelectionStrategy extends EntityStoreStrategy {\n    constructor(options) {\n        super(options);\n        this.options = options;\n        this.setMotion(options.motion);\n        this._overlayStore = this.createOverlayStore();\n    }\n    /**\n     * The map the layers belong to\n     */\n    get map() {\n        return this.options.map;\n    }\n    /**\n     * A feature store that'll contain the selected features. It has it's own\n     * layer, shared by all the stores this staretgy is bound to.\n     */\n    get overlayStore() {\n        return this._overlayStore;\n    }\n    /**\n     * Bind this strategy to a store and force this strategy's\n     * reactivation to properly setup watchers.\n     * @param store Feature store\n     */\n    bindStore(store) {\n        super.bindStore(store);\n        if (this.active === true) {\n            // Force reactivation\n            this.activate();\n        }\n    }\n    /**\n     * Unbind this strategy from a store and force this strategy's\n     * reactivation to properly setup watchers.\n     * @param store Feature store\n     */\n    unbindStore(store) {\n        super.unbindStore(store);\n        if (this.active === true) {\n            // Force reactivation\n            this.activate();\n        }\n    }\n    /**\n     * Define the motion to apply on select\n     * @param motion Feature motion\n     */\n    setMotion(motion) {\n        this.motion = motion;\n    }\n    /**\n     * Unselect all entities, from all stores\n     */\n    unselectAll() {\n        this.stores.forEach((store) => {\n            store.state.updateAll({ selected: false });\n        });\n    }\n    /**\n     * Clear the overlay\n     */\n    clear() {\n        this.overlayStore.source.ol.clear();\n        this.overlayStore.clear();\n    }\n    /**\n     * Deactivate the selection without removing the selection\n     * overlay.\n     */\n    deactivateSelection() {\n        this.unlistenToMapClick();\n        this.removeDragBoxInteraction();\n        this.unwatchAll();\n    }\n    /**\n     * Add the overlay layer, setup the map click lsitener and\n     * start watching for stores selection\n     * @internal\n     */\n    doActivate() {\n        this.addOverlayLayer();\n        this.listenToMapClick();\n        if (this.options.dragBox === true) {\n            this.addDragBoxInteraction();\n        }\n        this.watchAll();\n    }\n    /**\n     * Remove the overlay layer, remove the map click lsitener and\n     * stop watching for stores selection\n     * @internal\n     */\n    doDeactivate() {\n        this.deactivateSelection();\n        this.removeOverlayLayer();\n    }\n    /**\n     * Create a single observable of all the stores. With a single observable,\n     * features can be added all at once to the overlay layer and a single\n     * motion can be performed. Multiple observable would have\n     * a cancelling effect on each other.\n     */\n    watchAll() {\n        this.unwatchAll();\n        const stores$ = this.stores.map((store) => {\n            return store.stateView\n                .manyBy$((record) => {\n                return record.state.selected === true;\n            })\n                .pipe(map((records) => records.map((record) => record.entity)));\n        });\n        this.stores$$ = combineLatest(stores$)\n            .pipe(debounceTime(5), skip(1), // Skip intial selection\n        map((features) => features.reduce((a, b) => a.concat(b))))\n            .subscribe((features) => this.onSelectFromStore(features));\n    }\n    /**\n     * Stop watching for selection in all stores.\n     */\n    unwatchAll() {\n        if (this.stores$$ !== undefined) {\n            this.stores$$.unsubscribe();\n        }\n    }\n    /**\n     * Add a 'singleclick' listener to the map that'll allow selecting\n     * features by clicking on the map. The selection will be performed\n     * only on the layers bound to this strategy.\n     */\n    listenToMapClick() {\n        this.mapClickListener = this.map.ol.on('singleclick', (event) => {\n            this.onMapClick(event);\n        });\n    }\n    /**\n     * Remove the map click listener\n     */\n    unlistenToMapClick() {\n        if (this.mapClickListener !== undefined) {\n            this.map.ol.un(this.mapClickListener.type, this.mapClickListener.listener);\n        }\n    }\n    /**\n     * On map click, select feature at pixel\n     * @param event OL MapBrowserPointerEvent\n     */\n    onMapClick(event) {\n        const exclusive = !ctrlKeyDown(event);\n        const reverse = !exclusive;\n        const olFeatures = event.map.getFeaturesAtPixel(event.pixel, {\n            hitTolerance: this.options.hitTolerance || 0,\n            layerFilter: olLayer => {\n                const storeOlLayer = this.stores.find((store) => {\n                    return store.layer.ol === olLayer;\n                });\n                return storeOlLayer !== undefined;\n            }\n        });\n        this.onSelectFromMap(olFeatures, exclusive, reverse);\n    }\n    /**\n     * Add a drag box interaction and, on drag box end, select features\n     */\n    addDragBoxInteraction() {\n        let olDragSelectInteraction;\n        const olInteractions = this.map.ol.getInteractions().getArray();\n        // There can only be one dragbox interaction, so find the current one, if any\n        // Don't keep a reference to the current dragbox because we don't want\n        // to remove it when this startegy is deactivated\n        for (const olInteraction of olInteractions) {\n            if (olInteraction instanceof OlDragSelectInteraction) {\n                olDragSelectInteraction = olInteraction;\n                break;\n            }\n        }\n        // If no drag box interaction is found, create a new one and add it to the map\n        if (olDragSelectInteraction === undefined) {\n            olDragSelectInteraction = new OlDragSelectInteraction({\n                condition: ctrlKeyDown\n            });\n            this.map.ol.addInteraction(olDragSelectInteraction);\n            this.olDragSelectInteraction = olDragSelectInteraction;\n        }\n        this.olDragSelectInteractionEndKey = olDragSelectInteraction.on('boxend', (event) => this.onDragBoxEnd(event));\n    }\n    /**\n     * Remove drag box interaction\n     */\n    removeDragBoxInteraction() {\n        if (this.olDragSelectInteractionEndKey !== undefined) {\n            unByKey(this.olDragSelectInteractionEndKey);\n        }\n        if (this.olDragSelectInteraction !== undefined) {\n            this.map.ol.removeInteraction(this.olDragSelectInteraction);\n        }\n        this.olDragSelectInteraction = undefined;\n    }\n    /**\n     * On dragbox end, select features in drag box\n     * @param event OL MapBrowserPointerEvent\n     */\n    onDragBoxEnd(event) {\n        const exclusive = !ctrlKeyDown(event.mapBrowserEvent);\n        const extent = event.target.getGeometry().getExtent();\n        const olFeatures = this.stores.reduce((acc, store) => {\n            const olSource = store.layer.ol.getSource();\n            acc.push(...olSource.getFeaturesInExtent(extent));\n            return acc;\n        }, []);\n        this.onSelectFromMap(olFeatures, exclusive, false);\n    }\n    /**\n     * When features are selected from the store, add\n     * them to this startegy's overlay layer (select on map)\n     * @param features Store features\n     */\n    onSelectFromStore(features) {\n        const motion = this.motion;\n        const olOverlayFeatures = this.overlayStore.layer.ol\n            .getSource()\n            .getFeatures();\n        const overlayFeaturesKeys = olOverlayFeatures.map((olFeature) => olFeature.getId());\n        const featuresKeys = features.map(this.overlayStore.getKey);\n        let doMotion;\n        if (features.length === 0) {\n            doMotion = false;\n        }\n        else {\n            doMotion =\n                overlayFeaturesKeys.length !== featuresKeys.length ||\n                    !overlayFeaturesKeys.every((key) => featuresKeys.indexOf(key) >= 0);\n        }\n        this.overlayStore.setLayerFeatures(features, doMotion ? motion : FeatureMotion.None, this.options.viewScale, this.options.areaRatio, this.options.getFeatureId);\n    }\n    /**\n     * When features are selected from the map, also select them\n     * in their store.\n     * @param olFeatures OL feature objects\n     */\n    onSelectFromMap(olFeatures, exclusive, reverse) {\n        const groupedFeatures = this.groupFeaturesByStore(olFeatures);\n        this.stores.forEach((store) => {\n            const features = groupedFeatures.get(store);\n            if (features === undefined && exclusive === true) {\n                this.unselectAllFeaturesFromStore(store);\n            }\n            else if (features === undefined && exclusive === false) {\n                // Do nothing\n            }\n            else {\n                this.selectFeaturesFromStore(store, features, exclusive, reverse);\n            }\n        });\n    }\n    /**\n     * Select features in store\n     * @param store: Feature store\n     * @param features Features\n     */\n    selectFeaturesFromStore(store, features, exclusive, reverse) {\n        if (reverse === true) {\n            store.state.reverseMany(features, ['selected']);\n        }\n        else {\n            store.state.updateMany(features, { selected: true }, exclusive);\n        }\n    }\n    /**\n     * Unselect all features from store\n     * @param store: Feature store\n     */\n    unselectAllFeaturesFromStore(store) {\n        store.state.updateAll({ selected: false });\n    }\n    /**\n     * This method returns a store -> features mapping from a list\n     * of OL selected features. OL features keep a reference to the store\n     * they are from.\n     * @param olFeatures: OL feature objects\n     * @returns Store -> features mapping\n     */\n    groupFeaturesByStore(olFeatures) {\n        const groupedFeatures = new Map();\n        if (olFeatures === null || olFeatures === undefined) {\n            return groupedFeatures;\n        }\n        olFeatures.forEach((olFeature) => {\n            const store = olFeature.get('_featureStore');\n            if (store === undefined) {\n                return;\n            }\n            let features = groupedFeatures.get(store);\n            if (features === undefined) {\n                features = [];\n                groupedFeatures.set(store, features);\n            }\n            const feature = store.get(olFeature.getId());\n            if (feature !== undefined) {\n                features.push(feature);\n            }\n        });\n        return groupedFeatures;\n    }\n    /**\n     * Create an overlay store that'll contain the selected features.\n     * @returns Overlay store\n     */\n    createOverlayStore() {\n        const overlayLayer = this.options.layer\n            ? this.options.layer\n            : this.createOverlayLayer();\n        return new FeatureStore([], { map: this.map }).bindLayer(overlayLayer);\n    }\n    /**\n     * Create an overlay store that'll contain the selected features.\n     * @returns Overlay layer\n     */\n    createOverlayLayer() {\n        return new VectorLayer({\n            zIndex: 300,\n            source: new FeatureDataSource(),\n            style: undefined,\n            showInLayerList: false,\n            exportable: false,\n            browsable: false\n        });\n    }\n    /**\n     * Add the overlay store's layer to the map to display the selected\n     * features.\n     */\n    addOverlayLayer() {\n        if (this.overlayStore.layer.map === undefined) {\n            this.map.addLayer(this.overlayStore.layer);\n        }\n    }\n    /**\n     * Remove the overlay layer from the map\n     */\n    removeOverlayLayer() {\n        this.overlayStore.source.ol.clear();\n        this.map.removeLayer(this.overlayStore.layer);\n    }\n}\n\n/**\n * Try to add a loading strategy to a store and activate it.\n * If no strategy is given to that function, a basic one will be created.\n * @param store The store to bind the loading strategy\n * @param strategy An optional loading strategy\n */\nfunction tryAddLoadingStrategy(store, strategy) {\n    if (store.getStrategyOfType(FeatureStoreLoadingStrategy) !== undefined) {\n        store.activateStrategyOfType(FeatureStoreLoadingStrategy);\n        return;\n    }\n    strategy = strategy ? strategy : new FeatureStoreLoadingStrategy({});\n    store.addStrategy(strategy);\n    strategy.activate();\n}\n/**\n * Try to add a selection strategy to a store and activate it.\n * If no strategy is given to that function, a basic one will be created.\n * @param store The store to bind the selection strategy\n * @param [strategy] An optional selection strategy\n */\nfunction tryAddSelectionStrategy(store, strategy) {\n    if (store.getStrategyOfType(FeatureStoreSelectionStrategy) !== undefined) {\n        store.activateStrategyOfType(FeatureStoreSelectionStrategy);\n        return;\n    }\n    strategy = strategy\n        ? strategy\n        : new FeatureStoreSelectionStrategy({\n            map: store.map\n        });\n    store.addStrategy(strategy);\n    strategy.activate();\n}\n\n/**\n * Create an overlay layer and it's source\n * @returns Overlay layer\n */\nfunction createOverlayLayer() {\n    const overlayDataSource = new FeatureDataSource();\n    return new VectorLayer({\n        title: 'Overlay',\n        zIndex: 300,\n        source: overlayDataSource,\n        style: createOverlayLayerStyle()\n    });\n}\n/**\n * Create an overlay style with markers for points and a basic stroke/fill\n * combination for lines and polygons\n * @returns Style function\n */\nfunction createOverlayLayerStyle() {\n    const defaultStyle = createOverlayDefaultStyle();\n    const markerStyle = createOverlayMarkerStyle();\n    let style;\n    return (olFeature) => {\n        if (olFeature.getId() === 'bufferFeature') {\n            style = createBufferStyle(olFeature.get('bufferStroke'), 2, olFeature.get('bufferFill'), olFeature.get('bufferText'));\n            return style;\n        }\n        else {\n            const customStyle = olFeature.get('_style');\n            if (customStyle) {\n                const styleService = new StyleService();\n                return styleService.createStyle(customStyle);\n            }\n            const geometryType = olFeature.getGeometry().getType();\n            style = geometryType === 'Point' ? markerStyle : defaultStyle;\n            style.getText().setText(olFeature.get('_mapTitle'));\n            return style;\n        }\n    };\n}\n/**\n * Create a basic style for lines and polygons\n * @returns Style\n */\nfunction createOverlayDefaultStyle({ text, fillOpacity, strokeWidth = 2, strokeOpacity, color = [0, 161, 222, 0.3], strokeColor } = {}) {\n    const fillWithOpacity = color.slice(0);\n    const strokeWithOpacity = color.slice(0);\n    strokeWithOpacity[3] = 1;\n    if (fillOpacity) {\n        fillWithOpacity[3] = fillOpacity;\n    }\n    if (strokeOpacity) {\n        strokeWithOpacity[3] = strokeOpacity;\n    }\n    if (strokeColor) {\n        strokeWithOpacity[0] = strokeColor[0];\n        strokeWithOpacity[1] = strokeColor[1];\n        strokeWithOpacity[2] = strokeColor[2];\n    }\n    const stroke = new Stroke({\n        width: strokeWidth,\n        color: strokeWithOpacity\n    });\n    const fill = new Fill({\n        color: fillWithOpacity\n    });\n    return new Style({\n        stroke,\n        fill,\n        image: new Circle({\n            radius: 5,\n            stroke,\n            fill\n        }),\n        text: new Text({\n            text,\n            font: '12px Calibri,sans-serif',\n            fill: new Fill({ color: '#000' }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            overflow: true\n        })\n    });\n}\nfunction createBufferStyle(strokeRGBA = [0, 161, 222, 1], strokeWidth = 2, fillRGBA = [0, 161, 222, 0.15], bufferRadius) {\n    const stroke = new Stroke({\n        width: strokeWidth,\n        color: strokeRGBA\n    });\n    const fill = new Stroke({\n        color: fillRGBA\n    });\n    return new Style({\n        stroke,\n        fill,\n        image: new Circle({\n            radius: 5,\n            stroke,\n            fill\n        }),\n        text: new Text({\n            font: '12px Calibri,sans-serif',\n            text: bufferRadius,\n            fill: new Fill({ color: '#000' }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            overflow: true\n        })\n    });\n}\n\n/**\n * This class is simply a shortcut for adding features to a map.\n * It does nothing more than a standard layer but it's shipped with\n * a defautl style based on the geometry type of the features it contains.\n * @todo Enhance that by using a FeatureStore and strategies.\n */\nclass Overlay {\n    constructor(map) {\n        this.layer = createOverlayLayer();\n        this.setMap(map);\n    }\n    /**\n     * Overlay layer's data source\n     */\n    get dataSource() {\n        return this.layer.dataSource;\n    }\n    /**\n     * Bind this to a map and add the overlay layer to that map\n     * @param map Map\n     */\n    setMap(map) {\n        if (map === undefined) {\n            if (this.map !== undefined) {\n                this.map.ol.removeLayer(this.layer.ol);\n            }\n        }\n        else {\n            map.ol.addLayer(this.layer.ol);\n        }\n        this.map = map;\n    }\n    /**\n     * Set the overlay features and, optionally, move to them\n     * @param features Features\n     * @param motion Optional: Apply this motion to the map view\n     * @param sourceId Optional: Remove features of certain sourceId (ex: 'Map' for query features)\n     */\n    setFeatures(features, motion = FeatureMotion.Default, sourceId) {\n        if (sourceId) {\n            for (const olFeature of this.dataSource.ol.getFeatures()) {\n                if (olFeature.get('_sourceId') === sourceId) {\n                    this.removeOlFeature(olFeature);\n                }\n            }\n        }\n        else {\n            this.clear();\n        }\n        this.addFeatures(features, motion);\n    }\n    /**\n     * Add a feature to the  overlay and, optionally, move to it\n     * @param feature Feature\n     * @param motion Optional: Apply this motion to the map view\n     */\n    addFeature(feature, motion = FeatureMotion.Default) {\n        this.addFeatures([feature], motion);\n    }\n    /**\n     * Add features to the  overlay and, optionally, move to them\n     * @param features Features\n     * @param motion Optional: Apply this motion to the map view\n     */\n    addFeatures(features, motion = FeatureMotion.Default) {\n        const olFeatures = [];\n        features.forEach((feature) => {\n            const olFeature = featureToOl(feature, this.map.projection);\n            const olGeometry = olFeature.getGeometry();\n            if (olGeometry === null) {\n                return;\n            }\n            olFeatures.push(olFeature);\n        });\n        this.addOlFeatures(olFeatures, motion);\n    }\n    /**\n     * Add a OpenLayers feature to the  overlay and, optionally, move to it\n     * @param olFeature OpenLayers Feature\n     * @param motion Optional: Apply this motion to the map view\n     */\n    addOlFeature(olFeature, motion = FeatureMotion.Default) {\n        this.addOlFeatures([olFeature], motion);\n    }\n    /**\n     * Add OpenLayers features to the overlay and, optionally, move to them\n     * @param olFeatures OpenLayers Features\n     * @param motion Optional: Apply this motion to the map view\n     */\n    addOlFeatures(olFeatures, motion = FeatureMotion.Default) {\n        this.dataSource.ol.addFeatures(olFeatures);\n        moveToOlFeatures(this.map, olFeatures, motion);\n    }\n    /**\n     * Remove a feature from the overlay\n     * @param feature Feature\n     */\n    removeFeature(feature) {\n        this.removeFeatures([feature]);\n    }\n    /**\n     * Remove features from the overlay\n     * @param features Features\n     */\n    removeFeatures(features) {\n        features.forEach((feature) => {\n            if (feature.meta) {\n                if (this.dataSource.ol.getFeatureById(feature.meta.id)) {\n                    this.removeOlFeature(this.dataSource.ol.getFeatureById(feature.meta.id));\n                }\n            }\n        });\n    }\n    /**\n     * Remove an OpenLayers feature from the overlay\n     * @param olFeature OpenLayers Feature\n     */\n    removeOlFeature(olFeature) {\n        this.dataSource.ol.removeFeature(olFeature);\n    }\n    /**\n     * Clear the overlay\n     */\n    clear() {\n        this.dataSource.ol.clear();\n    }\n}\n\nclass LayerWatcher extends Watcher {\n    constructor() {\n        super();\n        this.loaded = 0;\n        this.loading = 0;\n        this.layers = [];\n        this.subscriptions = [];\n    }\n    watch() { }\n    unwatch() {\n        this.layers.forEach(layer => this.unwatchLayer(layer), this);\n    }\n    watchLayer(layer) {\n        if (layer.status$ === undefined) {\n            return;\n        }\n        this.layers.push(layer);\n        const layer$$ = layer.status$\n            .pipe(distinctUntilChanged())\n            .subscribe(status => {\n            if (status === SubjectStatus.Working) {\n                this.loading += 1;\n            }\n            else if (status === SubjectStatus.Done) {\n                this.loaded += 1;\n            }\n            if (this.loaded >= this.loading) {\n                this.loading = this.loaded = 0;\n                this.status = SubjectStatus.Done;\n            }\n            else if (this.loading > 0) {\n                this.status = SubjectStatus.Working;\n            }\n        });\n        this.subscriptions.push(layer$$);\n    }\n    unwatchLayer(layer) {\n        layer.status$.next(SubjectStatus.Done);\n        const index = this.layers.indexOf(layer);\n        if (index >= 0) {\n            const status = layer.watcher.status;\n            if ([SubjectStatus.Working, SubjectStatus.Waiting].indexOf(status) !== -1) {\n                this.loaded += 1;\n            }\n            this.subscriptions[index].unsubscribe();\n            this.subscriptions.splice(index, 1);\n            this.layers.splice(index, 1);\n            layer.watcher.unwatch();\n        }\n    }\n}\n\nvar MapViewAction;\n(function (MapViewAction) {\n    MapViewAction[MapViewAction[\"Move\"] = 0] = \"Move\";\n    MapViewAction[MapViewAction[\"Zoom\"] = 1] = \"Zoom\";\n})(MapViewAction || (MapViewAction = {}));\n\n/**\n * Base map controller\n */\nclass MapController {\n    constructor() {\n        /**\n         * Array of observer keys\n         */\n        this.observerKeys = [];\n    }\n    /**\n     * Return the OL map this controller is bound to\n     * @returns OL Map\n     */\n    getOlMap() {\n        return this.olMap;\n    }\n    /**\n     * Add or remove this controller to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        if (olMap !== undefined && this.getOlMap() !== undefined) {\n            throw new Error('This controller is already bound to a map.');\n        }\n        if (olMap === undefined) {\n            this.teardownObservers();\n            this.olMap = olMap;\n            return;\n        }\n        this.olMap = olMap;\n    }\n    /**\n     * Teardown any observers\n     */\n    teardownObservers() {\n        this.observerKeys.forEach((key) => unByKey(key));\n        this.observerKeys = [];\n    }\n}\n\n/**\n * Controller to handle map view interactions\n */\nclass MapViewController extends MapController {\n    constructor(options) {\n        super();\n        this.options = options;\n        /**\n         * Observable of the current resolution\n         */\n        this.resolution$ = new BehaviorSubject(undefined);\n        /**\n         * Observable of the current state\n         */\n        this.state$ = new BehaviorSubject(undefined);\n        /**\n         * View Padding\n         */\n        this.padding = [0, 0, 0, 0];\n        /**\n         * Max zoom after set extent\n         */\n        this.maxZoomOnExtent = 19;\n        /**\n         * Extent stream\n         */\n        this.extent$ = new Subject();\n        /**\n         * History of states\n         */\n        this.states = [];\n        /**\n         * Current state index\n         */\n        this.stateIndex = 0;\n    }\n    /**\n     * Whether the view controller should keep the view's state history\n     */\n    get stateHistory() {\n        return this.options ? this.options.stateHistory === true : false;\n    }\n    /**\n     * OL View\n     */\n    get olView() {\n        return this.olMap.getView();\n    }\n    /**\n     * Add or remove this controller to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        super.setOlMap(olMap);\n        this.setupObservers();\n    }\n    /**\n     * Observe move moveend and subscribe to the extent stream\n     */\n    setupObservers() {\n        if (this.stateHistory === true) {\n            this.observerKeys.push(this.olMap.on('moveend', (event) => this.onMoveEnd(event)));\n        }\n        this.extent$$ = this.extent$\n            .pipe(debounceTime(25))\n            .subscribe((value) => {\n            this.setExtent(value.extent, value.action);\n        });\n    }\n    /**\n     * Teardown any observers\n     */\n    teardownObservers() {\n        super.teardownObservers();\n        if (this.extent$$ !== undefined) {\n            this.extent$$.unsubscribe();\n            this.extent$$ = undefined;\n        }\n    }\n    /**\n     * Get the view's OL projection\n     * @returns OL projection\n     */\n    getOlProjection() {\n        return this.olView.getProjection();\n    }\n    /**\n     * Get the current map view center\n     * @param projection Output projection\n     * @returns Center\n     */\n    getCenter(projection) {\n        let center = this.olView.getCenter();\n        if (projection && center) {\n            center = transform(center, this.getOlProjection(), projection);\n        }\n        return center;\n    }\n    /**\n     * Get the current view extent\n     * @param projection Output projection\n     * @returns Extent\n     */\n    getExtent(projection) {\n        let extent = this.olView.calculateExtent(this.olMap.getSize());\n        if (projection && extent) {\n            extent = transformExtent(extent, this.getOlProjection(), projection);\n        }\n        return extent;\n    }\n    /**\n     * Get the current scale\n     * @param dpi Dot per inches\n     * @returns View scale\n     */\n    getScale(dpi = 96) {\n        return getScaleFromResolution(this.getResolution(), this.getOlProjection().getUnits(), dpi);\n    }\n    /**\n     * Get the current resolution\n     * @returns Projection denominator\n     */\n    getResolution() {\n        return this.olView.getResolution();\n    }\n    /**\n     * Get the current zoom level\n     * @returns Zoom level\n     */\n    getZoom() {\n        return Math.round(this.olView.getZoom());\n    }\n    /**\n     * Zoom in\n     */\n    zoomIn() {\n        this.zoomTo(this.olView.getZoom() + 1);\n    }\n    /**\n     * Zoom out\n     */\n    zoomOut() {\n        this.zoomTo(this.olView.getZoom() - 1);\n    }\n    /**\n     * Zoom to specific zoom level\n     * @param zoom Zoom level\n     */\n    zoomTo(zoom) {\n        this.olView.cancelAnimations();\n        this.olView.animate({\n            zoom,\n            duration: 250,\n            easing: easeOut\n        });\n    }\n    /**\n     * Move to extent after a short delay (100ms) unless\n     * a new movement gets registered in the meantime.\n     * @param extent Extent to move to\n     */\n    moveToExtent(extent) {\n        this.extent$.next({ extent, action: MapViewAction.Move });\n    }\n    /**\n     * Zoom to extent after a short delay (100ms) unless\n     * a new movement gets registered in the meantime.\n     * @param extent Extent to zoom to\n     */\n    zoomToExtent(extent) {\n        this.extent$.next({ extent, action: MapViewAction.Zoom });\n    }\n    /**\n     * Return the current view rotation\n     * @returns Rotation angle in degrees\n     */\n    getRotation() {\n        return this.olView.getRotation();\n    }\n    /**\n     * Reset the view rotation to 0\n     */\n    resetRotation() {\n        this.olView.animate({ rotation: 0 });\n    }\n    /**\n     * Whether the view has a previous state\n     * @returns True if the view has a previous state\n     */\n    hasPreviousState() {\n        return this.states.length > 1 && this.stateIndex > 0;\n    }\n    /**\n     * Whether the view has a next state\n     * @returns True if the view has a next state\n     */\n    hasNextState() {\n        return this.states.length > 1 && this.stateIndex < this.states.length - 1;\n    }\n    /**\n     * Restore the previous view state\n     */\n    previousState() {\n        if (this.hasPreviousState()) {\n            this.setStateIndex(this.stateIndex - 1);\n        }\n    }\n    /**\n     * Restore the next view state\n     */\n    nextState() {\n        if (this.hasNextState()) {\n            this.setStateIndex(this.stateIndex + 1);\n        }\n    }\n    /**\n     * Clear the state history\n     */\n    clearStateHistory() {\n        this.states = [];\n        this.stateIndex = 0;\n    }\n    /**\n     * Update the the view to it's intial state\n     */\n    setInitialState() {\n        if (this.states.length > 0) {\n            this.setStateIndex(0);\n        }\n    }\n    /**\n     * Move to the extent retrieved from the stream\n     * @param extent Extent\n     * @param action Either zoom or move\n     * @param animation With or without animation to the target extent.\n     */\n    setExtent(extent, action, animation = true) {\n        const olView = this.olView;\n        olView.cancelAnimations();\n        const duration = animation ? 500 : 0;\n        const zoom = olView.getZoom();\n        const fromCenter = olView.getCenter();\n        const toCenter = [\n            extent[0] + (extent[2] - extent[0]) / 2,\n            extent[1] + (extent[3] - extent[1]) / 2\n        ];\n        const distCenter = Math.sqrt(Math.pow(fromCenter[0] - toCenter[0], 2) +\n            Math.pow(fromCenter[1] - toCenter[1], 2));\n        const fromExtent = olView.calculateExtent();\n        const fromSize = Math.sqrt(Math.pow(fromExtent[2] - fromExtent[0], 2) +\n            Math.pow(fromExtent[3] - fromExtent[1], 2));\n        const toSize = Math.sqrt(Math.pow(extent[2] - extent[0], 2) + Math.pow(extent[3] - extent[1], 2));\n        const moySize = (toSize + fromSize) / 2;\n        const xSize = distCenter / moySize;\n        const maxZoom = action === MapViewAction.Move || zoom > this.maxZoomOnExtent\n            ? zoom\n            : this.maxZoomOnExtent;\n        olView.fit(extent, {\n            size: this.olMap.getSize(),\n            maxZoom,\n            padding: this.padding,\n            duration: xSize > 4 ? 0 : duration\n        });\n    }\n    /**\n     * Set the view state index\n     * @param index State index\n     */\n    setStateIndex(index) {\n        this.stateIndex = index;\n        this.setState(this.states[index]);\n    }\n    /**\n     * Set the view state\n     * @param state View state\n     */\n    setState(state) {\n        this.olView.animate({\n            resolution: state.resolution,\n            center: state.center,\n            duration: 0\n        });\n    }\n    /**\n     * On move end, get the view state and record it.\n     * @param event Map event\n     */\n    onMoveEnd(event) {\n        const resolution = this.getResolution();\n        if (this.resolution$.value !== resolution) {\n            this.resolution$.next(resolution);\n        }\n        const state = {\n            resolution,\n            center: this.getCenter(),\n            zoom: this.getZoom()\n        };\n        if (this.stateHistory === true) {\n            const stateIndex = this.stateIndex;\n            const stateAtIndex = this.states.length === 0 ? undefined : this.states[stateIndex];\n            if (!viewStatesAreEqual(state, stateAtIndex)) {\n                this.states = this.states.slice(0, stateIndex + 1).concat([state]);\n                this.stateIndex = this.states.length - 1;\n            }\n        }\n        this.state$.next(state);\n    }\n}\n\n// TODO: This class is messy. Clearly define it's scope and the map browser's.\n// Move some stuff into controllers.\nclass IgoMap {\n    constructor(options) {\n        this.offlineButtonToggle$ = new BehaviorSubject(false);\n        this.layers$ = new BehaviorSubject([]);\n        this.positionFollower = true;\n        this.geolocation$ = new BehaviorSubject(undefined);\n        this.defaultOptions = {\n            controls: { attribution: false }\n        };\n        this.options = Object.assign({}, this.defaultOptions, options);\n        this.layerWatcher = new LayerWatcher();\n        this.status$ = this.layerWatcher.status$;\n        register(proj4);\n        this.init();\n    }\n    get layers() {\n        return this.layers$.value;\n    }\n    get projection() {\n        return this.viewController.getOlProjection().getCode();\n    }\n    init() {\n        const controls = [];\n        if (this.options.controls) {\n            if (this.options.controls.attribution) {\n                const attributionOpt = (this.options.controls.attribution === true\n                    ? {}\n                    : this.options.controls.attribution);\n                controls.push(new olAttribution(attributionOpt));\n            }\n            if (this.options.controls.scaleLine) {\n                const scaleLineOpt = (this.options.controls.scaleLine === true\n                    ? {}\n                    : this.options.controls.scaleLine);\n                controls.push(new olControlScaleLine(scaleLineOpt));\n            }\n        }\n        let interactions = {};\n        if (this.options.interactions === false) {\n            interactions = {\n                altShiftDragRotate: false,\n                doubleClickZoom: false,\n                keyboard: false,\n                mouseWheelZoom: false,\n                shiftDragZoom: false,\n                dragPan: false,\n                pinchRotate: false,\n                pinchZoom: false\n            };\n        }\n        this.ol = new olMap({\n            interactions: defaults(interactions),\n            controls\n        });\n        this.setView(this.options.view || {});\n        this.viewController = new MapViewController({\n            stateHistory: true\n        });\n        this.viewController.setOlMap(this.ol);\n        this.overlay = new Overlay(this);\n        this.buffer = new Overlay(this);\n    }\n    setTarget(id) {\n        this.ol.setTarget(id);\n        if (id !== undefined) {\n            this.layerWatcher.subscribe(() => { }, null);\n        }\n        else {\n            this.layerWatcher.unsubscribe();\n        }\n    }\n    updateView(options) {\n        const currentView = this.ol.getView();\n        const viewOptions = Object.assign({\n            zoom: currentView.getZoom()\n        }, currentView.getProperties());\n        this.setView(Object.assign(viewOptions, options));\n        if (options.maxZoomOnExtent) {\n            this.viewController.maxZoomOnExtent = options.maxZoomOnExtent;\n        }\n    }\n    /**\n     * Set the map view\n     * @param options Map view options\n     */\n    setView(options) {\n        if (this.viewController !== undefined) {\n            this.viewController.clearStateHistory();\n        }\n        options = Object.assign({ constrainResolution: true }, options);\n        const view = new olView(options);\n        this.ol.setView(view);\n        this.unsubscribeGeolocate();\n        if (options) {\n            if (options.center) {\n                const projection = view.getProjection().getCode();\n                const center = fromLonLat(options.center, projection);\n                view.setCenter(center);\n            }\n            if (options.geolocate) {\n                this.geolocate(true);\n            }\n            if (options.alwaysTracking) {\n                this.alwaysTracking = true;\n            }\n        }\n    }\n    /**\n     * Deprecated\n     * TODO: Move to ViewController and update every place it's used\n     */\n    getCenter(projection) {\n        return this.viewController.getCenter(projection);\n    }\n    /**\n     * Deprecated\n     * TODO: Move to ViewController and update every place it's used\n     */\n    getExtent(projection) {\n        return this.viewController.getExtent(projection);\n    }\n    // TODO: Move to ViewController and update every place it's used\n    getZoom() {\n        return this.viewController.getZoom();\n    }\n    changeBaseLayer(baseLayer) {\n        if (!baseLayer) {\n            return;\n        }\n        for (const bl of this.getBaseLayers()) {\n            bl.visible = false;\n        }\n        baseLayer.visible = true;\n        this.viewController.olView.setMinZoom(baseLayer.dataSource.options.minZoom || (this.options.view || {}).minZoom);\n        this.viewController.olView.setMaxZoom(baseLayer.dataSource.options.maxZoom || (this.options.view || {}).maxZoom);\n    }\n    getBaseLayers() {\n        return this.layers.filter((layer) => layer.baseLayer === true);\n    }\n    getLayerById(id) {\n        return this.layers.find((layer) => layer.id && layer.id === id);\n    }\n    getLayerByAlias(alias) {\n        return this.layers.find((layer) => layer.alias && layer.alias === alias);\n    }\n    /**\n     * Add a single layer\n     * @param layer Layer to add\n     * @param push DEPRECATED\n     */\n    addLayer(layer, push = true) {\n        this.addLayers([layer]);\n    }\n    /**\n     * Add many layers\n     * @param layers Layers to add\n     * @param push DEPRECATED\n     */\n    addLayers(layers, push = true) {\n        let offsetZIndex = 0;\n        let offsetBaseLayerZIndex = 0;\n        const addedLayers = layers\n            .map((layer) => {\n            const offset = layer.zIndex\n                ? 0\n                : layer.baseLayer\n                    ? offsetBaseLayerZIndex++\n                    : offsetZIndex++;\n            return this.doAddLayer(layer, offset);\n        })\n            .filter((layer) => layer !== undefined);\n        this.setLayers([].concat(this.layers, addedLayers));\n    }\n    /**\n     * Remove a single layer\n     * @param layer Layer to remove\n     */\n    removeLayer(layer) {\n        this.removeLayers([layer]);\n    }\n    /**\n     * Remove many layers\n     * @param layers Layers to remove\n     */\n    removeLayers(layers) {\n        const newLayers = this.layers$.value.slice(0);\n        const layersToRemove = [];\n        layers.forEach((layer) => {\n            const index = newLayers.indexOf(layer);\n            if (index >= 0) {\n                layersToRemove.push(layer);\n                newLayers.splice(index, 1);\n            }\n        });\n        layersToRemove.forEach((layer) => this.doRemoveLayer(layer));\n        this.setLayers(newLayers);\n    }\n    /**\n     * Remove all layers\n     */\n    removeAllLayers() {\n        this.layers.forEach((layer) => this.doRemoveLayer(layer));\n        this.layers$.next([]);\n    }\n    raiseLayer(layer) {\n        const index = this.getLayerIndex(layer);\n        if (index > 1) {\n            this.moveLayer(layer, index, index - 1);\n        }\n    }\n    raiseLayers(layers) {\n        for (const layer of layers) {\n            this.raiseLayer(layer);\n        }\n    }\n    lowerLayer(layer) {\n        const index = this.getLayerIndex(layer);\n        if (index < this.layers.length - 1) {\n            this.moveLayer(layer, index, index + 1);\n        }\n    }\n    lowerLayers(layers) {\n        const reverseLayers = layers.reverse();\n        for (const layer of reverseLayers) {\n            this.lowerLayer(layer);\n        }\n    }\n    moveLayer(layer, from, to) {\n        const layerTo = this.layers[to];\n        const zIndexTo = layerTo.zIndex;\n        const zIndexFrom = layer.zIndex;\n        if (layerTo.baseLayer || layer.baseLayer) {\n            return;\n        }\n        layer.zIndex = zIndexTo;\n        layerTo.zIndex = zIndexFrom;\n        this.layers[to] = layer;\n        this.layers[from] = layerTo;\n        this.layers$.next(this.layers.slice(0));\n    }\n    /**\n     * Add a layer to the OL map and start watching. If the layer is already\n     * added to this map, make it visible but don't add it one again.\n     * @param layer Layer\n     * @returns The layer added, if any\n     */\n    doAddLayer(layer, offsetZIndex) {\n        if (layer.baseLayer && layer.visible) {\n            this.changeBaseLayer(layer);\n        }\n        const existingLayer = this.getLayerById(layer.id);\n        if (existingLayer !== undefined) {\n            existingLayer.visible = true;\n            return;\n        }\n        if (!layer.baseLayer && layer.zIndex) {\n            layer.zIndex += 10;\n        }\n        if (layer.zIndex === undefined || layer.zIndex === 0) {\n            const maxZIndex = Math.max(layer.baseLayer ? 0 : 10, ...this.layers\n                .filter((l) => l.baseLayer === layer.baseLayer && l.zIndex < 200 // zIndex > 200 = system layer\n            )\n                .map((l) => l.zIndex));\n            layer.zIndex = maxZIndex + 1 + offsetZIndex;\n        }\n        if (layer.baseLayer && layer.zIndex > 9) {\n            layer.zIndex = 10; // baselayer must have zIndex < 10\n        }\n        layer.setMap(this);\n        this.layerWatcher.watchLayer(layer);\n        this.ol.addLayer(layer.ol);\n        return layer;\n    }\n    /**\n     * Remove a layer from the OL map and stop watching\n     * @param layer Layer\n     */\n    doRemoveLayer(layer) {\n        this.layerWatcher.unwatchLayer(layer);\n        this.ol.removeLayer(layer.ol);\n        layer.setMap(undefined);\n    }\n    /**\n     * Update the layers observable\n     * @param layers Layers\n     */\n    setLayers(layers) {\n        this.layers$.next(this.sortLayersByZIndex(layers).slice(0));\n    }\n    /**\n     * Sort layers by descending zIndex\n     * @param layers Array of layers\n     * @returns The original array, sorted by zIndex\n     */\n    sortLayersByZIndex(layers) {\n        // Sort by descending zIndex\n        return layers.sort((layer1, layer2) => layer2.zIndex - layer1.zIndex);\n    }\n    /**\n     * Get layer index in the map's inenr array of layers\n     * @param layer Layer\n     * @returns The layer index\n     */\n    getLayerIndex(layer) {\n        return this.layers.findIndex((_layer) => _layer === layer);\n    }\n    // TODO: Create a GeolocationController with everything below\n    geolocate(track = false) {\n        let first = true;\n        if (this.geolocation$$) {\n            track = this.geolocation.getTracking();\n            this.unsubscribeGeolocate();\n        }\n        this.startGeolocation();\n        this.geolocation$$ = this.geolocation$.subscribe((geolocation) => {\n            if (!geolocation) {\n                return;\n            }\n            const accuracy = geolocation.getAccuracy();\n            if (accuracy < 10000) {\n                const geometry = geolocation.getAccuracyGeometry();\n                const extent = geometry.getExtent();\n                if (this.geolocationFeature &&\n                    this.overlay.dataSource.ol.getFeatureById(this.geolocationFeature.getId())) {\n                    this.overlay.dataSource.ol.removeFeature(this.geolocationFeature);\n                }\n                if (this.bufferFeature) {\n                    this.buffer.dataSource.ol.removeFeature(this.bufferFeature);\n                }\n                this.geolocationFeature = new olFeature({ geometry });\n                this.geolocationFeature.setId('geolocationFeature');\n                if (this.alwaysTracking) {\n                    this.overlay.addOlFeature(this.geolocationFeature, this.positionFollower ? FeatureMotion.Move : FeatureMotion.None);\n                }\n                else {\n                    this.overlay.addOlFeature(this.geolocationFeature);\n                }\n                if (this.ol.getView().options_.buffer) {\n                    const bufferRadius = this.ol.getView().options_.buffer.bufferRadius;\n                    const coordinates = geolocation.getPosition();\n                    this.bufferGeom = new olCircle(coordinates, bufferRadius);\n                    const bufferStroke = this.ol.getView().options_.buffer.bufferStroke;\n                    const bufferFill = this.ol.getView().options_.buffer.bufferFill;\n                    let bufferText;\n                    if (this.ol.getView().options_.buffer.showBufferRadius) {\n                        bufferText = bufferRadius.toString() + 'm';\n                    }\n                    else {\n                        bufferText = '';\n                    }\n                    this.bufferFeature = new olFeature(this.bufferGeom);\n                    this.bufferFeature.setId('bufferFeature');\n                    this.bufferFeature.set('bufferStroke', bufferStroke);\n                    this.bufferFeature.set('bufferFill', bufferFill);\n                    this.bufferFeature.set('bufferText', bufferText);\n                    this.buffer.addOlFeature(this.bufferFeature, FeatureMotion.None);\n                }\n                if (first) {\n                    this.viewController.zoomToExtent(extent);\n                    this.positionFollower = !this.positionFollower;\n                }\n            }\n            else if (first) {\n                const view = this.ol.getView();\n                const coordinates = geolocation.getPosition();\n                view.setCenter(coordinates);\n                view.setZoom(14);\n            }\n            if (track !== true && this.alwaysTracking !== true) {\n                this.unsubscribeGeolocate();\n            }\n            first = false;\n        });\n    }\n    unsubscribeGeolocate() {\n        this.stopGeolocation();\n        if (this.geolocation$$) {\n            this.geolocation$$.unsubscribe();\n            this.geolocation$$ = undefined;\n        }\n    }\n    startGeolocation() {\n        if (!this.geolocation) {\n            this.geolocation = new olGeolocation({\n                trackingOptions: {\n                    enableHighAccuracy: true\n                },\n                projection: this.projection,\n                tracking: true\n            });\n            this.geolocation.on('change', (evt) => {\n                this.geolocation$.next(this.geolocation);\n            });\n        }\n        else {\n            this.geolocation.setTracking(true);\n        }\n    }\n    stopGeolocation() {\n        if (this.geolocation) {\n            this.geolocation.setTracking(false);\n        }\n    }\n    onOfflineToggle(offline) {\n        this.offlineButtonToggle$.next(offline);\n    }\n}\n\n/**\n * MapService\n *\n * This service tracks the IgoMap instance, if any.\n * Currently, only one map instance is supported\n * but support for multiple maps may be added in the future.\n * This will impact other services such as the OverlayService\n * because these maps won't be sharing overlayed features.\n */\nclass MapService {\n    constructor() { }\n    getMap() {\n        return this.map;\n    }\n    setMap(map) {\n        this.map = map;\n    }\n}\nMapService.ɵfac = function MapService_Factory(t) { return new (t || MapService)(); };\nMapService.ɵprov = ɵɵdefineInjectable({ factory: function MapService_Factory() { return new MapService(); }, token: MapService, providedIn: \"root\" });\nMapService.ctorParameters = () => [];\n\nclass MapBrowserComponent {\n    constructor(activityService) {\n        this.activityService = activityService;\n        this.id = `igo-map-target-${new Date().getTime()}`;\n    }\n    get view() {\n        return this._view;\n    }\n    set view(value) {\n        this._view = value;\n        if (this.map !== undefined) {\n            this.map.updateView(value);\n        }\n    }\n    ngOnInit() {\n        this.status$$ = this.map.status$.subscribe(status => this.handleStatusChange(status));\n    }\n    ngAfterViewInit() {\n        this.map.setTarget(this.id);\n    }\n    ngOnDestroy() {\n        this.map.setTarget(undefined);\n        this.activityService.unregister(this.activityId);\n        this.status$$.unsubscribe();\n    }\n    handleStatusChange(status) {\n        if (status === SubjectStatus.Working && this.activityId === undefined) {\n            this.activityId = this.activityService.register();\n        }\n        else if (status === SubjectStatus.Done && this.activityId !== undefined) {\n            this.activityService.unregister(this.activityId);\n            this.activityId = undefined;\n        }\n    }\n}\nMapBrowserComponent.ɵfac = function MapBrowserComponent_Factory(t) { return new (t || MapBrowserComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc7.ActivityService)); };\nMapBrowserComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MapBrowserComponent, selectors: [[\"igo-map-browser\"]], inputs: { view: \"view\", map: \"map\" }, ngContentSelectors: _c0, decls: 2, vars: 1, consts: [[1, \"igo-map-browser-target\", 3, \"id\"]], template: function MapBrowserComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelement(0, \"div\", 0);\n        ɵngcc0.ɵɵprojection(1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"id\", ctx.id);\n    } }, styles: [\"[_nghost-%COMP%]{display:block;position:relative}.igo-map-browser-target[_ngcontent-%COMP%], [_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]     igo-zoom-button{bottom:5px;position:absolute;right:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-zoom-button{display:none}}[_nghost-%COMP%]     igo-offline-button{bottom:15px;position:absolute;right:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-offline-button{bottom:5px}}[_nghost-%COMP%]     igo-geolocate-button{bottom:5px;position:absolute;right:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-geolocate-button{bottom:5px}}[_nghost-%COMP%]     igo-rotation-button{position:absolute;right:5px;top:50px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-rotation-button{top:50px}}[_nghost-%COMP%]     igo-user-button{bottom:5px;position:absolute;right:55px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     igo-user-button{right:95px}}[_nghost-%COMP%]     igo-baselayers-switcher{bottom:5px;left:5px;position:absolute}[_nghost-%COMP%]     .ol-attribution{background-color:hsla(0,0%,100%,0);bottom:5px;left:5px;margin-right:90px;padding:0;text-align:left;width:calc(100% - 100px)}[_nghost-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}[_nghost-%COMP%]     .ol-attribution.ol-collapsed{background:none}[_nghost-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}[_nghost-%COMP%]     .ol-attribution button{background-color:#fff;cursor:pointer;outline:none;transform:rotate(180deg)}[_nghost-%COMP%]     .ol-scale-line-inner{border-color:#000;box-shadow:0 1px 0 1px hsla(0,0%,100%,.6);color:#000;text-shadow:#fff -1px -1px 3px,#fff 1px -1px 3px,#fff -1px 1px 3px,#fff 1px 1px 4px}[_nghost-%COMP%]     .ol-scale-line{background-color:hsla(0,0%,100%,0);bottom:4px;left:50%;transform:translate(-50%)}[_nghost-%COMP%]     canvas{display:block}\"] });\nMapBrowserComponent.ctorParameters = () => [\n    { type: ActivityService }\n];\nMapBrowserComponent.propDecorators = {\n    map: [{ type: Input }],\n    view: [{ type: Input }]\n};\n\nclass MapOfflineDirective {\n    constructor(component, networkService, messageService, languageService) {\n        this.networkService = networkService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.offlineButtonStatus = false;\n        this.networkState = {\n            connection: true\n        };\n        this.offlineButtonState = {\n            connection: true\n        };\n        this.component = component;\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngAfterViewInit() {\n        this.map.offlineButtonToggle$.subscribe((offlineButtonToggle) => {\n            this.offlineButtonStatus = offlineButtonToggle;\n            const translate = this.languageService.translate;\n            if (this.offlineButtonStatus && this.networkState.connection) {\n                const message = translate.instant('igo.geo.network.offline.message');\n                const title = translate.instant('igo.geo.network.offline.title');\n                this.messageService.info(message, title);\n                this.offlineButtonState.connection = false;\n                this.changeLayer();\n            }\n            else if (!this.offlineButtonStatus && !this.networkState.connection) {\n                const message = translate.instant('igo.geo.network.offline.message');\n                const title = translate.instant('igo.geo.network.offline.title');\n                this.messageService.info(message, title);\n                this.offlineButtonState.connection = false;\n                this.changeLayer();\n            }\n            else if (!this.offlineButtonStatus && this.networkState.connection) {\n                let message;\n                let title;\n                const messageObs = translate.get('igo.geo.network.online.message');\n                const titleObs = translate.get('igo.geo.network.online.title');\n                messageObs.subscribe((message1) => {\n                    message = message1;\n                });\n                titleObs.subscribe((title1) => {\n                    title = title1;\n                });\n                this.messageService.info(message, title);\n                this.offlineButtonState.connection = true;\n                this.changeLayer();\n            }\n        });\n        this.networkService.currentState().subscribe((state) => {\n            this.networkState = state;\n            if (!this.offlineButtonStatus) {\n                this.changeLayer();\n            }\n        });\n        this.map.layers$.subscribe((layers) => {\n            this.changeLayer();\n        });\n    }\n    changeLayer() {\n        let sourceOptions;\n        const layerList = this.map.layers$.value;\n        layerList.forEach(layer => {\n            if (layer.options.source instanceof MVTDataSource) {\n                sourceOptions = layer.options.sourceOptions;\n                layer.ol.getSource().clear();\n            }\n            else if (layer.options.source instanceof XYZDataSource) {\n                sourceOptions = layer.options.sourceOptions;\n            }\n            else if (layer.options.source instanceof ClusterDataSource) {\n                sourceOptions = layer.options.sourceOptions;\n            }\n            else if (layer.options.source instanceof FeatureDataSource) {\n                sourceOptions = layer.options.sourceOptions;\n            }\n            else {\n                if (this.networkState.connection === false ||\n                    this.offlineButtonState.connection === false) {\n                    layer.ol.setMaxResolution(0);\n                    return;\n                }\n                else if (this.networkState.connection === true ||\n                    this.offlineButtonState.connection === true) {\n                    layer.ol.setMaxResolution(Infinity);\n                    return;\n                }\n            }\n            if (sourceOptions) {\n                if ((sourceOptions.pathOffline &&\n                    this.networkState.connection === false) ||\n                    (sourceOptions.pathOffline &&\n                        this.offlineButtonState.connection === false)) {\n                    if (sourceOptions.type === 'vector' ||\n                        sourceOptions.type === 'cluster') {\n                        return;\n                    }\n                    layer.ol.getSource().setUrl(sourceOptions.pathOffline);\n                }\n                else if ((sourceOptions.pathOffline &&\n                    this.networkState.connection === false) ||\n                    (sourceOptions.pathOffline &&\n                        this.offlineButtonState.connection === true)) {\n                    if (sourceOptions.type === 'vector' ||\n                        sourceOptions.type === 'cluster') {\n                        return;\n                    }\n                    layer.ol.getSource().setUrl(sourceOptions.url);\n                }\n                else {\n                    if (this.networkState.connection === false ||\n                        this.offlineButtonState.connection === false) {\n                        layer.ol.setMaxResolution(0);\n                    }\n                    else if (this.networkState.connection === true ||\n                        this.offlineButtonState.connection === true) {\n                        layer.ol.setMaxResolution(Infinity);\n                    }\n                }\n            }\n            else {\n                if (this.networkState.connection === false ||\n                    this.offlineButtonState.connection === false) {\n                    layer.ol.setMaxResolution(0);\n                }\n                else if (this.networkState.connection === true ||\n                    this.offlineButtonState.connection === true) {\n                    layer.ol.setMaxResolution(Infinity);\n                }\n            }\n        });\n    }\n}\nMapOfflineDirective.ɵfac = function MapOfflineDirective_Factory(t) { return new (t || MapOfflineDirective)(ɵngcc0.ɵɵdirectiveInject(MapBrowserComponent), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.NetworkService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.MessageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.LanguageService)); };\nMapOfflineDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MapOfflineDirective, selectors: [[\"\", \"igoMapOffline\", \"\"]] });\nMapOfflineDirective.ctorParameters = () => [\n    { type: MapBrowserComponent },\n    { type: NetworkService },\n    { type: MessageService },\n    { type: LanguageService }\n];\n\n/**\n * This directive return the pointer coordinate (on click or pointermove)\n * in [longitude, latitude], delayed by in input (pointerMoveDelay)\n * to avoid too many emitted values.\n */\nclass PointerPositionDirective {\n    constructor(component, mediaService) {\n        this.component = component;\n        this.mediaService = mediaService;\n        /**\n         * Delay before emitting an event\n         */\n        this.pointerPositionDelay = 1000;\n        /**\n         * Event emitted when the pointer move, delayed by pointerMoveDelay\n         */\n        this.pointerPositionCoord = new EventEmitter();\n    }\n    /**\n     * IGO map\n     * @internal\n     */\n    get map() {\n        return this.component.map;\n    }\n    get mapProjection() {\n        return this.component.map.projection;\n    }\n    /**\n     * Start listening to pointermove\n     * @internal\n     */\n    ngOnInit() {\n        this.listenToMapPointerMove();\n        this.listenToMapClick();\n    }\n    /**\n     * Stop listening to pointermove\n     * @internal\n     */\n    ngOnDestroy() {\n        this.unlistenToMapPointerMove();\n        this.unlistenToMapClick();\n    }\n    /**\n     * On map pointermove\n     */\n    listenToMapPointerMove() {\n        this.pointerMoveListener = this.map.ol.on('pointermove', (event) => this.onPointerEvent(event, this.pointerPositionDelay));\n    }\n    /**\n     * On map click\n     */\n    listenToMapClick() {\n        this.mapClickListener = this.map.ol.on('singleclick', (event) => this.onPointerEvent(event, 0));\n    }\n    /**\n     * Stop listening for map pointermove\n     */\n    unlistenToMapPointerMove() {\n        this.map.ol.un(this.pointerMoveListener.type, this.pointerMoveListener.listener);\n        this.pointerMoveListener = undefined;\n    }\n    /**\n     * Stop listening for map clicks\n     */\n    unlistenToMapClick() {\n        this.map.ol.un(this.mapClickListener.type, this.mapClickListener.listener);\n        this.mapClickListener = undefined;\n    }\n    /**\n     * emit delayed coordinate (longitude, latitude array) based on pointerMoveDelay or on click\n     * @param event OL map browser pointer event\n     */\n    onPointerEvent(event, delay) {\n        if (event.dragging || this.mediaService.isTouchScreen()) {\n            return;\n        }\n        if (typeof this.lastTimeoutRequest !== 'undefined') { // cancel timeout when the mouse moves\n            clearTimeout(this.lastTimeoutRequest);\n        }\n        const lonlat = transform(event.coordinate, this.mapProjection, 'EPSG:4326');\n        this.lastTimeoutRequest = setTimeout(() => {\n            this.pointerPositionCoord.emit(lonlat);\n        }, delay);\n    }\n}\nPointerPositionDirective.ɵfac = function PointerPositionDirective_Factory(t) { return new (t || PointerPositionDirective)(ɵngcc0.ɵɵdirectiveInject(MapBrowserComponent, 2), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.MediaService)); };\nPointerPositionDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: PointerPositionDirective, selectors: [[\"\", \"igoPointerPosition\", \"\"]], inputs: { pointerPositionDelay: \"pointerPositionDelay\" }, outputs: { pointerPositionCoord: \"pointerPositionCoord\" } });\nPointerPositionDirective.ctorParameters = () => [\n    { type: MapBrowserComponent, decorators: [{ type: Self }] },\n    { type: MediaService }\n];\nPointerPositionDirective.propDecorators = {\n    pointerPositionDelay: [{ type: Input }],\n    pointerPositionCoord: [{ type: Output }]\n};\n\nclass ZoomButtonComponent {\n    constructor() { }\n    get zoom() { return this.map.viewController.getZoom(); }\n    get minZoom() { return this.map.viewController.olView.getMinZoom() || 1; }\n    get maxZoom() { return this.map.viewController.olView.getMaxZoom(); }\n}\nZoomButtonComponent.ɵfac = function ZoomButtonComponent_Factory(t) { return new (t || ZoomButtonComponent)(); };\nZoomButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ZoomButtonComponent, selectors: [[\"igo-zoom-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 7, vars: 16, consts: [[1, \"igo-zoom-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"left\", 3, \"matTooltip\", \"color\", \"disabled\", \"click\"], [\"svgIcon\", \"plus\"], [\"svgIcon\", \"minus\"]], template: function ZoomButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"button\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function ZoomButtonComponent_Template_button_click_1_listener() { return ctx.map.viewController.zoomIn(); });\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelement(3, \"mat-icon\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"button\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function ZoomButtonComponent_Template_button_click_4_listener() { return ctx.map.viewController.zoomOut(); });\n        ɵngcc0.ɵɵpipe(5, \"translate\");\n        ɵngcc0.ɵɵelement(6, \"mat-icon\", 3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind2(2, 6, \"igo.geo.mapButtons.zoomIn\", ɵngcc0.ɵɵpureFunction1(12, _c1, ctx.zoom + 1)))(\"color\", ctx.color)(\"disabled\", ctx.zoom >= ctx.maxZoom);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind2(5, 9, \"igo.geo.mapButtons.zoomOut\", ɵngcc0.ɵɵpureFunction1(14, _c1, ctx.zoom - 1)))(\"color\", ctx.color)(\"disabled\", ctx.zoom <= ctx.minZoom);\n    } }, directives: [ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon], pipes: [ɵngcc5.TranslatePipe], styles: [\".igo-zoom-button-container[_ngcontent-%COMP%]{width:40px}.igo-zoom-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}.igo-zoom-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#efefef}.igo-zoom-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-bottom:2px}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"] });\nZoomButtonComponent.ctorParameters = () => [];\nZoomButtonComponent.propDecorators = {\n    map: [{ type: Input }],\n    color: [{ type: Input }]\n};\n\nclass GeolocateButtonComponent {\n    constructor() { }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n}\nGeolocateButtonComponent.ɵfac = function GeolocateButtonComponent_Factory(t) { return new (t || GeolocateButtonComponent)(); };\nGeolocateButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: GeolocateButtonComponent, selectors: [[\"igo-geolocate-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 4, vars: 4, consts: [[1, \"igo-geolocate-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"left\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"crosshairs-gps\"]], template: function GeolocateButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"button\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function GeolocateButtonComponent_Template_button_click_1_listener() { return ctx.map.geolocate(); });\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelement(3, \"mat-icon\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.geo.mapButtons.geolocate\"))(\"color\", ctx.color);\n    } }, directives: [ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon], pipes: [ɵngcc5.TranslatePipe], styles: [\".igo-geolocate-button-container[_ngcontent-%COMP%]{background-color:#fff;width:40px}.igo-geolocate-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"] });\nGeolocateButtonComponent.ctorParameters = () => [];\nGeolocateButtonComponent.propDecorators = {\n    map: [{ type: Input }],\n    color: [{ type: Input }]\n};\n\nclass OfflineButtonComponent {\n    constructor(config) {\n        this.config = config;\n        this.btnStyle = 'baseStyle';\n        this.colorOff = 'rgb(255,255,255)';\n        this.change = new EventEmitter();\n        this.check = false;\n        this.visible = false;\n        this.visible = this.config.getConfig('offlineButton') ? true : false;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    get checked() {\n        return this.check;\n    }\n    onToggle() {\n        this.check = !this.check;\n        if (this.check) {\n            this.btnStyle = 'toggleStyle';\n        }\n        else {\n            this.btnStyle = 'baseStyle';\n        }\n    }\n}\nOfflineButtonComponent.ɵfac = function OfflineButtonComponent_Factory(t) { return new (t || OfflineButtonComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc7.ConfigService)); };\nOfflineButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OfflineButtonComponent, selectors: [[\"igo-offline-button\"]], inputs: { check: \"check\", map: \"map\", color: \"color\" }, outputs: { change: \"change\" }, decls: 1, vars: 1, consts: [[\"class\", \"igo-user-button-container\", 4, \"ngIf\"], [1, \"igo-user-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"left\", 3, \"matTooltip\", \"ngClass\", \"color\", \"click\"], [\"svgIcon\", \"wifi-strength-off\"]], template: function OfflineButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OfflineButtonComponent_div_0_Template, 6, 11, \"div\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.visible);\n    } }, directives: [ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc1.NgClass, ɵngcc4.MatIcon], pipes: [ɵngcc5.TranslatePipe], styles: [\".baseStyle[_ngcontent-%COMP%]{background-color:#fff;width:40px}.baseStyle[_ngcontent-%COMP%]:hover{background-color:#efefef}.toggleStyle[_ngcontent-%COMP%]{background-color:#b9b9b9;width:40px}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"] });\nOfflineButtonComponent.ctorParameters = () => [\n    { type: ConfigService }\n];\nOfflineButtonComponent.propDecorators = {\n    change: [{ type: Output }],\n    map: [{ type: Input }],\n    color: [{ type: Input }],\n    check: [{ type: Input }]\n};\n\nfunction baseLayersSwitcherSlideInOut() {\n    return trigger('baseLayerSwitcherState', [\n        state('collapseIcon', style({\n            height: '40px',\n            width: '40px',\n            overflow: 'hidden'\n        })),\n        state('collapseMap', style({\n            height: '85px',\n            overflow: 'hidden'\n        })),\n        state('expand', style({\n            overflow: 'hidden'\n        })),\n        transition('collapse => expand', animate('200ms')),\n        transition('expand => collapse', animate('200ms'))\n    ]);\n}\n\nclass BaseLayersSwitcherComponent {\n    constructor(mediaService) {\n        this.mediaService = mediaService;\n        this._baseLayers = [];\n        this.expand = false;\n        this.showButton = true;\n        const media = this.mediaService.media$.value;\n        if (media === Media.Mobile && this.useStaticIcon === undefined) {\n            this.useStaticIcon = true;\n        }\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get useStaticIcon() {\n        return this._useStaticIcon;\n    }\n    set useStaticIcon(value) {\n        this._useStaticIcon = value;\n    }\n    ngAfterViewInit() {\n        this.layers$$ = this.map.layers$.subscribe(arrayLayers => {\n            this._baseLayers = arrayLayers.filter(l => l.baseLayer);\n        });\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n    }\n    collapseOrExpand() {\n        if (this.baseLayers.length > 1 || this.useStaticIcon) {\n            this.expand = !this.expand;\n        }\n        else {\n            this.expand = false;\n        }\n    }\n    get baseLayers() {\n        const mapResolution = this.map.viewController.getResolution();\n        const mapZoom = this.map.viewController.getZoom();\n        const bl = this._baseLayers.filter(l => {\n            return ((!l.options.maxResolution ||\n                mapResolution <= l.options.maxResolution) &&\n                (!l.options.minResolution || mapResolution >= l.options.minResolution) &&\n                (!l.options.source.options.maxZoom || mapZoom <= l.options.source.options.maxZoom) &&\n                (!l.options.source.options.minZoom || mapZoom >= l.options.source.options.minZoom));\n        });\n        const blHidden = bl.filter(l => !l.visible);\n        return blHidden.length + 1 === bl.length ? blHidden : bl;\n    }\n}\nBaseLayersSwitcherComponent.ɵfac = function BaseLayersSwitcherComponent_Factory(t) { return new (t || BaseLayersSwitcherComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc7.MediaService)); };\nBaseLayersSwitcherComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: BaseLayersSwitcherComponent, selectors: [[\"igo-baselayers-switcher\"]], inputs: { useStaticIcon: \"useStaticIcon\", map: \"map\" }, decls: 1, vars: 1, consts: [[\"class\", \"igo-baselayers-switcher-container\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [1, \"igo-baselayers-switcher-container\", 3, \"ngClass\", \"click\"], [\"class\", \"igo-baselayers-switcher-button-container\", 4, \"ngIf\"], [3, \"map\", \"baseLayer\", \"title\", \"display\", \"disabled\", 4, \"ngFor\", \"ngForOf\"], [1, \"more-baselayers\"], [\"color\", \"primary\", \"svgIcon\", \"menu-down\", 1, \"material-icons\", \"mat-icon\", \"mat-list-avatar\"], [1, \"igo-baselayers-switcher-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"right\", \"color\", \"primary\", 3, \"matTooltip\"], [\"svgIcon\", \"image-multiple\"], [3, \"map\", \"baseLayer\", \"title\", \"display\", \"disabled\"]], template: function BaseLayersSwitcherComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, BaseLayersSwitcherComponent_div_0_Template, 5, 6, \"div\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.baseLayers.length > 0);\n    } }, directives: function () { return [ɵngcc1.NgIf, ɵngcc1.NgClass, ɵngcc1.NgForOf, ɵngcc4.MatIcon, ɵngcc2.MatButton, ɵngcc3.MatTooltip, MiniBaseMapComponent]; }, pipes: function () { return [ɵngcc5.TranslatePipe]; }, styles: [\".igo-baselayers-switcher-container[_ngcontent-%COMP%]{height:auto;position:relative}.container-expand[_ngcontent-%COMP%]{border-width:0;overflow:hidden}.more-baselayers[_ngcontent-%COMP%]{background-color:#fff;cursor:pointer;height:20px;text-align:center;width:80px}.more-baselayers[_ngcontent-%COMP%]:hover{background-color:#efefef}.igo-baselayers-switcher-button-container[_ngcontent-%COMP%]{background-color:#fff;width:40px}.igo-baselayers-switcher-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"], data: { animation: [baseLayersSwitcherSlideInOut()] } });\nBaseLayersSwitcherComponent.ctorParameters = () => [\n    { type: MediaService }\n];\nBaseLayersSwitcherComponent.propDecorators = {\n    map: [{ type: Input }],\n    useStaticIcon: [{ type: Input }]\n};\n\nconst LAYER = 'Layer';\n\nclass MiniBaseMapComponent {\n    constructor(layerService, appRef) {\n        this.layerService = layerService;\n        this.appRef = appRef;\n        this.basemap = new IgoMap({\n            controls: {},\n            interactions: false\n        });\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n        this.handleMoveEnd();\n    }\n    get baseLayer() {\n        return this._baseLayer;\n    }\n    set baseLayer(value) {\n        this._baseLayer = value;\n        this.handleBaseLayerChanged(value);\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = value;\n    }\n    get display() {\n        return this._display;\n    }\n    set display(value) {\n        this._display = value;\n    }\n    ngAfterViewInit() {\n        this.map.ol.on('moveend', () => this.handleMoveEnd());\n        this.handleMoveEnd();\n    }\n    ngOnDestroy() {\n        this.map.ol.un('moveend', () => this.handleMoveEnd());\n    }\n    changeBaseLayer(baseLayer) {\n        if (this.disabled) {\n            return;\n        }\n        this.map.changeBaseLayer(baseLayer);\n        this.appRef.tick();\n    }\n    handleMoveEnd() {\n        this.basemap.ol.setView(this.map.ol.getView());\n    }\n    handleBaseLayerChanged(baselayer) {\n        this.basemap.removeAllLayers();\n        const options = Object.assign(Object.create(baselayer.options), baselayer.options, {\n            visible: true,\n            baseLayer: false\n        });\n        const layer = this.layerService.createLayer(options);\n        this.basemap.addLayer(layer);\n    }\n}\nMiniBaseMapComponent.ɵfac = function MiniBaseMapComponent_Factory(t) { return new (t || MiniBaseMapComponent)(ɵngcc0.ɵɵdirectiveInject(LayerService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ApplicationRef)); };\nMiniBaseMapComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MiniBaseMapComponent, selectors: [[\"igo-mini-basemap\"]], inputs: { map: \"map\", baseLayer: \"baseLayer\", disabled: \"disabled\", display: \"display\", title: \"title\" }, decls: 2, vars: 1, consts: [[1, \"igo-mini-basemap-container\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\"], [3, \"map\"], [\"class\", \"igo-mini-basemap-title\", 4, \"ngIf\"], [1, \"igo-mini-basemap-title\"]], template: function MiniBaseMapComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, MiniBaseMapComponent_div_1_Template, 3, 2, \"div\", 1);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.display);\n    } }, directives: [ɵngcc1.NgIf, MapBrowserComponent], styles: [\".igo-mini-basemap-container[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.01);border:2px solid #fff;box-shadow:0 1px 4px rgba(0,0,0,.3);cursor:pointer;height:80px;margin-top:5px;width:80px}.igo-mini-basemap-container[_ngcontent-%COMP%]:hover   .igo-mini-basemap-title[_ngcontent-%COMP%]{color:#000;text-shadow:0 0 5px #fff}.igo-mini-basemap-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;width:100%}.igo-mini-basemap-title[_ngcontent-%COMP%]{align-items:flex-end;color:#fff;display:flex;height:76px;justify-content:center;position:relative;text-align:center;text-shadow:0 0 5px #000;top:-76px;vertical-align:bottom;white-space:normal;width:76px}\"] });\nMiniBaseMapComponent.ctorParameters = () => [\n    { type: LayerService },\n    { type: ApplicationRef }\n];\nMiniBaseMapComponent.propDecorators = {\n    map: [{ type: Input }],\n    baseLayer: [{ type: Input }],\n    disabled: [{ type: Input }],\n    display: [{ type: Input }],\n    title: [{ type: Input }]\n};\n\nclass RotationButtonComponent {\n    constructor() { }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get showIfNoRotation() {\n        return this._showIfNoRotation;\n    }\n    set showIfNoRotation(value) {\n        this._showIfNoRotation = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    get rotated() {\n        return this.map.viewController.getRotation() !== 0;\n    }\n    rotationStyle(radians) {\n        const rotation = 'rotate(' + radians + 'rad)';\n        return {\n            transform: rotation\n        };\n    }\n}\nRotationButtonComponent.ɵfac = function RotationButtonComponent_Factory(t) { return new (t || RotationButtonComponent)(); };\nRotationButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: RotationButtonComponent, selectors: [[\"igo-rotation-button\"]], inputs: { map: \"map\", showIfNoRotation: \"showIfNoRotation\", color: \"color\" }, decls: 2, vars: 2, consts: [[\"class\", \"igo-rotation-button-container\", \"matTooltipPosition\", \"left\", 3, \"matTooltip\", 4, \"ngIf\"], [\"matTooltipPosition\", \"left\", 1, \"igo-rotation-button-container\", 3, \"matTooltip\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"left\", 3, \"color\", \"disabled\", \"click\"], [\"svgIcon\", \"navigation\", 3, \"ngStyle\"]], template: function RotationButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, RotationButtonComponent_div_0_Template, 5, 8, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, RotationButtonComponent_div_1_Template, 5, 8, \"div\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.rotated && !ctx.showIfNoRotation);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showIfNoRotation);\n    } }, directives: [ɵngcc1.NgIf, ɵngcc3.MatTooltip, ɵngcc2.MatButton, ɵngcc4.MatIcon, ɵngcc1.NgStyle], pipes: [ɵngcc5.TranslatePipe], styles: [\".igo-rotation-button-container[_ngcontent-%COMP%]{background-color:#fff;width:40px}.igo-rotation-button-container[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]     button .mat-button-ripple-round:disabled, button[_ngcontent-%COMP%]:disabled{display:none}}\"] });\nRotationButtonComponent.ctorParameters = () => [];\nRotationButtonComponent.propDecorators = {\n    map: [{ type: Input }],\n    showIfNoRotation: [{ type: Input }],\n    color: [{ type: Input }]\n};\n\nvar CatalogItemType;\n(function (CatalogItemType) {\n    CatalogItemType[\"Layer\"] = \"layer\";\n    CatalogItemType[\"Group\"] = \"group\";\n})(CatalogItemType || (CatalogItemType = {}));\nvar TypeCatalog;\n(function (TypeCatalog) {\n    TypeCatalog[TypeCatalog[\"wms\"] = 0] = \"wms\";\n    TypeCatalog[TypeCatalog[\"wmts\"] = 1] = \"wmts\";\n    TypeCatalog[TypeCatalog[\"baselayers\"] = 2] = \"baselayers\";\n    TypeCatalog[TypeCatalog[\"arcgisrest\"] = 3] = \"arcgisrest\";\n    TypeCatalog[TypeCatalog[\"composite\"] = 4] = \"composite\";\n})(TypeCatalog || (TypeCatalog = {}));\n\nclass Catalog {\n    constructor(options, service) {\n        Object.assign(this, options);\n        this.catalogService = service;\n    }\n}\nclass WMSCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.wms];\n        this.type = TypeCatalog[sType];\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogWMSLayerItems(this);\n    }\n}\nclass WMTSCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.wmts];\n        this.type = TypeCatalog[sType];\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogWMTSLayerItems(this);\n    }\n}\nclass BaselayersCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.baselayers];\n        this.type = TypeCatalog[sType];\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogBaseLayerItems(this);\n    }\n}\nclass ArcGISRestCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.arcgisrest];\n        this.type = TypeCatalog[sType];\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogArcGISRestItems(this);\n    }\n}\nclass CompositeCatalog extends Catalog {\n    constructor(options, service) {\n        super(options, service);\n        const sType = TypeCatalog[TypeCatalog.composite];\n        this.type = TypeCatalog[sType];\n        this.url = null;\n    }\n    collectCatalogItems() {\n        return this.catalogService.loadCatalogCompositeLayerItems(this);\n    }\n}\nclass CatalogFactory {\n    static createInstanceCatalog(options, service) {\n        let catalog;\n        if (options.hasOwnProperty('composite')) {\n            catalog = new CompositeCatalog(options, service);\n        }\n        else if (options.type === TypeCatalog[TypeCatalog.baselayers]) {\n            catalog = new BaselayersCatalog(options, service);\n        }\n        else if (options.type === TypeCatalog[TypeCatalog.arcgisrest]) {\n            catalog = new ArcGISRestCatalog(options, service);\n        }\n        else if (options.type === TypeCatalog[TypeCatalog.wmts]) {\n            catalog = new WMTSCatalog(options, service);\n        }\n        else {\n            catalog = new WMSCatalog(options, service);\n        }\n        return catalog;\n    }\n}\n\nclass QueryService {\n    constructor(http) {\n        this.http = http;\n        this.queryEnabled = true;\n    }\n    query(layers, options) {\n        return layers\n            .filter((layer) => layer.visible && layer.isInResolutionsRange)\n            .map((layer) => this.queryLayer(layer, options));\n    }\n    queryLayer(layer, options) {\n        const url = this.getQueryUrl(layer.dataSource, options);\n        if (!url) {\n            return of([]);\n        }\n        if (layer.dataSource.options.queryFormat ===\n            QueryFormat.HTMLGML2) {\n            const urlGml = this.getQueryUrl(layer.dataSource, options, true);\n            return this.http.get(urlGml, { responseType: 'text' }).pipe(mergeMap(gmlRes => {\n                const imposedGeom = this.mergeGML(gmlRes, url);\n                return this.http\n                    .get(url, { responseType: 'text' })\n                    .pipe(map(res => this.extractData(res, layer, options, url, imposedGeom)));\n            }));\n        }\n        const request = this.http.get(url, { responseType: 'text' });\n        return request.pipe(map(res => this.extractData(res, layer, options, url)));\n    }\n    mergeGML(gmlRes, url) {\n        let parser = new olFormatGML2();\n        let features = parser.readFeatures(gmlRes);\n        // Handle non standard GML output (MapServer)\n        if (features.length === 0) {\n            parser = new WMSGetFeatureInfo();\n            features = parser.readFeatures(gmlRes);\n        }\n        const olmline = new MultiLineString([]);\n        let pts;\n        const ptsArray = [];\n        let olmpoly = new MultiPolygon([]);\n        let firstFeatureType;\n        const nbFeatures = features.length;\n        // Check if geometry intersect bbox\n        // for geoserver getfeatureinfo response in data projection, not call projection\n        const searchParams = this.getQueryParams(url.toLowerCase());\n        const bboxRaw = searchParams.bbox;\n        const bbox = bboxRaw.split(',');\n        const bboxExtent = createEmpty();\n        extend(bboxExtent, bbox);\n        const outBboxExtent = false;\n        features.map(feature => {\n            /*  if (!feature.getGeometry().simplify(100).intersectsExtent(bboxExtent)) {\n              outBboxExtent = true;\n              // TODO: Check to project the geometry?\n            }*/\n            const featureGeometryCoordinates = feature.getGeometry().getCoordinates();\n            const featureGeometryType = feature.getGeometry().getType();\n            if (!firstFeatureType && !outBboxExtent) {\n                firstFeatureType = featureGeometryType;\n            }\n            if (!outBboxExtent) {\n                switch (featureGeometryType) {\n                    case 'Point':\n                        if (nbFeatures === 1) {\n                            pts = new Point(featureGeometryCoordinates, 'XY');\n                        }\n                        else {\n                            ptsArray.push(featureGeometryCoordinates);\n                        }\n                        break;\n                    case 'LineString':\n                        olmline.appendLineString(new LineString(featureGeometryCoordinates, 'XY'));\n                        break;\n                    case 'Polygon':\n                        olmpoly.appendPolygon(new Polygon(featureGeometryCoordinates, 'XY'));\n                        break;\n                    case 'MultiPolygon':\n                        olmpoly = new MultiPolygon(featureGeometryCoordinates, 'XY');\n                        break;\n                    default:\n                        return;\n                }\n            }\n        });\n        let olmpts;\n        if (ptsArray.length === 0 && pts) {\n            olmpts = {\n                type: pts.getType(),\n                coordinates: pts.getCoordinates()\n            };\n        }\n        else {\n            olmpts = {\n                type: 'Polygon',\n                coordinates: [this.convexHull(ptsArray)]\n            };\n        }\n        switch (firstFeatureType) {\n            case 'LineString':\n                return {\n                    type: olmline.getType(),\n                    coordinates: olmline.getCoordinates()\n                };\n            case 'Point':\n                return olmpts;\n            case 'Polygon':\n                return {\n                    type: olmpoly.getType(),\n                    coordinates: olmpoly.getCoordinates()\n                };\n            case 'MultiPolygon':\n                return {\n                    type: olmpoly.getType(),\n                    coordinates: olmpoly.getCoordinates()\n                };\n            default:\n                return;\n        }\n    }\n    cross(a, b, o) {\n        return (a[0] - o[0]) * (b[1] - o[1]) - (a[1] - o[1]) * (b[0] - o[0]);\n    }\n    /**\n     * @param points An array of [X, Y] coordinates\n     * This method is use instead of turf.js convexHull because Turf needs at least 3 point to make a hull.\n     * https://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain#JavaScript\n     */\n    convexHull(points) {\n        points.sort((a, b) => {\n            return a[0] === b[0] ? a[1] - b[1] : a[0] - b[0];\n        });\n        const lower = [];\n        for (const point of points) {\n            while (lower.length >= 2 &&\n                this.cross(lower[lower.length - 2], lower[lower.length - 1], point) <= 0) {\n                lower.pop();\n            }\n            lower.push(point);\n        }\n        const upper = [];\n        for (let i = points.length - 1; i >= 0; i--) {\n            while (upper.length >= 2 &&\n                this.cross(upper[upper.length - 2], upper[upper.length - 1], points[i]) <= 0) {\n                upper.pop();\n            }\n            upper.push(points[i]);\n        }\n        upper.pop();\n        lower.pop();\n        return lower.concat(upper);\n    }\n    extractData(res, layer, options, url, imposedGeometry) {\n        const queryDataSource = layer.dataSource;\n        const allowedFieldsAndAlias = this.getAllowedFieldsAndAlias(layer);\n        let features = [];\n        switch (queryDataSource.options.queryFormat) {\n            case QueryFormat.GML3:\n                features = this.extractGML3Data(res, layer.zIndex, allowedFieldsAndAlias);\n                break;\n            case QueryFormat.JSON:\n            case QueryFormat.GEOJSON:\n            case QueryFormat.GEOJSON2:\n                features = this.extractGeoJSONData(res);\n                break;\n            case QueryFormat.ESRIJSON:\n                features = this.extractEsriJSONData(res, layer.zIndex);\n                break;\n            case QueryFormat.TEXT:\n                features = this.extractTextData(res);\n                break;\n            case QueryFormat.HTML:\n                features = this.extractHtmlData(res, queryDataSource.queryHtmlTarget, url);\n                break;\n            case QueryFormat.HTMLGML2:\n                features = this.extractHtmlData(res, queryDataSource.queryHtmlTarget, url, imposedGeometry);\n                break;\n            case QueryFormat.GML2:\n            default:\n                features = this.extractGML2Data(res, layer, allowedFieldsAndAlias);\n                break;\n        }\n        if (features.length > 0 && features[0].geometry == null) {\n            const geomToAdd = this.createGeometryFromUrlClick(url);\n            for (const feature of features) {\n                feature.geometry = geomToAdd;\n            }\n        }\n        return features.map((feature, index) => {\n            const mapLabel = feature.properties[queryDataSource.mapLabel];\n            let exclude;\n            if (layer.options.sourceOptions.type === 'wms') {\n                const sourceOptions = layer.options\n                    .sourceOptions;\n                exclude = sourceOptions ? sourceOptions.excludeAttribute : undefined;\n            }\n            let title = this.getQueryTitle(feature, layer);\n            if (!title && features.length > 1) {\n                title = `${layer.title} (${index + 1})`;\n            }\n            else if (!title) {\n                title = layer.title;\n            }\n            const meta = Object.assign({}, feature.meta || {}, {\n                id: uuid(),\n                title,\n                mapTitle: mapLabel,\n                sourceTitle: layer.title,\n                order: 1000 - layer.zIndex,\n                excludeAttribute: exclude\n            });\n            return Object.assign(feature, {\n                meta,\n                projection: queryDataSource.options.type === 'carto'\n                    ? 'EPSG:4326'\n                    : options.projection\n            });\n        });\n    }\n    createGeometryFromUrlClick(url) {\n        const searchParams = this.getQueryParams(url.toLowerCase());\n        const bboxRaw = searchParams.bbox;\n        const width = parseInt(searchParams.width, 10);\n        const height = parseInt(searchParams.height, 10);\n        const xPosition = parseInt(searchParams.i || searchParams.x, 10);\n        const yPosition = parseInt(searchParams.j || searchParams.y, 10);\n        const projection = searchParams.crs || searchParams.srs || 'EPSG:3857';\n        const bbox = bboxRaw.split(',');\n        let threshold = (Math.abs(parseFloat(bbox[0])) - Math.abs(parseFloat(bbox[2]))) * 0.05;\n        // for context in degree (EPSG:4326,4269...)\n        if (Math.abs(parseFloat(bbox[0])) < 180) {\n            threshold = 0.045;\n        }\n        const clickx = parseFloat(bbox[0]) +\n            (Math.abs(parseFloat(bbox[0]) - parseFloat(bbox[2])) * xPosition) /\n                width -\n            threshold;\n        const clicky = parseFloat(bbox[1]) +\n            (Math.abs(parseFloat(bbox[1]) - parseFloat(bbox[3])) * yPosition) /\n                height -\n            threshold;\n        const clickx1 = clickx + threshold * 2;\n        const clicky1 = clicky + threshold * 2;\n        const wktPoly = 'POLYGON((' +\n            clickx +\n            ' ' +\n            clicky +\n            ', ' +\n            clickx +\n            ' ' +\n            clicky1 +\n            ', ' +\n            clickx1 +\n            ' ' +\n            clicky1 +\n            ', ' +\n            clickx1 +\n            ' ' +\n            clicky +\n            ', ' +\n            clickx +\n            ' ' +\n            clicky +\n            '))';\n        const format = new WKT();\n        const tenPercentWidthGeom = format.readFeature(wktPoly);\n        const f = tenPercentWidthGeom.getGeometry();\n        const newGeom = {\n            type: f.getType(),\n            coordinates: f.getCoordinates()\n        };\n        return newGeom;\n    }\n    extractGML2Data(res, zIndex, allowedFieldsAndAlias) {\n        let parser = new olFormatGML2();\n        let features = parser.readFeatures(res);\n        // Handle non standard GML output (MapServer)\n        if (features.length === 0) {\n            parser = new WMSGetFeatureInfo();\n            try {\n                features = parser.readFeatures(res);\n            }\n            catch (e) {\n                console.warn('query.service: Multipolygons are badly managed in mapserver in GML2. Use another format.');\n            }\n        }\n        return features.map(feature => this.featureToResult(feature, zIndex, allowedFieldsAndAlias));\n    }\n    extractGML3Data(res, zIndex, allowedFieldsAndAlias) {\n        const parser = new olFormatGML3();\n        let features = [];\n        try {\n            features = parser.readFeatures(res);\n        }\n        catch (e) {\n            console.warn('query.service: GML3 is not well supported');\n        }\n        return features.map(feature => this.featureToResult(feature, zIndex, allowedFieldsAndAlias));\n    }\n    extractGeoJSONData(res) {\n        let features = [];\n        try {\n            features = JSON.parse(res).features;\n        }\n        catch (e) {\n            console.warn('query.service: Unable to parse geojson', '\\n', res);\n        }\n        return features;\n    }\n    extractEsriJSONData(res, zIndex) {\n        const parser = new olFormatEsriJSON();\n        const features = parser.readFeatures(res);\n        return features.map(feature => this.featureToResult(feature, zIndex));\n    }\n    extractTextData(res) {\n        // TODO\n        return [];\n    }\n    extractHtmlData(res, htmlTarget, url, imposedGeometry) {\n        const searchParams = this.getQueryParams(url.toLowerCase());\n        const projection = searchParams.crs || searchParams.srs || 'EPSG:3857';\n        const geomToAdd = this.createGeometryFromUrlClick(url);\n        if (htmlTarget !== QueryHtmlTarget.BLANK &&\n            htmlTarget !== QueryHtmlTarget.IFRAME) {\n            htmlTarget = QueryHtmlTarget.IFRAME;\n        }\n        const bodyTagStart = res.toLowerCase().indexOf('<body>');\n        const bodyTagEnd = res.toLowerCase().lastIndexOf('</body>') + 7;\n        // replace \\r \\n  and ' ' with '' to validate if the body is really empty.\n        const body = res.slice(bodyTagStart, bodyTagEnd).replace(/(\\r|\\n|\\s)/g, '');\n        if (body === '<body></body>' || res === '') {\n            return [];\n        }\n        return [\n            {\n                type: FEATURE,\n                projection,\n                properties: { target: htmlTarget, body: res, url },\n                geometry: imposedGeometry || geomToAdd\n            }\n        ];\n    }\n    getQueryParams(url) {\n        const queryString = url.split('?');\n        if (!queryString[1]) {\n            return;\n        }\n        const pairs = queryString[1].split('&');\n        const result = {};\n        pairs.forEach(pair => {\n            pair = pair.split('=');\n            result[pair[0]] = decodeURIComponent(pair[1] || '');\n        });\n        return result;\n    }\n    featureToResult(featureOL, zIndex, allowedFieldsAndAlias) {\n        const featureGeometry = featureOL.getGeometry();\n        const properties = Object.assign({}, featureOL.getProperties());\n        delete properties.geometry;\n        delete properties.boundedBy;\n        delete properties.shape;\n        delete properties.SHAPE;\n        delete properties.the_geom;\n        delete properties.geom;\n        let geometry;\n        if (featureGeometry !== undefined) {\n            geometry = {\n                type: featureGeometry.getType(),\n                coordinates: featureGeometry.getCoordinates()\n            };\n        }\n        return {\n            type: FEATURE,\n            projection: undefined,\n            properties,\n            geometry,\n            meta: {\n                id: uuid(),\n                order: 1000 - zIndex,\n                alias: allowedFieldsAndAlias\n            }\n        };\n    }\n    getQueryUrl(datasource, options, forceGML2 = false) {\n        let url;\n        switch (datasource.constructor) {\n            case WMSDataSource:\n                const wmsDatasource = datasource;\n                const WMSGetFeatureInfoOptions = {\n                    INFO_FORMAT: wmsDatasource.params.INFO_FORMAT ||\n                        this.getMimeInfoFormat(datasource.options.queryFormat),\n                    QUERY_LAYERS: wmsDatasource.params.LAYERS,\n                    FEATURE_COUNT: wmsDatasource.params.FEATURE_COUNT || '5'\n                };\n                if (forceGML2) {\n                    WMSGetFeatureInfoOptions.INFO_FORMAT = this.getMimeInfoFormat(QueryFormat.GML2);\n                }\n                url = wmsDatasource.ol.getFeatureInfoUrl(options.coordinates, options.resolution, options.projection, WMSGetFeatureInfoOptions);\n                // const wmsVersion =\n                //   wmsDatasource.params.VERSION ||\n                //   wmsDatasource.params.version ||\n                //   '1.3.0';\n                // if (wmsVersion !== '1.3.0') {\n                //   url = url.replace('&I=', '&X=');\n                //   url = url.replace('&J=', '&Y=');\n                // }\n                break;\n            case CartoDataSource:\n                const cartoDatasource = datasource;\n                const baseUrl = 'https://' +\n                    cartoDatasource.options.account +\n                    '.carto.com/api/v2/sql?';\n                const format = 'format=GeoJSON';\n                const sql = '&q=' + cartoDatasource.options.config.layers[0].options.sql;\n                const clause = ' WHERE ST_Intersects(the_geom_webmercator,ST_BUFFER(ST_SetSRID(ST_POINT(';\n                const meters = cartoDatasource.options.queryPrecision\n                    ? cartoDatasource.options.queryPrecision\n                    : '1000';\n                const coordinates = options.coordinates[0] +\n                    ',' +\n                    options.coordinates[1] +\n                    '),3857),' +\n                    meters +\n                    '))';\n                url = `${baseUrl}${format}${sql}${clause}${coordinates}`;\n                break;\n            case TileArcGISRestDataSource:\n                const tileArcGISRestDatasource = datasource;\n                let extent = boundingExtent([options.coordinates]);\n                if (tileArcGISRestDatasource.options.queryPrecision) {\n                    extent = buffer(extent, tileArcGISRestDatasource.options.queryPrecision);\n                }\n                const serviceUrl = tileArcGISRestDatasource.options.url +\n                    '/' +\n                    tileArcGISRestDatasource.options.layer +\n                    '/query/';\n                const geometry = encodeURIComponent('{\"xmin\":' +\n                    extent[0] +\n                    ',\"ymin\":' +\n                    extent[1] +\n                    ',\"xmax\":' +\n                    extent[2] +\n                    ',\"ymax\":' +\n                    extent[3] +\n                    ',\"spatialReference\":{\"wkid\":102100}}');\n                const params = [\n                    'f=json',\n                    `geometry=${geometry}`,\n                    'geometryType=esriGeometryEnvelope',\n                    'inSR=102100',\n                    'spatialRel=esriSpatialRelIntersects',\n                    'outFields=*',\n                    'returnGeometry=true',\n                    'outSR=102100'\n                ];\n                url = `${serviceUrl}?${params.join('&')}`;\n                break;\n            default:\n                break;\n        }\n        return url;\n    }\n    getMimeInfoFormat(queryFormat) {\n        let mime = 'application/vnd.ogc.gml';\n        const keyEnum = Object.keys(QueryFormat).find(key => QueryFormat[key] === queryFormat);\n        if (keyEnum) {\n            mime = QueryFormatMimeType[keyEnum];\n        }\n        return mime;\n    }\n    getAllowedFieldsAndAlias(layer) {\n        let allowedFieldsAndAlias;\n        if (layer.options &&\n            layer.options.source &&\n            layer.options.source.options &&\n            layer.options.source.options.sourceFields &&\n            layer.options.source.options.sourceFields.length >= 1) {\n            allowedFieldsAndAlias = {};\n            layer.options.source.options.sourceFields.forEach(sourceField => {\n                const alias = sourceField.alias ? sourceField.alias : sourceField.name;\n                allowedFieldsAndAlias[sourceField.name] = alias;\n            });\n        }\n        return allowedFieldsAndAlias;\n    }\n    getQueryTitle(feature, layer) {\n        let title;\n        if (layer.options && layer.options.source && layer.options.source.options) {\n            const dataSourceOptions = layer.options.source\n                .options;\n            if (dataSourceOptions.queryTitle) {\n                title = this.getLabelMatch(feature, dataSourceOptions.queryTitle);\n            }\n        }\n        return title;\n    }\n    getLabelMatch(feature, labelMatch) {\n        let label = labelMatch;\n        const labelToGet = Array.from(labelMatch.matchAll(/\\$\\{([^\\{\\}]+)\\}/g));\n        labelToGet.forEach(v => {\n            label = label.replace(v[0], feature.properties[v[1]]);\n        });\n        // Nothing done? check feature's attribute\n        if (labelToGet.length === 0 && label === labelMatch) {\n            label = feature.properties[labelMatch] || labelMatch;\n        }\n        return label;\n    }\n}\nQueryService.ɵfac = function QueryService_Factory(t) { return new (t || QueryService)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient)); };\nQueryService.ɵprov = ɵɵdefineInjectable({ factory: function QueryService_Factory() { return new QueryService(ɵɵinject(HttpClient)); }, token: QueryService, providedIn: \"root\" });\nQueryService.ctorParameters = () => [\n    { type: HttpClient }\n];\n\n/**\n * Whether a layer is queryable\n * @param layer Layer\n * @returns True if the layer s squeryable\n */\nfunction layerIsQueryable(layer) {\n    const dataSource = layer.dataSource;\n    return dataSource.options.queryable === true;\n}\n/**\n * Whether an OL layer is queryable\n * @param layer Layer\n * @returns True if the ol layer is queryable\n */\nfunction olLayerIsQueryable(olLayer) {\n    const layer = olLayer.get('_layer');\n    return layer === undefined ? false : layerIsQueryable(layer);\n}\n\n/**\n * This directive makes a map queryable with a click of with a drag box.\n * By default, all layers are queryable but this can ben controlled at\n * the layer level.\n */\nclass QueryDirective {\n    constructor(component, queryService) {\n        this.component = component;\n        this.queryService = queryService;\n        /**\n         * Subscriptions to ongoing queries\n         */\n        this.queries$$ = [];\n        /**\n         * Whter to query features or not\n         */\n        this.queryFeatures = false;\n        /**\n         * Feature query hit tolerance\n         */\n        this.queryFeaturesHitTolerance = 0;\n        /**\n         * Whether all query should complete before emitting an event\n         */\n        this.waitForAllQueries = true;\n        /**\n         * Event emitted when a query (or all queries) complete\n         */\n        this.query = new EventEmitter();\n    }\n    /**\n     * IGO map\n     * @internal\n     */\n    get map() {\n        return this.component.map;\n    }\n    /**\n     * Start listening to click and drag box events\n     * @internal\n     */\n    ngAfterViewInit() {\n        this.listenToMapClick();\n        this.addDragBoxInteraction();\n    }\n    /**\n     * Stop listening to click and drag box events and cancel ongoind requests\n     * @internal\n     */\n    ngOnDestroy() {\n        this.cancelOngoingQueries();\n        this.unlistenToMapClick();\n        this.removeDragBoxInteraction();\n    }\n    /**\n     * On map click, issue queries\n     */\n    listenToMapClick() {\n        this.mapClickListener = this.map.ol.on('singleclick', (event) => this.onMapEvent(event));\n    }\n    /**\n     * Stop listening for map clicks\n     */\n    unlistenToMapClick() {\n        this.map.ol.un(this.mapClickListener.type, this.mapClickListener.listener);\n        this.mapClickListener = undefined;\n    }\n    /**\n     * Issue queries from a map event and emit events with the results\n     * @param event OL map browser pointer event\n     */\n    onMapEvent(event) {\n        this.cancelOngoingQueries();\n        if (!this.queryService.queryEnabled) {\n            return;\n        }\n        const queries$ = [];\n        if (this.queryFeatures) {\n            queries$.push(this.doQueryFeatures(event));\n        }\n        const resolution = this.map.ol.getView().getResolution();\n        const queryLayers = this.map.layers.filter(layerIsQueryable);\n        queries$.push(...this.queryService.query(queryLayers, {\n            coordinates: event.coordinate,\n            projection: this.map.projection,\n            resolution\n        }));\n        if (queries$.length === 0) {\n            return;\n        }\n        if (this.waitForAllQueries) {\n            this.queries$$.push(zip(...queries$).subscribe((results) => {\n                const features = [].concat(...results);\n                this.query.emit({ features, event });\n            }));\n        }\n        else {\n            this.queries$$ = queries$.map((query$) => {\n                return query$.subscribe((features) => {\n                    this.query.emit({ features, event });\n                });\n            });\n        }\n    }\n    /**\n     * Query features already present on the map\n     * @param event OL map browser pointer event\n     */\n    doQueryFeatures(event) {\n        const clickedFeatures = [];\n        if (event.type === 'singleclick') {\n            this.map.ol.forEachFeatureAtPixel(event.pixel, (featureOL, layerOL) => {\n                const layer = this.map.getLayerById(layerOL.values_._layer.id);\n                if (featureOL) {\n                    if (featureOL.get('features')) {\n                        for (const feature of featureOL.get('features')) {\n                            const newFeature = featureFromOl(feature, this.map.projection);\n                            newFeature.meta = {\n                                title: feature.values_.nom,\n                                id: layerOL.values_._layer.id + '.' + feature.id_,\n                                icon: feature.values_._icon,\n                                sourceTitle: layerOL.values_.title,\n                                alias: this.queryService.getAllowedFieldsAndAlias(layer),\n                            };\n                            clickedFeatures.push(newFeature);\n                        }\n                    }\n                    else if (featureOL instanceof OlRenderFeature) {\n                        const newFeature = renderFeatureFromOl(featureOL, this.map.projection, layerOL);\n                        newFeature.meta = {\n                            id: layerOL.values_._layer.id + '.' + newFeature.meta.id,\n                            sourceTitle: layerOL.values_.title,\n                            alias: this.queryService.getAllowedFieldsAndAlias(layer),\n                            title: this.queryService.getQueryTitle(newFeature, layer) || newFeature.meta.title\n                        };\n                        clickedFeatures.push(newFeature);\n                    }\n                    else {\n                        const newFeature = featureFromOl(featureOL, this.map.projection, layerOL);\n                        newFeature.meta = {\n                            id: layerOL.values_._layer.id + '.' + newFeature.meta.id,\n                            sourceTitle: layerOL.values_.title,\n                            alias: this.queryService.getAllowedFieldsAndAlias(layer),\n                            title: this.queryService.getQueryTitle(newFeature, layer) || newFeature.meta.title\n                        };\n                        clickedFeatures.push(newFeature);\n                    }\n                }\n            }, {\n                hitTolerance: this.queryFeaturesHitTolerance || 0,\n                layerFilter: this.queryFeaturesCondition\n                    ? this.queryFeaturesCondition\n                    : olLayerIsQueryable\n            });\n        }\n        else if (event.type === 'boxend') {\n            const dragExtent = event.target.getGeometry().getExtent();\n            this.map.layers\n                .filter(layerIsQueryable)\n                .filter(layer => layer instanceof VectorLayer && layer.visible)\n                .map(layer => {\n                const featuresOL = layer.dataSource.ol;\n                featuresOL.forEachFeatureIntersectingExtent(dragExtent, (olFeature) => {\n                    const newFeature = featureFromOl(olFeature, this.map.projection, layer.ol);\n                    newFeature.meta = {\n                        id: layer.id + '.' + olFeature.id_,\n                        icon: olFeature.values_._icon,\n                        sourceTitle: layer.title,\n                        alias: this.queryService.getAllowedFieldsAndAlias(layer),\n                        title: this.queryService.getQueryTitle(newFeature, layer) || newFeature.meta.title\n                    };\n                    clickedFeatures.push(newFeature);\n                });\n            });\n        }\n        return of(clickedFeatures);\n    }\n    /**\n     * Cancel ongoing requests, if any\n     */\n    cancelOngoingQueries() {\n        this.queries$$.forEach((sub) => sub.unsubscribe());\n        this.queries$$ = [];\n    }\n    /**\n     * Add a drag box interaction and, on drag box end, select features\n     */\n    addDragBoxInteraction() {\n        let olDragSelectInteractionOnQuery;\n        const olInteractions = this.map.ol.getInteractions().getArray();\n        // There can only be one dragbox interaction, so find the current one, if any\n        // Don't keep a reference to the current dragbox because we don't want\n        // to remove it when this startegy is deactivated\n        for (const olInteraction of olInteractions) {\n            if (olInteraction instanceof OlDragSelectInteraction) {\n                olDragSelectInteractionOnQuery = olInteraction;\n                break;\n            }\n        }\n        // If no drag box interaction is found, create a new one and add it to the map\n        if (olDragSelectInteractionOnQuery === undefined) {\n            olDragSelectInteractionOnQuery = new OlDragSelectInteraction({\n                condition: ctrlKeyDown\n            });\n            this.map.ol.addInteraction(olDragSelectInteractionOnQuery);\n            this.olDragSelectInteraction = olDragSelectInteractionOnQuery;\n        }\n        this.olDragSelectInteractionEndKey = olDragSelectInteractionOnQuery.on('boxend', (event) => this.onMapEvent(event));\n    }\n    /**\n     * Remove drag box interaction\n     */\n    removeDragBoxInteraction() {\n        if (this.olDragSelectInteractionEndKey !== undefined) {\n            unByKey(this.olDragSelectInteractionEndKey);\n        }\n        if (this.olDragSelectInteraction !== undefined) {\n            this.map.ol.removeInteraction(this.olDragSelectInteraction);\n        }\n        this.olDragSelectInteraction = undefined;\n    }\n}\nQueryDirective.ɵfac = function QueryDirective_Factory(t) { return new (t || QueryDirective)(ɵngcc0.ɵɵdirectiveInject(MapBrowserComponent, 2), ɵngcc0.ɵɵdirectiveInject(QueryService)); };\nQueryDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: QueryDirective, selectors: [[\"\", \"igoQuery\", \"\"]], inputs: { queryFeatures: \"queryFeatures\", queryFeaturesHitTolerance: \"queryFeaturesHitTolerance\", waitForAllQueries: \"waitForAllQueries\", queryFeaturesCondition: \"queryFeaturesCondition\" }, outputs: { query: \"query\" } });\nQueryDirective.ctorParameters = () => [\n    { type: MapBrowserComponent, decorators: [{ type: Self }] },\n    { type: QueryService }\n];\nQueryDirective.propDecorators = {\n    queryFeatures: [{ type: Input }],\n    queryFeaturesHitTolerance: [{ type: Input }],\n    queryFeaturesCondition: [{ type: Input }],\n    waitForAllQueries: [{ type: Input }],\n    query: [{ type: Output }]\n};\n\n/**\n * Base search source class\n */\nclass SearchSource {\n    constructor(options) {\n        this.options = options;\n        this.options = Object.assign({}, this.getDefaultOptions(), options);\n        // Set Default Params from Settings\n        this.settings.forEach(setting => {\n            this.setParamFromSetting(setting);\n        });\n    }\n    /**\n     * Get search source's id\n     * @returns Search source's id\n     */\n    getId() {\n        throw new Error('You have to implement the method \"getId\".');\n    }\n    /**\n     * Get search source's type\n     * @returns Search source's type\n     */\n    getType() {\n        throw new Error('You have to implement the method \"getType\".');\n    }\n    /**\n     * Get search source's default options\n     * @returns Search source default options\n     */\n    getDefaultOptions() {\n        throw new Error('You have to implement the method \"getDefaultOptions\".');\n    }\n    /**\n     * Search source's title\n     */\n    get title() {\n        return this.options.title;\n    }\n    /**\n     * Whether the search source is available\n     */\n    get available() {\n        return this.options.available !== false;\n    }\n    /**\n     * Whether the search source is enabled\n     */\n    set enabled(value) {\n        this.options.enabled = value;\n    }\n    get enabled() {\n        return this.available && this.options.enabled !== false;\n    }\n    get showInPointerSummary() {\n        const showInPointerSummary = this.options.showInPointerSummary;\n        return showInPointerSummary ? showInPointerSummary : false;\n    }\n    get showInSettings() {\n        const showInSettings = this.options.showInSettings;\n        return showInSettings === undefined ? true : showInSettings;\n    }\n    /**\n     * Search url\n     */\n    get searchUrl() {\n        return this.options.searchUrl;\n    }\n    /**\n     * Search query params\n     */\n    get params() {\n        return this.options.params === undefined ? {} : this.options.params;\n    }\n    /**\n     * Search settings\n     */\n    get settings() {\n        return this.options.settings === undefined ? [] : this.options.settings;\n    }\n    /**\n     * Set params from selected settings\n     */\n    setParamFromSetting(setting) {\n        switch (setting.type) {\n            case 'radiobutton':\n                setting.values.forEach(conf => {\n                    if (conf.enabled) {\n                        this.options.params = Object.assign(this.options.params || {}, {\n                            [setting.name]: conf.value\n                        });\n                    }\n                });\n                break;\n            case 'checkbox':\n                let confValue = '';\n                setting.values\n                    .filter(s => s.available !== false)\n                    .forEach(conf => {\n                    if (conf.enabled) {\n                        confValue += conf.value + ',';\n                    }\n                });\n                confValue = confValue.slice(0, -1);\n                this.options.params = Object.assign(this.options.params || {}, {\n                    [setting.name]: confValue\n                });\n                break;\n        }\n    }\n    /**\n     * Search results display order\n     */\n    get displayOrder() {\n        return this.options.order === undefined ? 99 : this.options.order;\n    }\n    /**\n     * Get hashtags valid\n     * @param hashtag hashtag from query\n     */\n    getHashtagsValid(term, settingsName) {\n        const hashtags = term.match(/(#[^\\s]+)/g);\n        if (!hashtags) {\n            return undefined;\n        }\n        const searchSourceSetting = this.getSettingsValues(settingsName);\n        const hashtagsValid = [];\n        hashtags.forEach(hashtag => {\n            searchSourceSetting.values.forEach(conf => {\n                const hashtagKey = hashtag.substring(1);\n                if (typeof conf.value === 'string') {\n                    const types = conf.value\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '')\n                        .split(',');\n                    const index = types.indexOf(hashtagKey\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, ''));\n                    if (index !== -1) {\n                        hashtagsValid.push(types[index]);\n                    }\n                }\n                if (conf.hashtags && conf.hashtags.indexOf(hashtagKey) !== -1) {\n                    hashtagsValid.push(conf.value);\n                }\n            });\n        });\n        return hashtagsValid.filter((a, b) => hashtagsValid.indexOf(a) === b);\n    }\n    getSettingsValues(search) {\n        return this.getDefaultOptions().settings.find((value) => {\n            return value.name === search;\n        });\n    }\n}\n/**\n * Search source ID\n * @internal\n */\nSearchSource.id = '';\n/**\n * Search source type\n * @internal\n */\nSearchSource.type = '';\n\n/**\n * Map search source. For now it has no search capability. All it does\n * is act as a placeholder for the map query results' \"search source\".\n */\nclass QuerySearchSource extends SearchSource {\n    constructor(options) {\n        super(options);\n    }\n    getId() {\n        return QuerySearchSource.id;\n    }\n    getType() {\n        return QuerySearchSource.type;\n    }\n    getDefaultOptions() {\n        return {\n            title: 'Carte'\n        };\n    }\n}\nQuerySearchSource.ɵfac = function QuerySearchSource_Factory(t) { return new (t || QuerySearchSource)(ɵngcc0.ɵɵinject('options')); };\nQuerySearchSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: QuerySearchSource, factory: QuerySearchSource.ɵfac });\nQuerySearchSource.id = 'map';\nQuerySearchSource.type = FEATURE;\nQuerySearchSource.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] }\n];\n\nclass GoogleLinks {\n    static getGoogleMapsCoordLink(lon, lat) {\n        return 'https://www.google.com/maps?q=' + lat + ',' + lon;\n    }\n    static getGoogleStreetViewLink(lon, lat) {\n        return 'https://www.google.com/maps?q=&layer=c&cbll=' + lat + ',' + lon;\n    }\n    static getGoogleMapsNameLink(name) {\n        const encodedName = encodeURI(name);\n        return 'https://www.google.com/maps?q=' + encodedName;\n    }\n}\n\n/**\n * Generate a style for selected features\n * @param feature The feature to generate the style\n * @returns A olStyle\n */\nfunction getSelectedMarkerStyle(feature) {\n    const baseColor = [0, 255, 255];\n    const strokeWidth = 4;\n    const isOlFeature = feature instanceof olFeature;\n    const geometry = isOlFeature ? feature.getGeometry() : feature.geometry;\n    const geometryType = isOlFeature ? geometry.getType() : geometry.type;\n    if (!geometry || geometryType === 'Point') {\n        return createOverlayMarkerStyle({\n            text: isOlFeature ? undefined : feature.meta.mapTitle,\n            outlineColor: baseColor\n        });\n    }\n    else {\n        return createOverlayDefaultStyle({\n            text: isOlFeature ? undefined : feature.meta.mapTitle,\n            strokeWidth,\n            strokeColor: baseColor\n        });\n    }\n}\n/**\n * Generate a basic style for features\n * @param feature The feature to generate the style\n * @returns A olStyle\n */\nfunction getMarkerStyle(feature) {\n    const baseColor = [0, 255, 255];\n    const isOlFeature = feature instanceof olFeature;\n    const geometry = isOlFeature ? feature.getGeometry() : feature.geometry;\n    const geometryType = isOlFeature ? geometry.getType() : geometry.type;\n    if (!geometry || geometryType === 'Point') {\n        return createOverlayMarkerStyle({\n            text: isOlFeature ? undefined : feature.meta.mapTitle,\n            opacity: 0.5,\n            outlineColor: baseColor\n        });\n    }\n    else if (geometryType === 'LineString' ||\n        geometryType === 'MultiLineString') {\n        return createOverlayDefaultStyle({\n            text: isOlFeature ? undefined : feature.meta.mapTitle,\n            strokeOpacity: 0.5,\n            strokeColor: baseColor\n        });\n    }\n    else {\n        return createOverlayDefaultStyle({\n            text: isOlFeature ? undefined : feature.meta.mapTitle,\n            fillOpacity: 0.15,\n            strokeColor: baseColor\n        });\n    }\n}\n\nclass OsmLinks {\n    static getOpenStreetMapLink(lon, lat, zoom = 17) {\n        // return 'https://www.google.com/maps?q=' + lat + ',' + lon;\n        return `https://www.openstreetmap.org/?mlat=${lat}&mlon=${lon}#map=${zoom}/${lat}/${lon}`;\n    }\n    static getOpenStreetCamLink(lon, lat, zoom = 17) {\n        return `https://openstreetcam.org/map/@${lat},${lon},${zoom}z`;\n    }\n}\n\nclass CatalogService {\n    constructor(http, config, languageService, messageService, capabilitiesService) {\n        this.http = http;\n        this.config = config;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.capabilitiesService = capabilitiesService;\n    }\n    loadCatalogs() {\n        const contextConfig = this.config.getConfig('context') || {};\n        const catalogConfig = this.config.getConfig('catalog') || {};\n        const apiUrl = catalogConfig.url || contextConfig.url;\n        const catalogsFromConfig = catalogConfig.sources || [];\n        const observables$ = [];\n        if (apiUrl) {\n            // Base layers catalog\n            if (catalogConfig.baseLayers) {\n                const translate = this.languageService.translate;\n                const title = translate.instant('igo.geo.catalog.baseLayers');\n                const baseLayersCatalog = [\n                    {\n                        id: 'catalog.baselayers',\n                        title,\n                        url: `${apiUrl}/baselayers`,\n                        type: 'baselayers'\n                    }\n                ];\n                observables$.push(of(baseLayersCatalog));\n            }\n            // Catalogs from API\n            const catalogsFromApi$ = this.http\n                .get(`${apiUrl}/catalogs`)\n                .pipe(map((catalogs) => catalogs.map((c) => Object.assign(c, c.options))), catchError((_response) => EMPTY));\n            observables$.push(catalogsFromApi$);\n        }\n        // Catalogs from config\n        if (catalogsFromConfig.length > 0) {\n            observables$.push(of(catalogsFromConfig).pipe(map((catalogs) => catalogs.map((c) => {\n                if (!c.id) {\n                    c.id = uuid();\n                }\n                return c;\n            }))));\n        }\n        return zip(...observables$).pipe(map((catalogs) => [].concat.apply([], catalogs)));\n    }\n    loadCatalogItems(catalog) {\n        let newCatalog;\n        newCatalog = CatalogFactory.createInstanceCatalog(catalog, this);\n        return newCatalog.collectCatalogItems();\n    }\n    loadCatalogBaseLayerItems(catalog) {\n        return this.getCatalogBaseLayersOptions(catalog).pipe(map((layersOptions) => {\n            const items = layersOptions.map((layerOptions) => {\n                return {\n                    id: generateIdFromSourceOptions(layerOptions.sourceOptions),\n                    title: layerOptions.title,\n                    type: CatalogItemType.Layer,\n                    options: layerOptions\n                };\n            });\n            return [\n                {\n                    id: 'catalog.group.baselayers',\n                    type: CatalogItemType.Group,\n                    title: catalog.title,\n                    items\n                }\n            ];\n        }));\n    }\n    getCatalogBaseLayersOptions(catalog) {\n        return this.http.get(catalog.url);\n    }\n    loadCatalogWMSLayerItems(catalog) {\n        return this.getCatalogCapabilities(catalog).pipe(map((capabilities) => {\n            const items = [];\n            this.includeRecursiveItems(catalog, capabilities.Capability.Layer, items);\n            return items;\n        }));\n    }\n    loadCatalogWMTSLayerItems(catalog) {\n        return this.getCatalogCapabilities(catalog).pipe(map((capabilities) => this.getWMTSItems(catalog, capabilities)));\n    }\n    loadCatalogArcGISRestItems(catalog) {\n        return this.getCatalogCapabilities(catalog).pipe(map((capabilities) => {\n            return this.getArcGISRESTItems(catalog, capabilities);\n        }));\n    }\n    loadCatalogCompositeLayerItems(catalog) {\n        const compositeCatalog = catalog.composite;\n        const catalogsFromInstance = [];\n        compositeCatalog.map((component) => catalogsFromInstance.push(CatalogFactory.createInstanceCatalog(component, this)));\n        // get CatalogItems for each original Catalog-----------------------------------------------------\n        const request1$ = [];\n        catalogsFromInstance.map((component) => request1$.push(component.collectCatalogItems()));\n        // integrate imposed group -----------------------------------------------------\n        let request2$ = [];\n        function flatDeepLayer(arr) {\n            return arr.reduce((acc, val) => acc.concat(val.type === CatalogItemType.Group ? flatDeepLayer(val.items) : val), []);\n        }\n        if (Object.keys(compositeCatalog).find((k) => compositeCatalog[k].groupImpose)) {\n            const pushImposeGroup = (item, index) => {\n                const c = catalogsFromInstance[index];\n                const outGroupImpose = Object.assign({}, c.groupImpose);\n                outGroupImpose.address = c.id;\n                outGroupImpose.type = CatalogItemType.Group;\n                outGroupImpose.items = [];\n                const flatLayer = flatDeepLayer(item);\n                flatLayer.map((v) => (v.address = `${outGroupImpose.address}.${outGroupImpose.id}`));\n                outGroupImpose.items = flatLayer;\n                return outGroupImpose;\n            };\n            request2$ = request1$.map((obs, idx) => obs.pipe(map((items) => compositeCatalog[idx].groupImpose\n                ? pushImposeGroup(items, idx)\n                : items)));\n        }\n        else {\n            request2$ = request1$;\n        }\n        // concat Group -----------------------------------------------------\n        const request3$ = zip(...request2$).pipe(map((output) => [].concat(...output) // [].concat.apply([], result1\n        ));\n        // merge Group (first level only) -----------------------------------------------------\n        const groupByGroupId = (data, keyFn) => data.reduce((acc, group) => {\n            const groupId = keyFn(group);\n            const ind = acc.find((x) => x.id === groupId);\n            if (!ind) {\n                acc[acc.length] = group;\n            }\n            else {\n                const ix = acc.indexOf(ind);\n                if (acc[ix].address.split('|').indexOf(group.address) === -1) {\n                    acc[ix].address = `${acc[ix].address}|${group.address}`;\n                }\n                acc[ix].items.push(...group.items);\n            }\n            return acc;\n        }, []);\n        // merge Layer for each Level (catalog, group(recursive))\n        const recursiveGroupByLayerAddress = (items, keyFn) => items.reduce((acc, item, idx, arr) => {\n            const layerTitle = keyFn(item);\n            const outItem = Object.assign({}, item);\n            if (item.type === CatalogItemType.Layer) {\n                // same title, same address => result: only one item is keep\n                // same title, address diff\n                const indicesMatchTitle = [];\n                const diffAddress = arr.filter((x, i) => {\n                    let bInd = false;\n                    if (x.title === layerTitle && x.type === CatalogItemType.Layer) {\n                        if (i !== idx && x.address !== item.address) {\n                            bInd = true;\n                        }\n                        indicesMatchTitle.push(i);\n                    }\n                    return bInd;\n                }); // $& i !== idx\n                if (diffAddress.length > 0) {\n                    const nPosition = indicesMatchTitle.findIndex((x) => x === idx) + 1;\n                    outItem.title = `${item.title} (${nPosition})`; // source: ${item.address.split('.')[0]}\n                }\n                const exist = acc.find((x) => x.title === outItem.title && x.type === CatalogItemType.Layer);\n                if (!exist) {\n                    acc[acc.length] = outItem;\n                }\n            }\n            else if (item.type === CatalogItemType.Group) {\n                outItem.items = recursiveGroupByLayerAddress(item.items, (layer) => layer.title);\n                acc[acc.length] = outItem;\n            }\n            return acc;\n        }, []);\n        const request4$ = request3$.pipe(map((output) => groupByGroupId(output, (group) => group.id)), map((output) => [].concat(...output)), map((data) => recursiveGroupByLayerAddress(data, (layer) => layer.title)));\n        return request4$;\n    }\n    getCatalogCapabilities(catalog) {\n        const sType = TypeCatalog[catalog.type];\n        return this.capabilitiesService\n            .getCapabilities(TypeCapabilities[sType], catalog.url, catalog.version)\n            .pipe(catchError((e) => {\n            const title = this.languageService.translate.instant('igo.geo.catalog.unavailableTitle');\n            const message = this.languageService.translate.instant('igo.geo.catalog.unavailable', { value: catalog.title });\n            this.messageService.error(message, title);\n            throw e;\n        }));\n    }\n    prepareCatalogItemLayer(layer, idParent, layersQueryFormat, catalog) {\n        const configuredQueryFormat = this.retriveLayerInfoFormat(layer.Name, layersQueryFormat);\n        const metadata = layer.DataURL ? layer.DataURL[0] : undefined;\n        const legendOptions = catalog.showLegend && layer.Style\n            ? this.capabilitiesService.getStyle(layer.Style)\n            : undefined;\n        const params = Object.assign({}, catalog.queryParams, {\n            LAYERS: layer.Name,\n            VERSION: catalog.version\n        });\n        const baseSourceOptions = {\n            type: 'wms',\n            url: catalog.url,\n            crossOrigin: catalog.setCrossOriginAnonymous ? 'anonymous' : undefined,\n            queryFormat: configuredQueryFormat,\n            queryHtmlTarget: configuredQueryFormat === QueryFormat.HTML ||\n                configuredQueryFormat === QueryFormat.HTMLGML2\n                ? 'iframe'\n                : undefined,\n            optionsFromCapabilities: true\n        };\n        const sourceOptions = Object.assign({}, baseSourceOptions, catalog.sourceOptions, { params });\n        const layerPrepare = {\n            id: generateIdFromSourceOptions(sourceOptions),\n            type: CatalogItemType.Layer,\n            title: layer.Title,\n            address: idParent,\n            options: {\n                maxResolution: getResolutionFromScale(layer.MaxScaleDenominator),\n                minResolution: getResolutionFromScale(layer.MinScaleDenominator),\n                metadata: {\n                    url: metadata ? metadata.OnlineResource : undefined,\n                    extern: metadata ? true : undefined,\n                    abstract: layer.Abstract\n                },\n                legendOptions,\n                tooltip: { type: catalog.tooltipType },\n                sourceOptions\n            }\n        };\n        return ObjectUtils.removeUndefined(layerPrepare);\n    }\n    prepareCatalogItemGroup(itemListIn, regexes, idGroup, layersQueryFormat, catalog) {\n        const groupPrepare = {\n            id: idGroup,\n            type: CatalogItemType.Group,\n            title: itemListIn.Title,\n            address: catalog.id,\n            items: itemListIn.Layer.reduce((items, layer) => {\n                if (layer.Layer !== undefined) {\n                    // recursive, check next level\n                    const idGroupItemNextLevel = idGroup + `.group.${layer.Name || layer.Layer[0].Name}`;\n                    const groupItem = this.prepareCatalogItemGroup(layer, regexes, idGroupItemNextLevel, layersQueryFormat, catalog);\n                    items.push(groupItem);\n                }\n                else {\n                    if (this.testLayerRegexes(layer.Name, regexes) === false) {\n                        return items;\n                    }\n                    const layerItem = this.prepareCatalogItemLayer(layer, idGroup, layersQueryFormat, catalog);\n                    items.push(layerItem);\n                }\n                return items;\n            }, [])\n        };\n        return groupPrepare;\n    }\n    includeRecursiveItems(catalog, itemListIn, itemsPrepare, loopLevel = 0) {\n        // Dig all levels until last level (layer object are not defined on last level)\n        const regexes = (catalog.regFilters || []).map((pattern) => new RegExp(pattern));\n        if (!itemListIn.Layer) {\n            return;\n        }\n        for (const item of itemListIn.Layer) {\n            if (item.Layer !== undefined) {\n                // recursive, check next level\n                this.includeRecursiveItems(catalog, item, itemsPrepare, loopLevel + 1);\n                continue;\n            }\n            const layersQueryFormat = this.findCatalogInfoFormat(catalog);\n            // group(with layers) and layer(without group) level 1\n            if (loopLevel !== 0) {\n                // TODO: Slice that into multiple methods\n                // Define object of group layer\n                const idGroupItem = `catalog.group.${itemListIn.Name || item.Name}`;\n                const groupItem = this.prepareCatalogItemGroup(itemListIn, regexes, idGroupItem, layersQueryFormat, catalog);\n                if (groupItem.items.length !== 0) {\n                    itemsPrepare.push(groupItem);\n                }\n                // Break the group (don't add a group of layer for each of their layer!)\n                break;\n            }\n            else {\n                // layer without group\n                if (this.testLayerRegexes(item.Name, regexes) !== false) {\n                    const layerItem = this.prepareCatalogItemLayer(item, catalog.id, layersQueryFormat, catalog);\n                    itemsPrepare.push(layerItem);\n                }\n            }\n        }\n    }\n    getWMTSItems(catalog, capabilities) {\n        const layers = capabilities.Contents.Layer;\n        const regexes = (catalog.regFilters || []).map((pattern) => new RegExp(pattern));\n        return layers\n            .map((layer) => {\n            if (this.testLayerRegexes(layer.Identifier, regexes) === false) {\n                return undefined;\n            }\n            const params = Object.assign({}, catalog.queryParams, {\n                version: '1.0.0'\n            });\n            const baseSourceOptions = {\n                type: 'wmts',\n                url: catalog.url,\n                crossOrigin: catalog.setCrossOriginAnonymous\n                    ? 'anonymous'\n                    : undefined,\n                layer: layer.Identifier,\n                matrixSet: catalog.matrixSet,\n                optionsFromCapabilities: true,\n                requestEncoding: catalog.requestEncoding || 'KVP',\n                style: 'default'\n            };\n            const sourceOptions = Object.assign({}, baseSourceOptions, catalog.sourceOptions, { params });\n            return ObjectUtils.removeUndefined({\n                id: generateIdFromSourceOptions(sourceOptions),\n                type: CatalogItemType.Layer,\n                title: layer.Title,\n                address: catalog.id,\n                options: {\n                    sourceOptions\n                }\n            });\n        })\n            .filter((item) => item !== undefined);\n    }\n    getArcGISRESTItems(catalog, capabilities) {\n        const layers = capabilities.layers;\n        const regexes = (catalog.regFilters || []).map((pattern) => new RegExp(pattern));\n        return layers\n            .map((layer) => {\n            if (this.testLayerRegexes(layer.id, regexes) === false) {\n                return undefined;\n            }\n            const baseSourceOptions = {\n                type: 'arcgisrest',\n                url: catalog.url,\n                crossOrigin: catalog.setCrossOriginAnonymous\n                    ? 'anonymous'\n                    : undefined,\n                layer: layer.id,\n                matrixSet: catalog.matrixSet,\n                optionsFromCapabilities: true,\n                style: 'default'\n            };\n            const sourceOptions = Object.assign({}, baseSourceOptions, catalog.sourceOptions);\n            return ObjectUtils.removeUndefined({\n                id: generateIdFromSourceOptions(sourceOptions),\n                type: CatalogItemType.Layer,\n                title: layer.name,\n                address: catalog.id,\n                options: {\n                    sourceOptions\n                }\n            });\n        })\n            .filter((item) => item !== undefined);\n    }\n    testLayerRegexes(layerName, regexes) {\n        if (regexes.length === 0) {\n            return true;\n        }\n        return regexes.find((regex) => regex.test(layerName)) !== undefined;\n    }\n    retriveLayerInfoFormat(layerNameFromCatalog, layersQueryFormat) {\n        const currentLayerInfoFormat = layersQueryFormat.find((f) => f.layer === layerNameFromCatalog);\n        const baseInfoFormat = layersQueryFormat.find((f) => f.layer === '*');\n        let queryFormat;\n        if (currentLayerInfoFormat) {\n            queryFormat = currentLayerInfoFormat.queryFormat;\n        }\n        else if (baseInfoFormat) {\n            queryFormat = baseInfoFormat.queryFormat;\n        }\n        return queryFormat;\n    }\n    findCatalogInfoFormat(catalog) {\n        const layersQueryFormat = [];\n        if (!catalog.queryFormat) {\n            return layersQueryFormat;\n        }\n        Object.keys(catalog.queryFormat).forEach((configuredInfoFormat) => {\n            if (catalog.queryFormat[configuredInfoFormat] instanceof Array) {\n                catalog.queryFormat[configuredInfoFormat].forEach((layerName) => {\n                    if (!layersQueryFormat.find((specific) => specific.layer === layerName)) {\n                        layersQueryFormat.push({\n                            layer: layerName,\n                            queryFormat: configuredInfoFormat\n                        });\n                    }\n                });\n            }\n            else {\n                if (!layersQueryFormat.find((specific) => specific.layer === catalog.queryFormat[configuredInfoFormat])) {\n                    layersQueryFormat.push({\n                        layer: catalog.queryFormat[configuredInfoFormat],\n                        queryFormat: configuredInfoFormat\n                    });\n                }\n            }\n        });\n        return layersQueryFormat;\n    }\n}\nCatalogService.ɵfac = function CatalogService_Factory(t) { return new (t || CatalogService)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.ConfigService), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject(ɵngcc7.MessageService), ɵngcc0.ɵɵinject(CapabilitiesService)); };\nCatalogService.ɵprov = ɵɵdefineInjectable({ factory: function CatalogService_Factory() { return new CatalogService(ɵɵinject(HttpClient), ɵɵinject(ConfigService), ɵɵinject(LanguageService), ɵɵinject(MessageService), ɵɵinject(CapabilitiesService)); }, token: CatalogService, providedIn: \"root\" });\nCatalogService.ctorParameters = () => [\n    { type: HttpClient },\n    { type: ConfigService },\n    { type: LanguageService },\n    { type: MessageService },\n    { type: CapabilitiesService }\n];\n\n/**\n * Component to browse a catalog's groups and layers and display them on a map.\n */\nclass CatalogBrowserComponent {\n    constructor(layerService, cdRef) {\n        this.layerService = layerService;\n        this.cdRef = cdRef;\n        this.catalogAllowLegend = false;\n        /**\n         * Whether a group can be toggled when it's collapsed\n         */\n        this.toggleCollapsedGroup = true;\n    }\n    // private resolution$$: Subscription;\n    get resolution$() { return this.map.viewController.resolution$; }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        const currentItems = this.map.layers.map((layer) => {\n            return {\n                id: layer.options.source.id,\n                title: layer.title,\n                type: CatalogItemType.Layer\n            };\n        });\n        this.store.state.updateMany(currentItems, { added: true }, true);\n        if (this.catalog && this.catalog.sortDirection !== undefined) {\n            this.store.view.sort({\n                direction: this.catalog.sortDirection,\n                valueAccessor: (item) => item.title\n            });\n        }\n        const catalogShowLegend = this.catalog ? this.catalog.showLegend : false;\n        this.catalogAllowLegend = catalogShowLegend ? catalogShowLegend : this.catalogAllowLegend;\n        this.watcher = new EntityStoreWatcher(this.store, this.cdRef);\n    }\n    ngOnDestroy() {\n        this.watcher.destroy();\n    }\n    /**\n     * @internal\n     */\n    isGroup(item) {\n        return item.type === CatalogItemType.Group;\n    }\n    /**\n     * @internal\n     */\n    isLayer(item) {\n        return item.type === CatalogItemType.Layer;\n    }\n    /**\n     * When a layer is added or removed, add or remove it from the map\n     * @internal\n     * @param event Layer added event\n     */\n    onLayerAddedChange(event) {\n        const layer = event.layer;\n        this.store.state.update(layer, { added: event.added }, false);\n        event.added ? this.addLayerToMap(layer) : this.removeLayerFromMap(layer);\n    }\n    /**\n     * When a froup is added or removed, add or remove it from the map\n     * @internal\n     * @param event Group added event\n     */\n    onGroupAddedChange(event) {\n        const group = event.group;\n        this.store.state.update(group, { added: event.added }, false);\n        event.added ? this.addGroupToMap(group) : this.removeGroupFromMap(group);\n    }\n    /**\n     * Add layer to map\n     * @param layer Catalog layer\n     */\n    addLayerToMap(layer) {\n        this.addLayersToMap([layer]);\n    }\n    /**\n     * Remove layer from map\n     * @param layer Catalog layer\n     */\n    removeLayerFromMap(layer) {\n        this.removeLayersFromMap([layer]);\n    }\n    /**\n     * Add multiple layers to map\n     * @param layers Catalog layers\n     */\n    addLayersToMap(layers) {\n        const layers$ = layers.map((layer) => {\n            if (layer.options.sourceOptions.optionsFromApi === undefined) {\n                layer.options.sourceOptions.optionsFromApi = true;\n            }\n            return this.layerService.createAsyncLayer(layer.options);\n        });\n        zip(...layers$).subscribe((oLayers) => {\n            this.store.state.updateMany(layers, { added: true });\n            this.map.addLayers(oLayers);\n        });\n    }\n    /**\n     * Remove multiple layers from map\n     * @param layers Catalog layers\n     */\n    removeLayersFromMap(layers) {\n        layers.forEach((layer) => {\n            this.store.state.update(layer, { added: false });\n            if (layer.options.baseLayer === true) {\n                const oLayer = this.map.getLayerById(layer.options.id);\n                if (oLayer !== undefined) {\n                    this.map.removeLayer(oLayer);\n                }\n            }\n            else {\n                const oLayer = this.map.getLayerById(layer.id);\n                if (oLayer !== undefined) {\n                    this.map.removeLayer(oLayer);\n                }\n            }\n        });\n    }\n    /**\n     * Sort the layers by title. asc or desc.\n     * @internal\n     */\n    sortCatalogItemsByTitle(items, direction) {\n        const returnItem = items.sort((a, b) => {\n            const titleA = a.title.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n            const titleB = b.title.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n            if (titleA < titleB) {\n                return -1;\n            }\n            if (titleA > titleB) {\n                return 1;\n            }\n            return 0;\n        });\n        switch (direction) {\n            case 'asc':\n                return returnItem;\n            case 'desc':\n                return returnItem.reverse();\n            default:\n                return items;\n        }\n    }\n    /**\n     * Add all the layers of a group to map\n     * @param group Catalog group\n     */\n    addGroupToMap(group) {\n        let layers = group.items.filter((item) => {\n            const added = this.store.state.get(item).added || false;\n            return this.isLayer(item) && added === false;\n        });\n        if (this.catalog && this.catalog.sortDirection !== undefined) {\n            layers = this.sortCatalogItemsByTitle(layers, this.catalog.sortDirection);\n        }\n        this.addLayersToMap(layers.reverse());\n    }\n    /**\n     * Remove all the layers of a group from map\n     * @param group Catalog group\n     */\n    removeGroupFromMap(group) {\n        const layers = group.items.filter((item) => {\n            const added = this.store.state.get(item).added || false;\n            return this.isLayer(item) && added === true;\n        });\n        this.removeLayersFromMap(layers);\n    }\n}\nCatalogBrowserComponent.ɵfac = function CatalogBrowserComponent_Factory(t) { return new (t || CatalogBrowserComponent)(ɵngcc0.ɵɵdirectiveInject(LayerService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nCatalogBrowserComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CatalogBrowserComponent, selectors: [[\"igo-catalog-browser\"]], inputs: { catalogAllowLegend: \"catalogAllowLegend\", toggleCollapsedGroup: \"toggleCollapsedGroup\", catalog: \"catalog\", store: \"store\", map: \"map\" }, decls: 3, vars: 5, consts: [[3, \"navigation\", \"selection\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [4, \"ngIf\"], [3, \"catalog\", \"group\", \"state\", \"resolution\", \"catalogAllowLegend\", \"toggleCollapsed\", \"addedChange\", \"layerAddedChange\"], [\"igoListItem\", \"\", 3, \"layer\", \"resolution\", \"catalogAllowLegend\", \"added\", \"addedChange\"]], template: function CatalogBrowserComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-list\", 0);\n        ɵngcc0.ɵɵtemplate(1, CatalogBrowserComponent_ng_template_1_Template, 2, 2, \"ng-template\", 1);\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"navigation\", false)(\"selection\", false);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(2, 3, ctx.store.view.all$()));\n    } }, directives: function () { return [ɵngcc9.ListComponent, ɵngcc1.NgForOf, ɵngcc1.NgIf, CatalogBrowserGroupComponent, CatalogBrowserLayerComponent, ɵngcc9.ListItemDirective]; }, pipes: function () { return [ɵngcc1.AsyncPipe]; }, encapsulation: 2, changeDetection: 0 });\nCatalogBrowserComponent.ctorParameters = () => [\n    { type: LayerService },\n    { type: ChangeDetectorRef }\n];\nCatalogBrowserComponent.propDecorators = {\n    catalogAllowLegend: [{ type: Input }],\n    catalog: [{ type: Input }],\n    store: [{ type: Input }],\n    map: [{ type: Input }],\n    toggleCollapsedGroup: [{ type: Input }]\n};\n\n/**\n * Catalog browser layer item\n */\nclass CatalogBrowserLayerComponent {\n    constructor(layerService) {\n        this.layerService = layerService;\n        this.inRange$ = new BehaviorSubject(true);\n        this.isPreview$ = new BehaviorSubject(false);\n        this.layerLegendShown$ = new BehaviorSubject(false);\n        this.igoLayer$ = new BehaviorSubject(undefined);\n        this.mouseInsideAdd = false;\n        this.catalogAllowLegend = false;\n        /**\n         * Whether the layer is already added to the map\n         */\n        this.added = false;\n        /**\n         * Event emitted when the add/remove button is clicked\n         */\n        this.addedChange = new EventEmitter();\n        this.addedLayerIsPreview = new EventEmitter();\n    }\n    /**\n     * @internal\n     */\n    get title() {\n        return getEntityTitle(this.layer);\n    }\n    /**\n     * @internal\n     */\n    get icon() {\n        return getEntityIcon(this.layer) || 'layers';\n    }\n    ngOnInit() {\n        this.isInResolutionsRange();\n        this.isPreview$.subscribe(value => this.addedLayerIsPreview.emit(value));\n    }\n    computeTitleTooltip() {\n        const layerOptions = this.layer.options;\n        if (!layerOptions.tooltip) {\n            return getEntityTitle(this.layer);\n        }\n        const layerTooltip = layerOptions.tooltip;\n        const layerMetadata = layerOptions.metadata;\n        switch (layerOptions.tooltip.type) {\n            case TooltipType.TITLE:\n                return this.layer.title;\n            case TooltipType.ABSTRACT:\n                if (layerMetadata && layerMetadata.abstract) {\n                    return layerMetadata.abstract;\n                }\n                else {\n                    return this.layer.title;\n                }\n            case TooltipType.CUSTOM:\n                if (layerTooltip && layerTooltip.text) {\n                    return layerTooltip.text;\n                }\n                else {\n                    return this.layer.title;\n                }\n            default:\n                return this.layer.title;\n        }\n    }\n    /**\n     * On mouse event, mouseenter /mouseleave\n     * @internal\n     */\n    onMouseEvent(event) {\n        this.onToggleClick(event);\n    }\n    askForLegend(event) {\n        this.layerLegendShown$.next(!this.layerLegendShown$.value);\n        this.layerService.createAsyncLayer(this.layer.options).pipe(first())\n            .subscribe(layer => this.igoLayer$.next(layer));\n    }\n    /**\n     * On toggle button click, emit the added change event\n     * @internal\n     */\n    onToggleClick(event) {\n        if (typeof this.lastTimeoutRequest !== 'undefined') {\n            clearTimeout(this.lastTimeoutRequest);\n        }\n        if (event.type === 'mouseenter' && this.mouseInsideAdd) {\n            return;\n        }\n        switch (event.type) {\n            case 'click':\n                if (!this.isPreview$.value) {\n                    if (this.added) {\n                        this.remove();\n                    }\n                    else {\n                        this.add();\n                    }\n                }\n                this.isPreview$.next(false);\n                break;\n            case 'mouseenter':\n                if (!this.isPreview$.value && !this.added) {\n                    this.lastTimeoutRequest = setTimeout(() => {\n                        this.add();\n                        this.isPreview$.next(true);\n                    }, 500);\n                }\n                this.mouseInsideAdd = true;\n                break;\n            case 'mouseleave':\n                if (this.isPreview$.value) {\n                    this.remove();\n                    this.isPreview$.next(false);\n                }\n                this.mouseInsideAdd = false;\n                break;\n            default:\n                break;\n        }\n    }\n    /**\n     * Emit added change event with added = true\n     */\n    add() {\n        if (!this.added) {\n            this.added = true;\n            this.addedChange.emit({ added: true, layer: this.layer });\n        }\n    }\n    /**\n     * Emit added change event with added = false\n     */\n    remove() {\n        if (this.added) {\n            this.added = false;\n            this.addedChange.emit({ added: false, layer: this.layer });\n        }\n    }\n    haveGroup() {\n        return !(!this.layer.address || this.layer.address.split('.').length === 1);\n    }\n    isInResolutionsRange() {\n        const minResolution = this.layer.options.minResolution || 0;\n        const maxResolution = this.layer.options.maxResolution || Infinity;\n        this.inRange$.next(this.resolution >= minResolution && this.resolution <= maxResolution);\n        return this.inRange$.value;\n    }\n    computeTooltip() {\n        if (this.added) {\n            return this.isPreview$.value\n                ? 'igo.geo.catalog.layer.addToMap'\n                : this.inRange$.value\n                    ? 'igo.geo.catalog.layer.removeFromMap'\n                    : 'igo.geo.catalog.layer.removeFromMapOutRange';\n        }\n        else {\n            return this.inRange$.value\n                ? 'igo.geo.catalog.layer.addToMap'\n                : 'igo.geo.catalog.layer.addToMapOutRange';\n        }\n    }\n}\nCatalogBrowserLayerComponent.ɵfac = function CatalogBrowserLayerComponent_Factory(t) { return new (t || CatalogBrowserLayerComponent)(ɵngcc0.ɵɵdirectiveInject(LayerService)); };\nCatalogBrowserLayerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CatalogBrowserLayerComponent, selectors: [[\"igo-catalog-browser-layer\"]], inputs: { catalogAllowLegend: \"catalogAllowLegend\", added: \"added\", resolution: \"resolution\", layer: \"layer\" }, outputs: { addedChange: \"addedChange\", addedLayerIsPreview: \"addedLayerIsPreview\" }, decls: 15, vars: 20, consts: [[\"mat-list-avatar\", \"\", \"svgIcon\", \"blank\", 4, \"ngIf\"], [\"mat-line\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"ngClass\", \"matTooltip\", \"click\"], [3, \"layer\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"mouseenter\", \"mouseleave\", \"click\"], [\"matBadge\", \"\", \"igoMatBadgeIcon\", \"eye-off\", \"igoMatBadgeInverseColor\", \"true\", \"matBadgeDisabled\", \"true\", \"matBadgeSize\", \"small\", \"matBadgePosition\", \"after\", 3, \"matBadgeHidden\", \"svgIcon\"], [1, \"igo-cataloglayer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", \"svgIcon\", \"blank\"]], template: function CatalogBrowserLayerComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n        ɵngcc0.ɵɵtemplate(1, CatalogBrowserLayerComponent_mat_icon_1_Template, 1, 0, \"mat-icon\", 0);\n        ɵngcc0.ɵɵelementStart(2, \"h4\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function CatalogBrowserLayerComponent_Template_h4_click_2_listener($event) { return ctx.askForLegend($event); });\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(4, \"igo-metadata-button\", 2);\n        ɵngcc0.ɵɵelementStart(5, \"button\", 3);\n        ɵngcc0.ɵɵlistener(\"mouseenter\", function CatalogBrowserLayerComponent_Template_button_mouseenter_5_listener($event) { return ctx.onMouseEvent($event); })(\"mouseleave\", function CatalogBrowserLayerComponent_Template_button_mouseleave_5_listener($event) { return ctx.onMouseEvent($event); })(\"click\", function CatalogBrowserLayerComponent_Template_button_click_5_listener($event) { return ctx.onToggleClick($event); });\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵelement(8, \"mat-icon\", 4);\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"div\", 5, 6);\n        ɵngcc0.ɵɵtemplate(12, CatalogBrowserLayerComponent_igo_layer_legend_12_Template, 2, 3, \"igo-layer-legend\", 7);\n        ɵngcc0.ɵɵpipe(13, \"async\");\n        ɵngcc0.ɵɵpipe(14, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.haveGroup());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ctx.catalogAllowLegend ? \"igo-cataloglayer-title\" : \"\")(\"matTooltip\", ctx.computeTitleTooltip());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"layer\", ctx.layer);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(6, 10, ctx.computeTooltip()))(\"color\", ɵngcc0.ɵɵpipeBind1(7, 12, ctx.isPreview$) ? \"\" : ctx.added ? \"warn\" : \"\");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"matBadgeHidden\", ctx.isInResolutionsRange())(\"svgIcon\", ɵngcc0.ɵɵpipeBind1(9, 14, ctx.isPreview$) ? \"plus\" : ctx.added ? \"delete\" : \"plus\");\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(13, 16, ctx.layerLegendShown$) && ɵngcc0.ɵɵpipeBind1(14, 18, ctx.igoLayer$) && ctx.catalogAllowLegend);\n    } }, directives: function () { return [ɵngcc10.MatListItem, ɵngcc1.NgIf, ɵngcc11.MatLine, ɵngcc1.NgClass, ɵngcc3.MatTooltip, MetadataButtonComponent, ɵngcc2.MatButton, ɵngcc4.MatIcon, ɵngcc12.MatBadge, ɵngcc9.IgoBadgeIconDirective, ɵngcc10.MatListAvatarCssMatStyler, LayerLegendComponent]; }, pipes: function () { return [ɵngcc5.TranslatePipe, ɵngcc1.AsyncPipe]; }, styles: [\".igo-cataloglayer-title[_ngcontent-%COMP%]{cursor:pointer}.igo-cataloglayer-legend-container[_ngcontent-%COMP%]{margin-left:40px;padding-left:18px;width:calc(100% - 18px)}\"], changeDetection: 0 });\nCatalogBrowserLayerComponent.ctorParameters = () => [\n    { type: LayerService }\n];\nCatalogBrowserLayerComponent.propDecorators = {\n    resolution: [{ type: Input }],\n    catalogAllowLegend: [{ type: Input }],\n    layer: [{ type: Input }],\n    added: [{ type: Input }],\n    addedChange: [{ type: Output }],\n    addedLayerIsPreview: [{ type: Output }]\n};\n\n/**\n * Catalog browser group item\n */\nclass CatalogBrowserGroupComponent {\n    constructor() {\n        /**\n         * Group's items store\n         * @internal\n         */\n        this.store = new EntityStore([]);\n        /**\n         * Whether all the layers of the group are added\n         * @internal\n         */\n        this.added$ = new BehaviorSubject(false);\n        this.preview$ = new BehaviorSubject(false);\n        /**\n         * Whether the toggle button is disabled\n         * @internal\n         */\n        this.disabled$ = new BehaviorSubject(false);\n        /**\n         * Whether the group is collapsed\n         */\n        this.collapsed = true;\n        this.catalogAllowLegend = false;\n        /**\n         * Whether the group can be toggled when it's collapsed\n         */\n        this.toggleCollapsed = true;\n        /**\n         * Event emitted when the add/remove button of the group is clicked\n         */\n        this.addedChange = new EventEmitter();\n        /**\n         * Event emitted when the add/remove button of a layer is clicked\n         */\n        this.layerAddedChange = new EventEmitter();\n    }\n    /**\n     * @internal\n     */\n    get title() {\n        return this.group.title;\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        this.store.load(this.group.items);\n        this.evaluateAdded();\n        this.evaluateDisabled(this.collapsed);\n        if (this.catalog && this.catalog.sortDirection !== undefined) {\n            this.store.view.sort({\n                direction: this.catalog.sortDirection,\n                valueAccessor: (item) => item.title\n            });\n        }\n    }\n    ngOnDestroy() {\n        this.store.destroy();\n    }\n    /**\n     * @internal\n     */\n    isGroup(item) {\n        return item.type === CatalogItemType.Group;\n    }\n    /**\n     * @internal\n     */\n    isLayer(item) {\n        return item.type === CatalogItemType.Layer;\n    }\n    /**\n     * On toggle button click, emit the added change event\n     * @internal\n     */\n    onToggleClick() {\n        this.added$.value ? this.remove() : this.add();\n    }\n    /**\n     * On toggle button click, emit the added change event\n     * @internal\n     */\n    onToggleCollapsed(collapsed) {\n        this.evaluateDisabled(collapsed);\n    }\n    /**\n     * When a layer is added or removed, evaluate if all the layers of the group\n     * are now added or removed. If so, consider that the group itself is added\n     * or removed.\n     * @internal\n     * @param event Layer added change event\n     */\n    onLayerAddedChange(event) {\n        this.layerAddedChange.emit(event);\n        this.tryToggleGroup(event);\n    }\n    /**\n     * Emit added change event with added = true\n     */\n    add() {\n        this.added$.next(true);\n        this.addedChange.emit({\n            added: true,\n            group: this.group\n        });\n    }\n    /**\n     * Emit added change event with added = true\n     */\n    remove() {\n        this.added$.next(false);\n        this.addedChange.emit({\n            added: false,\n            group: this.group\n        });\n    }\n    onLayerPreview(event) {\n        this.preview$.next(event);\n    }\n    /**\n     * If all the layers of the group added or removed, add or remove the group itself.\n     * @param event The last layer added change event to occur\n     */\n    tryToggleGroup(event) {\n        const added = event.added;\n        const layer = event.layer;\n        const layersAdded = this.store.view\n            .all()\n            .filter((item) => item.id !== layer.id)\n            .map((item) => this.state.get(item).added || false);\n        if (layersAdded.every(value => value === added)) {\n            added ? this.add() : this.remove();\n        }\n        else if (this.added$.value === true) {\n            this.added$.next(false);\n        }\n    }\n    evaluateAdded() {\n        const added = this.store.all().every((item) => {\n            return (this.state.get(item).added || false) === true;\n        });\n        this.added$.next(added);\n    }\n    evaluateDisabled(collapsed) {\n        let disabled = false;\n        if (this.toggleCollapsed === false) {\n            disabled = collapsed;\n        }\n        this.disabled$.next(disabled);\n    }\n    onTitleClick() {\n        this.collapsed = !this.collapsed;\n    }\n}\nCatalogBrowserGroupComponent.ɵfac = function CatalogBrowserGroupComponent_Factory(t) { return new (t || CatalogBrowserGroupComponent)(); };\nCatalogBrowserGroupComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CatalogBrowserGroupComponent, selectors: [[\"igo-catalog-browser-group\"]], inputs: { collapsed: \"collapsed\", catalogAllowLegend: \"catalogAllowLegend\", toggleCollapsed: \"toggleCollapsed\", catalog: \"catalog\", group: \"group\", resolution: \"resolution\", state: \"state\" }, outputs: { addedChange: \"addedChange\", layerAddedChange: \"layerAddedChange\" }, decls: 13, vars: 13, consts: [[\"mat-list-avatar\", \"\", \"svgIcon\", \"chevron-up\", \"igoCollapse\", \"\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"toggle\"], [\"id\", \"catalog-group-title\", \"mat-line\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"igo-catalog-group-title\", 3, \"matTooltip\", \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"notadded\", \"\"], [\"items\", \"\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"svgIcon\", \"delete\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"svgIcon\", \"plus\"], [4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"layer\", \"resolution\", \"catalogAllowLegend\", \"added\", \"addedLayerIsPreview\", \"addedChange\"]], template: function CatalogBrowserGroupComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n        ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 0);\n        ɵngcc0.ɵɵlistener(\"toggle\", function CatalogBrowserGroupComponent_Template_mat_icon_toggle_1_listener($event) { return ctx.onToggleCollapsed($event); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"h4\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function CatalogBrowserGroupComponent_Template_h4_click_2_listener() { return ctx.onTitleClick(); });\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(4, CatalogBrowserGroupComponent_ng_container_4_Template, 5, 6, \"ng-container\", 2);\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵtemplate(7, CatalogBrowserGroupComponent_ng_template_7_Template, 4, 6, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"div\", null, 4);\n        ɵngcc0.ɵɵtemplate(11, CatalogBrowserGroupComponent_ng_template_11_Template, 2, 2, \"ng-template\", 5);\n        ɵngcc0.ɵɵpipe(12, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(8);\n        const _r3 = ɵngcc0.ɵɵreference(10);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"target\", _r3)(\"collapsed\", ctx.collapsed);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ctx.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(5, 7, ctx.added$) && !ɵngcc0.ɵɵpipeBind1(6, 9, ctx.preview$))(\"ngIfElse\", _r1);\n        ɵngcc0.ɵɵadvance(7);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(12, 11, ctx.store.view.all$()));\n    } }, directives: [ɵngcc10.MatListItem, ɵngcc4.MatIcon, ɵngcc10.MatListAvatarCssMatStyler, ɵngcc9.CollapseDirective, ɵngcc11.MatLine, ɵngcc3.MatTooltip, ɵngcc1.NgIf, ɵngcc1.NgForOf, ɵngcc2.MatButton, CatalogBrowserLayerComponent, ɵngcc9.ListItemDirective], pipes: [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\".igo-catalog-group-title[_ngcontent-%COMP%]{cursor:pointer;opacity:.9}#catalog-group-title[_ngcontent-%COMP%]{font-weight:700}\"], changeDetection: 0 });\nCatalogBrowserGroupComponent.propDecorators = {\n    catalog: [{ type: Input }],\n    group: [{ type: Input }],\n    collapsed: [{ type: Input }],\n    resolution: [{ type: Input }],\n    catalogAllowLegend: [{ type: Input }],\n    toggleCollapsed: [{ type: Input }],\n    state: [{ type: Input }],\n    addedChange: [{ type: Output }],\n    layerAddedChange: [{ type: Output }]\n};\n\nclass LayerListToolService {\n    constructor() {\n        this.sortAlpha = false;\n        this.onlyVisible = false;\n        this.onlyInRange = false;\n        this.keywordInitialized = false;\n        this.sortedAlphaInitialized = false;\n        this.onlyVisibleInitialized = false;\n        this.onlyInRangeInitialized = false;\n    }\n}\nLayerListToolService.ɵfac = function LayerListToolService_Factory(t) { return new (t || LayerListToolService)(); };\nLayerListToolService.ɵprov = ɵɵdefineInjectable({ factory: function LayerListToolService_Factory() { return new LayerListToolService(); }, token: LayerListToolService, providedIn: \"root\" });\nLayerListToolService.ctorParameters = () => [];\n\nclass LayerItemComponent {\n    constructor(networkService, renderer, elRef, cdRef) {\n        this.networkService = networkService;\n        this.renderer = renderer;\n        this.elRef = elRef;\n        this.cdRef = cdRef;\n        this.focusedCls = 'igo-layer-item-focused';\n        this.layerTool$ = new BehaviorSubject(false);\n        this.showLegend$ = new BehaviorSubject(true);\n        this.inResolutionRange$ = new BehaviorSubject(true);\n        this.queryBadgeHidden$ = new BehaviorSubject(true);\n        this._selectAll = false;\n        this.layers$ = new BehaviorSubject(undefined);\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendIfVisible = false;\n        this.updateLegendOnResolutionChange = false;\n        this.orderable = true;\n        this.lowerDisabled = false;\n        this.raiseDisabled = false;\n        this.queryBadge = false;\n        this.action = new EventEmitter(undefined);\n        this.checkbox = new EventEmitter();\n    }\n    get activeLayer() {\n        return this._activeLayer;\n    }\n    set activeLayer(value) {\n        if (value && this.layer && value.id === this.layer.id && !this.selectionMode) {\n            this.layerTool$.next(true);\n            this.renderer.addClass(this.elRef.nativeElement, this.focusedCls);\n        }\n        else {\n            this.renderer.removeClass(this.elRef.nativeElement, this.focusedCls);\n        }\n    }\n    get selectAll() {\n        return this._selectAll;\n    }\n    set selectAll(value) {\n        this._selectAll = value;\n        if (value === true) {\n            this.layerCheck = true;\n        }\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n        this.layers$.next(value);\n    }\n    get removable() {\n        return this.layer.options.removable !== false;\n    }\n    get opacity() {\n        return this.layer.opacity * 100;\n    }\n    set opacity(opacity) {\n        this.layer.opacity = opacity / 100;\n    }\n    ngOnInit() {\n        if (this.layer.visible &&\n            this.expandLegendIfVisible &&\n            this.layer.firstLoadComponent === true) {\n            this.layer.firstLoadComponent = false;\n            this.layer.legendCollapsed = false;\n        }\n        this.toggleLegend(this.layer.legendCollapsed);\n        this.updateQueryBadge();\n        const resolution$ = this.layer.map.viewController.resolution$;\n        this.resolution$$ = resolution$.subscribe(() => {\n            this.onResolutionChange();\n        });\n        this.tooltipText = this.computeTooltip();\n        this.networkService.currentState().subscribe((state) => {\n            this.state = state;\n            this.onResolutionChange();\n        });\n        this.layers$.subscribe(() => {\n            if (this.layer && this.layer.options.active) {\n                this.layerTool$.next(true);\n                this.renderer.addClass(this.elRef.nativeElement, this.focusedCls);\n            }\n        });\n        if (this.changeDetection) {\n            this.changeDetection.subscribe(() => this.cdRef.detectChanges());\n        }\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n    }\n    toggleLegend(collapsed) {\n        this.layer.legendCollapsed = collapsed;\n        this.showLegend$.next(!collapsed);\n    }\n    toggleLegendOnClick() {\n        this.toggleLegend(this.showLegend$.value);\n    }\n    toggleVisibility() {\n        this.layer.visible = !this.layer.visible;\n        if (this.toggleLegendOnVisibilityChange) {\n            this.toggleLegend(!this.layer.visible);\n        }\n        this.updateQueryBadge();\n    }\n    computeTooltip() {\n        const layerOptions = this.layer.options;\n        if (!layerOptions.tooltip) {\n            return this.layer.title;\n        }\n        const layerTooltip = layerOptions.tooltip;\n        const layerMetadata = layerOptions.metadata;\n        switch (layerOptions.tooltip.type) {\n            case TooltipType.TITLE:\n                return this.layer.title;\n            case TooltipType.ABSTRACT:\n                if (layerMetadata && layerMetadata.abstract) {\n                    return layerMetadata.abstract;\n                }\n                else {\n                    return this.layer.title;\n                }\n            case TooltipType.CUSTOM:\n                if (layerTooltip && layerTooltip.text) {\n                    return layerTooltip.text;\n                }\n                else {\n                    return this.layer.title;\n                }\n            default:\n                return this.layer.title;\n        }\n    }\n    onResolutionChange() {\n        const inResolutionRange = this.layer.isInResolutionsRange;\n        if (inResolutionRange === false &&\n            this.updateLegendOnResolutionChange === true) {\n            this.toggleLegend(true);\n        }\n        this.inResolutionRange$.next(inResolutionRange);\n    }\n    updateQueryBadge() {\n        const hidden = this.queryBadge === false ||\n            this.layer.visible === false ||\n            !layerIsQueryable(this.layer);\n        this.queryBadgeHidden$.next(hidden);\n    }\n    toggleLayerTool() {\n        this.layerTool$.next(!this.layerTool$.getValue());\n        if (this.layerTool$.getValue() === true) {\n            this.renderer.addClass(this.elRef.nativeElement, this.focusedCls);\n        }\n        else {\n            this.renderer.removeClass(this.elRef.nativeElement, this.focusedCls);\n        }\n        this.action.emit(this.layer);\n    }\n    check() {\n        this.layerCheck = !this.layerCheck;\n        this.checkbox.emit({ layer: this.layer, check: this.layerCheck });\n    }\n}\nLayerItemComponent.ɵfac = function LayerItemComponent_Factory(t) { return new (t || LayerItemComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc7.NetworkService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nLayerItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LayerItemComponent, selectors: [[\"igo-layer-item\"]], inputs: { toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendIfVisible: \"expandLegendIfVisible\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", orderable: \"orderable\", lowerDisabled: \"lowerDisabled\", raiseDisabled: \"raiseDisabled\", queryBadge: \"queryBadge\", activeLayer: \"activeLayer\", selectAll: \"selectAll\", layerCheck: \"layerCheck\", layer: \"layer\", selectionMode: \"selectionMode\", changeDetection: \"changeDetection\" }, outputs: { action: \"action\", checkbox: \"checkbox\" }, decls: 11, vars: 9, consts: [[1, \"igo-layer-list-item\"], [\"class\", \"layerCheck\", \"mat-list-icon\", \"\", 3, \"checked\", \"change\", 4, \"ngIf\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"igo-layer-title\", 3, \"matTooltip\", \"click\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"selection-eye\", \"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [1, \"igo-layer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", \"updateLegendOnResolutionChange\", 4, \"ngIf\"], [\"mat-list-icon\", \"\", 1, \"layerCheck\", 3, \"checked\", \"change\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\"], [\"matBadge\", \"?\", \"matBadgeColor\", \"accent\", \"matBadgeSize\", \"small\", \"matBadgePosition\", \"after\", 3, \"matBadgeHidden\", \"ngClass\", \"svgIcon\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"selection-eye\", 3, \"color\", \"matTooltip\", \"click\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"dots-horizontal\"], [3, \"layer\", \"updateLegendOnResolutionChange\"]], template: function LayerItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\", 0);\n        ɵngcc0.ɵɵtemplate(1, LayerItemComponent_mat_checkbox_1_Template, 1, 1, \"mat-checkbox\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"h4\", 2);\n        ɵngcc0.ɵɵlistener(\"click\", function LayerItemComponent_Template_h4_click_2_listener() { return ctx.toggleLegendOnClick(); });\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(4, LayerItemComponent_button_4_Template, 6, 15, \"button\", 3);\n        ɵngcc0.ɵɵtemplate(5, LayerItemComponent_button_5_Template, 6, 15, \"button\", 4);\n        ɵngcc0.ɵɵtemplate(6, LayerItemComponent_button_6_Template, 3, 3, \"button\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"div\", 6, 7);\n        ɵngcc0.ɵɵtemplate(9, LayerItemComponent_igo_layer_legend_9_Template, 1, 2, \"igo-layer-legend\", 8);\n        ɵngcc0.ɵɵpipe(10, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selectionMode);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ctx.tooltipText);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.layer.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.selectionMode);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selectionMode);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.selectionMode);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(10, 7, ctx.showLegend$));\n    } }, directives: function () { return [ɵngcc10.MatListItem, ɵngcc1.NgIf, ɵngcc11.MatLine, ɵngcc3.MatTooltip, ɵngcc13.MatCheckbox, ɵngcc10.MatListIconCssMatStyler, ɵngcc2.MatButton, ɵngcc4.MatIcon, ɵngcc12.MatBadge, ɵngcc1.NgClass, LayerLegendComponent]; }, pipes: function () { return [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe]; }, styles: [\"[_nghost-%COMP%]{overflow:hidden}mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content .layerCheck{align-self:baseline;padding-right:0;width:16px}.igo-layer-list-item[_ngcontent-%COMP%]{clear:both;height:46px}.igo-layer-title[_ngcontent-%COMP%]{cursor:pointer}.igo-layer-legend-container[_ngcontent-%COMP%]{padding-left:18px;width:calc(100% - 18px)}mat-icon.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}mat-icon[matBadge][_ngcontent-%COMP%]     .mat-badge-content{font-size:12px}.selection-eye[_ngcontent-%COMP%]{padding-right:45px}\"], changeDetection: 0 });\nLayerItemComponent.ctorParameters = () => [\n    { type: NetworkService },\n    { type: Renderer2 },\n    { type: ElementRef },\n    { type: ChangeDetectorRef }\n];\nLayerItemComponent.propDecorators = {\n    activeLayer: [{ type: Input }],\n    selectAll: [{ type: Input }],\n    layerCheck: [{ type: Input }],\n    layer: [{ type: Input }],\n    toggleLegendOnVisibilityChange: [{ type: Input }],\n    expandLegendIfVisible: [{ type: Input }],\n    updateLegendOnResolutionChange: [{ type: Input }],\n    orderable: [{ type: Input }],\n    lowerDisabled: [{ type: Input }],\n    raiseDisabled: [{ type: Input }],\n    queryBadge: [{ type: Input }],\n    selectionMode: [{ type: Input }],\n    changeDetection: [{ type: Input }],\n    action: [{ type: Output }],\n    checkbox: [{ type: Output }]\n};\n\nclass LayerLegendComponent {\n    constructor(capabilitiesService, languageService) {\n        this.capabilitiesService = capabilitiesService;\n        this.languageService = languageService;\n        this.updateLegendOnResolutionChange = false;\n        /**\n         * Observable of the legend items\n         */\n        this.legendItems$ = new BehaviorSubject([]);\n        /**\n         * The scale used to make the legend\n         */\n        this.scale = undefined;\n        /**\n         * List of size of images displayed\n         */\n        this.imagesHeight = {};\n    }\n    /**\n     * On init, subscribe to the map's resolution and update the legend accordingly\n     */\n    ngOnInit() {\n        let lastlLegend = this.layer.legend;\n        this.styles = this.listStyles();\n        const sourceOptions = this.layer.options.source.options;\n        if (sourceOptions &&\n            sourceOptions.params &&\n            sourceOptions.params.STYLES) {\n            // if a styles is provided into the layers wms params\n            this.currentStyle = this.styles.find(style => style.name === sourceOptions.params.STYLES).name;\n        }\n        else if (!this.layer.legend) {\n            // if no legend is manually provided\n            if (this.styles && this.styles.length > 1) {\n                this.currentStyle = this.styles[0].name;\n            }\n        }\n        else if (this.styles && this.styles.length > 1) {\n            this.currentStyle = lastlLegend[0].currentStyle;\n        }\n        if (typeof this.layer.options.legendOptions !== 'undefined' && this.layer.options.legendOptions.display === false) {\n            lastlLegend = [];\n        }\n        else {\n            lastlLegend = this.layer.dataSource.getLegend(this.currentStyle, this.scale);\n        }\n        if (this.updateLegendOnResolutionChange === true) {\n            const resolution$ = this.layer.map.viewController.resolution$;\n            this.resolution$$ = resolution$.subscribe((resolution) => this.onResolutionChange(resolution));\n        }\n        else if (lastlLegend.length !== 0) {\n            this.legendItems$.next(lastlLegend);\n        }\n    }\n    /**\n     * On destroy, unsubscribe to the map,s resolution\n     */\n    ngOnDestroy() {\n        if (this.resolution$$ !== undefined) {\n            this.resolution$$.unsubscribe();\n        }\n    }\n    toggleLegendItem(collapsed, item) {\n        item.collapsed = collapsed;\n    }\n    transfertToggleLegendItem(newLegends) {\n        const outLegends = newLegends;\n        const lastLegends = this.layer.legend;\n        for (let i = 0; i < lastLegends.length; i++) {\n            outLegends[i].collapsed = lastLegends[i].collapsed;\n        }\n        return outLegends;\n    }\n    computeItemTitle(layerLegend) {\n        const layerOptions = this.layer.dataSource.options;\n        if (layerOptions.type !== 'wms') {\n            return of(layerLegend.title);\n        }\n        const layers = layerOptions.params.LAYERS.split(',');\n        const localLayerOptions = JSON.parse(JSON.stringify(layerOptions)); // to avoid to alter the original options.\n        localLayerOptions.params.LAYERS = layers.find(layer => layer === layerLegend.title);\n        return this.capabilitiesService\n            .getWMSOptions(localLayerOptions)\n            .pipe(map(wmsDataSourceOptions => {\n            return wmsDataSourceOptions._layerOptionsFromSource.title;\n        }));\n    }\n    /**\n     * On resolution change, compute the effective scale level and update the\n     * legend accordingly.\n     * @param resolution Map resolution\n     */\n    onResolutionChange(resolution) {\n        this.scale = this.layer.map.viewController.getScale();\n        this.updateLegend();\n    }\n    /**\n     * Update the legend with scale level and style define\n     */\n    updateLegend() {\n        let legendItems = this.layer.dataSource.getLegend(this.currentStyle, this.scale);\n        if (this.layer.legend && this.layer.legend.length > 1) {\n            legendItems = this.transfertToggleLegendItem(legendItems);\n        }\n        this.layer.legend = legendItems;\n        if (legendItems.length === 0 && this.legendItems$.value.length === 0) {\n            return;\n        }\n        this.legendItems$.next(legendItems);\n    }\n    listStyles() {\n        const layerOptions = this.layer.options;\n        if (layerOptions && layerOptions.legendOptions) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.geo.layer.legend.default');\n            let stylesAvailable = [{ name: '', title }];\n            if (layerOptions.legendOptions.stylesAvailable) {\n                stylesAvailable = stylesAvailable.concat(layerOptions.legendOptions.stylesAvailable.filter(sA => (sA.name.normalize('NFD').replace(/[\\u0300-\\u036f]/gi, '') !== 'default' &&\n                    sA.name.normalize('NFD').replace(/[\\u0300-\\u036f]/gi, '') !== 'defaut')));\n            }\n            stylesAvailable.map(s => s.title = s.title.charAt(0).toUpperCase() + s.title.slice(1).replace(/_/g, ' '));\n            return stylesAvailable;\n        }\n        return;\n    }\n    onChangeStyle() {\n        this.updateLegend();\n        let STYLES = '';\n        this.layer.dataSource.ol.getParams().LAYERS.split(',').map(layer => STYLES += this.currentStyle + ',');\n        STYLES = STYLES.slice(0, -1);\n        this.layer.dataSource.ol.updateParams({ STYLES });\n    }\n    onLoadImage(id) {\n        let elemRef;\n        if (this.renderedLegends.length === 1) {\n            elemRef = this.renderedLegends.first.nativeElement;\n        }\n        else {\n            elemRef = this.renderedLegends.find(renderedLegend => renderedLegend.nativeElement.id === id).nativeElement;\n        }\n        this.imagesHeight[id] = elemRef.height;\n    }\n}\nLayerLegendComponent.ɵfac = function LayerLegendComponent_Factory(t) { return new (t || LayerLegendComponent)(ɵngcc0.ɵɵdirectiveInject(CapabilitiesService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.LanguageService)); };\nLayerLegendComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LayerLegendComponent, selectors: [[\"igo-layer-legend\"]], viewQuery: function LayerLegendComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c5, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.renderedLegends = _t);\n    } }, inputs: { updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", layer: \"layer\" }, decls: 2, vars: 3, consts: [[4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"noItems\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"renderedLegends\", \"\"], [1, \"igo-layer-legend\", 3, \"ngClass\"], [\"legend\", \"\"], [\"id\", \"legend-toggle\", \"mat-list-avatar\", \"\", \"igoCollapse\", \"\", \"svgIcon\", \"chevron-up\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"toggle\"], [\"matLine\", \"\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"ngModel\", \"ngModelChange\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [3, \"ngStyle\", \"innerHTML\", 4, \"ngIf\"], [3, \"id\", \"src\", \"alt\", \"load\"], [\"renderedLegend\", \"\"], [3, \"ngStyle\", \"innerHTML\"]], template: function LayerLegendComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, LayerLegendComponent_ng_container_0_Template, 4, 2, \"ng-container\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx.legendItems$));\n    } }, directives: [ɵngcc1.NgIf, ɵngcc1.NgForOf, ɵngcc1.NgClass, ɵngcc10.MatListItem, ɵngcc4.MatIcon, ɵngcc10.MatListAvatarCssMatStyler, ɵngcc9.CollapseDirective, ɵngcc11.MatLine, ɵngcc14.MatFormField, ɵngcc15.MatSelect, ɵngcc3.MatTooltip, ɵngcc16.NgControlStatus, ɵngcc16.NgModel, ɵngcc11.MatOption, ɵngcc1.NgStyle], pipes: [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe, ɵngcc9.SecureImagePipe], styles: [\".igo-layer-legend.with-title[_ngcontent-%COMP%]{padding-left:18px}img[_ngcontent-%COMP%]:after{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite;background-color:#fff;border:3px solid #f3f3f3;border-radius:50%;content:\\\" \\\";float:left;height:17px;position:relative;right:19px;top:-3px;width:17px}@-moz-document url-prefix(){img:after{margin-left:19px}}@-webkit-keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}\"], changeDetection: 0 });\nLayerLegendComponent.ctorParameters = () => [\n    { type: CapabilitiesService },\n    { type: LanguageService }\n];\nLayerLegendComponent.propDecorators = {\n    updateLegendOnResolutionChange: [{ type: Input }],\n    renderedLegends: [{ type: ViewChildren, args: ['renderedLegend',] }],\n    layer: [{ type: Input }]\n};\n\nvar LayerListControlsEnum;\n(function (LayerListControlsEnum) {\n    LayerListControlsEnum[\"always\"] = \"always\";\n    LayerListControlsEnum[\"never\"] = \"never\";\n    LayerListControlsEnum[\"default\"] = \"default\";\n})(LayerListControlsEnum || (LayerListControlsEnum = {}));\nvar LayerListSelectVisibleEnum;\n(function (LayerListSelectVisibleEnum) {\n    LayerListSelectVisibleEnum[\"ALL_VISIBLE\"] = \"ALL_VISIBLE\";\n    LayerListSelectVisibleEnum[\"ALL_HIDDEN\"] = \"ALL_HIDDEN\";\n    LayerListSelectVisibleEnum[\"MIXED\"] = \"MIXED\";\n    LayerListSelectVisibleEnum[\"NULL\"] = \"NULL\";\n})(LayerListSelectVisibleEnum || (LayerListSelectVisibleEnum = {}));\n\n// TODO: This class could use a clean up. Also, some methods could be moved ealsewhere\nclass LayerListComponent {\n    constructor(elRef) {\n        this.elRef = elRef;\n        this.orderable = true;\n        this.thresholdToFilterAndSort = 5;\n        this.layers$ = new BehaviorSubject([]);\n        this.change$ = new ReplaySubject(1);\n        this.showToolbar$ = new BehaviorSubject(false);\n        this.hideSelectedLayers = true;\n        this.activeLayer$ = new BehaviorSubject(undefined);\n        this.layersChecked = [];\n        this.layerItemChangeDetection$ = new BehaviorSubject(undefined);\n        this.layersAreAllVisible = true;\n        this.ogcButton = true;\n        this.timeButton = true;\n        this.floatLabel = 'auto';\n        this.layerFilterAndSortOptions = {};\n        this.excludeBaseLayers = false;\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendOfVisibleLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.queryBadge = false;\n        this.appliedFilterAndSort = new EventEmitter();\n        this._keyword = undefined;\n        this._onlyVisible = false;\n        this._sortedAlpha = false;\n        this.toggleOpacity = false;\n        this.selectAllCheck$ = new BehaviorSubject(undefined);\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    set layers(value) {\n        this._layers = value;\n        this.next();\n    }\n    get layers() {\n        return this._layers;\n    }\n    set activeLayer(value) {\n        this._activeLayer = value;\n        this.activeLayer$.next(value);\n    }\n    get activeLayer() {\n        return this._activeLayer;\n    }\n    get keyword() {\n        return this._keyword;\n    }\n    set keyword(value) {\n        this._keyword = value;\n        this.next();\n    }\n    get onlyVisible() {\n        return this._onlyVisible;\n    }\n    set onlyVisible(value) {\n        this._onlyVisible = value;\n        this.next();\n    }\n    get sortAlpha() {\n        return this._sortedAlpha;\n    }\n    set sortAlpha(value) {\n        this._sortedAlpha = value;\n        this.next();\n    }\n    get opacity() {\n        return Math.round(this.activeLayer$.getValue().opacity * 100);\n    }\n    set opacity(opacity) {\n        this.activeLayer$.getValue().opacity = opacity / 100;\n    }\n    get badgeOpacity() {\n        if (this.opacity === 100) {\n            return;\n        }\n        return this.opacity;\n    }\n    get raiseDisabled() {\n        if (!this.orderable ||\n            this.activeLayer.baseLayer ||\n            this.getUpperLayer().id === this.activeLayer.id ||\n            this.isUpperBaselayer(this.activeLayer)) {\n            return true;\n        }\n        return false;\n    }\n    get lowerDisabled() {\n        if (!this.orderable ||\n            this.activeLayer.baseLayer ||\n            this.getLowerLayer().id === this.activeLayer.id ||\n            this.isLowerBaselayer(this.activeLayer)) {\n            return true;\n        }\n        return false;\n    }\n    get raiseDisabledSelection() {\n        if (this.layersChecked.length === 0 ||\n            !this.orderable ||\n            !this.raisableLayers(this.layersChecked) ||\n            this.selectAllCheck === true) {\n            return true;\n        }\n        return false;\n    }\n    get lowerDisabledSelection() {\n        if (this.layersChecked.length === 0 ||\n            !this.orderable ||\n            !this.lowerableLayers(this.layersChecked) ||\n            this.selectAllCheck === true) {\n            return true;\n        }\n        return false;\n    }\n    get checkOpacity() {\n        return this.layersCheckedOpacity() * 100;\n    }\n    set checkOpacity(opacity) {\n        for (const layer of this.layersChecked) {\n            layer.opacity = opacity / 100;\n        }\n    }\n    /**\n     * Subscribe to the search term stream and trigger researches\n     * @internal\n     */\n    ngOnInit() {\n        this.change$$ = this.change$\n            .pipe(debounce(() => {\n            return this.layers.length === 0 ? EMPTY : timer(50);\n        }))\n            .subscribe(() => {\n            this.showToolbar$.next(this.computeShowToolbar());\n            this.layers$.next(this.computeLayers(this.layers.slice(0)));\n            this.appliedFilterAndSort.emit({\n                keyword: this.keyword,\n                sortAlpha: this.sortAlpha,\n                onlyVisible: this.onlyVisible\n            });\n        });\n        this.selectAllCheck$.subscribe((value) => {\n            this.selectAllCheck = value;\n        });\n        this.layers$.subscribe(() => {\n            if (this.layers) {\n                let checks = 0;\n                for (const layer of this.layers) {\n                    if (layer.options.active) {\n                        this.activeLayer = layer;\n                        this.layerTool = true;\n                    }\n                    if (layer.options.check) {\n                        checks += 1;\n                    }\n                }\n                if (this.excludeBaseLayers) {\n                    this.selectAllCheck =\n                        checks ===\n                            this.layers.filter((lay) => lay.baseLayer !== true && lay.showInLayerList).length\n                            ? true\n                            : false;\n                }\n                else {\n                    this.selectAllCheck =\n                        checks === this.layers.filter((lay) => lay.showInLayerList).length\n                            ? true\n                            : false;\n                }\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.change$$.unsubscribe();\n    }\n    clearKeyword() {\n        this.keyword = undefined;\n    }\n    getLowerLayer() {\n        return this.layers\n            .filter((l) => !l.baseLayer)\n            .reduce((prev, current) => {\n            return prev.zIndex < current.zIndex ? prev : current;\n        }, { zIndex: undefined, id: undefined });\n    }\n    isLowerBaselayer(layer) {\n        const index = this.layers.findIndex((lay) => layer.id === lay.id);\n        if (this.layers &&\n            this.layers[index + 1] &&\n            this.layers[index + 1].baseLayer === true) {\n            return true;\n        }\n        return false;\n    }\n    getUpperLayer() {\n        return this.layers\n            .filter((l) => !l.baseLayer)\n            .reduce((prev, current) => {\n            return prev.zIndex > current.zIndex ? prev : current;\n        }, { zIndex: undefined, id: undefined });\n    }\n    isUpperBaselayer(layer) {\n        const index = this.layers.findIndex((lay) => layer.id === lay.id);\n        if (this.layers &&\n            this.layers[index - 1] &&\n            this.layers[index - 1].baseLayer === true) {\n            return true;\n        }\n        return false;\n    }\n    /*\n     * For selection mode disabled attribute\n     */\n    raisableLayers(layers) {\n        let response = false;\n        let base = 0;\n        for (const layer of layers) {\n            const mapIndex = this.layers.findIndex((lay) => layer.id === lay.id);\n            const currentLayer = this.layers[mapIndex];\n            if (currentLayer.baseLayer) {\n                base += 1;\n            }\n            const previousLayer = this.layers[mapIndex - 1];\n            if (previousLayer &&\n                previousLayer.baseLayer !== true &&\n                !layers.find((lay) => previousLayer.id === lay.id) &&\n                currentLayer.baseLayer !== true) {\n                response = true;\n            }\n        }\n        if ((this.layersChecked.length === 1 && this.layersChecked[0].baseLayer) ||\n            base === this.layersChecked.length) {\n            response = false;\n        }\n        return response;\n    }\n    /*\n     * When multiple layers is selected but some may be allow to move\n     */\n    raisableLayer(index) {\n        if (index < 1) {\n            return false;\n        }\n        if (this.layers[index - 1].options.check) {\n            return this.raisableLayer(index - 1);\n        }\n        return true;\n    }\n    raiseLayers(layers) {\n        const layersToRaise = [];\n        for (const layer of layers) {\n            const index = this.layers.findIndex((lay) => lay.id === layer.id);\n            if (this.raisableLayer(index)) {\n                layersToRaise.push(layer);\n            }\n        }\n        this.map.raiseLayers(layersToRaise);\n        setTimeout(() => {\n            const elements = this.computeElementRef();\n            if (!this.isScrolledIntoView(elements[0], elements[1].offsetParent)) {\n                elements[0].scrollTop = elements[1].offsetParent.offsetTop;\n            }\n        }, 100);\n    }\n    /*\n     * For selection mode disabled attribute\n     */\n    lowerableLayers(layers) {\n        let response = false;\n        let base = 0;\n        for (const layer of layers) {\n            const mapIndex = this.layers.findIndex((lay) => layer.id === lay.id);\n            const currentLayer = this.layers[mapIndex];\n            if (currentLayer.baseLayer) {\n                base += 1;\n            }\n            const nextLayer = this.layers[mapIndex + 1];\n            if (nextLayer &&\n                nextLayer.baseLayer !== true &&\n                !layers.find((lay) => nextLayer.id === lay.id)) {\n                response = true;\n            }\n        }\n        if ((this.layersChecked.length === 1 && this.layersChecked[0].baseLayer) ||\n            base === this.layersChecked.length) {\n            response = false;\n        }\n        return response;\n    }\n    /*\n     * When multiple layers is selected but some may be allow to move\n     */\n    lowerableLayer(index) {\n        if (index >\n            this.layers.filter((lay) => lay.baseLayer !== true).length - 2) {\n            return false;\n        }\n        if (this.layers[index + 1].options.check) {\n            return this.lowerableLayer(index + 1);\n        }\n        return true;\n    }\n    lowerLayers(layers) {\n        const layersToLower = [];\n        for (const layer of layers) {\n            const index = this.layers.findIndex((lay) => lay.id === layer.id);\n            if (this.lowerableLayer(index)) {\n                layersToLower.push(layer);\n            }\n        }\n        this.map.lowerLayers(layersToLower);\n        setTimeout(() => {\n            const elements = this.computeElementRef('lower');\n            if (!this.isScrolledIntoView(elements[0], elements[1].offsetParent)) {\n                elements[0].scrollTop =\n                    elements[1].offsetParent.offsetTop +\n                        elements[1].offsetParent.offsetHeight -\n                        elements[0].clientHeight;\n            }\n        }, 100);\n    }\n    next() {\n        this.change$.next();\n    }\n    computeLayers(layers) {\n        let layersOut = this.filterLayers(layers);\n        if (this.sortAlpha) {\n            layersOut = this.sortLayersByTitle(layersOut);\n        }\n        else {\n            layersOut = this.sortLayersByZindex(layersOut);\n        }\n        return layersOut;\n    }\n    onKeywordChange(term) {\n        this.keyword = term;\n    }\n    onAppliedFilterAndSortChange(appliedFilter) {\n        this.keyword = appliedFilter.keyword;\n        this.onlyVisible = appliedFilter.onlyVisible;\n        this.sortAlpha = appliedFilter.sortAlpha;\n    }\n    filterLayers(layers) {\n        if (this.layerFilterAndSortOptions.showToolbar === LayerListControlsEnum.never) {\n            return layers;\n        }\n        if (!this.keyword && !this.onlyVisible) {\n            return layers;\n        }\n        const keepLayerIds = layers.map((layer) => layer.id);\n        layers.forEach((layer) => {\n            const layerOptions = layer.options || {};\n            const dataSourceOptions = layer.dataSource.options || {};\n            const metadata = layerOptions.metadata || {};\n            const keywords = metadata.keywordList || [];\n            const layerKeywords = keywords.map((kw) => {\n                return kw.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n            });\n            if (this.keyword && layer.title) {\n                const localKeyword = this.keyword\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '');\n                const layerTitle = layer.title\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '');\n                const dataSourceType = dataSourceOptions.type || '';\n                const keywordRegex = new RegExp(localKeyword, 'gi');\n                const keywordInList = layerKeywords.find((kw) => keywordRegex.test(kw)) !==\n                    undefined;\n                if (!keywordRegex.test(layerTitle) &&\n                    !(this.keyword.toLowerCase() === dataSourceType.toLowerCase()) &&\n                    !keywordInList) {\n                    const index = keepLayerIds.indexOf(layer.id);\n                    if (index > -1) {\n                        keepLayerIds.splice(index, 1);\n                    }\n                }\n            }\n            if (this.onlyVisible && layer.visible === false) {\n                const index = keepLayerIds.indexOf(layer.id);\n                if (index > -1) {\n                    keepLayerIds.splice(index, 1);\n                }\n            }\n        });\n        return layers.filter((layer) => keepLayerIds.indexOf(layer.id) !== -1);\n    }\n    sortLayersByZindex(layers) {\n        return layers.sort((layer1, layer2) => layer2.zIndex - layer1.zIndex);\n    }\n    sortLayersByTitle(layers) {\n        return layers.sort((a, b) => {\n            if (this.normalize(a.title) < this.normalize(b.title)) {\n                return -1;\n            }\n            if (this.normalize(a.title) > this.normalize(b.title)) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n    normalize(str) {\n        return str\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')\n            .toLowerCase();\n    }\n    computeShowToolbar() {\n        switch (this.layerFilterAndSortOptions.showToolbar) {\n            case LayerListControlsEnum.always:\n                return true;\n            case LayerListControlsEnum.never:\n                return false;\n            default:\n                if (this.layers.length >= this.thresholdToFilterAndSort ||\n                    this.keyword ||\n                    this.onlyVisible) {\n                    return true;\n                }\n                return false;\n        }\n    }\n    toggleLayerTool(layer) {\n        this.toggleOpacity = false;\n        if (this.layerTool && layer === this.activeLayer) {\n            this.layerTool = false;\n        }\n        else {\n            this.layerTool = true;\n        }\n        for (const lay of this.layers) {\n            lay.options.active = false;\n        }\n        layer.options.active = true;\n        this.activeLayer = layer;\n    }\n    removeLayers(layers) {\n        if (layers && layers.length > 0) {\n            for (const layer of layers) {\n                layer.map.removeLayer(layer);\n            }\n            this.layersChecked = [];\n        }\n        else if (!layers) {\n            this.activeLayer.map.removeLayer(this.activeLayer);\n            this.layerTool = false;\n        }\n    }\n    toggleVisibility(layers) {\n        if (layers && layers.length > 0) {\n            for (const layer of layers) {\n                layer.visible = this.hideSelectedLayers;\n            }\n        }\n        this.layerItemChangeDetection$.next(true);\n    }\n    get statusSelectedLayersCheck() {\n        let statusSelectedLayers = LayerListSelectVisibleEnum.NULL;\n        let findTrue = false;\n        let findFalse = false;\n        if (this.layersChecked.length === 0) {\n            statusSelectedLayers = LayerListSelectVisibleEnum.NULL;\n        }\n        else {\n            statusSelectedLayers = LayerListSelectVisibleEnum.MIXED;\n            this.hideSelectedLayers = false;\n            for (const layer2 of this.layersChecked) {\n                if (layer2.visible === true) {\n                    findTrue = true;\n                }\n                if (layer2.visible === false) {\n                    findFalse = true;\n                }\n            }\n            if (findTrue === true && findFalse === false) {\n                statusSelectedLayers = LayerListSelectVisibleEnum.ALL_VISIBLE;\n            }\n            if (findTrue === false && findFalse === true) {\n                statusSelectedLayers = LayerListSelectVisibleEnum.ALL_HIDDEN;\n                this.hideSelectedLayers = true;\n            }\n        }\n        return statusSelectedLayers;\n    }\n    layersCheck(event) {\n        event.layer.options.check = event.check;\n        if (event.check === true) {\n            const eventMapIndex = this.layers.findIndex((layer) => event.layer.id === layer.id);\n            for (const layer of this.layersChecked) {\n                const mapIndex = this.layers.findIndex((lay) => layer.id === lay.id);\n                if (eventMapIndex < mapIndex) {\n                    this.layersChecked.splice(this.layersChecked.findIndex((lay) => layer.id === lay.id), 0, event.layer);\n                    if (this.excludeBaseLayers) {\n                        if (this.layersChecked.length ===\n                            this.layers.filter((lay) => lay.baseLayer !== true && lay.showInLayerList).length) {\n                            this.selectAllCheck = true;\n                        }\n                        else {\n                            this.selectAllCheck = false;\n                        }\n                    }\n                    else if (!this.excludeBaseLayers) {\n                        if (this.layersChecked.length ===\n                            this.layers.filter((lay) => lay.showInLayerList).length) {\n                            this.selectAllCheck = true;\n                        }\n                        else {\n                            this.selectAllCheck = false;\n                        }\n                    }\n                    return;\n                }\n            }\n            this.layersChecked.push(event.layer);\n        }\n        else {\n            const index = this.layersChecked.findIndex((layer) => event.layer.id === layer.id);\n            this.layersChecked.splice(index, 1);\n        }\n        if (this.excludeBaseLayers) {\n            if (this.layersChecked.length ===\n                this.layers.filter((lay) => lay.baseLayer !== true && lay.showInLayerList).length) {\n                this.selectAllCheck = true;\n            }\n            else {\n                this.selectAllCheck = false;\n            }\n        }\n        else if (!this.excludeBaseLayers) {\n            if (this.layersChecked.length ===\n                this.layers.filter((lay) => lay.showInLayerList).length) {\n                this.selectAllCheck = true;\n            }\n            else {\n                this.selectAllCheck = false;\n            }\n        }\n    }\n    toggleSelectionMode(value) {\n        this.selection = value;\n        this.activeLayer = undefined;\n        if (value === true) {\n            this.layerTool = false;\n            for (const layer of this.layers) {\n                if (layer.options.check) {\n                    this.layersChecked.push(layer);\n                }\n            }\n        }\n    }\n    layersCheckedOpacity() {\n        if (this.layersChecked.length > 1) {\n            return 1;\n        }\n        else {\n            const opacity = [];\n            for (const layer of this.layersChecked) {\n                opacity.push(layer.opacity);\n            }\n            return opacity;\n        }\n    }\n    selectAll() {\n        if (!this.selectAllCheck) {\n            for (const layer of this.layers) {\n                if (this.excludeBaseLayers &&\n                    layer.baseLayer !== true &&\n                    layer.showInLayerList) {\n                    layer.options.check = true;\n                    this.layersChecked.push(layer);\n                }\n                else if (!this.excludeBaseLayers && layer.showInLayerList) {\n                    layer.options.check = true;\n                    this.layersChecked.push(layer);\n                }\n            }\n            this.selectAllCheck$.next(true);\n        }\n        else {\n            for (const layer of this.layers) {\n                layer.options.check = false;\n            }\n            this.layersChecked = [];\n            this.selectAllCheck$.next(false);\n        }\n    }\n    isScrolledIntoView(elemSource, elem) {\n        const docViewTop = elemSource.scrollTop;\n        const docViewBottom = docViewTop + elemSource.clientHeight;\n        const elemTop = elem.offsetTop;\n        const elemBottom = elemTop + elem.clientHeight;\n        return elemBottom <= docViewBottom && elemTop >= docViewTop;\n    }\n    computeElementRef(type) {\n        const checkItems = this.elRef.nativeElement.getElementsByClassName('mat-checkbox-checked');\n        const checkItem = type === 'lower'\n            ? this.elRef.nativeElement.getElementsByClassName('mat-checkbox-checked')[checkItems.length - 1]\n            : this.elRef.nativeElement.getElementsByClassName('mat-checkbox-checked')[0];\n        const igoList = this.elRef.nativeElement.getElementsByTagName('igo-list')[0];\n        return [igoList, checkItem];\n    }\n}\nLayerListComponent.ɵfac = function LayerListComponent_Factory(t) { return new (t || LayerListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nLayerListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LayerListComponent, selectors: [[\"igo-layer-list\"]], contentQueries: function LayerListComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, _c7, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.templateLayerToolbar = _t.first);\n    } }, inputs: { layersAreAllVisible: \"layersAreAllVisible\", ogcButton: \"ogcButton\", timeButton: \"timeButton\", floatLabel: \"floatLabel\", layerFilterAndSortOptions: \"layerFilterAndSortOptions\", excludeBaseLayers: \"excludeBaseLayers\", toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendOfVisibleLayers: \"expandLegendOfVisibleLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", queryBadge: \"queryBadge\", map: \"map\", layers: \"layers\" }, outputs: { appliedFilterAndSort: \"appliedFilterAndSort\" }, ngContentSelectors: _c10, decls: 8, vars: 11, consts: [[3, \"ngClass\", \"navigation\", \"selection\"], [\"igoList\", \"\"], [\"floatLabel\", \"auto\", 3, \"layersAreAllVisible\", \"term\", \"onlyVisible\", \"sortAlpha\", \"appliedFilterAndSort\", \"selection\", 4, \"ngIf\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"class\", \"igo-layer-actions-container\", 3, \"title\", 4, \"ngIf\"], [\"floatLabel\", \"auto\", 3, \"layersAreAllVisible\", \"term\", \"onlyVisible\", \"sortAlpha\", \"appliedFilterAndSort\", \"selection\"], [\"igoListItem\", \"\", 3, \"layer\", \"activeLayer\", \"orderable\", \"lowerDisabled\", \"raiseDisabled\", \"queryBadge\", \"expandLegendIfVisible\", \"updateLegendOnResolutionChange\", \"toggleLegendOnVisibilityChange\", \"selectionMode\", \"selectAll\", \"layerCheck\", \"changeDetection\", \"action\", \"checkbox\", 4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"layer\", \"activeLayer\", \"orderable\", \"lowerDisabled\", \"raiseDisabled\", \"queryBadge\", \"expandLegendIfVisible\", \"updateLegendOnResolutionChange\", \"toggleLegendOnVisibilityChange\", \"selectionMode\", \"selectAll\", \"layerCheck\", \"changeDetection\", \"action\", \"checkbox\"], [1, \"igo-layer-actions-container\", 3, \"title\"], [1, \"igo-layer-button-group\"], [\"igoLayerItemToolbar\", \"\", 3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"color\", \"primary\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matMenuTriggerFor\", \"matTooltip\"], [\"matBadgeColor\", \"primary\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"opacity\", 3, \"matBadge\"], [1, \"mat-menu-opacity-slider\"], [\"opacityMenu\", \"matMenu\"], [\"id\", \"opacity-menu\"], [\"id\", \"opacity-slider\", \"color\", \"primary\", \"thumbLabel\", \"\", \"tickInterval\", \"5\", \"step\", \"5\", \"matTooltipShowDelay\", \"500\", \"tooltip-position\", \"below\", 3, \"min\", \"max\", \"ngModel\", \"matTooltip\", \"ngModelChange\", \"click\"], [\"color\", \"primary\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"arrow-up\", 3, \"matBadge\", \"matBadgeHidden\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"arrow-down\", 3, \"matBadge\", \"matBadgeHidden\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"], [\"mat-stroked-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"click\"], [\"color\", \"primary\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matMenuTriggerFor\", \"matTooltip\"], [\"svgIcon\", \"opacity\"], [\"id\", \"opacity-slider\", \"color\", \"primary\", \"thumbLabel\", \"\", \"tickInterval\", \"5\", \"step\", \"5\", \"matTooltipShowDelay\", \"500\", \"tooltip-position\", \"below\", 3, \"min\", \"max\", \"ngModel\", \"matTooltip\", \"ngModelChange\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"click\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"click\"]], template: function LayerListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c9);\n        ɵngcc0.ɵɵelementStart(0, \"igo-list\", 0, 1);\n        ɵngcc0.ɵɵtemplate(2, LayerListComponent_igo_layer_list_tool_2_Template, 1, 4, \"igo-layer-list-tool\", 2);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵtemplate(4, LayerListComponent_ng_template_4_Template, 1, 1, \"ng-template\", 3);\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(6, LayerListComponent_igo_panel_6_Template, 23, 35, \"igo-panel\", 4);\n        ɵngcc0.ɵɵtemplate(7, LayerListComponent_igo_panel_7_Template, 31, 47, \"igo-panel\", 4);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ctx.layerTool || ctx.selection ? \"igo-list-min-height\" : \"igo-list-max-height\")(\"navigation\", false)(\"selection\", false);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(3, 7, ctx.showToolbar$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(5, 9, ctx.layers$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.selection && ctx.layerTool && ctx.activeLayer);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selection && ctx.layers.length > 0);\n    } }, directives: function () { return [ɵngcc9.ListComponent, ɵngcc1.NgClass, ɵngcc1.NgIf, ɵngcc1.NgForOf, LayerListToolComponent, LayerItemComponent, ɵngcc9.ListItemDirective, ɵngcc9.PanelComponent, ɵngcc1.NgTemplateOutlet, ɵngcc2.MatButton, ɵngcc17.MatMenuTrigger, ɵngcc3.MatTooltip, ɵngcc4.MatIcon, ɵngcc12.MatBadge, ɵngcc17._MatMenu, ɵngcc18.MatSlider, ɵngcc16.NgControlStatus, ɵngcc16.NgModel]; }, pipes: function () { return [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe]; }, styles: [\"[_nghost-%COMP%]   .igo-list-min-height[_ngcontent-%COMP%]{height:calc(100% - 91px);padding-top:8px}[_nghost-%COMP%]   .igo-list-max-height[_ngcontent-%COMP%]{padding-top:8px}mat-form-field.inputFilter[_ngcontent-%COMP%]{max-width:200px;width:calc(100% - 100px)}.igo-layer-actions-container[_ngcontent-%COMP%]{padding-left:5px;width:calc(100% - 5px)}.igo-layer-actions-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:center}#opacity-slider[_ngcontent-%COMP%]{float:left;left:10px;min-width:unset;top:10px;width:110px}.igo-layer-button-group[_ngcontent-%COMP%]{display:flex;float:right;padding-top:5px}[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]{height:unset}#opacity-menu[_ngcontent-%COMP%]{height:50px;max-width:unset;width:132px}#opacity-menu[_ngcontent-%COMP%]   .mat-menu-content[_ngcontent-%COMP%]:not(:empty){padding-top:20px}\"], changeDetection: 0 });\nLayerListComponent.ctorParameters = () => [\n    { type: ElementRef }\n];\nLayerListComponent.propDecorators = {\n    templateLayerToolbar: [{ type: ContentChild, args: ['igoLayerItemToolbar', /* TODO: add static flag */ {},] }],\n    layersAreAllVisible: [{ type: Input }],\n    ogcButton: [{ type: Input }],\n    timeButton: [{ type: Input }],\n    map: [{ type: Input }],\n    layers: [{ type: Input }],\n    floatLabel: [{ type: Input }],\n    layerFilterAndSortOptions: [{ type: Input }],\n    excludeBaseLayers: [{ type: Input }],\n    toggleLegendOnVisibilityChange: [{ type: Input }],\n    expandLegendOfVisibleLayers: [{ type: Input }],\n    updateLegendOnResolutionChange: [{ type: Input }],\n    queryBadge: [{ type: Input }],\n    appliedFilterAndSort: [{ type: Output }]\n};\n\nclass LayerListToolComponent {\n    constructor() {\n        this.onlyVisible$ = new BehaviorSubject(false);\n        this.sortAlpha$ = new BehaviorSubject(false);\n        this.term$ = new BehaviorSubject(undefined);\n        this.layersAreAllVisible = true;\n        this.floatLabel = 'auto';\n        this.selectionMode = false;\n        this.appliedFilterAndSort = new EventEmitter();\n        this.selection = new EventEmitter();\n    }\n    set onlyVisible(value) {\n        this.onlyVisible$.next(value);\n    }\n    get onlyVisible() {\n        return this.onlyVisible$.value;\n    }\n    set sortAlpha(value) {\n        this.sortAlpha$.next(value);\n    }\n    get sortAlpha() {\n        return this.sortAlpha$.value;\n    }\n    set term(value) {\n        this.term$.next(value);\n    }\n    get term() {\n        return this.term$.value;\n    }\n    ngOnInit() {\n        this.term$$ = this.term$.subscribe(keyword => {\n            this.appliedFilterAndSort.emit({\n                keyword,\n                onlyVisible: this.onlyVisible,\n                sortAlpha: this.sortAlpha\n            });\n        });\n        this.onlyVisible$$ = this.onlyVisible$.subscribe(onlyVisible => {\n            this.appliedFilterAndSort.emit({\n                keyword: this.term,\n                onlyVisible,\n                sortAlpha: this.sortAlpha\n            });\n        });\n        this.sortAlpha$$ = this.sortAlpha$.subscribe(sortAlpha => {\n            this.appliedFilterAndSort.emit({\n                keyword: this.term,\n                onlyVisible: this.onlyVisible,\n                sortAlpha\n            });\n        });\n    }\n    ngOnDestroy() {\n        this.onlyVisible$$.unsubscribe();\n        this.sortAlpha$$.unsubscribe();\n        this.term$$.unsubscribe();\n    }\n    clearTerm() {\n        this.term = undefined;\n    }\n    toggleSortAlpha() {\n        this.sortAlpha = !this.sortAlpha;\n    }\n    toggleOnlyVisible() {\n        this.onlyVisible = !this.onlyVisible;\n    }\n    toggleSelectionMode() {\n        this.selectionMode = !this.selectionMode;\n        this.selection.emit(this.selectionMode);\n    }\n}\nLayerListToolComponent.ɵfac = function LayerListToolComponent_Factory(t) { return new (t || LayerListToolComponent)(); };\nLayerListToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LayerListToolComponent, selectors: [[\"igo-layer-list-tool\"]], inputs: { layersAreAllVisible: \"layersAreAllVisible\", floatLabel: \"floatLabel\", onlyVisible: \"onlyVisible\", sortAlpha: \"sortAlpha\", term: \"term\" }, outputs: { appliedFilterAndSort: \"appliedFilterAndSort\", selection: \"selection\" }, decls: 21, vars: 30, consts: [[1, \"inputFilter\", 3, \"floatLabel\"], [\"matInput\", \"\", \"matTooltipShowDelay\", \"500\", \"type\", \"text\", 3, \"placeholder\", \"matTooltip\", \"ngModel\", \"ngModelChange\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [\"matTooltipShowDelay\", \"500\", 3, \"matTooltip\"], [\"mat-icon-button\", \"\", 3, \"color\", \"click\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", 3, \"disabled\", \"color\", \"click\"], [\"matBadge\", \"\", \"igoMatBadgeIcon\", \"eye\", \"igoMatBadgeInverseColor\", \"true\", \"igoMatBadgeInheritColor\", \"true\", 3, \"svgIcon\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", \"color\", \"warn\", 3, \"click\"], [\"svgIcon\", \"close\"]], template: function LayerListToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n        ɵngcc0.ɵɵelementStart(1, \"mat-form-field\", 0);\n        ɵngcc0.ɵɵelementStart(2, \"input\", 1);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function LayerListToolComponent_Template_input_ngModelChange_2_listener($event) { return ctx.term = $event; });\n        ɵngcc0.ɵɵpipe(3, \"translate\");\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(5, LayerListToolComponent_button_5_Template, 2, 0, \"button\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"div\", 3);\n        ɵngcc0.ɵɵpipe(7, \"translate\");\n        ɵngcc0.ɵɵpipe(8, \"translate\");\n        ɵngcc0.ɵɵelementStart(9, \"button\", 4);\n        ɵngcc0.ɵɵlistener(\"click\", function LayerListToolComponent_Template_button_click_9_listener() { return ctx.toggleSortAlpha(); });\n        ɵngcc0.ɵɵelement(10, \"mat-icon\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(11, \"div\", 3);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementStart(14, \"button\", 6);\n        ɵngcc0.ɵɵlistener(\"click\", function LayerListToolComponent_Template_button_click_14_listener() { return ctx.toggleOnlyVisible(); });\n        ɵngcc0.ɵɵelement(15, \"mat-icon\", 7);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"div\", 3);\n        ɵngcc0.ɵɵpipe(17, \"translate\");\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementStart(19, \"button\", 8);\n        ɵngcc0.ɵɵlistener(\"click\", function LayerListToolComponent_Template_button_click_19_listener() { return ctx.toggleSelectionMode(); });\n        ɵngcc0.ɵɵelement(20, \"mat-icon\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"floatLabel\", ctx.floatLabel);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(3, 14, \"igo.geo.layer.filterPlaceholder\"))(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(4, 16, \"igo.geo.layer.subsetLayersListKeyword\"))(\"ngModel\", ctx.term);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.term);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ctx.sortAlpha ? ɵngcc0.ɵɵpipeBind1(7, 18, \"igo.geo.layer.sortMapOrder\") : ɵngcc0.ɵɵpipeBind1(8, 20, \"igo.geo.layer.sortAlphabetically\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"color\", ctx.sortAlpha ? \"warn\" : \"primary\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"svgIcon\", ctx.sortAlpha ? \"sort-ascending\" : \"sort-alphabetical-ascending\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ctx.onlyVisible ? ɵngcc0.ɵɵpipeBind1(12, 22, \"igo.geo.layer.resetLayersList\") : ɵngcc0.ɵɵpipeBind1(13, 24, \"igo.geo.layer.subsetLayersListOnlyVisible\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.layersAreAllVisible && !ctx.onlyVisible)(\"color\", ctx.onlyVisible ? \"warn\" : \"primary\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"svgIcon\", ctx.onlyVisible ? \"filter-remove\" : \"filter\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ctx.selectionMode ? ɵngcc0.ɵɵpipeBind1(17, 26, \"igo.geo.layer.deactivateSelectionMode\") : ɵngcc0.ɵɵpipeBind1(18, 28, \"igo.geo.layer.activateSelectionMode\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"svgIcon\", ctx.selectionMode ? \"checkbox-multiple-marked-outline\" : \"checkbox-multiple-blank-outline\");\n    } }, directives: [ɵngcc10.MatListItem, ɵngcc14.MatFormField, ɵngcc19.MatInput, ɵngcc16.DefaultValueAccessor, ɵngcc3.MatTooltip, ɵngcc16.NgControlStatus, ɵngcc16.NgModel, ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc4.MatIcon, ɵngcc12.MatBadge, ɵngcc9.IgoBadgeIconDirective, ɵngcc14.MatSuffix], pipes: [ɵngcc5.TranslatePipe], styles: [\"mat-form-field.inputFilter[_ngcontent-%COMP%]{max-width:200px;width:calc(100% - 100px)}\"], changeDetection: 0 });\nLayerListToolComponent.propDecorators = {\n    layersAreAllVisible: [{ type: Input }],\n    floatLabel: [{ type: Input }],\n    onlyVisible: [{ type: Input }],\n    sortAlpha: [{ type: Input }],\n    term: [{ type: Input }],\n    appliedFilterAndSort: [{ type: Output }],\n    selection: [{ type: Output }]\n};\n\nclass LayerListBindingDirective {\n    constructor(component, mapService, route) {\n        this.mapService = mapService;\n        this.route = route;\n        this.component = component;\n    }\n    ngOnInit() {\n        // Override input layers\n        // this.component.layers = [];\n        this.layersOrResolutionChange$$ = combineLatest([\n            this.mapService.getMap().layers$,\n            this.mapService.getMap().viewController.resolution$\n        ]).pipe(debounceTime(10)).subscribe((bunch) => {\n            const shownLayers = bunch[0].filter((layer) => {\n                return layer.showInLayerList === true;\n            });\n            this.component.layers = shownLayers;\n            this.setLayersVisibilityStatus(shownLayers, this.component.excludeBaseLayers);\n        });\n    }\n    setLayersVisibilityStatus(layers, excludeBaseLayers) {\n        if (this.layersVisibility$$ !== undefined) {\n            this.layersVisibility$$.unsubscribe();\n            this.layersVisibility$$ = undefined;\n        }\n        this.layersVisibility$$ = combineLatest(layers\n            .filter(layer => layer.baseLayer !== excludeBaseLayers)\n            .map((layer) => layer.visible$))\n            .pipe(map((visibles) => visibles.every(Boolean)))\n            .subscribe((allLayersAreVisible) => this.component.layersAreAllVisible = allLayersAreVisible);\n    }\n    ngOnDestroy() {\n        this.layersOrResolutionChange$$.unsubscribe();\n        if (this.layersVisibility$$ !== undefined) {\n            this.layersVisibility$$.unsubscribe();\n            this.layersVisibility$$ = undefined;\n        }\n    }\n}\nLayerListBindingDirective.ɵfac = function LayerListBindingDirective_Factory(t) { return new (t || LayerListBindingDirective)(ɵngcc0.ɵɵdirectiveInject(LayerListComponent, 2), ɵngcc0.ɵɵdirectiveInject(MapService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.RouteService, 8)); };\nLayerListBindingDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: LayerListBindingDirective, selectors: [[\"\", \"igoLayerListBinding\", \"\"]] });\nLayerListBindingDirective.ctorParameters = () => [\n    { type: LayerListComponent, decorators: [{ type: Self }] },\n    { type: MapService },\n    { type: RouteService, decorators: [{ type: Optional }] }\n];\n\nclass LayerLegendListComponent {\n    constructor() {\n        this.orderable = true;\n        this.hasVisibleOrInRangeLayers$ = new BehaviorSubject(true);\n        this.hasVisibleAndNotInRangeLayers$ = new BehaviorSubject(true);\n        this.layersInUi$ = new BehaviorSubject([]);\n        this.layers$ = new BehaviorSubject([]);\n        this.showAllLegend = false;\n        this.change$ = new ReplaySubject(1);\n        this.excludeBaseLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.allowShowAllLegends = false;\n        this.showAllLegendsValue = false;\n        this.allLegendsShown = new EventEmitter(false);\n    }\n    set layers(value) {\n        this._layers = value;\n        this.next();\n    }\n    get layers() {\n        return this._layers;\n    }\n    ngOnInit() {\n        this.change$$ = this.change$\n            .pipe(debounce(() => {\n            return this.layers.length === 0 ? EMPTY : timer(50);\n        }))\n            .subscribe(() => {\n            const layers = this.computeShownLayers(this.layers.slice(0));\n            this.layers$.next(layers);\n            this.hasVisibleOrInRangeLayers$.next(this.layers.slice(0)\n                .filter(layer => layer.baseLayer !== true)\n                .filter(layer => layer.visible$.value && layer.isInResolutionsRange$.value).length > 0);\n            this.hasVisibleAndNotInRangeLayers$.next(this.layers.slice(0)\n                .filter(layer => layer.baseLayer !== true)\n                .filter(layer => layer.visible$.value && !layer.isInResolutionsRange$.value).length > 0);\n            this.layersInUi$.next(this.layers.slice(0).filter(layer => layer.showInLayerList !== false && (!this.excludeBaseLayers || !layer.baseLayer)));\n        });\n    }\n    ngOnDestroy() {\n        this.change$$.unsubscribe();\n    }\n    next() {\n        this.change$.next();\n    }\n    computeShownLayers(layers) {\n        let shownLayers = layers.filter((layer) => layer.visible && layer.isInResolutionsRange);\n        if (this.showAllLegendsValue) {\n            shownLayers = layers;\n        }\n        return this.sortLayersByZindex(shownLayers);\n    }\n    sortLayersByZindex(layers) {\n        return layers.sort((layer1, layer2) => layer2.zIndex - layer1.zIndex);\n    }\n    toggleShowAllLegends(toggle) {\n        this.showAllLegendsValue = toggle;\n        this.next();\n        this.allLegendsShown.emit(toggle);\n    }\n}\nLayerLegendListComponent.ɵfac = function LayerLegendListComponent_Factory(t) { return new (t || LayerLegendListComponent)(); };\nLayerLegendListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LayerLegendListComponent, selectors: [[\"igo-layer-legend-list\"]], inputs: { excludeBaseLayers: \"excludeBaseLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", allowShowAllLegends: \"allowShowAllLegends\", showAllLegendsValue: \"showAllLegendsValue\", layers: \"layers\" }, outputs: { allLegendsShown: \"allLegendsShown\" }, decls: 23, vars: 39, consts: [[\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", \"class\", \"mat-typography\", 3, \"matTooltip\", \"checked\", \"labelPosition\", \"change\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"navigation\", \"selection\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"class\", \"layers-empty mat-typography\", 4, \"ngIf\"], [\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 1, \"mat-typography\", 3, \"matTooltip\", \"checked\", \"labelPosition\", \"change\"], [\"igoListItem\", \"\", 3, \"layer\", \"updateLegendOnResolutionChange\", 4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"layer\", \"updateLegendOnResolutionChange\"], [1, \"layers-empty\", \"mat-typography\"]], template: function LayerLegendListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, LayerLegendListComponent_mat_slide_toggle_0_Template, 4, 8, \"mat-slide-toggle\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵtemplate(2, LayerLegendListComponent_mat_divider_2_Template, 1, 0, \"mat-divider\", 1);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementStart(4, \"igo-list\", 2);\n        ɵngcc0.ɵɵtemplate(5, LayerLegendListComponent_ng_template_5_Template, 1, 1, \"ng-template\", 3);\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(7, LayerLegendListComponent_p_7_Template, 3, 3, \"p\", 4);\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵpipe(10, \"async\");\n        ɵngcc0.ɵɵtemplate(11, LayerLegendListComponent_p_11_Template, 3, 3, \"p\", 4);\n        ɵngcc0.ɵɵpipe(12, \"async\");\n        ɵngcc0.ɵɵpipe(13, \"async\");\n        ɵngcc0.ɵɵpipe(14, \"async\");\n        ɵngcc0.ɵɵtemplate(15, LayerLegendListComponent_p_15_Template, 3, 3, \"p\", 4);\n        ɵngcc0.ɵɵpipe(16, \"async\");\n        ɵngcc0.ɵɵpipe(17, \"async\");\n        ɵngcc0.ɵɵpipe(18, \"async\");\n        ɵngcc0.ɵɵtemplate(19, LayerLegendListComponent_p_19_Template, 3, 3, \"p\", 4);\n        ɵngcc0.ɵɵpipe(20, \"async\");\n        ɵngcc0.ɵɵpipe(21, \"async\");\n        ɵngcc0.ɵɵpipe(22, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 9, ctx.layersInUi$).length && ctx.allowShowAllLegends);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(3, 11, ctx.layersInUi$).length && ctx.allowShowAllLegends);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"navigation\", false)(\"selection\", false);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(6, 13, ctx.layers$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(8, 15, ctx.layersInUi$).length && !ɵngcc0.ɵɵpipeBind1(9, 17, ctx.hasVisibleOrInRangeLayers$) && !ɵngcc0.ɵɵpipeBind1(10, 19, ctx.hasVisibleAndNotInRangeLayers$) && ctx.allowShowAllLegends);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(12, 21, ctx.layersInUi$).length && !ɵngcc0.ɵɵpipeBind1(13, 23, ctx.hasVisibleOrInRangeLayers$) && ɵngcc0.ɵɵpipeBind1(14, 25, ctx.hasVisibleAndNotInRangeLayers$) && ctx.allowShowAllLegends);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(16, 27, ctx.layersInUi$).length && !ɵngcc0.ɵɵpipeBind1(17, 29, ctx.hasVisibleOrInRangeLayers$) && !ɵngcc0.ɵɵpipeBind1(18, 31, ctx.hasVisibleAndNotInRangeLayers$) && !ctx.allowShowAllLegends);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(20, 33, ctx.layersInUi$).length && !ɵngcc0.ɵɵpipeBind1(21, 35, ctx.hasVisibleOrInRangeLayers$) && ɵngcc0.ɵɵpipeBind1(22, 37, ctx.hasVisibleAndNotInRangeLayers$) && !ctx.allowShowAllLegends);\n    } }, directives: function () { return [ɵngcc1.NgIf, ɵngcc9.ListComponent, ɵngcc1.NgForOf, ɵngcc20.MatSlideToggle, ɵngcc3.MatTooltip, ɵngcc21.MatDivider, LayerLegendItemComponent, ɵngcc9.ListItemDirective]; }, pipes: function () { return [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe]; }, styles: [\"mat-slide-toggle[_ngcontent-%COMP%]{margin:10px;width:100%}mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 60px)}igo-list[_ngcontent-%COMP%]{display:contents}.layers-empty[_ngcontent-%COMP%]{margin:10px;text-align:justify}\"], changeDetection: 0 });\nLayerLegendListComponent.ctorParameters = () => [];\nLayerLegendListComponent.propDecorators = {\n    layers: [{ type: Input }],\n    excludeBaseLayers: [{ type: Input }],\n    updateLegendOnResolutionChange: [{ type: Input }],\n    allowShowAllLegends: [{ type: Input }],\n    showAllLegendsValue: [{ type: Input }],\n    allLegendsShown: [{ type: Output }]\n};\n\nclass LayerLegendListBindingDirective {\n    constructor(component, mapService) {\n        this.mapService = mapService;\n        this.component = component;\n    }\n    ngOnInit() {\n        // Override input layers\n        this.component.layers = [];\n        this.layersOrResolutionChange$$ = combineLatest([\n            this.mapService.getMap().layers$,\n            this.mapService.getMap().viewController.resolution$\n        ]).pipe(debounceTime(10)).subscribe((bunch) => {\n            const shownLayers = bunch[0].filter((layer) => {\n                return layer.showInLayerList === true;\n            });\n            this.component.layers = shownLayers;\n            this.layersVisibility$$ = combineLatest(shownLayers\n                .map((layer) => layer.visible$))\n                .subscribe((r) => {\n                this.component.change$.next();\n            });\n        });\n    }\n    ngOnDestroy() {\n        this.layersOrResolutionChange$$.unsubscribe();\n        if (this.layersVisibility$$ !== undefined) {\n            this.layersVisibility$$.unsubscribe();\n            this.layersVisibility$$ = undefined;\n        }\n    }\n}\nLayerLegendListBindingDirective.ɵfac = function LayerLegendListBindingDirective_Factory(t) { return new (t || LayerLegendListBindingDirective)(ɵngcc0.ɵɵdirectiveInject(LayerLegendListComponent, 2), ɵngcc0.ɵɵdirectiveInject(MapService)); };\nLayerLegendListBindingDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: LayerLegendListBindingDirective, selectors: [[\"\", \"igoLayerLegendListBinding\", \"\"]] });\nLayerLegendListBindingDirective.ctorParameters = () => [\n    { type: LayerLegendListComponent, decorators: [{ type: Self }] },\n    { type: MapService }\n];\n\nclass TrackFeatureButtonComponent {\n    constructor() {\n        this.trackFeature = false;\n        this.color = 'primary';\n    }\n    get options() {\n        if (!this.layer) {\n            return;\n        }\n        return this.layer.options;\n    }\n    ngOnInit() {\n        this.color = this.trackFeature ? 'primary' : 'basic';\n    }\n    toggleTrackFeature() {\n        if (this.trackFeature) {\n            this.layer.disableTrackFeature(this.layer.options.trackFeature);\n            this.color = 'basic';\n        }\n        else {\n            this.layer.enableTrackFeature(this.layer.options.trackFeature);\n            this.color = 'primary';\n        }\n        this.trackFeature = !this.trackFeature;\n    }\n}\nTrackFeatureButtonComponent.ɵfac = function TrackFeatureButtonComponent_Factory(t) { return new (t || TrackFeatureButtonComponent)(); };\nTrackFeatureButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TrackFeatureButtonComponent, selectors: [[\"igo-track-feature-button\"]], inputs: { trackFeature: \"trackFeature\", layer: \"layer\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"crosshairs-gps\"]], template: function TrackFeatureButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, TrackFeatureButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.options.trackFeature);\n    } }, directives: [ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon], pipes: [ɵngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\nTrackFeatureButtonComponent.ctorParameters = () => [];\nTrackFeatureButtonComponent.propDecorators = {\n    layer: [{ type: Input }],\n    trackFeature: [{ type: Input }]\n};\n\nclass LayerLegendItemComponent {\n    constructor(networkService) {\n        this.networkService = networkService;\n        this.inResolutionRange$ = new BehaviorSubject(true);\n        this.updateLegendOnResolutionChange = false;\n    }\n    ngOnInit() {\n        const resolution$ = this.layer.map.viewController.resolution$;\n        this.resolution$$ = resolution$.subscribe(() => {\n            this.onResolutionChange();\n        });\n        this.tooltipText = this.computeTooltip();\n        this.networkService.currentState().subscribe((state) => {\n            this.state = state;\n            this.onResolutionChange();\n        });\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n    }\n    computeTooltip() {\n        const layerOptions = this.layer.options;\n        if (!layerOptions.tooltip) {\n            return this.layer.title;\n        }\n        const layerTooltip = layerOptions.tooltip;\n        const layerMetadata = layerOptions.metadata;\n        switch (layerOptions.tooltip.type) {\n            case TooltipType.TITLE:\n                return this.layer.title;\n            case TooltipType.ABSTRACT:\n                if (layerMetadata && layerMetadata.abstract) {\n                    return layerMetadata.abstract;\n                }\n                else {\n                    return this.layer.title;\n                }\n            case TooltipType.CUSTOM:\n                if (layerTooltip && layerTooltip.text) {\n                    return layerTooltip.text;\n                }\n                else {\n                    return this.layer.title;\n                }\n            default:\n                return this.layer.title;\n        }\n    }\n    onResolutionChange() {\n        const inResolutionRange = this.layer.isInResolutionsRange;\n        this.inResolutionRange$.next(inResolutionRange);\n    }\n}\nLayerLegendItemComponent.ɵfac = function LayerLegendItemComponent_Factory(t) { return new (t || LayerLegendItemComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc7.NetworkService)); };\nLayerLegendItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: LayerLegendItemComponent, selectors: [[\"igo-layer-legend-item\"]], inputs: { updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", layer: \"layer\" }, decls: 6, vars: 4, consts: [[1, \"igo-layer-list-item\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 1, \"igo-layer-title\", 3, \"matTooltip\"], [1, \"igo-layer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", \"updateLegendOnResolutionChange\"]], template: function LayerLegendItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"h4\", 1);\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 2, 3);\n        ɵngcc0.ɵɵelement(5, \"igo-layer-legend\", 4);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ctx.tooltipText);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.layer.title);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"layer\", ctx.layer)(\"updateLegendOnResolutionChange\", ctx.updateLegendOnResolutionChange);\n    } }, directives: [ɵngcc10.MatListItem, ɵngcc11.MatLine, ɵngcc3.MatTooltip, LayerLegendComponent], styles: [\"[_nghost-%COMP%]{overflow:hidden}.igo-layer-list-item[_ngcontent-%COMP%]{clear:both;height:46px}.igo-layer-legend-container[_ngcontent-%COMP%]{padding-left:18px;width:calc(100% - 18px)}\"], changeDetection: 0 });\nLayerLegendItemComponent.ctorParameters = () => [\n    { type: NetworkService }\n];\nLayerLegendItemComponent.propDecorators = {\n    layer: [{ type: Input }],\n    updateLegendOnResolutionChange: [{ type: Input }]\n};\n\nclass IgoLayerModule {\n    static forRoot() {\n        return {\n            ngModule: IgoLayerModule,\n            providers: [LayerService, StyleService, LayerListToolService]\n        };\n    }\n}\nIgoLayerModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoLayerModule });\nIgoLayerModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoLayerModule_Factory(t) { return new (t || IgoLayerModule)(); }, imports: [[\n            MatInputModule,\n            MatFormFieldModule,\n            CommonModule,\n            FormsModule,\n            MatDividerModule,\n            MatMenuModule,\n            MatIconModule,\n            MatButtonModule,\n            MatSlideToggleModule,\n            MatSelectModule,\n            MatTooltipModule,\n            MatListModule,\n            MatSliderModule,\n            MatBadgeModule,\n            MatCheckboxModule,\n            IgoLanguageModule,\n            IgoListModule,\n            IgoCollapsibleModule,\n            IgoImageModule,\n            IgoPanelModule,\n            IgoMatBadgeIconModule\n        ]] });\n\n/**\n * @ignore\n */\nclass IgoCatalogBrowserModule {\n}\nIgoCatalogBrowserModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoCatalogBrowserModule });\nIgoCatalogBrowserModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoCatalogBrowserModule_Factory(t) { return new (t || IgoCatalogBrowserModule)(); }, imports: [[\n            CommonModule,\n            MatBadgeModule,\n            MatButtonModule,\n            MatIconModule,\n            MatListModule,\n            MatTooltipModule,\n            IgoMatBadgeIconModule,\n            IgoLanguageModule,\n            IgoListModule,\n            IgoCollapsibleModule,\n            IgoMetadataModule,\n            IgoLayerModule\n        ]] });\n\n/**\n * Component to browse a list of available catalogs\n */\nclass CatalogLibaryComponent {\n    constructor() {\n        /**\n         * Event emitted a catalog is selected or unselected\n         */\n        this.catalogSelectChange = new EventEmitter();\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        this.store.state.clear();\n    }\n    /**\n     * When a catalog is selected, update it's state in the store\n     * and emit the catalog select change event\n     * @internal\n     */\n    onCatalogSelect(catalog) {\n        this.store.state.update(catalog, {\n            selected: true,\n            focused: true\n        }, true);\n        this.catalogSelectChange.emit({ selected: true, catalog });\n    }\n}\nCatalogLibaryComponent.ɵfac = function CatalogLibaryComponent_Factory(t) { return new (t || CatalogLibaryComponent)(); };\nCatalogLibaryComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CatalogLibaryComponent, selectors: [[\"igo-catalog-library\"]], inputs: { store: \"store\", map: \"map\" }, outputs: { catalogSelectChange: \"catalogSelectChange\" }, decls: 3, vars: 4, consts: [[3, \"navigation\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"igoListItem\", \"\", \"color\", \"accent\", 3, \"map\", \"catalog\", \"select\"]], template: function CatalogLibaryComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-list\", 0);\n        ɵngcc0.ɵɵtemplate(1, CatalogLibaryComponent_ng_template_1_Template, 1, 2, \"ng-template\", 1);\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"navigation\", false);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(2, 2, ctx.store.view.all$()));\n    } }, directives: function () { return [ɵngcc9.ListComponent, ɵngcc1.NgForOf, CatalogLibaryItemComponent, ɵngcc9.ListItemDirective]; }, pipes: function () { return [ɵngcc1.AsyncPipe]; }, encapsulation: 2, changeDetection: 0 });\nCatalogLibaryComponent.propDecorators = {\n    store: [{ type: Input }],\n    map: [{ type: Input }],\n    catalogSelectChange: [{ type: Output }]\n};\n\n/**\n * Catalog library item\n */\nclass CatalogLibaryItemComponent {\n    /**\n     * @internal\n     */\n    get title() { return getEntityTitle(this.catalog); }\n}\nCatalogLibaryItemComponent.ɵfac = function CatalogLibaryItemComponent_Factory(t) { return new (t || CatalogLibaryItemComponent)(); };\nCatalogLibaryItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CatalogLibaryItemComponent, selectors: [[\"igo-catalog-library-item\"]], inputs: { catalog: \"catalog\", map: \"map\" }, decls: 3, vars: 1, consts: [[\"mat-line\", \"\"]], template: function CatalogLibaryItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n        ɵngcc0.ɵɵelementStart(1, \"h4\", 0);\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.title);\n    } }, directives: [ɵngcc10.MatListItem, ɵngcc11.MatLine], encapsulation: 2, changeDetection: 0 });\nCatalogLibaryItemComponent.propDecorators = {\n    catalog: [{ type: Input }],\n    map: [{ type: Input }]\n};\n\n/**\n * @ignore\n */\nclass IgoCatalogLibraryModule {\n}\nIgoCatalogLibraryModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoCatalogLibraryModule });\nIgoCatalogLibraryModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoCatalogLibraryModule_Factory(t) { return new (t || IgoCatalogLibraryModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatListModule,\n            MatTooltipModule,\n            IgoListModule\n        ]] });\n\nclass IgoCatalogModule {\n}\nIgoCatalogModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoCatalogModule });\nIgoCatalogModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoCatalogModule_Factory(t) { return new (t || IgoCatalogModule)(); }, imports: [[\n            CommonModule,\n            MatBadgeModule,\n            MatIconModule,\n            MatListModule,\n            MatTooltipModule,\n            IgoMatBadgeIconModule,\n            IgoListModule,\n            IgoCollapsibleModule\n        ], IgoCatalogBrowserModule, IgoCatalogLibraryModule] });\n\nclass IgoDataSourceModule {\n    static forRoot() {\n        return {\n            ngModule: IgoDataSourceModule,\n            providers: []\n        };\n    }\n}\nIgoDataSourceModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoDataSourceModule });\nIgoDataSourceModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoDataSourceModule_Factory(t) { return new (t || IgoDataSourceModule)(); }, imports: [[]] });\n\nclass FilterableDataSourcePipe {\n    transform(value, arg) {\n        let layers;\n        if (arg === 'time') {\n            layers = value.filter((layer) => {\n                const datasource = layer.dataSource;\n                return (this.isTimeFilterable(datasource) &&\n                    datasource.options.timeFilter !== undefined &&\n                    Object.keys(datasource.options.timeFilter).length);\n            });\n        }\n        if (arg === 'ogc') {\n            layers = value.filter((layer) => {\n                const datasource = layer.dataSource;\n                return this.isOgcFilterable(datasource);\n            });\n        }\n        return layers;\n    }\n    isTimeFilterable(dataSource) {\n        if (dataSource.options.type !== 'wms') {\n            return false;\n        }\n        return dataSource.options.timeFilterable;\n    }\n    isOgcFilterable(dataSource) {\n        let isOgcFilterable = false;\n        if (dataSource.options.ogcFilters &&\n            dataSource.options.ogcFilters.enabled &&\n            dataSource.options.ogcFilters.editable) {\n            isOgcFilterable = true;\n        }\n        if (dataSource.options.ogcFilters &&\n            dataSource.options.ogcFilters.enabled &&\n            dataSource.options.ogcFilters.pushButtons) {\n            isOgcFilterable = true;\n        }\n        return isOgcFilterable;\n    }\n}\nFilterableDataSourcePipe.ɵfac = function FilterableDataSourcePipe_Factory(t) { return new (t || FilterableDataSourcePipe)(); };\nFilterableDataSourcePipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: \"filterableDataSource\", type: FilterableDataSourcePipe, pure: true });\n\nclass TimeFilterService {\n    constructor() { }\n    filterByDate(datasource, date) {\n        let time;\n        let newdateform;\n        let newdateformStart;\n        let newdateformEnd;\n        if (Array.isArray(date)) {\n            const dates = [];\n            if (date[0]) {\n                newdateformStart = this.reformatDateTime(date[0]);\n                dates.push(date[0]);\n            }\n            if (date[1]) {\n                newdateformEnd = this.reformatDateTime(date[1]);\n                dates.push(date[1]);\n            }\n            if (dates.length === 2 && newdateformStart !== newdateformEnd) {\n                if (datasource instanceof TileArcGISRestDataSource) {\n                    time = newdateformStart + ',' + newdateformEnd;\n                }\n                else {\n                    time = newdateformStart + '/' + newdateformEnd;\n                }\n            }\n            if (newdateformStart === newdateformEnd) {\n                time = newdateformStart;\n            }\n        }\n        else if (date) {\n            newdateform = this.reformatDateTime(date);\n            time = newdateform;\n        }\n        const params = { TIME: time };\n        datasource.ol.updateParams(params);\n    }\n    filterByYear(datasource, year) {\n        let time;\n        let newdateformStart;\n        let newdateformEnd;\n        if (Array.isArray(year)) {\n            const years = [];\n            if (year[0]) {\n                newdateformStart = year[0];\n                years.push(year[0]);\n            }\n            if (year[1]) {\n                newdateformEnd = year[1];\n                years.push(year[1]);\n            }\n            if (years.length === 2 && newdateformStart !== newdateformEnd) {\n                if (datasource instanceof TileArcGISRestDataSource) {\n                    time = newdateformStart + ',' + newdateformEnd;\n                }\n                else {\n                    time = newdateformStart + '/' + newdateformEnd;\n                }\n            }\n            if (newdateformStart === newdateformEnd) {\n                time = newdateformStart;\n            }\n        }\n        else { // to reset filter.\n            time = year;\n        }\n        const params = { TIME: time };\n        datasource.ol.updateParams(params);\n    }\n    reformatDateTime(value) {\n        const year = value.getFullYear();\n        let month = value.getMonth() + 1;\n        let day = value.getUTCDate();\n        let hour = value.getUTCHours();\n        let minute = value.getUTCMinutes();\n        if (Number(month) < 10) {\n            month = '0' + month;\n        }\n        if (Number(day) < 10) {\n            day = '0' + day;\n        }\n        if (Number(hour) < 10) {\n            hour = '0' + hour;\n        }\n        if (Number(minute) < 10) {\n            minute = '0' + minute;\n        }\n        return year + '-' + month + '-' + day + 'T' + hour + ':' + minute + ':00Z';\n    }\n}\nTimeFilterService.ɵfac = function TimeFilterService_Factory(t) { return new (t || TimeFilterService)(); };\nTimeFilterService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: TimeFilterService, factory: TimeFilterService.ɵfac });\nTimeFilterService.ctorParameters = () => [];\n\nclass OGCFilterService {\n    constructor() { }\n    filterByOgc(wmsDatasource, filterString) {\n        const appliedFilter = new OgcFilterWriter().formatProcessedOgcFilter(filterString, wmsDatasource.options.params.LAYERS);\n        wmsDatasource.ol.updateParams({ FILTER: appliedFilter });\n    }\n    setOgcWFSFiltersOptions(wfsDatasource) {\n        const options = wfsDatasource.options;\n        const ogcFilterWriter = new OgcFilterWriter();\n        if (options.ogcFilters.enabled && options.ogcFilters.filters) {\n            options.ogcFilters.filters = ogcFilterWriter.checkIgoFiltersProperties(options.ogcFilters.filters, options.paramsWFS.fieldNameGeometry, new olProjection({ code: options.paramsWFS.srsName }), true);\n            if (!options.ogcFilters.interfaceOgcFilters) {\n                options.ogcFilters.interfaceOgcFilters = ogcFilterWriter.defineInterfaceFilterSequence(options.ogcFilters.filters, options.paramsWFS.fieldNameGeometry);\n            }\n        }\n    }\n    setOgcWMSFiltersOptions(wmsDatasource) {\n        const options = wmsDatasource.options;\n        const ogcFilterWriter = new OgcFilterWriter();\n        if (options.ogcFilters.enabled && options.ogcFilters.filters) {\n            options.ogcFilters.filters = ogcFilterWriter.checkIgoFiltersProperties(options.ogcFilters.filters, options.fieldNameGeometry, undefined, true);\n            if (!options.ogcFilters.interfaceOgcFilters) {\n                options.ogcFilters.interfaceOgcFilters = ogcFilterWriter.defineInterfaceFilterSequence(\n                // With some wms server, this param must be set to make spatials call.\n                options.ogcFilters.filters, options.fieldNameGeometry);\n            }\n            this.filterByOgc(wmsDatasource, ogcFilterWriter.buildFilter(options.ogcFilters.filters, undefined, undefined, undefined, wmsDatasource.options));\n            options.filtered = true;\n        }\n        else {\n            options.ogcFilters.filters = undefined;\n            options.ogcFilters.interfaceOgcFilters = [];\n            options.filtered = false;\n        }\n    }\n}\nOGCFilterService.ɵfac = function OGCFilterService_Factory(t) { return new (t || OGCFilterService)(); };\nOGCFilterService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: OGCFilterService, factory: OGCFilterService.ɵfac });\nOGCFilterService.ctorParameters = () => [];\n\nvar SpatialFilterQueryType;\n(function (SpatialFilterQueryType) {\n    SpatialFilterQueryType[\"AdmRegion\"] = \"AdmRegion\";\n    SpatialFilterQueryType[\"Mun\"] = \"Mun\";\n    SpatialFilterQueryType[\"Arrond\"] = \"Arrond\";\n    SpatialFilterQueryType[\"CircFed\"] = \"CircFed\";\n    SpatialFilterQueryType[\"CircProv\"] = \"CircProv\";\n    SpatialFilterQueryType[\"DirReg\"] = \"DirReg\";\n    SpatialFilterQueryType[\"MRC\"] = \"MRC\";\n    SpatialFilterQueryType[\"RegTour\"] = \"RegTour\";\n})(SpatialFilterQueryType || (SpatialFilterQueryType = {}));\nvar SpatialFilterType;\n(function (SpatialFilterType) {\n    SpatialFilterType[\"Predefined\"] = \"Predefined\";\n    SpatialFilterType[\"Polygon\"] = \"Polygon\";\n    SpatialFilterType[\"Point\"] = \"Point\";\n})(SpatialFilterType || (SpatialFilterType = {}));\nvar SpatialFilterItemType;\n(function (SpatialFilterItemType) {\n    SpatialFilterItemType[\"Address\"] = \"Address\";\n    SpatialFilterItemType[\"Thematics\"] = \"Thematics\";\n})(SpatialFilterItemType || (SpatialFilterItemType = {}));\n\nclass SpatialFilterService {\n    constructor(http, languageService, configService) {\n        this.http = http;\n        this.languageService = languageService;\n        this.configService = configService;\n        this.baseUrl = 'https://geoegl.msp.gouv.qc.ca/apis/terrapi/';\n        /*\n         * Type association with URL\n         */\n        this.urlFilterList = {\n            AdmRegion: 'regadmin',\n            Arrond: 'arrondissements',\n            CircFed: 'circ-fed',\n            CircProv: 'circ-prov',\n            DirReg: 'dir-reg',\n            MRC: 'mrc',\n            Mun: 'municipalites',\n            RegTour: 'tourisme',\n            bornes: 'bornes-sumi',\n            hydro: 'hydro',\n            routes: 'routes'\n        };\n        this.baseUrl =\n            this.configService.getConfig('spatialFilter.url') || this.baseUrl;\n    }\n    getKeyByValue(object, value) {\n        return Object.keys(object).find(key => object[key] === value);\n    }\n    /*\n     * Loading data for spatial filter list component (NO GEOMETRY)\n     */\n    loadFilterList(type) {\n        const urlPath = type;\n        if (urlPath) {\n            return this.http\n                .get(this.baseUrl + this.urlFilterList[urlPath])\n                .pipe(map(featureCollection => featureCollection.features.map(f => {\n                f.meta = {\n                    id: f.properties.code\n                };\n                return f;\n            })));\n        }\n    }\n    /*\n     * Loading item list (STRING)\n     */\n    loadThematicsList() {\n        const url = 'types';\n        const items = [];\n        return this.http.get(this.baseUrl + url).pipe(map((types) => {\n            types.forEach(type => {\n                if (type.startsWith('lieux')) {\n                    const item = {\n                        name: undefined,\n                        source: type\n                    };\n                    let substr = type.substring(6, type.length);\n                    let name = substr;\n                    if (substr.includes('.')) {\n                        const index = substr.indexOf('.');\n                        name = substr.substring(index + 1, substr.length);\n                        substr = substr.substring(0, index);\n                    }\n                    try {\n                        item.name = this.languageService.translate.instant('igo.geo.terrapi.' + name);\n                    }\n                    catch (e) {\n                        item.name = name.substring(0, 1).toUpperCase() + name.substring(1, name.length - 1);\n                    }\n                    try {\n                        item.group = this.languageService.translate.instant('igo.geo.spatialFilter.group.' + substr);\n                    }\n                    catch (e) {\n                        item.group = substr.substring(0, 1).toUpperCase() + substr.substring(1, name.length - 1);\n                    }\n                    items.push(item);\n                }\n                else {\n                    if (this.getKeyByValue(this.urlFilterList, type)) {\n                        const item = {\n                            name: undefined,\n                            source: type\n                        };\n                        const name = this.getKeyByValue(this.urlFilterList, type);\n                        try {\n                            item.name = this.languageService.translate.instant('igo.geo.terrapi.' + name);\n                        }\n                        catch (e) {\n                            item.name = name.substring(0, 1).toUpperCase() + name.substring(1, name.length - 1);\n                        }\n                        item.source = type;\n                        items.push(item);\n                    }\n                }\n            });\n            return items;\n        }));\n    }\n    /*\n     * Loading data for spatial filter item component (Address or Thematics) depends on predefined zone or draw zone (feature)\n     */\n    loadFilterItem(feature, itemType, type, thematic, buffer) {\n        if (type) {\n            // Predefined type\n            const urlType = type;\n            const url = this.baseUrl + this.urlFilterList[urlType];\n            let urlItem = '';\n            if (itemType === SpatialFilterItemType.Address) {\n                urlItem = 'adresses';\n                return this.http\n                    .get(url + '/' + feature.properties.code + '/' + urlItem, {\n                    params: {\n                        geometry: 'true',\n                        icon: 'true'\n                    }\n                })\n                    .pipe(map(featureCollection => featureCollection.features.map(f => {\n                    f.meta = {\n                        id: f.properties.code,\n                        title: this.languageService.translate.instant('igo.geo.spatialFilter.Address'),\n                        icon: f.icon\n                    };\n                    return f;\n                })));\n            }\n            else {\n                // If thematics search\n                urlItem = thematic.source;\n                return this.http\n                    .get(url + '/' + feature.properties.code + '/' + urlItem, {\n                    params: {\n                        geometry: 'true',\n                        icon: 'true'\n                    }\n                })\n                    .pipe(map(featureCollection => featureCollection.features.map(f => {\n                    f.meta = {\n                        id: f.properties.code,\n                        title: thematic.name,\n                        icon: f.icon\n                    };\n                    return f;\n                })));\n            }\n        }\n        else {\n            // Draw type\n            const url = this.baseUrl + 'locate';\n            if (itemType === SpatialFilterItemType.Address) {\n                const urlItem = '?type=adresses';\n                return this.http\n                    .post(url + urlItem, {\n                    geometry: 'true',\n                    icon: 'true',\n                    buffer,\n                    loc: JSON.stringify(feature)\n                })\n                    .pipe(map(featureCollection => featureCollection.features.map(f => {\n                    f.meta = {\n                        id: f.properties.code,\n                        title: this.languageService.translate.instant('igo.geo.spatialFilter.Address'),\n                        icon: f.icon\n                    };\n                    return f;\n                })));\n            }\n            else {\n                // If thematics search\n                const urlItem = '?type=' + thematic.source;\n                return this.http\n                    .post(url + urlItem, {\n                    geometry: 'true',\n                    icon: 'true',\n                    buffer,\n                    loc: JSON.stringify(feature)\n                })\n                    .pipe(map(featureCollection => featureCollection.features.map(f => {\n                    f.meta = {\n                        id: f.properties.code,\n                        title: thematic.name,\n                        icon: f.icon\n                    };\n                    return f;\n                })));\n            }\n        }\n    }\n    /*\n     * Get one territory by id (WITH GEOMETRY)\n     */\n    loadItemById(feature, type) {\n        const featureType = this.urlFilterList[type];\n        const featureCode = '/' + feature.properties.code;\n        if (featureType && featureCode) {\n            return this.http\n                .get(this.baseUrl + featureType + featureCode, {\n                params: {\n                    geometry: 'true'\n                }\n            })\n                .pipe(map(f => {\n                f.meta = {\n                    id: f.properties.code,\n                    alias: f.properties.nom,\n                    title: f.properties.nom\n                };\n                return f;\n            }));\n        }\n    }\n}\nSpatialFilterService.ɵfac = function SpatialFilterService_Factory(t) { return new (t || SpatialFilterService)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject(ɵngcc7.ConfigService)); };\nSpatialFilterService.ɵprov = ɵɵdefineInjectable({ factory: function SpatialFilterService_Factory() { return new SpatialFilterService(ɵɵinject(HttpClient), ɵɵinject(LanguageService), ɵɵinject(ConfigService)); }, token: SpatialFilterService, providedIn: \"root\" });\nSpatialFilterService.ctorParameters = () => [\n    { type: HttpClient },\n    { type: LanguageService },\n    { type: ConfigService }\n];\n\nclass DownloadService {\n    constructor(messageService, languageService) {\n        this.messageService = messageService;\n        this.languageService = languageService;\n    }\n    open(layer) {\n        const translate = this.languageService.translate;\n        const title = translate.instant('igo.geo.download.title');\n        this.messageService.success(translate.instant('igo.geo.download.start'), title);\n        const DSOptions = layer.dataSource.options;\n        if (Object.keys(DSOptions.download).length > 0) {\n            if (DSOptions.download.dynamicUrl &&\n                DSOptions.download.url === undefined) {\n                let wfsOptions;\n                if (layer.dataSource.options.paramsWFS &&\n                    Object.keys(layer.dataSource.options.paramsWFS).length > 0) {\n                    wfsOptions = layer.dataSource.options.paramsWFS;\n                }\n                else {\n                    wfsOptions = layer.dataSource.options.params;\n                }\n                const outputFormatDownload = wfsOptions.outputFormatDownload === undefined\n                    ? 'outputformat=' + wfsOptions.outputFormat\n                    : 'outputformat=' + wfsOptions.outputFormatDownload;\n                const baseurl = DSOptions.download.dynamicUrl\n                    .replace(/&?outputformat=[^&]*/gi, '')\n                    .replace(/&?filter=[^&]*/gi, '')\n                    .replace(/&?bbox=[^&]*/gi, '');\n                const ogcFilters = layer.dataSource.options.ogcFilters;\n                let filterQueryString;\n                filterQueryString = new OgcFilterWriter()\n                    .handleOgcFiltersAppliedValue(layer.dataSource.options, ogcFilters.geometryName, layer.map.viewController.getExtent(), new olProjection({ code: layer.map.projection }));\n                if (!filterQueryString) {\n                    // Prevent getting all the features for empty filter\n                    filterQueryString = new OgcFilterWriter().buildFilter(undefined, layer.map.viewController.getExtent(), new olProjection({ code: layer.map.projection }), ogcFilters.geometryName);\n                }\n                else {\n                    filterQueryString = 'filter=' + encodeURIComponent(filterQueryString);\n                }\n                window.open(`${baseurl}&${filterQueryString}&${outputFormatDownload}`, '_blank');\n            }\n            else if (DSOptions.download) {\n                window.open(DSOptions.download.url, '_blank');\n            }\n        }\n    }\n}\nDownloadService.ɵfac = function DownloadService_Factory(t) { return new (t || DownloadService)(ɵngcc0.ɵɵinject(ɵngcc7.MessageService), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService)); };\nDownloadService.ɵprov = ɵɵdefineInjectable({ factory: function DownloadService_Factory() { return new DownloadService(ɵɵinject(MessageService), ɵɵinject(LanguageService)); }, token: DownloadService, providedIn: \"root\" });\nDownloadService.ctorParameters = () => [\n    { type: MessageService },\n    { type: LanguageService }\n];\n\nclass DownloadButtonComponent {\n    constructor(downloadService) {\n        this.downloadService = downloadService;\n        this._color = 'primary';\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    openDownload(layer) {\n        this.downloadService.open(layer);\n    }\n    get options() {\n        if (!this.layer) {\n            return;\n        }\n        return this.layer.dataSource.options;\n    }\n}\nDownloadButtonComponent.ɵfac = function DownloadButtonComponent_Factory(t) { return new (t || DownloadButtonComponent)(ɵngcc0.ɵɵdirectiveInject(DownloadService)); };\nDownloadButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: DownloadButtonComponent, selectors: [[\"igo-download-button\"]], inputs: { layer: \"layer\", color: \"color\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"download\"]], template: function DownloadButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, DownloadButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.options && ctx.options.download && (ctx.options.download[\"dynamicUrl\"] || ctx.options.download[\"url\"]));\n    } }, directives: [ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon], pipes: [ɵngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\nDownloadButtonComponent.ctorParameters = () => [\n    { type: DownloadService }\n];\nDownloadButtonComponent.propDecorators = {\n    layer: [{ type: Input }],\n    color: [{ type: Input }]\n};\n\nclass IgoDownloadModule {\n    static forRoot() {\n        return {\n            ngModule: IgoDownloadModule\n        };\n    }\n}\nIgoDownloadModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoDownloadModule });\nIgoDownloadModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoDownloadModule_Factory(t) { return new (t || IgoDownloadModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            IgoLanguageModule\n        ]] });\n\nclass FeatureDetailsComponent {\n    constructor(cdRef, sanitizer, networkService) {\n        this.cdRef = cdRef;\n        this.sanitizer = sanitizer;\n        this.networkService = networkService;\n        this.ready = false;\n        this.routeEvent = new EventEmitter();\n        this.selectFeature = new EventEmitter();\n        this.networkService.currentState().subscribe((state) => {\n            this.state = state;\n        });\n    }\n    get source() {\n        return this._source;\n    }\n    set source(value) {\n        this._source = value;\n        this.cdRef.detectChanges();\n    }\n    get feature() {\n        return this._feature;\n    }\n    set feature(value) {\n        this._feature = value;\n        this.cdRef.detectChanges();\n        this.selectFeature.emit();\n    }\n    /**\n     * @internal\n     */\n    get title() {\n        return getEntityTitle(this.feature);\n    }\n    /**\n     * @internal\n     */\n    get icon() {\n        return getEntityIcon(this.feature) || 'link';\n    }\n    ngOnInit() {\n        this.ready = true;\n    }\n    htmlSanitizer(value) {\n        return this.sanitizer.bypassSecurityTrustResourceUrl(value);\n    }\n    isObject(value) {\n        return typeof value === 'object';\n    }\n    isUrl(value) {\n        if (typeof value === 'string') {\n            return (value.slice(0, 8) === 'https://' || value.slice(0, 7) === 'http://');\n        }\n        else {\n            return false;\n        }\n    }\n    isImg(value) {\n        if (this.isUrl(value)) {\n            return (['jpg', 'png', 'gif'].includes(value.split('.').pop().toLowerCase()));\n        }\n        else {\n            return false;\n        }\n    }\n    filterFeatureProperties(feature) {\n        const allowedFieldsAndAlias = feature.meta ? feature.meta.alias : undefined;\n        const properties = {};\n        let offlineButtonState;\n        if (this.map) {\n            this.map.offlineButtonToggle$.subscribe(state => {\n                offlineButtonState = state;\n            });\n        }\n        if (feature.properties && feature.properties.Route && this.toolbox && !this.toolbox.getTool('directions')) {\n            delete feature.properties.Route;\n        }\n        if (allowedFieldsAndAlias) {\n            Object.keys(allowedFieldsAndAlias).forEach(field => {\n                properties[allowedFieldsAndAlias[field]] = feature.properties[field];\n            });\n            return properties;\n        }\n        else if (offlineButtonState !== undefined) {\n            if (!offlineButtonState) {\n                if (this.state.connection && feature.meta && feature.meta.excludeAttribute) {\n                    const excludeAttribute = feature.meta.excludeAttribute;\n                    excludeAttribute.forEach(attribute => {\n                        delete feature.properties[attribute];\n                    });\n                }\n                else if (!this.state.connection && feature.meta && feature.meta.excludeAttributeOffline) {\n                    const excludeAttributeOffline = feature.meta.excludeAttributeOffline;\n                    excludeAttributeOffline.forEach(attribute => {\n                        delete feature.properties[attribute];\n                    });\n                }\n            }\n            else {\n                if (feature.meta && feature.meta.excludeAttributeOffline) {\n                    const excludeAttributeOffline = feature.meta.excludeAttributeOffline;\n                    excludeAttributeOffline.forEach(attribute => {\n                        delete feature.properties[attribute];\n                    });\n                }\n            }\n        }\n        else {\n            if (this.state.connection && feature.meta && feature.meta.excludeAttribute) {\n                const excludeAttribute = feature.meta.excludeAttribute;\n                excludeAttribute.forEach(attribute => {\n                    delete feature.properties[attribute];\n                });\n            }\n            else if (!this.state.connection && feature.meta && feature.meta.excludeAttributeOffline) {\n                const excludeAttributeOffline = feature.meta.excludeAttributeOffline;\n                excludeAttributeOffline.forEach(attribute => {\n                    delete feature.properties[attribute];\n                });\n            }\n        }\n        return feature.properties;\n    }\n}\nFeatureDetailsComponent.ɵfac = function FeatureDetailsComponent_Factory(t) { return new (t || FeatureDetailsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc22.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.NetworkService)); };\nFeatureDetailsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FeatureDetailsComponent, selectors: [[\"igo-feature-details\"]], inputs: { source: \"source\", feature: \"feature\", map: \"map\", toolbox: \"toolbox\" }, outputs: { routeEvent: \"routeEvent\", selectFeature: \"selectFeature\" }, decls: 2, vars: 2, consts: [[\"class\", \"igo-striped mat-typography\", 4, \"ngIf\"], [3, \"src\", 4, \"ngIf\"], [1, \"igo-striped\", \"mat-typography\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"id\", \"keyValue\", 4, \"ngIf\"], [3, \"innerHTML\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", 3, \"svgIcon\"], [\"target\", \"_blank\", 3, \"href\"], [\"id\", \"keyValue\"], [3, \"innerHTML\"], [\"width\", \"225\", \"heigth\", \"auto\", 3, \"src\", 4, \"ngIf\", \"ngIfElse\"], [\"notImg\", \"\"], [\"width\", \"225\", \"heigth\", \"auto\", 3, \"src\"], [3, \"src\"]], template: function FeatureDetailsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, FeatureDetailsComponent_table_0_Template, 4, 3, \"table\", 0);\n        ɵngcc0.ɵɵtemplate(1, FeatureDetailsComponent_iframe_1_Template, 1, 1, \"iframe\", 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.ready && ctx.feature && ctx.isObject(ctx.feature.properties) && ctx.feature.properties.target !== \"iframe\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.feature && ctx.isObject(ctx.feature.properties) && ctx.feature.properties.target === \"iframe\");\n    } }, directives: [ɵngcc1.NgIf, ɵngcc1.NgForOf, ɵngcc4.MatIcon], pipes: [ɵngcc9.KeyValuePipe, ɵngcc5.TranslatePipe, ɵngcc1.AsyncPipe, ɵngcc9.SecureImagePipe, ɵngcc1.JsonPipe], styles: [\"table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}#keyValue[_ngcontent-%COMP%]{width:30%}table[_ngcontent-%COMP%]     .routing{cursor:pointer}iframe[_ngcontent-%COMP%]{border:0;height:calc(100% - 4px);width:100%}\"], changeDetection: 0 });\nFeatureDetailsComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef },\n    { type: DomSanitizer },\n    { type: NetworkService }\n];\nFeatureDetailsComponent.propDecorators = {\n    source: [{ type: Input }],\n    map: [{ type: Input }],\n    toolbox: [{ type: Input }],\n    feature: [{ type: Input }],\n    routeEvent: [{ type: Output }],\n    selectFeature: [{ type: Output }]\n};\n\nclass FeatureDetailsDirective {\n    constructor(component, el) {\n        this.el = el;\n        this.geolocation$ = new BehaviorSubject(undefined);\n        this.start = {\n            meta: { id: 1 },\n            type: FEATURE,\n            geometry: {\n                type: 'Point',\n                coordinates: undefined\n            },\n            projection: 'EPSG:4326',\n            properties: {\n                id: 1,\n                name: 'User coordinates',\n            }\n        };\n        this.feature$ = new BehaviorSubject(undefined);\n        this.routingEvent = new EventEmitter();\n        this.component = component;\n    }\n    get map() {\n        return this.component.map;\n    }\n    get feature() {\n        return this.component.feature;\n    }\n    get geolocation() {\n        return this.component.map.geolocation$.getValue();\n    }\n    set geolocation(value) {\n        if (value) {\n            this.geolocation = value;\n            this.geolocation.on('change', evt => {\n                this.geolocation$.next(this.geolocation);\n            });\n        }\n    }\n    setFeature() {\n        this.feature$.next(this.feature);\n    }\n    ngOnInit() {\n        this.map.geolocation$.subscribe(geolocation => {\n            if (!geolocation) {\n                return;\n            }\n            geolocation.setProjection(this.map.projection);\n            if (geolocation && geolocation.getTracking() === false) {\n                geolocation.setTracking(false);\n            }\n            if (geolocation.getTracking() === true) {\n                let userCoord = geolocation.getPosition();\n                userCoord = transform(userCoord, this.map.projection, 'EPSG:4326');\n                this.start.geometry.coordinates = userCoord;\n            }\n        });\n        this.feature$.subscribe(() => {\n            if (this.feature.geometry) {\n                if (this.feature.geometry.type === 'Point') {\n                    this.end = this.feature;\n                }\n                else {\n                    this.end = pointOnFeature(this.feature.geometry);\n                }\n                this.geolocation$.next(this.geolocation);\n                this.bindClicking();\n            }\n        });\n    }\n    bindClicking() {\n        setTimeout(() => {\n            const routeElement = this.el.nativeElement.querySelector('span.routing');\n            if (routeElement) {\n                routeElement.addEventListener('click', () => {\n                    this.activateRouting();\n                });\n            }\n        }, 1);\n    }\n    activateRouting() {\n        this.start.geometry.coordinates ? this.routingEvent.emit([this.start, this.end]) : this.routingEvent.emit([this.end]);\n    }\n}\nFeatureDetailsDirective.ɵfac = function FeatureDetailsDirective_Factory(t) { return new (t || FeatureDetailsDirective)(ɵngcc0.ɵɵdirectiveInject(FeatureDetailsComponent, 2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nFeatureDetailsDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: FeatureDetailsDirective, selectors: [[\"\", \"igoFeatureDetailsDirective\", \"\"]], hostBindings: function FeatureDetailsDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"selectFeature\", function FeatureDetailsDirective_selectFeature_HostBindingHandler() { return ctx.setFeature(); });\n    } }, outputs: { routingEvent: \"routingEvent\" } });\nFeatureDetailsDirective.ctorParameters = () => [\n    { type: FeatureDetailsComponent, decorators: [{ type: Self }] },\n    { type: ElementRef }\n];\nFeatureDetailsDirective.propDecorators = {\n    routingEvent: [{ type: Output }],\n    setFeature: [{ type: HostListener, args: ['selectFeature',] }]\n};\n\n/**\n * @ignore\n */\nclass IgoFeatureDetailsModule {\n}\nIgoFeatureDetailsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoFeatureDetailsModule });\nIgoFeatureDetailsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoFeatureDetailsModule_Factory(t) { return new (t || IgoFeatureDetailsModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            IgoLanguageModule,\n            IgoKeyValueModule,\n            IgoImageModule\n        ]] });\n\n/**\n * A configurable form, optionnally bound to a feature.\n * This component creates an entity form and, on submit,\n * returns a feature made out of the submitted data. It also\n * does things like managing the feature visibility while it's being updated\n * as well as disabling the selection of another feature.\n */\nclass FeatureFormComponent {\n    constructor() {\n        this.feature$ = new BehaviorSubject(undefined);\n        /**\n         * Event emitted when the form is submitted\n         */\n        this.submitForm = new EventEmitter();\n    }\n    /**\n     * Feature to update\n     */\n    set feature(value) { this.feature$.next(value); }\n    get feature() { return this.feature$.value; }\n    /**\n     * Transform the form data to a feature and emit an event\n     * @param event Form submit event\n     * @internal\n     */\n    onSubmit(data) {\n        const feature = this.formDataToFeature(data);\n        this.submitForm.emit(feature);\n    }\n    getData() {\n        return this.formDataToFeature(this.igoForm.getData());\n    }\n    /**\n     * Transform the form data to a feature\n     * @param data Form data\n     * @returns A feature\n     */\n    formDataToFeature(data) {\n        const properties = {};\n        const meta = {};\n        if (this.feature === undefined) {\n            meta.id = uuid();\n        }\n        else {\n            Object.assign(properties, this.feature.properties);\n            Object.assign(meta, this.feature.meta, {\n                revision: getEntityRevision(this.feature) + 1\n            });\n        }\n        const propertyPrefix = 'properties.';\n        Object.entries(data).forEach((entry) => {\n            const [key, value] = entry;\n            if (key.startsWith(propertyPrefix)) {\n                const property = key.substr(propertyPrefix.length);\n                properties[property] = value;\n            }\n        });\n        let geometry = data.geometry;\n        if (geometry === undefined && this.feature !== undefined) {\n            geometry = this.feature.geometry;\n        }\n        return {\n            meta: meta,\n            type: FEATURE,\n            geometry,\n            projection: 'EPSG:4326',\n            properties\n        };\n    }\n}\nFeatureFormComponent.ɵfac = function FeatureFormComponent_Factory(t) { return new (t || FeatureFormComponent)(); };\nFeatureFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FeatureFormComponent, selectors: [[\"igo-feature-form\"]], viewQuery: function FeatureFormComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c11, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.igoForm = _t.first);\n    } }, inputs: { feature: \"feature\", form: \"form\" }, outputs: { submitForm: \"submitForm\" }, ngContentSelectors: _c13, decls: 5, vars: 4, consts: [[3, \"form\", \"formData\", \"submitForm\"], [\"igoForm\", \"\"]], template: function FeatureFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c12);\n        ɵngcc0.ɵɵelementStart(0, \"igo-form\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"submitForm\", function FeatureFormComponent_Template_igo_form_submitForm_0_listener($event) { return ctx.onSubmit($event); });\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵprojection(3);\n        ɵngcc0.ɵɵprojection(4, 1, [\"formButtons\", \"\"]);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"form\", ctx.form)(\"formData\", ɵngcc0.ɵɵpipeBind1(2, 2, ctx.feature$));\n    } }, directives: [ɵngcc9.FormComponent], pipes: [ɵngcc1.AsyncPipe], styles: [\"[_nghost-%COMP%]{display:block}igo-form[_ngcontent-%COMP%]{height:100%}\"], changeDetection: 0 });\nFeatureFormComponent.ctorParameters = () => [];\nFeatureFormComponent.propDecorators = {\n    form: [{ type: Input }],\n    feature: [{ type: Input }],\n    submitForm: [{ type: Output }],\n    igoForm: [{ type: ViewChild, args: ['igoForm', { static: true },] }]\n};\n\n/**\n * @ignore\n */\nclass IgoFeatureFormModule {\n}\nIgoFeatureFormModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoFeatureFormModule });\nIgoFeatureFormModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoFeatureFormModule_Factory(t) { return new (t || IgoFeatureFormModule)(); }, imports: [[\n            CommonModule,\n            IgoFormModule\n        ], IgoFormModule] });\n\nclass IgoFeatureModule {\n}\nIgoFeatureModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoFeatureModule });\nIgoFeatureModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoFeatureModule_Factory(t) { return new (t || IgoFeatureModule)(); }, providers: [], imports: [[\n            CommonModule\n        ], IgoFeatureDetailsModule, IgoFeatureFormModule] });\n\n/**\n * This input allows a user to draw a new geometry or to edit\n * an existing one on a map.\n */\nlet GeometryFormFieldComponent = class GeometryFormFieldComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        this.value$ = new BehaviorSubject(undefined);\n        this.drawControlIsActive = true;\n        this.freehandDrawIsActive = false;\n        this.geometryType$ = new BehaviorSubject(undefined);\n        /**\n         * Whether a geometry type toggle should be displayed\n         */\n        this.geometryTypeField = false;\n        /**\n         * Available geometry types\n         */\n        this.geometryTypes = ['Point', 'LineString', 'Polygon'];\n        /**\n         * Whether a draw guide field should be displayed\n         */\n        this.drawGuideField = false;\n        this.drawGuide$ = new BehaviorSubject(0);\n        /**\n         * Draw guide placeholder\n         */\n        this.drawGuidePlaceholder = '';\n        /**\n         * Whether a measure tooltip should be displayed\n         */\n        this.measure = false;\n        /**\n         * Control options\n         */\n        this.controlOptions = {};\n    }\n    set geometryType(value) { this.geometryType$.next(value); }\n    get geometryType() { return this.geometryType$.value; }\n    /**\n     * The drawGuide around the mouse pointer to help drawing\n     */\n    set drawGuide(value) { this.drawGuide$.next(value); }\n    get drawGuide() { return this.drawGuide$.value; }\n    /**\n     * Set up a value stream\n     * @internal\n     */\n    ngOnInit() {\n        this.value$.next(this.formControl.value ? this.formControl.value : undefined);\n        this.value$$ = this.formControl.valueChanges.subscribe((value) => {\n            this.value$.next(value ? value : undefined);\n        });\n    }\n    /**\n     * Unsubscribe to the value stream\n     * @internal\n     */\n    ngOnDestroy() {\n        this.value$$.unsubscribe();\n    }\n};\nGeometryFormFieldComponent.ɵfac = function GeometryFormFieldComponent_Factory(t) { return new (t || GeometryFormFieldComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nGeometryFormFieldComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: GeometryFormFieldComponent, selectors: [[\"igo-geometry-form-field\"]], inputs: { geometryTypeField: \"geometryTypeField\", geometryTypes: \"geometryTypes\", drawGuideField: \"drawGuideField\", drawGuidePlaceholder: \"drawGuidePlaceholder\", measure: \"measure\", controlOptions: \"controlOptions\", geometryType: \"geometryType\", drawGuide: \"drawGuide\", formControl: \"formControl\", map: \"map\", drawStyle: \"drawStyle\", overlayStyle: \"overlayStyle\" }, decls: 5, vars: 16, consts: [[3, \"formControl\", \"map\", \"geometryType\", \"drawGuide\", \"measure\", \"drawControlIsActive\", \"freehandDrawIsActive\", \"controlOptions\", \"drawStyle\", \"overlayStyle\"], [\"class\", \"geometry-type-toggle\", 4, \"ngIf\"], [\"class\", \"draw-guide-field\", 4, \"ngIf\"], [1, \"geometry-type-toggle\"], [3, \"disabled\", \"ngModel\", \"ngModelChange\"], [\"value\", \"Point\", 3, \"disabled\"], [\"value\", \"LineString\", 3, \"disabled\"], [\"value\", \"Polygon\", 3, \"disabled\"], [1, \"draw-guide-field\"], [\"matInput\", \"\", \"type\", \"number\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"matPrefix\", \"\", \"svgIcon\", \"adjust\", 3, \"color\"], [\"matSuffix\", \"\", 1, \"draw-guide-units\"]], template: function GeometryFormFieldComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-geometry-form-field-input\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵtemplate(3, GeometryFormFieldComponent_div_3_Template, 12, 16, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(4, GeometryFormFieldComponent_mat_form_field_4_Template, 6, 6, \"mat-form-field\", 2);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"formControl\", ctx.formControl)(\"map\", ctx.map)(\"geometryType\", ɵngcc0.ɵɵpipeBind1(1, 12, ctx.geometryType$))(\"drawGuide\", ɵngcc0.ɵɵpipeBind1(2, 14, ctx.drawGuide$))(\"measure\", ctx.measure)(\"drawControlIsActive\", ctx.drawControlIsActive)(\"freehandDrawIsActive\", ctx.freehandDrawIsActive)(\"controlOptions\", ctx.controlOptions)(\"drawStyle\", ctx.drawStyle)(\"overlayStyle\", ctx.overlayStyle);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.geometryTypeField);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.drawGuideField);\n    } }, directives: function () { return [GeometryFormFieldInputComponent, ɵngcc16.NgControlStatus, ɵngcc16.FormControlDirective, ɵngcc1.NgIf, ɵngcc23.MatButtonToggleGroup, ɵngcc16.NgModel, ɵngcc23.MatButtonToggle, ɵngcc14.MatFormField, ɵngcc19.MatInput, ɵngcc16.NumberValueAccessor, ɵngcc16.DefaultValueAccessor, ɵngcc4.MatIcon, ɵngcc14.MatPrefix, ɵngcc14.MatSuffix]; }, pipes: function () { return [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe]; }, styles: [\"[_nghost-%COMP%]{display:block}.draw-guide-field[_ngcontent-%COMP%], .geometry-type-toggle[_ngcontent-%COMP%], [_nghost-%COMP%]{width:100%}.geometry-type-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.draw-guide-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 10px}.draw-guide-units[_ngcontent-%COMP%]{padding:10px}\"], changeDetection: 0 });\nGeometryFormFieldComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef }\n];\nGeometryFormFieldComponent.propDecorators = {\n    formControl: [{ type: Input }],\n    map: [{ type: Input }],\n    geometryType: [{ type: Input }],\n    geometryTypeField: [{ type: Input }],\n    geometryTypes: [{ type: Input }],\n    drawGuideField: [{ type: Input }],\n    drawGuide: [{ type: Input }],\n    drawGuidePlaceholder: [{ type: Input }],\n    measure: [{ type: Input }],\n    controlOptions: [{ type: Input }],\n    drawStyle: [{ type: Input }],\n    overlayStyle: [{ type: Input }]\n};\nGeometryFormFieldComponent = __decorate([\n    IgoFormFieldComponent('geometry'),\n    __metadata(\"design:paramtypes\", [ChangeDetectorRef])\n], GeometryFormFieldComponent);\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MetadataService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MetadataButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-metadata-button',\n                template: \"<button\\n  *ngIf=\\\"options && options.metadata && options.metadata.url\\\"\\n  mat-icon-button\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"'igo.geo.metadata.show' | translate\\\"\\n  [color]=\\\"color\\\"\\n  (click)=\\\"openMetadata(options.metadata)\\\">\\n  <mat-icon svgIcon=\\\"information-outline\\\"></mat-icon>\\n</button>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: MetadataService }]; }, { layer: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoMetadataModule, { declarations: function () { return [MetadataButtonComponent]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        IgoLanguageModule]; }, exports: function () { return [MetadataButtonComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoMetadataModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    IgoLanguageModule\n                ],\n                exports: [MetadataButtonComponent],\n                declarations: [MetadataButtonComponent]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WFSService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.HttpClient }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CapabilitiesService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.HttpClient }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ProjectionService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc7.ConfigService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DataSourceService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: CapabilitiesService }, { type: OptionsService, decorators: [{\n                type: Optional\n            }] }, { type: WFSService }, { type: ɵngcc7.LanguageService }, { type: ɵngcc7.MessageService }, { type: ProjectionService }, { type: ɵngcc8.AuthInterceptor }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OptionsApiService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StyleService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: StyleService }, { type: DataSourceService }, { type: ɵngcc8.AuthInterceptor, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapBrowserComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-browser',\n                template: \"<div [id]=\\\"id\\\" class=\\\"igo-map-browser-target\\\"></div>\\n<ng-content></ng-content>\\n\",\n                styles: [\":host{display:block;position:relative}.igo-map-browser-target,:host{height:100%;width:100%}:host ::ng-deep igo-zoom-button{bottom:5px;position:absolute;right:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){:host ::ng-deep igo-zoom-button{display:none}}:host ::ng-deep igo-offline-button{bottom:15px;position:absolute;right:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){:host ::ng-deep igo-offline-button{bottom:5px}}:host ::ng-deep igo-geolocate-button{bottom:5px;position:absolute;right:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){:host ::ng-deep igo-geolocate-button{bottom:5px}}:host ::ng-deep igo-rotation-button{position:absolute;right:5px;top:50px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){:host ::ng-deep igo-rotation-button{top:50px}}:host ::ng-deep igo-user-button{bottom:5px;position:absolute;right:55px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){:host ::ng-deep igo-user-button{right:95px}}:host ::ng-deep igo-baselayers-switcher{bottom:5px;left:5px;position:absolute}:host ::ng-deep .ol-attribution{background-color:hsla(0,0%,100%,0);bottom:5px;left:5px;margin-right:90px;padding:0;text-align:left;width:calc(100% - 100px)}:host ::ng-deep .ol-attribution.ol-logo-only{height:inherit}:host ::ng-deep .ol-attribution.ol-collapsed{background:none}:host ::ng-deep .ol-attribution.ol-collapsed button{transform:none}:host ::ng-deep .ol-attribution button{background-color:#fff;cursor:pointer;outline:none;transform:rotate(180deg)}:host ::ng-deep .ol-scale-line-inner{border-color:#000;box-shadow:0 1px 0 1px hsla(0,0%,100%,.6);color:#000;text-shadow:#fff -1px -1px 3px,#fff 1px -1px 3px,#fff -1px 1px 3px,#fff 1px 1px 4px}:host ::ng-deep .ol-scale-line{background-color:hsla(0,0%,100%,0);bottom:4px;left:50%;transform:translate(-50%)}:host ::ng-deep canvas{display:block}\"]\n            }]\n    }], function () { return [{ type: ɵngcc7.ActivityService }]; }, { view: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapOfflineDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoMapOffline]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent }, { type: ɵngcc7.NetworkService }, { type: ɵngcc7.MessageService }, { type: ɵngcc7.LanguageService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PointerPositionDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoPointerPosition]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent, decorators: [{\n                type: Self\n            }] }, { type: ɵngcc7.MediaService }]; }, { pointerPositionDelay: [{\n            type: Input\n        }], pointerPositionCoord: [{\n            type: Output\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ZoomButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-zoom-button',\n                template: \"<div class=\\\"igo-zoom-button-container\\\">\\n  <button\\n    mat-icon-button\\n    [matTooltip]=\\\"'igo.geo.mapButtons.zoomIn' | translate: {zoom: zoom + 1}\\\"\\n    matTooltipPosition=\\\"left\\\"\\n    [color]=\\\"color\\\"\\n    [disabled]=\\\"zoom >= maxZoom\\\"\\n    (click)=\\\"map.viewController.zoomIn()\\\">\\n    <mat-icon svgIcon=\\\"plus\\\"></mat-icon>\\n  </button>\\n\\n  <button\\n    mat-icon-button\\n    [matTooltip]=\\\"'igo.geo.mapButtons.zoomOut' | translate: {zoom: zoom - 1}\\\"\\n    matTooltipPosition=\\\"left\\\"\\n    [color]=\\\"color\\\"\\n    [disabled]=\\\"zoom <= minZoom\\\"\\n    (click)=\\\"map.viewController.zoomOut()\\\">\\n    <mat-icon svgIcon=\\\"minus\\\"></mat-icon>\\n  </button>\\n</div>\\n\",\n                styles: [\".igo-zoom-button-container{width:40px}.igo-zoom-button-container button{background-color:#fff}.igo-zoom-button-container button:hover{background-color:#efefef}.igo-zoom-button-container button:first-child{margin-bottom:2px}:host ::ng-deep button .mat-button-ripple-round,button{border-radius:0}\"]\n            }]\n    }], function () { return []; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GeolocateButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-geolocate-button',\n                template: \"<div class=\\\"igo-geolocate-button-container\\\">\\n  <button\\n    mat-icon-button\\n    [matTooltip]=\\\"'igo.geo.mapButtons.geolocate' | translate\\\"\\n    matTooltipPosition=\\\"left\\\"\\n    [color]=\\\"color\\\"\\n    (click)=\\\"map.geolocate()\\\">\\n    <mat-icon svgIcon=\\\"crosshairs-gps\\\"></mat-icon>\\n  </button>\\n</div>\\n\",\n                styles: [\".igo-geolocate-button-container{background-color:#fff;width:40px}.igo-geolocate-button-container:hover{background-color:#efefef}:host ::ng-deep button .mat-button-ripple-round,button{border-radius:0}\"]\n            }]\n    }], function () { return []; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OfflineButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-offline-button',\n                template: \"<div *ngIf=\\\"visible\\\" class=\\\"igo-user-button-container\\\">\\n  <div>\\n    <button\\n      mat-icon-button\\n      [matTooltip]=\\\"checked ? ('igo.geo.mapButtons.online' | translate): ('igo.geo.mapButtons.offline' | translate)\\\"\\n      matTooltipPosition=\\\"left\\\"\\n      [ngClass]=\\\"[btnStyle]\\\"\\n      [color]=\\\"checked ? color : [colorOff]\\\"\\n      (click)=\\\"onToggle()\\\"\\n      (click)=\\\"map.onOfflineToggle(check)\\\">\\n      <mat-icon svgIcon=\\\"wifi-strength-off\\\"></mat-icon>\\n    </button>\\n  </div>\\n</div>\",\n                styles: [\".baseStyle{background-color:#fff;width:40px}.baseStyle:hover{background-color:#efefef}.toggleStyle{background-color:#b9b9b9;width:40px}:host ::ng-deep button .mat-button-ripple-round,button{border-radius:0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc7.ConfigService }]; }, { change: [{\n            type: Output\n        }], check: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(BaseLayersSwitcherComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-baselayers-switcher',\n                template: \"<div *ngIf=\\\"baseLayers.length > 0\\\"\\n     class=\\\"igo-baselayers-switcher-container\\\"\\n     [ngClass]=\\\"{'container-expand': expand}\\\"\\n     [@baseLayerSwitcherState]=\\\"expand ? 'expand' : useStaticIcon ? 'collapseIcon' : 'collapseMap'\\\"\\n     (@baseLayerSwitcherState.start)=\\\"showButton=false\\\"\\n     (@baseLayerSwitcherState.done)=\\\"showButton=true\\\"\\n     (click)=\\\"collapseOrExpand()\\\">\\n\\n     <div *ngIf=\\\"useStaticIcon && !expand && showButton\\\" class=\\\"igo-baselayers-switcher-button-container\\\">\\n       <button\\n         mat-icon-button\\n         [matTooltip]=\\\"'igo.geo.mapButtons.baselayerSwitcher' | translate\\\"\\n         matTooltipPosition=\\\"right\\\"\\n         color=\\\"primary\\\">\\n         <mat-icon svgIcon=\\\"image-multiple\\\"></mat-icon>\\n       </button>\\n     </div>\\n\\n     <igo-mini-basemap *ngFor=\\\"let baseLayer of baseLayers; let i = index\\\"\\n       [map]=\\\"map\\\"\\n       [baseLayer]=\\\"baseLayer\\\"\\n       [title]=\\\"(baseLayers.length > 2 && !expand) ? ('igo.geo.baselayersSwitcher.title' | translate) : baseLayer.title\\\"\\n       [display]=\\\"expand || (i === 0 && !useStaticIcon)\\\"\\n       [disabled]=\\\"!expand && baseLayers.length > 1\\\">\\n     </igo-mini-basemap>\\n\\n    <div class=\\\"more-baselayers\\\">\\n      <mat-icon class=\\\"material-icons mat-icon mat-list-avatar\\\" color=\\\"primary\\\" svgIcon=\\\"menu-down\\\"></mat-icon>\\n    </div>\\n\\n</div>\\n\",\n                animations: [baseLayersSwitcherSlideInOut()],\n                styles: [\".igo-baselayers-switcher-container{height:auto;position:relative}.container-expand{border-width:0;overflow:hidden}.more-baselayers{background-color:#fff;cursor:pointer;height:20px;text-align:center;width:80px}.more-baselayers:hover{background-color:#efefef}.igo-baselayers-switcher-button-container{background-color:#fff;width:40px}.igo-baselayers-switcher-button-container:hover{background-color:#efefef}:host ::ng-deep button .mat-button-ripple-round,button{border-radius:0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc7.MediaService }]; }, { useStaticIcon: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MiniBaseMapComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-mini-basemap',\n                template: \"<div class=\\\"igo-mini-basemap-container\\\">\\n\\n  <div *ngIf=\\\"display\\\" (click)=\\\"changeBaseLayer(baseLayer)\\\">\\n    <igo-map-browser [map]=\\\"basemap\\\"></igo-map-browser>\\n    <div *ngIf='title' class='igo-mini-basemap-title'> {{title}} </div>\\n  </div>\\n\\n</div>\\n\",\n                styles: [\".igo-mini-basemap-container{background-color:hsla(0,0%,100%,.01);border:2px solid #fff;box-shadow:0 1px 4px rgba(0,0,0,.3);cursor:pointer;height:80px;margin-top:5px;width:80px}.igo-mini-basemap-container:hover .igo-mini-basemap-title{color:#000;text-shadow:0 0 5px #fff}.igo-mini-basemap-container>div{height:100%;width:100%}.igo-mini-basemap-title{align-items:flex-end;color:#fff;display:flex;height:76px;justify-content:center;position:relative;text-align:center;text-shadow:0 0 5px #000;top:-76px;vertical-align:bottom;white-space:normal;width:76px}\"]\n            }]\n    }], function () { return [{ type: LayerService }, { type: ɵngcc0.ApplicationRef }]; }, { map: [{\n            type: Input\n        }], baseLayer: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], display: [{\n            type: Input\n        }], title: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(RotationButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-rotation-button',\n                template: \"<div *ngIf=\\\"rotated && !showIfNoRotation\\\" class=\\\"igo-rotation-button-container\\\"\\n  [matTooltip]=\\\"rotated ? ('igo.geo.mapButtons.resetRotation' | translate): ('igo.geo.mapButtons.tipRotation' | translate)\\\"\\n  matTooltipPosition=\\\"left\\\">\\n  <button mat-icon-button matTooltipPosition=\\\"left\\\" [color]=\\\"color\\\" [disabled]=\\\"!rotated\\\"\\n    (click)=\\\"map.viewController.resetRotation()\\\">\\n    <mat-icon [ngStyle]=\\\"rotationStyle(map.viewController.getRotation())\\\" svgIcon=\\\"navigation\\\">\\n    </mat-icon>\\n  </button>\\n</div>\\n\\n<div *ngIf=\\\"showIfNoRotation\\\" class=\\\"igo-rotation-button-container\\\"\\n  [matTooltip]=\\\"rotated ? ('igo.geo.mapButtons.resetRotation' | translate): ('igo.geo.mapButtons.tipRotation' | translate)\\\"\\n  matTooltipPosition=\\\"left\\\">\\n  <button mat-icon-button matTooltipPosition=\\\"left\\\" [color]=\\\"color\\\" [disabled]=\\\"!rotated\\\"\\n    (click)=\\\"map.viewController.resetRotation()\\\">\\n    <mat-icon [ngStyle]=\\\"rotationStyle(map.viewController.getRotation())\\\" svgIcon=\\\"navigation\\\">\\n    </mat-icon>\\n  </button>\\n</div>\",\n                styles: [\".igo-rotation-button-container{background-color:#fff;width:40px}.igo-rotation-button-container:hover{background-color:#efefef}:host ::ng-deep button .mat-button-ripple-round,button{border-radius:0}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){:host ::ng-deep button .mat-button-ripple-round:disabled,button:disabled{display:none}}\"]\n            }]\n    }], function () { return []; }, { map: [{\n            type: Input\n        }], showIfNoRotation: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(QueryService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.HttpClient }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(QueryDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoQuery]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent, decorators: [{\n                type: Self\n            }] }, { type: QueryService }]; }, { queryFeatures: [{\n            type: Input\n        }], queryFeaturesHitTolerance: [{\n            type: Input\n        }], waitForAllQueries: [{\n            type: Input\n        }], query: [{\n            type: Output\n        }], queryFeaturesCondition: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(QuerySearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.ConfigService }, { type: ɵngcc7.LanguageService }, { type: ɵngcc7.MessageService }, { type: CapabilitiesService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogBrowserComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-browser',\n                template: \"<igo-list [navigation]=\\\"false\\\" [selection]=\\\"false\\\">\\n  <ng-template ngFor let-item [ngForOf]=\\\"store.view.all$() | async\\\">\\n    <ng-container *ngIf=\\\"isGroup(item)\\\">\\n      <igo-catalog-browser-group\\n        [catalog]=\\\"catalog\\\"\\n        [group]=\\\"item\\\"\\n        [state]=\\\"store.state\\\"\\n        [resolution]=\\\"resolution$ | async\\\"\\n        [catalogAllowLegend]=\\\"catalogAllowLegend\\\"\\n        [toggleCollapsed]=\\\"toggleCollapsedGroup\\\"\\n        (addedChange)=\\\"onGroupAddedChange($event)\\\"\\n        (layerAddedChange)=\\\"onLayerAddedChange($event)\\\">\\n      </igo-catalog-browser-group>\\n    </ng-container>\\n\\n    <ng-container *ngIf=\\\"isLayer(item)\\\">\\n      <igo-catalog-browser-layer\\n        igoListItem\\n        [layer]=\\\"item\\\"\\n        [resolution]=\\\"resolution$ | async\\\"\\n        [catalogAllowLegend]=\\\"catalogAllowLegend\\\"\\n        [added]=\\\"store.state.get(item).added\\\"\\n        (addedChange)=\\\"onLayerAddedChange($event)\\\">\\n      </igo-catalog-browser-layer>\\n    </ng-container>\\n  </ng-template>\\n</igo-list>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: LayerService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { catalogAllowLegend: [{\n            type: Input\n        }], toggleCollapsedGroup: [{\n            type: Input\n        }], catalog: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogBrowserLayerComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-browser-layer',\n                template: \"<mat-list-item>\\n  <mat-icon *ngIf=\\\"haveGroup()\\\" mat-list-avatar svgIcon=\\\"blank\\\"></mat-icon>\\n  <h4 mat-line matTooltipShowDelay=\\\"500\\\" [ngClass]=\\\"(catalogAllowLegend)?'igo-cataloglayer-title':''\\\" (click)=\\\"askForLegend($event)\\\" [matTooltip]=\\\"computeTitleTooltip()\\\">{{title}}</h4>\\n\\n  <igo-metadata-button [layer]=\\\"layer\\\"></igo-metadata-button>\\n\\n  <button\\n    (mouseenter)=\\\"onMouseEvent($event)\\\" (mouseleave)=\\\"onMouseEvent($event)\\\"\\n    mat-icon-button\\n    tooltip-position=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"computeTooltip() | translate\\\"\\n    [color]=\\\"(isPreview$ | async) ? '' : added ? 'warn' : ''\\\"\\n    (click)=\\\"onToggleClick($event)\\\">\\n    <mat-icon\\n       matBadge\\n       igoMatBadgeIcon=\\\"eye-off\\\"\\n       igoMatBadgeInverseColor=\\\"true\\\"\\n       [matBadgeHidden]=\\\"isInResolutionsRange()\\\"\\n       matBadgeDisabled=\\\"true\\\"\\n       matBadgeSize=\\\"small\\\"\\n       matBadgePosition=\\\"after\\\"\\n       [svgIcon]=\\\"(isPreview$ | async) ? 'plus' : added ? 'delete' : 'plus'\\\">\\n    </mat-icon>\\n  </button>\\n\\n</mat-list-item>\\n\\n<div #legend class=\\\"igo-cataloglayer-legend-container\\\">\\n  <igo-layer-legend\\n    *ngIf=\\\"(layerLegendShown$ | async) && (igoLayer$ | async) && catalogAllowLegend\\\"\\n    [layer]=\\\"igoLayer$ | async\\\">\\n  </igo-layer-legend>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".igo-cataloglayer-title{cursor:pointer}.igo-cataloglayer-legend-container{margin-left:40px;padding-left:18px;width:calc(100% - 18px)}\"]\n            }]\n    }], function () { return [{ type: LayerService }]; }, { catalogAllowLegend: [{\n            type: Input\n        }], added: [{\n            type: Input\n        }], addedChange: [{\n            type: Output\n        }], addedLayerIsPreview: [{\n            type: Output\n        }], resolution: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogBrowserGroupComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-browser-group',\n                template: \"<mat-list-item>\\n  <mat-icon\\n    mat-list-avatar\\n    svgIcon=\\\"chevron-up\\\"\\n    igoCollapse\\n    class=\\\"igo-chevron\\\"\\n    [target]=\\\"items\\\"\\n    [collapsed]=\\\"collapsed\\\"\\n    (toggle)=\\\"onToggleCollapsed($event)\\\">\\n  </mat-icon>\\n\\n  <h4 class=\\\"igo-catalog-group-title\\\" id=\\\"catalog-group-title\\\" mat-line matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"title\\\" (click)=\\\"onTitleClick()\\\">{{title}}</h4>\\n  <ng-container *ngIf=\\\"(added$ | async) && !(preview$ | async); else notadded\\\">\\n    <button\\n      mat-icon-button\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.geo.catalog.group.removeFromMap' | translate\\\"\\n      color=\\\"warn\\\"\\n      [disabled]=\\\"disabled$ | async\\\"\\n      (click)=\\\"onToggleClick()\\\">\\n      <mat-icon svgIcon=\\\"delete\\\"></mat-icon>\\n    </button>\\n  </ng-container>\\n\\n  <ng-template #notadded>\\n    <button\\n      mat-icon-button\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.geo.catalog.group.addToMap' | translate\\\"\\n      [disabled]=\\\"disabled$ | async\\\"\\n      (click)=\\\"onToggleClick()\\\">\\n      <mat-icon svgIcon=\\\"plus\\\"></mat-icon>\\n    </button>\\n  </ng-template>\\n</mat-list-item>\\n\\n<div #items>\\n  <ng-template ngFor let-item [ngForOf]=\\\"store.view.all$() | async\\\">\\n    <ng-container *ngIf=\\\"isGroup(item)\\\">\\n      <!-- todo: add display ans manage CatalogItemGroup -->\\n    </ng-container>\\n    <ng-container *ngIf=\\\"isLayer(item)\\\">\\n      <igo-catalog-browser-layer\\n        igoListItem\\n        [layer]=\\\"item\\\"\\n        [resolution]=\\\"resolution\\\"\\n        [catalogAllowLegend]=\\\"catalogAllowLegend\\\"\\n        [added]=\\\"state.get(item).added\\\"\\n        (addedLayerIsPreview)=\\\"onLayerPreview($event)\\\"\\n        (addedChange)=\\\"onLayerAddedChange($event)\\\">\\n      </igo-catalog-browser-layer>\\n    </ng-container>\\n  </ng-template>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".igo-catalog-group-title{cursor:pointer;opacity:.9}#catalog-group-title{font-weight:700}\"]\n            }]\n    }], function () { return []; }, { collapsed: [{\n            type: Input\n        }], catalogAllowLegend: [{\n            type: Input\n        }], toggleCollapsed: [{\n            type: Input\n        }], addedChange: [{\n            type: Output\n        }], layerAddedChange: [{\n            type: Output\n        }], catalog: [{\n            type: Input\n        }], group: [{\n            type: Input\n        }], resolution: [{\n            type: Input\n        }], state: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerListToolService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-item',\n                template: \"<mat-list-item class= \\\"igo-layer-list-item\\\">\\n  <mat-checkbox *ngIf=\\\"selectionMode\\\"\\n    class=\\\"layerCheck\\\"\\n    mat-list-icon\\n    (change)=\\\"check()\\\"\\n    [checked]=\\\"layerCheck\\\">\\n  </mat-checkbox>\\n  <h4 (click)=\\\"toggleLegendOnClick()\\\" matLine class=\\\"igo-layer-title\\\" [matTooltip]=\\\"tooltipText\\\" matTooltipShowDelay=\\\"500\\\">{{layer.title}}</h4>\\n\\n  <button *ngIf=\\\"!selectionMode\\\"\\n    mat-icon-button\\n    [color]=\\\"layer.visible ? 'primary' : 'default'\\\"\\n    collapsibleButton\\n    tooltip-position=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"layer.visible ?\\n                  ('igo.geo.layer.hideLayer' | translate) :\\n                  ('igo.geo.layer.showLayer' | translate)\\\"\\n    (click)=\\\"toggleVisibility()\\\">\\n    <mat-icon\\n      matBadge=\\\"?\\\"\\n      matBadgeColor=\\\"accent\\\"\\n      matBadgeSize=\\\"small\\\"\\n      matBadgePosition=\\\"after\\\"\\n      [matBadgeHidden]=\\\"queryBadgeHidden$ | async\\\"\\n      [ngClass]=\\\"{disabled: !(inResolutionRange$ | async)}\\\"\\n      [svgIcon]=\\\"layer.visible ? 'eye' : 'eye-off'\\\">\\n    </mat-icon>\\n  </button>\\n\\n  <button *ngIf=\\\"selectionMode\\\" class=\\\"selection-eye\\\"\\n  mat-icon-button\\n  [color]=\\\"layer.visible ? 'primary' : 'default'\\\"\\n  collapsibleButton\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"layer.visible ?\\n                ('igo.geo.layer.hideLayer' | translate) :\\n                ('igo.geo.layer.showLayer' | translate)\\\"\\n  (click)=\\\"toggleVisibility()\\\">\\n  <mat-icon\\n    matBadge=\\\"?\\\"\\n    matBadgeColor=\\\"accent\\\"\\n    matBadgeSize=\\\"small\\\"\\n    matBadgePosition=\\\"after\\\"\\n    [matBadgeHidden]=\\\"queryBadgeHidden$ | async\\\"\\n    [ngClass]=\\\"{disabled: !(inResolutionRange$ | async)}\\\"\\n    [svgIcon]=\\\"layer.visible ? 'eye' : 'eye-off'\\\">\\n  </mat-icon>\\n</button>\\n\\n  <button *ngIf=\\\"!selectionMode\\\"\\n    tooltip-position=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]= \\\"'igo.geo.layer.moreOptions' | translate\\\"\\n    mat-icon-button\\n    color=\\\"primary\\\"\\n    (click)=\\\"toggleLayerTool()\\\">\\n    <mat-icon svgIcon=\\\"dots-horizontal\\\"></mat-icon>\\n  </button>\\n</mat-list-item>\\n\\n<div #legend class=\\\"igo-layer-legend-container\\\">\\n  <igo-layer-legend\\n    *ngIf=\\\"showLegend$ | async\\\"\\n    [layer]=\\\"layer\\\"\\n    [updateLegendOnResolutionChange]=\\\"updateLegendOnResolutionChange\\\">\\n  </igo-layer-legend>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{overflow:hidden}mat-list-item ::ng-deep .mat-list-item-content .layerCheck{align-self:baseline;padding-right:0;width:16px}.igo-layer-list-item{clear:both;height:46px}.igo-layer-title{cursor:pointer}.igo-layer-legend-container{padding-left:18px;width:calc(100% - 18px)}mat-icon.disabled{color:rgba(0,0,0,.38)}mat-icon[matBadge] ::ng-deep .mat-badge-content{font-size:12px}.selection-eye{padding-right:45px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc7.NetworkService }, { type: ɵngcc0.Renderer2 }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.ChangeDetectorRef }]; }, { toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendIfVisible: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], orderable: [{\n            type: Input\n        }], lowerDisabled: [{\n            type: Input\n        }], raiseDisabled: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }], action: [{\n            type: Output\n        }], checkbox: [{\n            type: Output\n        }], activeLayer: [{\n            type: Input\n        }], selectAll: [{\n            type: Input\n        }], layerCheck: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }], selectionMode: [{\n            type: Input\n        }], changeDetection: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerLegendComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-legend',\n                template: \"<ng-container *ngIf=\\\"legendItems$ | async as items\\\">\\n  <ng-container *ngIf=\\\"items.length; else noItems\\\">\\n    <ng-container *ngFor=\\\"let item of items.slice().reverse()\\\" #renderedLegends >\\n      <mat-list-item *ngIf=\\\"item.title\\\">\\n        <mat-icon\\n          id=\\\"legend-toggle\\\"\\n          class=\\\"igo-chevron\\\"\\n          mat-list-avatar\\n          igoCollapse\\n          [target]=\\\"legend\\\"\\n          [collapsed]=\\\"(item.collapsed)\\\"\\n          (toggle)=\\\"toggleLegendItem($event, item)\\\"\\n          svgIcon=\\\"chevron-up\\\">\\n        </mat-icon>\\n        <h4 matLine>{{computeItemTitle(item) | async}} </h4>\\n      </mat-list-item>  \\n      <div #legend class=\\\"igo-layer-legend\\\" [ngClass]=\\\"{'with-title': item.title}\\\">\\n        <div *ngIf=\\\"currentStyle !== undefined\\\">\\n            <mat-form-field>\\n              <mat-select tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n                [matTooltip]=\\\"'igo.geo.layer.legend.selectStyle' | translate\\\" [(ngModel)]=\\\"currentStyle\\\"\\n                (selectionChange)=\\\"onChangeStyle()\\\">\\n                <mat-option *ngFor=\\\"let style of styles\\\" [value]=\\\"style.name\\\">{{style.title}}</mat-option>\\n              </mat-select>\\n          </mat-form-field>\\n        </div>\\n        <div *ngIf=\\\"!(item.collapsed)\\\">\\n          <div *ngIf=\\\"item.url\\\">\\n            <img #renderedLegend id=\\\"{{item.title}}\\\" (load)=\\\"onLoadImage(item.title)\\\"\\n              src=\\\"{{(item.url | secureImage) |\\u00A0async}}\\\"\\n              alt=\\\"{{'igo.geo.layer.legend.loadingLegendText' | translate}}\\\"\\n            >\\n            <small *ngIf=\\\"imagesHeight[item.title]<16\\\">\\n                {{'igo.geo.layer.legend.noLegendScale' | translate}}\\n            </small>\\n          </div>\\n          <div\\n            [ngStyle]=\\\"item.style\\\"\\n            [innerHTML]=\\\"item.html\\\"\\n            *ngIf=\\\"item.html\\\">\\n          </div>\\n        </div>\\n      </div>\\n    </ng-container>\\n  </ng-container>\\n\\n  <ng-template #noItems>\\n    <small>\\n      {{'igo.geo.layer.legend.noLegendText' | translate}}\\n    </small>\\n  </ng-template>\\n\\n</ng-container>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".igo-layer-legend.with-title{padding-left:18px}img:after{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite;background-color:#fff;border:3px solid #f3f3f3;border-radius:50%;content:\\\" \\\";float:left;height:17px;position:relative;right:19px;top:-3px;width:17px}@-moz-document url-prefix(){img:after{margin-left:19px}}@-webkit-keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}\"]\n            }]\n    }], function () { return [{ type: CapabilitiesService }, { type: ɵngcc7.LanguageService }]; }, { updateLegendOnResolutionChange: [{\n            type: Input\n        }], renderedLegends: [{\n            type: ViewChildren,\n            args: ['renderedLegend']\n        }], layer: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-list',\n                template: \"<igo-list #igoList [ngClass]=\\\"(layerTool || selection) ? 'igo-list-min-height': 'igo-list-max-height'\\\" [navigation]=\\\"false\\\" [selection]=\\\"false\\\">\\n  <igo-layer-list-tool *ngIf=\\\"showToolbar$ | async\\\"\\n      floatLabel=\\\"auto\\\"\\n      [layersAreAllVisible]=\\\"layersAreAllVisible\\\"\\n      [term]=\\\"layerFilterAndSortOptions.keyword\\\"\\n      [onlyVisible]=\\\"layerFilterAndSortOptions.onlyVisible\\\"\\n      [sortAlpha]=\\\"layerFilterAndSortOptions.sortAlpha\\\"\\n      (appliedFilterAndSort)=\\\"onAppliedFilterAndSortChange($event)\\\"\\n      (selection)=\\\"toggleSelectionMode($event)\\\">\\n    </igo-layer-list-tool>\\n\\n  <ng-template ngFor let-layer let-i=\\\"index\\\" [ngForOf]=\\\"layers$ | async\\\">\\n    <igo-layer-item *ngIf=\\\"!(excludeBaseLayers && layer.baseLayer)\\\"\\n        igoListItem\\n        [layer]=\\\"layer\\\"\\n        [activeLayer]=\\\"activeLayer\\\"\\n        [orderable]=\\\"orderable && !layer.baseLayer\\\"\\n        [lowerDisabled]=\\\"getLowerLayer().id === layer.id\\\"\\n        [raiseDisabled]=\\\"getUpperLayer().id === layer.id\\\"\\n        [queryBadge]=\\\"queryBadge\\\"\\n        [expandLegendIfVisible]=\\\"expandLegendOfVisibleLayers\\\"\\n        [updateLegendOnResolutionChange]=\\\"updateLegendOnResolutionChange\\\"\\n        [toggleLegendOnVisibilityChange]=\\\"toggleLegendOnVisibilityChange\\\"\\n        [selectionMode]=\\\"selection\\\"\\n        [selectAll]=\\\"selectAllCheck\\\"\\n        [layerCheck]=\\\"layer.options.check\\\"\\n        [changeDetection]=\\\"layerItemChangeDetection$\\\"\\n        (action)=\\\"toggleLayerTool($event)\\\"\\n        (checkbox)=\\\"layersCheck($event)\\\">\\n    </igo-layer-item>\\n  </ng-template>\\n</igo-list>\\n\\n<igo-panel *ngIf=\\\"!selection && layerTool && activeLayer\\\" class=\\\"igo-layer-actions-container\\\" [title]=\\\"activeLayer.title\\\">\\n\\n  <div class=\\\"igo-layer-button-group\\\">\\n  <ng-container igoLayerItemToolbar\\n    [ngTemplateOutlet]=\\\"templateLayerToolbar\\\"\\n    [ngTemplateOutletContext]=\\\"{layer: activeLayer}\\\">\\n  </ng-container>\\n\\n  <ng-content select=\\\"[igoLayerItemToolbar]\\\"></ng-content>\\n    <!-- <label>{{ 'igo.geo.layer.opacity' | translate }} </label> -->\\n    <button\\n      color=\\\"primary\\\"\\n      mat-icon-button\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [matMenuTriggerFor]=\\\"opacityMenu\\\"\\n      [matTooltip]=\\\"'igo.geo.layer.opacity' | translate\\\">\\n      <mat-icon [matBadge]=\\\"badgeOpacity\\\" matBadgeColor=\\\"primary\\\" matBadgeSize=\\\"medium\\\" svgIcon=\\\"opacity\\\"></mat-icon>\\n    </button>\\n\\n    <mat-menu #opacityMenu=\\\"matMenu\\\" class=\\\"mat-menu-opacity-slider\\\">\\n      <div id=\\\"opacity-menu\\\">\\n        <mat-slider\\n          id=\\\"opacity-slider\\\"\\n          color=\\\"primary\\\"\\n          thumbLabel\\n          tickInterval=\\\"5\\\"\\n          step=\\\"5\\\"\\n          [min]=\\\"0\\\"\\n          [max]=\\\"100\\\"\\n          [(ngModel)]=\\\"opacity\\\"\\n          [matTooltip]=\\\"'igo.geo.layer.opacity' | translate\\\"\\n          (click) = \\\"$event.stopPropagation()\\\"\\n          matTooltipShowDelay=\\\"500\\\"\\n          tooltip-position=\\\"below\\\">\\n        </mat-slider>\\n      </div>\\n    </mat-menu>\\n\\n    <button\\n      color=\\\"primary\\\"\\n      mat-icon-button\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"(sortAlpha || onlyVisible || keyword) ? ('igo.geo.layer.filterRaiseLayer' | translate) : ('igo.geo.layer.raiseLayer' | translate)\\\"\\n      [disabled]=\\\"raiseDisabled\\\"\\n      (click)=\\\"activeLayer.map.raiseLayer(activeLayer)\\\">\\n      <mat-icon [matBadge]=\\\"(sortAlpha || onlyVisible || keyword) ? '!' : ''\\\" matBadgeColor=\\\"warn\\\" matBadgeSize=\\\"medium\\\" [matBadgeHidden]=\\\"raiseDisabled\\\"\\n                svgIcon=\\\"arrow-up\\\"></mat-icon>\\n    </button>\\n\\n    <button\\n      mat-icon-button\\n      color=\\\"primary\\\"\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"(sortAlpha || onlyVisible || keyword) ? ('igo.geo.layer.filterLowerLayer' | translate) : ('igo.geo.layer.lowerLayer' | translate)\\\"\\n      [disabled]=\\\"lowerDisabled\\\"\\n      (click)=\\\"activeLayer.map.lowerLayer(activeLayer)\\\">\\n      <mat-icon [matBadge]=\\\"(sortAlpha || onlyVisible || keyword) ? '!' : ''\\\" matBadgeColor=\\\"warn\\\" matBadgeSize=\\\"medium\\\" [matBadgeHidden]=\\\"lowerDisabled\\\"\\n                svgIcon=\\\"arrow-down\\\"></mat-icon>\\n    </button>\\n\\n    <button\\n      mat-icon-button\\n      color=\\\"warn\\\"\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.geo.layer.removeLayer' | translate\\\"\\n      (click)=\\\"removeLayers()\\\">\\n      <mat-icon svgIcon=\\\"delete\\\"></mat-icon>\\n    </button>\\n  </div>\\n</igo-panel>\\n\\n<igo-panel *ngIf=\\\"selection && layers.length > 0\\\" class=\\\"igo-layer-actions-container\\\" [title]=\\\"'igo.geo.layer.tools' | translate\\\">\\n  <div class=\\\"igo-layer-button-group\\\">\\n\\n    <button\\n      mat-stroked-button\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [disabled]=\\\"layers.length === 0\\\"\\n      [matTooltip]=\\\"selectAllCheck ?\\n                    ('igo.geo.layer.deselectAll' | translate) :\\n                    ('igo.geo.layer.selectAll' | translate)\\\"\\n      (click)=\\\"selectAll()\\\">\\n      {{selectAllCheck ? ('igo.geo.layer.deselectAll' | translate) :\\n                    ('igo.geo.layer.selectAll' | translate)}}\\n    </button>\\n\\n    <!-- <label>{{ 'igo.geo.layer.opacity' | translate }} </label> -->\\n    <button\\n      color=\\\"primary\\\"\\n      mat-icon-button\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [disabled]=\\\"layersChecked.length === 0\\\"\\n      [matMenuTriggerFor]=\\\"opacityMenu\\\"\\n      [matTooltip]=\\\"'igo.geo.layer.opacity' | translate\\\">\\n      <mat-icon svgIcon=\\\"opacity\\\"></mat-icon>\\n    </button>\\n\\n    <mat-menu #opacityMenu=\\\"matMenu\\\"  class=\\\"mat-menu-opacity-slider\\\">\\n      <div id=\\\"opacity-menu\\\">\\n        <mat-slider *ngIf=\\\"layersChecked.length\\\"\\n          id=\\\"opacity-slider\\\"\\n          color=\\\"primary\\\"\\n          thumbLabel\\n          tickInterval=\\\"5\\\"\\n          step=\\\"5\\\"\\n          [min]=\\\"0\\\"\\n          [max]=\\\"100\\\"\\n          [(ngModel)]=\\\"checkOpacity\\\"\\n          [matTooltip]=\\\"'igo.geo.layer.opacity' | translate\\\"\\n          matTooltipShowDelay=\\\"500\\\"\\n          tooltip-position=\\\"below\\\"\\n          (click) = \\\"$event.stopPropagation()\\\">\\n        </mat-slider>\\n      </div>\\n    </mat-menu>\\n\\n    <button\\n      color=\\\"primary\\\"\\n      mat-icon-button\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"(sortAlpha || onlyVisible || keyword) ? ('igo.geo.layer.filterRaiseLayer' | translate) : ('igo.geo.layer.raiseLayer' | translate)\\\"\\n      [disabled]=\\\"raiseDisabledSelection\\\"\\n      (click)=\\\"raiseLayers(layersChecked)\\\">\\n      <mat-icon [matBadge]=\\\"(sortAlpha || onlyVisible || keyword) ? '!' : ''\\\" matBadgeColor=\\\"warn\\\" matBadgeSize=\\\"medium\\\" [matBadgeHidden]=\\\"raiseDisabledSelection\\\"\\n                svgIcon=\\\"arrow-up\\\"></mat-icon>\\n    </button>\\n\\n    <button\\n      mat-icon-button\\n      color=\\\"primary\\\"\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"(sortAlpha || onlyVisible || keyword) ? ('igo.geo.layer.filterLowerLayer' | translate) : ('igo.geo.layer.lowerLayer' | translate)\\\"\\n      [disabled]=\\\"lowerDisabledSelection\\\"\\n      (click)=\\\"lowerLayers(layersChecked)\\\">\\n      <mat-icon [matBadge]=\\\"(sortAlpha || onlyVisible || keyword) ? '!' : ''\\\" matBadgeColor=\\\"warn\\\" matBadgeSize=\\\"medium\\\" [matBadgeHidden]=\\\"lowerDisabledSelection\\\"\\n                svgIcon=\\\"arrow-down\\\"></mat-icon>\\n    </button>\\n\\n    <button\\n      mat-icon-button\\n      color=\\\"primary\\\"\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [disabled]=\\\"layersChecked.length === 0\\\"\\n      [matTooltip]=\\\"statusSelectedLayersCheck === 'ALL_HIDDEN' ? ('igo.geo.layer.showSelectedLayers' | translate) : ('igo.geo.layer.hideSelectedLayers' | translate)\\\"\\n      (click)=\\\"toggleVisibility(layersChecked)\\\">\\n      <mat-icon\\t[svgIcon]=\\\"(statusSelectedLayersCheck === 'ALL_HIDDEN') ? 'eye-off' : 'eye'\\\"></mat-icon>\\n    </button>\\n\\n    <button\\n      mat-icon-button\\n      color=\\\"warn\\\"\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [disabled]=\\\"layersChecked.length === 0\\\"\\n      [matTooltip]=\\\"'igo.geo.layer.removeLayer' | translate\\\"\\n      (click)=\\\"removeLayers(layersChecked)\\\">\\n      <mat-icon svgIcon=\\\"delete\\\"></mat-icon>\\n    </button>\\n\\n  </div>\\n</igo-panel>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host .igo-list-min-height{height:calc(100% - 91px);padding-top:8px}:host .igo-list-max-height{padding-top:8px}mat-form-field.inputFilter{max-width:200px;width:calc(100% - 100px)}.igo-layer-actions-container{padding-left:5px;width:calc(100% - 5px)}.igo-layer-actions-container>div{text-align:center}#opacity-slider{float:left;left:10px;min-width:unset;top:10px;width:110px}.igo-layer-button-group{display:flex;float:right;padding-top:5px}:host igo-panel{height:unset}#opacity-menu{height:50px;max-width:unset;width:132px}#opacity-menu .mat-menu-content:not(:empty){padding-top:20px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { layersAreAllVisible: [{\n            type: Input\n        }], ogcButton: [{\n            type: Input\n        }], timeButton: [{\n            type: Input\n        }], floatLabel: [{\n            type: Input\n        }], layerFilterAndSortOptions: [{\n            type: Input\n        }], excludeBaseLayers: [{\n            type: Input\n        }], toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendOfVisibleLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }], appliedFilterAndSort: [{\n            type: Output\n        }], map: [{\n            type: Input\n        }], layers: [{\n            type: Input\n        }], templateLayerToolbar: [{\n            type: ContentChild,\n            args: ['igoLayerItemToolbar', /* TODO: add static flag */ {}]\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerListToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-list-tool',\n                template: \"  <mat-list-item>\\n      <mat-form-field class=\\\"inputFilter\\\" [floatLabel]=\\\"floatLabel\\\">\\n        <input\\n          matInput\\n          [placeholder]=\\\"'igo.geo.layer.filterPlaceholder' | translate\\\"\\n          [matTooltip]=\\\"'igo.geo.layer.subsetLayersListKeyword' | translate\\\"\\n          matTooltipShowDelay=\\\"500\\\"\\n          type=\\\"text\\\" [(ngModel)]=\\\"term\\\">\\n        <button\\n          mat-button\\n          *ngIf=\\\"term\\\"\\n          matSuffix\\n          mat-icon-button\\n          aria-label=\\\"Clear\\\"\\n          color=\\\"warn\\\"\\n          (click)=\\\"clearTerm()\\\">\\n          <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n        </button>\\n      </mat-form-field>\\n\\n      <div [matTooltip]=\\\"sortAlpha ?\\n      ('igo.geo.layer.sortMapOrder' | translate) :\\n      ('igo.geo.layer.sortAlphabetically' | translate)\\\" matTooltipShowDelay=\\\"500\\\">\\n        <button [color]=\\\"sortAlpha ? 'warn' : 'primary'\\\" mat-icon-button (click)=\\\"toggleSortAlpha()\\\">\\n          <mat-icon [svgIcon]=\\\"sortAlpha ? 'sort-ascending' : 'sort-alphabetical-ascending'\\\"></mat-icon>\\n        </button>\\n      </div>\\n\\n       <div [matTooltip]=\\\"onlyVisible ?\\n        ('igo.geo.layer.resetLayersList' | translate) :\\n        ('igo.geo.layer.subsetLayersListOnlyVisible' | translate)\\\" matTooltipShowDelay=\\\"500\\\">\\n         <button mat-icon-button [disabled]=\\\"layersAreAllVisible && !onlyVisible\\\"\\n           [color]=\\\"onlyVisible ? 'warn' : 'primary'\\\" (click)=\\\"toggleOnlyVisible()\\\">\\n           <mat-icon\\n             matBadge\\n             igoMatBadgeIcon=\\\"eye\\\"\\n             igoMatBadgeInverseColor=\\\"true\\\"\\n             igoMatBadgeInheritColor=\\\"true\\\"\\n             [svgIcon]=\\\"onlyVisible ? 'filter-remove' : 'filter'\\\">\\n           </mat-icon>\\n         </button>\\n       </div>\\n\\n       <div [matTooltip]=\\\"selectionMode ?\\n        ('igo.geo.layer.deactivateSelectionMode' | translate) :\\n        ('igo.geo.layer.activateSelectionMode' | translate)\\\" matTooltipShowDelay=\\\"500\\\">\\n         <button mat-icon-button\\n           color=\\\"primary\\\" (click)=\\\"toggleSelectionMode()\\\">\\n           <mat-icon [svgIcon]=\\\"selectionMode ? 'checkbox-multiple-marked-outline' : 'checkbox-multiple-blank-outline'\\\"></mat-icon>\\n         </button>\\n       </div>\\n\\n</mat-list-item>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"mat-form-field.inputFilter{max-width:200px;width:calc(100% - 100px)}\"]\n            }]\n    }], function () { return []; }, { layersAreAllVisible: [{\n            type: Input\n        }], floatLabel: [{\n            type: Input\n        }], appliedFilterAndSort: [{\n            type: Output\n        }], selection: [{\n            type: Output\n        }], onlyVisible: [{\n            type: Input\n        }], sortAlpha: [{\n            type: Input\n        }], term: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoLayerListBinding]'\n            }]\n    }], function () { return [{ type: LayerListComponent, decorators: [{\n                type: Self\n            }] }, { type: MapService }, { type: ɵngcc7.RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerLegendListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-legend-list',\n                template: \"\\n<mat-slide-toggle \\ntooltip-position=\\\"above\\\"\\nmatTooltipShowDelay=\\\"500\\\"\\n[matTooltip]=\\\"'igo.geo.layer.legend.showAll' | translate\\\"\\n[checked]=\\\"showAllLegendsValue\\\" class=\\\"mat-typography\\\" \\n*ngIf=\\\"(layersInUi$ | async).length && allowShowAllLegends\\\" [labelPosition]=\\\"'before'\\\" (change)=\\\"toggleShowAllLegends($event.checked)\\\">\\n  {{'igo.geo.layer.legend.showAll' | translate}}\\n</mat-slide-toggle>\\n<mat-divider *ngIf=\\\"(layersInUi$ | async).length && allowShowAllLegends\\\"></mat-divider>\\n<igo-list [navigation]=\\\"false\\\" [selection]=\\\"false\\\">\\n  <ng-template ngFor let-layer let-i=\\\"index\\\" [ngForOf]=\\\"layers$ | async\\\">\\n    <igo-layer-legend-item *ngIf=\\\"!(excludeBaseLayers && layer.baseLayer)\\\"\\n        igoListItem [layer]=\\\"layer\\\"\\n        [updateLegendOnResolutionChange]=\\\"updateLegendOnResolutionChange\\\">\\n    </igo-layer-legend-item>\\n  </ng-template>\\n</igo-list>\\n\\n<p class=\\\"layers-empty mat-typography\\\" \\n  *ngIf=\\\"(layersInUi$ | async).length && !(hasVisibleOrInRangeLayers$ | async) && !(hasVisibleAndNotInRangeLayers$ | async) && allowShowAllLegends\\\">\\n  {{'igo.geo.layer.legend.noLayersVisibleWithShowAllButton' | translate}} \\n</p>\\n<p class=\\\"layers-empty mat-typography\\\" \\n  *ngIf=\\\"(layersInUi$ | async).length && !(hasVisibleOrInRangeLayers$ | async) && (hasVisibleAndNotInRangeLayers$ | async) && allowShowAllLegends\\\">\\n  {{'igo.geo.layer.legend.noLayersVisibleWithShowAllButtonButZoom' | translate}} \\n</p>\\n<p class=\\\"layers-empty mat-typography\\\"\\n  *ngIf=\\\"(layersInUi$ | async).length && !(hasVisibleOrInRangeLayers$ | async) && !(hasVisibleAndNotInRangeLayers$ | async) && !allowShowAllLegends\\\">\\n  {{'igo.geo.layer.legend.noLayersVisible' | translate}} \\n</p>\\n<p class=\\\"layers-empty mat-typography\\\"\\n  *ngIf=\\\"(layersInUi$ | async).length && !(hasVisibleOrInRangeLayers$ | async) && (hasVisibleAndNotInRangeLayers$ | async) && !allowShowAllLegends\\\">\\n  {{'igo.geo.layer.legend.noLayersVisibleButZoom' | translate}} \\n</p>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"mat-slide-toggle{margin:10px;width:100%}mat-slide-toggle ::ng-deep .mat-slide-toggle-content{width:calc(100% - 60px)}igo-list{display:contents}.layers-empty{margin:10px;text-align:justify}\"]\n            }]\n    }], function () { return []; }, { excludeBaseLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], allowShowAllLegends: [{\n            type: Input\n        }], showAllLegendsValue: [{\n            type: Input\n        }], allLegendsShown: [{\n            type: Output\n        }], layers: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerLegendListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoLayerLegendListBinding]'\n            }]\n    }], function () { return [{ type: LayerLegendListComponent, decorators: [{\n                type: Self\n            }] }, { type: MapService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TrackFeatureButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-track-feature-button',\n                template: \"<button *ngIf=\\\"options.trackFeature\\\"\\n  mat-icon-button\\n  collapsibleButton\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"'igo.geo.layer.trackFeature' | translate\\\"\\n  [color]=\\\"color\\\"\\n  (click)=\\\"toggleTrackFeature()\\\">\\n  <mat-icon svgIcon=\\\"crosshairs-gps\\\"></mat-icon>\\n</button>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, { trackFeature: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerLegendItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-layer-legend-item',\n                template: \"<mat-list-item class= \\\"igo-layer-list-item\\\">\\n  <h4 matLine class=\\\"igo-layer-title\\\" [matTooltip]=\\\"tooltipText\\\" matTooltipShowDelay=\\\"500\\\">{{layer.title}}</h4>\\n</mat-list-item>\\n\\n<div #legend class=\\\"igo-layer-legend-container\\\">\\n  <igo-layer-legend\\n    [layer]=\\\"layer\\\"\\n    [updateLegendOnResolutionChange]=\\\"updateLegendOnResolutionChange\\\">\\n  </igo-layer-legend>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{overflow:hidden}.igo-layer-list-item{clear:both;height:46px}.igo-layer-legend-container{padding-left:18px;width:calc(100% - 18px)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc7.NetworkService }]; }, { updateLegendOnResolutionChange: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoLayerModule, { declarations: function () { return [LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent]; }, imports: function () { return [MatInputModule,\n        MatFormFieldModule,\n        CommonModule,\n        FormsModule,\n        MatDividerModule,\n        MatMenuModule,\n        MatIconModule,\n        MatButtonModule,\n        MatSlideToggleModule,\n        MatSelectModule,\n        MatTooltipModule,\n        MatListModule,\n        MatSliderModule,\n        MatBadgeModule,\n        MatCheckboxModule,\n        IgoLanguageModule,\n        IgoListModule,\n        IgoCollapsibleModule,\n        IgoImageModule,\n        IgoPanelModule,\n        IgoMatBadgeIconModule]; }, exports: function () { return [LayerItemComponent, LayerLegendItemComponent, LayerLegendComponent, LayerListComponent, LayerListToolComponent, LayerLegendListComponent, LayerListBindingDirective, LayerLegendListBindingDirective, TrackFeatureButtonComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoLayerModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    MatInputModule,\n                    MatFormFieldModule,\n                    CommonModule,\n                    FormsModule,\n                    MatDividerModule,\n                    MatMenuModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatSlideToggleModule,\n                    MatSelectModule,\n                    MatTooltipModule,\n                    MatListModule,\n                    MatSliderModule,\n                    MatBadgeModule,\n                    MatCheckboxModule,\n                    IgoLanguageModule,\n                    IgoListModule,\n                    IgoCollapsibleModule,\n                    IgoImageModule,\n                    IgoPanelModule,\n                    IgoMatBadgeIconModule\n                ],\n                exports: [\n                    LayerItemComponent,\n                    LayerLegendItemComponent,\n                    LayerLegendComponent,\n                    LayerListComponent,\n                    LayerListToolComponent,\n                    LayerLegendListComponent,\n                    LayerListBindingDirective,\n                    LayerLegendListBindingDirective,\n                    TrackFeatureButtonComponent\n                ],\n                declarations: [\n                    LayerItemComponent,\n                    LayerLegendItemComponent,\n                    LayerLegendComponent,\n                    LayerListComponent,\n                    LayerListToolComponent,\n                    LayerLegendListComponent,\n                    LayerListBindingDirective,\n                    LayerLegendListBindingDirective,\n                    TrackFeatureButtonComponent\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoCatalogBrowserModule, { declarations: function () { return [CatalogBrowserComponent, CatalogBrowserGroupComponent, CatalogBrowserLayerComponent]; }, imports: function () { return [CommonModule,\n        MatBadgeModule,\n        MatButtonModule,\n        MatIconModule,\n        MatListModule,\n        MatTooltipModule,\n        IgoMatBadgeIconModule,\n        IgoLanguageModule,\n        IgoListModule,\n        IgoCollapsibleModule, IgoMetadataModule, IgoLayerModule]; }, exports: function () { return [CatalogBrowserComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoCatalogBrowserModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatBadgeModule,\n                    MatButtonModule,\n                    MatIconModule,\n                    MatListModule,\n                    MatTooltipModule,\n                    IgoMatBadgeIconModule,\n                    IgoLanguageModule,\n                    IgoListModule,\n                    IgoCollapsibleModule,\n                    IgoMetadataModule,\n                    IgoLayerModule\n                ],\n                exports: [\n                    CatalogBrowserComponent\n                ],\n                declarations: [\n                    CatalogBrowserComponent,\n                    CatalogBrowserGroupComponent,\n                    CatalogBrowserLayerComponent\n                ]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogLibaryComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-library',\n                template: \"<igo-list [navigation]=\\\"false\\\">\\n  <ng-template ngFor let-catalog [ngForOf]=\\\"store.view.all$() | async\\\">\\n    <igo-catalog-library-item\\n      igoListItem\\n      color=\\\"accent\\\"\\n      [map]=\\\"map\\\"\\n      [catalog]=\\\"catalog\\\"\\n      (select)=\\\"onCatalogSelect(catalog)\\\">\\n    </igo-catalog-library-item>\\n  </ng-template>\\n</igo-list>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { catalogSelectChange: [{\n            type: Output\n        }], store: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogLibaryItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-library-item',\n                template: \"<mat-list-item>\\n  <h4 mat-line>{{title}}</h4>\\n</mat-list-item>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], null, { catalog: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoCatalogLibraryModule, { declarations: function () { return [CatalogLibaryComponent, CatalogLibaryItemComponent]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        MatListModule,\n        MatTooltipModule,\n        IgoListModule]; }, exports: function () { return [CatalogLibaryComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoCatalogLibraryModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatListModule,\n                    MatTooltipModule,\n                    IgoListModule\n                ],\n                exports: [\n                    CatalogLibaryComponent\n                ],\n                declarations: [\n                    CatalogLibaryComponent,\n                    CatalogLibaryItemComponent\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoCatalogModule, { imports: function () { return [CommonModule,\n        MatBadgeModule,\n        MatIconModule,\n        MatListModule,\n        MatTooltipModule,\n        IgoMatBadgeIconModule,\n        IgoListModule,\n        IgoCollapsibleModule]; }, exports: function () { return [IgoCatalogBrowserModule, IgoCatalogLibraryModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoCatalogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatBadgeModule,\n                    MatIconModule,\n                    MatListModule,\n                    MatTooltipModule,\n                    IgoMatBadgeIconModule,\n                    IgoListModule,\n                    IgoCollapsibleModule\n                ],\n                exports: [\n                    IgoCatalogBrowserModule,\n                    IgoCatalogLibraryModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoDataSourceModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                exports: [],\n                declarations: []\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FilterableDataSourcePipe, [{\n        type: Pipe,\n        args: [{\n                name: 'filterableDataSource'\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TimeFilterService, [{\n        type: Injectable\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OGCFilterService, [{\n        type: Injectable\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SpatialFilterService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.LanguageService }, { type: ɵngcc7.ConfigService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DownloadService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc7.MessageService }, { type: ɵngcc7.LanguageService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DownloadButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-download-button',\n                template: \"<button\\n  *ngIf=\\\"options && options.download && (options.download['dynamicUrl'] || options.download['url']) \\\"\\n  mat-icon-button\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"'igo.geo.download.action' | translate\\\"\\n  [color]=\\\"color\\\"\\n  (click)=\\\"openDownload(layer)\\\">\\n  <mat-icon svgIcon=\\\"download\\\"></mat-icon>\\n</button>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: DownloadService }]; }, { layer: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoDownloadModule, { declarations: function () { return [DownloadButtonComponent]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        IgoLanguageModule]; }, exports: function () { return [DownloadButtonComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoDownloadModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    IgoLanguageModule\n                ],\n                exports: [DownloadButtonComponent],\n                declarations: [DownloadButtonComponent]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FeatureDetailsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-feature-details',\n                template: \"<table class=\\\"igo-striped mat-typography\\\" *ngIf=\\\"ready && feature && isObject(feature.properties) && feature.properties.target !== 'iframe'\\\">\\n  <tbody>\\n    <tr *ngFor=\\\"let property of filterFeatureProperties(feature) | keyvalue\\\">\\n\\n      <td *ngIf=\\\"feature.properties.target === '_blank' && property.key === 'url'\\\">\\n        <mat-icon mat-list-avatar svgIcon=\\\"{{icon}}\\\"></mat-icon>\\n      </td>\\n\\n      <td *ngIf=\\\"feature.properties.target === '_blank' && property.key === 'url'\\\">\\n        <a href=\\\"{{property.value}}\\\" target='_blank'> {{ 'igo.geo.targetHtmlUrl' | translate }} {{title}}</a>\\n      </td>\\n\\n      <td id=\\\"keyValue\\\" *ngIf=\\\"feature.properties.target === undefined\\\">\\n        {{property.key }}\\n      </td>\\n\\n      <td *ngIf=\\\"feature.properties.target === undefined && !isObject(property.value) && !isUrl(property.value)\\\" [innerHTML]=\\\"property.value\\\">\\n      </td>\\n\\n      <td *ngIf=\\\"feature.properties.target === undefined && !isObject(property.value) && isUrl(property.value)\\\">\\n        <a href=\\\"{{property.value}}\\\" target='_blank'>\\n          <img *ngIf=\\\"isImg(property.value);else notImg\\\" src=\\\"{{(property.value | secureImage) |\\u00A0async}}\\\" width=\\\"225\\\" heigth=\\\"auto\\\">\\n          <ng-template #notImg><span>{{ 'igo.geo.targetHtmlUrl' | translate }} </span></ng-template>\\n        </a>\\n      </td>\\n\\n      <td *ngIf=\\\"feature.properties.target === undefined && isObject(property.value)\\\" [innerHTML]=\\\"property.value | json\\\">\\n      </td>\\n\\n    </tr>\\n  </tbody>\\n</table>\\n\\n<iframe *ngIf=\\\"feature && isObject(feature.properties) && feature.properties.target === 'iframe'\\\" [src]=\\\"htmlSanitizer(feature.properties.url)\\\"></iframe>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"table{width:100%}table td{padding:5px}#keyValue{width:30%}table ::ng-deep .routing{cursor:pointer}iframe{border:0;height:calc(100% - 4px);width:100%}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc22.DomSanitizer }, { type: ɵngcc7.NetworkService }]; }, { routeEvent: [{\n            type: Output\n        }], selectFeature: [{\n            type: Output\n        }], source: [{\n            type: Input\n        }], feature: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], toolbox: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FeatureDetailsDirective, [{\n        type: Directive,\n        args: [{\n                // This directive allow to view the route between the user coordinates and the feature\n                selector: '[igoFeatureDetailsDirective]'\n            }]\n    }], function () { return [{ type: FeatureDetailsComponent, decorators: [{\n                type: Self\n            }] }, { type: ɵngcc0.ElementRef }]; }, { routingEvent: [{\n            type: Output\n        }], setFeature: [{\n            type: HostListener,\n            args: ['selectFeature']\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoFeatureDetailsModule, { declarations: function () { return [FeatureDetailsComponent, FeatureDetailsDirective]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        IgoLanguageModule,\n        IgoKeyValueModule,\n        IgoImageModule]; }, exports: function () { return [FeatureDetailsComponent, FeatureDetailsDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoFeatureDetailsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    IgoLanguageModule,\n                    IgoKeyValueModule,\n                    IgoImageModule\n                ],\n                exports: [\n                    FeatureDetailsComponent,\n                    FeatureDetailsDirective\n                ],\n                declarations: [\n                    FeatureDetailsComponent,\n                    FeatureDetailsDirective\n                ]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FeatureFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-feature-form',\n                template: \"\\n<igo-form\\n  #igoForm\\n  [form]=\\\"form\\\"\\n  [formData]=\\\"feature$ | async\\\"\\n  (submitForm)=\\\"onSubmit($event)\\\">\\n\\n  <ng-content></ng-content>\\n  \\n  <ng-content select=\\\"[formButtons]\\\" formButtons></ng-content>\\n  \\n</igo-form>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block}igo-form{height:100%}\"]\n            }]\n    }], function () { return []; }, { submitForm: [{\n            type: Output\n        }], feature: [{\n            type: Input\n        }], form: [{\n            type: Input\n        }], igoForm: [{\n            type: ViewChild,\n            args: ['igoForm', { static: true }]\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoFeatureFormModule, { declarations: function () { return [FeatureFormComponent]; }, imports: function () { return [CommonModule,\n        IgoFormModule]; }, exports: function () { return [IgoFormModule, FeatureFormComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoFeatureFormModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoFormModule\n                ],\n                exports: [\n                    IgoFormModule,\n                    FeatureFormComponent\n                ],\n                declarations: [\n                    FeatureFormComponent\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoFeatureModule, { imports: function () { return [CommonModule]; }, exports: function () { return [IgoFeatureDetailsModule, IgoFeatureFormModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoFeatureModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    IgoFeatureDetailsModule,\n                    IgoFeatureFormModule\n                ],\n                declarations: [],\n                providers: []\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GeometryFormFieldComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-geometry-form-field',\n                template: \"<igo-geometry-form-field-input\\n  [formControl]=\\\"formControl\\\"\\n  [map]=\\\"map\\\"\\n  [geometryType]=\\\"geometryType$ | async\\\"\\n  [drawGuide]=\\\"drawGuide$ | async\\\"\\n  [measure]=\\\"measure\\\"\\n  [drawControlIsActive]=\\\"drawControlIsActive\\\"\\n  [freehandDrawIsActive]=\\\"freehandDrawIsActive\\\"\\n  [controlOptions]=\\\"controlOptions\\\"\\n  [drawStyle]=\\\"drawStyle\\\"\\n  [overlayStyle]=\\\"overlayStyle\\\">\\n</igo-geometry-form-field-input>\\n\\n<div *ngIf=\\\"geometryTypeField\\\" class=\\\"geometry-type-toggle\\\">\\n  <mat-button-toggle-group\\n    [disabled]=\\\"(value$ | async) !== undefined\\\"\\n    [(ngModel)]=\\\"geometryType\\\">\\n    <mat-button-toggle\\n      value=\\\"Point\\\"\\n      [disabled]=\\\"geometryTypes.indexOf('Point') < 0\\\">\\n      {{'igo.geo.geometry.point' | translate}}\\n    </mat-button-toggle>\\n    <mat-button-toggle\\n      value=\\\"LineString\\\"\\n      [disabled]=\\\"geometryTypes.indexOf('LineString') < 0\\\">\\n      {{'igo.geo.geometry.line' | translate}}\\n    </mat-button-toggle>\\n    <mat-button-toggle\\n      value=\\\"Polygon\\\"\\n      [disabled]=\\\"geometryTypes.indexOf('Polygon') < 0\\\">\\n      {{'igo.geo.geometry.polygon' | translate}}\\n    </mat-button-toggle>\\n  </mat-button-toggle-group>\\n</div>\\n\\n<mat-form-field *ngIf=\\\"drawGuideField\\\" class=\\\"draw-guide-field\\\">\\n  <input\\n    matInput\\n    type=\\\"number\\\"\\n    [placeholder]=\\\"drawGuidePlaceholder\\\"\\n    [(ngModel)]=\\\"drawGuide\\\">\\n  <mat-icon\\n    matPrefix\\n    [color]=\\\"'primary'\\\"\\n    svgIcon=\\\"adjust\\\">    \\n  </mat-icon>\\n  <span matSuffix class=\\\"draw-guide-units\\\">{{'igo.geo.measure.meters' | translate}}</span>\\n</mat-form-field>\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{display:block}.draw-guide-field,.geometry-type-toggle,:host{width:100%}.geometry-type-toggle{padding:10px;text-align:center}.draw-guide-field mat-icon{margin:0 10px}.draw-guide-units{padding:10px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { geometryTypeField: [{\n            type: Input\n        }], geometryTypes: [{\n            type: Input\n        }], drawGuideField: [{\n            type: Input\n        }], drawGuidePlaceholder: [{\n            type: Input\n        }], measure: [{\n            type: Input\n        }], controlOptions: [{\n            type: Input\n        }], geometryType: [{\n            type: Input\n        }], drawGuide: [{\n            type: Input\n        }], formControl: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], drawStyle: [{\n            type: Input\n        }], overlayStyle: [{\n            type: Input\n        }] }); })();\n\nconst MEASURE_UNIT_AUTO = 'auto';\nvar MeasureType;\n(function (MeasureType) {\n    MeasureType[\"Length\"] = \"length\";\n    MeasureType[\"Area\"] = \"area\";\n})(MeasureType || (MeasureType = {}));\nvar MeasureLengthUnit;\n(function (MeasureLengthUnit) {\n    MeasureLengthUnit[\"Meters\"] = \"meters\";\n    MeasureLengthUnit[\"Kilometers\"] = \"kilometers\";\n    MeasureLengthUnit[\"Miles\"] = \"miles\";\n    MeasureLengthUnit[\"Feet\"] = \"feet\";\n})(MeasureLengthUnit || (MeasureLengthUnit = {}));\nconst MeasureLengthUnitAbbreviation = {\n    [MeasureLengthUnit.Meters]: 'm',\n    [MeasureLengthUnit.Kilometers]: 'km',\n    [MeasureLengthUnit.Miles]: 'mi',\n    [MeasureLengthUnit.Feet]: 'ft'\n};\nvar MeasureAreaUnit;\n(function (MeasureAreaUnit) {\n    MeasureAreaUnit[\"SquareMeters\"] = \"squareMeters\";\n    MeasureAreaUnit[\"SquareKilometers\"] = \"squareKilometers\";\n    MeasureAreaUnit[\"SquareMiles\"] = \"squareMiles\";\n    MeasureAreaUnit[\"SquareFeet\"] = \"squareFeet\";\n    MeasureAreaUnit[\"Hectares\"] = \"hectares\";\n    MeasureAreaUnit[\"Acres\"] = \"acres\";\n})(MeasureAreaUnit || (MeasureAreaUnit = {}));\nconst MeasureAreaUnitAbbreviation = {\n    [MeasureAreaUnit.SquareMeters]: 'm²',\n    [MeasureAreaUnit.SquareKilometers]: 'km²',\n    [MeasureAreaUnit.SquareMiles]: 'mi²',\n    [MeasureAreaUnit.SquareFeet]: 'ft²',\n    [MeasureAreaUnit.Hectares]: 'ha',\n    [MeasureAreaUnit.Acres]: 'ac'\n};\n\n/**\n * Convert value from meters to kilometers\n * @param value Value in meters\n * @returns Value in kilometers\n */\nfunction metersToKilometers(value) {\n    return value * 0.001;\n}\n/**\n * Convert value from meters to feet\n * @param value Value in meters\n * @returns Value in feet\n */\nfunction metersToFeet(value) {\n    return value * 3.2808;\n}\n/**\n * Convert value from meters to miles\n * @param value Value in meters\n * @returns Value in miles\n */\nfunction metersToMiles(value) {\n    return value * 0.000621;\n}\n/**\n * Convert value from square meters to square kilometers\n * @param value Value in square meters\n * @returns Value in square kilometers\n */\nfunction squareMetersToSquareKilometers(value) {\n    return value * 0.000001;\n}\n/**\n * Convert value from square meters to square miles\n * @param value Value in square meters\n * @returns Value in square miles\n */\nfunction squareMetersToSquareMiles(value) {\n    return value * 0.0000003861;\n}\n/**\n * Convert value from square meters to square feet\n * @param value Value in square meters\n * @returns Value in square feet\n */\nfunction squareMetersToSquareFeet(value) {\n    return value * 10.764;\n}\n/**\n * Convert value from square meters to hectares\n * @param value Value in square meters\n * @returns Value in hectares\n */\nfunction squareMetersToHectares(value) {\n    return value * 0.0001;\n}\n/**\n * Convert value from square meters to acres\n * @param value Value in square meters\n * @returns Value in acres\n */\nfunction squareMetersToAcres(value) {\n    return value * 0.00024711;\n}\n/**\n * Convert value from meters to the specified length unit\n * @param value Value in meters\n * @param unit Length unit\n * @returns Value in unit\n */\nfunction metersToUnit(value, unit) {\n    const conversionMapper = new Map([\n        [MeasureLengthUnit.Meters, (val) => val],\n        [MeasureLengthUnit.Kilometers, metersToKilometers],\n        [MeasureLengthUnit.Miles, metersToMiles],\n        [MeasureLengthUnit.Feet, metersToFeet],\n    ]);\n    const conversion = conversionMapper.get(unit);\n    return conversion ? conversion(value) : undefined;\n}\n/**\n * Convert value from square meters to the specified area unit\n * @param value Value in meters\n * @param unit Area unit\n * @returns Value in unit\n */\nfunction squareMetersToUnit(value, unit) {\n    const conversionMapper = new Map([\n        [MeasureAreaUnit.SquareMeters, (val) => val],\n        [MeasureAreaUnit.SquareKilometers, squareMetersToSquareKilometers],\n        [MeasureAreaUnit.SquareMiles, squareMetersToSquareMiles],\n        [MeasureAreaUnit.SquareFeet, squareMetersToSquareFeet],\n        [MeasureAreaUnit.Hectares, squareMetersToHectares],\n        [MeasureAreaUnit.Acres, squareMetersToAcres],\n    ]);\n    const conversion = conversionMapper.get(unit);\n    return conversion ? conversion(value) : undefined;\n}\n/**\n * This method format a measure to a readable format\n * @param measure Measure\n * @param options Formatting options\n * @returns Formatted measure\n */\nfunction formatMeasure(measure, options, languageService) {\n    let decimal = options.decimal;\n    if (decimal === undefined || decimal < 0) {\n        decimal = 1;\n    }\n    const parts = [];\n    if (options.locale !== undefined) {\n        parts.push(measure.toLocaleString(options.locale, {\n            minimumFractionDigits: decimal,\n            maximumFractionDigits: decimal\n        }));\n    }\n    else {\n        parts.push(measure.toFixed(decimal).toString());\n    }\n    if (options.unit !== undefined && options.unitAbbr === true) {\n        if (languageService) {\n            parts.push(MeasureLengthUnitAbbreviation[options.unit] ?\n                languageService.translate.instant('igo.geo.measure.' + MeasureLengthUnitAbbreviation[options.unit]) :\n                languageService.translate.instant('igo.geo.measure.' + MeasureAreaUnitAbbreviation[options.unit]));\n        }\n        else {\n            parts.push(MeasureLengthUnitAbbreviation[options.unit] || MeasureAreaUnitAbbreviation[options.unit]);\n        }\n    }\n    return parts.filter(p => p !== undefined).join(' ');\n}\n/**\n * Compute best length measure unit for a given measure in meters\n * @param value Value in meters\n * @returns Measure unit\n */\nfunction computeBestLengthUnit(value) {\n    let unit = MeasureLengthUnit.Meters;\n    let converted = value;\n    const possibleUnits = [MeasureLengthUnit.Kilometers];\n    while (converted > 1000 && possibleUnits.length > 0) {\n        unit = possibleUnits.pop();\n        converted = metersToUnit(value, unit);\n    }\n    return unit;\n}\n/**\n * Compute best length measure unit for a given measure in square meters\n * @param value Value in meters\n * @returns Measure unit\n */\nfunction computeBestAreaUnit(value) {\n    let unit = MeasureAreaUnit.SquareMeters;\n    let converted = value;\n    const possibleUnits = [MeasureAreaUnit.SquareKilometers];\n    while (converted > 1000000 && possibleUnits.length > 0) {\n        unit = possibleUnits.pop();\n        converted = squareMetersToUnit(value, unit);\n    }\n    return unit;\n}\n/**\n * Create a default style for a measure interaction\n * @returns OL style\n */\nfunction createMeasureInteractionStyle() {\n    return new Style({\n        stroke: new Stroke({\n            color: '#ffcc33',\n            lineDash: [10, 10],\n            width: 2\n        }),\n        fill: new Fill({\n            color: 'rgba(255, 255, 255, 0.2)'\n        }),\n        image: new Circle({\n            radius: 5,\n            stroke: new Stroke({\n                color: '#ffcc33',\n            }),\n            fill: new Fill({\n                color: 'rgba(255, 255, 255, 0.2)'\n            })\n        })\n    });\n}\n/**\n * Create a default style for a measure layer\n * @returns OL style\n */\nfunction createMeasureLayerStyle() {\n    return new Style({\n        stroke: new Stroke({\n            color: '#ffcc33',\n            width: 2\n        }),\n        fill: new Fill({\n            color: 'rgba(255, 255, 255, 0.2)'\n        })\n    });\n}\n/**\n * Compute the length in meters of an OL geometry with a given projection\n * @param olGeometry Ol geometry\n * @param projection olGeometry's projection\n * @returns Length in meters\n */\nfunction measureOlGeometryLength(olGeometry, projection) {\n    if (olGeometry instanceof OlPoint) {\n        return undefined;\n    }\n    if (olGeometry.getFlatCoordinates().length === 0) {\n        return undefined;\n    }\n    return getLength(olGeometry, { projection });\n}\n/**\n * Compute the area in square meters of an OL geometry with a given projection\n * @param olGeometry Ol geometry\n * @param projection olGeometry's projection\n * @returns Area in square meters\n */\nfunction measureOlGeometryArea(olGeometry, projection) {\n    if (olGeometry instanceof OlPoint || olGeometry instanceof OlLineString) {\n        return undefined;\n    }\n    if (olGeometry.getFlatCoordinates().length === 0) {\n        return undefined;\n    }\n    return getArea$1(olGeometry, { projection });\n}\n/**\n * Compute the area (square meters), length (meters) and last length (meters)\n * of an OL geometry with a given projection.\n * @param olGeometry Ol geometry\n * @param projection olGeometry's projection\n * @returns Computed measure\n */\nfunction measureOlGeometry(olGeometry, projection) {\n    const length = measureOlGeometryLength(olGeometry, projection);\n    const area = measureOlGeometryArea(olGeometry, projection);\n    const lengths = [];\n    const coordinates = olGeometry.flatCoordinates;\n    const coordinatesLength = coordinates.length;\n    for (let i = 0; i <= coordinatesLength - 4; i += 2) {\n        const olSegment = new OlLineString([\n            [coordinates[i], coordinates[i + 1]],\n            [coordinates[i + 2], coordinates[i + 3]]\n        ]);\n        lengths.push(measureOlGeometryLength(olSegment, projection));\n    }\n    return {\n        area,\n        length,\n        lengths\n    };\n}\n/**\n * Update an OL geometry midpoints and return an array of those points\n * @param olGeometry OL Geometry\n * @returns OL points\n */\nfunction updateOlGeometryMidpoints(olGeometry) {\n    const olMidpoints = getOlGeometryMidpoints(olGeometry);\n    // TODO: handle multi geometries\n    const coordinates = olGeometry.flatCoordinates;\n    const midpointsLength = olMidpoints.length;\n    for (let i = 0; i < midpointsLength; i++) {\n        const j = i * 2;\n        const olSegment = new OlLineString([\n            [coordinates[j], coordinates[j + 1]],\n            [coordinates[j + 2], coordinates[j + 3]]\n        ]);\n        const midpointCoordinate = olSegment.getCoordinateAt(0.5);\n        const olMidpoint = olMidpoints[i];\n        if (olMidpoint !== undefined) {\n            olMidpoint.setCoordinates(midpointCoordinate);\n        }\n        else {\n            olMidpoints[i] = new OlPoint(midpointCoordinate);\n        }\n    }\n    return olMidpoints;\n}\n/**\n * Clear an OL geometry midpoints and return an array of those points\n * @param olGeometry OL Geometry\n */\nfunction clearOlGeometryMidpoints(olGeometry) {\n    const olMidpoints = olGeometry.get('_midpoints') || [];\n    const midpointsLength = olMidpoints.length;\n    for (let i = 0; i < midpointsLength; i++) {\n        const olMidpoint = olMidpoints[i];\n        if (olMidpoint !== undefined) {\n            if (olMidpoint !== undefined) {\n                clearOlMidpointTooltip(olMidpoint);\n            }\n        }\n    }\n    olGeometry.set('_midpoints', undefined, true);\n    return olMidpoints;\n}\n/**\n * Return an array of  OL geometry midpoints, if any\n * @param olGeometry OL Geometry\n * @returns OL points\n */\nfunction getOlGeometryMidpoints(olGeometry) {\n    const expectedNumber = Math.max((olGeometry.flatCoordinates.length / 2) - 1, 0);\n    // TODO: This works but it's quite messy. If time permits,\n    // clean this. Maybe a Tooltip class could handle that\n    let olMidpoints = olGeometry.get('_midpoints');\n    if (olMidpoints === undefined) {\n        olMidpoints = new Array(expectedNumber);\n        olGeometry.set('_midpoints', olMidpoints, true);\n        return olMidpoints;\n    }\n    if (expectedNumber === olMidpoints.length) {\n        return olMidpoints;\n    }\n    if (expectedNumber > olMidpoints.length) {\n        olMidpoints.push(...new Array(expectedNumber - olMidpoints.length));\n        return olMidpoints;\n    }\n    for (let i = expectedNumber; i < olMidpoints.length; i++) {\n        const olMidpoint = olMidpoints[expectedNumber];\n        if (olMidpoint !== undefined) {\n            clearOlMidpointTooltip(olMidpoint);\n        }\n    }\n    olMidpoints.splice(expectedNumber);\n    return olMidpoints;\n}\n/**\n * Remove an OL midpoint's tooltip from the map\n * @param olMidpoint OL Point\n */\nfunction clearOlMidpointTooltip(olMidpoint) {\n    const olTooltip = olMidpoint.get('_tooltip');\n    if (olTooltip !== undefined) {\n        const olMap = olTooltip.getMap();\n        if (olMap !== undefined) {\n            olMap.removeOverlay(olTooltip);\n        }\n    }\n}\n/**\n * Add an OL overlay at each midpoint and return an array of those overlays\n * @param olGeometry OL Geometry\n * @returns OL overlays\n */\nfunction updateOlTooltipsAtMidpoints(olGeometry) {\n    const olMidpoints = updateOlGeometryMidpoints(olGeometry);\n    const olTooltips = olMidpoints.map((olMidpoint) => {\n        let olTooltip = olMidpoint.get('_tooltip');\n        if (olTooltip === undefined) {\n            olTooltip = createOlTooltipAtPoint(olMidpoint);\n        }\n        else {\n            olTooltip.setPosition(olMidpoint.flatCoordinates);\n        }\n        return olTooltip;\n    });\n    return olTooltips;\n}\n/**\n * Return an array of OL overlay at midspoints, if any\n * @param olGeometry OL Geometry\n * @returns OL overlays\n */\nfunction getOlTooltipsAtMidpoints(olGeometry) {\n    const olMidpoints = getOlGeometryMidpoints(olGeometry);\n    return olMidpoints.map((olMidpoint) => {\n        return olMidpoint ? olMidpoint.get('_tooltip') : undefined;\n    });\n}\n/**\n * Update an OL geometry center and return it\n * @param olGeometry OL Geometry\n * @returns OL point\n */\nfunction updateOlGeometryCenter(olGeometry) {\n    let olCenter = olGeometry.get('_center');\n    const centerCoordinate = getCenter(olGeometry.getExtent());\n    if (olCenter !== undefined) {\n        olCenter.setCoordinates(centerCoordinate);\n    }\n    else {\n        olCenter = new OlPoint(centerCoordinate);\n        olGeometry.set('_center', olCenter);\n    }\n    return olCenter;\n}\n/**\n * Add an OL overlay at the center of a geometry and return that overlay\n * @param olGeometry OL Geometry\n * @returns OL overlay\n */\nfunction updateOlTooltipAtCenter(olGeometry) {\n    const olCenter = updateOlGeometryCenter(olGeometry);\n    let olTooltip = olCenter.get('_tooltip');\n    if (olTooltip === undefined) {\n        olTooltip = createOlTooltipAtPoint(olCenter);\n    }\n    else {\n        olTooltip.setPosition(olCenter.flatCoordinates);\n    }\n    return olTooltip;\n}\n/**\n * Return an array of OL overlay at midspoints, if any\n * @param olGeometry OL Geometry\n * @returns OL overlays\n */\nfunction getOlTooltipAtCenter(olGeometry) {\n    const olCenter = olGeometry.get('_center');\n    return olCenter ? olCenter.get('_tooltip') : undefined;\n}\n/**\n * Get all the tooltips of an OL geometry\n * @param olGeometry OL Geometry\n * @returns OL overlays\n */\nfunction getTooltipsOfOlGeometry(olGeometry) {\n    const olTooltips = [].concat(getOlTooltipsAtMidpoints(olGeometry) || []);\n    const olCenterTooltip = getOlTooltipAtCenter(olGeometry);\n    if (olCenterTooltip !== undefined) {\n        olTooltips.push(olCenterTooltip);\n    }\n    return olTooltips;\n}\n/**\n * Create an OL overlay at a point and bind the overlay to the point\n * @param olPoint OL Point\n * @returns OL overlay\n */\nfunction createOlTooltipAtPoint(olPoint) {\n    const olTooltip = new OlOverlay({\n        element: document.createElement('div'),\n        offset: [-30, -10],\n        className: [\n            'igo-map-tooltip',\n            'igo-map-tooltip-measure'\n        ].join(' '),\n        stopEvent: false\n    });\n    olTooltip.setPosition(olPoint.flatCoordinates);\n    olPoint.set('_tooltip', olTooltip);\n    return olTooltip;\n}\n\n/* tslint:disable */\n// See this issue: https://github.com/Microsoft/TypeScript/issues/13965\n// And the solution: https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n// for an explanation as to why the prototype is set manually\n/* tslint:enable */\nclass GeometrySliceError extends Error {\n}\nclass GeometrySliceMultiPolygonError extends GeometrySliceError {\n    constructor() {\n        super('Can\\'t slice a MultiPolygon.');\n        Object.setPrototypeOf(this, GeometrySliceMultiPolygonError.prototype);\n    }\n}\nclass GeometrySliceLineStringError extends GeometrySliceError {\n    constructor() {\n        super('Can\\'t slice with a line that has more than 2 points.');\n        Object.setPrototypeOf(this, GeometrySliceLineStringError.prototype);\n    }\n}\nclass GeometrySliceTooManyIntersectionError extends GeometrySliceError {\n    constructor() {\n        super('More than 2 intersections found between the target polygon and the slicing line.');\n        Object.setPrototypeOf(this, GeometrySliceTooManyIntersectionError.prototype);\n    }\n}\n\n/**\n * Create a default style for draw and modify interactions\n * @param color Style color (R, G, B)\n * @returns OL style\n */\nfunction createDrawInteractionStyle(color) {\n    color = color || [0, 153, 255];\n    return new Style({\n        stroke: new Stroke({\n            color: color.concat([1]),\n            width: 2\n        }),\n        fill: new Fill({\n            color: color.concat([0.2])\n        }),\n        image: new Circle({\n            radius: 8,\n            stroke: new Stroke({\n                color: color.concat([1])\n            }),\n            fill: new Fill({\n                color: color.concat([0.2])\n            })\n        })\n    });\n}\n/**\n * Create a default style for drawing a hole\n * @returns OL style\n */\nfunction createDrawHoleInteractionStyle() {\n    return new Style({\n        stroke: new Stroke({\n            color: [0, 153, 255, 1],\n            width: 2\n        })\n    });\n}\n/**\n * Slice geometry into two parts\n * @param olGeometry OL geometry\n * @param olSlicer Slicing line\n * @returns New OL geometries\n */\nfunction sliceOlGeometry(olGeometry, olSlicer) {\n    if (olGeometry instanceof OlPolygon) {\n        return sliceOlPolygon(olGeometry, olSlicer);\n    }\n    else if (olGeometry instanceof OlLineString) {\n        return sliceOlLineString(olGeometry, olSlicer);\n    }\n    return [];\n}\n/**\n * Slice OL LineString into one or more lines\n * @param olLineString OL line string\n * @param olSlicer Slicing line\n * @returns New OL line strings\n */\nfunction sliceOlLineString(olLineString, olSlicer) {\n    return [];\n}\n/**\n * Slice OL Polygon into one or more polygons\n * @param olPolygon OL polygon\n * @param olSlicer Slicing line\n * @returns New OL polygons\n */\nfunction sliceOlPolygon(olPolygon, olSlicer) {\n    if (olPolygon.getLinearRingCount() > 1) {\n        throw new GeometrySliceMultiPolygonError();\n    }\n    if (olSlicer.getCoordinates().length > 2) {\n        throw new GeometrySliceLineStringError();\n    }\n    const olGeoJSON = new OlGeoJSON();\n    const slicer = olGeoJSON.writeGeometryObject(olSlicer);\n    const outerCoordinates = olPolygon.getLinearRing(0).getCoordinates();\n    const parts = [[], []];\n    let totalIntersectionCount = 0;\n    for (let i = 0, ii = outerCoordinates.length - 1; i < ii; i++) {\n        const segmentCoordinates = [outerCoordinates[i], outerCoordinates[i + 1]];\n        const segment = lineString(segmentCoordinates);\n        const intersections = lineIntersect(segment, slicer).features;\n        const intersectionCount = intersections.length;\n        totalIntersectionCount += intersectionCount;\n        if (intersectionCount > 1 || totalIntersectionCount > 2) {\n            throw new GeometrySliceTooManyIntersectionError();\n        }\n        parts[0].push(segmentCoordinates[0]);\n        if (intersectionCount === 1) {\n            const intersection = intersections[0].geometry.coordinates;\n            parts[0].push(intersection);\n            parts[1].push(intersection);\n            parts.reverse();\n        }\n    }\n    if (totalIntersectionCount <= 1) {\n        return [];\n    }\n    parts[0].push(parts[0][0]);\n    parts[1].push(parts[1][0]);\n    return [new OlPolygon([parts[0]]), new OlPolygon([parts[1]])];\n}\n/**\n * Splice geometry into two parts\n * @param olGeometry OL geometry\n * @param olSlicer Slicing line\n * @returns New OL geometries\n */\nfunction addLinearRingToOlPolygon(olPolygon, olLinearRing) {\n    // TODO: make some validation and support updating an existing linear ring\n    olPolygon.appendLinearRing(olLinearRing);\n}\nfunction getMousePositionFromOlGeometryEvent(olEvent) {\n    const olGeometry = olEvent.target;\n    if (olGeometry instanceof OlPolygon) {\n        return olGeometry.flatCoordinates.slice(-4, -2);\n    }\n    return olGeometry.flatCoordinates.slice(-2);\n}\n\n/**\n * Control to draw geometries\n */\nclass DrawControl {\n    constructor(options) {\n        this.options = options;\n        /**\n         * Draw start observable\n         */\n        this.start$ = new Subject();\n        /**\n         * Draw end observable\n         */\n        this.end$ = new Subject();\n        /**\n         * Geometry changes observable\n         */\n        this.changes$ = new Subject();\n        this.freehand$ = new BehaviorSubject(false);\n        if (options.layer !== undefined) {\n            this.olOverlayLayer = options.layer;\n        }\n        else {\n            this.olOverlayLayer = this.createOlInnerOverlayLayer();\n        }\n    }\n    /**\n     * Wheter the control is active\n     */\n    get active() {\n        return this.olMap !== undefined;\n    }\n    /**\n     * Geometry type\n     * @internal\n     */\n    get geometryType() {\n        return this.options.geometryType;\n    }\n    /**\n     * OL overlay source\n     * @internal\n     */\n    get olOverlaySource() {\n        return this.olOverlayLayer.getSource();\n    }\n    /**\n     * Add or remove this control to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        if (olMap === undefined) {\n            this.clearOlInnerOverlaySource();\n            this.removeOlInnerOverlayLayer();\n            this.removeOlDrawInteraction();\n            this.olMap = olMap;\n            return;\n        }\n        this.olMap = olMap;\n        this.addOlInnerOverlayLayer();\n        this.addOlDrawInteraction();\n    }\n    /**\n     * Return the overlay source\n     */\n    getSource() {\n        return this.olOverlaySource;\n    }\n    /**\n     * Create an overlay source if none is defined in the options\n     */\n    createOlInnerOverlayLayer() {\n        return new OlVectorLayer({\n            source: this.options.source ? this.options.source : new OlVectorSource(),\n            style: this.options.layerStyle,\n            zIndex: 500\n        });\n    }\n    /**\n     * Clear the overlay layer if it wasn't defined in the options\n     */\n    removeOlInnerOverlayLayer() {\n        if (this.options.layer === undefined && this.olMap !== undefined) {\n            this.olMap.removeLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Add the overlay layer if it wasn't defined in the options\n     */\n    addOlInnerOverlayLayer() {\n        if (this.options.layer === undefined) {\n            this.olMap.addLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Clear the overlay source if it wasn't defined in the options\n     */\n    clearOlInnerOverlaySource() {\n        if (this.options.layer === undefined && this.options.source === undefined) {\n            this.olOverlaySource.clear(true);\n        }\n    }\n    /**\n     * Add a draw interaction to the map an set up some listeners\n     */\n    addOlDrawInteraction() {\n        let olDrawInteraction;\n        if (this.freehand$.getValue() === false) {\n            olDrawInteraction = new OlDraw({\n                type: this.geometryType,\n                source: this.getSource(),\n                stopClick: true,\n                style: this.options.drawStyle,\n                maxPoints: this.options.maxPoints,\n                freehand: false,\n                freehandCondition: () => false\n            });\n        }\n        else {\n            if (this.geometryType === 'Point') {\n                olDrawInteraction = new OlDraw({\n                    type: 'Circle',\n                    source: this.getSource(),\n                    maxPoints: this.options.maxPoints,\n                    freehand: true\n                });\n            }\n            else {\n                olDrawInteraction = new OlDraw({\n                    type: this.geometryType,\n                    source: this.getSource(),\n                    maxPoints: this.options.maxPoints,\n                    freehand: true\n                });\n            }\n        }\n        this.onDrawStartKey = olDrawInteraction.on('drawstart', (event) => this.onDrawStart(event));\n        this.onDrawEndKey = olDrawInteraction.on('drawend', (event) => this.onDrawEnd(event));\n        this.olMap.addInteraction(olDrawInteraction);\n        this.olDrawInteraction = olDrawInteraction;\n    }\n    /**\n     * Remove the draw interaction\n     */\n    removeOlDrawInteraction() {\n        if (this.olDrawInteraction === undefined) {\n            return;\n        }\n        this.unsubscribeToKeyDown();\n        unByKey([this.onDrawStartKey, this.onDrawEndKey, this.onDrawKey]);\n        if (this.olMap !== undefined) {\n            this.olMap.removeInteraction(this.olDrawInteraction);\n        }\n        this.olDrawInteraction = undefined;\n    }\n    /**\n     * When drawing starts, clear the overlay and start watching from changes\n     * @param event Draw start event\n     */\n    onDrawStart(event) {\n        const olGeometry = event.feature.getGeometry();\n        this.start$.next(olGeometry);\n        this.clearOlInnerOverlaySource();\n        this.onDrawKey = olGeometry.on('change', (olGeometryEvent) => {\n            this.mousePosition = getMousePositionFromOlGeometryEvent(olGeometryEvent);\n            this.changes$.next(olGeometryEvent.target);\n        });\n        this.subscribeToKeyDown();\n    }\n    /**\n     * When drawing ends, update the geometry observable and start watching from changes\n     * @param event Draw end event\n     */\n    onDrawEnd(event) {\n        this.unsubscribeToKeyDown();\n        unByKey(this.onDrawKey);\n        this.end$.next(event.feature.getGeometry());\n    }\n    /**\n     * Subscribe to CTRL key down to activate the draw control\n     */\n    subscribeToKeyDown() {\n        this.unsubscribeToKeyDown();\n        this.keyDown$$ = fromEvent(document, 'keydown').subscribe((event) => {\n            // On ESC key down, remove the last vertex\n            if (event.key === 'Escape') {\n                this.olDrawInteraction.removeLastPoint();\n                return;\n            }\n            // On space bar, pan to the current mouse position\n            if (event.key === ' ') {\n                this.olMap.getView().animate({\n                    center: this.mousePosition,\n                    duration: 0\n                });\n                return;\n            }\n        });\n    }\n    /**\n     * Unsubscribe to key down\n     */\n    unsubscribeToKeyDown() {\n        if (this.keyDown$$ !== undefined) {\n            this.keyDown$$.unsubscribe();\n            this.keyDown$$ = undefined;\n        }\n    }\n}\n\n/**\n * Control to modify geometries\n */\nclass ModifyControl {\n    constructor(options) {\n        this.options = options;\n        /**\n         * Modify start observable\n         */\n        this.start$ = new Subject();\n        /**\n         * Modify end observable\n         */\n        this.end$ = new Subject();\n        /**\n         * Geometry changes observable\n         */\n        this.changes$ = new Subject();\n        this.olModifyInteractionIsActive = false;\n        this.olTranslateInteractionIsActive = false;\n        this.olDrawInteractionIsActive = false;\n        this.removedOlInteractions = [];\n        /**\n         * Whether a modify control should be available\n         */\n        this.modify = true;\n        /**\n         * Whether a translate control should be available\n         */\n        this.translate = true;\n        if (options.modify !== undefined) {\n            this.modify = options.modify;\n        }\n        if (options.translate !== undefined) {\n            this.translate = options.translate;\n        }\n        if (options.layer !== undefined) {\n            this.olOverlayLayer = options.layer;\n        }\n        else {\n            this.olOverlayLayer = this.createOlInnerOverlayLayer();\n        }\n        this.olLinearRingsLayer = this.createOlLinearRingsLayer();\n    }\n    /**\n     * Wheter the control is active\n     */\n    get active() {\n        return this.olMap !== undefined;\n    }\n    /**\n     * OL overlay source\n     * @internal\n     */\n    get olOverlaySource() {\n        return this.olOverlayLayer.getSource();\n    }\n    /**\n     * OL linear rings source\n     * @internal\n     */\n    get olLinearRingsSource() {\n        return this.olLinearRingsLayer.getSource();\n    }\n    /**\n     * Add or remove this control to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        if (olMap === undefined) {\n            this.clearOlInnerOverlaySource();\n            this.removeOlInnerOverlayLayer();\n            this.removeOlModifyInteraction();\n            this.removeOlTranslateInteraction();\n            this.removeOlDrawInteraction();\n            this.olMap = olMap;\n            return;\n        }\n        this.olMap = olMap;\n        this.addOlInnerOverlayLayer();\n        // The order in which these interactions\n        // are added is important\n        if (this.modify === true) {\n            this.addOlDrawInteraction();\n        }\n        if (this.translate === true) {\n            this.addOlTranslateInteraction();\n            this.activateTranslateInteraction();\n        }\n        if (this.modify === true) {\n            this.addOlModifyInteraction();\n            this.activateModifyInteraction();\n        }\n    }\n    /**\n     * Return the overlay source\n     */\n    getSource() {\n        return this.olOverlaySource;\n    }\n    /**\n     * Add an OL geometry to the overlay and start modifying it\n     * @param olGeometry Ol Geometry\n     */\n    setOlGeometry(olGeometry) {\n        const olFeature$1 = new olFeature({ geometry: olGeometry });\n        this.olOverlaySource.clear();\n        this.olOverlaySource.addFeature(olFeature$1);\n    }\n    /**\n     * Create an overlay source if none is defined in the options\n     */\n    createOlInnerOverlayLayer() {\n        return new OlVectorLayer({\n            source: this.options.source ? this.options.source : new OlVectorSource(),\n            style: this.options.layerStyle,\n            zIndex: 500\n        });\n    }\n    /**\n     * Add the overlay layer if it wasn't defined in the options\n     */\n    addOlInnerOverlayLayer() {\n        if (this.options.layer === undefined) {\n            this.olMap.addLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Clear the overlay layer if it wasn't defined in the options\n     */\n    removeOlInnerOverlayLayer() {\n        if (this.options.layer === undefined && this.olMap !== undefined) {\n            this.olMap.removeLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Clear the overlay source if it wasn't defined in the options\n     */\n    clearOlInnerOverlaySource() {\n        if (this.options.layer === undefined && this.options.source === undefined) {\n            this.olOverlaySource.clear(true);\n        }\n    }\n    createOlLinearRingsLayer() {\n        return new OlVectorLayer({\n            source: new OlVectorSource(),\n            style: createDrawHoleInteractionStyle(),\n            zIndex: 500\n        });\n    }\n    /**\n     * Add the linear rings layer\n     */\n    addOlLinearRingsLayer() {\n        this.olMap.addLayer(this.olLinearRingsLayer);\n    }\n    /**\n     * Clear the linear rings layer\n     */\n    removeOlLinearRingsLayer() {\n        this.olMap.removeLayer(this.olLinearRingsLayer);\n    }\n    /**\n     * Clear the linear rings source\n     */\n    clearOlLinearRingsSource() {\n        this.olLinearRingsSource.clear(true);\n    }\n    /**\n     * Add a modify interaction to the map an set up some listeners\n     */\n    addOlModifyInteraction() {\n        const olModifyInteraction = new OlModify({\n            source: this.olOverlaySource,\n            style: this.options.drawStyle\n        });\n        this.olModifyInteraction = olModifyInteraction;\n    }\n    /**\n     * Remove the modify interaction\n     */\n    removeOlModifyInteraction() {\n        if (this.olModifyInteraction === undefined) {\n            return;\n        }\n        this.deactivateModifyInteraction();\n        this.olModifyInteraction = undefined;\n    }\n    activateModifyInteraction() {\n        if (this.olModifyInteractionIsActive === true) {\n            return;\n        }\n        this.olModifyInteractionIsActive = true;\n        this.onModifyStartKey = this.olModifyInteraction.on('modifystart', (event) => this.onModifyStart(event));\n        this.onModifyEndKey = this.olModifyInteraction.on('modifyend', (event) => this.onModifyEnd(event));\n        this.olMap.addInteraction(this.olModifyInteraction);\n    }\n    deactivateModifyInteraction() {\n        if (this.olModifyInteractionIsActive === false) {\n            return;\n        }\n        this.olModifyInteractionIsActive = false;\n        unByKey([this.onModifyStartKey, this.onModifyEndKey, this.onModifyKey]);\n        if (this.olMap !== undefined) {\n            this.olMap.removeInteraction(this.olModifyInteraction);\n        }\n    }\n    /**\n     * When modifying starts, clear the overlay and start watching for changes\n     * @param event Modify start event\n     */\n    onModifyStart(event) {\n        const olGeometry = event.features.item(0).getGeometry();\n        this.start$.next(olGeometry);\n        this.onModifyKey = olGeometry.on('change', (olGeometryEvent) => {\n            this.mousePosition = getMousePositionFromOlGeometryEvent(olGeometryEvent);\n            this.changes$.next(olGeometryEvent.target);\n        });\n        this.subscribeToKeyDown();\n    }\n    /**\n     * When modifying ends, update the geometry observable and stop watching for changes\n     * @param event Modify end event\n     */\n    onModifyEnd(event) {\n        unByKey(this.onModifyKey);\n        this.end$.next(event.features.item(0).getGeometry());\n        this.unsubscribeToKeyDown();\n    }\n    /**\n     * Subscribe to space key down to pan the map\n     */\n    subscribeToKeyDown() {\n        this.keyDown$$ = fromEvent(document, 'keydown').subscribe((event) => {\n            if (event.key === ' ') {\n                // On space bar, pan to the current mouse position\n                this.olMap.getView().animate({\n                    center: this.mousePosition,\n                    duration: 0\n                });\n                return;\n            }\n        });\n    }\n    /**\n     * Unsubscribe to key down\n     */\n    unsubscribeToKeyDown() {\n        if (this.keyDown$$ !== undefined) {\n            this.keyDown$$.unsubscribe();\n        }\n    }\n    /**\n     * Add a translate interaction to the map an set up some listeners\n     */\n    addOlTranslateInteraction() {\n        const olTranslateInteraction = new OlTranslate({\n            layers: [this.olOverlayLayer]\n        });\n        this.olTranslateInteraction = olTranslateInteraction;\n    }\n    /**\n     * Remove the translate interaction\n     */\n    removeOlTranslateInteraction() {\n        if (this.olTranslateInteraction === undefined) {\n            return;\n        }\n        this.deactivateTranslateInteraction();\n        this.olTranslateInteraction = undefined;\n    }\n    activateTranslateInteraction() {\n        if (this.olTranslateInteractionIsActive === true) {\n            return;\n        }\n        this.olTranslateInteractionIsActive = true;\n        this.onTranslateStartKey = this.olTranslateInteraction.on('translatestart', (event) => this.onTranslateStart(event));\n        this.onTranslateEndKey = this.olTranslateInteraction.on('translateend', (event) => this.onTranslateEnd(event));\n        this.olMap.addInteraction(this.olTranslateInteraction);\n    }\n    deactivateTranslateInteraction() {\n        if (this.olTranslateInteractionIsActive === false) {\n            return;\n        }\n        this.olTranslateInteractionIsActive = false;\n        unByKey([\n            this.onTranslateStartKey,\n            this.onTranslateEndKey,\n            this.onTranslateKey\n        ]);\n        if (this.olMap !== undefined) {\n            this.olMap.removeInteraction(this.olTranslateInteraction);\n        }\n    }\n    /**\n     * When translation starts, clear the overlay and start watching for changes\n     * @param event Translate start event\n     */\n    onTranslateStart(event) {\n        const olGeometry = event.features.item(0).getGeometry();\n        this.start$.next(olGeometry);\n        this.onTranslateKey = olGeometry.on('change', (olGeometryEvent) => {\n            this.changes$.next(olGeometryEvent.target);\n        });\n    }\n    /**\n     * When translation ends, update the geometry observable and stop watchign for changes\n     * @param event Translate end event\n     */\n    onTranslateEnd(event) {\n        unByKey(this.onTranslateKey);\n        this.end$.next(event.features.item(0).getGeometry());\n    }\n    /**\n     * Add a draw interaction to the map an set up some listeners\n     */\n    addOlDrawInteraction() {\n        const olDrawInteraction = new OlDraw({\n            type: 'Polygon',\n            source: this.olLinearRingsSource,\n            stopClick: true,\n            style: createDrawHoleInteractionStyle(),\n            condition: (event) => {\n                const olOuterGeometry = this.olOuterGeometry || this.getOlGeometry();\n                const intersects = olOuterGeometry.intersectsCoordinate(event.coordinate);\n                return intersects;\n            }\n        });\n        this.olDrawInteraction = olDrawInteraction;\n        this.subscribeToDrawKeyDown();\n    }\n    /**\n     * Subscribe to CTRL key down to activate the draw control\n     */\n    subscribeToDrawKeyDown() {\n        this.drawKeyDown$$ = fromEvent(document, 'keydown').subscribe((event) => {\n            if (event.key !== 'Control') {\n                return;\n            }\n            this.unsubscribeToDrawKeyDown();\n            const olGeometry = this.getOlGeometry();\n            if (!olGeometry || !(olGeometry instanceof OlPolygon)) {\n                return;\n            }\n            this.subscribeToDrawKeyUp();\n            this.deactivateModifyInteraction();\n            this.deactivateTranslateInteraction();\n            this.activateDrawInteraction();\n        });\n    }\n    /**\n     * Subscribe to CTRL key up to deactivate the draw control\n     */\n    subscribeToDrawKeyUp() {\n        this.drawKeyUp$$ = fromEvent(document, 'keyup').subscribe((event) => {\n            if (event.key !== 'Control') {\n                return;\n            }\n            this.unsubscribeToDrawKeyUp();\n            this.unsubscribeToKeyDown();\n            this.deactivateDrawInteraction();\n            this.activateModifyInteraction();\n            if (this.translate === true) {\n                this.activateTranslateInteraction();\n            }\n            this.subscribeToDrawKeyDown();\n            this.olOuterGeometry = undefined;\n            this.clearOlLinearRingsSource();\n            this.end$.next(this.getOlGeometry());\n        });\n    }\n    /**\n     * Unsubscribe to draw key down\n     */\n    unsubscribeToDrawKeyDown() {\n        if (this.drawKeyDown$$ !== undefined) {\n            this.drawKeyDown$$.unsubscribe();\n        }\n    }\n    /**\n     * Unsubscribe to key up\n     */\n    unsubscribeToDrawKeyUp() {\n        if (this.drawKeyUp$$ !== undefined) {\n            this.drawKeyUp$$.unsubscribe();\n        }\n    }\n    /**\n     * Remove the draw interaction\n     */\n    removeOlDrawInteraction() {\n        if (this.olDrawInteraction === undefined) {\n            return;\n        }\n        this.unsubscribeToKeyDown();\n        this.unsubscribeToDrawKeyUp();\n        this.unsubscribeToDrawKeyDown();\n        this.deactivateDrawInteraction();\n        this.clearOlLinearRingsSource();\n        this.olDrawInteraction = undefined;\n    }\n    /**\n     * Activate the draw interaction\n     */\n    activateDrawInteraction() {\n        if (this.olDrawInteractionIsActive === true) {\n            return;\n        }\n        this.clearOlLinearRingsSource();\n        this.addOlLinearRingsLayer();\n        this.olMap.getInteractions().forEach((olInteraction) => {\n            if (olInteraction instanceof OlDragBoxInteraction) {\n                this.olMap.removeInteraction(olInteraction);\n                this.removedOlInteractions.push(olInteraction);\n            }\n        });\n        this.olDrawInteractionIsActive = true;\n        this.onDrawStartKey = this.olDrawInteraction.on('drawstart', (event) => this.onDrawStart(event));\n        this.onDrawEndKey = this.olDrawInteraction.on('drawend', (event) => this.onDrawEnd(event));\n        this.olMap.addInteraction(this.olDrawInteraction);\n    }\n    /**\n     * Deactivate the draw interaction\n     */\n    deactivateDrawInteraction() {\n        if (this.olDrawInteractionIsActive === false) {\n            return;\n        }\n        this.removeOlLinearRingsLayer();\n        this.removedOlInteractions.forEach((olInteraction) => {\n            this.olMap.addInteraction(olInteraction);\n        });\n        this.removedOlInteractions = [];\n        this.olDrawInteractionIsActive = false;\n        unByKey([this.onDrawStartKey, this.onDrawEndKey, this.onDrawKey]);\n        if (this.olMap !== undefined) {\n            this.olMap.removeInteraction(this.olDrawInteraction);\n        }\n    }\n    /**\n     * When draw start, add a new linerar ring to the geometry and start watching for changes\n     * @param event Draw start event\n     */\n    onDrawStart(event) {\n        const olGeometry = event.feature.getGeometry();\n        this.olOuterGeometry = this.getOlGeometry().clone();\n        const linearRingCoordinates = olGeometry.getLinearRing().getCoordinates();\n        this.addLinearRingToOlGeometry(linearRingCoordinates);\n        this.start$.next(this.getOlGeometry());\n        this.onDrawKey = olGeometry.on('change', (olGeometryEvent) => {\n            this.mousePosition = getMousePositionFromOlGeometryEvent(olGeometryEvent);\n            const _linearRingCoordinates = olGeometryEvent.target\n                .getLinearRing()\n                .getCoordinates();\n            this.updateLinearRingOfOlGeometry(_linearRingCoordinates);\n            this.changes$.next(this.getOlGeometry());\n        });\n        this.subscribeToKeyDown();\n    }\n    /**\n     * When translation ends, update the geometry observable and stop watchign for changes\n     * @param event Draw end event\n     */\n    onDrawEnd(event) {\n        unByKey(this.onDrawKey);\n        this.olOuterGeometry = undefined;\n        const linearRingCoordinates = event.feature\n            .getGeometry()\n            .getLinearRing()\n            .getCoordinates();\n        this.updateLinearRingOfOlGeometry(linearRingCoordinates);\n        this.clearOlLinearRingsSource();\n        this.end$.next(this.getOlGeometry());\n        this.unsubscribeToKeyDown();\n    }\n    /**\n     * Add a linear ring to the geometry being modified\n     * @param coordinates Linear ring coordinates\n     */\n    addLinearRingToOlGeometry(coordinates) {\n        const olGeometry = this.getOlGeometry();\n        const olLinearRing = new OlLinearRing(coordinates);\n        addLinearRingToOlPolygon(olGeometry, olLinearRing);\n    }\n    /**\n     * Update the last linear ring of the geometry being modified\n     * @param coordinates Linear ring coordinates\n     */\n    updateLinearRingOfOlGeometry(coordinates) {\n        const olGeometry = this.getOlGeometry();\n        // Remove the last linear ring (the one we are updating)\n        const olLinearRings = olGeometry.getLinearRings().slice(0, -1);\n        const newCoordinates = olLinearRings.map((olLinearRing) => {\n            return olLinearRing.getCoordinates();\n        });\n        newCoordinates.push(coordinates);\n        olGeometry.setCoordinates(newCoordinates);\n    }\n    /**\n     * Get the geometry being modified\n     * @returns OL Geometry\n     */\n    getOlGeometry() {\n        const olFeatures = this.olOverlaySource.getFeatures();\n        return olFeatures.length > 0 ? olFeatures[0].getGeometry() : undefined;\n    }\n}\n\n/**\n * Control to modify geometries\n */\nclass SliceControl {\n    constructor(options) {\n        this.options = options;\n        /**\n         * Slice end observable\n         */\n        this.end$ = new Subject();\n        /**\n         * Slice error, if any\n         */\n        this.error$ = new Subject();\n        if (options.layer !== undefined) {\n            this.olOverlayLayer = options.layer;\n        }\n        else {\n            this.olOverlayLayer = this.createOlInnerOverlayLayer();\n        }\n    }\n    /**\n     * Wheter the control is active\n     */\n    get active() {\n        return this.olMap !== undefined;\n    }\n    /**\n     * OL overlay source\n     * @internal\n     */\n    get olOverlaySource() {\n        return this.olOverlayLayer.getSource();\n    }\n    /**\n     * Add or remove this control to/from a map.\n     * @param map OL Map\n     */\n    setOlMap(olMap) {\n        if (olMap === undefined) {\n            this.clearOlInnerOverlaySource();\n            this.removeOlInnerOverlayLayer();\n            this.removeDrawLineControl();\n            this.olMap = olMap;\n            return;\n        }\n        this.olMap = olMap;\n        this.addOlInnerOverlayLayer();\n        this.addDrawLineControl();\n    }\n    /**\n     * Return the overlay source\n     */\n    getSource() {\n        return this.olOverlaySource;\n    }\n    /**\n     * Add an OL geometry to the overlay for slicing\n     * @param olGeometry Ol Geometry\n     */\n    setOlGeometry(olGeometry) {\n        const olFeature$1 = new olFeature({ geometry: olGeometry });\n        this.olOverlaySource.clear(true);\n        this.olOverlaySource.addFeature(olFeature$1);\n    }\n    /**\n     * Create an overlay source if none is defined in the options\n     */\n    createOlInnerOverlayLayer() {\n        return new OlVectorLayer({\n            source: this.options.source ? this.options.source : new OlVectorSource(),\n            style: this.options.layerStyle,\n            zIndex: 500\n        });\n    }\n    /**\n     * Clear the overlay layer if it wasn't defined in the options\n     */\n    removeOlInnerOverlayLayer() {\n        if (this.options.layer === undefined && this.olMap !== undefined) {\n            this.olMap.removeLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Add the overlay layer if it wasn't defined in the options\n     */\n    addOlInnerOverlayLayer() {\n        if (this.options.layer === undefined) {\n            this.olMap.addLayer(this.olOverlayLayer);\n        }\n    }\n    /**\n     * Clear the overlay source if it wasn't defined in the options\n     */\n    clearOlInnerOverlaySource() {\n        if (this.options.layer === undefined && this.options.source === undefined) {\n            this.olOverlaySource.clear(true);\n        }\n    }\n    /**\n     * Create a draw line control and add it to the map\n     */\n    addDrawLineControl() {\n        this.drawLineControl = new DrawControl({\n            geometryType: 'LineString',\n            drawStyle: this.options.drawStyle,\n            maxPoints: 2\n        });\n        this.drawLineStart$$ = this.drawLineControl.start$\n            .subscribe((olLine) => this.onDrawLineStart(olLine));\n        this.drawLineEnd$$ = this.drawLineControl.end$\n            .subscribe((olLine) => this.onDrawLineEnd(olLine));\n        this.drawLineControl.setOlMap(this.olMap);\n    }\n    /**\n     * Remove draw line control\n     */\n    removeDrawLineControl() {\n        if (this.drawLineControl === undefined) {\n            return;\n        }\n        this.drawLineStart$$.unsubscribe();\n        this.drawLineEnd$$.unsubscribe();\n        this.drawLineControl.getSource().clear(true);\n        this.drawLineControl.setOlMap(undefined);\n    }\n    /**\n     * Clear the draw source and track the geometry being draw\n     * @param olLine Ol linestring or polygon\n     */\n    onDrawLineStart(olLine) {\n        this.drawLineControl.getSource().clear(true);\n    }\n    /**\n     * Slice the first geometry encountered with the drawn line\n     * @param olLine Ol linestring\n     */\n    onDrawLineEnd(olLine) {\n        const olSlicedGeometries = [];\n        const lineExtent = olLine.getExtent();\n        const olFeaturesToRemove = [];\n        try {\n            this.olOverlaySource.forEachFeatureInExtent(lineExtent, (olFeature) => {\n                const olGeometry = olFeature.getGeometry();\n                const olParts = sliceOlGeometry(olGeometry, olLine);\n                if (olParts.length > 0) {\n                    olSlicedGeometries.push(...olParts);\n                    olFeaturesToRemove.push(olFeature);\n                }\n            });\n        }\n        catch (e) {\n            if (e instanceof GeometrySliceError) {\n                this.error$.next(e);\n                return;\n            }\n            else {\n                throw e;\n            }\n        }\n        this.drawLineControl.getSource().clear(true);\n        this.olOverlaySource.addFeatures(olSlicedGeometries.map((olGeometry) => new olFeature(olGeometry)));\n        olFeaturesToRemove.forEach((olFeature) => {\n            this.olOverlaySource.removeFeature(olFeature);\n        });\n        this.error$.next(undefined);\n        this.end$.next(olSlicedGeometries);\n    }\n}\n\nvar LayerListToolControlsEnum;\n(function (LayerListToolControlsEnum) {\n    LayerListToolControlsEnum[\"always\"] = \"always\";\n    LayerListToolControlsEnum[\"never\"] = \"never\";\n    LayerListToolControlsEnum[\"default\"] = \"default\";\n})(LayerListToolControlsEnum || (LayerListToolControlsEnum = {}));\n\nclass MeasurerDialogComponent {\n    constructor(dialogRef, data) {\n        this.dialogRef = dialogRef;\n        this.data = data;\n        this.measureAreaUnit = MeasureAreaUnit;\n        this.measureLengthUnit = MeasureLengthUnit;\n    }\n    onNoClick() {\n        this.dialogRef.close();\n    }\n}\nMeasurerDialogComponent.ɵfac = function MeasurerDialogComponent_Factory(t) { return new (t || MeasurerDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc24.MatDialogRef), ɵngcc0.ɵɵdirectiveInject(MAT_DIALOG_DATA)); };\nMeasurerDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MeasurerDialogComponent, selectors: [[\"igo-measurer-dialog\"]], decls: 88, vars: 79, consts: [[\"mat-dialog-content\", \"\"], [\"colspan\", \"2\"]], template: function MeasurerDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"h3\");\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵpipe(3, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"table\");\n        ɵngcc0.ɵɵelementStart(5, \"thead\");\n        ɵngcc0.ɵɵelementStart(6, \"tr\");\n        ɵngcc0.ɵɵelementStart(7, \"th\", 1);\n        ɵngcc0.ɵɵtext(8);\n        ɵngcc0.ɵɵpipe(9, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"tbody\");\n        ɵngcc0.ɵɵelementStart(11, \"tr\");\n        ɵngcc0.ɵɵelementStart(12, \"td\");\n        ɵngcc0.ɵɵtext(13);\n        ɵngcc0.ɵɵpipe(14, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(15, \"td\");\n        ɵngcc0.ɵɵtext(16);\n        ɵngcc0.ɵɵpipe(17, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(18, \"tr\");\n        ɵngcc0.ɵɵelementStart(19, \"td\");\n        ɵngcc0.ɵɵtext(20);\n        ɵngcc0.ɵɵpipe(21, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(22, \"td\");\n        ɵngcc0.ɵɵtext(23);\n        ɵngcc0.ɵɵpipe(24, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(25, \"tr\");\n        ɵngcc0.ɵɵelementStart(26, \"td\");\n        ɵngcc0.ɵɵtext(27);\n        ɵngcc0.ɵɵpipe(28, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(29, \"td\");\n        ɵngcc0.ɵɵtext(30);\n        ɵngcc0.ɵɵpipe(31, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(32, \"tr\");\n        ɵngcc0.ɵɵelementStart(33, \"td\");\n        ɵngcc0.ɵɵtext(34);\n        ɵngcc0.ɵɵpipe(35, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(36, \"td\");\n        ɵngcc0.ɵɵtext(37);\n        ɵngcc0.ɵɵpipe(38, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(39, \"table\");\n        ɵngcc0.ɵɵelementStart(40, \"thead\");\n        ɵngcc0.ɵɵelementStart(41, \"tr\");\n        ɵngcc0.ɵɵelementStart(42, \"th\", 1);\n        ɵngcc0.ɵɵtext(43);\n        ɵngcc0.ɵɵpipe(44, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(45, \"tbody\");\n        ɵngcc0.ɵɵelementStart(46, \"tr\");\n        ɵngcc0.ɵɵelementStart(47, \"td\");\n        ɵngcc0.ɵɵtext(48);\n        ɵngcc0.ɵɵpipe(49, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(50, \"td\");\n        ɵngcc0.ɵɵtext(51);\n        ɵngcc0.ɵɵpipe(52, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(53, \"tr\");\n        ɵngcc0.ɵɵelementStart(54, \"td\");\n        ɵngcc0.ɵɵtext(55);\n        ɵngcc0.ɵɵpipe(56, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(57, \"td\");\n        ɵngcc0.ɵɵtext(58);\n        ɵngcc0.ɵɵpipe(59, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(60, \"tr\");\n        ɵngcc0.ɵɵelementStart(61, \"td\");\n        ɵngcc0.ɵɵtext(62);\n        ɵngcc0.ɵɵpipe(63, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(64, \"td\");\n        ɵngcc0.ɵɵtext(65);\n        ɵngcc0.ɵɵpipe(66, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(67, \"tr\");\n        ɵngcc0.ɵɵelementStart(68, \"td\");\n        ɵngcc0.ɵɵtext(69);\n        ɵngcc0.ɵɵpipe(70, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(71, \"td\");\n        ɵngcc0.ɵɵtext(72);\n        ɵngcc0.ɵɵpipe(73, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(74, \"tr\");\n        ɵngcc0.ɵɵelementStart(75, \"td\");\n        ɵngcc0.ɵɵtext(76);\n        ɵngcc0.ɵɵpipe(77, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(78, \"td\");\n        ɵngcc0.ɵɵtext(79);\n        ɵngcc0.ɵɵpipe(80, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(81, \"tr\");\n        ɵngcc0.ɵɵelementStart(82, \"td\");\n        ɵngcc0.ɵɵtext(83);\n        ɵngcc0.ɵɵpipe(84, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(85, \"td\");\n        ɵngcc0.ɵɵtext(86);\n        ɵngcc0.ɵɵpipe(87, \"measureFormat\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 23, \"igo.geo.measure.dialog.title\"));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 25, \"igo.geo.measure.dialog.length.title\"));\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(14, 27, \"igo.geo.measure.dialog.lengthInMeters\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(17, 29, ctx.data.length, ctx.measureLengthUnit.Meters));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(21, 32, \"igo.geo.measure.dialog.lengthInKilometers\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(24, 34, ctx.data.length, ctx.measureLengthUnit.Kilometers));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(28, 37, \"igo.geo.measure.dialog.lengthInMiles\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(31, 39, ctx.data.length, ctx.measureLengthUnit.Miles));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(35, 42, \"igo.geo.measure.dialog.lengthInFeet\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(38, 44, ctx.data.length, ctx.measureLengthUnit.Feet));\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(44, 47, \"igo.geo.measure.dialog.area.title\"));\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(49, 49, \"igo.geo.measure.dialog.areaInSquareMeters\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(52, 51, ctx.data.area, ctx.measureAreaUnit.SquareMeters));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(56, 54, \"igo.geo.measure.dialog.areaInSquareKilometers\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(59, 56, ctx.data.area, ctx.measureAreaUnit.SquareKilometers));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(63, 59, \"igo.geo.measure.dialog.areaInSquareMiles\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(66, 61, ctx.data.area, ctx.measureAreaUnit.SquareMiles));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(70, 64, \"igo.geo.measure.dialog.areaInAcres\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(73, 66, ctx.data.area, ctx.measureAreaUnit.Acres));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(77, 69, \"igo.geo.measure.dialog.areaInHectares\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(80, 71, ctx.data.area, ctx.measureAreaUnit.Hectares));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(84, 74, \"igo.geo.measure.dialog.perimeterInMeters\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(87, 76, ctx.data.perimeter, ctx.measureLengthUnit.Meters));\n    } }, pipes: function () { return [ɵngcc5.TranslatePipe, MeasureFormatPipe]; }, styles: [\"[_nghost-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}h3[_ngcontent-%COMP%]{margin:0;text-align:center}table[_ngcontent-%COMP%]{padding:10px;width:100%}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:10px}\"] });\nMeasurerDialogComponent.ctorParameters = () => [\n    { type: MatDialogRef },\n    { type: undefined, decorators: [{ type: Inject, args: [MAT_DIALOG_DATA,] }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MeasurerDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-measurer-dialog',\n                template: \"<div mat-dialog-content>\\n  <h3>{{'igo.geo.measure.dialog.title' | translate}}</h3>\\n\\n  <table>\\n    <thead>\\n      <tr>\\n        <th colspan=\\\"2\\\">{{'igo.geo.measure.dialog.length.title' | translate}}</th>\\n      </tr>\\n    </thead>\\n    <tbody>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.lengthInMeters' | translate}}</td>\\n        <td>{{data.length | measureFormat: measureLengthUnit.Meters}}</td>\\n      </tr>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.lengthInKilometers' | translate}}</td>\\n        <td>{{data.length | measureFormat: measureLengthUnit.Kilometers}}</td>\\n      </tr>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.lengthInMiles' | translate}}</td>\\n        <td>{{data.length | measureFormat: measureLengthUnit.Miles}}</td>\\n      </tr>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.lengthInFeet' | translate}}</td>\\n        <td>{{data.length | measureFormat: measureLengthUnit.Feet}}</td>\\n      </tr>\\n    </tbody>\\n  </table>\\n\\n  <table>\\n    <thead>\\n      <tr>\\n        <th colspan=\\\"2\\\">{{'igo.geo.measure.dialog.area.title' | translate}}</th>\\n      </tr>\\n    </thead>\\n    <tbody>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.areaInSquareMeters' | translate}}</td>\\n        <td>{{data.area | measureFormat: measureAreaUnit.SquareMeters}}</td>\\n      </tr>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.areaInSquareKilometers' | translate}}</td>\\n        <td>{{data.area | measureFormat:measureAreaUnit.SquareKilometers}}</td>\\n      </tr>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.areaInSquareMiles' | translate}}</td>\\n        <td>{{data.area | measureFormat: measureAreaUnit.SquareMiles}}</td>\\n      </tr>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.areaInAcres' | translate}}</td>\\n        <td>{{data.area | measureFormat: measureAreaUnit.Acres}}</td>\\n      </tr>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.areaInHectares' | translate}}</td>\\n        <td>{{data.area | measureFormat: measureAreaUnit.Hectares}}</td>\\n      </tr>\\n      <tr>\\n        <td>{{'igo.geo.measure.dialog.perimeterInMeters' | translate}}</td>\\n        <td>{{data.perimeter | measureFormat: measureLengthUnit.Meters}}</td>\\n      </tr>\\n    </tbody>\\n  </table>\\n</div>\\n\",\n                styles: [\":host{font-family:Roboto,Helvetica Neue,sans-serif}h3{margin:0;text-align:center}table{padding:10px;width:100%}table tbody tr td:last-child{padding-left:10px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc24.MatDialogRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [MAT_DIALOG_DATA]\n            }] }]; }, null); })();\n\n/**\n * Tool to measure lengths and areas\n */\nclass MeasurerComponent {\n    constructor(languageService, dialog) {\n        this.languageService = languageService;\n        this.dialog = dialog;\n        /**\n         * Table template\n         * @internal\n         */\n        this.tableTemplate = {\n            selection: true,\n            selectMany: true,\n            selectionCheckbox: true,\n            sort: true,\n            columns: [\n                {\n                    name: 'length',\n                    title: this.languageService.translate.instant('igo.geo.measure.lengthHeader'),\n                    valueAccessor: (feature) => {\n                        const unit = this.activeLengthUnit;\n                        const measure = metersToUnit(feature.properties.measure.length, unit);\n                        return formatMeasure(measure, {\n                            decimal: 1,\n                            unit,\n                            unitAbbr: false,\n                            locale: 'fr'\n                        });\n                    }\n                },\n                {\n                    name: 'area',\n                    title: this.languageService.translate.instant('igo.geo.measure.areaHeader'),\n                    valueAccessor: (feature) => {\n                        const unit = this.activeAreaUnit;\n                        const measure = squareMetersToUnit(feature.properties.measure.area, unit);\n                        return measure ? formatMeasure(measure, {\n                            decimal: 1,\n                            unit,\n                            unitAbbr: false,\n                            locale: 'fr'\n                        }) : '';\n                    }\n                }\n            ]\n        };\n        /**\n         * Reference to the MeasureType enum\n         * @internal\n         */\n        this.measureType = MeasureType;\n        /**\n         * Reference to the AreaMeasureUnit enum\n         * @internal\n         */\n        this.measureAreaUnit = MeasureAreaUnit;\n        /**\n         * Reference to the LengthMeasureUnit enum\n         * @internal\n         */\n        this.measureLengthUnit = MeasureLengthUnit;\n        /**\n         * Whether measure units should be automatically determined\n         * @internal\n         */\n        this.measureUnitsAuto = false;\n        /**\n         * Observable of area\n         * @internal\n         */\n        this.measure$ = new BehaviorSubject({});\n        /**\n         * Observable of selected features\n         * @internal\n         */\n        this.selectedFeatures$ = new BehaviorSubject([]);\n        /**\n         * OL draw source\n         * @internal\n         */\n        this.showTooltips = true;\n        /**\n         * Active mlength unit\n         */\n        this.activeLengthUnit = MeasureLengthUnit.Meters;\n        /**\n         * Active area unit\n         */\n        this.activeAreaUnit = MeasureAreaUnit.SquareMeters;\n        /**\n         * OL draw source\n         */\n        this.olDrawSource = new OlVectorSource();\n        this._activeMeasureType = MeasureType.Length;\n        /**\n         * The minimum length a segment must have to display a tooltip.\n         * It also applies to area tooltips.\n         */\n        this.minSegmentLength = 10;\n    }\n    /**\n     * Measure type\n     * @internal\n     */\n    set activeMeasureType(value) { this.setActiveMeasureType(value); }\n    get activeMeasureType() { return this._activeMeasureType; }\n    /**\n     * Wheter one of the draw control is active\n     * @internal\n     */\n    get drawControlIsActive() {\n        return this.activeDrawControl !== undefined;\n    }\n    get projection() {\n        return this.map.ol.getView().getProjection();\n    }\n    /**\n     * Add draw controls and activate one\n     * @internal\n     */\n    ngOnInit() {\n        this.initStore();\n        this.createDrawLineControl();\n        this.createDrawPolygonControl();\n        this.createModifyControl();\n        this.toggleDrawControl();\n        this.onToggleTooltips(this.showTooltips);\n        this.updateTooltipsOfOlSource(this.store.source.ol);\n    }\n    /**\n     * Clear the overlay layer and any interaction added by this component.\n     * @internal\n     */\n    ngOnDestroy() {\n        this.setActiveMeasureType(undefined);\n        this.deactivateModifyControl();\n        this.freezeStore();\n    }\n    /**\n     * Set the measure type\n     * @internal\n     */\n    onMeasureTypeChange(measureType) {\n        this.activeMeasureType = measureType;\n    }\n    /**\n     * Activate or deactivate the current draw control\n     * @internal\n     */\n    onToggleDrawControl(toggle) {\n        if (toggle === true) {\n            this.toggleDrawControl();\n        }\n        else {\n            this.deactivateDrawControl();\n        }\n    }\n    /**\n     * Activate or deactivate the current draw control\n     * @internal\n     */\n    onToggleTooltips(toggle) {\n        this.showTooltips = toggle;\n        if (toggle === true) {\n            this.showTooltipsOfOlSource(this.store.source.ol);\n        }\n        else {\n            this.clearTooltipsOfOlSource(this.store.source.ol);\n        }\n    }\n    /**\n     * Activate or deactivate the current draw control\n     * @internal\n     */\n    onToggleMeasureUnitsAuto(toggle) {\n        this.measureUnitsAuto = toggle;\n    }\n    /**\n     * Set the measure type\n     * @internal\n     */\n    onLengthUnitChange(unit) {\n        this.activeLengthUnit = unit;\n        this.table.refresh();\n        this.updateTooltipsOfOlSource(this.store.source.ol);\n        if (this.activeOlGeometry !== undefined) {\n            this.updateTooltipsOfOlGeometry(this.activeOlGeometry);\n        }\n    }\n    /**\n     * Set the measure type\n     * @internal\n     */\n    onAreaUnitChange(unit) {\n        this.activeAreaUnit = unit;\n        this.table.refresh();\n        this.updateTooltipsOfOlSource(this.store.source.ol);\n        if (this.activeOlGeometry !== undefined) {\n            this.updateTooltipsOfOlGeometry(this.activeOlGeometry);\n        }\n    }\n    onCalculateClick() {\n        const features = this.selectedFeatures$.value;\n        const area = features.reduce((sum, feature) => {\n            return sum + feature.properties.measure.area || 0;\n        }, 0);\n        const length = features.reduce((sum, feature) => {\n            if (feature.geometry.type === 'Polygon') {\n                return sum;\n            }\n            return sum + feature.properties.measure.length || 0;\n        }, 0);\n        const perimeter = features.reduce((sum, feature) => {\n            if (feature.geometry.type === 'LineString') {\n                return sum;\n            }\n            return sum + feature.properties.measure.length || 0;\n        }, 0);\n        this.openDialog({\n            area,\n            length,\n            perimeter\n        });\n    }\n    onDeleteClick() {\n        this.store.deleteMany(this.selectedFeatures$.value);\n    }\n    onModifyClick() {\n        if (this.selectedFeatures$.value.length !== 1) {\n            return;\n        }\n        if (this.modifyControl.active === true) {\n            this.deactivateModifyControl();\n            this.toggleDrawControl();\n        }\n        else {\n            const feature = this.selectedFeatures$.value[0];\n            const olFeatures = this.store.layer.ol.getSource().getFeatures();\n            const olFeature = olFeatures.find((_olFeature) => {\n                return _olFeature.get('id') === feature.properties.id;\n            });\n            if (olFeature !== undefined) {\n                this.deactivateDrawControl();\n                this.activateModifyControl();\n                const olGeometry = olFeature.getGeometry();\n                this.clearTooltipsOfOlGeometry(olGeometry);\n                this.modifyControl.setOlGeometry(olGeometry);\n            }\n        }\n    }\n    openDialog(data) {\n        this.dialog.open(MeasurerDialogComponent, { data });\n    }\n    /**\n     * Initialize the measure store and set up some listeners\n     * @internal\n     */\n    initStore() {\n        const store = this.store;\n        const layer = new VectorLayer({\n            title: 'Measures',\n            zIndex: 200,\n            source: new FeatureDataSource(),\n            style: createMeasureLayerStyle(),\n            showInLayerList: false,\n            exportable: false,\n            browsable: false\n        });\n        tryBindStoreLayer(store, layer);\n        tryAddLoadingStrategy(store);\n        tryAddSelectionStrategy(store, new FeatureStoreSelectionStrategy({\n            map: this.map,\n            many: true\n        }));\n        this.onFeatureAddedKey = store.source.ol.on('addfeature', (event) => {\n            const feature = event.feature;\n            const olGeometry = feature.getGeometry();\n            this.updateMeasureOfOlGeometry(olGeometry, feature.get('measure'));\n        });\n        this.onFeatureRemovedKey = store.source.ol.on('removefeature', (event) => {\n            const olGeometry = event.feature.getGeometry();\n            this.clearTooltipsOfOlGeometry(olGeometry);\n        });\n        this.selectedFeatures$$ = store.stateView.manyBy$((record) => {\n            return record.state.selected === true;\n        }).pipe(skip(1) // Skip initial emission\n        )\n            .subscribe((records) => {\n            if (this.modifyControl.active === true) {\n                this.deactivateModifyControl();\n            }\n            this.selectedFeatures$.next(records.map(record => record.entity));\n        });\n    }\n    /**\n     * Freeze any store, meaning the layer is removed, strategies are deactivated\n     * and some listener removed\n     * @internal\n     */\n    freezeStore() {\n        const store = this.store;\n        this.selectedFeatures$$.unsubscribe();\n        unByKey(this.onFeatureAddedKey);\n        unByKey(this.onFeatureRemovedKey);\n        this.clearTooltipsOfOlSource(store.source.ol);\n        this.map.removeLayer(store.layer);\n        store.deactivateStrategyOfType(FeatureStoreLoadingStrategy);\n        store.deactivateStrategyOfType(FeatureStoreSelectionStrategy);\n    }\n    /**\n     * Create a draw line control\n     */\n    createDrawLineControl() {\n        this.drawLineControl = new DrawControl({\n            geometryType: 'LineString',\n            source: this.olDrawSource,\n            drawStyle: createMeasureInteractionStyle(),\n            layerStyle: new OlStyle({})\n        });\n    }\n    /**\n     * Create a draw polygon control\n     */\n    createDrawPolygonControl() {\n        this.drawPolygonControl = new DrawControl({\n            geometryType: 'Polygon',\n            source: this.olDrawSource,\n            drawStyle: createMeasureInteractionStyle(),\n            layerStyle: new OlStyle({})\n        });\n    }\n    /**\n     * Create a draw polygon control\n     */\n    createModifyControl() {\n        this.modifyControl = new ModifyControl({\n            source: this.olDrawSource,\n            drawStyle: createMeasureInteractionStyle(),\n            layerStyle: new OlStyle({})\n        });\n    }\n    /**\n     * Activate the right control\n     */\n    toggleDrawControl() {\n        this.deactivateDrawControl();\n        // this.deactivateModifyControl();\n        if (this.activeMeasureType === MeasureType.Length) {\n            this.activateDrawControl(this.drawLineControl);\n        }\n        else if (this.activeMeasureType === MeasureType.Area) {\n            this.activateDrawControl(this.drawPolygonControl);\n        }\n    }\n    /**\n     * Activate a given control\n     * @param drawControl Draw control\n     */\n    activateDrawControl(drawControl) {\n        this.activeDrawControl = drawControl;\n        this.drawStart$$ = drawControl.start$\n            .subscribe((olGeometry) => this.onDrawStart(olGeometry));\n        this.drawEnd$$ = drawControl.end$\n            .subscribe((olGeometry) => this.onDrawEnd(olGeometry));\n        this.drawChanges$$ = drawControl.changes$\n            .subscribe((olGeometry) => this.onDrawChanges(olGeometry));\n        drawControl.setOlMap(this.map.ol);\n    }\n    /**\n     * Deactivate the active draw control\n     */\n    deactivateDrawControl() {\n        if (this.activeDrawControl === undefined) {\n            return;\n        }\n        this.olDrawSource.clear();\n        if (this.drawStart$$ !== undefined) {\n            this.drawStart$$.unsubscribe();\n        }\n        if (this.drawEnd$$ !== undefined) {\n            this.drawEnd$$.unsubscribe();\n        }\n        if (this.drawChanges$$ !== undefined) {\n            this.drawChanges$$.unsubscribe();\n        }\n        this.clearTooltipsOfOlSource(this.olDrawSource);\n        if (this.activeOlGeometry !== undefined) {\n            this.clearTooltipsOfOlGeometry(this.activeOlGeometry);\n        }\n        this.activeDrawControl.setOlMap(undefined);\n        this.activeDrawControl = undefined;\n        this.activeOlGeometry = undefined;\n    }\n    setActiveMeasureType(measureType) {\n        this._activeMeasureType = measureType;\n        this.clearMeasures();\n        this.toggleDrawControl();\n    }\n    /**\n     * Clear the draw source and track the geometry being drawn\n     * @param olGeometry Ol linestring or polygon\n     */\n    onDrawStart(olGeometry) {\n        this.activeOlGeometry = olGeometry;\n    }\n    /**\n     * Clear the draw source and track the geometry being draw\n     * @param olGeometry Ol linestring or polygon\n     */\n    onDrawEnd(olGeometry) {\n        this.activeOlGeometry = undefined;\n        this.finalizeMeasureOfOlGeometry(olGeometry);\n        this.addFeatureToStore(olGeometry);\n        this.clearTooltipsOfOlGeometry(olGeometry);\n        this.olDrawSource.clear(true);\n    }\n    /**\n     * Update measures observables and map tooltips\n     * @param olGeometry Ol linestring or polygon\n     */\n    onDrawChanges(olGeometry) {\n        const measure = measureOlGeometry(olGeometry, this.projection);\n        this.updateMeasureOfOlGeometry(olGeometry, Object.assign({}, measure, {\n            area: undefined // We don't want to display an area tooltip while drawing.\n        }));\n        this.measure$.next(measure);\n    }\n    /**\n     * Activate a given control\n     * @param modifyControl Modify control\n     */\n    activateModifyControl() {\n        const selection = this.store.getStrategyOfType(FeatureStoreSelectionStrategy);\n        selection.deactivate();\n        selection.clear();\n        this.modifyStart$$ = this.modifyControl.start$\n            .subscribe((olGeometry) => this.onModifyStart(olGeometry));\n        this.modifyEnd$$ = this.modifyControl.end$\n            .subscribe((olGeometry) => this.onModifyEnd(olGeometry));\n        this.modifyChanges$$ = this.modifyControl.changes$\n            .subscribe((olGeometry) => this.onModifyChanges(olGeometry));\n        this.modifyControl.setOlMap(this.map.ol);\n    }\n    /**\n     * Deactivate the active modify control\n     */\n    deactivateModifyControl() {\n        if (this.modifyStart$$ !== undefined) {\n            this.modifyStart$$.unsubscribe();\n        }\n        if (this.modifyEnd$$ !== undefined) {\n            this.modifyEnd$$.unsubscribe();\n        }\n        if (this.modifyChanges$$ !== undefined) {\n            this.modifyChanges$$.unsubscribe();\n        }\n        if (this.activeOlGeometry !== undefined) {\n            if (this.selectedFeatures$.value.length === 1) {\n                const feature = this.selectedFeatures$.value[0];\n                this.addFeatureToStore(this.activeOlGeometry, feature);\n            }\n            this.finalizeMeasureOfOlGeometry(this.activeOlGeometry);\n        }\n        this.olDrawSource.clear();\n        this.store.activateStrategyOfType(FeatureStoreSelectionStrategy);\n        this.activeOlGeometry = undefined;\n        this.modifyControl.setOlMap(undefined);\n    }\n    /**\n     * Clear the draw source and track the geometry being drawn\n     * @param olGeometry Ol linestring or polygon\n     */\n    onModifyStart(olGeometry) {\n        this.onDrawStart(olGeometry);\n    }\n    /**\n     * Update measures observables and map tooltips\n     * @param olGeometry Ol linestring or polygon\n     */\n    onModifyChanges(olGeometry) {\n        this.onDrawChanges(olGeometry);\n    }\n    /**\n     * Clear the draw source and track the geometry being draw\n     * @param olGeometry Ol linestring or polygon\n     */\n    onModifyEnd(olGeometry) {\n        this.finalizeMeasureOfOlGeometry(olGeometry);\n    }\n    finalizeMeasureOfOlGeometry(olGeometry) {\n        let measure = measureOlGeometry(olGeometry, this.projection);\n        if (olGeometry instanceof OlPolygon) {\n            measure = Object.assign({}, measure, {\n                lengths: [] // We don't want to display an area tooltip while drawing.\n            });\n        }\n        this.updateMeasureOfOlGeometry(olGeometry, measure);\n    }\n    /**\n     * Update measures observables\n     * @param olGeometry Ol linestring or polygon\n     * @param measure Measure\n     */\n    updateMeasureOfOlGeometry(olGeometry, measure) {\n        olGeometry.setProperties({ _measure: measure }, true);\n        this.updateTooltipsOfOlGeometry(olGeometry);\n    }\n    /**\n     * Clear the measures observables\n     */\n    clearMeasures() {\n        this.measure$.next({});\n    }\n    /**\n     * Add a feature with measures to the store. The loading stragegy of the store\n     * will trigger and add the feature to the map.\n     * @internal\n     */\n    addFeatureToStore(olGeometry, feature) {\n        const featureId = feature ? feature.properties.id : uuid();\n        const projection = this.map.ol.getView().getProjection();\n        const geometry = new OlGeoJSON().writeGeometryObject(olGeometry, {\n            featureProjection: projection,\n            dataProjection: projection\n        });\n        this.store.update({\n            type: FEATURE,\n            geometry,\n            projection: projection.getCode(),\n            properties: {\n                id: featureId,\n                measure: olGeometry.get('_measure')\n            },\n            meta: {\n                id: featureId\n            }\n        });\n    }\n    /**\n     * Update all the tooltips of an OL geometry\n     * @param olGeometry OL Geometry\n     * @param lengths Lengths of the OL geometry's segments\n     * @param measureUnit Display tooltip measure in those units\n     */\n    updateTooltipsOfOlGeometry(olGeometry) {\n        const measure = olGeometry.get('_measure');\n        const lengths = measure.lengths;\n        const area = measure.area;\n        const olMidpointsTooltips = updateOlTooltipsAtMidpoints(olGeometry);\n        if (lengths.length === olMidpointsTooltips.length) {\n            for (let i = 0; i < olMidpointsTooltips.length; i++) {\n                const length = lengths[i];\n                if (length !== undefined) {\n                    this.updateOlTooltip(olMidpointsTooltips[i], metersToUnit(length, this.activeLengthUnit), this.activeLengthUnit, MeasureType.Length);\n                }\n            }\n        }\n        if (area !== undefined) {\n            this.updateOlTooltip(updateOlTooltipAtCenter(olGeometry), squareMetersToUnit(area, this.activeAreaUnit), this.activeAreaUnit, MeasureType.Area);\n        }\n    }\n    /**\n     * Show the map tooltips of a geoemtry\n     */\n    showTooltipsOfOlGeometry(olGeometry) {\n        getTooltipsOfOlGeometry(olGeometry).forEach((olTooltip) => {\n            if (this.shouldShowTooltip(olTooltip)) {\n                this.map.ol.addOverlay(olTooltip);\n            }\n        });\n    }\n    /**\n     * Clear the tooltips of an OL geometrys\n     * @param olGeometry OL geometry with tooltips\n     */\n    clearTooltipsOfOlGeometry(olGeometry) {\n        getTooltipsOfOlGeometry(olGeometry).forEach((olTooltip) => {\n            if (olTooltip !== undefined && olTooltip.getMap() !== undefined) {\n                this.map.ol.removeOverlay(olTooltip);\n            }\n        });\n    }\n    /**\n     * Show the map tooltips of all the geometries of a source\n     */\n    updateTooltipsOfOlSource(olSource) {\n        olSource.forEachFeature((olFeature) => {\n            this.updateTooltipsOfOlGeometry(olFeature.getGeometry());\n        });\n    }\n    /**\n     * Show the map tooltips of all the geometries of a source\n     */\n    showTooltipsOfOlSource(olSource) {\n        olSource.forEachFeature((olFeature) => {\n            this.showTooltipsOfOlGeometry(olFeature.getGeometry());\n        });\n    }\n    /**\n     * Clear the map tooltips\n     * @param olDrawSource OL vector source\n     */\n    clearTooltipsOfOlSource(olSource) {\n        olSource.forEachFeature((olFeature) => {\n            const olGeometry = olFeature.getGeometry();\n            if (olGeometry !== undefined) {\n                this.clearTooltipsOfOlGeometry(olFeature.getGeometry());\n            }\n        });\n    }\n    /**\n     * Update an OL tooltip properties and inner HTML and add it to the map if possible\n     * @param olTooltip OL tooltip\n     * @param measure The measure valeu ti display\n     * @param measureUnit Display tooltip measure in those units\n     */\n    updateOlTooltip(olTooltip, measure, unit, type) {\n        olTooltip.setProperties({ _measure: measure, _unit: unit, _type: type }, true);\n        olTooltip.getElement().innerHTML = this.computeTooltipInnerHTML(olTooltip);\n        if (this.shouldShowTooltip(olTooltip)) {\n            this.map.ol.addOverlay(olTooltip);\n        }\n    }\n    /**\n     * Compute a tooltip's content\n     * @param olTooltip OL overlay\n     * @returns Inner HTML\n     */\n    computeTooltipInnerHTML(olTooltip) {\n        const properties = olTooltip.getProperties();\n        return formatMeasure(properties._measure, {\n            decimal: 1,\n            unit: properties._unit,\n            unitAbbr: true,\n            locale: 'fr'\n        }, this.languageService);\n    }\n    /**\n     * Whether a tooltip should be showned based on the length\n     * of the segment it is bound to.\n     * @param olTooltip OL overlay\n     * @returns True if the tooltip should be shown\n     */\n    shouldShowTooltip(olTooltip) {\n        if (this.showTooltips === false) {\n            return false;\n        }\n        const properties = olTooltip.getProperties();\n        const measure = properties._measure;\n        if (measure === undefined) {\n            return false;\n        }\n        if (properties._unit === MeasureType.Length) {\n            const minSegmentLength = metersToUnit(this.minSegmentLength, properties._unit) || 0;\n            return measure > Math.max(minSegmentLength, 0);\n        }\n        return true;\n    }\n}\nMeasurerComponent.ɵfac = function MeasurerComponent_Factory(t) { return new (t || MeasurerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc7.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc24.MatDialog)); };\nMeasurerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MeasurerComponent, selectors: [[\"igo-measurer\"]], viewQuery: function MeasurerComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c14, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.table = _t.first);\n    } }, inputs: { minSegmentLength: \"minSegmentLength\", activeMeasureType: \"activeMeasureType\", map: \"map\", store: \"store\" }, decls: 32, vars: 41, consts: [[1, \"measure-type-toggle\", \"mat-typography\"], [3, \"value\", \"change\"], [3, \"value\"], [1, \"measure-options\", \"mat-typography\"], [3, \"checked\", \"labelPosition\", \"change\"], [4, \"ngIf\"], [1, \"measure-store-buttons\"], [\"mat-icon-button\", \"\", 3, \"matTooltip\", \"disabled\", \"click\"], [\"svgIcon\", \"calculator\"], [\"svgIcon\", \"delete\"], [1, \"table-compact\", 3, \"store\", \"template\"], [\"table\", \"\"], [3, \"measureType\", \"measureUnit\", \"measure\", \"auto\", \"placeholder\", \"measureUnitChange\"]], template: function MeasurerComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\");\n        ɵngcc0.ɵɵelementStart(1, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(2, \"mat-button-toggle-group\", 1);\n        ɵngcc0.ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_button_toggle_group_change_2_listener($event) { return ctx.onMeasureTypeChange($event.value); });\n        ɵngcc0.ɵɵelementStart(3, \"mat-button-toggle\", 2);\n        ɵngcc0.ɵɵtext(4);\n        ɵngcc0.ɵɵpipe(5, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"mat-button-toggle\", 2);\n        ɵngcc0.ɵɵtext(7);\n        ɵngcc0.ɵɵpipe(8, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(10, \"mat-slide-toggle\", 4);\n        ɵngcc0.ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_slide_toggle_change_10_listener($event) { return ctx.onToggleDrawControl($event.checked); });\n        ɵngcc0.ɵɵtext(11);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"mat-slide-toggle\", 4);\n        ɵngcc0.ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_slide_toggle_change_13_listener($event) { return ctx.onToggleTooltips($event.checked); });\n        ɵngcc0.ɵɵtext(14);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(16, \"mat-slide-toggle\", 4);\n        ɵngcc0.ɵɵlistener(\"change\", function MeasurerComponent_Template_mat_slide_toggle_change_16_listener($event) { return ctx.onToggleMeasureUnitsAuto($event.checked); });\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(19, MeasurerComponent_ng_container_19_Template, 5, 14, \"ng-container\", 5);\n        ɵngcc0.ɵɵpipe(20, \"async\");\n        ɵngcc0.ɵɵelementStart(21, \"div\", 6);\n        ɵngcc0.ɵɵelementStart(22, \"button\", 7);\n        ɵngcc0.ɵɵlistener(\"click\", function MeasurerComponent_Template_button_click_22_listener() { return ctx.onCalculateClick(); });\n        ɵngcc0.ɵɵpipe(23, \"translate\");\n        ɵngcc0.ɵɵpipe(24, \"async\");\n        ɵngcc0.ɵɵelement(25, \"mat-icon\", 8);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(26, \"button\", 7);\n        ɵngcc0.ɵɵlistener(\"click\", function MeasurerComponent_Template_button_click_26_listener() { return ctx.onDeleteClick(); });\n        ɵngcc0.ɵɵpipe(27, \"translate\");\n        ɵngcc0.ɵɵpipe(28, \"async\");\n        ɵngcc0.ɵɵelement(29, \"mat-icon\", 9);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(30, \"igo-entity-table\", 10, 11);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.activeMeasureType);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.measureType.Length);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(5, 21, \"igo.geo.measure.\" + ctx.measureType.Length), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.measureType.Area);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(8, 23, \"igo.geo.measure.\" + ctx.measureType.Area), \" \");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"checked\", ctx.drawControlIsActive)(\"labelPosition\", \"before\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(12, 25, \"igo.geo.measure.toggleActive\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"checked\", ctx.showTooltips)(\"labelPosition\", \"before\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(15, 27, \"igo.geo.measure.toggleMapTooltips\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"checked\", ctx.measureUnitsAuto)(\"labelPosition\", \"before\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(18, 29, \"igo.geo.measure.toggleAutoUnits\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(20, 31, ctx.measure$));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(23, 33, \"igo.geo.measure.actionbar.calculate.tooltip\"))(\"disabled\", ɵngcc0.ɵɵpipeBind1(24, 35, ctx.selectedFeatures$).length === 0);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(27, 37, \"igo.geo.measure.actionbar.delete.tooltip\"))(\"disabled\", ɵngcc0.ɵɵpipeBind1(28, 39, ctx.selectedFeatures$).length === 0);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"store\", ctx.store)(\"template\", ctx.tableTemplate);\n    } }, directives: function () { return [ɵngcc23.MatButtonToggleGroup, ɵngcc23.MatButtonToggle, ɵngcc20.MatSlideToggle, ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon, ɵngcc9.EntityTableComponent, MeasurerItemComponent]; }, pipes: function () { return [ɵngcc5.TranslatePipe, ɵngcc1.AsyncPipe]; }, styles: [\".measure-type-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.measure-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.measure-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:50%}.measure-options[_ngcontent-%COMP%]{overflow-x:hidden}.measure-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px;width:100%}.measure-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 60px)}.measure-store-buttons[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;border-top:1px solid #ddd;width:100%}.measure-store-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{margin-left:14px}.table-compact[_ngcontent-%COMP%]     .mat-header-cell.mat-column-selectionCheckbox{width:52px}\"], changeDetection: 0 });\nMeasurerComponent.ctorParameters = () => [\n    { type: LanguageService },\n    { type: MatDialog }\n];\nMeasurerComponent.propDecorators = {\n    map: [{ type: Input }],\n    store: [{ type: Input }],\n    activeMeasureType: [{ type: Input }],\n    minSegmentLength: [{ type: Input }],\n    table: [{ type: ViewChild, args: ['table', { static: true },] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MeasurerComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-measurer',\n                template: \"<div>\\n  <div class=\\\"measure-type-toggle mat-typography\\\">\\n    <mat-button-toggle-group\\n      [value]=\\\"activeMeasureType\\\"\\n      (change)=\\\"onMeasureTypeChange($event.value)\\\">\\n      <mat-button-toggle [value]=\\\"measureType.Length\\\">\\n        {{('igo.geo.measure.' + measureType.Length) | translate}}\\n      </mat-button-toggle>\\n      <mat-button-toggle [value]=\\\"measureType.Area\\\">\\n        {{('igo.geo.measure.' + measureType.Area) | translate}}\\n      </mat-button-toggle>\\n    </mat-button-toggle-group>\\n  </div>\\n\\n  <div class=\\\"measure-options mat-typography\\\">\\n    <mat-slide-toggle\\n      [checked]=\\\"drawControlIsActive\\\"\\n      [labelPosition]=\\\"'before'\\\"\\n      (change)=\\\"onToggleDrawControl($event.checked)\\\">\\n      {{'igo.geo.measure.toggleActive' | translate}}\\n    </mat-slide-toggle>\\n\\n    <mat-slide-toggle\\n      [checked]=\\\"showTooltips\\\"\\n      [labelPosition]=\\\"'before'\\\"\\n      (change)=\\\"onToggleTooltips($event.checked)\\\">\\n      {{'igo.geo.measure.toggleMapTooltips' | translate}}\\n    </mat-slide-toggle>\\n\\n    <mat-slide-toggle\\n      [checked]=\\\"measureUnitsAuto\\\"\\n      [labelPosition]=\\\"'before'\\\"\\n      (change)=\\\"onToggleMeasureUnitsAuto($event.checked)\\\">\\n      {{'igo.geo.measure.toggleAutoUnits' | translate}}\\n    </mat-slide-toggle>\\n  </div>\\n\\n  <ng-container *ngIf=\\\"measure$ | async as measure\\\">\\n    <igo-measurer-item\\n      [measureType]=\\\"measureType.Length\\\"\\n      [measureUnit]=\\\"measureLengthUnit.Meters\\\"\\n      [measure]=\\\"measure.length\\\"\\n      [auto]=\\\"measureUnitsAuto\\\"\\n      [placeholder]=\\\"(activeMeasureType === measureType.Area ? 'igo.geo.measure.perimeter' : 'igo.geo.measure.length') | translate\\\"\\n      (measureUnitChange)=\\\"onLengthUnitChange($event)\\\">\\n    </igo-measurer-item>\\n\\n    <igo-measurer-item\\n      [measureType]=\\\"measureType.Area\\\"\\n      [measureUnit]=\\\"measureAreaUnit.SquareMeters\\\"\\n      [measure]=\\\"measure.area\\\"\\n      [auto]=\\\"measureUnitsAuto\\\"\\n      [placeholder]=\\\"'igo.geo.measure.area' | translate\\\"\\n      (measureUnitChange)=\\\"onAreaUnitChange($event)\\\">\\n    </igo-measurer-item>\\n  </ng-container>\\n\\n  <div class=\\\"measure-store-buttons\\\">\\n    <button\\n      mat-icon-button\\n      [matTooltip]=\\\"'igo.geo.measure.actionbar.calculate.tooltip' | translate\\\"\\n      [disabled]=\\\"(selectedFeatures$ | async).length === 0\\\"\\n      (click)=\\\"onCalculateClick()\\\">\\n      <mat-icon svgIcon=\\\"calculator\\\"></mat-icon>\\n    </button>\\n\\n    <button\\n      mat-icon-button\\n      [matTooltip]=\\\"'igo.geo.measure.actionbar.delete.tooltip' | translate\\\"\\n      [disabled]=\\\"(selectedFeatures$ | async).length === 0\\\"\\n      (click)=\\\"onDeleteClick()\\\">\\n      <mat-icon svgIcon=\\\"delete\\\"></mat-icon>\\n    </button>\\n\\n    <!--button\\n      mat-icon-button\\n      [matTooltip]=\\\"'igo.geo.measure.actionbar.modify.tooltip' | translate\\\"\\n      [disabled]=\\\"(selectedFeatures$ | async).length !== 1\\\"\\n      (click)=\\\"onModifyClick()\\\">\\n      <mat-icon svgIcon=\\\"edit\\\"></mat-icon>\\n    </button-->\\n  </div>\\n\\n  <igo-entity-table\\n    #table\\n    class=\\\"table-compact\\\"\\n    [store]=\\\"store\\\"\\n    [template]=\\\"tableTemplate\\\">\\n  </igo-entity-table>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".measure-type-toggle{padding:10px;text-align:center}.measure-type-toggle mat-button-toggle-group{width:100%}.measure-type-toggle mat-button-toggle-group mat-button-toggle{width:50%}.measure-options{overflow-x:hidden}.measure-options mat-slide-toggle{margin:10px;width:100%}.measure-options mat-slide-toggle ::ng-deep .mat-slide-toggle-content{width:calc(100% - 60px)}.measure-store-buttons{border-bottom:1px solid #ddd;border-top:1px solid #ddd;width:100%}.measure-store-buttons button:first-of-type{margin-left:14px}.table-compact ::ng-deep .mat-header-cell.mat-column-selectionCheckbox{width:52px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc7.LanguageService }, { type: ɵngcc24.MatDialog }]; }, { minSegmentLength: [{\n            type: Input\n        }], activeMeasureType: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], table: [{\n            type: ViewChild,\n            args: ['table', { static: true }]\n        }] }); })();\n\n/**\n * This pipe returns a measure converted from meters (or square meters)\n * to the specified unit. It also keeps a certain number of decimals.\n */\nclass MeasureFormatPipe {\n    /**\n     * @ignore\n     */\n    transform(value, unit, unitAbbr = false, decimal = 1) {\n        let out;\n        if (Object.values(MeasureAreaUnit).indexOf(unit) >= 0) {\n            out = squareMetersToUnit(value, unit);\n        }\n        else if (Object.values(MeasureLengthUnit).indexOf(unit) >= 0) {\n            out = metersToUnit(value, unit);\n        }\n        return out ? formatMeasure(out, {\n            decimal: 1,\n            unit,\n            unitAbbr,\n            locale: 'fr'\n        }) : out;\n    }\n}\nMeasureFormatPipe.ɵfac = function MeasureFormatPipe_Factory(t) { return new (t || MeasureFormatPipe)(); };\nMeasureFormatPipe.ɵpipe = ɵngcc0.ɵɵdefinePipe({ name: \"measureFormat\", type: MeasureFormatPipe, pure: true });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MeasureFormatPipe, [{\n        type: Pipe,\n        args: [{\n                name: 'measureFormat'\n            }]\n    }], null, null); })();\n\n/**\n * This input allows a user to draw a new geometry or to edit\n * an existing one on a map. A text input is also displayed in the\n * form with some instructions.\n * This is still WIP.\n */\nclass GeometryFormFieldInputComponent {\n    constructor(cdRef, ngControl) {\n        this.cdRef = cdRef;\n        this.ngControl = ngControl;\n        this.olGeoJSON = new OlGeoJSON();\n        this.ready = false;\n        this.olTooltip = OlOverlay;\n        /**\n         * The drawGuide around the mouse pointer to help drawing\n         */\n        this.drawGuide = null;\n        /**\n         * Whether a measure tooltip should be displayed\n         */\n        this.measure = false;\n        this._drawControlIsActive = true;\n        /**\n         * Control options\n         */\n        this.controlOptions = {};\n        this.onChange = () => { };\n        this.onTouched = () => { };\n        if (this.ngControl !== undefined) {\n            // Setting the value accessor directly (instead of using\n            // the providers) to avoid running into a circular import.\n            this.ngControl.valueAccessor = this;\n        }\n    }\n    /**\n     * The geometry type\n     */\n    set geometryType(value) {\n        this._geometryType = value;\n        if (this.ready === false) {\n            return;\n        }\n        this.deactivateControl();\n        this.createDrawControl();\n        this.drawControl.freehand$.next(this.freehandDrawIsActive);\n        this.toggleControl();\n    }\n    get geometryType() { return this._geometryType; }\n    /**\n     * Whether draw control should be active or not\n     */\n    get drawControlIsActive() { return this._drawControlIsActive; }\n    set drawControlIsActive(value) {\n        this._drawControlIsActive = value;\n        if (this.ready === false) {\n            return;\n        }\n        this.deactivateControl();\n        if (!this._drawControlIsActive) {\n            return;\n        }\n        else {\n            this.toggleControl();\n        }\n    }\n    /**\n     * Whether freehand draw control should be active or not\n     */\n    get freehandDrawIsActive() { return this._freehandDrawIsActive; }\n    set freehandDrawIsActive(value) {\n        this._freehandDrawIsActive = value;\n        this.deactivateControl();\n        this.createDrawControl();\n        this.createModifyControl();\n        this.drawControl.freehand$.next(this.freehandDrawIsActive);\n        if (this.ready === false) {\n            return;\n        }\n        if (!this.drawControlIsActive) {\n            return;\n        }\n        this.toggleControl();\n    }\n    /**\n     * Style for the draw control (applies while the geometry is being drawn)\n     */\n    set drawStyle(value) {\n        if (value === undefined) {\n            value = createDrawInteractionStyle();\n        }\n        this._drawStyle = value;\n        const olGuideStyle = this.getGuideStyleFromDrawStyle(value);\n        if (olGuideStyle !== undefined) {\n            this.defaultDrawStyleRadius = olGuideStyle.getImage().getRadius();\n        }\n        else {\n            this.defaultDrawStyleRadius = null;\n        }\n        this.deactivateControl();\n        this.createDrawControl();\n        this.createModifyControl();\n        this.drawControl.freehand$.next(this.freehandDrawIsActive);\n        this.toggleControl();\n    }\n    get drawStyle() { return this._drawStyle; }\n    /**\n     * Style for the overlay layer (applies once the geometry is added to the map)\n     * If not specified, drawStyle applies\n     */\n    set overlayStyle(value) { this._overlayStyle = value; }\n    get overlayStyle() { return this._overlayStyle; }\n    /**\n     * The geometry value (GeoJSON)\n     * Implemented as part of ControlValueAccessor.\n     */\n    set value(value) {\n        this._value = value;\n        if (this.ready === false) {\n            return;\n        }\n        if (value) {\n            this.addGeoJSONToOverlay(value);\n        }\n        else {\n            this.olOverlaySource.clear(true);\n        }\n        this.onChange(value);\n        this.toggleControl();\n        this.cdRef.detectChanges();\n    }\n    get value() { return this._value; }\n    /**\n     * The vector source to add the geometry to\n     * @internal\n     */\n    get olOverlaySource() {\n        return this.olOverlayLayer.getSource();\n    }\n    set radius(value) {\n        if (this.ready === false) {\n            return;\n        }\n        if (this.modifyControl.getSource()) {\n            this.modifyControl.getSource().refresh();\n        }\n        if (this.freehandDrawIsActive) {\n            let olModify;\n            setTimeout(() => {\n                olModify = this.modifyControl.olModifyInteraction;\n                if (olModify) {\n                    if (olModify.features_) {\n                        olModify.features_.clear();\n                        this.addGeoJSONToOverlay(this.value);\n                    }\n                }\n            }, 0);\n        }\n    }\n    /**\n     * Create an overlay layer, add the initial geometry to it (if any)\n     * and toggle the right interaction.\n     * @internal\n     */\n    ngOnInit() {\n        if (this.drawStyle === undefined) {\n            this.drawStyle = createDrawInteractionStyle();\n        }\n        if (this.overlayStyle === undefined) {\n            this.overlayStyle = this.drawStyle;\n        }\n        this.addOlOverlayLayer();\n        this.createMeasureTooltip();\n        this.createDrawControl();\n        this.createModifyControl();\n        if (this.value) {\n            this.addGeoJSONToOverlay(this.value);\n        }\n        this.toggleControl();\n        this.ready = true;\n    }\n    /**\n     * Clear the overlay layer and any interaction added by this component.\n     * @internal\n     */\n    ngOnDestroy() {\n        // This is mandatory when the form control is reused after\n        // this component has been destroyed. It seems like the control\n        // keeps a reference to this component even after it's destroyed\n        // and it attempts to set it's value\n        this.ready = false;\n        this.deactivateControl();\n        this.olOverlaySource.clear();\n        this.map.ol.removeLayer(this.olOverlayLayer);\n    }\n    /**\n     * Implemented as part of ControlValueAccessor.\n     */\n    // tslint:disable-next-line:ban-types\n    registerOnChange(fn) {\n        this.onChange = fn;\n    }\n    /**\n     * Implemented as part of ControlValueAccessor.\n     */\n    // tslint:disable-next-line:ban-types\n    registerOnTouched(fn) {\n        this.onTouched = fn;\n    }\n    /**\n     * Implemented as part of ControlValueAccessor.\n     */\n    writeValue(value) {\n        this.value = value;\n    }\n    /**\n     * Add an overlay layer to the map\n     */\n    addOlOverlayLayer() {\n        this.olOverlayLayer = new OlVectorLayer({\n            source: new OlVectorSource(),\n            zIndex: 500,\n            style: null\n        });\n        this.map.ol.addLayer(this.olOverlayLayer);\n    }\n    /**\n     * Create a draw control and subscribe to it's geometry\n     */\n    createDrawControl() {\n        const controlOptions = Object.assign({}, this.controlOptions, {\n            geometryType: this.geometryType || 'Point',\n            layer: this.olOverlayLayer,\n            drawStyle: typeof this.drawStyle === 'function' ? this.drawStyle : (olFeature, resolution) => {\n                const style = this.drawStyle;\n                this.updateDrawStyleWithDrawGuide(style, resolution);\n                return style;\n            }\n        });\n        this.drawControl = new DrawControl(controlOptions);\n    }\n    /**\n     * Create a modify control and subscribe to it's geometry\n     */\n    createModifyControl() {\n        const controlOptions = Object.assign({}, this.controlOptions, {\n            layer: this.olOverlayLayer,\n            drawStyle: typeof this.drawStyle === 'function' ? this.drawStyle : (olFeature, resolution) => {\n                const style = this.drawStyle;\n                this.updateDrawStyleWithDrawGuide(style, resolution);\n                return style;\n            }\n        });\n        this.modifyControl = new ModifyControl(controlOptions);\n    }\n    /**\n     * Toggle the proper control (draw or modify)\n     */\n    toggleControl() {\n        let activate;\n        if (!this.value && this.geometryType) {\n            activate = this.drawControl;\n        }\n        else {\n            activate = this.modifyControl;\n        }\n        // If the control that should be activated\n        // is not the same as the current active control,\n        // deactivate the current control and activate the new one\n        // Otherwise, do nothing and keep the current control active\n        if (activate !== this.activeControl) {\n            this.deactivateControl();\n            this.activateControl(activate);\n        }\n    }\n    /**\n     * Activate a given control\n     * @param control Control\n     */\n    activateControl(control) {\n        this.activeControl = control;\n        this.olGeometryEnds$$ = control.end$\n            .subscribe((olGeometry) => this.onOlGeometryEnds(olGeometry));\n        if (this.measure === true && control === this.drawControl) {\n            this.olGeometryChanges$$ = control.changes$\n                .subscribe((olGeometry) => this.onOlGeometryChanges(olGeometry));\n        }\n        control.setOlMap(this.map.ol);\n    }\n    /**\n     * Deactivate the active control\n     */\n    deactivateControl() {\n        this.removeMeasureTooltip();\n        if (this.activeControl !== undefined) {\n            this.activeControl.setOlMap(undefined);\n        }\n        if (this.olGeometryEnds$$ !== undefined) {\n            this.olGeometryEnds$$.unsubscribe();\n        }\n        if (this.olGeometryChanges$$ !== undefined) {\n            this.olGeometryChanges$$.unsubscribe();\n        }\n        this.activeControl = undefined;\n    }\n    /**\n     * Update measures observables and map tooltips\n     * @param olGeometry Ol linestring or polygon\n     */\n    onOlGeometryEnds(olGeometry) {\n        this.removeMeasureTooltip();\n        this.setOlGeometry(olGeometry);\n    }\n    /**\n     * Update measures observables and map tooltips\n     * @param olGeometry Ol linestring or polygon\n     */\n    onOlGeometryChanges(olGeometry) {\n        if (olGeometry.getType() !== 'Point') {\n            this.updateMeasureTooltip(olGeometry);\n        }\n    }\n    /**\n     * When drawing ends, convert the output value to GeoJSON and keep it.\n     * Restore the double click interaction.\n     * @param olGeometry OL geometry\n     */\n    setOlGeometry(olGeometry) {\n        let value;\n        if (olGeometry === undefined) {\n            return;\n        }\n        if (olGeometry.getType() === 'Circle') { // Because Circle doesn't exist as a GeoJSON object\n            olGeometry = this.circleToPoint(olGeometry);\n        }\n        value = this.olGeoJSON.writeGeometryObject(olGeometry, {\n            featureProjection: this.map.projection,\n            dataProjection: 'EPSG:4326'\n        });\n        if (olGeometry.get('radius')) {\n            value.radius = olGeometry.get('radius');\n            olGeometry._radius = value.radius;\n        }\n        this.writeValue(value);\n    }\n    circleToPoint(olGeometry) {\n        const center = olGeometry.getCenter();\n        const coordinates = transform(center, this.map.projection, 'EPSG:4326');\n        const radius = Math.round(olGeometry.getRadius() * (Math.cos((Math.PI / 180) * coordinates[1])));\n        // Convert it to a point object\n        olGeometry = new OlPoint(center);\n        olGeometry.set('radius', radius, true);\n        return olGeometry;\n    }\n    /**\n     * Add a GeoJSON geometry to the overlay\n     * @param geometry GeoJSON geometry\n     */\n    addGeoJSONToOverlay(geometry) {\n        const olGeometry = this.olGeoJSON.readGeometry(geometry, {\n            dataProjection: 'EPSG:4326',\n            featureProjection: this.map.projection\n        });\n        const olFeature$1 = new olFeature({\n            geometry: olGeometry\n        });\n        olFeature$1.setStyle(this.overlayStyle);\n        this.olOverlaySource.clear();\n        this.olOverlaySource.addFeature(olFeature$1);\n    }\n    /**\n     * Create the measure tooltip\n     */\n    createMeasureTooltip() {\n        this.olTooltip = new OlOverlay({\n            element: document.createElement('div'),\n            offset: [-30, -10],\n            className: [\n                'igo-map-tooltip',\n                'igo-map-tooltip-measure'\n            ].join(' '),\n            stopEvent: false\n        });\n    }\n    /**\n     * Update the measure tooltip of an OL geometry\n     * @param olGeometry OL Geometry\n     */\n    updateMeasureTooltip(olGeometry) {\n        const measure = measureOlGeometry(olGeometry, this.map.projection);\n        const lengths = measure.lengths;\n        const lastIndex = olGeometry.getType() === 'Polygon' ? lengths.length - 2 : lengths.length - 1;\n        const lastLength = lengths[lastIndex];\n        const olMidpoints = updateOlGeometryMidpoints(olGeometry);\n        const olLastMidpoint = olMidpoints[lastIndex];\n        if (olMidpoints.length === 0 || olLastMidpoint === undefined) {\n            this.removeMeasureTooltip();\n            return;\n        }\n        this.olTooltip.setPosition(olLastMidpoint.flatCoordinates);\n        const innerHtml = formatMeasure(lastLength, {\n            decimal: 1,\n            unit: MeasureLengthUnit.Meters,\n            unitAbbr: true,\n            locale: 'fr'\n        });\n        this.olTooltip.getElement().innerHTML = innerHtml;\n        if (this.olTooltip.getMap() === undefined) {\n            this.map.ol.addOverlay(this.olTooltip);\n        }\n    }\n    /**\n     * Remove the measure tooltip from the map\n     */\n    removeMeasureTooltip() {\n        if (this.olTooltip.getMap && this.olTooltip.getMap() !== undefined) {\n            this.map.ol.removeOverlay(this.olTooltip);\n            this.olTooltip.setMap(undefined);\n        }\n    }\n    /**\n     * Adjust the draw style with the specified draw guide distance, if possible\n     * @param olStyle Draw style to update\n     * @param resolution Resolution (to make the screen size of symbol fit the drawGuide value)\n     */\n    updateDrawStyleWithDrawGuide(olStyle, resolution) {\n        const olGuideStyle = this.getGuideStyleFromDrawStyle(olStyle);\n        if (olGuideStyle === undefined) {\n            return;\n        }\n        const drawGuide = this.drawGuide;\n        let radius;\n        if (!drawGuide || drawGuide < 0) {\n            radius = this.defaultDrawStyleRadius;\n        }\n        else {\n            radius = drawGuide > 0 ? drawGuide / resolution : drawGuide;\n        }\n        olGuideStyle.getImage().setRadius(radius);\n    }\n    /**\n     * Returns wether a given Open Layers style has a radius property that can be set (used to set draw guide)\n     * @param olStyle The style on which to perform the check\n     */\n    isStyleWithRadius(olStyle) {\n        return typeof olStyle !== 'function' && olStyle.getImage && olStyle.getImage().setRadius;\n    }\n    /**\n     * Returns wether a given Open Layers style has a radius property that can be set (used to set draw guide)\n     * @param olStyle The style on which to perform the check\n     */\n    getGuideStyleFromDrawStyle(olStyle) {\n        if (Array.isArray(olStyle)) {\n            olStyle = olStyle[0];\n        }\n        if (this.isStyleWithRadius(olStyle)) {\n            return olStyle;\n        }\n        return undefined;\n    }\n}\nGeometryFormFieldInputComponent.ɵfac = function GeometryFormFieldInputComponent_Factory(t) { return new (t || GeometryFormFieldInputComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc16.NgControl, 10)); };\nGeometryFormFieldInputComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: GeometryFormFieldInputComponent, selectors: [[\"igo-geometry-form-field-input\"]], inputs: { drawGuide: \"drawGuide\", measure: \"measure\", controlOptions: \"controlOptions\", geometryType: \"geometryType\", drawControlIsActive: \"drawControlIsActive\", freehandDrawIsActive: \"freehandDrawIsActive\", drawStyle: \"drawStyle\", overlayStyle: \"overlayStyle\", value: \"value\", radius: \"radius\", map: \"map\" }, decls: 1, vars: 0, template: function GeometryFormFieldInputComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, GeometryFormFieldInputComponent_ng_template_0_Template, 0, 0, \"ng-template\");\n    } }, encapsulation: 2, changeDetection: 0 });\nGeometryFormFieldInputComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef },\n    { type: NgControl, decorators: [{ type: Optional }, { type: Self }] }\n];\nGeometryFormFieldInputComponent.propDecorators = {\n    map: [{ type: Input }],\n    geometryType: [{ type: Input }],\n    drawGuide: [{ type: Input }],\n    measure: [{ type: Input }],\n    drawControlIsActive: [{ type: Input }],\n    freehandDrawIsActive: [{ type: Input }],\n    controlOptions: [{ type: Input }],\n    drawStyle: [{ type: Input }],\n    overlayStyle: [{ type: Input }],\n    value: [{ type: Input }],\n    radius: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GeometryFormFieldInputComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-geometry-form-field-input',\n                template: \"<ng-template></ng-template>\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc16.NgControl, decorators: [{\n                type: Optional\n            }, {\n                type: Self\n            }] }]; }, { drawGuide: [{\n            type: Input\n        }], measure: [{\n            type: Input\n        }], controlOptions: [{\n            type: Input\n        }], geometryType: [{\n            type: Input\n        }], drawControlIsActive: [{\n            type: Input\n        }], freehandDrawIsActive: [{\n            type: Input\n        }], drawStyle: [{\n            type: Input\n        }], overlayStyle: [{\n            type: Input\n        }], value: [{\n            type: Input\n        }], radius: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoGeometryFormFieldModule {\n}\nIgoGeometryFormFieldModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoGeometryFormFieldModule });\nIgoGeometryFormFieldModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoGeometryFormFieldModule_Factory(t) { return new (t || IgoGeometryFormFieldModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatButtonModule,\n            MatButtonToggleModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoGeometryFormFieldModule, { declarations: function () { return [GeometryFormFieldComponent, GeometryFormFieldInputComponent]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        IgoLanguageModule]; }, exports: function () { return [GeometryFormFieldComponent, GeometryFormFieldInputComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoGeometryFormFieldModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatButtonModule,\n                    MatButtonToggleModule,\n                    IgoLanguageModule\n                ],\n                exports: [\n                    GeometryFormFieldComponent,\n                    GeometryFormFieldInputComponent\n                ],\n                declarations: [\n                    GeometryFormFieldComponent,\n                    GeometryFormFieldInputComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoGeometryModule {\n}\nIgoGeometryModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoGeometryModule });\nIgoGeometryModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoGeometryModule_Factory(t) { return new (t || IgoGeometryModule)(); }, providers: [], imports: [[\n            CommonModule,\n            IgoGeometryFormFieldModule\n        ], IgoGeometryFormFieldModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoGeometryModule, { imports: function () { return [CommonModule, IgoGeometryFormFieldModule]; }, exports: function () { return [IgoGeometryFormFieldModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoGeometryModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoGeometryFormFieldModule\n                ],\n                exports: [\n                    IgoGeometryFormFieldModule\n                ],\n                declarations: [],\n                providers: []\n            }]\n    }], null, null); })();\n\nclass TimeFilterButtonComponent {\n    constructor() {\n        this.color = 'primary';\n        this.header = true;\n        this.timeFilterCollapse = false;\n    }\n    get badge() {\n        const filter = this.options.timeFilter;\n        if (filter && filter.enabled) {\n            return 1;\n        }\n        else {\n            return;\n        }\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n        if (value) {\n            this.options = this.layer.dataSource.options;\n        }\n    }\n    ngOnInit() {\n        this.options = this.layer.dataSource.options;\n    }\n}\nTimeFilterButtonComponent.ɵfac = function TimeFilterButtonComponent_Factory(t) { return new (t || TimeFilterButtonComponent)(); };\nTimeFilterButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TimeFilterButtonComponent, selectors: [[\"igo-time-filter-button\"]], inputs: { color: \"color\", header: \"header\", layer: \"layer\", map: \"map\" }, decls: 2, vars: 2, consts: [[\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", 4, \"ngIf\"], [\"class\", \"igo-layer-actions-container\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"history\", 3, \"matBadge\"], [1, \"igo-layer-actions-container\"], [\"ogcFilter\", \"\"], [\"igoListItem\", \"\", 3, \"header\", \"layer\", 4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"header\", \"layer\"]], template: function TimeFilterButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, TimeFilterButtonComponent_button_0_Template, 3, 5, \"button\", 0);\n        ɵngcc0.ɵɵtemplate(1, TimeFilterButtonComponent_div_1_Template, 3, 1, \"div\", 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.header && ctx.options.timeFilterable && ctx.options.timeFilter);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.header && ctx.options.timeFilterable && ctx.options.timeFilter);\n    } }, directives: function () { return [ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon, ɵngcc12.MatBadge, TimeFilterItemComponent, ɵngcc9.ListItemDirective]; }, pipes: function () { return [ɵngcc5.TranslatePipe]; }, styles: [\"\"], changeDetection: 0 });\nTimeFilterButtonComponent.ctorParameters = () => [];\nTimeFilterButtonComponent.propDecorators = {\n    layer: [{ type: Input }],\n    map: [{ type: Input }],\n    color: [{ type: Input }],\n    header: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TimeFilterButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-button',\n                template: \"<button *ngIf=\\\"header && options.timeFilterable && options.timeFilter\\\"\\n  mat-icon-button\\n  collapsibleButton\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"'igo.geo.filter.filterBy' | translate\\\"\\n  [color]=\\\"color\\\">\\n  <mat-icon [matBadge]=\\\"badge\\\" matBadgeColor=\\\"warn\\\" matBadgeSize=\\\"medium\\\" svgIcon=\\\"history\\\"></mat-icon>\\n</button>\\n\\n<div #ogcFilter class=\\\"igo-layer-actions-container\\\"\\n*ngIf=\\\"header && options.timeFilterable && options.timeFilter\\\">\\n  <igo-time-filter-item\\n    *ngIf=\\\"timeFilterCollapse && options.timeFilter\\\"\\n    igoListItem\\n    [header]=\\\"false\\\"\\n    [layer]=\\\"layer\\\">\\n  </igo-time-filter-item>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, { color: [{\n            type: Input\n        }], header: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n\nclass TimeFilterFormComponent {\n    constructor(dateAdapter) {\n        this.dateAdapter = dateAdapter;\n        this.color = 'primary';\n        this.listYears = [];\n        this.startListYears = [];\n        this.endListYears = [];\n        this.playIcon = 'play-circle';\n        this.resetIcon = 'replay';\n        this.change = new EventEmitter();\n        this.yearChange = new EventEmitter();\n        this.dateAdapter.setLocale('fr');\n    }\n    set currentValue(value) {\n        if (value) {\n            if (this.type !== TimeFilterType.YEAR) {\n                const valueArray = value.split('/');\n                if (valueArray.length > 0) {\n                    const startDate = new Date(valueArray[0]);\n                    const endDate = new Date(valueArray[1]);\n                    if (!isNaN(startDate.valueOf())) {\n                        this.startDate = startDate;\n                    }\n                    if (!isNaN(endDate.valueOf())) {\n                        this.endDate = endDate;\n                    }\n                }\n            }\n        }\n    }\n    get type() {\n        return this.options.type === undefined\n            ? TimeFilterType.DATE\n            : this.options.type;\n    }\n    get isRange() {\n        return this.options.range === undefined ||\n            this.options.style === TimeFilterStyle.SLIDER\n            ? false\n            : this.options.range;\n    }\n    get style() {\n        return this.options.style === undefined\n            ? TimeFilterStyle.SLIDER\n            : this.options.style;\n    }\n    get step() {\n        let step = 10800000;\n        if (this.options.step === undefined) {\n            switch (this.type) {\n                case TimeFilterType.DATE:\n                case TimeFilterType.DATETIME:\n                    step = 10800000;\n                    break;\n                case TimeFilterType.TIME:\n                    step = 3600000;\n                    break;\n                case TimeFilterType.YEAR:\n                    step = 31536000000;\n                    break;\n                default:\n                    step = 10800000;\n            }\n        }\n        else {\n            step = this.getStepDefinition(this.options.step);\n        }\n        return step;\n    }\n    get timeInterval() {\n        return this.options.timeInterval === undefined\n            ? 2000\n            : this.options.timeInterval;\n    }\n    get min() {\n        if (this.options.min) {\n            const min = new Date(this.options.min);\n            return new Date(min.getTime() + min.getTimezoneOffset() * 60000);\n        }\n        else {\n            return undefined;\n        }\n    }\n    get max() {\n        if (this.options.max) {\n            const max = new Date(this.options.max);\n            return new Date(max.getTime() + max.getTimezoneOffset() * 60000);\n        }\n        else {\n            return undefined;\n        }\n    }\n    get is() {\n        return this.options.range === undefined ? false : this.options.range;\n    }\n    ngOnInit() {\n        if (this.startDate === undefined) {\n            this.startDate = new Date(this.min);\n        }\n        if (this.endDate === undefined) {\n            this.endDate = new Date(this.max);\n        }\n        if (this.startYear === undefined) {\n            this.startYear = new Date(this.startDate).getFullYear();\n            this.initStartYear = this.startYear;\n        }\n        if (this.endYear === undefined) {\n            this.endYear = new Date(this.endDate).getFullYear();\n            this.initEndYear = this.endYear;\n        }\n        if (!this.isRange) {\n            for (let i = this.startYear; i <= this.endYear + 1; i++) {\n                this.listYears.push(i);\n            }\n        }\n        else {\n            for (let i = this.startYear; i < this.endYear; i++) {\n                this.startListYears.push(i);\n            }\n            for (let i = this.startYear + 1; i <= this.endYear; i++) {\n                this.endListYears.push(i);\n            }\n        }\n        this.options.enabled =\n            this.options.enabled === undefined ? true : this.options.enabled;\n        this.checkFilterValue();\n        if (this.options.enabled) {\n            if (!this.isRange && this.style === 'slider' && this.type === 'year') {\n                this.yearChange.emit(this.year);\n            }\n        }\n        else {\n            this.storeCurrentFilterValue();\n            this.yearChange.emit(undefined); // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n        }\n    }\n    storeCurrentFilterValue() {\n        // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n        if (!this.isRange &&\n            this.style === TimeFilterStyle.SLIDER &&\n            this.type === TimeFilterType.YEAR) {\n            this.options.value = this.year.toString();\n        }\n    }\n    checkFilterValue() {\n        const timeFromWms = this.layer.dataSource.ol.getParams().TIME;\n        if (!this.isRange &&\n            this.style === TimeFilterStyle.SLIDER &&\n            this.type === TimeFilterType.YEAR) {\n            if (timeFromWms) {\n                this.year = new Date(timeFromWms.toString()).getFullYear() + 1;\n            }\n            else if (this.options.value) {\n                this.year = new Date(this.options.value.toString()).getFullYear() + 1;\n            }\n            else {\n                this.year = new Date(this.min).getFullYear() + 1;\n            }\n        }\n        else if (this.isRange &&\n            this.style === TimeFilterStyle.CALENDAR &&\n            this.type === TimeFilterType.YEAR) {\n            if (timeFromWms) {\n                this.startYear = parseInt(timeFromWms.substr(0, 4), 10);\n                this.endYear = parseInt(timeFromWms.substr(5, 4), 10);\n                const newStartListYears = [];\n                const newEndListYears = [];\n                for (let i = this.initStartYear; i < this.endYear; i++) {\n                    newStartListYears.push(i);\n                }\n                for (let i = this.startYear + 1; i <= this.initEndYear; i++) {\n                    newEndListYears.push(i);\n                }\n                this.startListYears = newStartListYears;\n                this.endListYears = newEndListYears;\n            }\n        }\n        // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n    }\n    handleDateChange(event) {\n        this.setupDateOutput();\n        this.applyTypeChange();\n        // Only if is range, use 2 dates to make the range\n        if (this.isRange) {\n            this.change.emit([this.startDate, this.endDate]);\n        }\n        else {\n            this.change.emit(this.startDate);\n        }\n    }\n    handleYearChange(event) {\n        if (this.isRange) {\n            this.endListYears = [];\n            for (let i = this.startYear + 1; i <= this.initEndYear; i++) {\n                this.endListYears.push(i);\n            }\n            this.startListYears = [];\n            for (let i = this.initStartYear + 1; i < this.endYear; i++) {\n                this.startListYears.push(i);\n            }\n            this.yearChange.emit([this.startYear, this.endYear]);\n        }\n        else {\n            this.yearChange.emit(this.year);\n        }\n    }\n    handleListYearChange(event) {\n        this.handleYearChange([this.startYear, this.endYear]);\n    }\n    handleListYearStartChange(event) {\n        this.change.emit([this.startDate, this.endDate]);\n    }\n    dateToNumber(date) {\n        let newDate;\n        if (date) {\n            newDate = new Date(date);\n        }\n        else {\n            newDate = new Date(this.min);\n        }\n        return newDate.getTime();\n    }\n    setSliderThumbLabel(label) {\n        const thumbLabel = this.findThumbLabel(this.mySlider._elementRef.nativeElement.childNodes);\n        if (thumbLabel) {\n            thumbLabel.textContent = label;\n        }\n    }\n    findThumbLabel(test) {\n        let thumbLabel;\n        test.forEach(value => {\n            if (value.className === 'mat-slider-thumb-label-text') {\n                thumbLabel = value;\n            }\n            if (value.children.length > 0 && !thumbLabel) {\n                thumbLabel = this.findThumbLabel(value.childNodes);\n            }\n        }, this);\n        return thumbLabel;\n    }\n    toggleFilterState() {\n        this.options.enabled = !this.options.enabled;\n        if (this.options.enabled) {\n            if (!this.isRange &&\n                TimeFilterStyle.SLIDER &&\n                this.type === TimeFilterType.YEAR) {\n                this.yearChange.emit(this.year);\n            }\n        }\n        else {\n            this.stopFilter();\n            this.storeCurrentFilterValue();\n            this.change.emit(undefined); // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n        }\n    }\n    resetFilter(event) {\n        this.date = new Date(this.min);\n        this.year = this.date.getFullYear() + 1;\n        if (!this.isRange &&\n            TimeFilterStyle.SLIDER &&\n            this.type === TimeFilterType.YEAR) {\n            this.yearChange.emit(this.year);\n        }\n        else {\n            this.setupDateOutput();\n            this.change.emit(undefined); // TODO: FIX THIS for ALL OTHER TYPES STYLES OR RANGE.\n        }\n    }\n    playFilter(event) {\n        if (this.interval) {\n            this.stopFilter();\n        }\n        else {\n            this.playIcon = 'pause-circle';\n            this.interval = setInterval(that => {\n                let newMinDateNumber;\n                const maxDateNumber = new Date(that.max);\n                newMinDateNumber =\n                    that.date === undefined ? that.min.getTime() : that.date.getTime();\n                newMinDateNumber += that.mySlider.step;\n                that.date = new Date(newMinDateNumber);\n                if (newMinDateNumber > maxDateNumber.getTime()) {\n                    that.stopFilter();\n                }\n                that.handleDateChange({ value: that.date, date: that.date });\n            }, this.timeInterval, this);\n        }\n    }\n    playYear(event) {\n        if (this.year + this.mySlider.step >\n            this.max.getFullYear() + this.mySlider.step) {\n            this.stopFilter();\n            this.resetFilter(event);\n        }\n        if (this.interval) {\n            this.stopFilter();\n        }\n        else {\n            this.playIcon = 'pause-circle';\n            this.interval = setInterval(\n            // tslint:disable-next-line:only-arrow-functions\n            function (that) {\n                that.year = that.year + that.mySlider.step;\n                if (that.year > that.max.getFullYear()) {\n                    that.stopFilter();\n                }\n                that.yearChange.emit(that.year);\n            }, this.timeInterval, this);\n        }\n    }\n    stopFilter() {\n        if (this.interval) {\n            clearInterval(this.interval);\n        }\n        this.interval = undefined;\n        this.playIcon = 'play-circle';\n    }\n    handleSliderDateChange(event) {\n        this.date = new Date(event.value);\n        this.setSliderThumbLabel(this.handleSliderTooltip());\n        this.handleDateChange(event);\n    }\n    handleSliderYearChange(event) {\n        this.year = event.value;\n        this.yearChange.emit(this.year);\n    }\n    handleSliderValue() {\n        if (this.options.current === true || !this.min) {\n            const currentDate = new Date();\n            this.date = this.getRoundedDate(currentDate);\n        }\n        if (this.type === TimeFilterType.YEAR) {\n            return this.year;\n        }\n        else {\n            return this.date === undefined ? this.min.getTime() : this.date.getTime();\n        }\n    }\n    handleSliderTooltip() {\n        let label;\n        switch (this.type) {\n            case TimeFilterType.DATE:\n                label =\n                    this.date === undefined\n                        ? this.min.toDateString()\n                        : this.date.toDateString();\n                break;\n            case TimeFilterType.TIME:\n                label =\n                    this.date === undefined\n                        ? this.min.toTimeString()\n                        : this.date.toTimeString();\n                break;\n            // datetime\n            default:\n                label =\n                    this.date === undefined\n                        ? this.min.toUTCString()\n                        : this.date.toUTCString();\n                break;\n        }\n        return label;\n    }\n    setupDateOutput() {\n        if (this.style === TimeFilterStyle.SLIDER) {\n            this.startDate = new Date(this.date);\n            this.startDate.setSeconds(-(this.step / 1000));\n            this.endDate = new Date(this.startDate);\n            this.endDate.setSeconds(this.step / 1000);\n        }\n        else if (!this.isRange && !!this.date) {\n            this.endDate = new Date(this.date);\n            this.startDate = new Date(this.date);\n        }\n        else if (this.isRange && (!!this.date || !this.date)) {\n            this.startDate =\n                this.startDate === undefined ? new Date(this.min) : this.startDate;\n            this.endDate =\n                this.endDate === undefined ? new Date(this.max) : this.endDate;\n        }\n        else if (!this.date) {\n            this.startDate =\n                this.startDate === undefined ? new Date(this.min) : this.startDate;\n            this.endDate =\n                this.endDate === undefined ? new Date(this.max) : this.endDate;\n        }\n    }\n    applyTypeChange() {\n        switch (this.type) {\n            case TimeFilterType.DATE:\n                if (this.startDate !== undefined || this.endDate !== undefined) {\n                    this.startDate.setHours(0);\n                    this.startDate.setMinutes(0);\n                    this.startDate.setSeconds(0);\n                    this.endDate.setHours(23);\n                    this.endDate.setMinutes(59);\n                    this.endDate.setSeconds(59);\n                }\n                break;\n            case TimeFilterType.TIME:\n                if (this.style === TimeFilterStyle.CALENDAR) {\n                    if (this.startDate.getDay() !== this.min.getDay()) {\n                        const selectedHour = this.startDate.getHours();\n                        const selectedMinute = this.startDate.getMinutes();\n                        this.startDate = this.min;\n                        this.startDate.setHours(selectedHour);\n                        this.startDate.setMinutes(selectedMinute);\n                    }\n                    if (this.endDate.getDay() !== this.min.getDay()) {\n                        const selectedHour = this.endDate.getHours();\n                        const selectedMinute = this.endDate.getMinutes();\n                        this.endDate = this.min;\n                        this.endDate.setHours(selectedHour);\n                        this.endDate.setMinutes(selectedMinute);\n                    }\n                }\n                if (!this.isRange && this.step > 60 * 60 * 1000) {\n                    this.startDate.setMinutes(0);\n                    this.startDate.setSeconds(0);\n                    this.endDate.setMinutes(59);\n                    this.endDate.setSeconds(59);\n                }\n                break;\n            // datetime\n            default:\n            // do nothing\n        }\n    }\n    getRangeMinDate() {\n        return this.startDate === undefined ? this.min : this.startDate;\n    }\n    getRangeMaxDate() {\n        return this.endDate === undefined ? this.max : this.endDate;\n    }\n    /**\n     * Round date at a certain time, 10 minutes by Default\n     * @param date - Date to Round\n     * @param atMinute - round to closest 'atMinute' minute, rounded 10 by default\n     * @return the rounded date\n     */\n    getRoundedDate(date, atMinute = 10) {\n        const coeff = 1000 * 60 * atMinute;\n        return new Date(Math.round(date.getTime() / coeff) * coeff);\n    }\n    /**\n     * Get the step (period) definition from the layer dimension tag\n     * @param step The step as ISO 8601 example: PT10M for 10 Minutes\n     * @return the duration in milliseconds\n     */\n    getStepDefinition(step) {\n        return duration(step).asMilliseconds();\n    }\n}\nTimeFilterFormComponent.ɵfac = function TimeFilterFormComponent_Factory(t) { return new (t || TimeFilterFormComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc11.DateAdapter)); };\nTimeFilterFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TimeFilterFormComponent, selectors: [[\"igo-time-filter-form\"]], viewQuery: function TimeFilterFormComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(MatSlider, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.mySlider = _t.first);\n    } }, inputs: { currentValue: \"currentValue\", layer: \"layer\", options: \"options\" }, outputs: { change: \"change\", yearChange: \"yearChange\" }, decls: 5, vars: 4, consts: [[4, \"ngIf\"], [\"class\", \"igo-col igo-col-100 igo-col-100-m mat-typography\", 4, \"ngIf\"], [\"class\", \"igo-col igo-col-100 igo-col-100-m\", 4, \"ngIf\"], [1, \"igo-col\", \"igo-col-100\", \"igo-col-100-m\"], [\"matSuffix\", \"\", 3, \"for\"], [\"openOnFocus\", \"true\", \"timeInterval\", \"5\", 3, \"type\"], [\"datetimePicker\", \"\"], [\"matInput\", \"\", \"autocomplete\", \"false\", \"readonly\", \"readonly\", 3, \"placeholder\", \"matDatetimepicker\", \"ngModel\", \"min\", \"max\", \"ngModelChange\", \"dateChange\"], [1, \"igo-col\", \"igo-col-100\"], [\"minDatetimePicker\", \"\"], [\"matInput\", \"\", \"autocomplete\", \"false\", \"readonly\", \"readonly\", 3, \"placeholder\", \"matDatetimepicker\", \"ngModel\", \"min\", \"max\", \"ngModelChange\", \"input\", \"dateChange\"], [\"maxDatetimePicker\", \"\"], [3, \"placeholder\", \"ngModel\", \"ngModelChange\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"igo-col\", \"igo-col-100\", \"igo-col-100-m\", \"mat-typography\"], [\"id\", \"time-slider\", \"tickInterval\", \"auto\", \"thumbLabel\", \"\", 3, \"step\", \"min\", \"max\", \"value\", \"color\", \"disabled\", \"input\", \"change\"], [\"class\", \"date-below\", 4, \"ngIf\"], [1, \"igo-layer-actions-container\"], [\"actions\", \"\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"checked\", \"disabled\", \"change\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [3, \"svgIcon\"], [1, \"date-below\"], [\"id\", \"time-slider\", \"tickInterval\", \"auto\", \"thumbLabel\", \"\", 3, \"step\", \"min\", \"max\", \"value\", \"input\", \"selectionChange\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"click\"]], template: function TimeFilterFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, TimeFilterFormComponent_div_0_Template, 3, 2, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, TimeFilterFormComponent_div_1_Template, 3, 2, \"div\", 0);\n        ɵngcc0.ɵɵelement(2, \"br\");\n        ɵngcc0.ɵɵtemplate(3, TimeFilterFormComponent_div_3_Template, 15, 19, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(4, TimeFilterFormComponent_div_4_Template, 6, 6, \"div\", 2);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.style === \"calendar\" && ctx.type !== \"year\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.style === \"calendar\" && ctx.type === \"year\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.isRange && ctx.style === \"slider\" && ctx.type === \"year\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.style === \"slider\" && ctx.type !== \"year\");\n    } }, directives: [ɵngcc1.NgIf, ɵngcc14.MatFormField, ɵngcc25.MatDatetimepickerToggle, ɵngcc14.MatSuffix, ɵngcc25.MatDatetimepicker, ɵngcc19.MatInput, ɵngcc25.MatDatetimepickerInput, ɵngcc16.DefaultValueAccessor, ɵngcc16.NgControlStatus, ɵngcc16.NgModel, ɵngcc15.MatSelect, ɵngcc1.NgForOf, ɵngcc11.MatOption, ɵngcc18.MatSlider, ɵngcc20.MatSlideToggle, ɵngcc3.MatTooltip, ɵngcc2.MatButton, ɵngcc4.MatIcon], pipes: [ɵngcc5.TranslatePipe], styles: [\".igo-layer-filters-container[_ngcontent-%COMP%]{padding-left:5px}mat-slider[_ngcontent-%COMP%]     div.mat-slider-thumb-label{height:32px;margin:0 auto;width:32px}mat-slider[_ngcontent-%COMP%]     span.mat-slider-thumb-label-text{font-size:10px}#time-slider[_ngcontent-%COMP%]{margin:0 auto;width:70%}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){#time-slider[_ngcontent-%COMP%]{margin:0 auto;width:60%}}.date-below[_ngcontent-%COMP%]{margin:0}mat-form-field[_ngcontent-%COMP%]{text-align:center}mat-datetimepicker-toggle[_ngcontent-%COMP%]     .mat-icon{padding-bottom:30px}.igo-layer-actions-container[_ngcontent-%COMP%] > .mat-slide-toggle[_ngcontent-%COMP%]{vertical-align:middle}\"] });\nTimeFilterFormComponent.ctorParameters = () => [\n    { type: DateAdapter }\n];\nTimeFilterFormComponent.propDecorators = {\n    layer: [{ type: Input }],\n    options: [{ type: Input }],\n    currentValue: [{ type: Input }],\n    change: [{ type: Output }],\n    yearChange: [{ type: Output }],\n    mySlider: [{ type: ViewChild, args: [MatSlider,] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TimeFilterFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-form',\n                template: \"<div *ngIf=\\\"style === 'calendar' && type !=='year'\\\">\\n  <div *ngIf=\\\"!isRange\\\" class=\\\"igo-col igo-col-100 igo-col-100-m\\\">\\n    <mat-form-field>\\n      <mat-datetimepicker-toggle [for]=\\\"datetimePicker\\\" matSuffix></mat-datetimepicker-toggle>\\n      <mat-datetimepicker #datetimePicker type=\\\"{{type}}\\\" openOnFocus=\\\"true\\\" timeInterval=\\\"5\\\"></mat-datetimepicker>\\n      <input matInput autocomplete=\\\"false\\\"\\n        placeholder=\\\"{{'igo.geo.timeFilter.date' | translate}}\\\"\\n        [matDatetimepicker]=\\\"datetimePicker\\\"\\n        [(ngModel)]=\\\"date\\\"\\n        [min]=\\\"min\\\"\\n        [max]=\\\"max\\\"\\n        readonly=\\\"readonly\\\"\\n        (dateChange)=\\\"handleDateChange($event)\\\">\\n    </mat-form-field>\\n\\n  </div>\\n\\n  <div *ngIf=\\\"isRange\\\">\\n    <div class=\\\"igo-col igo-col-100\\\">\\n      <mat-form-field>\\n        <mat-datetimepicker-toggle [for]=\\\"minDatetimePicker\\\" matSuffix></mat-datetimepicker-toggle>\\n        <mat-datetimepicker #minDatetimePicker type=\\\"{{type}}\\\" openOnFocus=\\\"true\\\" timeInterval=\\\"5\\\"></mat-datetimepicker>\\n        <input matInput autocomplete=\\\"false\\\"\\n          placeholder=\\\"{{'igo.geo.timeFilter.startDate' | translate}}\\\"\\n          [matDatetimepicker]=\\\"minDatetimePicker\\\"\\n          [(ngModel)]=\\\"startDate\\\"\\n          [min]=\\\"min\\\"\\n          [max]=\\\"getRangeMaxDate()\\\"\\n          readonly=\\\"readonly\\\"\\n          (input)=\\\"startDate\\\"\\n          (dateChange)=\\\"handleDateChange($event)\\\">\\n      </mat-form-field>\\n    </div>\\n\\n    <div class=\\\"igo-col igo-col-100\\\">\\n      <mat-form-field>\\n        <mat-datetimepicker-toggle [for]=\\\"maxDatetimePicker\\\" matSuffix></mat-datetimepicker-toggle>\\n        <mat-datetimepicker #maxDatetimePicker type=\\\"{{type}}\\\" openOnFocus=\\\"true\\\" timeInterval=\\\"5\\\"></mat-datetimepicker>\\n        <input matInput autocomplete=\\\"false\\\"\\n          placeholder=\\\"{{'igo.geo.timeFilter.endDate' | translate}}\\\"\\n          [matDatetimepicker]=\\\"maxDatetimePicker\\\"\\n          [(ngModel)]=\\\"endDate\\\"\\n          [min]=\\\"getRangeMinDate()\\\"\\n          [max]=\\\"max\\\"\\n          readonly=\\\"readonly\\\"\\n          (dateChange)=\\\"handleDateChange($event)\\\">\\n      </mat-form-field>\\n    </div>\\n  </div>\\n</div>\\n\\n<div *ngIf=\\\"style === 'calendar' && type ==='year'\\\">\\n\\n  <div *ngIf=\\\"!isRange\\\" class=\\\"igo-col igo-col-100 igo-col-100-m\\\">\\n        <mat-form-field>\\n            <mat-select placeholder=\\\"{{'igo.geo.timeFilter.date' | translate}}\\\" [(ngModel)]=\\\"year\\\" (selectionChange)=\\\"handleYearChange($event)\\\">\\n                  <mat-option [value]=\\\"year\\\" *ngFor=\\\"let year of listYears\\\">{{year}}</mat-option>\\n            </mat-select>\\n        </mat-form-field>\\n  </div>\\n\\n  <div *ngIf=\\\"isRange\\\">\\n    <div class=\\\"igo-col igo-col-100\\\">\\n        <mat-form-field>\\n            <mat-select placeholder=\\\"{{'igo.geo.timeFilter.startDate' | translate}}\\\" [(ngModel)]=\\\"startYear\\\" (selectionChange)=\\\"handleYearChange($event)\\\">\\n              <mat-option [value]=\\\"startYear\\\" *ngFor=\\\"let startYear of startListYears\\\">{{startYear}}</mat-option>\\n            </mat-select>\\n      </mat-form-field>\\n    </div>\\n\\n    <div class=\\\"igo-col igo-col-100\\\">\\n    <mat-form-field>\\n        <mat-select placeholder=\\\"{{'igo.geo.timeFilter.endDate' | translate}}\\\" [(ngModel)]=\\\"endYear\\\" (selectionChange)=\\\"handleYearChange($event)\\\">\\n              <mat-option [value]=\\\"endYear\\\" *ngFor=\\\"let endYear of endListYears\\\">{{endYear}}</mat-option>\\n        </mat-select>\\n      </mat-form-field>\\n    </div>\\n  </div>\\n\\n</div>\\n\\n\\n  <br>\\n  <div *ngIf=\\\"!isRange && style === 'slider' && type === 'year'\\\" class=\\\"igo-col igo-col-100 igo-col-100-m mat-typography\\\">\\n    <span>{{startYear}}</span>\\n    <mat-slider\\n        id=\\\"time-slider\\\"\\n        tickInterval=\\\"auto\\\"\\n        step=\\\"{{step}}\\\"\\n        [min]=\\\"startYear\\\"\\n        [max]=\\\"endYear\\\"\\n        [value]=\\\"handleSliderValue()\\\"\\n        [color]=\\\"color\\\"\\n        thumbLabel\\n        (input)=\\\"handleSliderYearChange($event)\\\"\\n        (change)=\\\"handleSliderYearChange($event)\\\"\\n        [disabled]= \\\"!options.enabled || !layer.visible\\\">\\n    </mat-slider>\\n    <span>{{endYear}}</span>\\n    <p *ngIf= \\\"options.enabled\\\" class=\\\"date-below\\\">{{year}}</p>\\n    <div #actions class=\\\"igo-layer-actions-container\\\">\\n      <mat-slide-toggle (change)=\\\"toggleFilterState()\\\" tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n        [matTooltip]=\\\"'igo.geo.filter.toggleFilterState' | translate\\\" [color]=\\\"color\\\" [checked]=\\\"options.enabled\\\"\\n        [disabled]=\\\"!layer.visible\\\">\\n      </mat-slide-toggle>\\n      <button [disabled]= \\\"!options.enabled  || !layer.visible\\\" mat-icon-button color=\\\"primary\\\" (click)=\\\"playYear($event)\\\">\\n        <mat-icon svgIcon=\\\"{{playIcon}}\\\"></mat-icon>\\n       </button>\\n      <button [disabled]=\\\"!options.enabled  || !layer.visible\\\" mat-icon-button color=\\\"primary\\\" (click)=\\\"resetFilter($event)\\\">\\n        <mat-icon svgIcon=\\\"{{resetIcon}}\\\"></mat-icon>\\n      </button>\\n    </div>\\n  </div>\\n\\n<div *ngIf=\\\"style === 'slider' && type !== 'year'\\\" class=\\\"igo-col igo-col-100 igo-col-100-m\\\">\\n  <mat-slider\\n      id=\\\"time-slider\\\"\\n      tickInterval=\\\"auto\\\"\\n      step=\\\"{{step}}\\\"\\n      [min]=\\\"dateToNumber(min)\\\"\\n      [max]=\\\"dateToNumber(max)\\\"\\n      [value]=\\\"handleSliderValue()\\\"\\n      thumbLabel\\n      (input)=\\\"handleSliderDateChange($event)\\\"\\n      (selectionChange)=\\\"handleSliderDateChange($event)\\\">\\n  </mat-slider>\\n  <p class=\\\"date-below\\\">{{handleSliderTooltip()}}</p>\\n  <button mat-icon-button color=\\\"primary\\\" (click)=\\\"playFilter($event)\\\">\\n   <mat-icon svgIcon=\\\"{{playIcon}}\\\"></mat-icon>\\n  </button>\\n</div>\\n\",\n                styles: [\".igo-layer-filters-container{padding-left:5px}mat-slider ::ng-deep div.mat-slider-thumb-label{height:32px;margin:0 auto;width:32px}mat-slider ::ng-deep span.mat-slider-thumb-label-text{font-size:10px}#time-slider{margin:0 auto;width:70%}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){#time-slider{margin:0 auto;width:60%}}.date-below{margin:0}mat-form-field{text-align:center}mat-datetimepicker-toggle ::ng-deep .mat-icon{padding-bottom:30px}.igo-layer-actions-container>.mat-slide-toggle{vertical-align:middle}\"]\n            }]\n    }], function () { return [{ type: ɵngcc11.DateAdapter }]; }, { change: [{\n            type: Output\n        }], yearChange: [{\n            type: Output\n        }], currentValue: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }], options: [{\n            type: Input\n        }], mySlider: [{\n            type: ViewChild,\n            args: [MatSlider]\n        }] }); })();\n\nclass TimeFilterItemComponent {\n    constructor(timeFilterService) {\n        this.timeFilterService = timeFilterService;\n        this.color = 'primary';\n        this.showLegend$ = new BehaviorSubject(false);\n        this.filtersCollapsed = false;\n        this.header = true;\n    }\n    get datasource() {\n        return this.layer.dataSource;\n    }\n    handleYearChange(year) {\n        this.timeFilterService.filterByYear(this.datasource, year);\n    }\n    handleDateChange(date) {\n        this.timeFilterService.filterByDate(this.datasource, date);\n    }\n    toggleLegend(collapsed) {\n        this.layer.legendCollapsed = collapsed;\n        this.showLegend$.next(!collapsed);\n    }\n    toggleLegendOnClick() {\n        if (!this.filtersCollapsed) {\n            this.toggleLegend(this.showLegend$.value);\n        }\n    }\n    setVisible() {\n        this.layer.visible = true;\n    }\n    toggleFiltersCollapsed() {\n        this.filtersCollapsed = !this.filtersCollapsed;\n    }\n}\nTimeFilterItemComponent.ɵfac = function TimeFilterItemComponent_Factory(t) { return new (t || TimeFilterItemComponent)(ɵngcc0.ɵɵdirectiveInject(TimeFilterService)); };\nTimeFilterItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TimeFilterItemComponent, selectors: [[\"igo-time-filter-item\"]], inputs: { header: \"header\", layer: \"layer\" }, decls: 8, vars: 7, consts: [[4, \"ngIf\"], [1, \"igo-datasource-filters-container\"], [\"filters\", \"\"], [1, \"igo-layer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", 4, \"ngIf\"], [3, \"layer\", \"options\", \"currentValue\", \"change\", \"yearChange\"], [\"mat-list-avatar\", \"\", \"igoCollapse\", \"\", \"svgIcon\", \"chevron-up\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"click\"], [\"matLine\", \"\", 3, \"ngStyle\", \"click\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"color\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"color\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"eye-off\"], [3, \"layer\"]], template: function TimeFilterItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, TimeFilterItemComponent_mat_list_item_0_Template, 5, 7, \"mat-list-item\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1, 2);\n        ɵngcc0.ɵɵelementStart(3, \"div\", 3, 4);\n        ɵngcc0.ɵɵtemplate(5, TimeFilterItemComponent_igo_layer_legend_5_Template, 1, 1, \"igo-layer-legend\", 5);\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"igo-time-filter-form\", 6);\n        ɵngcc0.ɵɵlistener(\"change\", function TimeFilterItemComponent_Template_igo_time_filter_form_change_7_listener($event) { return ctx.handleDateChange($event); })(\"yearChange\", function TimeFilterItemComponent_Template_igo_time_filter_form_yearChange_7_listener($event) { return ctx.handleYearChange($event); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.header);\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(6, 5, ctx.showLegend$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"layer\", ctx.layer)(\"options\", ctx.datasource.options.timeFilter)(\"currentValue\", ctx.datasource.options.params.TIME);\n    } }, directives: [ɵngcc1.NgIf, TimeFilterFormComponent, ɵngcc10.MatListItem, ɵngcc4.MatIcon, ɵngcc10.MatListAvatarCssMatStyler, ɵngcc9.CollapseDirective, ɵngcc11.MatLine, ɵngcc1.NgStyle, ɵngcc2.MatButton, ɵngcc3.MatTooltip, LayerLegendComponent], pipes: [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{overflow:hidden}.igo-datasource-filters-container[_ngcontent-%COMP%]{display:inline-block;padding-top:5px;text-align:center;width:100%}.igo-layer-legend-container[_ngcontent-%COMP%]{padding-left:1.125em;width:calc(100% - 18px)}\"] });\nTimeFilterItemComponent.ctorParameters = () => [\n    { type: TimeFilterService }\n];\nTimeFilterItemComponent.propDecorators = {\n    header: [{ type: Input }],\n    layer: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TimeFilterItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-item',\n                template: \"<mat-list-item *ngIf=\\\"header\\\">\\n  <mat-icon\\n    class=\\\"igo-chevron\\\"\\n    mat-list-avatar\\n    igoCollapse\\n    [target]=\\\"filters\\\"\\n    [collapsed]=\\\"filtersCollapsed\\\"\\n    (click)=\\\"toggleFiltersCollapsed()\\\"\\n    svgIcon=\\\"chevron-up\\\" >\\n  </mat-icon>\\n  <h4 (click)=\\\"toggleLegendOnClick()\\\" [ngStyle]=\\\"{'cursor': filtersCollapsed ? 'default' : 'pointer'}\\\"  matLine>{{layer.title}}</h4>\\n  \\n  <button *ngIf=\\\"!layer.visible\\\" mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"'igo.geo.layer.showLayer' | translate\\\" color=\\\"color\\\" (click)=\\\"setVisible()\\\">\\n    <mat-icon svgIcon=\\\"eye-off\\\"></mat-icon>\\n  </button>\\n\\n</mat-list-item>\\n\\n<div #filters class=\\\"igo-datasource-filters-container\\\">\\n  <div #legend class=\\\"igo-layer-legend-container\\\">\\n    <igo-layer-legend *ngIf=\\\"showLegend$ | async\\\" [layer]=\\\"layer\\\">\\n    </igo-layer-legend>\\n  </div>\\n  <igo-time-filter-form\\n    [layer]= \\\"layer\\\"\\n    [options]=\\\"datasource.options.timeFilter\\\"\\n    [currentValue]=\\\"datasource.options.params.TIME\\\"\\n    (change)=\\\"handleDateChange($event)\\\"\\n    (yearChange)=\\\"handleYearChange($event)\\\">\\n  </igo-time-filter-form>\\n</div>\\n\",\n                styles: [\":host{overflow:hidden}.igo-datasource-filters-container{display:inline-block;padding-top:5px;text-align:center;width:100%}.igo-layer-legend-container{padding-left:1.125em;width:calc(100% - 18px)}\"]\n            }]\n    }], function () { return [{ type: TimeFilterService }]; }, { header: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }] }); })();\n\nclass TimeFilterListComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        this._layers = [];\n    }\n    get layers() {\n        return this._layers;\n    }\n    set layers(value) {\n        this._layers = value;\n        this.cdRef.detectChanges();\n    }\n}\nTimeFilterListComponent.ɵfac = function TimeFilterListComponent_Factory(t) { return new (t || TimeFilterListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nTimeFilterListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TimeFilterListComponent, selectors: [[\"igo-time-filter-list\"]], inputs: { layers: \"layers\" }, decls: 3, vars: 6, consts: [[3, \"navigation\", \"selection\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"igoListItem\", \"\", 3, \"header\", \"layer\"]], template: function TimeFilterListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-list\", 0);\n        ɵngcc0.ɵɵtemplate(1, TimeFilterListComponent_ng_template_1_Template, 1, 2, \"ng-template\", 1);\n        ɵngcc0.ɵɵpipe(2, \"filterableDataSource\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"navigation\", false)(\"selection\", false);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind2(2, 3, ctx.layers, \"time\"));\n    } }, directives: [ɵngcc9.ListComponent, ɵngcc1.NgForOf, TimeFilterItemComponent, ɵngcc9.ListItemDirective], pipes: [FilterableDataSourcePipe], encapsulation: 2, changeDetection: 0 });\nTimeFilterListComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef }\n];\nTimeFilterListComponent.propDecorators = {\n    layers: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TimeFilterListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-list',\n                template: \"<igo-list [navigation]=\\\"false\\\" [selection]=\\\"false\\\">\\n  <ng-template ngFor let-layer [ngForOf]=\\\"layers | filterableDataSource: 'time'\\\">\\n    <igo-time-filter-item [header]=\\\"true\\\" igoListItem [layer]=\\\"layer\\\"></igo-time-filter-item>\\n  </ng-template>\\n</igo-list>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { layers: [{\n            type: Input\n        }] }); })();\n\nclass TimeFilterListBindingDirective {\n    constructor(component, mapService) {\n        this.mapService = mapService;\n        this.component = component;\n    }\n    ngOnInit() {\n        // Override input layers\n        this.component.layers = [];\n        this.layers$$ = this.mapService.getMap().layers$.subscribe(layers => {\n            this.component.layers = layers;\n        });\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n    }\n}\nTimeFilterListBindingDirective.ɵfac = function TimeFilterListBindingDirective_Factory(t) { return new (t || TimeFilterListBindingDirective)(ɵngcc0.ɵɵdirectiveInject(TimeFilterListComponent, 2), ɵngcc0.ɵɵdirectiveInject(MapService)); };\nTimeFilterListBindingDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: TimeFilterListBindingDirective, selectors: [[\"\", \"igoTimeFilterListBinding\", \"\"]] });\nTimeFilterListBindingDirective.ctorParameters = () => [\n    { type: TimeFilterListComponent, decorators: [{ type: Self }] },\n    { type: MapService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TimeFilterListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoTimeFilterListBinding]'\n            }]\n    }], function () { return [{ type: TimeFilterListComponent, decorators: [{\n                type: Self\n            }] }, { type: MapService }]; }, null); })();\n\nclass WktService {\n    constructor() { }\n    wktToFeature(wkt, wktProj, featureProj) {\n        return new olWKT().readFeature(wkt, {\n            dataProjection: wktProj,\n            featureProjection: featureProj\n        });\n    }\n    extentToWkt(epsgTO, extent, extentProj) {\n        let currentExtent = transformExtent(extent, extentProj, epsgTO);\n        currentExtent = this.roundCoordinateArray(currentExtent, epsgTO, 0);\n        const wktPoly = `POLYGON((\n      ${extent[0]} ${extent[1]},\n      ${extent[0]} ${extent[3]},\n      ${extent[2]} ${extent[3]},\n      ${extent[2]} ${extent[1]},\n      ${extent[0]} ${extent[1]}))`;\n        const wktLine = `LINESTRING(\n      ${extent[0]} ${extent[1]},\n      ${extent[0]} ${extent[3]},\n      ${extent[2]} ${extent[3]},\n      ${extent[2]} ${extent[1]},\n      ${extent[0]} ${extent[1]})`;\n        const wktMultiPoints = `MULTIPOINT(\n        ${extent[0]} ${extent[1]},\n        ${extent[0]} ${extent[3]},\n        ${extent[2]} ${extent[3]},\n        ${extent[2]} ${extent[1]})`;\n        return {\n            wktPoly,\n            wktLine,\n            wktMultiPoints\n        };\n    }\n    roundCoordinateArray(coordinateArray, projection, decimal = 0) {\n        const lproj = get(projection);\n        const units = lproj.getUnits();\n        const olUnits = ['ft', 'm', 'us-ft'];\n        if (olUnits.indexOf(units) !== -1) {\n            coordinateArray = this.roundArray(coordinateArray, decimal);\n        }\n        return coordinateArray;\n    }\n    roundArray(array, decimal = 0) {\n        let x = 0;\n        while (x < array.length) {\n            array[x] = array[x].toFixed(decimal);\n            x++;\n        }\n        return array;\n    }\n    snrcToWkt(snrc, epsgTO) {\n        snrc = snrc.toLowerCase();\n        let wktPoly;\n        const ew = {\n            1: { from: -56, to: -64 },\n            2: { from: -64, to: -72 },\n            3: { from: -72, to: -80 },\n            4: { from: -80, to: -88 },\n            5: { from: -88, to: -96 },\n            6: { from: -96, to: -104 },\n            7: { from: -104, to: -112 },\n            8: { from: -112, to: -120 },\n            9: { from: -120, to: -128 },\n            10: { from: -128, to: -136 }\n        };\n        const sn = {\n            1: { from: 44, to: 48 },\n            2: { from: 48, to: 52 },\n            3: { from: 52, to: 56 },\n            4: { from: 56, to: 60 },\n            5: { from: 60, to: 64 },\n            6: { from: 64, to: 68 },\n            7: { from: 68, to: 72 },\n            8: { from: 72, to: 76 },\n            9: { from: 76, to: -128 }\n        };\n        const snrc250kIndex = [\n            ['m', 'n', 'o', 'p'],\n            ['l', 'k', 'j', 'i'],\n            ['e', 'f', 'g', 'h'],\n            ['d', 'c', 'b', 'a']\n        ];\n        const snrc50kIndex = [\n            ['13', '14', '15', '16'],\n            ['12', '11', '10', '09'],\n            ['05', '06', '07', '08'],\n            ['04', '03', '02', '01']\n        ];\n        const checkSNRC50k = /\\d{2,3}[a-p][0,1][0-9]/gi;\n        const checkSNRC250k = /\\d{2,3}[a-p]/gi;\n        const checkSNRC1m = /\\d{2,3}/gi;\n        let snrc1m = false;\n        let snrc250k = false;\n        let snrc50k = false;\n        if (checkSNRC50k.test(snrc)) {\n            snrc50k = true;\n        }\n        else {\n            if (checkSNRC250k.test(snrc)) {\n                snrc250k = true;\n            }\n            else {\n                if (checkSNRC1m.test(snrc)) {\n                    snrc1m = true;\n                }\n            }\n        }\n        if (snrc1m) {\n            snrc += 'a01';\n        }\n        else if (snrc250k) {\n            snrc += '01';\n        }\n        if (/\\d{2,3}[a-p][0,1][0-9]/gi.test(snrc)) {\n            const regex1m = /(?=[a-p])/gi;\n            const ar1m = snrc.split(regex1m);\n            const part1m = ar1m[0];\n            const part250k = ar1m[1][0];\n            const part50k = ar1m[1].split(part250k)[1];\n            let separator = 1;\n            if (part1m.length === 3) {\n                separator = 2;\n            }\n            const partEW = part1m.substring(0, separator);\n            const partSN = part1m.substring(separator);\n            const unit1mEW = 8;\n            const unit1mSN = 4;\n            const unit250kEW = 2;\n            const unit250kSN = 1;\n            const unit50kEW = 0.5;\n            const unit50kSN = 0.25;\n            let index250kEW = 0;\n            let index250kSN = 0;\n            let index50kEW = 0;\n            let index50kSN = 0;\n            snrc250kIndex.forEach(element => {\n                if (element.indexOf(part250k) !== -1) {\n                    index250kSN = snrc250kIndex.indexOf(element);\n                    index250kEW = element.indexOf(part250k);\n                }\n            });\n            snrc50kIndex.forEach(element => {\n                if (element.indexOf(part50k) !== -1) {\n                    index50kSN = snrc50kIndex.indexOf(element);\n                    index50kEW = element.indexOf(part50k);\n                }\n            });\n            let increment250kEW = 0;\n            let increment250kSN = 0;\n            let increment50kEW = 0;\n            let increment50kSN = 0;\n            let unitPerTypeEW = unit1mEW;\n            let unitPerTypeSN = unit1mSN;\n            if (snrc250k) {\n                increment250kEW = index250kEW * unit250kEW;\n                increment250kSN = index250kSN * unit250kSN;\n                increment50kEW = 0;\n                increment50kSN = 0;\n                unitPerTypeEW = unit250kEW;\n                unitPerTypeSN = unit250kSN;\n            }\n            else if (snrc50k) {\n                increment250kEW = index250kEW * unit250kEW;\n                increment250kSN = index250kSN * unit250kSN;\n                increment50kEW = index50kEW * unit50kEW;\n                increment50kSN = index50kSN * unit50kSN;\n                unitPerTypeEW = unit50kEW;\n                unitPerTypeSN = unit50kSN;\n            }\n            const coord = {\n                ul: [\n                    ew[partEW].to + increment250kEW + increment50kEW,\n                    sn[partSN].to - increment250kSN - increment50kSN\n                ]\n            };\n            coord.lr = [\n                coord.ul[0] + unitPerTypeEW,\n                coord.ul[1] - unitPerTypeSN\n            ];\n            coord.ur = [coord.ul[0], coord.ul[1] - unitPerTypeSN];\n            coord.ll = [coord.ul[0] + unitPerTypeEW, coord.ul[1]];\n            coord.ul = transform([coord.ul[0], coord.ul[1]], 'EPSG:4326', epsgTO);\n            coord.lr = transform([coord.lr[0], coord.lr[1]], 'EPSG:4326', epsgTO);\n            coord.ur = transform([coord.ur[0], coord.ur[1]], 'EPSG:4326', epsgTO);\n            coord.ll = transform([coord.ll[0], coord.ll[1]], 'EPSG:4326', epsgTO);\n            // Rounded coordinate to shorten url in get\n            coord.ul = this.roundCoordinateArray(coord.ul, epsgTO, 0);\n            coord.lr = this.roundCoordinateArray(coord.lr, epsgTO, 0);\n            coord.ur = this.roundCoordinateArray(coord.ur, epsgTO, 0);\n            coord.ll = this.roundCoordinateArray(coord.ll, epsgTO, 0);\n            wktPoly =\n                'POLYGON((' +\n                    [\n                        coord.ul.join(' '),\n                        coord.ur.join(' '),\n                        coord.lr.join(' '),\n                        coord.ll.join(' '),\n                        coord.ul.join(' ')\n                    ].join(',') +\n                    '))';\n            const wktLine = 'LINESTRING(' +\n                [\n                    coord.ul.join(' '),\n                    coord.ur.join(' '),\n                    coord.lr.join(' '),\n                    coord.ll.join(' '),\n                    coord.ul.join(' ')\n                ].join(',') +\n                ')';\n            const wktMultiPoints = 'MULTIPOINT(' +\n                [\n                    coord.ul.join(' '),\n                    coord.ur.join(' '),\n                    coord.lr.join(' '),\n                    coord.ll.join(' ')\n                ].join(',') +\n                ')';\n            return {\n                wktPoly,\n                wktLine,\n                wktMultiPoints\n            };\n        }\n    }\n}\nWktService.ɵfac = function WktService_Factory(t) { return new (t || WktService)(); };\nWktService.ɵprov = ɵɵdefineInjectable({ factory: function WktService_Factory() { return new WktService(); }, token: WktService, providedIn: \"root\" });\nWktService.ctorParameters = () => [];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WktService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nclass OgcFilterFormComponent {\n    constructor(wktService) {\n        this.wktService = wktService;\n        this.ogcFilterOperator = OgcFilterOperator;\n        this.ogcFilterOperators$ = new BehaviorSubject(undefined);\n        this.value = '';\n        this.selectedField$ = new BehaviorSubject(undefined);\n        this.fields$ = new BehaviorSubject([]);\n        this.color = 'primary';\n        this.currentFilterIsSpatial$ = new BehaviorSubject(false);\n        this.defaultStepMillisecond = 6000;\n        this._snrc = '';\n        this.floatLabel = 'never';\n        // TODO: Filter permitted operator based on wfscapabilities\n        // Need to work on regex on XML capabilities because\n        // comaparison operator's name varies between WFS servers...\n        // Ex: IsNull vs PropertyIsNull vs IsNil ...\n        this.allOgcFilterOperators = new OgcFilterWriter().operators;\n        this.ogcFilterOperators$.next(this.allOgcFilterOperators);\n        this.igoSpatialSelectors = [\n            {\n                type: 'fixedExtent'\n            },\n            {\n                type: 'snrc'\n            }\n        ];\n        // TODO: selectFeature & drawFeature\n    }\n    set snrc(value) {\n        const checkSNRC50k = /^\\d{2}[a-l][0,1][0-9]$/gi;\n        const checkSNRC250k = /^\\d{2}[a-p]$/gi;\n        const checkSNRC1m = /^\\d{2}$/gi;\n        if (checkSNRC1m.test(value) ||\n            checkSNRC250k.test(value) ||\n            checkSNRC50k.test(value)) {\n            this._snrc = value;\n            this.currentFilter.igoSNRC = value;\n        }\n    }\n    get snrc() {\n        return this._snrc;\n    }\n    get activeFilters() {\n        return this.datasource.options.ogcFilters.interfaceOgcFilters.filter((f) => f.active === true);\n    }\n    get allowedOperators() {\n        return new OgcFilterWriter().computeAllowedOperators(this.fields$.value, this.currentFilter.propertyName, this.datasource.options.ogcFilters.allowedOperatorsType);\n    }\n    ngOnInit() {\n        const sFields = this.datasource.options.sourceFields.filter((sf) => sf.excludeFromOgcFilters === undefined || !sf.excludeFromOgcFilters);\n        sFields.map((sfs) => {\n            if (sfs.values) {\n                sfs.values.sort();\n            }\n        });\n        this.fields$.next(sFields);\n        this.updateFieldsList();\n        this.selectedField$.next(this.fields$.value.find((f) => f.name === this.currentFilter.propertyName));\n        this.updateValuesList();\n        this.selectedField$.subscribe((f) => {\n            this.ogcFilterOperators$.next(this.allowedOperators);\n            if (Object.keys(this.allowedOperators).indexOf(this.currentFilter.operator) === -1) {\n                this.currentFilter.operator = Object.keys(this.allowedOperators)[0];\n                this.currentFilter.operator = Object.keys(this.allowedOperators)[0];\n            }\n            this.updateValuesList();\n        });\n        this.currentFilterIsSpatial();\n    }\n    updateFieldsList(value) {\n        this.filteredFields$ =\n            value && value.length > 0 ? of(this._filterFields(value)) : this.fields$;\n    }\n    updateValuesList(value, pos) {\n        this.filteredValues$ =\n            value && value.length > 0\n                ? of(this._filterValues(value))\n                : this.selectedField$.value\n                    ? of(this.selectedField$.value.values)\n                    : of([]);\n        if (value && value.length >= 2) {\n            this.changeProperty(value, pos);\n        }\n    }\n    _filterFields(value) {\n        const keywordRegex = new RegExp(value.normalize('NFD').replace(/[\\u0300-\\u036f]/g, ''), 'gi');\n        return this.fields$.value.filter((val) => keywordRegex.test(val.alias.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '')));\n    }\n    _filterValues(value) {\n        const keywordRegex = new RegExp(value\n            .toString()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, ''), 'gi');\n        return this.selectedField$.value.values.filter((val) => keywordRegex.test(val\n            .toString()\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')));\n    }\n    clearSelectedField() {\n        this.currentFilter.propertyName = '';\n        this.selectedField$.next(undefined);\n        this.clearProperty();\n    }\n    isClearable(pos) {\n        const detectedProperty = this.detectProperty(pos);\n        if (detectedProperty) {\n            return this.currentFilter[detectedProperty];\n        }\n    }\n    clearProperty(pos) {\n        // this.autoCompleteInputValues.closePanel();\n        const detectedProperty = this.detectProperty(pos);\n        if (detectedProperty) {\n            return (this.currentFilter[detectedProperty] = '');\n        }\n    }\n    toggleFilterState(event) {\n        this.datasource.options.ogcFilters.interfaceOgcFilters.find((f) => f.filterid === this.currentFilter.filterid).active = event.checked;\n        this.refreshFilters();\n    }\n    deleteFilter() {\n        const ogcFilters = this.datasource.options.ogcFilters;\n        ogcFilters.interfaceOgcFilters = ogcFilters.interfaceOgcFilters.filter((f) => f.filterid !== this.currentFilter.filterid);\n        this.refreshFilters();\n    }\n    changeLogical(logical) {\n        this.currentFilter.parentLogical = logical;\n        this.refreshFilters();\n    }\n    changeOperator(operator) {\n        this.currentFilter.operator = operator;\n        this.currentFilterIsSpatial();\n        if (this.currentFilterIsSpatial$.value &&\n            this.currentFilter.wkt_geometry.length === 0) {\n            this.changeSpatialSelector(this.currentFilter.igoSpatialSelector);\n        }\n        else {\n            this.refreshFilters();\n        }\n    }\n    changeField(field) {\n        this.currentFilter.propertyName = field;\n        this.selectedField$.next(this.fields$.value.find((f) => f.name === this.currentFilter.propertyName));\n        this.refreshFilters();\n    }\n    // Issue with mapserver 7.2 and Postgis layers. Fixed in 7.4\n    // Due to this issue, the checkbox is hide.\n    changeCaseSensitive(matchCase) {\n        this.currentFilter.matchCase = matchCase.checked;\n        this.refreshFilters();\n    }\n    changeProperty(value, pos) {\n        const detectedProperty = this.detectProperty(pos);\n        if (detectedProperty) {\n            this.datasource.options.ogcFilters.interfaceOgcFilters.find((f) => f.filterid === this.currentFilter.filterid)[detectedProperty] = value;\n            this.refreshFilters();\n        }\n    }\n    changeNumericProperty(value, pos) {\n        this.changeProperty(parseFloat(value), pos);\n    }\n    changeSpatialSelector(value) {\n        this.currentFilter.igoSpatialSelector = value;\n        if (value === 'fixedExtent') {\n            this.changeMapExtentGeometry(false);\n        }\n        this.currentFilterIsSpatial();\n        this.refreshFilters();\n    }\n    changeSNRC(value) {\n        this.snrc = value;\n        this.changeSNRCGeometry();\n    }\n    changeSNRCGeometry() {\n        const interfaceOgcFilter = this.datasource.options.ogcFilters.interfaceOgcFilters.find((f) => f.filterid === this.currentFilter.filterid);\n        if (!interfaceOgcFilter) {\n            return;\n        }\n        if (this.snrc && this.currentFilter.igoSpatialSelector === 'snrc') {\n            this.currentFilter.wkt_geometry = this.wktService.snrcToWkt(this.snrc, this.map.projection).wktPoly;\n        }\n        this.refreshFilters();\n    }\n    changeMapExtentGeometry(refresh = true) {\n        const interfaceOgcFilter = this.datasource.options.ogcFilters.interfaceOgcFilters.find((f) => f.filterid === this.currentFilter.filterid);\n        if (!interfaceOgcFilter) {\n            return;\n        }\n        if (this.currentFilter.igoSpatialSelector === 'fixedExtent') {\n            this.currentFilter.wkt_geometry = this.wktService.extentToWkt(this.map.projection, this.map.viewController.getExtent(), this.map.projection).wktPoly;\n        }\n        if (refresh) {\n            this.refreshFilters();\n        }\n    }\n    detectProperty(pos) {\n        switch (this.currentFilter.operator) {\n            case OgcFilterOperator.PropertyIsNotEqualTo:\n            case OgcFilterOperator.PropertyIsEqualTo:\n            case OgcFilterOperator.PropertyIsGreaterThan:\n            case OgcFilterOperator.PropertyIsGreaterThanOrEqualTo:\n            case OgcFilterOperator.PropertyIsLessThan:\n            case OgcFilterOperator.PropertyIsLessThanOrEqualTo:\n                return 'expression';\n            case OgcFilterOperator.PropertyIsLike:\n                return 'pattern';\n            case OgcFilterOperator.PropertyIsBetween:\n                return pos && pos === 1\n                    ? 'lowerBoundary'\n                    : pos && pos === 2\n                        ? 'upperBoundary'\n                        : undefined;\n            case OgcFilterOperator.During:\n                return pos && pos === 1\n                    ? 'begin'\n                    : pos && pos === 2\n                        ? 'end'\n                        : undefined;\n            default:\n                return;\n        }\n    }\n    currentFilterIsSpatial() {\n        let isSpatial = false;\n        if (this.currentFilter) {\n            isSpatial =\n                [\n                    OgcFilterOperator.Contains,\n                    OgcFilterOperator.Intersects,\n                    OgcFilterOperator.Within\n                ].indexOf(this.currentFilter.operator) !== -1;\n        }\n        this.currentFilterIsSpatial$.next(isSpatial);\n    }\n    isTemporalOperator() {\n        return (this.currentFilter.operator.toLowerCase() ===\n            this.ogcFilterOperator.During.toLowerCase());\n    }\n}\nOgcFilterFormComponent.ɵfac = function OgcFilterFormComponent_Factory(t) { return new (t || OgcFilterFormComponent)(ɵngcc0.ɵɵdirectiveInject(WktService)); };\nOgcFilterFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OgcFilterFormComponent, selectors: [[\"igo-ogc-filter-form\"]], inputs: { floatLabel: \"floatLabel\", refreshFilters: \"refreshFilters\", datasource: \"datasource\", map: \"map\", currentFilter: \"currentFilter\" }, decls: 42, vars: 76, consts: [[\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"checked\", \"click\", \"change\"], [3, \"ngClass\"], [\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"value\", \"matTooltip\", \"selectionChange\"], [\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\"], [\"class\", \"field\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [3, \"ngClass\", \"floatLabel\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"disabled\", \"value\", \"selectionChange\"], [\"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"spatialSelector\", 4, \"ngIf\"], [\"class\", \"singleInput\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [1, \"igo-layer-button-group\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"], [\"class\", \"snrc\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"dualInput\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [3, \"datasource\", \"currentFilter\", \"datasourceChange\", \"currentFilterChange\", \"changeProperty\", 4, \"ngIf\"], [1, \"field\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\"], [\"matInput\", \"\", \"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"placeholder\", \"disabled\", \"matAutocomplete\", \"value\", \"matTooltip\", \"input\"], [3, \"optionSelected\"], [\"autoCompleteField\", \"matAutocomplete\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"id\", \"matTooltip\", 4, \"ngFor\", \"ngForOf\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"id\", \"matTooltip\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"aria-label\", \"Clear\", 3, \"disabled\", \"click\"], [\"svgIcon\", \"close\"], [1, \"spatialSelector\"], [3, \"disabled\", \"value\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"singleInput\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\"], [\"autoCompleteValues\", \"matAutocomplete\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\", 4, \"ngFor\", \"ngForOf\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\"], [1, \"snrc\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\"], [\"matInput\", \"\", \"tooltip-position\", \"above\", \"matTooltipShowDelay\", \"500\", 3, \"placeholder\", \"value\", \"matTooltip\", \"input\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"click\"], [\"svgIcon\", \"arrow-expand-all\"], [1, \"dualInput\", 3, \"floatLabel\", \"mouseenter\", \"mouseleave\"], [\"matInput\", \"\", \"type\", \"number\", 3, \"placeholder\", \"disabled\", \"matAutocomplete\", \"value\", \"input\"], [\"autoDualValueOperator1\", \"matAutocomplete\"], [\"autoDualValueOperator2\", \"matAutocomplete\"], [3, \"datasource\", \"currentFilter\", \"datasourceChange\", \"currentFilterChange\", \"changeProperty\"]], template: function OgcFilterFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-checkbox\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function OgcFilterFormComponent_Template_mat_checkbox_click_0_listener($event) { return $event.stopPropagation(); })(\"change\", function OgcFilterFormComponent_Template_mat_checkbox_change_0_listener($event) { return ctx.toggleFilterState($event); });\n        ɵngcc0.ɵɵpipe(1, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"mat-form-field\", 1);\n        ɵngcc0.ɵɵelementStart(3, \"mat-select\", 2);\n        ɵngcc0.ɵɵlistener(\"selectionChange\", function OgcFilterFormComponent_Template_mat_select_selectionChange_3_listener($event) { return ctx.changeLogical($event.value); });\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementStart(5, \"mat-option\", 3);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵtext(7);\n        ɵngcc0.ɵɵpipe(8, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"mat-option\", 3);\n        ɵngcc0.ɵɵpipe(10, \"translate\");\n        ɵngcc0.ɵɵtext(11);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(13, OgcFilterFormComponent_mat_form_field_13_Template, 13, 22, \"mat-form-field\", 4);\n        ɵngcc0.ɵɵpipe(14, \"async\");\n        ɵngcc0.ɵɵpipe(15, \"async\");\n        ɵngcc0.ɵɵpipe(16, \"async\");\n        ɵngcc0.ɵɵpipe(17, \"async\");\n        ɵngcc0.ɵɵelementStart(18, \"mat-form-field\", 5);\n        ɵngcc0.ɵɵpipe(19, \"async\");\n        ɵngcc0.ɵɵpipe(20, \"async\");\n        ɵngcc0.ɵɵelementStart(21, \"mat-select\", 6);\n        ɵngcc0.ɵɵlistener(\"selectionChange\", function OgcFilterFormComponent_Template_mat_select_selectionChange_21_listener($event) { return ctx.changeOperator($event.value); });\n        ɵngcc0.ɵɵpipe(22, \"translate\");\n        ɵngcc0.ɵɵpipe(23, \"translate\");\n        ɵngcc0.ɵɵtemplate(24, OgcFilterFormComponent_mat_option_24_Template, 4, 7, \"mat-option\", 7);\n        ɵngcc0.ɵɵpipe(25, \"keyvalue\");\n        ɵngcc0.ɵɵpipe(26, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(27, OgcFilterFormComponent_mat_form_field_27_Template, 3, 3, \"mat-form-field\", 8);\n        ɵngcc0.ɵɵpipe(28, \"async\");\n        ɵngcc0.ɵɵtemplate(29, OgcFilterFormComponent_mat_form_field_29_Template, 8, 12, \"mat-form-field\", 9);\n        ɵngcc0.ɵɵelementStart(30, \"div\", 10);\n        ɵngcc0.ɵɵelementStart(31, \"button\", 11);\n        ɵngcc0.ɵɵlistener(\"click\", function OgcFilterFormComponent_Template_button_click_31_listener() { return ctx.deleteFilter(); });\n        ɵngcc0.ɵɵpipe(32, \"translate\");\n        ɵngcc0.ɵɵelement(33, \"mat-icon\", 12);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(34, OgcFilterFormComponent_mat_form_field_34_Template, 4, 7, \"mat-form-field\", 13);\n        ɵngcc0.ɵɵpipe(35, \"async\");\n        ɵngcc0.ɵɵtemplate(36, OgcFilterFormComponent_ng_container_36_Template, 2, 1, \"ng-container\", 14);\n        ɵngcc0.ɵɵpipe(37, \"async\");\n        ɵngcc0.ɵɵelement(38, \"br\");\n        ɵngcc0.ɵɵtemplate(39, OgcFilterFormComponent_mat_form_field_39_Template, 8, 11, \"mat-form-field\", 15);\n        ɵngcc0.ɵɵtemplate(40, OgcFilterFormComponent_mat_form_field_40_Template, 8, 11, \"mat-form-field\", 15);\n        ɵngcc0.ɵɵtemplate(41, OgcFilterFormComponent_igo_ogc_filter_time_41_Template, 1, 2, \"igo-ogc-filter-time\", 16);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 27, \"igo.geo.filter.toggleFilterState\"))(\"checked\", ctx.currentFilter.active);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction2(67, _c16, ctx.activeFilters.indexOf(ctx.currentFilter) !== 0 && ctx.currentFilter.active === true, ctx.activeFilters.indexOf(ctx.currentFilter) === 0 || ctx.currentFilter.active !== true));\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.currentFilter.active)(\"value\", ctx.currentFilter.parentLogical)(\"matTooltip\", ctx.currentFilter.parentLogical ? ɵngcc0.ɵɵpipeBind1(4, 29, \"igo.geo.operators.tooltip.\" + ctx.currentFilter.parentLogical) : \"\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.ogcFilterOperator.And)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(6, 31, \"igo.geo.operators.tooltip.And\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(8, 33, \"igo.geo.operators.And\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.ogcFilterOperator.Or)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(10, 35, \"igo.geo.operators.tooltip.Or\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(12, 37, \"igo.geo.operators.Or\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ɵngcc0.ɵɵpipeBind1(14, 39, ctx.currentFilterIsSpatial$) && ɵngcc0.ɵɵpipeBind1(15, 41, ctx.fields$) && ɵngcc0.ɵɵpipeBind1(16, 43, ctx.fields$).length > 0 && ɵngcc0.ɵɵpipeBind1(17, 45, ctx.fields$)[0].name !== \"\");\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction2(70, _c17, !ɵngcc0.ɵɵpipeBind1(19, 47, ctx.currentFilterIsSpatial$), ɵngcc0.ɵɵpipeBind1(20, 49, ctx.currentFilterIsSpatial$)))(\"floatLabel\", ctx.floatLabel);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ctx.currentFilter.operator ? ɵngcc0.ɵɵpipeBind1(22, 51, \"igo.geo.operators.tooltip.\" + ctx.currentFilter.operator) : ɵngcc0.ɵɵpipeBind1(23, 53, \"igo.geo.filter.selectOperator\"))(\"disabled\", !ctx.currentFilter.active)(\"value\", ctx.currentFilter.operator);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(25, 55, ɵngcc0.ɵɵpipeBind1(26, 57, ctx.ogcFilterOperators$)));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(28, 59, ctx.currentFilterIsSpatial$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpureFunction0(73, _c18).indexOf(ctx.detectProperty()) !== 0 - 1);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(32, 61, \"igo.geo.filter.removeFilter\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(35, 63, ctx.currentFilterIsSpatial$) && ctx.currentFilter.igoSpatialSelector === \"snrc\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(37, 65, ctx.currentFilterIsSpatial$) && ctx.currentFilter.igoSpatialSelector === \"fixedExtent\");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.isTemporalOperator() && ɵngcc0.ɵɵpureFunction0(74, _c19).indexOf(ctx.detectProperty(1)) !== 0 - 1);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.isTemporalOperator() && ɵngcc0.ɵɵpureFunction0(75, _c20).indexOf(ctx.detectProperty(2)) !== 0 - 1);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isTemporalOperator());\n    } }, directives: function () { return [ɵngcc13.MatCheckbox, ɵngcc3.MatTooltip, ɵngcc14.MatFormField, ɵngcc1.NgClass, ɵngcc15.MatSelect, ɵngcc11.MatOption, ɵngcc1.NgIf, ɵngcc1.NgForOf, ɵngcc2.MatButton, ɵngcc4.MatIcon, ɵngcc19.MatInput, ɵngcc26.MatAutocompleteTrigger, ɵngcc26.MatAutocomplete, ɵngcc14.MatSuffix, OgcFilterTimeComponent]; }, pipes: function () { return [ɵngcc5.TranslatePipe, ɵngcc1.AsyncPipe, ɵngcc9.KeyValuePipe]; }, styles: [\"[_nghost-%COMP%]{padding:5px 10px;width:100%}  .mat-form-field .mat-icon svg{color:#d3d3d3;height:1em;width:1em}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-select-arrow[_ngcontent-%COMP%]{visibility:hidden}.mat-slide-toggle[_ngcontent-%COMP%]{margin-top:10px}.logical[_ngcontent-%COMP%], .logicalHidden[_ngcontent-%COMP%]{flex-flow:column nowrap;margin-left:5px;max-width:45px;width:10%}.logicalHidden[_ngcontent-%COMP%],   .logical .mat-select-arrow,   .logicalHidden .mat-select-arrow{visibility:hidden}.field[_ngcontent-%COMP%]{margin-left:5px;width:20%}  .field .mat-select-arrow{visibility:hidden}.operator[_ngcontent-%COMP%]{margin-left:10px;text-align:center;width:12%}  .operator .mat-select-arrow{visibility:hidden}.spatialSelector[_ngcontent-%COMP%]{margin-left:5px;width:15%}  .spatialSelector .mat-select-arrow{visibility:hidden}.singleInput[_ngcontent-%COMP%]{margin-left:5px;width:30%}.snrc[_ngcontent-%COMP%]{margin-left:5px;width:20%}  .singleInput .mat-select-arrow{visibility:hidden}.dualInput[_ngcontent-%COMP%]{margin-left:5px;width:20%}  .dualInput .mat-select-arrow{visibility:hidden}.igo-layer-button-group[_ngcontent-%COMP%]{display:flex;float:right;padding-top:5px}.container[_ngcontent-%COMP%]{display:flex}\"] });\nOgcFilterFormComponent.ctorParameters = () => [\n    { type: WktService }\n];\nOgcFilterFormComponent.propDecorators = {\n    refreshFilters: [{ type: Input }],\n    datasource: [{ type: Input }],\n    map: [{ type: Input }],\n    currentFilter: [{ type: Input }],\n    floatLabel: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-form',\n                template: \"<mat-checkbox\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"'igo.geo.filter.toggleFilterState' | translate\\\"\\n  (click)=\\\"$event.stopPropagation()\\\"\\n  (change)=\\\"toggleFilterState($event)\\\"\\n  [checked]=\\\"currentFilter.active\\\">\\n</mat-checkbox>\\n\\n<mat-form-field\\n  [ngClass]=\\\"{'logical': activeFilters.indexOf(currentFilter) !== 0 && currentFilter.active===true, 'logicalHidden': activeFilters.indexOf(currentFilter) === 0 || currentFilter.active!==true}\\\">\\n  <mat-select\\n    [disabled]=\\\"!currentFilter.active\\\"\\n    [value]=\\\"currentFilter.parentLogical\\\"\\n    tooltip-position=\\\"above\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"currentFilter.parentLogical ? (('igo.geo.operators.tooltip.'+ currentFilter.parentLogical) | translate) : ''\\\"\\n    (selectionChange)=\\\"changeLogical($event.value)\\\">\\n      <mat-option\\n        [value]=ogcFilterOperator.And\\n        tooltip-position=\\\"above\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        [matTooltip]=\\\"'igo.geo.operators.tooltip.And' | translate\\\">\\n          {{'igo.geo.operators.And' | translate}}\\n      </mat-option>\\n      <mat-option\\n        [value]=ogcFilterOperator.Or\\n        tooltip-position=\\\"above\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        [matTooltip]=\\\"'igo.geo.operators.tooltip.Or' | translate\\\">\\n          {{'igo.geo.operators.Or' | translate}}\\n      </mat-option>\\n  </mat-select>\\n</mat-form-field>\\n\\n<mat-form-field\\n  class=\\\"field\\\"\\n  *ngIf=\\\"!(currentFilterIsSpatial$ | async) && (fields$ | async) && (fields$| async).length > 0 && (fields$| async)[0].name !== ''\\\"\\n  (mouseenter)=\\\"inputClearable = 'selectField'\\\"\\n  (mouseleave)=\\\"inputClearable = undefined\\\"\\n  [floatLabel]=\\\"floatLabel\\\">\\n  <input\\n  matInput\\n  [placeholder]=\\\"'igo.geo.sourceFields.selectField' | translate\\\"\\n  [disabled]=\\\"!currentFilter.active\\\"\\n  [matAutocomplete]=\\\"autoCompleteField\\\"\\n  [value]=\\\"(selectedField$ | async) ? (selectedField$ | async).alias : ''\\\"\\n  tooltip-position=\\\"above\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"(selectedField$ | async) ? (selectedField$ | async).alias : ('igo.geo.sourceFields.selectField' | translate)\\\"\\n  (input)=\\\"updateFieldsList($event.target.value)\\\">\\n  <mat-autocomplete #autoCompleteField=\\\"matAutocomplete\\\"\\n  (optionSelected)='changeField($event.option.id)'>\\n    <mat-option\\n      *ngFor=\\\"let field of filteredFields$ | async\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [value]=\\\"field.alias\\\"\\n      [id]=\\\"field.name\\\"\\n      [matTooltip]=\\\"field.alias\\\">\\n      {{field.alias}}\\n    </mat-option>\\n  </mat-autocomplete>\\n  <button mat-button\\n    *ngIf=\\\"currentFilter.propertyName && inputClearable === 'selectField' && currentFilter.active\\\"\\n    matSuffix\\n    mat-icon-button\\n    aria-label=\\\"Clear\\\"\\n    [disabled]=\\\"!currentFilter.active\\\"\\n    (click)=\\\"clearSelectedField()\\\">\\n        <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n  </button>\\n</mat-form-field>\\n\\n\\n<mat-form-field\\n  [ngClass]=\\\"{'operator': !(currentFilterIsSpatial$ | async) , 'dualInput': (currentFilterIsSpatial$ | async)}\\\"\\n  [floatLabel]=\\\"floatLabel\\\">\\n  <mat-select\\n    tooltip-position=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"currentFilter.operator ? (('igo.geo.operators.tooltip.'+ currentFilter.operator) | translate) : ('igo.geo.filter.selectOperator' | translate)\\\"\\n    [disabled]=\\\"!currentFilter.active\\\"\\n    [value]=\\\"currentFilter.operator\\\"\\n    (selectionChange)=\\\"changeOperator($event.value)\\\">\\n      <mat-option\\n        *ngFor=\\\"let operator of (ogcFilterOperators$ | async) | keyvalue\\\"\\n        tooltip-position=\\\"above\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        [value]=\\\"operator.key\\\"\\n        [matTooltip]=\\\"('igo.geo.operators.tooltip.'+ operator.key) | translate\\\">\\n          {{('igo.geo.operators.'+ operator.key) | translate}}\\n      </mat-option>\\n  </mat-select>\\n</mat-form-field>\\n\\n<mat-form-field\\nclass=\\\"spatialSelector\\\"\\n*ngIf=\\\"currentFilterIsSpatial$ | async\\\">\\n  <mat-select\\n    [disabled]=\\\"!currentFilter.active\\\"\\n    [value]=\\\"currentFilter.igoSpatialSelector\\\"\\n    (selectionChange)=\\\"changeSpatialSelector($event.value)\\\">\\n      <mat-option\\n        *ngFor=\\\"let igoSpatialSelector of igoSpatialSelectors\\\"\\n        [value]=\\\"igoSpatialSelector.type\\\">\\n          {{('igo.geo.spatialSelector.'+ igoSpatialSelector.type) | translate}}\\n      </mat-option>\\n  </mat-select>\\n</mat-form-field>\\n\\n<mat-form-field\\nclass=\\\"singleInput\\\"\\n*ngIf=\\\"['expression','pattern'].indexOf(detectProperty()) !== -1\\\"\\n(mouseenter)=\\\"inputClearable = 'selectProperty'\\\"\\n(mouseleave)=\\\"inputClearable = undefined\\\"\\n[floatLabel]=\\\"floatLabel\\\">\\n  <input\\n    matInput\\n    [placeholder]=\\\"'igo.geo.filter.placeholder' | translate\\\"\\n    [disabled]=\\\"!currentFilter.active\\\"\\n    [matAutocomplete]=\\\"autoCompleteValues\\\"\\n    [value]=\\\"detectProperty() === 'expression' ? currentFilter.expression : currentFilter.pattern\\\"\\n    tooltip-position=\\\"above\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"detectProperty() === 'expression' ? currentFilter.expression || '' : currentFilter.pattern || ''\\\"\\n    (input)=\\\"updateValuesList($event.target.value)\\\">\\n  <mat-autocomplete #autoCompleteValues=\\\"matAutocomplete\\\"\\n    (optionSelected)=\\\"changeProperty($event.option.value)\\\">\\n    <mat-option\\n      *ngFor=\\\"let value of filteredValues$ | async\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [value]=\\\"value\\\"\\n      [matTooltip]=\\\"value\\\">\\n      {{value}}\\n    </mat-option>\\n  </mat-autocomplete>\\n  <button mat-button\\n    *ngIf=\\\"isClearable() && inputClearable === 'selectProperty' && currentFilter.active\\\"\\n    matSuffix\\n    mat-icon-button\\n    aria-label=\\\"Clear\\\"\\n    [disabled]=\\\"!currentFilter.active\\\"\\n    (click)=\\\"clearProperty()\\\">\\n        <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n  </button>\\n</mat-form-field>\\n\\n<div class=\\\"igo-layer-button-group\\\">\\n  <button\\n    mat-icon-button\\n    collapsibleButton\\n    tooltip-position=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"'igo.geo.filter.removeFilter' | translate\\\"\\n    color=\\\"warn\\\"\\n    (click)=\\\"deleteFilter()\\\">\\n    <mat-icon svgIcon=\\\"delete\\\"></mat-icon>\\n  </button>\\n</div>\\n\\n<mat-form-field\\nclass=\\\"snrc\\\"\\n*ngIf=\\\"(currentFilterIsSpatial$ | async) && currentFilter.igoSpatialSelector === 'snrc'\\\"\\n(mouseenter)=\\\"inputClearable = 'selectSNRC'\\\"\\n(mouseleave)=\\\"inputClearable = undefined\\\"\\n[floatLabel]=\\\"floatLabel\\\">\\n  <input\\n    matInput\\n    [placeholder]=\\\"'igo.geo.filter.placeholderSnrc' | translate\\\"\\n    [value]=\\\"currentFilter.igoSNRC\\\"\\n    tooltip-position=\\\"above\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"currentFilter.igoSNRC ? currentFilter.igoSNRC : ''\\\"\\n    (input)=\\\"changeSNRC($event.target.value)\\\">\\n  <button\\n    mat-button\\n    *ngIf=\\\"currentFilter.igoSNRC\\\"\\n    matSuffix\\n    mat-icon-button\\n    aria-label=\\\"Clear\\\"\\n    [disabled]=\\\"!currentFilter.active && inputClearable === 'selectSNRC' && currentFilter.active\\\"\\n    (click)=\\\"currentFilter.igoSNRC=''\\\">\\n      <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n  </button>\\n  </mat-form-field>\\n\\n  <ng-container *ngIf=\\\"(currentFilterIsSpatial$ | async) && currentFilter.igoSpatialSelector === 'fixedExtent'\\\">\\n    <button\\n    mat-button\\n    [disabled]=\\\"!currentFilter.active\\\"\\n    *ngIf=\\\"currentFilter.igoSpatialSelector === 'fixedExtent'\\\"\\n    matSuffix\\n    mat-icon-button\\n    [disabled]=\\\"!currentFilter.active\\\"\\n    (click)=\\\"changeMapExtentGeometry()\\\"\\n    tooltip-position=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"'igo.geo.spatialSelector.btnSetExtent' | translate\\\">\\n      <mat-icon svgIcon=\\\"arrow-expand-all\\\"></mat-icon>\\n  </button>\\n</ng-container>\\n\\n<br/>\\n\\n<mat-form-field\\nclass=\\\"dualInput\\\"\\n*ngIf=\\\"!isTemporalOperator() && ['lowerBoundary','begin'].indexOf(detectProperty(1)) !== -1\\\"\\n(mouseenter)=\\\"inputClearable = 'selectProperty1'\\\"\\n(mouseleave)=\\\"inputClearable = undefined\\\"\\n[floatLabel]=\\\"floatLabel\\\">\\n    <input\\n      matInput\\n      [placeholder]=\\\"'igo.geo.filter.placeholder' | translate\\\"\\n      [disabled]=\\\"!currentFilter.active\\\"\\n      [matAutocomplete]=\\\"autoDualValueOperator1\\\"\\n      type=\\\"number\\\"\\n      [value]=\\\"detectProperty(1) === 'lowerBoundary' ? currentFilter.lowerBoundary : currentFilter.begin\\\"\\n      (input)=\\\"updateValuesList($event.target.value,1)\\\">\\n    <mat-autocomplete #autoDualValueOperator1=\\\"matAutocomplete\\\"\\n      (optionSelected)=\\\"changeNumericProperty($event.option.value,1)\\\">\\n      <mat-option\\n        *ngFor=\\\"let value of filteredValues$ | async\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        [value]=\\\"value\\\"\\n        [matTooltip]=\\\"value\\\">\\n        {{value}}\\n      </mat-option>\\n    </mat-autocomplete>\\n    <button mat-button\\n      *ngIf=\\\"isClearable(1) && inputClearable === 'selectProperty1' && currentFilter.active\\\"\\n      matSuffix\\n      mat-icon-button\\n      aria-label=\\\"Clear\\\"\\n    [disabled]=\\\"!currentFilter.active\\\"\\n      (click)=\\\"clearProperty(1)\\\">\\n          <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n    </button>\\n</mat-form-field>\\n\\n<mat-form-field\\n  class=\\\"dualInput\\\"\\n  *ngIf=\\\"!isTemporalOperator() && ['upperBoundary','end'].indexOf(detectProperty(2)) !== -1\\\"\\n  (mouseenter)=\\\"inputClearable = 'selectProperty2'\\\"\\n  (mouseleave)=\\\"inputClearable = undefined\\\"\\n  [floatLabel]=\\\"floatLabel\\\">\\n    <input\\n      matInput\\n      [placeholder]=\\\"'igo.geo.filter.placeholder' | translate\\\"\\n      [disabled]=\\\"!currentFilter.active\\\"\\n      [matAutocomplete]=\\\"autoDualValueOperator2\\\"\\n      type=\\\"number\\\"\\n      [value]=\\\"detectProperty(2) === 'upperBoundary' ? currentFilter.upperBoundary : currentFilter.end\\\"\\n      (input)=\\\"updateValuesList($event.target.value,2)\\\">\\n    <mat-autocomplete #autoDualValueOperator2=\\\"matAutocomplete\\\"\\n      (optionSelected)=\\\"changeNumericProperty($event.option.value,2)\\\">\\n      <mat-option\\n        *ngFor=\\\"let value of filteredValues$ | async\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        [value]=\\\"value\\\"\\n        [matTooltip]=\\\"value\\\">\\n        {{value}}\\n      </mat-option>\\n    </mat-autocomplete>\\n    <button mat-button\\n      *ngIf=\\\"isClearable(2) && inputClearable === 'selectProperty2' && currentFilter.active\\\"\\n      matSuffix\\n      mat-icon-button\\n      aria-label=\\\"Clear\\\"\\n      [disabled]=\\\"!currentFilter.active\\\"\\n      (click)=\\\"clearProperty(2)\\\">\\n          <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n    </button>\\n</mat-form-field>\\n\\n<igo-ogc-filter-time *ngIf=\\\"isTemporalOperator()\\\"\\n  [(datasource)]=\\\"datasource\\\"\\n  [(currentFilter)]=\\\"currentFilter\\\"\\n  (changeProperty)=\\\"changeProperty($event.value, $event.pos)\\\">\\n</igo-ogc-filter-time>\\n\\n<!--\\nTODO C'EST PERTINENT je crois\\n<mat-form-field class=\\\"field\\\" *ngIf=\\\"!(currentFilterIsSpatial$ | async) && (fields$| async) && (fields$| async).length === 1 &&  (fields$| async)[0].name === ''\\\">\\n<input [disabled]=\\\"!currentFilter.active\\\" matInput #fieldPerUser (keyup)=\\\"changeProperty(currentFilter,'propertyName',fieldPerUser.value)\\\"\\n  (blur)=\\\"changeProperty(currentFilter,'propertyName',fieldPerUser.value)\\\" [(ngModel)]=\\\"currentFilter.propertyName\\\">\\n<button mat-button *ngIf=\\\"currentFilter.propertyName\\\" matSuffix mat-icon-button aria-label=\\\"Clear\\\" (click)=\\\"currentFilter.propertyName=''\\\">\\n  <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n</button>\\n</mat-form-field>\\n\\n\\n\\n<mat-checkbox labelPosition='before' (change)=\\\"changeCaseSensitive($event)\\\" [(ngModel)]=\\\"currentFilter.matchCase\\\">\\n  {{('igo.geo.operators.caseSensitive') | translate}}\\n</mat-checkbox>\\n\\n</mat-list-item> -->\\n\",\n                styles: [\":host{padding:5px 10px;width:100%}::ng-deep .mat-form-field .mat-icon svg{color:#d3d3d3;height:1em;width:1em}.mat-form-field{width:100%}.mat-select-arrow{visibility:hidden}.mat-slide-toggle{margin-top:10px}.logical,.logicalHidden{flex-flow:column nowrap;margin-left:5px;max-width:45px;width:10%}.logicalHidden,::ng-deep .logical .mat-select-arrow,::ng-deep .logicalHidden .mat-select-arrow{visibility:hidden}.field{margin-left:5px;width:20%}::ng-deep .field .mat-select-arrow{visibility:hidden}.operator{margin-left:10px;text-align:center;width:12%}::ng-deep .operator .mat-select-arrow{visibility:hidden}.spatialSelector{margin-left:5px;width:15%}::ng-deep .spatialSelector .mat-select-arrow{visibility:hidden}.singleInput{margin-left:5px;width:30%}.snrc{margin-left:5px;width:20%}::ng-deep .singleInput .mat-select-arrow{visibility:hidden}.dualInput{margin-left:5px;width:20%}::ng-deep .dualInput .mat-select-arrow{visibility:hidden}.igo-layer-button-group{display:flex;float:right;padding-top:5px}.container{display:flex}\"]\n            }]\n    }], function () { return [{ type: WktService }]; }, { floatLabel: [{\n            type: Input\n        }], refreshFilters: [{\n            type: Input\n        }], datasource: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], currentFilter: [{\n            type: Input\n        }] }); })();\n\nclass OgcFilterableFormComponent {\n    constructor() {\n        this.color = 'primary';\n    }\n    get refreshFunc() {\n        return this.refreshFilters;\n    }\n    get advancedOgcFilters() {\n        if (this.datasource.options.ogcFilters) {\n            return this.datasource.options.ogcFilters.advancedOgcFilters;\n        }\n        return;\n    }\n}\nOgcFilterableFormComponent.ɵfac = function OgcFilterableFormComponent_Factory(t) { return new (t || OgcFilterableFormComponent)(); };\nOgcFilterableFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OgcFilterableFormComponent, selectors: [[\"igo-ogc-filterable-form\"]], inputs: { datasource: \"datasource\", map: \"map\", refreshFilters: \"refreshFilters\" }, decls: 2, vars: 2, consts: [[\"igoListItem\", \"\", 3, \"refreshFilters\", \"datasource\", \"map\", 4, \"ngIf\"], [4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"refreshFilters\", \"datasource\", \"map\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"currentFilter\", \"refreshFilters\", \"datasource\", \"map\"]], template: function OgcFilterableFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OgcFilterableFormComponent_igo_ogc_filter_toggle_button_0_Template, 1, 3, \"igo-ogc-filter-toggle-button\", 0);\n        ɵngcc0.ɵɵtemplate(1, OgcFilterableFormComponent_1_Template, 1, 1, undefined, 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.advancedOgcFilters);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.advancedOgcFilters && ctx.datasource.options.ogcFilters.editable);\n    } }, directives: function () { return [ɵngcc1.NgIf, OgcFilterToggleButtonComponent, ɵngcc9.ListItemDirective, ɵngcc1.NgForOf, OgcFilterFormComponent]; }, encapsulation: 2 });\nOgcFilterableFormComponent.ctorParameters = () => [];\nOgcFilterableFormComponent.propDecorators = {\n    datasource: [{ type: Input }],\n    map: [{ type: Input }],\n    refreshFilters: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterableFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filterable-form',\n                template: \"<igo-ogc-filter-toggle-button \\n*ngIf=\\\"!advancedOgcFilters\\\"\\nigoListItem\\n[refreshFilters]=\\\"refreshFunc\\\"\\n[datasource]=\\\"datasource\\\"\\n[map]=\\\"map\\\">\\n</igo-ogc-filter-toggle-button>\\n\\n\\n<ng-template \\n*ngIf=\\\"advancedOgcFilters && datasource.options.ogcFilters.editable\\\"\\nngFor let-currentFilter \\n[ngForOf]=\\\"datasource.options.ogcFilters.interfaceOgcFilters\\\">\\n<igo-ogc-filter-form\\n  [currentFilter]=\\\"currentFilter\\\"\\n  [refreshFilters]=\\\"refreshFunc\\\"\\n  [datasource]=\\\"datasource\\\"\\n  [map]=\\\"map\\\">\\n</igo-ogc-filter-form>\\n</ng-template>\"\n            }]\n    }], function () { return []; }, { datasource: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], refreshFilters: [{\n            type: Input\n        }] }); })();\n\nclass OgcFilterableItemComponent {\n    constructor(ogcFilterService, downloadService) {\n        this.ogcFilterService = ogcFilterService;\n        this.downloadService = downloadService;\n        this.color = 'primary';\n        this.defaultLogicalParent = OgcFilterOperator.And;\n        this.hasActiveSpatialFilter = false;\n        this.filtersAreEditable = true;\n        this.filtersCollapsed = true;\n        this.hasPushButton = false;\n        this.showLegend$ = new BehaviorSubject(false);\n        this.header = true;\n        this.ogcFilterWriter = new OgcFilterWriter();\n    }\n    get refreshFunc() {\n        return this.refreshFilters.bind(this);\n    }\n    get datasource() {\n        return this.layer.dataSource;\n    }\n    get downloadable() {\n        return this.datasource.options.download;\n    }\n    ngOnInit() {\n        const ogcFilters = this.datasource.options.ogcFilters;\n        if (ogcFilters.pushButtons && ogcFilters.pushButtons.bundles.length > 0) {\n            if (ogcFilters.advancedOgcFilters === undefined) {\n                ogcFilters.advancedOgcFilters = false;\n            }\n            this.hasPushButton = true;\n        }\n        switch (this.datasource.options.type) {\n            case 'wms':\n                this.ogcFilterService.setOgcWMSFiltersOptions(this.datasource);\n                break;\n            case 'wfs':\n                this.ogcFilterService.setOgcWFSFiltersOptions(this.datasource);\n                break;\n            default:\n                break;\n        }\n        if (ogcFilters) {\n            if (ogcFilters.interfaceOgcFilters) {\n                this.lastRunOgcFilter = JSON.parse(JSON.stringify(ogcFilters.interfaceOgcFilters));\n                if (ogcFilters.interfaceOgcFilters.filter(f => f.wkt_geometry).length >= 1) {\n                    this.hasActiveSpatialFilter = true;\n                }\n            }\n            this.filtersAreEditable = ogcFilters.editable\n                ? ogcFilters.editable\n                : false;\n        }\n    }\n    addFilterToSequence() {\n        this.filtersCollapsed = false;\n        const interfaceOgcFilters = this.datasource\n            .options.ogcFilters.interfaceOgcFilters;\n        const arr = interfaceOgcFilters || [];\n        const lastLevel = arr.length === 0 ? 0 : arr[arr.length - 1].level;\n        let firstFieldName = '';\n        const includedFields = this.datasource.options.sourceFields.filter(f => !f.excludeFromOgcFilters);\n        if (includedFields.length > 0) {\n            firstFieldName =\n                includedFields[0].name === undefined ? '' : includedFields[0].name;\n        }\n        let fieldNameGeometry;\n        const datasourceOptions = this.datasource\n            .options;\n        if (datasourceOptions.fieldNameGeometry) {\n            fieldNameGeometry = datasourceOptions.fieldNameGeometry;\n        }\n        else if (this.datasource.options.paramsWFS &&\n            this.datasource.options.paramsWFS.fieldNameGeometry) {\n            fieldNameGeometry = this.datasource.options.paramsWFS\n                .fieldNameGeometry;\n        }\n        const allowedOperators = this.ogcFilterWriter.computeAllowedOperators(this.datasource.options.sourceFields, firstFieldName, this.datasource.options.ogcFilters.allowedOperatorsType);\n        const firstOperatorName = Object.keys(allowedOperators)[0];\n        arr.push(this.ogcFilterWriter.addInterfaceFilter({\n            propertyName: firstFieldName,\n            operator: firstOperatorName,\n            active: true,\n            igoSpatialSelector: 'fixedExtent',\n            srsName: this.map.projection,\n        }, fieldNameGeometry, lastLevel, this.defaultLogicalParent));\n        this.datasource.options.ogcFilters.interfaceOgcFilters = arr;\n    }\n    openDownload() {\n        this.downloadService.open(this.layer);\n    }\n    refreshFilters(force) {\n        if (force === true) {\n            this.lastRunOgcFilter = undefined;\n        }\n        const ogcFilters = this.datasource.options.ogcFilters;\n        const activeFilters = ogcFilters.interfaceOgcFilters.filter(f => f.active === true);\n        if (activeFilters.length === 0) {\n            ogcFilters.filters = undefined;\n            ogcFilters.filtered = false;\n        }\n        if (activeFilters.length > 1) {\n            activeFilters[0].parentLogical = activeFilters[1].parentLogical;\n        }\n        if (activeFilters.filter(af => ['Contains', 'Intersects', 'Within'].indexOf(af.operator) !== -1).length === 0) {\n            this.hasActiveSpatialFilter = false;\n        }\n        else {\n            this.hasActiveSpatialFilter = true;\n        }\n        if (!(JSON.stringify(this.lastRunOgcFilter) === JSON.stringify(activeFilters))) {\n            if (this.layer.dataSource.options.type === 'wfs') {\n                const ogcDataSource = this.layer.dataSource;\n                const ogcLayer = ogcDataSource.options.ogcFilters;\n                ogcLayer.filters = this.ogcFilterWriter.rebuiltIgoOgcFilterObjectFromSequence(activeFilters);\n                this.layer.dataSource.ol.refresh();\n            }\n            else if (this.layer.dataSource.options.type === 'wms' &&\n                ogcFilters.enabled) {\n                let rebuildFilter = '';\n                if (activeFilters.length >= 1) {\n                    const ogcDataSource = this.layer.dataSource;\n                    const ogcLayer = ogcDataSource.options.ogcFilters;\n                    ogcLayer.filters = this.ogcFilterWriter.rebuiltIgoOgcFilterObjectFromSequence(activeFilters);\n                    rebuildFilter = this.ogcFilterWriter.buildFilter(ogcLayer.filters, undefined, undefined, this.layer.dataSource.options.fieldNameGeometry, ogcDataSource.options);\n                }\n                this.ogcFilterService.filterByOgc(this.datasource, rebuildFilter);\n                this.datasource.options.ogcFilters.filtered =\n                    activeFilters.length === 0 ? false : true;\n            }\n            this.lastRunOgcFilter = JSON.parse(JSON.stringify(activeFilters));\n        }\n        else {\n            // identical filter. Nothing triggered\n        }\n    }\n    setVisible() {\n        this.layer.visible = true;\n    }\n    isAdvancedOgcFilters() {\n        return this.datasource.options.ogcFilters.advancedOgcFilters;\n    }\n    addFilterDisabled() {\n        return (!this.datasource.options.sourceFields ||\n            this.datasource.options.sourceFields.length === 0);\n    }\n    changeOgcFiltersAdvancedOgcFilters(value) {\n        this.datasource.options.ogcFilters.advancedOgcFilters = value;\n    }\n    changeOgcFilterType(isAdvancedOgcFilters) {\n        this.changeOgcFiltersAdvancedOgcFilters(isAdvancedOgcFilters.checked);\n        if (isAdvancedOgcFilters.checked) {\n            this.refreshFilters(true);\n        }\n    }\n    toggleLegend(collapsed) {\n        this.layer.legendCollapsed = collapsed;\n        this.showLegend$.next(!collapsed);\n    }\n    toggleLegendOnClick() {\n        if (!this.filtersCollapsed) {\n            this.toggleLegend(this.showLegend$.value);\n        }\n    }\n    toggleFiltersCollapsed() {\n        this.filtersCollapsed = !this.filtersCollapsed;\n    }\n}\nOgcFilterableItemComponent.ɵfac = function OgcFilterableItemComponent_Factory(t) { return new (t || OgcFilterableItemComponent)(ɵngcc0.ɵɵdirectiveInject(OGCFilterService), ɵngcc0.ɵɵdirectiveInject(DownloadService)); };\nOgcFilterableItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OgcFilterableItemComponent, selectors: [[\"igo-ogc-filterable-item\"]], inputs: { header: \"header\", layer: \"layer\", map: \"map\" }, decls: 11, vars: 10, consts: [[\"class\", \"igo-chevron\", \"mat-list-avatar\", \"\", \"igoCollapse\", \"\", \"svgIcon\", \"chevron-up\", 3, \"target\", \"collapsed\", \"click\", 4, \"ngIf\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"ngStyle\", \"matTooltip\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"color\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"ogcFilters\", \"\"], [\"class\", \"igo-layer-legend-container\", 4, \"ngIf\"], [3, \"datasource\", \"map\", \"refreshFilters\"], [\"class\", \"mat-typography advancedOgcFilters\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", \"igoCollapse\", \"\", \"svgIcon\", \"chevron-up\", 1, \"igo-chevron\", 3, \"target\", \"collapsed\", \"click\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"ngStyle\", \"matTooltip\", \"click\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"download\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"disabled\", \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"plus\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"color\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"eye-off\"], [1, \"igo-layer-legend-container\"], [\"legend\", \"\"], [3, \"layer\", 4, \"ngIf\"], [3, \"layer\"], [1, \"mat-typography\", \"advancedOgcFilters\"], [\"labelPosition\", \"before\", 3, \"ngModel\", \"change\", \"ngModelChange\"]], template: function OgcFilterableItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n        ɵngcc0.ɵɵtemplate(1, OgcFilterableItemComponent_mat_icon_1_Template, 1, 2, \"mat-icon\", 0);\n        ɵngcc0.ɵɵtemplate(2, OgcFilterableItemComponent_h4_2_Template, 2, 5, \"h4\", 1);\n        ɵngcc0.ɵɵtemplate(3, OgcFilterableItemComponent_span_3_Template, 4, 4, \"span\", 2);\n        ɵngcc0.ɵɵtemplate(4, OgcFilterableItemComponent_button_4_Template, 3, 5, \"button\", 3);\n        ɵngcc0.ɵɵtemplate(5, OgcFilterableItemComponent_button_5_Template, 3, 3, \"button\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"div\", null, 5);\n        ɵngcc0.ɵɵtemplate(8, OgcFilterableItemComponent_div_8_Template, 4, 3, \"div\", 6);\n        ɵngcc0.ɵɵelement(9, \"igo-ogc-filterable-form\", 7);\n        ɵngcc0.ɵɵtemplate(10, OgcFilterableItemComponent_section_10_Template, 5, 4, \"section\", 8);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.header);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.header);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.downloadable && ctx.header);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isAdvancedOgcFilters() && ctx.filtersAreEditable);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.layer.visible && ctx.header);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.header);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"datasource\", ctx.datasource)(\"map\", ctx.map)(\"refreshFilters\", ctx.refreshFunc);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasPushButton && ctx.filtersAreEditable);\n    } }, directives: [ɵngcc10.MatListItem, ɵngcc1.NgIf, OgcFilterableFormComponent, ɵngcc4.MatIcon, ɵngcc10.MatListAvatarCssMatStyler, ɵngcc9.CollapseDirective, ɵngcc11.MatLine, ɵngcc1.NgStyle, ɵngcc3.MatTooltip, ɵngcc2.MatButton, LayerLegendComponent, ɵngcc21.MatDivider, ɵngcc13.MatCheckbox, ɵngcc16.NgControlStatus, ɵngcc16.NgModel], pipes: [ɵngcc5.TranslatePipe, ɵngcc1.AsyncPipe], styles: [\"[_nghost-%COMP%]{overflow:hidden}.advancedOgcFilters[_ngcontent-%COMP%]{display:inline-block;text-align:center;width:100%}.mat-list-item[_ngcontent-%COMP%]{height:auto}.igo-layer-legend-container[_ngcontent-%COMP%]{padding-left:1.125em;width:calc(100% - 18px)}mat-icon.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}\"] });\nOgcFilterableItemComponent.ctorParameters = () => [\n    { type: OGCFilterService },\n    { type: DownloadService }\n];\nOgcFilterableItemComponent.propDecorators = {\n    layer: [{ type: Input }],\n    map: [{ type: Input }],\n    header: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterableItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filterable-item',\n                template: \"<mat-list-item>\\n\\n  <mat-icon\\n    *ngIf=\\\"header\\\"\\n    class=\\\"igo-chevron\\\"\\n    mat-list-avatar\\n    igoCollapse [target]=\\\"ogcFilters\\\"\\n    [collapsed]=\\\"filtersCollapsed\\\"\\n    (click)=\\\"toggleFiltersCollapsed()\\\"\\n    svgIcon=\\\"chevron-up\\\">\\n  </mat-icon>\\n  <h4 (click)=\\\"toggleLegendOnClick()\\\" *ngIf=\\\"header\\\" [ngStyle]=\\\"{'cursor': filtersCollapsed ? 'default' : 'pointer'}\\\" matLine [matTooltip]=\\\"layer.title\\\" matTooltipShowDelay=\\\"500\\\">{{layer.title}}</h4>\\n\\n    <span *ngIf=\\\"downloadable && header\\\">\\n      <button mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"'igo.geo.download.action' | translate\\\"\\n        [color]=\\\"color\\\" (click)=\\\"openDownload()\\\">\\n        <mat-icon svgIcon=\\\"download\\\"></mat-icon>\\n      </button>\\n    </span>\\n    <button *ngIf=\\\"isAdvancedOgcFilters() && filtersAreEditable\\\" [disabled]=\\\"addFilterDisabled()\\\" mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.geo.filter.addFilter' | translate\\\" [color]=\\\"color\\\" (click)=\\\"addFilterToSequence()\\\">\\n      <mat-icon svgIcon=\\\"plus\\\"></mat-icon>\\n    </button>\\n    <button *ngIf=\\\"!layer.visible && header\\\" mat-icon-button tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"'igo.geo.layer.showLayer' | translate\\\" color=\\\"color\\\" (click)=\\\"setVisible()\\\">\\n      <mat-icon svgIcon=\\\"eye-off\\\"></mat-icon>\\n    </button>\\n</mat-list-item>\\n\\n<div #ogcFilters>\\n    <div *ngIf=\\\"header\\\" #legend class=\\\"igo-layer-legend-container\\\">\\n      <igo-layer-legend *ngIf=\\\"showLegend$ | async\\\" [layer]=\\\"layer\\\">\\n      </igo-layer-legend>\\n    </div>\\n  <igo-ogc-filterable-form [datasource]=\\\"datasource\\\" [map]=\\\"map\\\" [refreshFilters]=\\\"refreshFunc\\\">\\n  </igo-ogc-filterable-form>\\n\\n  <section *ngIf=\\\"hasPushButton && filtersAreEditable\\\" class=\\\"mat-typography advancedOgcFilters\\\">\\n    <mat-divider></mat-divider>\\n    <mat-checkbox labelPosition='before' (change)=\\\"changeOgcFilterType($event)\\\"\\n      [(ngModel)]=\\\"datasource.options.ogcFilters.advancedOgcFilters\\\">\\n      {{'igo.geo.filter.advancedOgcFilters' | translate}}\\n    </mat-checkbox>\\n  </section>\\n</div>\",\n                styles: [\":host{overflow:hidden}.advancedOgcFilters{display:inline-block;text-align:center;width:100%}.mat-list-item{height:auto}.igo-layer-legend-container{padding-left:1.125em;width:calc(100% - 18px)}mat-icon.disabled{color:rgba(0,0,0,.38)}\"]\n            }]\n    }], function () { return [{ type: OGCFilterService }, { type: DownloadService }]; }, { header: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n\nclass OgcFilterableListComponent {\n    constructor() { }\n}\nOgcFilterableListComponent.ɵfac = function OgcFilterableListComponent_Factory(t) { return new (t || OgcFilterableListComponent)(); };\nOgcFilterableListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OgcFilterableListComponent, selectors: [[\"igo-ogc-filterable-list\"]], inputs: { layers: \"layers\", map: \"map\" }, decls: 3, vars: 6, consts: [[3, \"navigation\", \"selection\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"igoListItem\", \"\", 3, \"header\", \"layer\", \"map\"]], template: function OgcFilterableListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-list\", 0);\n        ɵngcc0.ɵɵtemplate(1, OgcFilterableListComponent_ng_template_1_Template, 1, 3, \"ng-template\", 1);\n        ɵngcc0.ɵɵpipe(2, \"filterableDataSource\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"navigation\", false)(\"selection\", false);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind2(2, 3, ctx.layers, \"ogc\"));\n    } }, directives: [ɵngcc9.ListComponent, ɵngcc1.NgForOf, OgcFilterableItemComponent, ɵngcc9.ListItemDirective], pipes: [FilterableDataSourcePipe], encapsulation: 2, changeDetection: 0 });\nOgcFilterableListComponent.ctorParameters = () => [];\nOgcFilterableListComponent.propDecorators = {\n    layers: [{ type: Input }],\n    map: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterableListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filterable-list',\n                template: \"<igo-list [navigation]=\\\"false\\\" [selection]=\\\"false\\\">\\n  <ng-template ngFor let-layer [ngForOf]=\\\"layers | filterableDataSource: 'ogc'\\\">\\n    <igo-ogc-filterable-item igoListItem [header]=\\\"true\\\" [layer]=\\\"layer\\\" \\n    [map]=\\\"layer.map\\\" ></igo-ogc-filterable-item>\\n  </ng-template>\\n</igo-list>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return []; }, { layers: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n\nclass OgcFilterableListBindingDirective {\n    constructor(component, mapService) {\n        this.mapService = mapService;\n        this.component = component;\n    }\n    ngOnInit() {\n        // Override input layers\n        this.component.layers = [];\n        this.layers$$ = this.mapService.getMap().layers$.subscribe(layers => {\n            this.component.layers = layers;\n        });\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n    }\n}\nOgcFilterableListBindingDirective.ɵfac = function OgcFilterableListBindingDirective_Factory(t) { return new (t || OgcFilterableListBindingDirective)(ɵngcc0.ɵɵdirectiveInject(OgcFilterableListComponent, 2), ɵngcc0.ɵɵdirectiveInject(MapService)); };\nOgcFilterableListBindingDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: OgcFilterableListBindingDirective, selectors: [[\"\", \"igoOgcFilterableListBinding\", \"\"]] });\nOgcFilterableListBindingDirective.ctorParameters = () => [\n    { type: OgcFilterableListComponent, decorators: [{ type: Self }] },\n    { type: MapService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterableListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoOgcFilterableListBinding]'\n            }]\n    }], function () { return [{ type: OgcFilterableListComponent, decorators: [{\n                type: Self\n            }] }, { type: MapService }]; }, null); })();\n\nclass OgcFilterButtonComponent {\n    constructor() {\n        this.color = 'primary';\n        this.ogcFilterCollapse = false;\n    }\n    get badge() {\n        const filter = this.options.ogcFilters;\n        if (filter && !filter.advancedOgcFilters) {\n            if (filter.pushButtons) {\n                const pushButtons = filter.pushButtons;\n                const currentPushButtonGroup = pushButtons.groups.find(gr => gr.enabled);\n                let cntPushButtons = 0;\n                if (currentPushButtonGroup) {\n                    currentPushButtonGroup.computedButtons.map(cb => cntPushButtons += cb.buttons.filter(button => button.enabled).length);\n                }\n                return cntPushButtons > 0 ? cntPushButtons : undefined;\n            }\n            else {\n                return;\n            }\n        }\n        else if (filter && filter.filters && !filter.filters.filters) {\n            return 1;\n        }\n        else if (filter && filter.filters && filter.filters.filters) {\n            return filter.filters.filters.length;\n        }\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n        if (value) {\n            this.options = this.layer.dataSource.options;\n        }\n    }\n    ngOnInit() {\n        this.options = this.layer.dataSource.options;\n    }\n}\nOgcFilterButtonComponent.ɵfac = function OgcFilterButtonComponent_Factory(t) { return new (t || OgcFilterButtonComponent)(); };\nOgcFilterButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OgcFilterButtonComponent, selectors: [[\"igo-ogc-filter-button\"]], inputs: { color: \"color\", layer: \"layer\", map: \"map\", header: \"header\" }, decls: 2, vars: 2, consts: [[\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", 4, \"ngIf\"], [\"class\", \"igo-layer-actions-container\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"collapsibleButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"medium\", \"svgIcon\", \"filter\", 3, \"matBadge\"], [1, \"igo-layer-actions-container\"], [\"ogcFilter\", \"\"], [\"igoListItem\", \"\", 3, \"header\", \"map\", \"layer\", 4, \"ngIf\"], [\"igoListItem\", \"\", 3, \"header\", \"map\", \"layer\"]], template: function OgcFilterButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, OgcFilterButtonComponent_button_0_Template, 3, 5, \"button\", 0);\n        ɵngcc0.ɵɵtemplate(1, OgcFilterButtonComponent_div_1_Template, 3, 1, \"div\", 1);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.header && ctx.options.ogcFilters && ctx.options.ogcFilters.enabled && (ctx.options.ogcFilters.pushButtons || ctx.options.ogcFilters.editable));\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.options.ogcFilters && ctx.options.ogcFilters.enabled && (ctx.options.ogcFilters.pushButtons || ctx.options.ogcFilters.editable));\n    } }, directives: [ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon, ɵngcc12.MatBadge, OgcFilterableItemComponent, ɵngcc9.ListItemDirective], pipes: [ɵngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\nOgcFilterButtonComponent.ctorParameters = () => [];\nOgcFilterButtonComponent.propDecorators = {\n    layer: [{ type: Input }],\n    map: [{ type: Input }],\n    color: [{ type: Input }],\n    header: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-button',\n                template: \"<button \\n  *ngIf=\\\"header && options.ogcFilters && options.ogcFilters.enabled &&\\n  (options.ogcFilters.pushButtons || options.ogcFilters.editable)\\\"\\n  mat-icon-button\\n  collapsibleButton\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"'igo.geo.filter.filterBy' | translate\\\"\\n  [color]=\\\"color\\\">\\n  <mat-icon [matBadge]=\\\"badge\\\" matBadgeColor=\\\"warn\\\" matBadgeSize=\\\"medium\\\" svgIcon=\\\"filter\\\"></mat-icon>\\n</button>\\n\\n<div #ogcFilter class=\\\"igo-layer-actions-container\\\"\\n*ngIf=\\\"options.ogcFilters && options.ogcFilters.enabled &&\\n(options.ogcFilters.pushButtons || options.ogcFilters.editable)\\\">\\n  <igo-ogc-filterable-item\\n    *ngIf=\\\"ogcFilterCollapse && options.ogcFilters.enabled\\\"\\n    igoListItem\\n    [header]=\\\"false\\\"\\n    [map]=\\\"layer.map\\\"\\n    [layer]=\\\"layer\\\">\\n  </igo-ogc-filterable-item>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, { color: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], header: [{\n            type: Input\n        }] }); })();\n\nclass OgcFilterToggleButtonComponent {\n    constructor(ogcFilterService, formBuilder) {\n        this.ogcFilterService = ogcFilterService;\n        this.formBuilder = formBuilder;\n        this.color = 'primary';\n        this.ogcFilterWriter = new OgcFilterWriter();\n        this.buildForm();\n    }\n    get currentPushButtonGroup() {\n        return this.form.get('group').value;\n    }\n    set currentPushButtonGroup(value) {\n        this.form.patchValue({ group: value });\n    }\n    buildForm() {\n        this.form = this.formBuilder.group({\n            buttons: ['', [Validators.required]],\n            group: ['', [Validators.required]]\n        });\n    }\n    getPushButtonsGroups() {\n        return this.datasource.options.ogcFilters.pushButtons.groups;\n    }\n    ngOnInit() {\n        if (this.datasource.options.ogcFilters &&\n            this.datasource.options.ogcFilters.pushButtons) {\n            this.currentPushButtonGroup =\n                this.datasource.options.ogcFilters.pushButtons.groups.find(g => g.enabled) ||\n                    this.datasource.options.ogcFilters.pushButtons.groups[0];\n        }\n        this.applyFilters();\n        this.form\n            .get('group')\n            .valueChanges\n            .pipe(debounceTime(750))\n            .subscribe(() => {\n            this.onChangeGroup();\n            this.applyFilters();\n        });\n        this.form\n            .get('buttons')\n            .valueChanges\n            .pipe(debounceTime(750))\n            .subscribe(() => {\n            this.applyFilters();\n        });\n    }\n    getToolTip(pb) {\n        let tt;\n        if (pb.tooltip) {\n            if (Array.isArray(pb.tooltip)) {\n                tt = pb.tooltip.join('\\n');\n            }\n            else {\n                tt = pb.tooltip;\n            }\n        }\n        return tt || '';\n    }\n    getButtonColor(pb) {\n        let styles;\n        if (pb.color) {\n            styles = {\n                'background-color': pb.enabled ? `rgba(${pb.color})` : `rgba(255,255,255,0)`,\n            };\n        }\n        return styles;\n    }\n    bundleIsVertical(bundle) {\n        return bundle.vertical ? bundle.vertical : false;\n    }\n    onChangeGroup() {\n        this.getPushButtonsGroups().map(g => g.enabled = false);\n        this.getPushButtonsGroups().find(g => g === this.currentPushButtonGroup).enabled = true;\n    }\n    onButtonChange(currentOgcPushButton) {\n        if (currentOgcPushButton) {\n            currentOgcPushButton.enabled = !currentOgcPushButton.enabled;\n        }\n    }\n    applyFilters() {\n        let filterQueryString = '';\n        const conditions = [];\n        this.currentPushButtonGroup.computedButtons.map(buttonBundle => {\n            const bundleCondition = [];\n            buttonBundle.buttons\n                .filter(ogcpb => ogcpb.enabled === true)\n                .forEach(enabledPb => bundleCondition.push(enabledPb.filters));\n            if (bundleCondition.length >= 1) {\n                if (bundleCondition.length === 1) {\n                    conditions.push(bundleCondition[0]);\n                }\n                else {\n                    conditions.push({ logical: buttonBundle.logical, filters: bundleCondition });\n                }\n            }\n        });\n        if (conditions.length >= 1) {\n            filterQueryString = this.ogcFilterWriter\n                .buildFilter(conditions.length === 1 ?\n                conditions[0] : { logical: 'And', filters: conditions });\n        }\n        if (this.datasource.options.type === 'wms') {\n            this.ogcFilterService.filterByOgc(this.datasource, filterQueryString);\n        }\n        if (this.datasource.options.type === 'wfs') {\n            // TODO: Check how to prevent wfs to refresh when filter icon is pushed...\n            this.datasource.ol.refresh();\n        }\n    }\n}\nOgcFilterToggleButtonComponent.ɵfac = function OgcFilterToggleButtonComponent_Factory(t) { return new (t || OgcFilterToggleButtonComponent)(ɵngcc0.ɵɵdirectiveInject(OGCFilterService), ɵngcc0.ɵɵdirectiveInject(ɵngcc16.FormBuilder)); };\nOgcFilterToggleButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OgcFilterToggleButtonComponent, selectors: [[\"igo-ogc-filter-toggle-button\"]], inputs: { refreshFilters: \"refreshFilters\", datasource: \"datasource\", map: \"map\" }, decls: 4, vars: 3, consts: [[3, \"formGroup\"], [\"class\", \"pushButtonSelector\", 4, \"ngIf\"], [1, \"pushButtonGroups\"], [4, \"ngFor\", \"ngForOf\"], [1, \"pushButtonSelector\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"formControlName\", \"group\", 3, \"matTooltip\", \"value\", \"valueChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"formControlName\", \"buttons\", \"appearance\", \"legacy\", \"multiple\", \"true\", 1, \"mat-typography\", 3, \"vertical\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"ngStyle\", \"checked\", \"matTooltip\", \"value\", \"change\", 4, \"ngFor\", \"ngForOf\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"material-tooltip\", 3, \"ngStyle\", \"checked\", \"matTooltip\", \"value\", \"change\"]], template: function OgcFilterToggleButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"form\", 0);\n        ɵngcc0.ɵɵtemplate(1, OgcFilterToggleButtonComponent_div_1_Template, 5, 5, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵtemplate(3, OgcFilterToggleButtonComponent_ng_container_3_Template, 3, 2, \"ng-container\", 3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"formGroup\", ctx.form);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.getPushButtonsGroups().length > 1);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.currentPushButtonGroup.computedButtons);\n    } }, directives: [ɵngcc16.ɵangular_packages_forms_forms_y, ɵngcc16.NgControlStatusGroup, ɵngcc16.FormGroupDirective, ɵngcc1.NgIf, ɵngcc1.NgForOf, ɵngcc14.MatFormField, ɵngcc15.MatSelect, ɵngcc16.NgControlStatus, ɵngcc16.FormControlName, ɵngcc3.MatTooltip, ɵngcc11.MatOption, ɵngcc23.MatButtonToggleGroup, ɵngcc23.MatButtonToggle, ɵngcc1.NgStyle], pipes: [ɵngcc5.TranslatePipe], styles: [\".mat-button-toggle-group[_ngcontent-%COMP%]{flex-wrap:wrap;margin:5px}.pushButtonGroups[_ngcontent-%COMP%], .pushButtonSelector[_ngcontent-%COMP%]{text-align:center}.mat-button-toggle[_ngcontent-%COMP%]{display:inline-flex}  .material-tooltip{white-space:pre-line}\"] });\nOgcFilterToggleButtonComponent.ctorParameters = () => [\n    { type: OGCFilterService },\n    { type: FormBuilder }\n];\nOgcFilterToggleButtonComponent.propDecorators = {\n    refreshFilters: [{ type: Input }],\n    datasource: [{ type: Input }],\n    map: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterToggleButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-toggle-button',\n                template: \"<form [formGroup]=\\\"form\\\">\\n  <div class=\\\"pushButtonSelector\\\" *ngIf=\\\"getPushButtonsGroups().length > 1\\\">\\n    <mat-form-field>\\n      <mat-select tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\" formControlName=\\\"group\\\"\\n        [matTooltip]=\\\"'igo.geo.layer.legend.selectStyle' | translate\\\" [(value)]=\\\"currentPushButtonGroup\\\">\\n        <mat-option *ngFor=\\\"let pbg of getPushButtonsGroups()\\\" [value]=\\\"pbg\\\">{{pbg.title}}</mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n  </div>\\n  <div class=\\\"pushButtonGroups\\\">\\n    <ng-container *ngFor=\\\"let bundle of currentPushButtonGroup.computedButtons\\\">\\n      <mat-button-toggle-group formControlName=\\\"buttons\\\" class=\\\"mat-typography\\\" appearance=\\\"legacy\\\"\\n        vertical={{bundleIsVertical(bundle)}} multiple=\\\"true\\\">\\n        <mat-button-toggle [ngStyle]=\\\"getButtonColor(ogcPushButton)\\\" [checked]=\\\"ogcPushButton.enabled\\\"\\n          (change)=\\\"onButtonChange(ogcPushButton)\\\" tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n          [matTooltip]=\\\"getToolTip(ogcPushButton)\\\" matTooltipClass=\\\"material-tooltip\\\"\\n          *ngFor=\\\"let ogcPushButton of bundle.buttons\\\" [value]=\\\"ogcPushButton\\\">{{ogcPushButton.title}}\\n        </mat-button-toggle>\\n      </mat-button-toggle-group>\\n    </ng-container>\\n  </div>\\n</form>\",\n                styles: [\".mat-button-toggle-group{flex-wrap:wrap;margin:5px}.pushButtonGroups,.pushButtonSelector{text-align:center}.mat-button-toggle{display:inline-flex}::ng-deep .material-tooltip{white-space:pre-line}\"]\n            }]\n    }], function () { return [{ type: OGCFilterService }, { type: ɵngcc16.FormBuilder }]; }, { refreshFilters: [{\n            type: Input\n        }], datasource: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n\n/**\n * Spatial Filter Type\n */\nclass SpatialFilterTypeComponent {\n    constructor() {\n        this.queryType = ['Arrond', 'CircFed', 'CircProv', 'DirReg', 'Mun', 'MRC', 'AdmRegion', 'RegTour'];\n        this.selectedTypeIndex = new FormControl(0);\n        /**\n         * Reference to the SpatialFIlterType enum\n         * @internal\n         */\n        this.spatialType = SpatialFilterType;\n        this.activeDrawType = this.spatialType.Polygon;\n        this.eventType = new EventEmitter();\n        this.eventQueryType = new EventEmitter();\n        this.zoneChange = new EventEmitter();\n    }\n    get store() {\n        return this._store;\n    }\n    set store(store) {\n        this._store = store;\n    }\n    ngOnInit() {\n        if (this.selectedTypeIndex.value === 0) {\n            this.type = this.spatialType.Predefined;\n        }\n        if (this.selectedTypeIndex.value === 1) {\n            this.type = this.activeDrawType;\n        }\n        this.eventType.emit(this.type);\n    }\n    onTypeChange(event) {\n        if (this.selectedTypeIndex.value === 0) {\n            this.type = SpatialFilterType.Predefined;\n        }\n        if (this.selectedTypeIndex.value === 1) {\n            this.type = this.activeDrawType;\n        }\n        this.eventType.emit(this.type);\n    }\n    onQueryTypeChange(event) {\n        this.eventQueryType.emit(this.selectedQueryType);\n    }\n    onZoneChange(feature) {\n        this.zoneChange.emit(feature);\n    }\n    onDrawTypeChange(spatialType) {\n        this.activeDrawType = spatialType;\n        this.eventType.emit(this.activeDrawType);\n    }\n}\nSpatialFilterTypeComponent.ɵfac = function SpatialFilterTypeComponent_Factory(t) { return new (t || SpatialFilterTypeComponent)(); };\nSpatialFilterTypeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SpatialFilterTypeComponent, selectors: [[\"igo-spatial-filter-type\"]], inputs: { store: \"store\", selectedQueryType: \"selectedQueryType\", zone: \"zone\" }, outputs: { eventType: \"eventType\", eventQueryType: \"eventQueryType\", zoneChange: \"zoneChange\" }, decls: 20, vars: 24, consts: [[3, \"selectedIndex\", \"selectedIndexChange\", \"selectedTabChange\"], [3, \"label\"], [3, \"value\", \"selectionChange\", \"valueChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"store\", \"queryType\", \"selectedZone\", \"zoneChange\"], [1, \"spatial-type-toggle\"], [3, \"value\", \"change\"], [3, \"value\", \"matTooltip\"], [\"svgIcon\", \"pentagon-outline\"], [\"svgIcon\", \"record-circle-outline\"], [3, \"value\"]], template: function SpatialFilterTypeComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-tab-group\", 0);\n        ɵngcc0.ɵɵlistener(\"selectedIndexChange\", function SpatialFilterTypeComponent_Template_mat_tab_group_selectedIndexChange_0_listener($event) { return ctx.selectedTypeIndex.setValue($event); })(\"selectedTabChange\", function SpatialFilterTypeComponent_Template_mat_tab_group_selectedTabChange_0_listener($event) { return ctx.onTypeChange($event); });\n        ɵngcc0.ɵɵelementStart(1, \"mat-tab\", 1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementStart(3, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(4, \"mat-label\");\n        ɵngcc0.ɵɵtext(5);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"mat-select\", 2);\n        ɵngcc0.ɵɵlistener(\"selectionChange\", function SpatialFilterTypeComponent_Template_mat_select_selectionChange_7_listener($event) { return ctx.onQueryTypeChange($event); })(\"valueChange\", function SpatialFilterTypeComponent_Template_mat_select_valueChange_7_listener($event) { return ctx.selectedQueryType = $event; });\n        ɵngcc0.ɵɵtemplate(8, SpatialFilterTypeComponent_mat_option_8_Template, 3, 4, \"mat-option\", 3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"igo-spatial-filter-list\", 4);\n        ɵngcc0.ɵɵlistener(\"zoneChange\", function SpatialFilterTypeComponent_Template_igo_spatial_filter_list_zoneChange_9_listener($event) { return ctx.onZoneChange($event); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"mat-tab\", 1);\n        ɵngcc0.ɵɵpipe(11, \"translate\");\n        ɵngcc0.ɵɵelementStart(12, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(13, \"mat-button-toggle-group\", 6);\n        ɵngcc0.ɵɵlistener(\"change\", function SpatialFilterTypeComponent_Template_mat_button_toggle_group_change_13_listener($event) { return ctx.onDrawTypeChange($event.value); });\n        ɵngcc0.ɵɵelementStart(14, \"mat-button-toggle\", 7);\n        ɵngcc0.ɵɵpipe(15, \"translate\");\n        ɵngcc0.ɵɵelement(16, \"mat-icon\", 8);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"mat-button-toggle\", 7);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelement(19, \"mat-icon\", 9);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"selectedIndex\", ctx.selectedTypeIndex.value);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(2, 14, \"igo.geo.spatialFilter.predefined\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 16, \"igo.geo.spatialFilter.searchLabel\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.selectedQueryType);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.queryType);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"store\", ctx.store)(\"queryType\", ctx.selectedQueryType)(\"selectedZone\", ctx.zone);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(11, 18, \"igo.geo.spatialFilter.draw\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.activeDrawType);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.spatialType.Polygon)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(15, 20, \"igo.geo.spatialFilter.drawPolygon\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.spatialType.Point)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(18, 22, \"igo.geo.spatialFilter.drawCircle\"));\n    } }, directives: function () { return [ɵngcc27.MatTabGroup, ɵngcc27.MatTab, ɵngcc14.MatFormField, ɵngcc14.MatLabel, ɵngcc15.MatSelect, ɵngcc1.NgForOf, SpatialFilterListComponent, ɵngcc23.MatButtonToggleGroup, ɵngcc23.MatButtonToggle, ɵngcc3.MatTooltip, ɵngcc4.MatIcon, ɵngcc11.MatOption]; }, pipes: function () { return [ɵngcc5.TranslatePipe]; }, styles: [\".mat-form-field[_ngcontent-%COMP%]{margin-left:2px;padding:5px;width:95%}.mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-content{overflow:hidden}.mat-tab-group[_ngcontent-%COMP%]     .mat-tab-label{padding:10px}.mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-wrapper{margin-top:5px}.spatial-type-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.spatial-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%], .spatial-type-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:50%}\"], changeDetection: 0 });\nSpatialFilterTypeComponent.ctorParameters = () => [];\nSpatialFilterTypeComponent.propDecorators = {\n    store: [{ type: Input }],\n    selectedQueryType: [{ type: Input }],\n    zone: [{ type: Input }],\n    eventType: [{ type: Output }],\n    eventQueryType: [{ type: Output }],\n    zoneChange: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SpatialFilterTypeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spatial-filter-type',\n                template: \"<mat-tab-group\\n  [selectedIndex]=\\\"selectedTypeIndex.value\\\"\\n  (selectedIndexChange)=\\\"selectedTypeIndex.setValue($event)\\\"\\n  (selectedTabChange)=\\\"onTypeChange($event)\\\">\\n\\n  <mat-tab [label]=\\\"'igo.geo.spatialFilter.predefined' |\\u00A0translate\\\">\\n    <mat-form-field>\\n      <mat-label>{{'igo.geo.spatialFilter.searchLabel' | translate}}</mat-label>\\n      <mat-select (selectionChange)=\\\"onQueryTypeChange($event)\\\" [(value)]=\\\"selectedQueryType\\\">\\n        <mat-option *ngFor=\\\"let queryType of queryType\\\" [value]=\\\"queryType\\\">\\n          {{('igo.geo.terrapi.' + queryType) | translate}}\\n        </mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n    <igo-spatial-filter-list\\n      [store]=\\\"store\\\"\\n      [queryType]=\\\"selectedQueryType\\\"\\n      [selectedZone]=\\\"zone\\\"\\n      (zoneChange)=\\\"onZoneChange($event)\\\">\\n    </igo-spatial-filter-list>\\n  </mat-tab>\\n\\n  <mat-tab [label]=\\\"'igo.geo.spatialFilter.draw' |\\u00A0translate\\\">\\n    <div class=\\\"spatial-type-toggle\\\">\\n      <mat-button-toggle-group\\n        [value]=\\\"activeDrawType\\\"\\n        (change)=\\\"onDrawTypeChange($event.value)\\\">\\n        <mat-button-toggle [value]=\\\"spatialType.Polygon\\\" [matTooltip]=\\\"'igo.geo.spatialFilter.drawPolygon' |\\u00A0translate\\\">\\n            <mat-icon svgIcon=\\\"pentagon-outline\\\"></mat-icon>\\n        </mat-button-toggle>\\n        <mat-button-toggle [value]=\\\"spatialType.Point\\\" [matTooltip]=\\\"'igo.geo.spatialFilter.drawCircle' |\\u00A0translate\\\">\\n            <mat-icon svgIcon=\\\"record-circle-outline\\\"></mat-icon>\\n        </mat-button-toggle>\\n      </mat-button-toggle-group>\\n    </div>\\n  </mat-tab>\\n\\n</mat-tab-group>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".mat-form-field{margin-left:2px;padding:5px;width:95%}.mat-tab-group ::ng-deep .mat-tab-body-content{overflow:hidden}.mat-tab-group ::ng-deep .mat-tab-label{padding:10px}.mat-tab-group ::ng-deep .mat-tab-body-wrapper{margin-top:5px}.spatial-type-toggle{padding:10px;text-align:center}.spatial-type-toggle mat-button-toggle-group,.spatial-type-toggle mat-button-toggle-group mat-button-toggle{width:50%}\"]\n            }]\n    }], function () { return []; }, { eventType: [{\n            type: Output\n        }], eventQueryType: [{\n            type: Output\n        }], zoneChange: [{\n            type: Output\n        }], store: [{\n            type: Input\n        }], selectedQueryType: [{\n            type: Input\n        }], zone: [{\n            type: Input\n        }] }); })();\n\nclass SpatialFilterListComponent {\n    constructor(spatialFilterService) {\n        this.spatialFilterService = spatialFilterService;\n        this.formControl = new FormControl();\n        this.zoneChange = new EventEmitter();\n    }\n    get store() {\n        return this._store;\n    }\n    set store(store) {\n        this._store = store;\n    }\n    get queryType() {\n        return this._queryType;\n    }\n    set queryType(queryType) {\n        this.formControl.setValue('');\n        this._queryType = queryType;\n    }\n    ngOnInit() {\n        this.formValueChanges$$ = this.formControl.valueChanges.subscribe((value) => {\n            if (value.length) {\n                this.store.view.filter((feature) => {\n                    const filterNormalized = value.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    const featureNameNormalized = feature.properties.nom.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    return featureNameNormalized.includes(filterNormalized);\n                });\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.formValueChanges$$.unsubscribe();\n    }\n    displayFn(feature) {\n        return feature ? feature.properties.nom : undefined;\n    }\n    onZoneChange(feature) {\n        if (feature && this.queryType) {\n            this.spatialFilterService.loadItemById(feature, this.queryType)\n                .subscribe((featureGeom) => {\n                this.selectedZone = featureGeom;\n                this.zoneChange.emit(featureGeom);\n            });\n        }\n    }\n}\nSpatialFilterListComponent.ɵfac = function SpatialFilterListComponent_Factory(t) { return new (t || SpatialFilterListComponent)(ɵngcc0.ɵɵdirectiveInject(SpatialFilterService)); };\nSpatialFilterListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SpatialFilterListComponent, selectors: [[\"igo-spatial-filter-list\"]], inputs: { store: \"store\", queryType: \"queryType\", selectedZone: \"selectedZone\" }, outputs: { zoneChange: \"zoneChange\" }, decls: 10, vars: 9, consts: [[1, \"form-list\"], [\"type\", \"text\", \"matInput\", \"\", 3, \"placeholder\", \"formControl\", \"matAutocomplete\"], [\"input\", \"\"], [3, \"displayWith\", \"optionSelected\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]], template: function SpatialFilterListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"form\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n        ɵngcc0.ɵɵelement(2, \"input\", 1, 2);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementStart(5, \"mat-autocomplete\", 3, 4);\n        ɵngcc0.ɵɵlistener(\"optionSelected\", function SpatialFilterListComponent_Template_mat_autocomplete_optionSelected_5_listener($event) { return ctx.onZoneChange($event.option.value); });\n        ɵngcc0.ɵɵtemplate(7, SpatialFilterListComponent_mat_option_7_Template, 2, 2, \"mat-option\", 5);\n        ɵngcc0.ɵɵpipe(8, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(9, \"form\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(6);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(4, 5, \"igo.geo.spatialFilter.listLabel\"));\n        ɵngcc0.ɵɵproperty(\"formControl\", ctx.formControl)(\"matAutocomplete\", _r1);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"displayWith\", ctx.displayFn);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(8, 7, ctx.store.view.all$()));\n    } }, directives: [ɵngcc16.ɵangular_packages_forms_forms_y, ɵngcc16.NgControlStatusGroup, ɵngcc16.NgForm, ɵngcc14.MatFormField, ɵngcc19.MatInput, ɵngcc16.DefaultValueAccessor, ɵngcc26.MatAutocompleteTrigger, ɵngcc16.NgControlStatus, ɵngcc16.FormControlDirective, ɵngcc26.MatAutocomplete, ɵngcc1.NgForOf, ɵngcc11.MatOption], pipes: [ɵngcc5.TranslatePipe, ɵngcc1.AsyncPipe], styles: [\".mat-form-field[_ngcontent-%COMP%]{margin-left:2px;padding:5px;width:95%}\"], changeDetection: 0 });\nSpatialFilterListComponent.ctorParameters = () => [\n    { type: SpatialFilterService }\n];\nSpatialFilterListComponent.propDecorators = {\n    store: [{ type: Input }],\n    queryType: [{ type: Input }],\n    selectedZone: [{ type: Input }],\n    zoneChange: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SpatialFilterListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spatial-filter-list',\n                template: \"<form class=\\\"form-list\\\">\\n    <mat-form-field>\\n        <input #input type=\\\"text\\\" placeholder=\\\"{{'igo.geo.spatialFilter.listLabel' |\\u00A0translate}}\\\" matInput\\n        [formControl]=\\\"formControl\\\" [matAutocomplete]=\\\"auto\\\">\\n        <mat-autocomplete #auto=\\\"matAutocomplete\\\" (optionSelected)=\\\"onZoneChange($event.option.value)\\\"\\n        [displayWith]=\\\"displayFn\\\">\\n            <mat-option *ngFor=\\\"let entities of this.store.view.all$() | async\\\" [value]=\\\"entities\\\">\\n                {{entities.properties.nom}}\\n            </mat-option>\\n        </mat-autocomplete>\\n    </mat-form-field>\\n<form>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".mat-form-field{margin-left:2px;padding:5px;width:95%}\"]\n            }]\n    }], function () { return [{ type: SpatialFilterService }]; }, { zoneChange: [{\n            type: Output\n        }], store: [{\n            type: Input\n        }], queryType: [{\n            type: Input\n        }], selectedZone: [{\n            type: Input\n        }] }); })();\n\n/**\n * Spatial-Filter-Item (search parameters)\n */\nclass SpatialFilterItemComponent {\n    constructor(cdRef, spatialFilterService, messageService, languageService) {\n        this.cdRef = cdRef;\n        this.spatialFilterService = spatialFilterService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.toggleSearch = new EventEmitter();\n        this.itemTypeChange = new EventEmitter();\n        this.thematicChange = new EventEmitter();\n        this.drawZoneEvent = new EventEmitter();\n        this.radiusEvent = new EventEmitter();\n        this.freehandControl = new EventEmitter();\n        this.clearButtonEvent = new EventEmitter();\n        this.clearSearchEvent = new EventEmitter();\n        this.export = new EventEmitter();\n        this.openWorkspace = new EventEmitter();\n        this.itemType = [SpatialFilterItemType.Address, SpatialFilterItemType.Thematics];\n        this.selectedItemType = SpatialFilterItemType.Address;\n        this.treeControl = new NestedTreeControl(node => node.children);\n        // For thematics and results tables\n        this.displayedColumns = ['name', 'select'];\n        this.childrens = [];\n        this.groups = [];\n        this.thematics = [];\n        this.dataSource = new MatTreeNestedDataSource();\n        this.selectedThematics = new SelectionModel(true, []);\n        // For geometry form field input\n        this.value$ = new BehaviorSubject(undefined);\n        this.drawGuide$ = new BehaviorSubject(null);\n        this.overlayStyle$ = new BehaviorSubject(undefined);\n        this.drawStyle$ = new BehaviorSubject(undefined);\n        this.formControl = new FormControl();\n        this.geometryTypeField = false;\n        this.geometryTypes = ['Point', 'Polygon'];\n        this.drawGuideField = false;\n        this.drawGuide = null;\n        this.drawGuidePlaceholder = '';\n        this.measure = false;\n        this.drawControlIsActive = true;\n        this.freehandDrawIsActive = false;\n        this.radiusFormControl = new FormControl();\n        this.measureUnit = MeasureLengthUnit.Meters;\n    }\n    get type() {\n        return this._type;\n    }\n    set type(type) {\n        this._type = type;\n        const index = this.geometryTypes.findIndex(geom => geom === this.type);\n        this.geometryType = this.geometryTypes[index];\n        this.formControl.reset();\n        this.radius = undefined;\n        this.drawGuide$.next(null);\n        this.drawStyle$.next(undefined);\n        // Necessary to keep reference to the geometry form field input\n        if (this.type === SpatialFilterType.Predefined) {\n            const geojson = {\n                type: 'Point',\n                coordinates: ''\n            };\n            this.formControl.setValue(geojson);\n        }\n        // Necessary to apply the right style when geometry type is Point\n        if (this.type === SpatialFilterType.Point) {\n            this.radius = 1000; // Base radius\n            this.radiusFormControl.setValue(this.radius);\n            this.PointStyle = (feature, resolution) => {\n                const coordinates = transform(feature.getGeometry().getCoordinates(), this.map.projection, 'EPSG:4326');\n                return new Style({\n                    image: new Circle({\n                        radius: this.radius / (Math.cos((Math.PI / 180) * coordinates[1])) / resolution,\n                        stroke: new Stroke({\n                            width: 2,\n                            color: 'rgba(0, 153, 255)'\n                        }),\n                        fill: new Fill({\n                            color: 'rgba(0, 153, 255, 0.2)'\n                        })\n                    })\n                });\n            };\n            this.overlayStyle = this.PointStyle;\n            this.drawStyle$.next(this.overlayStyle);\n        }\n        else {\n            // If geometry types is Polygon\n            this.radius = undefined;\n            this.PolyStyle = (feature, resolution) => {\n                return new Style({\n                    stroke: new Stroke({\n                        width: 2,\n                        color: 'rgba(0, 153, 255)'\n                    }),\n                    fill: new Fill({\n                        color: 'rgba(0, 153, 255, 0.2)'\n                    })\n                });\n            };\n            this.overlayStyle = this.PolyStyle;\n        }\n        this.overlayStyle$.next(this.overlayStyle);\n    }\n    get store() {\n        return this._store;\n    }\n    set store(store) {\n        this._store = store;\n        this._store.entities$.subscribe(() => { this.cdRef.detectChanges(); });\n    }\n    /**\n     * Available measure units for the measure type given\n     * @internal\n     */\n    get measureUnits() {\n        return [MeasureLengthUnit.Meters];\n    }\n    get thematicLength() {\n        return this._thematicLength;\n    }\n    set thematicLength(value) {\n        this._thematicLength = value;\n    }\n    ngOnInit() {\n        this.spatialFilterService.loadThematicsList()\n            .subscribe((items) => {\n            for (const item of items) {\n                this.childrens.push(item);\n                this.childrens.sort((a, b) => {\n                    return a.name.localeCompare(b.name);\n                });\n            }\n            this.childrens.forEach(child => {\n                if (child.group && (this.groups.indexOf(child.group) === -1)) {\n                    this.groups.push(child.group);\n                    const thematic = {\n                        name: child.group,\n                        children: []\n                    };\n                    this.thematics.push(thematic);\n                }\n                if (!child.group) {\n                    const thematic = {\n                        name: child.name,\n                        children: [],\n                        source: child.source\n                    };\n                    this.thematics.push(thematic);\n                }\n                this.thematics.sort((a, b) => {\n                    return a.name.localeCompare(b.name);\n                });\n            });\n            this.thematics.forEach(thematic => {\n                for (const child of this.childrens) {\n                    if (child.group === thematic.name) {\n                        thematic.children.push(child);\n                    }\n                }\n            });\n        });\n        this.dataSource.data = this.thematics;\n        this.drawGuide$.next(null);\n        this.value$.next(this.formControl.value ? this.formControl.value : undefined);\n        this.value$$ = this.formControl.valueChanges.subscribe((value) => {\n            this.value$.next(value ? value : undefined);\n        });\n        this.value$.subscribe(() => {\n            this.getRadius();\n            this.cdRef.detectChanges();\n        });\n        this.radiusChanges$$ = this.radiusFormControl.valueChanges.subscribe(() => {\n            this.getRadius();\n            this.cdRef.detectChanges();\n        });\n    }\n    /**\n     * Unsubscribe to the value stream\n     * @internal\n     */\n    ngOnDestroy() {\n        this.value$$.unsubscribe();\n        this.cdRef.detach();\n    }\n    onItemTypeChange(event) {\n        this.selectedItemType = event.value;\n        this.itemTypeChange.emit(this.selectedItemType);\n    }\n    /**\n     * Set the measure unit\n     * @internal\n     */\n    onMeasureUnitChange(unit) {\n        this.measureUnit = unit;\n    }\n    isPredefined() {\n        return this.type === SpatialFilterType.Predefined;\n    }\n    isPolygon() {\n        return this.type === SpatialFilterType.Polygon;\n    }\n    isPoint() {\n        return this.type === SpatialFilterType.Point;\n    }\n    hasChild(_, node) {\n        if (node.children) {\n            return node.children.length;\n        }\n        return false;\n    }\n    onToggleClick(node) {\n        this.treeControl.isExpanded(node) ? this.treeControl.collapse(node) : this.treeControl.expand(node);\n    }\n    isAllSelected(node) {\n        let numSelected;\n        let numNodes = 0;\n        if (!node) {\n            numSelected = this.selectedThematics.selected.length;\n            this.thematics.forEach(thematic => {\n                if (this.groups.indexOf(thematic.name) === -1) {\n                    numNodes++;\n                }\n            });\n            this.childrens.forEach(children => {\n                if (!this.thematics.find(thematic => thematic.source === children.source)) {\n                    numNodes++;\n                }\n            });\n        }\n        else {\n            numSelected = node.children.length;\n            node.children.forEach(children => {\n                if (this.selectedThematics.selected.find(thematic => thematic === children)) {\n                    numNodes++;\n                }\n            });\n        }\n        if (numNodes >= 1) {\n            return numSelected === numNodes;\n        }\n        else {\n            return false;\n        }\n    }\n    hasChildrenSelected(node) {\n        let bool = false;\n        node.children.forEach(child => {\n            if (this.selectedThematics.selected.find(thematic => thematic.source === child.source)) {\n                bool = true;\n            }\n        });\n        return bool;\n    }\n    /**\n     * Apply header checkbox\n     */\n    masterToggle() {\n        this.isAllSelected() ?\n            this.selectedThematics.clear() :\n            this.selectAll();\n        const selectedThematicsName = [];\n        for (const thematic of this.selectedThematics.selected) {\n            selectedThematicsName.push(thematic);\n        }\n        if (this.isAllSelected()) {\n            this.thematics.forEach(thematic => {\n                if (this.hasChild(0, thematic)) {\n                    this.treeControl.expand(thematic);\n                }\n            });\n        }\n        else {\n            this.thematics.forEach(thematic => {\n                if (this.hasChild(0, thematic)) {\n                    this.treeControl.collapse(thematic);\n                }\n            });\n        }\n        this.thematicChange.emit(selectedThematicsName);\n    }\n    selectAll(node) {\n        if (!node) {\n            this.thematics.forEach(thematic => {\n                if (this.groups.indexOf(thematic.name) === -1) {\n                    this.selectedThematics.select(thematic);\n                }\n            });\n            this.childrens.forEach(children => {\n                if (!this.selectedThematics.selected.find(thematic => thematic.source === children.source)) {\n                    this.selectedThematics.select(children);\n                }\n            });\n        }\n        else {\n            if (this.hasChild(0, node)) {\n                node.children.forEach(children => this.selectedThematics.select(children));\n            }\n        }\n    }\n    childrensToggle(node) {\n        this.isAllSelected(node) ?\n            node.children.forEach(child => this.selectedThematics.deselect(child)) :\n            this.selectAll(node);\n        const selectedThematicsName = [];\n        for (const thematic of this.selectedThematics.selected) {\n            selectedThematicsName.push(thematic);\n        }\n        this.treeControl.expand(node);\n        this.thematicChange.emit(selectedThematicsName);\n    }\n    /**\n     * Apply changes to the thematics selected tree and emit event\n     */\n    onToggleChange(nodeSelected) {\n        let selected = false;\n        if (this.selectedThematics.selected.find(thematic => thematic.source === nodeSelected.source) !== undefined) {\n            selected = true;\n        }\n        this.childrens.forEach(children => {\n            if (children === nodeSelected && selected === false) {\n                this.selectedThematics.select(children);\n            }\n            if (children === nodeSelected && selected === true) {\n                this.selectedThematics.deselect(children);\n            }\n        });\n        this.thematics.forEach(thematic => {\n            if (thematic === nodeSelected && selected === false) {\n                this.selectedThematics.select(thematic);\n            }\n            if (thematic === nodeSelected && selected === true) {\n                this.selectedThematics.deselect(thematic);\n            }\n        });\n        const selectedThematicsName = [];\n        for (const thematic of this.selectedThematics.selected) {\n            selectedThematicsName.push(thematic);\n        }\n        this.thematicChange.emit(selectedThematicsName);\n    }\n    onDrawControlChange() {\n        this.drawControlIsActive = !this.drawControlIsActive;\n    }\n    onfreehandControlChange() {\n        this.freehandDrawIsActive = !this.freehandDrawIsActive;\n        this.freehandControl.emit(this.freehandDrawIsActive);\n    }\n    /**\n     * Launch search button\n     */\n    toggleSearchButton() {\n        if (this.isPolygon() || this.isPoint()) {\n            this.drawZone = this.formControl.value;\n            this.drawZone.meta = {\n                id: undefined,\n                title: 'Zone'\n            };\n            this.drawZone.properties = {\n                nom: 'Zone',\n                type: this.type\n            };\n            this.drawZoneEvent.emit(this.drawZone);\n        }\n        this.radiusEvent.emit(this.radius);\n        this.toggleSearch.emit();\n        this.store.entities$.subscribe((value) => {\n            if (value.length && this.layers.length === this.thematicLength + 1) {\n                this.openWorkspace.emit();\n            }\n        });\n    }\n    /**\n     * Launch clear button (clear store and map layers)\n     */\n    clearButton() {\n        this.loading = true;\n        this.map.removeLayers(this.layers);\n        this.loading = false;\n        if (this.store) {\n            this.store.clear();\n        }\n        if (this.isPoint() || this.isPolygon()) {\n            this.drawZone = undefined;\n            this.formControl.reset();\n        }\n        this.clearButtonEvent.emit();\n    }\n    /**\n     * Launch clear search (clear field if type is predefined)\n     */\n    clearSearch() {\n        this.selectedThematics.clear();\n        this.thematicChange.emit([]);\n        this.clearSearchEvent.emit();\n    }\n    /**\n     * Verify conditions of incomplete fields or busy service\n     */\n    disableSearchButton() {\n        if (this.type === SpatialFilterType.Predefined) {\n            if (this.selectedItemType === SpatialFilterItemType.Address) {\n                if (this.queryType !== undefined && this.zone !== undefined) {\n                    return this.loading;\n                }\n            }\n            if (this.selectedItemType === SpatialFilterItemType.Thematics) {\n                if (this.queryType !== undefined && this.zone !== undefined && this.selectedThematics.selected.length > 0) {\n                    return this.loading;\n                }\n            }\n        }\n        if (this.type === SpatialFilterType.Polygon || this.type === SpatialFilterType.Point) {\n            if (this.selectedItemType === SpatialFilterItemType.Address && this.formControl.value !== null) {\n                return this.loading;\n            }\n            if (this.selectedItemType === SpatialFilterItemType.Thematics) {\n                if (this.selectedThematics.selected.length > 0 && this.formControl.value !== null) {\n                    return this.loading;\n                }\n            }\n        }\n        return true;\n    }\n    /**\n     * Manage radius value at user change\n     */\n    getRadius() {\n        let formValue;\n        this.formControl.value !== null ? formValue = this.formControl.value.radius : formValue = undefined;\n        if (this.type === SpatialFilterType.Point) {\n            if (!this.freehandDrawIsActive) {\n                if (this.radiusFormControl.value >= 10000 || this.radiusFormControl.value < 0) {\n                    this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.radiusAlert'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'));\n                    this.radius = 1000;\n                    this.radiusFormControl.setValue(this.radius);\n                    this.drawGuide$.next(this.radius);\n                    return;\n                }\n            }\n            else {\n                if (formValue) {\n                    if (formValue >= 10000) {\n                        this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.radiusAlert'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'));\n                        this.formControl.reset();\n                        return;\n                    }\n                    if (formValue !== this.radiusFormControl.value) {\n                        this.radiusFormControl.setValue(formValue);\n                        return;\n                    }\n                }\n            }\n            this.radius = this.radiusFormControl.value;\n            this.drawGuide$.next(this.radius);\n            this.overlayStyle$.next(this.PointStyle);\n            this.drawStyle$.next(this.PointStyle);\n        }\n    }\n}\nSpatialFilterItemComponent.ɵfac = function SpatialFilterItemComponent_Factory(t) { return new (t || SpatialFilterItemComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(SpatialFilterService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.MessageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.LanguageService)); };\nSpatialFilterItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SpatialFilterItemComponent, selectors: [[\"igo-spatial-filter-item\"]], inputs: { type: \"type\", store: \"store\", thematicLength: \"thematicLength\", loading: \"loading\", map: \"map\", queryType: \"queryType\", zone: \"zone\", layers: \"layers\" }, outputs: { toggleSearch: \"toggleSearch\", itemTypeChange: \"itemTypeChange\", thematicChange: \"thematicChange\", drawZoneEvent: \"drawZoneEvent\", radiusEvent: \"radiusEvent\", freehandControl: \"freehandControl\", clearButtonEvent: \"clearButtonEvent\", clearSearchEvent: \"clearSearchEvent\", export: \"export\", openWorkspace: \"openWorkspace\" }, decls: 26, vars: 39, consts: [[3, \"formControl\", \"map\", \"geometryType\", \"drawGuide\", \"measure\", \"drawControlIsActive\", \"freehandDrawIsActive\", \"drawStyle\", \"overlayStyle\", \"radius\"], [1, \"header\"], [3, \"checked\", \"labelPosition\", \"change\", 4, \"ngIf\"], [\"class\", \"radius-unit\", 4, \"ngIf\"], [1, \"title\", \"mat-typography\"], [3, \"value\"], [3, \"value\", \"change\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"thematics\", 4, \"ngIf\"], [1, \"buttons\"], [\"mat-raised-button\", \"\", \"class\", \"clear-search-button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"class\", \"clear-form-button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"search-button\", 3, \"disabled\", \"click\"], [\"mat-raised-button\", \"\", 1, \"remove-button\", 3, \"disabled\", \"click\"], [\"mat-raised-button\", \"\", 1, \"export-button\", 3, \"disabled\", \"click\"], [3, \"checked\", \"labelPosition\", \"change\"], [1, \"radius-unit\"], [1, \"radius-form\"], [1, \"radius\"], [\"type\", \"number\", \"matInput\", \"\", 3, \"placeholder\", \"formControl\", \"value\", \"readonly\", \"input\"], [1, \"unit-field\"], [3, \"value\", \"change\"], [1, \"thematics\"], [\"matColumnDef\", \"name\"], [\"class\", \"thematics-header\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"select\"], [\"class\", \"checks-header\", 4, \"matHeaderCellDef\"], [4, \"matHeaderRowDef\"], [4, \"matRowDef\", \"matRowDefColumns\"], [3, \"dataSource\", \"treeControl\"], [\"matTreeNodeToggle\", \"\", 4, \"matTreeNodeDef\"], [4, \"matTreeNodeDef\", \"matTreeNodeDefWhen\"], [1, \"thematics-header\"], [1, \"checks-header\"], [3, \"checked\", \"indeterminate\", \"change\"], [\"matTreeNodeToggle\", \"\"], [1, \"mat-tree-node\"], [\"mat-icon-button\", \"\", \"disabled\", \"\"], [1, \"tree-check\", 3, \"checked\", \"click\", \"change\"], [\"mat-icon-button\", \"\", 3, \"click\"], [3, \"svgIcon\"], [1, \"tree-check-2\", 3, \"checked\", \"indeterminate\", \"change\"], [1, \"tree-ul\"], [\"matTreeNodeOutlet\", \"\"], [\"mat-raised-button\", \"\", 1, \"clear-search-button\", 3, \"disabled\", \"click\"], [\"mat-raised-button\", \"\", 1, \"clear-form-button\", 3, \"disabled\", \"click\"]], template: function SpatialFilterItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-geometry-form-field-input\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementStart(4, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(5, SpatialFilterItemComponent_mat_slide_toggle_5_Template, 3, 5, \"mat-slide-toggle\", 2);\n        ɵngcc0.ɵɵtemplate(6, SpatialFilterItemComponent_mat_slide_toggle_6_Template, 3, 5, \"mat-slide-toggle\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(7, SpatialFilterItemComponent_div_7_Template, 8, 9, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(8, \"mat-label\", 4);\n        ɵngcc0.ɵɵtext(9);\n        ɵngcc0.ɵɵpipe(10, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(11, \"mat-radio-group\", 5);\n        ɵngcc0.ɵɵtemplate(12, SpatialFilterItemComponent_mat_radio_button_12_Template, 3, 4, \"mat-radio-button\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(13, SpatialFilterItemComponent_div_13_Template, 11, 5, \"div\", 7);\n        ɵngcc0.ɵɵelementStart(14, \"div\", 8);\n        ɵngcc0.ɵɵtemplate(15, SpatialFilterItemComponent_button_15_Template, 3, 4, \"button\", 9);\n        ɵngcc0.ɵɵtemplate(16, SpatialFilterItemComponent_button_16_Template, 3, 4, \"button\", 10);\n        ɵngcc0.ɵɵelementStart(17, \"button\", 11);\n        ɵngcc0.ɵɵlistener(\"click\", function SpatialFilterItemComponent_Template_button_click_17_listener() { return ctx.toggleSearchButton(); });\n        ɵngcc0.ɵɵtext(18);\n        ɵngcc0.ɵɵpipe(19, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(20, \"button\", 12);\n        ɵngcc0.ɵɵlistener(\"click\", function SpatialFilterItemComponent_Template_button_click_20_listener() { return ctx.clearButton(); });\n        ɵngcc0.ɵɵtext(21);\n        ɵngcc0.ɵɵpipe(22, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"button\", 13);\n        ɵngcc0.ɵɵlistener(\"click\", function SpatialFilterItemComponent_Template_button_click_23_listener() { return ctx.export.emit(); });\n        ɵngcc0.ɵɵtext(24);\n        ɵngcc0.ɵɵpipe(25, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"formControl\", ctx.formControl)(\"map\", ctx.map)(\"geometryType\", ctx.geometryType)(\"drawGuide\", ɵngcc0.ɵɵpipeBind1(1, 25, ctx.drawGuide$))(\"measure\", ctx.measure)(\"drawControlIsActive\", ctx.drawControlIsActive)(\"freehandDrawIsActive\", ctx.freehandDrawIsActive)(\"drawStyle\", ɵngcc0.ɵɵpipeBind1(2, 27, ctx.drawStyle$))(\"overlayStyle\", ɵngcc0.ɵɵpipeBind1(3, 29, ctx.overlayStyle$))(\"radius\", ctx.radius);\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.isPredefined());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.isPredefined());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isPoint());\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\"\", ɵngcc0.ɵɵpipeBind1(10, 31, \"igo.geo.spatialFilter.search\"), \" : \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.selectedItemType);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.itemType);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selectedItemType === \"Thematics\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isPredefined());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isPolygon() || ctx.isPoint());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disableSearchButton());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(19, 33, \"igo.geo.spatialFilter.goSearch\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.store.entities$.getValue().length && !ctx.zone && !ctx.drawZone);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(22, 35, \"igo.geo.spatialFilter.removeLayer\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.store.entities$.getValue().length);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(25, 37, \"igo.geo.spatialFilter.exportLayer\"), \" \");\n    } }, directives: [GeometryFormFieldInputComponent, ɵngcc16.NgControlStatus, ɵngcc16.FormControlDirective, ɵngcc1.NgIf, ɵngcc14.MatLabel, ɵngcc28.MatRadioGroup, ɵngcc1.NgForOf, ɵngcc2.MatButton, ɵngcc20.MatSlideToggle, ɵngcc16.ɵangular_packages_forms_forms_y, ɵngcc16.NgControlStatusGroup, ɵngcc16.NgForm, ɵngcc14.MatFormField, ɵngcc16.NumberValueAccessor, ɵngcc19.MatInput, ɵngcc16.DefaultValueAccessor, ɵngcc28.MatRadioButton, ɵngcc29.MatTable, ɵngcc29.MatColumnDef, ɵngcc29.MatHeaderCellDef, ɵngcc29.MatHeaderRowDef, ɵngcc29.MatRowDef, ɵngcc30.MatTree, ɵngcc30.MatTreeNodeDef, ɵngcc29.MatHeaderCell, ɵngcc13.MatCheckbox, ɵngcc29.MatHeaderRow, ɵngcc29.MatRow, ɵngcc30.MatTreeNode, ɵngcc30.MatTreeNodeToggle, ɵngcc30.MatNestedTreeNode, ɵngcc4.MatIcon, ɵngcc30.MatTreeNodeOutlet], pipes: [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\".header[_ngcontent-%COMP%]{margin-top:5px;width:100%}.mat-slide-toggle[_ngcontent-%COMP%]{margin-bottom:15px;padding:5px;width:98%}.mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 20px)}.radius-form[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{margin-left:5px}.title[_ngcontent-%COMP%]{font-size:medium}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:10px}.mat-radio-button[_ngcontent-%COMP%]{display:inline-flex;margin-left:16px;margin-top:10px;position:relative}.mat-form-field[_ngcontent-%COMP%]{margin-top:5px}.mat-column-select[_ngcontent-%COMP%]{overflow:auto}.buttons[_ngcontent-%COMP%]{margin-top:15px}.search-button[_ngcontent-%COMP%]{left:25px;width:150px}.remove-button[_ngcontent-%COMP%]{margin:12px;width:150px}.clear-form-button[_ngcontent-%COMP%], .clear-search-button[_ngcontent-%COMP%]{left:10px;width:150px}.thematics[_ngcontent-%COMP%]{margin-top:5px;max-height:30%}.results[_ngcontent-%COMP%], .thematics[_ngcontent-%COMP%]{overflow:auto;width:98%}.results[_ngcontent-%COMP%]{max-height:250px}.mat-column-typeResults[_ngcontent-%COMP%]{margin-right:5px;max-width:100px}.radius[_ngcontent-%COMP%]{width:90%}.radius[_ngcontent-%COMP%]     .mat-form-field-infix{display:inline-flex}.unit-field[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}.example-tree-invisible[_ngcontent-%COMP%]{display:none}.tree-ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0 0 0 20px}.tree-check[_ngcontent-%COMP%], .tree-check-2[_ngcontent-%COMP%]{margin-left:auto;margin-right:5px;position:relative}.thematics-header[_ngcontent-%COMP%]{max-width:250px}.checks-header[_ngcontent-%COMP%]{max-width:calc(100% - 316px);overflow:hidden;padding:none}.mat-checkbox[_ngcontent-%COMP%]{padding:5px}.mat-tree-node[_ngcontent-%COMP%]{min-height:42px;position:relative;width:280px}.mat-header-cell[_ngcontent-%COMP%]{height:56px}\"], changeDetection: 0 });\nSpatialFilterItemComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef },\n    { type: SpatialFilterService },\n    { type: MessageService },\n    { type: LanguageService }\n];\nSpatialFilterItemComponent.propDecorators = {\n    map: [{ type: Input }],\n    type: [{ type: Input }],\n    queryType: [{ type: Input }],\n    zone: [{ type: Input }],\n    loading: [{ type: Input }],\n    store: [{ type: Input }],\n    layers: [{ type: Input }],\n    thematicLength: [{ type: Input }],\n    toggleSearch: [{ type: Output }],\n    itemTypeChange: [{ type: Output }],\n    thematicChange: [{ type: Output }],\n    drawZoneEvent: [{ type: Output }],\n    radiusEvent: [{ type: Output }],\n    freehandControl: [{ type: Output }],\n    clearButtonEvent: [{ type: Output }],\n    clearSearchEvent: [{ type: Output }],\n    export: [{ type: Output }],\n    openWorkspace: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SpatialFilterItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spatial-filter-item',\n                template: \"<igo-geometry-form-field-input\\n  [formControl]=\\\"formControl\\\"\\n  [map]=\\\"map\\\"\\n  [geometryType]=\\\"geometryType\\\"\\n  [drawGuide]=\\\"drawGuide$ | async\\\"\\n  [measure]=\\\"measure\\\"\\n  [drawControlIsActive]=\\\"drawControlIsActive\\\"\\n  [freehandDrawIsActive]=\\\"freehandDrawIsActive\\\"\\n  [drawStyle]=\\\"drawStyle$ | async\\\"\\n  [overlayStyle]=\\\"overlayStyle$ | async\\\"\\n  [radius]=\\\"radius\\\">\\n</igo-geometry-form-field-input>\\n\\n<div class=\\\"header\\\">\\n    <mat-slide-toggle *ngIf=\\\"!isPredefined()\\\"\\n      [checked]=\\\"drawControlIsActive\\\"\\n      [labelPosition]=\\\"'before'\\\"\\n      (change)=\\\"onDrawControlChange()\\\">\\n      {{'igo.geo.spatialFilter.drawControl' | translate}}\\n    </mat-slide-toggle>\\n    <mat-slide-toggle *ngIf=\\\"!isPredefined()\\\"\\n      [checked]=\\\"freehandDrawIsActive\\\"\\n      [labelPosition]=\\\"'before'\\\"\\n      (change)=\\\"onfreehandControlChange()\\\">\\n      {{'igo.geo.spatialFilter.freehandControl' | translate}}\\n    </mat-slide-toggle>\\n</div>\\n\\n  <div class=\\\"radius-unit\\\" *ngIf=\\\"isPoint()\\\">\\n    <form class=\\\"radius-form\\\">\\n      <mat-form-field class=\\\"radius\\\">\\n        <input type=\\\"number\\\" matInput placeholder=\\\"{{'igo.geo.spatialFilter.radius' | translate}}\\\" [formControl]=\\\"radiusFormControl\\\"\\n        [value]=\\\"1000\\\" (input)=\\\"getRadius()\\\" [readonly]=\\\"this.freehandDrawIsActive && this.formControl.value === null\\\">\\n        <label class=\\\"unit-field\\\">\\n          {{('igo.geo.measure.' + measureUnit) | translate}}\\n        </label>\\n      </mat-form-field>\\n    </form>\\n  </div>\\n\\n  <mat-label class=\\\"title mat-typography\\\">{{'igo.geo.spatialFilter.search' | translate}} : </mat-label>\\n  <mat-radio-group [value]=\\\"selectedItemType\\\">\\n      <mat-radio-button *ngFor=\\\"let item of itemType\\\"\\n        [value]=\\\"item\\\"\\n        (change)=\\\"onItemTypeChange($event)\\\">\\n        {{'igo.geo.spatialFilter.' + item | translate}}\\n      </mat-radio-button>\\n  </mat-radio-group>\\n\\n<div class=\\\"thematics\\\" *ngIf=\\\"selectedItemType==='Thematics'\\\">\\n  <mat-table>\\n      <!-- Name Column -->\\n      <ng-container matColumnDef=\\\"name\\\">\\n        <mat-header-cell *matHeaderCellDef class=\\\"thematics-header\\\">{{'igo.geo.spatialFilter.Thematics' | translate}}</mat-header-cell>\\n      </ng-container>\\n\\n      <!-- Select Column -->\\n      <ng-container matColumnDef=\\\"select\\\">\\n        <mat-header-cell *matHeaderCellDef class=\\\"checks-header\\\">\\n          <mat-checkbox (change)=\\\"$event ? masterToggle() : null\\\"\\n                        [checked]=\\\"isAllSelected()\\\"\\n                        [indeterminate]=\\\"selectedThematics.hasValue() && !isAllSelected()\\\">\\n          </mat-checkbox>\\n        </mat-header-cell>\\n    </ng-container>\\n\\n    <mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></mat-header-row>\\n    <mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></mat-row>\\n\\n  </mat-table>\\n\\n  <mat-tree [dataSource]=\\\"dataSource\\\" [treeControl]=\\\"treeControl\\\">\\n    <!-- This is the tree node template for leaf nodes -->\\n    <mat-tree-node *matTreeNodeDef=\\\"let node\\\" matTreeNodeToggle>\\n      <li class=\\\"mat-tree-node\\\">\\n        <!-- use a disabled button to provide padding for tree leaf -->\\n        <button mat-icon-button disabled></button>\\n        {{node.name}}\\n        <mat-checkbox class=\\\"tree-check\\\" (click)=\\\"$event.stopPropagation()\\\"\\n                      (change)=\\\"$event ? onToggleChange(node) : null\\\"\\n                      [checked]=\\\"selectedThematics.isSelected(node)\\\">\\n        </mat-checkbox>\\n      </li>\\n    </mat-tree-node>\\n\\n    <!-- This is the tree node template for expandable nodes -->\\n    <mat-nested-tree-node *matTreeNodeDef=\\\"let node; when: hasChild\\\">\\n        <div class=\\\"mat-tree-node\\\">\\n          <button mat-icon-button\\n            (click)=\\\"onToggleClick(node)\\\">\\n            <mat-icon [svgIcon]=\\\"treeControl.isExpanded(node) ? 'chevron-down' : 'chevron-right'\\\"></mat-icon>\\n          </button>\\n          {{node.name}}\\n          <mat-checkbox class=\\\"tree-check-2\\\" (change)=\\\"$event ? childrensToggle(node) : null\\\"\\n                        [checked]=\\\"isAllSelected(node)\\\"\\n                        [indeterminate]=\\\"hasChildrenSelected(node) && !isAllSelected(node)\\\">\\n          </mat-checkbox>\\n        </div>\\n        <ul class=\\\"tree-ul\\\" [class.example-tree-invisible]=\\\"!treeControl.isExpanded(node)\\\">\\n          <ng-container matTreeNodeOutlet></ng-container>\\n        </ul>\\n    </mat-nested-tree-node>\\n\\n  </mat-tree>\\n</div>\\n\\n<div class=\\\"buttons\\\">\\n\\n    <button *ngIf=\\\"isPredefined()\\\" mat-raised-button class=\\\"clear-search-button\\\" [disabled]=\\\"!queryType && !zone\\\"\\n      (click)=\\\"clearSearch()\\\">\\n        {{'igo.geo.spatialFilter.clearSearch' | translate}}\\n    </button>\\n\\n  <button *ngIf=\\\"isPolygon() || isPoint()\\\" mat-raised-button class=\\\"clear-form-button\\\" [disabled]=\\\"this.formControl.value === null\\\"\\n    (click)=\\\"this.formControl.reset()\\\">\\n    {{'igo.geo.spatialFilter.clearForm' | translate}}\\n  </button>\\n\\n  <button mat-raised-button class=\\\"search-button\\\" [disabled]=\\\"disableSearchButton()\\\" color=\\\"primary\\\"\\n    (click)=\\\"toggleSearchButton()\\\">\\n    {{'igo.geo.spatialFilter.goSearch' | translate}}\\n  </button>\\n\\n  <button mat-raised-button class=\\\"remove-button\\\" [disabled]=\\\"!store.entities$.getValue().length && !zone && !drawZone\\\" (click)=\\\"clearButton()\\\">\\n    {{'igo.geo.spatialFilter.removeLayer' | translate}}\\n  </button>\\n\\n  <button mat-raised-button class=\\\"export-button\\\" [disabled]=\\\"!store.entities$.getValue().length\\\" (click)=\\\"export.emit()\\\">\\n    {{'igo.geo.spatialFilter.exportLayer' | translate}}\\n  </button>\\n\\n</div>\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".header{margin-top:5px;width:100%}.mat-slide-toggle{margin-bottom:15px;padding:5px;width:98%}.mat-slide-toggle ::ng-deep .mat-slide-toggle-content{width:calc(100% - 20px)}.radius-form,.title{margin-left:5px}.title{font-size:medium}.mat-radio-group{display:flex;flex-direction:column;padding-top:10px}.mat-radio-button{display:inline-flex;margin-left:16px;margin-top:10px;position:relative}.mat-form-field{margin-top:5px}.mat-column-select{overflow:auto}.buttons{margin-top:15px}.search-button{left:25px;width:150px}.remove-button{margin:12px;width:150px}.clear-form-button,.clear-search-button{left:10px;width:150px}.thematics{margin-top:5px;max-height:30%}.results,.thematics{overflow:auto;width:98%}.results{max-height:250px}.mat-column-typeResults{margin-right:5px;max-width:100px}.radius{width:90%}.radius ::ng-deep .mat-form-field-infix{display:inline-flex}.unit-field{padding-left:5px;padding-right:5px}.example-tree-invisible{display:none}.tree-ul{list-style-type:none;margin:0;padding:0 0 0 20px}.tree-check,.tree-check-2{margin-left:auto;margin-right:5px;position:relative}.thematics-header{max-width:250px}.checks-header{max-width:calc(100% - 316px);overflow:hidden;padding:none}.mat-checkbox{padding:5px}.mat-tree-node{min-height:42px;position:relative;width:280px}.mat-header-cell{height:56px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: SpatialFilterService }, { type: ɵngcc7.MessageService }, { type: ɵngcc7.LanguageService }]; }, { toggleSearch: [{\n            type: Output\n        }], itemTypeChange: [{\n            type: Output\n        }], thematicChange: [{\n            type: Output\n        }], drawZoneEvent: [{\n            type: Output\n        }], radiusEvent: [{\n            type: Output\n        }], freehandControl: [{\n            type: Output\n        }], clearButtonEvent: [{\n            type: Output\n        }], clearSearchEvent: [{\n            type: Output\n        }], export: [{\n            type: Output\n        }], openWorkspace: [{\n            type: Output\n        }], type: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], thematicLength: [{\n            type: Input\n        }], loading: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], queryType: [{\n            type: Input\n        }], zone: [{\n            type: Input\n        }], layers: [{\n            type: Input\n        }] }); })();\n\nconst moment$1 = moment_;\nclass OgcFilterTimeComponent {\n    constructor() {\n        this.changeProperty = new EventEmitter();\n        this.beginHourFormControl = new FormControl();\n        this.beginMinuteFormControl = new FormControl();\n        this.endHourFormControl = new FormControl();\n        this.endMinuteFormControl = new FormControl();\n        this._defaultMin = '1900-01-01';\n        this.ogcFilterOperator = OgcFilterOperator;\n        this.defaultStepMillisecond = 60000;\n    }\n    get step() {\n        return this.datasource.options.stepDate\n            ? this.datasource.options.stepDate\n            : this.currentFilter.step;\n    }\n    get stepMilliseconds() {\n        const step = moment$1.duration(this.step).asMilliseconds();\n        return step === 0 ? this.defaultStepMillisecond : step;\n    }\n    set beginValue(begin) {\n        this._beginValue = begin;\n    }\n    get beginValue() {\n        return this._beginValue;\n    }\n    set endValue(end) {\n        this._endValue = end;\n    }\n    get endValue() {\n        return this._endValue;\n    }\n    ngOnInit() {\n        this.beginValue = this.parseFilter(this.handleMin());\n        this.endValue = this.parseFilter(this.handleMax());\n        this.updateHoursMinutesArray();\n        // update value for now value\n        this.updateValues();\n    }\n    parseFilter(filter) {\n        if (!filter) {\n            return new Date();\n        }\n        else if (isNaN(new Date(filter).getTime())) {\n            if (filter.search('now') >= 0) {\n                const interval = filter.match(/years|months|weeks|days|hours|seconds/);\n                if (filter.match(/\\+/)) {\n                    const intervalInt = parseInt(filter.substring(filter.search('+') + 1, interval.index), 10);\n                    return moment$1().add(intervalInt, interval[0]).toDate();\n                }\n                if (filter.match(/\\-/)) {\n                    const intervalInt = parseInt(filter.substring(filter.search('-') + 1, interval.index), 10);\n                    return moment$1().subtract(intervalInt, interval[0]).toDate();\n                }\n                return new Date();\n            }\n            if (filter.search('today') >= 0) {\n                const _now = moment$1().endOf('day').toDate();\n                const interval = filter.match(/years|months|weeks|days|hours|seconds/);\n                if (filter.match(/\\+/)) {\n                    const intervalInt = parseInt(filter.substring(filter.search('+') + 1, interval.index), 10);\n                    return moment$1(_now).add(intervalInt, interval[0]).toDate();\n                }\n                if (filter.match(/\\-/)) {\n                    const intervalInt = parseInt(filter.substring(filter.search('-') + 1, interval.index), 10);\n                    return moment$1(_now).subtract(intervalInt, interval[0]).toDate();\n                }\n                return _now;\n            }\n            return new Date();\n        }\n        return filter ? new Date(filter) : new Date();\n    }\n    changeTemporalProperty(value, position) {\n        let valueTmp = this.getDateTime(value, position);\n        if (position === 2 && this.calendarType() === 'date') {\n            /* Above month: see yearSelected or monthSelected */\n            valueTmp = moment$1(valueTmp).endOf('day').toDate();\n        }\n        if (position === 1) {\n            this.beginValue = valueTmp;\n            if (this.restrictedToStep()) {\n                this.changeTemporalProperty(this.addStep(valueTmp), 2);\n            }\n        }\n        else {\n            this.endValue = valueTmp;\n        }\n        this.updateHoursMinutesArray();\n        this.changeProperty.next({ value: valueTmp.toISOString(), pos: position });\n    }\n    handleDate(value) {\n        if (!value || value === '') {\n            return undefined;\n        }\n        return new Date(value);\n    }\n    calendarType() {\n        if (this.stepMilliseconds < 86400000) {\n            return 'datetime';\n        }\n        return 'date';\n    }\n    yearSelected(year, datePicker, property) {\n        if (this.stepIsYearDuration()) {\n            if (datePicker) {\n                datePicker.close();\n            }\n            if (property === 'end') {\n                year = moment$1(year).endOf('year').toDate();\n            }\n            else if (property === 'begin' && this.restrictedToStep()) {\n                this.yearSelected(year, undefined, 'end');\n            }\n            this.changeTemporalProperty(year, property === 'begin' ? 1 : 2);\n        }\n    }\n    monthSelected(month, datePicker, property) {\n        if (this.stepIsMonthDuration()) {\n            if (datePicker) {\n                datePicker.close();\n            }\n            if (property === 'end') {\n                month = moment$1(month).endOf('month').toDate();\n            }\n            else if (property === 'begin' && this.restrictedToStep()) {\n                this.monthSelected(month, undefined, 'end');\n            }\n            this.changeTemporalProperty(month, property === 'begin' ? 1 : 2);\n        }\n    }\n    calendarView() {\n        const test = this.stepMilliseconds;\n        const diff = Math.abs(this.parseFilter(this.currentFilter.end).getTime() -\n            this.parseFilter(this.currentFilter.begin).getTime());\n        if (this.stepIsYearDuration()) {\n            return 'multi-year';\n        }\n        else if (this.stepIsMonthDuration()) {\n            return 'year';\n        }\n        else if (test < 86400000 && diff < 86400000) {\n            return 'clock';\n        }\n        else {\n            return 'month';\n        }\n    }\n    stepIsYearDuration() {\n        const year = moment$1.duration(this.step);\n        return (year.years() !== 0 &&\n            year.months() === 0 &&\n            year.weeks() === 0 &&\n            year.days() === 0 &&\n            year.hours() === 0 &&\n            year.minutes() === 0);\n    }\n    stepIsMonthDuration() {\n        const month = moment$1.duration(this.step);\n        return (month.months() !== 0 &&\n            month.weeks() === 0 &&\n            month.days() === 0 &&\n            month.hours() === 0 &&\n            month.minutes() === 0);\n    }\n    stepIsWeekDuration() {\n        const week = moment$1.duration(this.step);\n        return (week.weeks() !== 0 &&\n            week.days() === 7 &&\n            week.hours() === 0 &&\n            week.minutes() === 0);\n    }\n    stepIsDayDuration() {\n        const day = moment$1.duration(this.step);\n        return day.days() !== 0 && day.hours() === 0 && day.minutes() === 0;\n    }\n    stepIsHourDuration() {\n        const hour = moment$1.duration(this.step);\n        return hour.hours() !== 0 && hour.minutes() === 0;\n    }\n    stepIsMinuteDuration() {\n        const minute = moment$1.duration(this.step);\n        return minute.minutes() !== 0;\n    }\n    dateFilter(type, date) {\n        const dateValue = new Date(date);\n        const diff = dateValue.getTime() - new Date(this.handleMin()).getTime();\n        if (this.stepIsMonthDuration()) {\n            const monthDiff = moment$1(dateValue).diff(moment$1(this.handleMin()), 'months', true);\n            if (type === 'end') {\n                const dateValuePlus1 = moment$1(dateValue).add(1, 'd');\n                const monthDiffPlus1 = moment$1(dateValuePlus1).diff(moment$1(this.handleMin()), 'months', true);\n                return (monthDiffPlus1 % moment$1.duration(this.step).asMonths()) === 0;\n            }\n            else if (type === 'begin') {\n                return (monthDiff % moment$1.duration(this.step).asMonths()) === 0;\n            }\n        }\n        else if (this.stepIsWeekDuration()) {\n            const weekDiff = moment$1(dateValue).diff(moment$1(this.handleMin()), 'weeks', true);\n            if (type === 'end') {\n                const dateValuePlus1 = moment$1(dateValue).add(1, 'd');\n                const weekDiffPlus1 = moment$1(dateValuePlus1).diff(moment$1(this.handleMin()), 'weeks', true);\n                return (weekDiffPlus1 % moment$1.duration(this.step).asWeeks()) === 0;\n            }\n            else if (type === 'begin') {\n                return (weekDiff % moment$1.duration(this.step).asWeeks()) === 0;\n            }\n        }\n        else if (this.stepIsDayDuration()) {\n            const dayDiff = moment$1(dateValue).diff(moment$1(this.handleMin()), 'days', true);\n            if (type === 'end') {\n                const dateValuePlus1 = moment$1(dateValue).add(1, 'd');\n                const dayDiffPlus1 = moment$1(dateValuePlus1).diff(moment$1(this.handleMin()), 'days', true);\n                const _mod = (dayDiffPlus1 % moment$1.duration(this.step).asDays());\n                return (_mod < 0.0000001 && _mod > -0.0000001) || _mod === 0; // 1 millisecond = 1.1574074074074076e-8\n            }\n            else if (type === 'begin') {\n                const _mod = ((dayDiff % moment$1.duration(this.step).asDays()) + 1);\n                return (_mod < 0.0000001 && _mod > -0.0000001 && _mod !== 0) || _mod === 1; // 1 millisecond = 1.1574074074074076e-8\n            }\n        }\n        else if (this.stepIsHourDuration()) {\n            const hourDiff = moment$1(dateValue).diff(moment$1(this.handleMin()), 'hours', true);\n            return (hourDiff % moment$1.duration(this.step).asHours()) === 0;\n        }\n        else if (this.stepIsMinuteDuration()) {\n            return true;\n        }\n        return diff % this.stepMilliseconds === 0;\n    }\n    getDateTime(date, pos) {\n        const valuetmp = new Date(date);\n        let valuetmp2;\n        switch (pos) {\n            case 1:\n                valuetmp2 = valuetmp.setHours(this.beginHourFormControl.value, this.beginMinuteFormControl.value);\n                break;\n            case 2:\n                valuetmp2 = valuetmp.setHours(this.endHourFormControl.value, this.endMinuteFormControl.value);\n                break;\n        }\n        return new Date(valuetmp2 ? valuetmp2 : valuetmp);\n    }\n    handleMinuteIncrement() {\n        if (this.stepIsMinuteDuration()) {\n            if (this.stepMilliseconds < 3600000) {\n                return this.stepMilliseconds / 1000 === 60 ? 1 : this.stepMilliseconds / 1000;\n            }\n            else {\n                return (this.stepMilliseconds % 3600000) / 60;\n            }\n        }\n        else if (this.stepIsHourDuration()) {\n            return 60;\n        }\n        return 1;\n    }\n    handleHourIncrement() {\n        if (this.stepIsHourDuration()) {\n            return this.stepMilliseconds / 1000 / 60 / 60;\n        }\n        return 1;\n    }\n    fullBeginHoursArray(checkEndValue) {\n        if (checkEndValue) {\n            this.beginHours = Array.from({\n                length: (this.endHourFormControl.value - 0) / this.handleHourIncrement() + 1\n            }, (_, i) => 0 + i * this.handleHourIncrement());\n        }\n        else {\n            this.beginHours = Array.from({ length: (23 - 0) / this.handleHourIncrement() + 1 }, (_, i) => 0 + i * this.handleHourIncrement());\n        }\n        this.beginHourFormControl.setValue(this.beginValue.getHours());\n    }\n    fullEndHoursArray(checkEndValue) {\n        if (checkEndValue) {\n            this.endHours = Array.from({\n                length: (23 - this.beginHourFormControl.value) /\n                    this.handleHourIncrement() +\n                    1\n            }, (_, i) => this.beginHourFormControl.value + i * this.handleHourIncrement());\n        }\n        else {\n            this.endHours = Array.from({ length: (23 - 0) / this.handleHourIncrement() + 1 }, (_, i) => 0 + i * this.handleHourIncrement());\n        }\n        this.endHourFormControl.setValue(this.endValue.getHours());\n    }\n    fullBeginMinutesArray(checkEndValue) {\n        if (checkEndValue) {\n            this.beginMinutes = Array.from({\n                length: (this.endMinuteFormControl.value - 0) /\n                    this.handleMinuteIncrement() +\n                    1\n            }, (_, i) => 0 + i * this.handleMinuteIncrement());\n        }\n        else {\n            this.beginMinutes = Array.from({ length: (59 - 0) / this.handleMinuteIncrement() + 1 }, (_, i) => 0 + i * this.handleMinuteIncrement());\n        }\n        this.beginMinuteFormControl.setValue(this.beginValue.getMinutes());\n    }\n    fullEndMinutesArray(checkEndValue) {\n        if (checkEndValue) {\n            this.endMinutes = Array.from({\n                length: (59 - this.beginMinuteFormControl.value) /\n                    this.handleMinuteIncrement() +\n                    1\n            }, (_, i) => this.beginMinuteFormControl.value + i * this.handleMinuteIncrement());\n        }\n        else {\n            this.endMinutes = Array.from({ length: (59 - 0) / this.handleMinuteIncrement() + 1 }, (_, i) => 0 + i * this.handleMinuteIncrement());\n        }\n        this.endMinuteFormControl.setValue(this.endValue.getMinutes());\n    }\n    updateHoursMinutesArray() {\n        const beginTmp = new Date(this.beginValue);\n        const endTmp = new Date(this.endValue);\n        if (beginTmp.setHours(0, 0) === endTmp.setHours(0, 0)) {\n            this.fullBeginHoursArray(true);\n            this.fullEndHoursArray(true);\n            if (this.beginValue.getHours() === this.endValue.getHours()) {\n                this.fullBeginMinutesArray(true);\n                this.fullEndMinutesArray(true);\n            }\n        }\n        else {\n            this.fullBeginHoursArray();\n            this.fullEndHoursArray();\n            this.fullBeginMinutesArray();\n            this.fullEndMinutesArray();\n        }\n    }\n    updateValues() {\n        this.changeTemporalProperty(this.beginValue, 1);\n        this.changeTemporalProperty(this.endValue, 2);\n    }\n    restrictedToStep() {\n        return this.currentFilter.restrictToStep\n            ? this.currentFilter.restrictToStep\n            : false;\n    }\n    addStep(value) {\n        return moment$1(value).add(this.stepMilliseconds, 'milliseconds').toDate();\n    }\n    handleMin() {\n        return this.currentFilter.begin ? this.currentFilter.begin :\n            (this.datasource.options.minDate ? this.datasource.options.minDate : this._defaultMin);\n    }\n    handleMax() {\n        return this.currentFilter.end ? this.currentFilter.end :\n            (this.datasource.options.maxDate ? this.datasource.options.maxDate : undefined);\n    }\n}\nOgcFilterTimeComponent.ɵfac = function OgcFilterTimeComponent_Factory(t) { return new (t || OgcFilterTimeComponent)(); };\nOgcFilterTimeComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OgcFilterTimeComponent, selectors: [[\"igo-ogc-filter-time\"]], viewQuery: function OgcFilterTimeComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c21, true);\n        ɵngcc0.ɵɵviewQuery(_c22, true);\n        ɵngcc0.ɵɵviewQuery(_c23, true);\n        ɵngcc0.ɵɵviewQuery(_c24, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.endDatepickerTime = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.beginDatepickerTime = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.beginTime = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.endTime = _t.first);\n    } }, inputs: { datasource: \"datasource\", currentFilter: \"currentFilter\" }, outputs: { changeProperty: \"changeProperty\" }, decls: 14, vars: 15, consts: [[1, \"datetime-container\"], [1, \"datetime-input\"], [1, \"date-input\"], [\"matSuffix\", \"\", 3, \"for\"], [\"matInput\", \"\", 3, \"matDatepicker\", \"placeholder\", \"matDatepickerFilter\", \"value\", \"min\", \"max\", \"dateChange\"], [\"begin\", \"\"], [1, \"filler\"], [3, \"startView\", \"startAt\", \"yearSelected\", \"monthSelected\"], [\"beginDatepicker\", \"\"], [1, \"time-input\"], [\"class\", \"hour-input\", 4, \"ngIf\"], [\"class\", \"minute-input\", 4, \"ngIf\"], [\"class\", \"datetime-input\", 4, \"ngIf\"], [1, \"hour-input\"], [3, \"formControl\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"minute-input\"], [\"end\", \"\"], [\"endDatepicker\", \"\"]], template: function OgcFilterTimeComponent_Template(rf, ctx) { if (rf & 1) {\n        const _r29 = ɵngcc0.ɵɵgetCurrentView();\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"mat-form-field\", 2);\n        ɵngcc0.ɵɵelement(3, \"mat-datepicker-toggle\", 3);\n        ɵngcc0.ɵɵelementStart(4, \"input\", 4, 5);\n        ɵngcc0.ɵɵlistener(\"dateChange\", function OgcFilterTimeComponent_Template_input_dateChange_4_listener() { ɵngcc0.ɵɵrestoreView(_r29); const _r0 = ɵngcc0.ɵɵreference(5); return ctx.changeTemporalProperty(_r0.value, 1); });\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(7, \"span\", 6);\n        ɵngcc0.ɵɵelementStart(8, \"mat-datepicker\", 7, 8);\n        ɵngcc0.ɵɵlistener(\"yearSelected\", function OgcFilterTimeComponent_Template_mat_datepicker_yearSelected_8_listener($event) { ɵngcc0.ɵɵrestoreView(_r29); const _r1 = ɵngcc0.ɵɵreference(9); return ctx.yearSelected($event, _r1, \"begin\"); })(\"monthSelected\", function OgcFilterTimeComponent_Template_mat_datepicker_monthSelected_8_listener($event) { ɵngcc0.ɵɵrestoreView(_r29); const _r1 = ɵngcc0.ɵɵreference(9); return ctx.monthSelected($event, _r1, \"begin\"); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"div\", 9);\n        ɵngcc0.ɵɵtemplate(11, OgcFilterTimeComponent_mat_form_field_11_Template, 6, 6, \"mat-form-field\", 10);\n        ɵngcc0.ɵɵtemplate(12, OgcFilterTimeComponent_mat_form_field_12_Template, 6, 6, \"mat-form-field\", 11);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(13, OgcFilterTimeComponent_div_13_Template, 12, 14, \"div\", 12);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(9);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"for\", _r1);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matDatepicker\", _r1)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(6, 13, \"igo.geo.timeFilter.startDate\"))(\"matDatepickerFilter\", ctx.dateFilter.bind(ctx, \"begin\"))(\"value\", ctx.beginValue ? ctx.beginValue : ctx.handleDate(ctx.datasource.options.minDate))(\"min\", ctx.handleDate(ctx.datasource.options.minDate))(\"max\", ctx.endValue && !ctx.restrictedToStep() ? ctx.endValue : ctx.handleDate(ctx.datasource.options.maxDate));\n        ɵngcc0.ɵɵattribute(\"disabled\", !ctx.currentFilter.active);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"startView\", ctx.calendarView())(\"startAt\", ctx.beginValue);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.calendarType() === \"datetime\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.calendarType() === \"datetime\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.restrictedToStep());\n    } }, directives: [ɵngcc14.MatFormField, ɵngcc31.MatDatepickerToggle, ɵngcc14.MatSuffix, ɵngcc19.MatInput, ɵngcc31.MatDatepickerInput, ɵngcc31.MatDatepicker, ɵngcc1.NgIf, ɵngcc14.MatLabel, ɵngcc15.MatSelect, ɵngcc16.NgControlStatus, ɵngcc16.FormControlDirective, ɵngcc1.NgForOf, ɵngcc11.MatOption], pipes: [ɵngcc5.TranslatePipe], styles: [\"input{margin:auto 5px!important;text-align:center!important}.datetime-container[_ngcontent-%COMP%]{text-align:center}.datetime-input[_ngcontent-%COMP%]{display:inline-block;margin:5px 25px}.date-input[_ngcontent-%COMP%]{margin-right:25px;width:120px}.time-input[_ngcontent-%COMP%]{display:inherit;margin-right:25px}.hour-input[_ngcontent-%COMP%], .minute-input[_ngcontent-%COMP%]{width:40px}.minute-input[_ngcontent-%COMP%]{margin-left:10px}\"] });\nOgcFilterTimeComponent.ctorParameters = () => [];\nOgcFilterTimeComponent.propDecorators = {\n    datasource: [{ type: Input }],\n    currentFilter: [{ type: Input }],\n    changeProperty: [{ type: Output }],\n    endDatepickerTime: [{ type: ViewChild, args: ['endDatepickerTime',] }],\n    beginDatepickerTime: [{ type: ViewChild, args: ['beginDatepickerTime',] }],\n    beginTime: [{ type: ViewChild, args: ['beginTime',] }],\n    endTime: [{ type: ViewChild, args: ['endTime',] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterTimeComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-time',\n                template: \"<div class=\\\"datetime-container\\\">\\n  <div class=\\\"datetime-input\\\">\\n    <mat-form-field class=\\\"date-input\\\">\\n      <mat-datepicker-toggle matSuffix [for]=\\\"beginDatepicker\\\"></mat-datepicker-toggle>\\n      <input #begin\\n        matInput\\n        [matDatepicker]=\\\"beginDatepicker\\\"\\n        [placeholder]=\\\"'igo.geo.timeFilter.startDate' | translate\\\"\\n        [attr.disabled]=\\\"!currentFilter.active\\\"\\n        (dateChange)=\\\"changeTemporalProperty(begin.value, 1)\\\"\\n        [matDatepickerFilter]=\\\"dateFilter.bind(this, 'begin')\\\"\\n        [value]=\\\"beginValue?beginValue:handleDate(datasource.options.minDate)\\\"\\n        [min]=\\\"handleDate(datasource.options.minDate)\\\"\\n        [max]=\\\"(endValue && (!restrictedToStep()))?endValue:handleDate(datasource.options.maxDate)\\\" >\\n      <span class=\\\"filler\\\"></span>\\n      <mat-datepicker\\n        #beginDatepicker\\n        [startView]=\\\"calendarView()\\\"\\n        [startAt]=\\\"beginValue\\\"\\n        (yearSelected)=\\\"yearSelected($event, beginDatepicker, 'begin')\\\"\\n        (monthSelected)=\\\"monthSelected($event, beginDatepicker, 'begin')\\\">\\n      </mat-datepicker>\\n    </mat-form-field>\\n    <div class=\\\"time-input\\\">\\n      <mat-form-field class=\\\"hour-input\\\" *ngIf=\\\"calendarType()==='datetime'\\\">\\n        <mat-label>{{'igo.geo.timeFilter.hour' | translate}}</mat-label>\\n        <mat-select\\n          [formControl]=\\\"beginHourFormControl\\\"\\n          [attr.disabled]=\\\"!currentFilter.active\\\"\\n          (selectionChange)=\\\"changeTemporalProperty(begin.value, 1)\\\">\\n          <mat-option *ngFor=\\\"let hour of beginHours\\\" [value]=\\\"hour\\\">{{hour}}</mat-option>\\n        </mat-select>\\n      </mat-form-field>\\n      <mat-form-field class=\\\"minute-input\\\" *ngIf=\\\"calendarType()==='datetime'\\\">\\n        <mat-label>{{'igo.geo.timeFilter.minute' | translate}}</mat-label>\\n        <mat-select\\n          [formControl]=\\\"beginMinuteFormControl\\\"\\n          [attr.disabled]=\\\"!currentFilter.active\\\"\\n          (selectionChange)=\\\"changeTemporalProperty(begin.value, 1)\\\">\\n          <mat-option *ngFor=\\\"let minute of beginMinutes\\\" [value]=\\\"minute\\\">{{minute}}</mat-option>\\n        </mat-select>\\n      </mat-form-field>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"datetime-input\\\" *ngIf=\\\"!restrictedToStep()\\\">\\n    <mat-form-field class=\\\"date-input\\\">\\n      <mat-datepicker-toggle matSuffix [for]=\\\"endDatepicker\\\"></mat-datepicker-toggle>\\n        <input #end\\n          matInput\\n          [matDatepicker]=\\\"endDatepicker\\\"\\n          [placeholder]=\\\"'igo.geo.timeFilter.endDate' | translate\\\"\\n          [attr.disabled]=\\\"!currentFilter.active\\\"\\n          (dateChange)=\\\"changeTemporalProperty(end.value, 2)\\\"\\n          [matDatepickerFilter]=\\\"dateFilter.bind(this, 'end')\\\"\\n          [value]=\\\"endValue?endValue:handleDate(datasource.options.maxDate)\\\"\\n          [min]=\\\"beginValue?beginValue:handleDate(datasource.options.minDate)\\\"\\n          [max]=\\\"handleDate(datasource.options.maxDate)\\\" >\\n        <span class=\\\"filler\\\"></span>\\n        <mat-datepicker #endDatepicker\\n          [startView]=\\\"calendarView()\\\"\\n          [startAt]=\\\"endValue\\\"\\n          (yearSelected)=\\\"yearSelected($event, endDatepicker, 'end')\\\"\\n          (monthSelected)=\\\"monthSelected($event, endDatepicker, 'end')\\\">\\n      </mat-datepicker>\\n    </mat-form-field>\\n    <div class=\\\"time-input\\\">\\n      <mat-form-field class=\\\"hour-input\\\" *ngIf=\\\"calendarType()==='datetime'\\\" >\\n        <mat-label>{{'igo.geo.timeFilter.hour' | translate}}</mat-label>\\n        <mat-select\\n          [formControl]=\\\"endHourFormControl\\\"\\n          [attr.disabled]=\\\"!currentFilter.active\\\"\\n          (selectionChange)=\\\"changeTemporalProperty(end.value, 2)\\\">\\n          <mat-option *ngFor=\\\"let hour of endHours\\\" [value]=\\\"hour\\\">{{hour}}</mat-option>\\n        </mat-select>\\n      </mat-form-field>\\n      <mat-form-field class=\\\"minute-input\\\" *ngIf=\\\"calendarType()==='datetime'\\\">\\n        <mat-label>{{'igo.geo.timeFilter.minute' | translate}}</mat-label>\\n        <mat-select\\n          [formControl]=\\\"endMinuteFormControl\\\"\\n          [attr.disabled]=\\\"!currentFilter.active\\\"\\n          (selectionChange)=\\\"changeTemporalProperty(end.value, 2)\\\">\\n          <mat-option *ngFor=\\\"let minute of endMinutes\\\" [value]=\\\"minute\\\">{{minute}}</mat-option>\\n        </mat-select>\\n      </mat-form-field>\\n    </div>\\n  </div>\\n\\n</div>\\n\",\n                styles: [\"::ng-deep input{margin:auto 5px!important;text-align:center!important}.datetime-container{text-align:center}.datetime-input{display:inline-block;margin:5px 25px}.date-input{margin-right:25px;width:120px}.time-input{display:inherit;margin-right:25px}.hour-input,.minute-input{width:40px}.minute-input{margin-left:10px}\"]\n            }]\n    }], function () { return []; }, { changeProperty: [{\n            type: Output\n        }], datasource: [{\n            type: Input\n        }], currentFilter: [{\n            type: Input\n        }], endDatepickerTime: [{\n            type: ViewChild,\n            args: ['endDatepickerTime']\n        }], beginDatepickerTime: [{\n            type: ViewChild,\n            args: ['beginDatepickerTime']\n        }], beginTime: [{\n            type: ViewChild,\n            args: ['beginTime']\n        }], endTime: [{\n            type: ViewChild,\n            args: ['endTime']\n        }] }); })();\n\nclass IgoFilterModule {\n    static forRoot() {\n        return {\n            ngModule: IgoFilterModule,\n            providers: [\n                {\n                    provide: MAT_DATE_LOCALE,\n                    useValue: 'fr-FR'\n                }\n            ]\n        };\n    }\n}\nIgoFilterModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoFilterModule });\nIgoFilterModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoFilterModule_Factory(t) { return new (t || IgoFilterModule)(); }, providers: [TimeFilterService, OGCFilterService, SpatialFilterService], imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatAutocompleteModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTabsModule,\n            MatRadioModule,\n            MatMenuModule,\n            MatTableModule,\n            MatTreeModule,\n            MatButtonToggleModule,\n            MatCheckboxModule,\n            MatSliderModule,\n            MatSlideToggleModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatOptionModule,\n            MatSelectModule,\n            MatListModule,\n            MatTooltipModule,\n            MatDatepickerModule,\n            MatNativeDateModule,\n            MatDatetimepickerModule,\n            MatNativeDatetimeModule,\n            IgoLanguageModule,\n            IgoLayerModule,\n            IgoCollapsibleModule,\n            IgoListModule,\n            IgoKeyValueModule,\n            IgoGeometryModule,\n            MatBadgeModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoFilterModule, { declarations: function () { return [FilterableDataSourcePipe, TimeFilterButtonComponent, TimeFilterFormComponent, TimeFilterItemComponent, TimeFilterListComponent, TimeFilterListBindingDirective, OgcFilterFormComponent, OgcFilterButtonComponent, OgcFilterToggleButtonComponent, OgcFilterableFormComponent, OgcFilterableItemComponent, OgcFilterableListComponent, OgcFilterableListBindingDirective, SpatialFilterTypeComponent, SpatialFilterListComponent, SpatialFilterItemComponent, OgcFilterTimeComponent]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatAutocompleteModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTabsModule,\n        MatRadioModule,\n        MatMenuModule,\n        MatTableModule,\n        MatTreeModule,\n        MatButtonToggleModule,\n        MatCheckboxModule,\n        MatSliderModule,\n        MatSlideToggleModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatOptionModule,\n        MatSelectModule,\n        MatListModule,\n        MatTooltipModule,\n        MatDatepickerModule,\n        MatNativeDateModule,\n        MatDatetimepickerModule,\n        MatNativeDatetimeModule,\n        IgoLanguageModule, IgoLayerModule, IgoCollapsibleModule,\n        IgoListModule,\n        IgoKeyValueModule, IgoGeometryModule, MatBadgeModule]; }, exports: function () { return [FilterableDataSourcePipe, TimeFilterButtonComponent, TimeFilterFormComponent, TimeFilterItemComponent, TimeFilterListComponent, TimeFilterListBindingDirective, OgcFilterFormComponent, OgcFilterButtonComponent, OgcFilterToggleButtonComponent, OgcFilterableFormComponent, OgcFilterableItemComponent, OgcFilterableListComponent, OgcFilterableListBindingDirective, SpatialFilterTypeComponent, SpatialFilterListComponent, SpatialFilterItemComponent, OgcFilterTimeComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoFilterModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatAutocompleteModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTabsModule,\n                    MatRadioModule,\n                    MatMenuModule,\n                    MatTableModule,\n                    MatTreeModule,\n                    MatButtonToggleModule,\n                    MatCheckboxModule,\n                    MatSliderModule,\n                    MatSlideToggleModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatOptionModule,\n                    MatSelectModule,\n                    MatListModule,\n                    MatTooltipModule,\n                    MatDatepickerModule,\n                    MatNativeDateModule,\n                    MatDatetimepickerModule,\n                    MatNativeDatetimeModule,\n                    IgoLanguageModule,\n                    IgoLayerModule,\n                    IgoCollapsibleModule,\n                    IgoListModule,\n                    IgoKeyValueModule,\n                    IgoGeometryModule,\n                    MatBadgeModule\n                ],\n                exports: [\n                    FilterableDataSourcePipe,\n                    TimeFilterButtonComponent,\n                    TimeFilterFormComponent,\n                    TimeFilterItemComponent,\n                    TimeFilterListComponent,\n                    TimeFilterListBindingDirective,\n                    OgcFilterFormComponent,\n                    OgcFilterButtonComponent,\n                    OgcFilterToggleButtonComponent,\n                    OgcFilterableFormComponent,\n                    OgcFilterableItemComponent,\n                    OgcFilterableListComponent,\n                    OgcFilterableListBindingDirective,\n                    SpatialFilterTypeComponent,\n                    SpatialFilterListComponent,\n                    SpatialFilterItemComponent,\n                    OgcFilterTimeComponent\n                ],\n                declarations: [\n                    FilterableDataSourcePipe,\n                    TimeFilterButtonComponent,\n                    TimeFilterFormComponent,\n                    TimeFilterItemComponent,\n                    TimeFilterListComponent,\n                    TimeFilterListBindingDirective,\n                    OgcFilterFormComponent,\n                    OgcFilterButtonComponent,\n                    OgcFilterToggleButtonComponent,\n                    OgcFilterableFormComponent,\n                    OgcFilterableItemComponent,\n                    OgcFilterableListComponent,\n                    OgcFilterableListBindingDirective,\n                    SpatialFilterTypeComponent,\n                    SpatialFilterListComponent,\n                    SpatialFilterItemComponent,\n                    OgcFilterTimeComponent\n                ],\n                providers: [TimeFilterService, OGCFilterService, SpatialFilterService]\n            }]\n    }], null, null); })();\n\nclass ExportButtonComponent {\n    constructor() {\n        this._color = 'primary';\n    }\n    get layer() {\n        return this._layer;\n    }\n    set layer(value) {\n        this._layer = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    get options() {\n        if (!this.layer) {\n            return;\n        }\n        return this.layer.dataSource.options;\n    }\n    layerIsExportable() {\n        if ((this.layer instanceof VectorLayer && this.layer.exportable === true) ||\n            (this.layer.dataSource.options.download && this.layer.dataSource.options.download.url)) {\n            return true;\n        }\n        return false;\n    }\n}\nExportButtonComponent.ɵfac = function ExportButtonComponent_Factory(t) { return new (t || ExportButtonComponent)(); };\nExportButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ExportButtonComponent, selectors: [[\"igo-export-button\"]], inputs: { layer: \"layer\", color: \"color\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\"], [\"svgIcon\", \"file-export\"]], template: function ExportButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ExportButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.layerIsExportable());\n    } }, directives: [ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon], pipes: [ɵngcc5.TranslatePipe], styles: [\"\"], changeDetection: 0 });\nExportButtonComponent.ctorParameters = () => [];\nExportButtonComponent.propDecorators = {\n    layer: [{ type: Input }],\n    color: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ExportButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-export-button',\n                template: \"<button\\n  *ngIf=\\\"layerIsExportable()\\\"\\n  mat-icon-button\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"'igo.geo.download.action' | translate\\\"\\n  [color]=\\\"color\\\">\\n  <!-- (click)=\\\"openDownload(layer)\\\"> -->\\n  <mat-icon svgIcon=\\\"file-export\\\"></mat-icon>\\n</button>\\n\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return []; }, { layer: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass ExportError extends Error {\n}\nclass ExportInvalidFileError extends ExportError {\n    constructor() {\n        super('Invalid file');\n        Object.setPrototypeOf(this, ExportInvalidFileError.prototype);\n    }\n}\nclass ExportNothingToExportError extends ExportError {\n    constructor() {\n        super('Nothing to export');\n        Object.setPrototypeOf(this, ExportNothingToExportError.prototype);\n    }\n}\n\nfunction handleFileExportError(error, messageService, languageService) {\n    if (error instanceof ExportNothingToExportError) {\n        handleNothingToExportError(messageService, languageService);\n        return;\n    }\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.export.failed.title');\n    const message = translate.instant('igo.geo.export.failed.text');\n    messageService.error(message, title);\n}\nfunction handleFileExportSuccess(messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.export.success.title');\n    const message = translate.instant('igo.geo.export.success.text');\n    messageService.success(message, title);\n}\nfunction handleNothingToExportError(messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.export.nothing.title');\n    const message = translate.instant('igo.geo.export.nothing.text');\n    messageService.error(message, title);\n}\n/**\n * Export array to CSV\n *\n * @param rows Array of arrays to export as CSV\n * @param separator Cell separator\n */\nfunction exportToCSV(rows, fileName, separator = ';') {\n    const lines = rows.map((row, index) => row.join(separator));\n    const csvContent = lines.join('\\n');\n    downloadContent(csvContent, 'text/csv;charset=utf-8', fileName);\n}\n/**\n * Return an array of values from an array of entities.\n *\n * @param entities Array of entities\n * @param scolumns Columns definition of the output data\n */\nfunction entitiesToRowData(entities, columns) {\n    return entities.map((entity) => {\n        return columns.map((column) => {\n            let valueAccessor;\n            if (column.renderer === undefined || column.renderer === EntityTableColumnRenderer.Default) {\n                valueAccessor = column.valueAccessor;\n            }\n            valueAccessor = valueAccessor ? valueAccessor : getEntityProperty;\n            return valueAccessor(entity, column.name);\n        });\n    });\n}\n\nconst ExportFormat = strEnum(['GeoJSON', 'GML', 'GPX', 'KML', 'Shapefile', 'CSVcomma', 'CSVsemicolon', 'URL']);\nconst EncodingFormat = strEnum(['UTF8', 'LATIN1']);\n\nclass ExportService {\n    constructor(config) {\n        this.config = config;\n        this.aggregateInComment = true;\n        this.ogreUrl = this.config.getConfig('importExport.url');\n        const gpxAggregateInComment = this.config.getConfig('importExport.gpxAggregateInComment');\n        if (gpxAggregateInComment !== undefined) {\n            this.aggregateInComment = gpxAggregateInComment;\n        }\n    }\n    export(olFeatures, format, title, encoding, projectionIn = 'EPSG:4326', projectionOut = 'EPSG:4326') {\n        const exportOlFeatures = this.generateFeature(olFeatures, format);\n        return this.exportAsync(exportOlFeatures, format, title, encoding, projectionIn, projectionOut);\n    }\n    generateFeature(olFeatures, format) {\n        if (format === ExportFormat.GPX && this.aggregateInComment) {\n            return this.generateAggratedFeature(olFeatures);\n        }\n        return olFeatures.map((olFeature$1) => {\n            const keys = olFeature$1\n                .getKeys()\n                .filter((key) => !key.startsWith('_'));\n            const properties = keys.reduce((acc, key) => {\n                acc[key] = olFeature$1.get(key);\n                return acc;\n            }, { geometry: olFeature$1.getGeometry() });\n            return new olFeature(properties);\n        });\n    }\n    generateAggratedFeature(olFeatures) {\n        return olFeatures.map((olFeature$1) => {\n            const keys = olFeature$1\n                .getKeys()\n                .filter((key) => !key.startsWith('_'));\n            let comment = '';\n            const properties = keys.reduce((acc, key) => {\n                if (key !== undefined && key !== 'geometry') {\n                    comment += key + ':' + olFeature$1.get(key) + '   \\r\\n';\n                }\n                acc[key] = olFeature$1.get(key);\n                return acc;\n            }, { geometry: olFeature$1.getGeometry() });\n            const newFeature = new olFeature(properties);\n            newFeature.set('name', olFeature$1.getId());\n            newFeature.set('cmt', comment);\n            return newFeature;\n        });\n    }\n    exportAsync(olFeatures, format, title, encoding, projectionIn, projectionOut) {\n        const doExport = (observer) => {\n            const nothingToExport = this.nothingToExport(olFeatures, format);\n            if (nothingToExport === true) {\n                observer.error(new ExportNothingToExportError());\n                return;\n            }\n            const ogreFormats = Object.keys(ExportService.ogreFormats);\n            if (ogreFormats.indexOf(format) >= 0) {\n                if (this.ogreUrl === undefined) {\n                    if (ExportService.noOgreFallbacks.indexOf(format) >= 0) {\n                        this.exportToFile(olFeatures, observer, format, title, projectionIn, projectionOut);\n                    }\n                    else {\n                        observer.error(new ExportInvalidFileError());\n                    }\n                    return;\n                }\n                this.exportWithOgre(olFeatures, observer, format, title, encoding, projectionIn, projectionOut);\n            }\n            else {\n                this.exportToFile(olFeatures, observer, format, title, projectionIn, projectionOut);\n            }\n        };\n        return new Observable(doExport);\n    }\n    exportToFile(olFeatures, observer, format, title, projectionIn, projectionOut) {\n        const olFormat = new olformat[format]();\n        const featuresText = olFormat.writeFeatures(olFeatures, {\n            dataProjection: projectionOut,\n            featureProjection: projectionIn,\n            featureType: 'feature',\n            featureNS: 'http://example.com/feature'\n        });\n        const fileName = `${title}.${format.toLowerCase()}`;\n        downloadContent(featuresText, 'text/plain;charset=utf-8', fileName);\n        observer.complete();\n    }\n    exportWithOgre(olFeatures, observer, format, title, encodingType, projectionIn, projectionOut) {\n        const featuresText = new GeoJSON().writeFeatures(olFeatures, {\n            dataProjection: projectionOut,\n            featureProjection: projectionIn,\n            featureType: 'feature',\n            featureNS: 'http://example.com/feature'\n        });\n        const url = `${this.ogreUrl}/convertJson`;\n        const form = document.createElement('form');\n        form.style.display = 'none';\n        document.body.appendChild(form);\n        form.setAttribute('method', 'post');\n        form.setAttribute('target', '_blank');\n        form.setAttribute('action', url);\n        if (encodingType === EncodingFormat.UTF8) {\n            form.acceptCharset = 'UTF-8';\n            form.enctype = 'application/x-www-form-urlencoded; charset=utf-8;';\n        }\n        else if (encodingType === EncodingFormat.LATIN1) {\n            const enctype = 'ISO-8859-1';\n            const encoding = document.createElement('input');\n            encoding.setAttribute('type', 'hidden');\n            encoding.setAttribute('name', 'encoding');\n            encoding.setAttribute('value', enctype);\n            form.appendChild(encoding);\n        }\n        if (format === 'CSVsemicolon') {\n            const options = document.createElement('input');\n            options.setAttribute('type', 'hidden');\n            options.setAttribute('name', 'lco');\n            options.setAttribute('value', 'SEPARATOR=SEMICOLON');\n            form.appendChild(options);\n        }\n        const geojsonField = document.createElement('input');\n        geojsonField.setAttribute('type', 'hidden');\n        geojsonField.setAttribute('name', 'json');\n        geojsonField.setAttribute('value', featuresText);\n        form.appendChild(geojsonField);\n        const outputNameField = document.createElement('input');\n        let outputName = format === 'Shapefile'\n            ? `${title}.zip`\n            : `${title}.${format.toLowerCase()}`;\n        if (format === 'CSVcomma' || format === 'CSVsemicolon') {\n            outputName = `${title}.csv`;\n        }\n        outputName = outputName.replace(' ', '_');\n        outputName = outputName.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        outputNameField.setAttribute('type', 'hidden');\n        outputNameField.setAttribute('name', 'outputName');\n        outputNameField.setAttribute('value', outputName);\n        form.appendChild(outputNameField);\n        let ogreFormat = ExportService.ogreFormats[format];\n        if (format === 'CSVcomma' || format === 'CSVsemicolon') {\n            ogreFormat = 'CSV';\n        }\n        const outputFormatField = document.createElement('input');\n        outputFormatField.setAttribute('type', 'hidden');\n        outputFormatField.setAttribute('name', 'format');\n        outputFormatField.setAttribute('value', ogreFormat);\n        form.appendChild(outputFormatField);\n        form.submit();\n        document.body.removeChild(form);\n        observer.complete();\n    }\n    nothingToExport(olFeatures, format) {\n        if (olFeatures.length === 0) {\n            return true;\n        }\n        if (format === 'GPX') {\n            const pointOrLine = olFeatures.find(olFeature => {\n                return (['Point', 'LineString', 'MultiLineString'].indexOf(olFeature.getGeometry().getType()) >=\n                    0);\n            });\n            return pointOrLine === undefined;\n        }\n        return false;\n    }\n}\nExportService.ɵfac = function ExportService_Factory(t) { return new (t || ExportService)(ɵngcc0.ɵɵinject(ɵngcc7.ConfigService)); };\nExportService.ogreFormats = {\n    GML: 'gml',\n    GPX: 'gpx',\n    KML: 'kml',\n    Shapefile: 'ESRI Shapefile',\n    CSVcomma: 'CSVcomma',\n    CSVsemicolon: 'CSVsemicolon'\n};\nExportService.noOgreFallbacks = ['GML', 'GPX', 'KML'];\nExportService.ɵprov = ɵɵdefineInjectable({ factory: function ExportService_Factory() { return new ExportService(ɵɵinject(ConfigService)); }, token: ExportService, providedIn: \"root\" });\nExportService.ctorParameters = () => [\n    { type: ConfigService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ExportService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc7.ConfigService }]; }, null); })();\n\nclass ImportError extends Error {\n}\nclass ImportInvalidFileError extends ImportError {\n    constructor() {\n        super('Invalid file');\n        Object.setPrototypeOf(this, ImportInvalidFileError.prototype);\n    }\n}\nclass ImportUnreadableFileError extends ImportError {\n    constructor() {\n        super('Failed to read file');\n        Object.setPrototypeOf(this, ImportUnreadableFileError.prototype);\n    }\n}\nclass ImportNothingToImportError extends ImportError {\n    constructor() {\n        super('Nothing to import');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\nclass ImportSizeError extends ImportError {\n    constructor() {\n        super('File is too large');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\nclass ImportSRSError extends ImportError {\n    constructor() {\n        super('Invalid SRS definition');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\n\nfunction addLayerAndFeaturesToMap(features, map, layerTitle) {\n    const olFeatures = features.map((feature) => featureToOl(feature, map.projection));\n    const r = Math.floor(Math.random() * 255);\n    const g = Math.floor(Math.random() * 255);\n    const b = Math.floor(Math.random() * 255);\n    const stroke = new Stroke({\n        color: [r, g, b, 1],\n        width: 2\n    });\n    const fill = new Fill({\n        color: [r, g, b, 0.4]\n    });\n    const sourceOptions = {\n        type: 'vector',\n        queryable: true\n    };\n    const source = new FeatureDataSource(sourceOptions);\n    source.ol.addFeatures(olFeatures);\n    const layer = new VectorLayer({\n        title: layerTitle,\n        source,\n        style: new Style({\n            stroke,\n            fill,\n            image: new Circle({\n                radius: 5,\n                stroke,\n                fill\n            })\n        })\n    });\n    map.addLayer(layer);\n    moveToOlFeatures(map, olFeatures);\n    return layer;\n}\nfunction addLayerAndFeaturesStyledToMap(features, map, layerTitle, styleListService, styleService) {\n    const olFeatures = features.map((feature) => featureToOl(feature, map.projection));\n    let style;\n    let distance;\n    if (styleListService.getStyleList(layerTitle.toString() + '.styleByAttribute')) {\n        const styleByAttribute = styleListService.getStyleList(layerTitle.toString() + '.styleByAttribute');\n        style = feature => {\n            return styleService.createStyleByAttribute(feature, styleByAttribute);\n        };\n    }\n    else if (styleListService.getStyleList(layerTitle.toString() + '.clusterStyle')) {\n        const clusterParam = styleListService.getStyleList(layerTitle.toString() + '.clusterParam');\n        distance = styleListService.getStyleList(layerTitle.toString() + '.distance');\n        const baseStyle = styleService.createStyle(styleListService.getStyleList(layerTitle.toString() + '.clusterStyle'));\n        style = feature => {\n            return styleService.createClusterStyle(feature, clusterParam, baseStyle);\n        };\n    }\n    else if (styleListService.getStyleList(layerTitle.toString() + '.style')) {\n        style = styleService.createStyle(styleListService.getStyleList(layerTitle.toString() + '.style'));\n    }\n    else if (styleListService.getStyleList('default.clusterStyle') &&\n        features[0].geometry.type === 'Point') {\n        const clusterParam = styleListService.getStyleList('default.clusterParam');\n        distance = styleListService.getStyleList('default.distance');\n        const baseStyle = styleService.createStyle(styleListService.getStyleList('default.clusterStyle'));\n        style = feature => {\n            return styleService.createClusterStyle(feature, clusterParam, baseStyle);\n        };\n    }\n    else {\n        style = styleService.createStyle(styleListService.getStyleList('default.style'));\n    }\n    let source;\n    if (styleListService.getStyleList(layerTitle.toString() + '.clusterStyle')) {\n        const sourceOptions = {\n            distance,\n            type: 'cluster',\n            queryable: true\n        };\n        source = new ClusterDataSource(sourceOptions);\n        source.ol.source.addFeatures(olFeatures);\n    }\n    else if (styleListService.getStyleList(layerTitle.toString())) {\n        const sourceOptions = {\n            type: 'vector',\n            queryable: true\n        };\n        source = new FeatureDataSource(sourceOptions);\n        source.ol.addFeatures(olFeatures);\n    }\n    else if (styleListService.getStyleList('default.clusterStyle') &&\n        features[0].geometry.type === 'Point') {\n        const sourceOptions = {\n            distance,\n            type: 'cluster',\n            queryable: true\n        };\n        source = new ClusterDataSource(sourceOptions);\n        source.ol.source.addFeatures(olFeatures);\n    }\n    else {\n        const sourceOptions = {\n            type: 'vector',\n            queryable: true\n        };\n        source = new FeatureDataSource(sourceOptions);\n        source.ol.addFeatures(olFeatures);\n    }\n    const layer = new VectorLayer({\n        title: layerTitle,\n        source,\n        style\n    });\n    map.addLayer(layer);\n    moveToOlFeatures(map, olFeatures);\n    return layer;\n}\nfunction handleFileImportSuccess(file, features, map, messageService, languageService, styleListService, styleService) {\n    if (features.length === 0) {\n        handleNothingToImportError(file, messageService, languageService);\n        return;\n    }\n    const layerTitle = computeLayerTitleFromFile(file);\n    if (!styleListService) {\n        addLayerAndFeaturesToMap(features, map, layerTitle);\n    }\n    else {\n        addLayerAndFeaturesStyledToMap(features, map, layerTitle, styleListService, styleService);\n    }\n    const translate = languageService.translate;\n    const messageTitle = translate.instant('igo.geo.dropGeoFile.success.title');\n    const message = translate.instant('igo.geo.dropGeoFile.success.text', {\n        value: layerTitle\n    });\n    messageService.success(message, messageTitle);\n}\nfunction handleFileImportError(file, error, messageService, languageService, sizeMb) {\n    sizeMb = sizeMb ? sizeMb : 30;\n    const errMapping = {\n        'Invalid file': handleInvalidFileImportError,\n        'File is too large': handleSizeFileImportError,\n        'Failed to read file': handleUnreadbleFileImportError,\n        'Invalid SRS definition': handleSRSImportError\n    };\n    errMapping[error.message](file, error, messageService, languageService, sizeMb);\n}\nfunction handleInvalidFileImportError(file, error, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.invalid.title');\n    const message = translate.instant('igo.geo.dropGeoFile.invalid.text', {\n        value: file.name,\n        mimeType: file.type\n    });\n    messageService.error(message, title);\n}\nfunction handleUnreadbleFileImportError(file, error, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.unreadable.title');\n    const message = translate.instant('igo.geo.dropGeoFile.unreadable.text', {\n        value: file.name\n    });\n    messageService.error(message, title);\n}\nfunction handleSizeFileImportError(file, error, messageService, languageService, sizeMb) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.tooLarge.title');\n    const message = translate.instant('igo.geo.dropGeoFile.tooLarge.text', {\n        value: file.name,\n        size: sizeMb\n    });\n    messageService.error(message, title);\n}\nfunction handleNothingToImportError(file, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.empty.title');\n    const message = translate.instant('igo.geo.dropGeoFile.empty.text', {\n        value: file.name,\n        mimeType: file.type\n    });\n    messageService.error(message, title);\n}\nfunction handleSRSImportError(file, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.geo.dropGeoFile.invalidSRS.title');\n    const message = translate.instant('igo.geo.dropGeoFile.invalidSRS.text', {\n        value: file.name,\n        mimeType: file.type\n    });\n    messageService.error(message, title);\n}\nfunction getFileExtension(file) {\n    return file.name\n        .split('.')\n        .pop()\n        .toLowerCase();\n}\nfunction computeLayerTitleFromFile(file) {\n    return file.name.substr(0, file.name.lastIndexOf('.'));\n}\n\nclass ImportService {\n    constructor(http, config) {\n        this.http = http;\n        this.config = config;\n        this.ogreUrl = this.config.getConfig('importExport.url');\n        const configFileSizeMb = this.config.getConfig('importExport.clientSideFileSizeMaxMb');\n        this.clientSideFileSizeMax = (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n    }\n    import(file, projectionIn = 'EPSG:4326', projectionOut = 'EPSG:4326') {\n        return this.importAsync(file, projectionIn, projectionOut);\n    }\n    getFileImporter(file) {\n        const extension = getFileExtension(file);\n        const mimeType = file.type;\n        const allowedMimeTypes = [\n            ...ImportService.allowedMimeTypes,\n            ...ImportService.allowedZipMimeTypes\n        ];\n        const allowedExtensions = ImportService.allowedExtensions;\n        if (allowedMimeTypes.indexOf(mimeType) < 0 &&\n            allowedExtensions.indexOf(extension) < 0) {\n            return undefined;\n        }\n        else if (mimeType === 'application/json' ||\n            ['json', 'geojson', 'kml', 'gpx'].indexOf(extension) >= 0) {\n            return this.importFile;\n        }\n        else if (this.ogreUrl !== undefined) {\n            return this.importFileWithOgre;\n        }\n        return undefined;\n    }\n    importAsync(file, projectionIn, projectionOut) {\n        const doImport = (observer) => {\n            if (file.size >= this.clientSideFileSizeMax) {\n                observer.error(new ImportSizeError());\n                return;\n            }\n            const importer = this.getFileImporter(file);\n            if (importer === undefined) {\n                observer.error(new ImportInvalidFileError());\n                return;\n            }\n            importer.call(this, file, observer, projectionIn, projectionOut);\n        };\n        return new Observable(doImport);\n    }\n    importFile(file, observer, projectionIn, projectionOut) {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            try {\n                const features = this.parseFeaturesFromFile(file, event.target.result, projectionIn, projectionOut);\n                observer.next(features);\n            }\n            catch (e) {\n                observer.error(new ImportUnreadableFileError());\n            }\n            observer.complete();\n        };\n        reader.onerror = evt => {\n            observer.error(new ImportUnreadableFileError());\n        };\n        reader.readAsText(file, 'UTF-8');\n    }\n    importFileWithOgre(file, observer, projectionIn, projectionOut) {\n        const url = `${this.ogreUrl}/convert`;\n        const formData = new FormData();\n        formData.append('upload', file);\n        formData.append('sourceSrs', projectionIn);\n        formData.append('targetSrs', projectionOut);\n        formData.append('formatOutput', 'GEOJSON');\n        formData.append('skipFailures', '');\n        this.http.post(url, formData, { headers: new HttpHeaders() }).subscribe((response) => {\n            if (response === null) {\n                observer.error(new ImportUnreadableFileError());\n                return;\n            }\n            const errors = response.errors || [];\n            if (errors.length > 0) {\n                observer.error(new ImportUnreadableFileError());\n            }\n            else {\n                const features = this.parseFeaturesFromGeoJSON(file, response, projectionOut);\n                observer.next(features);\n                observer.complete();\n            }\n        }, (error) => {\n            error.error.caught = true;\n            const errMsg = error.error.msg || '';\n            if (errMsg === 'No valid files found') {\n                observer.error(new ImportInvalidFileError());\n            }\n            else if (errMsg.startWith('ERROR 1: Failed to process SRS definition')) {\n                observer.error(new ImportSRSError());\n            }\n            else {\n                observer.error(new ImportUnreadableFileError());\n            }\n        });\n    }\n    parseFeaturesFromFile(file, data, projectionIn, projectionOut) {\n        const extension = getFileExtension(file);\n        const mimeType = file.type;\n        const GeoJSON$1 = new GeoJSON();\n        let format;\n        if (mimeType === 'application/vnd.google-earth.kml+xml') {\n            format = new KML();\n        }\n        else if (mimeType === 'application/gml+xml') {\n            format = new GML();\n        }\n        else if (mimeType === 'application/gpx+xml') {\n            format = new GPX();\n        }\n        else {\n            switch (extension) {\n                case 'kml':\n                    format = new KML();\n                    break;\n                case 'gpx':\n                    format = new GPX();\n                    break;\n                case 'gml':\n                    format = new GML();\n                    break;\n                default:\n                    format = GeoJSON$1;\n                    break;\n            }\n        }\n        const olFeatures = format.readFeatures(data, {\n            dataProjection: projectionIn,\n            featureProjection: projectionOut\n        });\n        const features = olFeatures.map((olFeature) => {\n            return Object.assign(GeoJSON$1.writeFeatureObject(olFeature), {\n                projection: projectionOut,\n                meta: {\n                    id: uuid(),\n                    title: computeLayerTitleFromFile(file)\n                }\n            });\n        });\n        return features;\n    }\n    parseFeaturesFromGeoJSON(file, data, projectionOut) {\n        const olFormat = new GeoJSON();\n        const olFeatures = olFormat.readFeatures(data);\n        const features = olFeatures.map((olFeature) => {\n            return Object.assign(olFormat.writeFeatureObject(olFeature), {\n                projection: projectionOut,\n                meta: {\n                    id: uuid(),\n                    title: computeLayerTitleFromFile(file)\n                }\n            });\n        });\n        return features;\n    }\n}\nImportService.ɵfac = function ImportService_Factory(t) { return new (t || ImportService)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.ConfigService)); };\nImportService.allowedMimeTypes = [\n    'application/gml+xml',\n    'application/vnd.google-earth.kml+xml',\n    'application/gpx+xml',\n    'application/json'\n];\nImportService.allowedZipMimeTypes = [\n    'application/zip',\n    'application/x-zip-compressed',\n    'application/x-zip'\n];\nImportService.allowedExtensions = ['geojson', 'kml', 'gpx', 'json', 'gml'];\nImportService.ɵprov = ɵɵdefineInjectable({ factory: function ImportService_Factory() { return new ImportService(ɵɵinject(HttpClient), ɵɵinject(ConfigService)); }, token: ImportService, providedIn: \"root\" });\nImportService.ctorParameters = () => [\n    { type: HttpClient },\n    { type: ConfigService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ImportService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.ConfigService }]; }, null); })();\n\nclass StyleListService {\n    constructor(injector) {\n        this.injector = injector;\n        this.styleList = {};\n    }\n    /**\n     * Use to get the data found in styleList file\n     */\n    getStyleList(key) {\n        return ObjectUtils.resolve(this.styleList, key);\n    }\n    /**\n     * This method loads \"[path]\" to get all styleList's variables\n     */\n    load(options) {\n        const baseStyleList = options.default || {};\n        if (!options.path) {\n            this.styleList = baseStyleList;\n            return true;\n        }\n        const http = this.injector.get(HttpClient);\n        return new Promise((resolve, _reject) => {\n            http\n                .get(options.path)\n                .pipe(catchError((error) => {\n                console.log(`StyleList file ${options.path} could not be read`);\n                resolve(true);\n                return throwError(error.error || 'Server error');\n            }))\n                .subscribe((styleListResponse) => {\n                this.styleList = ObjectUtils.mergeDeep(baseStyleList, styleListResponse);\n                resolve(true);\n            });\n        });\n    }\n}\nStyleListService.ɵfac = function StyleListService_Factory(t) { return new (t || StyleListService)(ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nStyleListService.ɵprov = ɵɵdefineInjectable({ factory: function StyleListService_Factory() { return new StyleListService(ɵɵinject(INJECTOR)); }, token: StyleListService, providedIn: \"root\" });\nStyleListService.ctorParameters = () => [\n    { type: Injector }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StyleListService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc0.Injector }]; }, null); })();\n\nclass ImportExportComponent {\n    constructor(importService, exportService, languageService, messageService, styleListService, styleService, formBuilder, config, cdRef, storageService) {\n        this.importService = importService;\n        this.exportService = exportService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.styleListService = styleListService;\n        this.styleService = styleService;\n        this.formBuilder = formBuilder;\n        this.config = config;\n        this.cdRef = cdRef;\n        this.storageService = storageService;\n        this.formats$ = new BehaviorSubject(undefined);\n        this.encodings$ = new BehaviorSubject(undefined);\n        this.exportableLayers$ = new BehaviorSubject([]);\n        this.inputProj = 'EPSG:4326';\n        this.loading$ = new BehaviorSubject(false);\n        this.forceNaming = false;\n        this.controlFormat = 'format';\n        this.espgCodeRegex = new RegExp('^\\\\d{4,6}');\n        this.popupChecked = false;\n        this.previousLayerSpecs$ = new BehaviorSubject(undefined);\n        this.selectedMode = 'import';\n        this.selectMode = new EventEmitter();\n        this.exportOptions$ = new BehaviorSubject(undefined);\n        this.exportOptionsChange = new EventEmitter();\n        this.loadConfig();\n        this.buildForm();\n    }\n    get layers() {\n        return this.form.get('layers').value;\n    }\n    set layers(value) {\n        this.form.patchValue({ layers: value });\n    }\n    get popupAllowed() {\n        return this.storageService.get('importExportPopupAllowed') || false;\n    }\n    set popupAllowed(value) {\n        this.storageService.set('importExportPopupAllowed', value);\n    }\n    ngOnInit() {\n        this.layers$$ = this.map.layers$.subscribe((layers) => {\n            this.exportableLayers$.next(layers.filter((layer) => {\n                return ((layer instanceof VectorLayer && layer.exportable === true) ||\n                    (layer.dataSource.options.download &&\n                        layer.dataSource.options.download.url));\n            }));\n        });\n        const configFileSizeMb = this.config.getConfig('importExport.clientSideFileSizeMaxMb');\n        this.clientSideFileSizeMax =\n            (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n        this.fileSizeMb = this.clientSideFileSizeMax / Math.pow(1024, 2);\n        this.exportOptions$$ = this.exportOptions$\n            .pipe(skipWhile((exportOptions) => !exportOptions))\n            .subscribe((exportOptions) => {\n            this.form.patchValue(exportOptions, { emitEvent: true });\n            if (exportOptions.layers) {\n                this.computeFormats(exportOptions.layers.map((l) => this.map.getLayerById(l)));\n            }\n        });\n        this.formLayer$$ = this.form\n            .get('format')\n            .valueChanges\n            .subscribe((format) => {\n            var _a;\n            const ogreFormats = Object.keys(ExportService.ogreFormats);\n            if (!this.popupChecked &&\n                ((_a = this.form.get('layers').value) === null || _a === void 0 ? void 0 : _a.length) > 1 &&\n                (ogreFormats.indexOf(format) >= 0 || format === ExportFormat.URL)) {\n                if (!this.handlePopup(true)) {\n                    this.form.patchValue({ format: undefined }, { emitEvent: false });\n                }\n            }\n        });\n        this.formLayer$$ = this.form\n            .get('layers')\n            .valueChanges.subscribe((layersId) => {\n            this.handlePreviousLayerSpecs();\n            const selectedLayers = layersId instanceof Array ? layersId : [layersId];\n            this.form.patchValue({ layers: selectedLayers }, { emitEvent: false });\n            const layers = selectedLayers.map((l) => this.map.getLayerById(l));\n            this.computeFormats(layers);\n            if (Object.keys(this.formats$.value).indexOf(this.form.value.format) ===\n                -1) {\n                this.form.patchValue({ format: undefined });\n            }\n            this.loading$.next(true);\n            const previousSpecs = [];\n            layers.forEach((layer) => {\n                if (layer instanceof VectorLayer &&\n                    layer.dataSource.ol.getFeatures().length === 0) {\n                    previousSpecs.push({\n                        id: layer.id,\n                        visible: layer.visible,\n                        opacity: layer.opacity,\n                        queryable: layer.queryable\n                    });\n                    layer.opacity = 0;\n                    layer.visible = true;\n                }\n            });\n            this.previousLayerSpecs$.next(previousSpecs);\n            setTimeout(() => {\n                this.loading$.next(false);\n            }, 500);\n        });\n        this.formats$$ = this.formats$\n            .pipe(skipWhile((formats) => !formats))\n            .subscribe((formats) => {\n            if (Object.keys(formats).length === 1) {\n                this.form.patchValue({ format: formats[Object.keys(formats)[0]] });\n            }\n        });\n        this.encodings$$ = this.encodings$\n            .pipe(skipWhile((encodings) => !encodings))\n            .subscribe((encodings) => {\n            if (Object.keys(encodings).length === 1) {\n                this.form.patchValue({ encoding: encodings[Object.keys(encodings)[0]] });\n            }\n        });\n        this.exportableLayers$$ = this.exportableLayers$\n            .pipe(skipWhile((layers) => !layers))\n            .subscribe((layers) => {\n            if (layers.length === 1) {\n                this.form.patchValue({ layers: layers[0].id });\n            }\n        });\n        this.form.controls[this.controlFormat].valueChanges.subscribe((format) => {\n            if (format === ExportFormat.CSVcomma || format === ExportFormat.CSVsemicolon) {\n                this.form.patchValue({ encoding: EncodingFormat.LATIN1 });\n            }\n            else {\n                this.form.patchValue({ encoding: EncodingFormat.UTF8 });\n            }\n            this.cdRef.detectChanges();\n        });\n    }\n    getWorkspaceByLayerId(id) {\n        const wksFromLayerId = this.store\n            .all()\n            .find(workspace => workspace.layer.id === id);\n        if (wksFromLayerId) {\n            return wksFromLayerId;\n        }\n        return;\n    }\n    getLayerTitleById(id) {\n        return this.map.getLayerById(id).title;\n    }\n    layerHasSelectedFeatures(layer) {\n        const wksFromLayer = this.getWorkspaceByLayerId(layer.id);\n        if (wksFromLayer) {\n            const recs = wksFromLayer.entityStore.stateView\n                .firstBy((record) => {\n                return record.state.selected === true;\n            });\n            return recs ? true : false;\n        }\n    }\n    onlySelected(event, id) {\n        let layersWithSelection = this.form.value.layersWithSelection;\n        if (event.checked) {\n            layersWithSelection.push(id);\n        }\n        else {\n            layersWithSelection = layersWithSelection.filter(layerId => layerId !== id);\n        }\n        this.form.patchValue({ layersWithSelection });\n    }\n    onlySelectedClick(event, id) {\n        if (this.form.value.layers.find(layerId => layerId === id)) {\n            event.stopPropagation();\n        }\n    }\n    inLayersIdToExportSelectionOnly(layer) {\n        return this.form.value.layersWithSelection.find(layerId => layerId === layer.id) ? true : false;\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n        this.exportableLayers$$.unsubscribe();\n        this.formats$$.unsubscribe();\n        this.encodings$$.unsubscribe();\n        this.formLayer$$.unsubscribe();\n        if (this.exportOptions$$) {\n            this.exportOptions$$.unsubscribe();\n        }\n        this.exportOptionsChange.emit(this.form.value);\n        this.handlePreviousLayerSpecs();\n    }\n    handlePreviousLayerSpecs() {\n        const previousSpecs = this.previousLayerSpecs$.value;\n        if (previousSpecs && previousSpecs.length) {\n            previousSpecs.forEach((specs) => {\n                const previousLayer = this.map.getLayerById(specs.id);\n                previousLayer.visible = specs.visible;\n                previousLayer.opacity = specs.opacity;\n                previousLayer.queryable = specs.queryable;\n            });\n        }\n        this.previousLayerSpecs$.next(undefined);\n    }\n    importFiles(files) {\n        let inputProj = this.inputProj;\n        if (this.espgCodeRegex.test(inputProj)) {\n            inputProj = `EPSG:${inputProj}`;\n        }\n        this.loading$.next(true);\n        for (const file of files) {\n            this.importService.import(file, inputProj).subscribe((features) => this.onFileImportSuccess(file, features), (error) => this.onFileImportError(file, error), () => {\n                this.loading$.next(false);\n            });\n        }\n    }\n    handlePopup(preCheck = true) {\n        const p1 = window.open('', '_blank');\n        p1.close();\n        const p2 = window.open('', '_blank');\n        if (!p2 || p2.closed || typeof p2.closed === 'undefined' || p2 === null) {\n            this.onPopupBlockedError(preCheck);\n            this.popupAllowed = false;\n        }\n        else {\n            p2.close();\n            this.popupAllowed = true;\n            this.popupChecked = true;\n        }\n        return this.popupAllowed;\n    }\n    handleExportFormSubmit(data) {\n        this.loading$.next(true);\n        const ogreFormats = Object.keys(ExportService.ogreFormats);\n        if (!this.popupChecked &&\n            data.layers.length > 1 &&\n            (ogreFormats.indexOf(data.format) >= 0 || data.format === ExportFormat.URL) &&\n            !this.popupAllowed) {\n            this.handlePopup();\n        }\n        data.layers.forEach((layer) => {\n            const lay = this.map.getLayerById(layer);\n            let filename = lay.title;\n            if (data.name !== undefined) {\n                filename = data.name;\n            }\n            const dSOptions = lay.dataSource.options;\n            if (data.format === ExportFormat.URL &&\n                dSOptions.download &&\n                dSOptions.download.url) {\n                setTimeout(() => {\n                    // better look an feel\n                    window.open(dSOptions.download.url, '_blank');\n                    this.loading$.next(false);\n                }, 500);\n                return;\n            }\n            const wks = this.getWorkspaceByLayerId(layer);\n            let olFeatures;\n            if (wks && wks.entityStore && wks.entityStore.stateView.all().length) {\n                if (data.layersWithSelection.indexOf(layer) !== -1 && data.featureInMapExtent) {\n                    // Only export selected feature &&  into map extent\n                    olFeatures = wks.entityStore.stateView.all()\n                        .filter((e) => e.state.inMapExtent && e.state.selected).map(e => e.entity.ol);\n                }\n                else if (data.layersWithSelection.indexOf(layer) !== -1 && !data.featureInMapExtent) {\n                    // Only export selected feature &&  (into map extent OR not)\n                    olFeatures = wks.entityStore.stateView.all()\n                        .filter((e) => e.state.selected).map(e => e.entity.ol);\n                }\n                else if (data.featureInMapExtent) {\n                    // Only into map extent\n                    olFeatures = wks.entityStore.stateView.all()\n                        .filter((e) => e.state.inMapExtent).map(e => e.entity.ol);\n                }\n                else {\n                    // All features\n                    olFeatures = wks.entityStore.stateView.all().map(e => e.entity.ol);\n                }\n            }\n            else {\n                if (data.featureInMapExtent) {\n                    olFeatures = lay.dataSource.ol.getFeaturesInExtent(lay.map.viewController.getExtent());\n                }\n                else {\n                    olFeatures = lay.dataSource.ol.getFeatures();\n                }\n                if (lay.dataSource instanceof ClusterDataSource) {\n                    olFeatures = olFeatures.flatMap((cluster) => cluster.get('features'));\n                }\n            }\n            this.exportService\n                .export(olFeatures, data.format, filename, data.encoding, this.map.projection)\n                .subscribe(() => { }, (error) => this.onFileExportError(error), () => {\n                this.onFileExportSuccess();\n                this.loading$.next(false);\n            });\n        });\n    }\n    buildForm() {\n        if (this.forceNaming) {\n            this.form = this.formBuilder.group({\n                format: ['', [Validators.required]],\n                layers: [[], [Validators.required]],\n                layersWithSelection: [[]],\n                encoding: [EncodingFormat.UTF8, [Validators.required]],\n                featureInMapExtent: [false, [Validators.required]],\n                name: ['', [Validators.required]]\n            });\n        }\n        else {\n            this.form = this.formBuilder.group({\n                format: ['', [Validators.required]],\n                layers: [[], [Validators.required]],\n                layersWithSelection: [[]],\n                encoding: [EncodingFormat.UTF8, [Validators.required]],\n                featureInMapExtent: [false, [Validators.required]]\n            });\n        }\n    }\n    onFileImportSuccess(file, features) {\n        if (!this.config.getConfig('importWithStyle')) {\n            handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService);\n        }\n        else {\n            handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService, this.styleListService, this.styleService);\n        }\n    }\n    onFileImportError(file, error) {\n        this.loading$.next(false);\n        handleFileImportError(file, error, this.messageService, this.languageService, this.fileSizeMb);\n    }\n    onPopupBlockedError(preCheck = true) {\n        this.loading$.next(false);\n        const translate = this.languageService.translate;\n        const title = translate.instant('igo.geo.export.popupBlocked.title');\n        const extraMessage = preCheck ? translate.instant('igo.geo.export.popupBlocked.selectAgain') : translate.instant('igo.geo.export.popupBlocked.retry');\n        const message = translate.instant('igo.geo.export.popupBlocked.text', { extraMessage });\n        this.messageService.error(message, title, { timeOut: 20000 });\n    }\n    onFileExportError(error) {\n        this.loading$.next(false);\n        handleFileExportError(error, this.messageService, this.languageService);\n    }\n    loadConfig() {\n        if (this.config.getConfig('importExport.forceNaming') !== undefined) {\n            this.forceNaming = this.config.getConfig('importExport.forceNaming');\n        }\n        this.computeFormats();\n        this.loadEncodings();\n    }\n    encodingDefaultValue(format) {\n        if (format === ExportFormat.CSVcomma || format === ExportFormat.CSVsemicolon) {\n            this.form.patchValue({ encoding: EncodingFormat.LATIN1 });\n            return EncodingFormat.LATIN1;\n        }\n        else {\n            this.form.patchValue({ encoding: EncodingFormat.UTF8 });\n            return EncodingFormat.UTF8;\n        }\n    }\n    loadEncodings() {\n        this.encodings$.next(EncodingFormat);\n    }\n    computeFormats(layers) {\n        if (layers && layers.length) {\n            const formatsType = {\n                onlyUrl: false,\n                onlyVector: false,\n                vectorAndUrl: false\n            };\n            layers.forEach((layer) => {\n                if (!layer) {\n                    return;\n                }\n                if (!(layer instanceof VectorLayer) &&\n                    layer.dataSource.options.download &&\n                    layer.dataSource.options.download.url) {\n                    formatsType.onlyUrl = true;\n                }\n                else if (layer.dataSource.options.download &&\n                    layer.dataSource.options.download.url) {\n                    formatsType.vectorAndUrl = true;\n                }\n                else if (layer instanceof VectorLayer) {\n                    formatsType.onlyVector = true;\n                }\n            });\n            if (formatsType.onlyUrl === true && formatsType.onlyVector === false) {\n                this.formats$.next(strEnum(['URL']));\n            }\n            else if (formatsType.onlyVector === true &&\n                formatsType.onlyUrl === false) {\n                this.computeFormats(); // reset\n                if (ExportFormat.URL in this.formats$.value) {\n                    const keys = Object.keys(this.formats$.value).filter((key) => key !== 'URL');\n                    this.formats$.next(strEnum(keys));\n                }\n            }\n            else if (formatsType.vectorAndUrl === true &&\n                formatsType.onlyUrl === false &&\n                formatsType.onlyVector === false) {\n                this.computeFormats(); // reset\n                if (!(ExportFormat.URL in this.formats$.value)) {\n                    const keys = Object.keys(this.formats$.value);\n                    keys.push('URL');\n                    this.formats$.next(strEnum(keys));\n                }\n            }\n            else {\n                this.formats$.next([]);\n                this.messageService.alert(this.languageService.translate.instant('igo.geo.export.noFormat.text'), this.languageService.translate.instant('igo.geo.export.noFormat.title'));\n            }\n            return;\n        }\n        if (this.config.getConfig('importExport.formats') !== undefined) {\n            const validatedListFormat = this.validateListFormat(this.config.getConfig('importExport.formats'));\n            this.formats$.next(strEnum(validatedListFormat));\n        }\n        else {\n            this.formats$.next(ExportFormat);\n        }\n    }\n    validateListFormat(formats) {\n        return formats\n            .filter((format) => {\n            if (format.toUpperCase() === ExportFormat.CSVcomma.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.CSVsemicolon.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.GML.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.GPX.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.GeoJSON.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.KML.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.Shapefile.toUpperCase() ||\n                format.toUpperCase() === ExportFormat.URL.toUpperCase()) {\n                return format;\n            }\n        })\n            .map((format) => {\n            if (format.toUpperCase() === ExportFormat.CSVcomma.toUpperCase()) {\n                format = ExportFormat.CSVcomma;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.CSVsemicolon.toUpperCase()) {\n                format = ExportFormat.CSVsemicolon;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.GML.toUpperCase()) {\n                format = ExportFormat.GML;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.GPX.toUpperCase()) {\n                format = ExportFormat.GPX;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.GeoJSON.toUpperCase()) {\n                format = ExportFormat.GeoJSON;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.KML.toUpperCase()) {\n                format = ExportFormat.KML;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.Shapefile.toUpperCase()) {\n                format = ExportFormat.Shapefile;\n                return format;\n            }\n            if (format.toUpperCase() === ExportFormat.URL.toUpperCase()) {\n                format = ExportFormat.URL;\n                return format;\n            }\n        });\n    }\n    modeChanged(mode) {\n        this.selectMode.emit(mode);\n    }\n    onFileExportSuccess() {\n        handleFileExportSuccess(this.messageService, this.languageService);\n    }\n    onImportExportChange(event) {\n        this.selectedMode = event.value;\n    }\n}\nImportExportComponent.ɵfac = function ImportExportComponent_Factory(t) { return new (t || ImportExportComponent)(ɵngcc0.ɵɵdirectiveInject(ImportService), ɵngcc0.ɵɵdirectiveInject(ExportService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.MessageService), ɵngcc0.ɵɵdirectiveInject(StyleListService), ɵngcc0.ɵɵdirectiveInject(StyleService), ɵngcc0.ɵɵdirectiveInject(ɵngcc16.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.ConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.StorageService)); };\nImportExportComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ImportExportComponent, selectors: [[\"igo-import-export\"]], inputs: { selectedMode: \"selectedMode\", exportOptions$: \"exportOptions$\", map: \"map\", store: \"store\" }, outputs: { selectMode: \"selectMode\", exportOptionsChange: \"exportOptionsChange\" }, decls: 14, vars: 17, consts: [[1, \"import-export-toggle\", \"mat-typography\"], [3, \"value\", \"change\"], [3, \"value\"], [\"class\", \"igo-form\", 4, \"ngIf\"], [\"class\", \"mat-typography\", 4, \"ngIf\"], [\"class\", \"igo-form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"igo-form\"], [1, \"igo-input-container\"], [\"matInput\", \"\", \"name\", \"inputProj\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"disabled\", \"click\"], [3, \"shown\"], [\"hidden\", \"\", \"type\", \"file\", 3, \"click\", \"change\"], [\"fileInput\", \"\"], [1, \"mat-typography\"], [1, \"igo-form\", 3, \"formGroup\"], [\"multiple\", \"\", 3, \"value\", \"valueChange\"], [\"class\", \"export-select-trigger\", 4, \"ngIf\"], [3, \"ngClass\", \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"format\"], [4, \"ngIf\"], [\"disabled\", \"true\", 4, \"ngIf\"], [\"class\", \"igo-input-container\", 4, \"ngIf\"], [\"class\", \"export-options mat-typography\", 4, \"ngIf\"], [1, \"export-select-trigger\"], [3, \"ngClass\", \"value\", \"click\"], [\"mat-line\", \"\"], [3, \"labelPosition\", \"click\", \"checked\", \"change\", 4, \"ngIf\"], [3, \"labelPosition\", \"click\", \"checked\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"disabled\", \"true\"], [\"matInput\", \"\", \"formControlName\", \"name\", 3, \"placeholder\"], [\"formControlName\", \"encoding\"], [1, \"export-options\", \"mat-typography\"], [\"formControlName\", \"featureInMapExtent\", 3, \"labelPosition\"]], template: function ImportExportComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"mat-button-toggle-group\", 1);\n        ɵngcc0.ɵɵlistener(\"change\", function ImportExportComponent_Template_mat_button_toggle_group_change_1_listener($event) { return ctx.onImportExportChange($event); });\n        ɵngcc0.ɵɵelementStart(2, \"mat-button-toggle\", 2);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"mat-button-toggle\", 2);\n        ɵngcc0.ɵɵtext(6);\n        ɵngcc0.ɵɵpipe(7, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, ImportExportComponent_form_8_Template, 14, 15, \"form\", 3);\n        ɵngcc0.ɵɵtemplate(9, ImportExportComponent_section_9_Template, 14, 15, \"section\", 4);\n        ɵngcc0.ɵɵtemplate(10, ImportExportComponent_section_10_Template, 4, 3, \"section\", 4);\n        ɵngcc0.ɵɵpipe(11, \"async\");\n        ɵngcc0.ɵɵtemplate(12, ImportExportComponent_form_12_Template, 34, 35, \"form\", 5);\n        ɵngcc0.ɵɵpipe(13, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.selectedMode);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"value\", \"import\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 9, \"igo.geo.importExportForm.importTabTitle\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"value\", \"export\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(7, 11, \"igo.geo.importExportForm.exportTabTitle\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selectedMode === \"import\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selectedMode === \"import\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(11, 13, ctx.exportableLayers$).length === 0 && ctx.selectedMode === \"export\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(13, 15, ctx.exportableLayers$).length > 0 && ctx.selectedMode === \"export\");\n    } }, directives: [ɵngcc23.MatButtonToggleGroup, ɵngcc23.MatButtonToggle, ɵngcc1.NgIf, ɵngcc16.ɵangular_packages_forms_forms_y, ɵngcc16.NgControlStatusGroup, ɵngcc16.NgForm, ɵngcc14.MatFormField, ɵngcc19.MatInput, ɵngcc16.DefaultValueAccessor, ɵngcc16.NgControlStatus, ɵngcc16.NgModel, ɵngcc2.MatButton, ɵngcc9.SpinnerComponent, ɵngcc16.FormGroupDirective, ɵngcc14.MatLabel, ɵngcc15.MatSelect, ɵngcc15.MatSelectTrigger, ɵngcc1.NgForOf, ɵngcc16.FormControlName, ɵngcc11.MatOption, ɵngcc1.NgClass, ɵngcc20.MatSlideToggle], pipes: [ɵngcc5.TranslatePipe, ɵngcc1.AsyncPipe, ɵngcc9.KeyValuePipe], styles: [\"mat-option.igo-export-layer-mat-option[_ngcontent-%COMP%]{height:5em;line-height:1em}.import-export-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:50%}h4[_ngcontent-%COMP%]{padding:0 5px}.igo-form[_ngcontent-%COMP%]{padding:15px 5px}.igo-input-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.igo-form-button-group[_ngcontent-%COMP%]{padding-top:10px;text-align:center}igo-spinner[_ngcontent-%COMP%]{padding-left:10px;position:absolute}.export-options[_ngcontent-%COMP%]{overflow-x:hidden}.export-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px;width:100%}.export-options[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 60px)}.export-select-trigger[_ngcontent-%COMP%]{font-size:.75em;opacity:.75}\"] });\nImportExportComponent.ctorParameters = () => [\n    { type: ImportService },\n    { type: ExportService },\n    { type: LanguageService },\n    { type: MessageService },\n    { type: StyleListService },\n    { type: StyleService },\n    { type: FormBuilder },\n    { type: ConfigService },\n    { type: ChangeDetectorRef },\n    { type: StorageService }\n];\nImportExportComponent.propDecorators = {\n    map: [{ type: Input }],\n    store: [{ type: Input }],\n    selectedMode: [{ type: Input }],\n    selectMode: [{ type: Output }],\n    exportOptions$: [{ type: Input }],\n    exportOptionsChange: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ImportExportComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-import-export',\n                template: \"<div class=\\\"import-export-toggle mat-typography\\\">\\n  <mat-button-toggle-group\\n        [value]=\\\"selectedMode\\\"\\n        (change)=\\\"onImportExportChange($event)\\\">\\n        <mat-button-toggle [value]=\\\"'import'\\\">\\n          {{'igo.geo.importExportForm.importTabTitle' | translate}}\\n        </mat-button-toggle>\\n        <mat-button-toggle [value]=\\\"'export'\\\">\\n          {{'igo.geo.importExportForm.exportTabTitle' | translate}}\\n        </mat-button-toggle>\\n  </mat-button-toggle-group>\\n</div>\\n\\n<form class=\\\"igo-form\\\" *ngIf=\\\"selectedMode === 'import'\\\">\\n  <div class=\\\"igo-input-container\\\">\\n    <mat-form-field>\\n      <input\\n        matInput\\n        placeholder=\\\"{{'igo.geo.importExportForm.importProjPlaceholder' | translate}}\\\"\\n        name=\\\"inputProj\\\"\\n        [(ngModel)]=\\\"inputProj\\\">\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-form-button-group\\\">\\n    <button mat-raised-button type=\\\"button\\\" (click)=\\\"fileInput.click()\\\" [disabled]=\\\"loading$ | async\\\">\\n      {{'igo.geo.importExportForm.importButton' | translate}}\\n    </button>\\n    <igo-spinner [shown]=\\\"loading$ | async\\\"></igo-spinner>\\n    <input\\n      hidden\\n      #fileInput\\n      type=\\\"file\\\"\\n      [style.display]=\\\"'none'\\\"\\n      (click)=\\\"fileInput.value = null\\\"\\n      (change)=\\\"importFiles($event.target.files)\\\">\\n  </div>\\n</form>\\n<section class=\\\"mat-typography\\\" *ngIf=\\\"selectedMode === 'import'\\\">\\n  <h4>{{'igo.geo.importExportForm.importClarifications' | translate}}</h4>\\n  <ul>\\n    <li>{{'igo.geo.importExportForm.importSizeMax' | translate: {size: fileSizeMb} }}</li>\\n    <li>{{'igo.geo.importExportForm.importFormatAuthorized' | translate}}</li>\\n    <li>{{'igo.geo.importExportForm.importShpZip' | translate}}</li>\\n  </ul>\\n</section>\\n\\n<section class=\\\"mat-typography\\\" *ngIf=\\\"(exportableLayers$ | async).length === 0 && selectedMode === 'export'\\\">\\n  <h4>{{'igo.geo.importExportForm.exportNoLayersExportable' | translate}}</h4>\\n</section>\\n\\n<form class=\\\"igo-form\\\" [formGroup]=\\\"form\\\" *ngIf=\\\"(exportableLayers$ | async).length > 0 && selectedMode === 'export'\\\">\\n  <div class=\\\"igo-input-container\\\">\\n    <mat-form-field>\\n      <mat-label>{{'igo.geo.importExportForm.exportLayerPlaceholder' | translate}}</mat-label>\\n      <mat-select \\n        [(value)]=\\\"layers\\\" multiple>\\n        <mat-select-trigger>\\n          {{layers.length ? getLayerTitleById(layers[0]) : ''}}\\n          <span *ngIf=\\\"layers.length > 1\\\" class=\\\"export-select-trigger\\\">\\n            (+{{layers.length - 1}} {{(layers?.length === 2 ? 'igo.geo.importExportForm.other' : 'igo.geo.importExportForm.others') | translate }})\\n          </span>\\n        </mat-select-trigger>        \\n        <mat-option \\n          *ngFor=\\\"let layer of (exportableLayers$ | async)\\\"\\n          [ngClass]=\\\"{'igo-export-layer-mat-option': layerHasSelectedFeatures(layer)}\\\"\\n          [value]=\\\"layer.id\\\"\\n          (click)=\\\"$event.stopPropagation()\\\">\\n          <p mat-line>{{layer.title}}</p>\\n          <p mat-line>\\n            <mat-slide-toggle\\n              *ngIf=\\\"layerHasSelectedFeatures(layer)\\\"\\n                [labelPosition]=\\\"'after'\\\"\\n                (click)=\\\"onlySelectedClick($event,layer.id)\\\"\\n                (checked)=\\\"inLayersIdToExportSelectionOnly(layer)\\\"\\n                (change)=\\\"onlySelected($event,layer.id)\\\">\\n                <small>{{'igo.geo.importExportForm.exportSelectedFeature' | translate}}</small>\\n            </mat-slide-toggle>\\n          </p>\\n        </mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\">\\n    <mat-form-field>\\n      <mat-label>{{'igo.geo.importExportForm.exportFormatPlaceholder' | translate}}</mat-label>\\n      <mat-select\\n        formControlName=\\\"format\\\">\\n        <ng-container *ngIf=\\\"(formats$ | async).length !== 0\\\">\\n          <mat-option *ngFor=\\\"let format of (formats$ | async) | keyvalue\\\" [value]=\\\"format.key\\\">\\n            {{'igo.geo.export.format.' + format.value | translate}}\\n          </mat-option>\\n        </ng-container>\\n        <mat-option *ngIf=\\\"(formats$ | async).length === 0\\\" disabled=\\\"true\\\">\\n          {{'igo.geo.export.noFormat.title' | translate}}\\n        </mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\" *ngIf=\\\"forceNaming && form.value.format !== 'URL'\\\">\\n    <mat-form-field>\\n        <input matInput formControlName=\\\"name\\\" placeholder=\\\"{{'igo.geo.importExportForm.exportFileNamePlaceholder' | translate}}\\\">\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\" *ngIf=\\\"form.value.format === 'CSVcomma' || form.value.format === 'CSVsemicolon'\\\">\\n    <mat-form-field>\\n      <mat-label>{{'igo.geo.importExportForm.encodingPlaceholder' | translate}}</mat-label>\\n      <mat-select\\n        formControlName=\\\"encoding\\\">\\n        <ng-container *ngIf=\\\"(encodings$ | async).length !== 0\\\">\\n          <mat-option *ngFor=\\\"let encoding of (encodings$ | async) | keyvalue\\\" [value]=\\\"encoding.key\\\">\\n            {{'igo.geo.export.encoding.' + encoding.value | translate}}\\n          </mat-option>\\n        </ng-container>\\n      </mat-select>\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"export-options mat-typography\\\" *ngIf=\\\"form.value.format !== 'URL'\\\">\\n    <mat-slide-toggle\\n        formControlName=\\\"featureInMapExtent\\\"\\n        [labelPosition]=\\\"'before'\\\">\\n          {{'igo.geo.importExportForm.exportFeatureInExtent' | translate}}\\n    </mat-slide-toggle>\\n  </div>\\n\\n  <div class=\\\"igo-form-button-group\\\">\\n    <button\\n      mat-raised-button\\n      type=\\\"button\\\"\\n      [disabled]=\\\"!form.valid || (loading$ | async)\\\"\\n      (click)=\\\"handleExportFormSubmit(form.value)\\\">\\n      {{form.value.format !== 'URL'  ? ('igo.geo.importExportForm.exportButton' | translate): (form.value.layers.length > 1  ? ('igo.geo.importExportForm.exportButtonLinks' | translate): ('igo.geo.importExportForm.exportButtonLink' | translate))}}\\n    </button>\\n    <igo-spinner [shown]=\\\"loading$ | async\\\"></igo-spinner>\\n  </div>\\n\\n</form>\\n\",\n                styles: [\"mat-option.igo-export-layer-mat-option{height:5em;line-height:1em}.import-export-toggle{padding:10px;text-align:center}.import-export-toggle mat-button-toggle-group{width:100%}.import-export-toggle mat-button-toggle-group mat-button-toggle{width:50%}h4{padding:0 5px}.igo-form{padding:15px 5px}.igo-input-container mat-form-field{width:100%}.igo-form-button-group{padding-top:10px;text-align:center}igo-spinner{padding-left:10px;position:absolute}.export-options{overflow-x:hidden}.export-options mat-slide-toggle{margin:10px;width:100%}.export-options mat-slide-toggle ::ng-deep .mat-slide-toggle-content{width:calc(100% - 60px)}.export-select-trigger{font-size:.75em;opacity:.75}\"]\n            }]\n    }], function () { return [{ type: ImportService }, { type: ExportService }, { type: ɵngcc7.LanguageService }, { type: ɵngcc7.MessageService }, { type: StyleListService }, { type: StyleService }, { type: ɵngcc16.FormBuilder }, { type: ɵngcc7.ConfigService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc7.StorageService }]; }, { selectedMode: [{\n            type: Input\n        }], selectMode: [{\n            type: Output\n        }], exportOptions$: [{\n            type: Input\n        }], exportOptionsChange: [{\n            type: Output\n        }], map: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }] }); })();\n\nclass DropGeoFileDirective extends DragAndDropDirective {\n    constructor(component, importService, languageService, styleListService, styleService, config, messageService) {\n        super();\n        this.component = component;\n        this.importService = importService;\n        this.languageService = languageService;\n        this.styleListService = styleListService;\n        this.styleService = styleService;\n        this.config = config;\n        this.messageService = messageService;\n        this.filesDropped = new EventEmitter();\n        this.filesInvalid = new EventEmitter();\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngOnInit() {\n        this.filesDropped$$ = this.filesDropped.subscribe((files) => {\n            this.onFilesDropped(files);\n        });\n    }\n    ngOnDestroy() {\n        this.filesDropped$$.unsubscribe();\n    }\n    onDragOver(evt) {\n        super.onDragOver(evt);\n    }\n    onDragLeave(evt) {\n        super.onDragLeave(evt);\n    }\n    onDrop(evt) {\n        super.onDrop(evt);\n    }\n    onFilesDropped(files) {\n        for (const file of files) {\n            this.importService\n                .import(file)\n                .subscribe((features) => this.onFileImportSuccess(file, features), (error) => this.onFileImportError(file, error));\n        }\n    }\n    onFileImportSuccess(file, features) {\n        if (!this.config.getConfig('importWithStyle')) {\n            handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService);\n        }\n        else {\n            handleFileImportSuccess(file, features, this.map, this.messageService, this.languageService, this.styleListService, this.styleService);\n        }\n    }\n    onFileImportError(file, error) {\n        handleFileImportError(file, error, this.messageService, this.languageService, this.config.getConfig('importExport.clientSideFileSizeMaxMb'));\n    }\n}\nDropGeoFileDirective.ɵfac = function DropGeoFileDirective_Factory(t) { return new (t || DropGeoFileDirective)(ɵngcc0.ɵɵdirectiveInject(MapBrowserComponent), ɵngcc0.ɵɵdirectiveInject(ImportService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.LanguageService), ɵngcc0.ɵɵdirectiveInject(StyleListService), ɵngcc0.ɵɵdirectiveInject(StyleService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.ConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.MessageService)); };\nDropGeoFileDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: DropGeoFileDirective, selectors: [[\"\", \"igoDropGeoFile\", \"\"]], hostBindings: function DropGeoFileDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"dragover\", function DropGeoFileDirective_dragover_HostBindingHandler($event) { return ctx.onDragOver($event); })(\"dragleave\", function DropGeoFileDirective_dragleave_HostBindingHandler($event) { return ctx.onDragLeave($event); })(\"drop\", function DropGeoFileDirective_drop_HostBindingHandler($event) { return ctx.onDrop($event); });\n    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });\nDropGeoFileDirective.ctorParameters = () => [\n    { type: MapBrowserComponent },\n    { type: ImportService },\n    { type: LanguageService },\n    { type: StyleListService },\n    { type: StyleService },\n    { type: ConfigService },\n    { type: MessageService }\n];\nDropGeoFileDirective.propDecorators = {\n    onDragOver: [{ type: HostListener, args: ['dragover', ['$event'],] }],\n    onDragLeave: [{ type: HostListener, args: ['dragleave', ['$event'],] }],\n    onDrop: [{ type: HostListener, args: ['drop', ['$event'],] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DropGeoFileDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoDropGeoFile]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent }, { type: ImportService }, { type: ɵngcc7.LanguageService }, { type: StyleListService }, { type: StyleService }, { type: ɵngcc7.ConfigService }, { type: ɵngcc7.MessageService }]; }, { onDragOver: [{\n            type: HostListener,\n            args: ['dragover', ['$event']]\n        }], onDragLeave: [{\n            type: HostListener,\n            args: ['dragleave', ['$event']]\n        }], onDrop: [{\n            type: HostListener,\n            args: ['drop', ['$event']]\n        }] }); })();\n\nlet STYLELIST_OPTIONS = new InjectionToken('styleListOptions');\nfunction provideStyleListOptions(options) {\n    return {\n        provide: STYLELIST_OPTIONS,\n        useValue: options\n    };\n}\nfunction styleListFactory(styleListService, options) {\n    return () => styleListService.load(options);\n}\nfunction provideStyleListLoader() {\n    return {\n        provide: APP_INITIALIZER,\n        useFactory: styleListFactory,\n        multi: true,\n        deps: [StyleListService, STYLELIST_OPTIONS]\n    };\n}\n\nclass IgoStyleListModule {\n    static forRoot() {\n        return {\n            ngModule: IgoStyleListModule,\n            providers: [provideStyleListOptions({}), provideStyleListLoader()]\n        };\n    }\n}\nIgoStyleListModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoStyleListModule });\nIgoStyleListModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoStyleListModule_Factory(t) { return new (t || IgoStyleListModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoStyleListModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nclass IgoImportExportModule {\n    static forRoot() {\n        return {\n            ngModule: IgoImportExportModule\n        };\n    }\n}\nIgoImportExportModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoImportExportModule });\nIgoImportExportModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoImportExportModule_Factory(t) { return new (t || IgoImportExportModule)(); }, imports: [[\n            MatIconModule,\n            MatTooltipModule,\n            FormsModule,\n            ReactiveFormsModule,\n            CommonModule,\n            MatButtonModule,\n            MatButtonToggleModule,\n            MatTabsModule,\n            MatSelectModule,\n            MatOptionModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatSlideToggleModule,\n            IgoLanguageModule,\n            IgoSpinnerModule,\n            IgoKeyValueModule,\n            IgoDrapDropModule,\n            IgoStyleListModule.forRoot()\n        ], IgoStyleListModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoImportExportModule, { declarations: function () { return [ImportExportComponent, DropGeoFileDirective, ExportButtonComponent]; }, imports: function () { return [MatIconModule,\n        MatTooltipModule,\n        FormsModule,\n        ReactiveFormsModule,\n        CommonModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        MatTabsModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatSlideToggleModule,\n        IgoLanguageModule,\n        IgoSpinnerModule,\n        IgoKeyValueModule,\n        IgoDrapDropModule, IgoStyleListModule]; }, exports: function () { return [ImportExportComponent, DropGeoFileDirective, IgoStyleListModule, ExportButtonComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoImportExportModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    MatIconModule,\n                    MatTooltipModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    CommonModule,\n                    MatButtonModule,\n                    MatButtonToggleModule,\n                    MatTabsModule,\n                    MatSelectModule,\n                    MatOptionModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatSlideToggleModule,\n                    IgoLanguageModule,\n                    IgoSpinnerModule,\n                    IgoKeyValueModule,\n                    IgoDrapDropModule,\n                    IgoStyleListModule.forRoot()\n                ],\n                exports: [ImportExportComponent, DropGeoFileDirective, IgoStyleListModule, ExportButtonComponent],\n                declarations: [ImportExportComponent, DropGeoFileDirective, ExportButtonComponent]\n            }]\n    }], null, null); })();\n\nclass IgoMapModule {\n}\nIgoMapModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoMapModule });\nIgoMapModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoMapModule_Factory(t) { return new (t || IgoMapModule)(); }, imports: [[\n            CommonModule,\n            IgoLanguageModule,\n            IgoConfirmDialogModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoMapModule, { declarations: function () { return [MapBrowserComponent, ZoomButtonComponent, GeolocateButtonComponent, RotationButtonComponent, BaseLayersSwitcherComponent, MiniBaseMapComponent, MapOfflineDirective, OfflineButtonComponent, PointerPositionDirective]; }, imports: function () { return [CommonModule,\n        IgoLanguageModule,\n        IgoConfirmDialogModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule]; }, exports: function () { return [MapBrowserComponent, ZoomButtonComponent, GeolocateButtonComponent, RotationButtonComponent, BaseLayersSwitcherComponent, MiniBaseMapComponent, MapOfflineDirective, OfflineButtonComponent, PointerPositionDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoMapModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoLanguageModule,\n                    IgoConfirmDialogModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule\n                ],\n                exports: [\n                    MapBrowserComponent,\n                    ZoomButtonComponent,\n                    GeolocateButtonComponent,\n                    RotationButtonComponent,\n                    BaseLayersSwitcherComponent,\n                    MiniBaseMapComponent,\n                    MapOfflineDirective,\n                    OfflineButtonComponent,\n                    PointerPositionDirective\n                ],\n                declarations: [\n                    MapBrowserComponent,\n                    ZoomButtonComponent,\n                    GeolocateButtonComponent,\n                    RotationButtonComponent,\n                    BaseLayersSwitcherComponent,\n                    MiniBaseMapComponent,\n                    MapOfflineDirective,\n                    OfflineButtonComponent,\n                    PointerPositionDirective\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * Measurer item\n */\nclass MeasurerItemComponent {\n    constructor() {\n        /**\n         * Measure observable\n         * @internal\n         */\n        this.measure$ = new BehaviorSubject(undefined);\n        this._auto = false;\n        /**\n         * Event emitted when the measure unit changes\n         */\n        this.measureUnitChange = new EventEmitter();\n    }\n    /**\n     * Measure\n     */\n    set measure(value) {\n        this.measure$.next(value);\n    }\n    get measure() { return this.measure$.value; }\n    /**\n     * Whther measure units should be automatically determined\n     */\n    set auto(value) { this.toggleAutoUnit(value); }\n    get auto() { return this._auto; }\n    /**\n     * Available measure units for the measure type given\n     * @internal\n     */\n    get measureUnits() {\n        if (this.measureType === MeasureType.Area) {\n            return Object.values(MeasureAreaUnit);\n        }\n        return Object.values(MeasureLengthUnit);\n    }\n    /**\n     * Toggle the auto unit off\n     * @internal\n     */\n    ngOnDestroy() {\n        this.toggleAutoUnit(false);\n    }\n    /**\n     * Set the measure unit\n     * @internal\n     */\n    onMeasureUnitChange(unit) {\n        this.measureUnit = unit;\n        this.measureUnitChange.emit(unit);\n    }\n    toggleAutoUnit(toggle) {\n        if (this.measure$$ !== undefined) {\n            this.measure$$.unsubscribe();\n        }\n        if (toggle === true) {\n            this.measure$$ = this.measure$.subscribe((measure) => {\n                this.computeBestMeasureUnit(measure);\n            });\n        }\n        this._auto = toggle;\n    }\n    computeBestMeasureUnit(measure) {\n        let measureUnit = this.measureUnit;\n        if (this.measureType === MeasureType.Area) {\n            measureUnit = computeBestAreaUnit(measure);\n        }\n        else if (this.measureType === MeasureType.Length) {\n            measureUnit = computeBestLengthUnit(measure);\n        }\n        if (measureUnit !== this.measureUnit) {\n            this.onMeasureUnitChange(measureUnit);\n        }\n    }\n}\nMeasurerItemComponent.ɵfac = function MeasurerItemComponent_Factory(t) { return new (t || MeasurerItemComponent)(); };\nMeasurerItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MeasurerItemComponent, selectors: [[\"igo-measurer-item\"]], inputs: { measure: \"measure\", auto: \"auto\", measureUnit: \"measureUnit\", measureType: \"measureType\", placeholder: \"placeholder\" }, outputs: { measureUnitChange: \"measureUnitChange\" }, decls: 7, vars: 11, consts: [[1, \"measure-field\"], [\"matInput\", \"\", 3, \"readonly\", \"placeholder\", \"value\"], [1, \"unit-field\"], [3, \"value\", \"disabled\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]], template: function MeasurerItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 0);\n        ɵngcc0.ɵɵelement(1, \"input\", 1);\n        ɵngcc0.ɵɵpipe(2, \"measureFormat\");\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"mat-form-field\", 2);\n        ɵngcc0.ɵɵelementStart(5, \"mat-select\", 3);\n        ɵngcc0.ɵɵlistener(\"selectionChange\", function MeasurerItemComponent_Template_mat_select_selectionChange_5_listener($event) { return ctx.onMeasureUnitChange($event.value); });\n        ɵngcc0.ɵɵtemplate(6, MeasurerItemComponent_mat_option_6_Template, 3, 4, \"mat-option\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"readonly\", true)(\"placeholder\", ctx.placeholder)(\"value\", ɵngcc0.ɵɵpipeBind2(2, 6, ɵngcc0.ɵɵpipeBind1(3, 9, ctx.measure$) || 0, ctx.measureUnit));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.measureUnit)(\"disabled\", ctx.auto);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.measureUnits);\n    } }, directives: [ɵngcc14.MatFormField, ɵngcc19.MatInput, ɵngcc15.MatSelect, ɵngcc1.NgForOf, ɵngcc11.MatOption], pipes: [MeasureFormatPipe, ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]{padding:5px 10px}.measure-field[_ngcontent-%COMP%], [_nghost-%COMP%]{display:flex;width:100%}.measure-field[_ngcontent-%COMP%]{flex-flow:column nowrap}.unit-field[_ngcontent-%COMP%]{margin-left:10px;width:110px}\"], changeDetection: 0 });\nMeasurerItemComponent.ctorParameters = () => [];\nMeasurerItemComponent.propDecorators = {\n    measureType: [{ type: Input }],\n    measureUnit: [{ type: Input }],\n    measure: [{ type: Input }],\n    auto: [{ type: Input }],\n    placeholder: [{ type: Input }],\n    measureUnitChange: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MeasurerItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-measurer-item',\n                template: \"<mat-form-field class=\\\"measure-field\\\">\\n  <input\\n    matInput\\n    [readonly]=\\\"true\\\"\\n    [placeholder]=\\\"placeholder\\\"\\n    [value]=\\\"((measure$ | async) || 0) | measureFormat: measureUnit\\\">\\n</mat-form-field>\\n<mat-form-field class=\\\"unit-field\\\">\\n  <mat-select\\n    [value]=\\\"measureUnit\\\"\\n    [disabled]=\\\"auto\\\"\\n    (selectionChange)=\\\"onMeasureUnitChange($event.value)\\\">\\n    <mat-option *ngFor=\\\"let measureUnit of measureUnits\\\" [value]=\\\"measureUnit\\\">\\n      {{('igo.geo.measure.' + measureUnit) | translate}}\\n    </mat-option>\\n  </mat-select>\\n</mat-form-field>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{padding:5px 10px}.measure-field,:host{display:flex;width:100%}.measure-field{flex-flow:column nowrap}.unit-field{margin-left:10px;width:110px}\"]\n            }]\n    }], function () { return []; }, { measureUnitChange: [{\n            type: Output\n        }], measure: [{\n            type: Input\n        }], auto: [{\n            type: Input\n        }], measureUnit: [{\n            type: Input\n        }], measureType: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoMeasurerModule {\n}\nIgoMeasurerModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoMeasurerModule });\nIgoMeasurerModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoMeasurerModule_Factory(t) { return new (t || IgoMeasurerModule)(); }, imports: [[\n            CommonModule,\n            MatButtonModule,\n            MatButtonToggleModule,\n            MatIconModule,\n            MatTooltipModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatSelectModule,\n            MatSlideToggleModule,\n            IgoLanguageModule,\n            IgoEntityTableModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoMeasurerModule, { declarations: function () { return [MeasureFormatPipe, MeasurerItemComponent, MeasurerComponent, MeasurerDialogComponent]; }, imports: function () { return [CommonModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatSelectModule,\n        MatSlideToggleModule,\n        IgoLanguageModule,\n        IgoEntityTableModule]; }, exports: function () { return [MeasureFormatPipe, MeasurerComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoMeasurerModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatButtonModule,\n                    MatButtonToggleModule,\n                    MatIconModule,\n                    MatTooltipModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatSelectModule,\n                    MatSlideToggleModule,\n                    IgoLanguageModule,\n                    IgoEntityTableModule\n                ],\n                declarations: [\n                    MeasureFormatPipe,\n                    MeasurerItemComponent,\n                    MeasurerComponent,\n                    MeasurerDialogComponent\n                ],\n                exports: [\n                    MeasureFormatPipe,\n                    MeasurerComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoMeasureModule {\n}\nIgoMeasureModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoMeasureModule });\nIgoMeasureModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoMeasureModule_Factory(t) { return new (t || IgoMeasureModule)(); }, imports: [[], IgoMeasurerModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoMeasureModule, { exports: [IgoMeasurerModule] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoMeasureModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoMeasurerModule\n                ]\n            }]\n    }], null, null); })();\n\nvar OverlayAction;\n(function (OverlayAction) {\n    OverlayAction[OverlayAction[\"None\"] = 0] = \"None\";\n    OverlayAction[OverlayAction[\"Move\"] = 1] = \"Move\";\n    OverlayAction[OverlayAction[\"Zoom\"] = 2] = \"Zoom\";\n    OverlayAction[OverlayAction[\"ZoomIfOutMapExtent\"] = 3] = \"ZoomIfOutMapExtent\";\n})(OverlayAction || (OverlayAction = {}));\n\nclass OverlayService {\n    constructor() {\n        this.features$ = new BehaviorSubject([\n            [],\n            undefined\n        ]);\n    }\n    setFeatures(features, action = OverlayAction.None) {\n        this.features$.next([features, action]);\n    }\n    clear() {\n        this.features$.next([[], OverlayAction.None]);\n    }\n}\nOverlayService.ɵfac = function OverlayService_Factory(t) { return new (t || OverlayService)(); };\nOverlayService.ɵprov = ɵɵdefineInjectable({ factory: function OverlayService_Factory() { return new OverlayService(); }, token: OverlayService, providedIn: \"root\" });\nOverlayService.ctorParameters = () => [];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OverlayService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\nclass OverlayDirective {\n    constructor(component, overlayService) {\n        this.component = component;\n        this.overlayService = overlayService;\n        this.format = new OlGeoJSON();\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngOnInit() {\n        this.features$$ = this.overlayService.features$.subscribe(res => this.handleFeatures(res[0], res[1]));\n    }\n    ngOnDestroy() {\n        this.features$$.unsubscribe();\n    }\n    handleFeatures(features, action) { }\n}\nOverlayDirective.ɵfac = function OverlayDirective_Factory(t) { return new (t || OverlayDirective)(ɵngcc0.ɵɵdirectiveInject(MapBrowserComponent, 2), ɵngcc0.ɵɵdirectiveInject(OverlayService)); };\nOverlayDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: OverlayDirective, selectors: [[\"\", \"igoOverlay\", \"\"]] });\nOverlayDirective.ctorParameters = () => [\n    { type: MapBrowserComponent, decorators: [{ type: Self }] },\n    { type: OverlayService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OverlayDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoOverlay]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent, decorators: [{\n                type: Self\n            }] }, { type: OverlayService }]; }, null); })();\n\nclass IgoOverlayModule {\n    static forRoot() {\n        return {\n            ngModule: IgoOverlayModule\n        };\n    }\n}\nIgoOverlayModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoOverlayModule });\nIgoOverlayModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoOverlayModule_Factory(t) { return new (t || IgoOverlayModule)(); }, imports: [[]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoOverlayModule, { declarations: [OverlayDirective], exports: [OverlayDirective] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoOverlayModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                exports: [OverlayDirective],\n                declarations: [OverlayDirective]\n            }]\n    }], null, null); })();\n\nconst PrintOutputFormat = strEnum(['Pdf', 'Image']);\nconst PrintPaperFormat = strEnum([\n    'A0',\n    'A1',\n    'A2',\n    'A3',\n    'A4',\n    'A5',\n    'Letter',\n    'Legal'\n]);\nconst PrintOrientation = strEnum(['landscape', 'portrait']);\nconst PrintResolution = strEnum(['72', '96', '150', '300']);\nconst PrintSaveImageFormat = strEnum([\n    'Bmp',\n    'Gif',\n    'Jpeg',\n    'Png',\n    'Tiff'\n]);\n\nclass PrintService {\n    constructor(messageService, activityService, languageService) {\n        this.messageService = messageService;\n        this.activityService = activityService;\n        this.languageService = languageService;\n    }\n    print(map, options) {\n        const status$ = new Subject();\n        const paperFormat = options.paperFormat;\n        const resolution = +options.resolution; // Default is 96\n        const orientation = options.orientation;\n        this.activityId = this.activityService.register();\n        const doc = new jsPDF({\n            orientation,\n            format: paperFormat.toLowerCase()\n        });\n        const dimensions = [\n            doc.internal.pageSize.width,\n            doc.internal.pageSize.height\n        ];\n        const margins = [20, 10, 20, 10];\n        const width = dimensions[0] - margins[3] - margins[1];\n        const height = dimensions[1] - margins[0] - margins[2];\n        const size = [width, height];\n        if (options.title !== undefined) {\n            this.addTitle(doc, options.title, dimensions[0]);\n        }\n        if (options.showProjection === true || options.showScale === true) {\n            this.addProjScale(doc, map, resolution, options.showProjection, options.showScale);\n        }\n        if (options.comment !== '') {\n            this.addComment(doc, options.comment);\n        }\n        this.addMap(doc, map, resolution, size, margins).subscribe((status) => {\n            if (status === SubjectStatus.Done) {\n                if (options.showLegend === true) {\n                    this.addLegend(doc, map, margins, resolution);\n                }\n                else {\n                    this.saveDoc(doc);\n                }\n            }\n            if (status === SubjectStatus.Done || status === SubjectStatus.Error) {\n                this.activityService.unregister(this.activityId);\n                status$.next(SubjectStatus.Done);\n            }\n        });\n        return status$;\n    }\n    /**\n     * Get html code for all layers legend\n     * @param  map IgoMap\n     * @param  width The width that the legend need to be\n     * @return Html code for the legend\n     */\n    getLayersLegendHtml(map, width, resolution) {\n        let html = '';\n        const legends = getLayersLegends(map.layers, map.viewController.getScale(resolution));\n        if (legends.length === 0) {\n            return html;\n        }\n        // Define important style to be sure that all container is convert\n        // to image not just visible part\n        html += '<style media=\"screen\" type=\"text/css\">';\n        html += '.html2canvas-container { width: ' + width;\n        html += 'mm !important; height: 2000px !important; }';\n        html += '</style>';\n        html += '<font size=\"2\" face=\"Courier New\" >';\n        html += '<div style=\"display:inline-block;max-width:' + width + 'mm\">';\n        // For each legend, define an html table cell\n        legends.forEach((legend) => {\n            html +=\n                '<table border=1 style=\"display:inline-block;vertical-align:top\">';\n            html += '<tr><th width=\"170px\">' + legend.title + '</th>';\n            html += '<td><img class=\"printImageLegend\" src=\"' + legend.url + '\">';\n            html += '</td></tr></table>';\n        });\n        html += '</div>';\n        return html;\n    }\n    /**\n     * Get all the legend in a single image\n     * * @param  format - Image format. default value to \"png\"\n     * @return The image of the legend\n     */\n    getLayersLegendImage(map, format = 'png', doZipFile, resolution) {\n        const status$ = new Subject();\n        // Get html code for the legend\n        const width = 200; // milimeters unit, originally define for document pdf\n        let html = this.getLayersLegendHtml(map, width, resolution);\n        const that = this;\n        format = format.toLowerCase();\n        // If no legend show No LEGEND in an image\n        if (html.length === 0) {\n            html = '<font size=\"12\" face=\"Courier New\" >';\n            html += '<div align=\"center\"><b>NO LEGEND</b></div>';\n        }\n        // Create div to contain html code for legend\n        const div = window.document.createElement('div');\n        // Add html code to convert in the new window\n        window.document.body.appendChild(div);\n        div.innerHTML = html;\n        // Define event to execute after all images are loaded to create the canvas\n        setTimeout(() => {\n            html2canvas(div, { useCORS: true })\n                .then(canvas => {\n                let status = SubjectStatus.Done;\n                try {\n                    if (!doZipFile) {\n                        // Save the canvas as file\n                        that.saveCanvasImageAsFile(canvas, 'legendImage', format);\n                    }\n                    else {\n                        // Add the canvas to zip\n                        that.generateCanvaFileToZip(canvas, 'legendImage' + '.' + format);\n                    }\n                    div.parentNode.removeChild(div); // remove temp div (IE)\n                }\n                catch (err) {\n                    status = SubjectStatus.Error;\n                }\n                status$.next(status);\n            })\n                .catch(e => {\n                console.log(e);\n            });\n        }, 500);\n    }\n    addTitle(doc, title, pageWidth) {\n        const pdfResolution = 96;\n        const titleSize = 32;\n        const titleWidth = ((titleSize * 25.4) / pdfResolution) * title.length;\n        let titleMarginLeft;\n        if (titleWidth > pageWidth) {\n            titleMarginLeft = 0;\n        }\n        else {\n            titleMarginLeft = (pageWidth - titleWidth) / 2;\n        }\n        doc.setFont('courier');\n        doc.setFontSize(32);\n        doc.text(title, titleMarginLeft, 15);\n    }\n    /**\n     * Add comment to the document\n     * * @param  doc - pdf document\n     * * @param  comment - Comment to add in the document\n     * * @param  size - Size of the document\n     */\n    addComment(doc, comment) {\n        const commentSize = 16;\n        const commentMarginLeft = 20;\n        const marginBottom = 5;\n        const heightPixels = doc.internal.pageSize.height - marginBottom;\n        doc.setFont('courier');\n        doc.setFontSize(commentSize);\n        doc.text(comment, commentMarginLeft, heightPixels);\n    }\n    /**\n     * Add projection and/or scale to the document\n     * @param  doc - pdf document\n     * @param  map - Map of the app\n     * @param  dpi - DPI resolution of the document\n     * @param  projection - Bool to indicate if projection need to be added\n     * @param  scale - Bool to indicate if scale need to be added\n     */\n    addProjScale(doc, map, dpi, projection, scale) {\n        const translate = this.languageService.translate;\n        const projScaleSize = 16;\n        const projScaleMarginLeft = 20;\n        const marginBottom = 15;\n        const heightPixels = doc.internal.pageSize.height - marginBottom;\n        let textProjScale = '';\n        if (projection === true) {\n            const projText = translate.instant('igo.geo.printForm.projection');\n            textProjScale += projText + ': ' + map.projection;\n        }\n        if (scale === true) {\n            if (projection === true) {\n                textProjScale += '   ';\n            }\n            const scaleText = translate.instant('igo.geo.printForm.scale');\n            const mapScale = map.viewController.getScale(dpi);\n            textProjScale += scaleText + ': ~ 1 / ' + formatScale(mapScale);\n        }\n        doc.setFont('courier');\n        doc.setFontSize(projScaleSize);\n        doc.text(textProjScale, projScaleMarginLeft, heightPixels);\n    }\n    /**\n     * Add the legend to the document\n     * @param  doc - Pdf document where legend will be added\n     * @param  map - Map of the app\n     * @param  margins - Page margins\n     */\n    addLegend(doc, map, margins, resolution) {\n        const that = this;\n        // Get html code for the legend\n        const width = doc.internal.pageSize.width;\n        const html = this.getLayersLegendHtml(map, width, resolution);\n        // If no legend, save the map directly\n        if (html === '') {\n            this.saveDoc(doc);\n            return true;\n        }\n        // Create div to contain html code for legend\n        const div = window.document.createElement('div');\n        html2canvas(div, { useCORS: true })\n            .then(canvas => {\n            let imgData;\n            const position = 10;\n            imgData = canvas.toDataURL('image/png');\n            doc.addPage();\n            const imageSize = this.getImageSizeToFitPdf(doc, canvas, margins);\n            doc.addImage(imgData, 'PNG', 10, position, imageSize[0], imageSize[1]);\n            that.saveDoc(doc);\n            div.parentNode.removeChild(div); // remove temp div (IE style)\n        })\n            .catch(e => {\n            console.log(e);\n        });\n        // Add html code to convert in the new window\n        window.document.body.appendChild(div);\n        div.innerHTML = html;\n    }\n    addCanvas(doc, canvas, margins) {\n        let image;\n        image = canvas.toDataURL('image/jpeg');\n        if (image !== undefined) {\n            const imageSize = this.getImageSizeToFitPdf(doc, canvas, margins);\n            doc.addImage(image, 'JPEG', margins[3], margins[0], imageSize[0], imageSize[1]);\n            doc.rect(margins[3], margins[0], imageSize[0], imageSize[1]);\n        }\n    }\n    // TODO fix printing with image resolution\n    addMap(doc, map, resolution, size, margins) {\n        const status$ = new Subject();\n        const mapSize = map.ol.getSize();\n        const extent = map.ol.getView().calculateExtent(mapSize);\n        const widthPixels = Math.round((size[0] * resolution) / 25.4);\n        const heightPixels = Math.round((size[1] * resolution) / 25.4);\n        let timeout;\n        map.ol.once('rendercomplete', (event) => {\n            const canvas = event.target\n                .getViewport()\n                .getElementsByTagName('canvas')[0];\n            const mapStatus$$ = map.status$.subscribe((mapStatus) => {\n                clearTimeout(timeout);\n                if (mapStatus !== SubjectStatus.Done) {\n                    return;\n                }\n                mapStatus$$.unsubscribe();\n                let status = SubjectStatus.Done;\n                try {\n                    this.addCanvas(doc, canvas, margins);\n                }\n                catch (err) {\n                    status = SubjectStatus.Error;\n                    this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'), 'print');\n                }\n                this.renderMap(map, mapSize, extent);\n                status$.next(status);\n            });\n            // If no loading as started after 200ms, then probably no loading\n            // is required.\n            timeout = window.setTimeout(() => {\n                mapStatus$$.unsubscribe();\n                let status = SubjectStatus.Done;\n                try {\n                    this.addCanvas(doc, canvas, margins);\n                }\n                catch (err) {\n                    status = SubjectStatus.Error;\n                    this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'), 'print');\n                }\n                this.renderMap(map, mapSize, extent);\n                status$.next(status);\n            }, 200);\n        });\n        this.renderMap(map, [widthPixels, heightPixels], extent);\n        return status$;\n    }\n    defineNbFileToProcess(nbFileToProcess) {\n        this.nbFileToProcess = nbFileToProcess;\n    }\n    /**\n     * Download an image of the map with addition of informations\n     * @param  map - Map of the app\n     * @param  format - Image format. default value to \"png\"\n     * @param  projection - Indicate if projection need to be add. Default to false\n     * @param  scale - Indicate if scale need to be add. Default to false\n     * @param  legend - Indicate if the legend of layers need to be download. Default to false\n     * @param  title - Title to add for the map - Default to blank\n     * @param  comment - Comment to add for the map - Default to blank\n     * @param  doZipFile - Indicate if we do a zip with the file\n     * @return Image file of the map with extension format given as parameter\n     */\n    downloadMapImage(map, resolution, format = 'png', projection = false, scale = false, legend = false, title = '', comment = '', doZipFile = true) {\n        const status$ = new Subject();\n        // const resolution = map.ol.getView().getResolution();\n        this.activityId = this.activityService.register();\n        const translate = this.languageService.translate;\n        map.ol.once('rendercomplete', (event) => {\n            format = format.toLowerCase();\n            const oldCanvas = event.target\n                .getViewport()\n                .getElementsByTagName('canvas')[0];\n            const newCanvas = document.createElement('canvas');\n            const newContext = newCanvas.getContext('2d');\n            // Postion in height to set the canvas in new canvas\n            let positionHCanvas = 0;\n            // Position in width to set the Proj/Scale in new canvas\n            let positionWProjScale = 10;\n            // Get height/width of map canvas\n            const width = oldCanvas.width;\n            let height = oldCanvas.height;\n            // Set Font to calculate comment width\n            newContext.font = '20px Calibri';\n            const commentWidth = newContext.measureText(comment).width;\n            // Add height for title if defined\n            height = title !== '' ? height + 30 : height;\n            // Add height for projection or scale (same line) if defined\n            height = projection !== false || scale !== false ? height + 30 : height;\n            const positionHProjScale = height - 10;\n            // Define number of line depending of the comment length\n            const commentNbLine = Math.ceil(commentWidth / width);\n            // Add height for multiline comment if defined\n            height = comment !== '' ? height + commentNbLine * 30 : height;\n            let positionHComment = height - commentNbLine * 20 + 5;\n            // Set the new canvas with the new calculated size\n            newCanvas.width = width;\n            newCanvas.height = height;\n            // Patch Jpeg default black background to white\n            if (format === 'jpeg') {\n                newContext.fillStyle = '#ffffff';\n                newContext.fillRect(0, 0, width, height);\n                newContext.fillStyle = '#000000';\n            }\n            // If a title need to be added to canvas\n            if (title !== '') {\n                // Set font for title\n                newContext.font = '26px Calibri';\n                positionHCanvas = 30;\n                newContext.textAlign = 'center';\n                newContext.fillText(title, width / 2, 20);\n            }\n            // Set font for next section\n            newContext.font = '20px Calibri';\n            // If projection need to be added to canvas\n            if (projection !== false) {\n                const projText = translate.instant('igo.geo.printForm.projection');\n                newContext.textAlign = 'start';\n                newContext.fillText(projText + ': ' + map.projection, positionWProjScale, positionHProjScale);\n                positionWProjScale += 200; // Width position change for scale position\n            }\n            // If scale need to be added to canvas\n            if (scale !== false) {\n                const scaleText = translate.instant('igo.geo.printForm.scale');\n                const mapScale = map.viewController.getScale(resolution);\n                newContext.textAlign = 'start';\n                newContext.fillText(scaleText + ': ~ 1 / ' + formatScale(mapScale), positionWProjScale, positionHProjScale);\n            }\n            // If a comment need to be added to canvas\n            if (comment !== '') {\n                newContext.textAlign = 'center';\n                // If only one line, no need to multiline the comment\n                if (commentNbLine === 1) {\n                    newContext.fillText(comment, width / 2, positionHComment);\n                }\n                else {\n                    // Separate the setenses to be approx. the same length\n                    const nbCommentChar = comment.length;\n                    const CommentLengthToCut = Math.floor(nbCommentChar / commentNbLine);\n                    let commentCurrentLine = '';\n                    let positionFirstCutChar = 0;\n                    let positionLastBlank;\n                    // Loop for the number of line calculated\n                    for (let i = 0; i < commentNbLine; i++) {\n                        // For all line except last\n                        if (commentNbLine - 1 > i) {\n                            // Get comment current line to find the right place tu cut comment\n                            commentCurrentLine = comment.substr(positionFirstCutChar, CommentLengthToCut);\n                            // Cut the setence at blank\n                            positionLastBlank = commentCurrentLine.lastIndexOf(' ');\n                            newContext.fillText(commentCurrentLine.substr(0, positionLastBlank), width / 2, positionHComment);\n                            positionFirstCutChar += positionLastBlank;\n                            // Go to next line for insertion\n                            positionHComment += 20;\n                        }\n                        else {\n                            // Don't cut last part\n                            newContext.fillText(comment.substr(positionFirstCutChar), width / 2, positionHComment);\n                        }\n                    }\n                }\n            }\n            // Add map to new canvas\n            newContext.drawImage(oldCanvas, 0, positionHCanvas);\n            let status = SubjectStatus.Done;\n            try {\n                // Save the canvas as file\n                if (!doZipFile) {\n                    this.saveCanvasImageAsFile(newCanvas, 'map', format);\n                }\n                else if (format.toLowerCase() === 'tiff') {\n                    // Add the canvas to zip\n                    this.generateCanvaFileToZip(newCanvas, 'map' + map.projection.replace(':', '_') + '.' + format);\n                }\n                else {\n                    // Add the canvas to zip\n                    this.generateCanvaFileToZip(newCanvas, 'map' + '.' + format);\n                }\n            }\n            catch (err) {\n                status = SubjectStatus.Error;\n            }\n            status$.next(status);\n            if (format.toLowerCase() === 'tiff') {\n                const tiwContent = this.getWorldFileInformation(map);\n                const blob = new Blob([tiwContent], {\n                    type: 'text/plain;charset=utf-8'\n                });\n                if (!doZipFile) {\n                    // saveAs automaticly replace ':' for '_'\n                    saveAs(blob, 'map' + map.projection + '.tfw');\n                    this.saveFileProcessing();\n                }\n                else {\n                    // Add the canvas to zip\n                    this.addFileToZip('map' + map.projection.replace(':', '_') + '.tfw', blob);\n                }\n            }\n        });\n        map.ol.renderSync();\n    }\n    renderMap(map, size, extent) {\n        map.ol.renderSync();\n    }\n    /**\n     * Save document\n     * @param  doc - Document to save\n     */\n    saveDoc(doc) {\n        doc.save('map.pdf');\n    }\n    /**\n     * Calculate the best Image size to fit in pdf\n     * @param doc - Pdf Document\n     * @param canvas - Canvas of image\n     * @param margins - Page margins\n     */\n    getImageSizeToFitPdf(doc, canvas, margins) {\n        // Define variable to calculate best size to fit in one page\n        const pageHeight = doc.internal.pageSize.getHeight() - (margins[0] + margins[2]);\n        const pageWidth = doc.internal.pageSize.getWidth() - (margins[1] + margins[3]);\n        const canHeight = canvas.height;\n        const canWidth = canvas.width;\n        const heightRatio = canHeight / pageHeight;\n        const widthRatio = canWidth / pageWidth;\n        const maxRatio = heightRatio > widthRatio ? heightRatio : widthRatio;\n        const imgHeigh = maxRatio > 1 ? canHeight / maxRatio : canHeight;\n        const imgWidth = maxRatio > 1 ? canWidth / maxRatio : canWidth;\n        return [imgWidth, imgHeigh];\n    }\n    /**\n     * Get a world file information for tiff\n     * @param  map - Map of the app\n     */\n    getWorldFileInformation(map) {\n        const currentResolution = map.viewController.getResolution();\n        const currentExtent = map.viewController.getExtent(); // Return [minx, miny, maxx, maxy]\n        return [\n            currentResolution,\n            0,\n            0,\n            -currentResolution,\n            currentExtent[0] + currentResolution / 0.5,\n            currentExtent[3] - currentResolution / 0.5\n        ].join('\\n');\n    }\n    /**\n     * Save canvas image as file\n     * @param canvas - Canvas to save\n     * @param name - Name of the file\n     * @param format - file format\n     */\n    saveCanvasImageAsFile(canvas, name, format) {\n        const blobFormat = 'image/' + format;\n        const that = this;\n        try {\n            canvas.toDataURL(); // Just to make the catch trigger wihtout toBlob Error throw not catched\n            // If navigator is Internet Explorer\n            if (navigator.msSaveBlob) {\n                navigator.msSaveBlob(canvas.msToBlob(), name + '.' + format);\n                this.saveFileProcessing();\n            }\n            else {\n                canvas.toBlob(blob => {\n                    // download image\n                    saveAs(blob, name + '.' + format);\n                    that.saveFileProcessing();\n                }, blobFormat);\n            }\n        }\n        catch (err) {\n            this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'), 'print');\n        }\n    }\n    /**\n     * Add file to a zip\n     * @param canvas - File to add to the zip\n     * @param  name -Name of the fileoverview\n     */\n    generateCanvaFileToZip(canvas, name) {\n        const blobFormat = 'image/' + 'jpeg';\n        const that = this;\n        if (!this.hasOwnProperty('zipFile') ||\n            typeof this.zipFile === 'undefined') {\n            this.zipFile = new JSZip();\n        }\n        try {\n            canvas.toDataURL(); // Just to make the catch trigger wihtout toBlob Error throw not catched\n            if (navigator.msSaveBlob) {\n                this.addFileToZip(name, canvas.msToBlob());\n            }\n            else {\n                canvas.toBlob(blob => {\n                    that.addFileToZip(name, blob);\n                }, blobFormat);\n            }\n        }\n        catch (err) {\n            this.messageService.error(this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageBody'), this.languageService.translate.instant('igo.geo.printForm.corsErrorMessageHeader'), 'print');\n        }\n    }\n    /**\n     * Add file to zip, if all file are zipped, download\n     * @param name - Name of the files\n     * @param blob - Contain of file\n     */\n    addFileToZip(name, blob) {\n        // add file to zip\n        this.zipFile.file(name, blob);\n        this.nbFileToProcess--;\n        // If all files are proccessed\n        if (this.nbFileToProcess === 0) {\n            // Download zip file\n            this.getZipFile();\n            // Stop loading\n            this.activityService.unregister(this.activityId);\n        }\n    }\n    saveFileProcessing() {\n        this.nbFileToProcess--;\n        // If all files are proccessed\n        if (this.nbFileToProcess === 0) {\n            // Stop loading\n            this.activityService.unregister(this.activityId);\n        }\n    }\n    /**\n     * Get the zipped file\n     * @return Retun a zip file\n     */\n    getZipFile() {\n        const that = this;\n        this.zipFile.generateAsync({ type: 'blob' }).then(blob => {\n            // 1) generate the zip file\n            saveAs(blob, 'map.zip');\n            delete that.zipFile;\n        });\n    }\n}\nPrintService.ɵfac = function PrintService_Factory(t) { return new (t || PrintService)(ɵngcc0.ɵɵinject(ɵngcc7.MessageService), ɵngcc0.ɵɵinject(ɵngcc7.ActivityService), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService)); };\nPrintService.ɵprov = ɵɵdefineInjectable({ factory: function PrintService_Factory() { return new PrintService(ɵɵinject(MessageService), ɵɵinject(ActivityService), ɵɵinject(LanguageService)); }, token: PrintService, providedIn: \"root\" });\nPrintService.ctorParameters = () => [\n    { type: MessageService },\n    { type: ActivityService },\n    { type: LanguageService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PrintService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc7.MessageService }, { type: ɵngcc7.ActivityService }, { type: ɵngcc7.LanguageService }]; }, null); })();\n\nclass PrintComponent {\n    constructor(printService) {\n        this.printService = printService;\n        this.disabled = false;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get outputFormat() {\n        return this._outputFormat;\n    }\n    set outputFormat(value) {\n        this._outputFormat = value;\n    }\n    get paperFormat() {\n        return this._paperFormat;\n    }\n    set paperFormat(value) {\n        this._paperFormat = value;\n    }\n    get orientation() {\n        return this._orientation;\n    }\n    set orientation(value) {\n        this._orientation = value;\n    }\n    get imageFormat() {\n        return this._imageFormat;\n    }\n    set imageFormat(value) {\n        this._imageFormat = value;\n    }\n    get resolution() {\n        return this._resolution;\n    }\n    set resolution(value) {\n        this._resolution = value;\n    }\n    handleFormSubmit(data) {\n        this.disabled = true;\n        if (data.isPrintService === true) {\n            this.printService\n                .print(this.map, data)\n                .subscribe();\n        }\n        else {\n            let nbFileToProcess = 1;\n            if (data.showLegend) {\n                nbFileToProcess++;\n            }\n            if (data.imageFormat.toLowerCase() === 'tiff') {\n                nbFileToProcess++;\n            }\n            this.printService.defineNbFileToProcess(nbFileToProcess);\n            const resolution = +data.resolution;\n            this.printService.downloadMapImage(this.map, resolution, data.imageFormat, data.showProjection, data.showScale, data.showLegend, data.title, data.comment, data.doZipFile);\n            if (data.showLegend) {\n                this.printService.getLayersLegendImage(this.map, data.imageFormat, data.doZipFile, +resolution);\n            }\n        }\n        this.disabled = false;\n    }\n}\nPrintComponent.ɵfac = function PrintComponent_Factory(t) { return new (t || PrintComponent)(ɵngcc0.ɵɵdirectiveInject(PrintService)); };\nPrintComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PrintComponent, selectors: [[\"igo-print\"]], inputs: { map: \"map\", outputFormat: \"outputFormat\", paperFormat: \"paperFormat\", orientation: \"orientation\", imageFormat: \"imageFormat\", resolution: \"resolution\" }, decls: 1, vars: 6, consts: [[3, \"outputFormat\", \"paperFormat\", \"orientation\", \"imageFormat\", \"resolution\", \"disabled\", \"submit\"]], template: function PrintComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-print-form\", 0);\n        ɵngcc0.ɵɵlistener(\"submit\", function PrintComponent_Template_igo_print_form_submit_0_listener($event) { return ctx.handleFormSubmit($event); });\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"outputFormat\", ctx.outputFormat)(\"paperFormat\", ctx.paperFormat)(\"orientation\", ctx.orientation)(\"imageFormat\", ctx.imageFormat)(\"resolution\", ctx.resolution)(\"disabled\", ctx.disabled);\n    } }, directives: function () { return [PrintFormComponent]; }, encapsulation: 2 });\nPrintComponent.ctorParameters = () => [\n    { type: PrintService }\n];\nPrintComponent.propDecorators = {\n    map: [{ type: Input }],\n    outputFormat: [{ type: Input }],\n    paperFormat: [{ type: Input }],\n    orientation: [{ type: Input }],\n    imageFormat: [{ type: Input }],\n    resolution: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PrintComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-print',\n                template: \"<igo-print-form\\n  [outputFormat]=\\\"outputFormat\\\"\\n  [paperFormat]=\\\"paperFormat\\\"\\n  [orientation]=\\\"orientation\\\"\\n  [imageFormat]=\\\"imageFormat\\\"\\n  [resolution]=\\\"resolution\\\"\\n  [disabled]=\\\"disabled\\\"\\n  (submit)=\\\"handleFormSubmit($event)\\\">\\n</igo-print-form>\\n\"\n            }]\n    }], function () { return [{ type: PrintService }]; }, { map: [{\n            type: Input\n        }], outputFormat: [{\n            type: Input\n        }], paperFormat: [{\n            type: Input\n        }], orientation: [{\n            type: Input\n        }], imageFormat: [{\n            type: Input\n        }], resolution: [{\n            type: Input\n        }] }); })();\n\nclass PrintFormComponent {\n    constructor(formBuilder) {\n        this.formBuilder = formBuilder;\n        this.outputFormats = PrintOutputFormat;\n        this.paperFormats = PrintPaperFormat;\n        this.orientations = PrintOrientation;\n        this.resolutions = PrintResolution;\n        this.imageFormats = PrintSaveImageFormat;\n        this.isPrintService = true;\n        this._disabled = false;\n        this.submit = new EventEmitter();\n        this.form = this.formBuilder.group({\n            title: ['', []],\n            comment: ['', []],\n            outputFormat: ['', [Validators.required]],\n            paperFormat: ['', [Validators.required]],\n            imageFormat: ['', [Validators.required]],\n            resolution: ['', [Validators.required]],\n            orientation: ['', [Validators.required]],\n            showProjection: false,\n            showScale: false,\n            showLegend: false,\n            doZipFile: [{ hidden: this.isPrintService }]\n        });\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = value;\n    }\n    get imageFormat() {\n        return this.imageFormatField.value;\n    }\n    set imageFormat(value) {\n        this.imageFormatField.setValue(value || PrintSaveImageFormat.Jpeg, {\n            onlySelf: true\n        });\n    }\n    get outputFormat() {\n        return this.outputFormatField.value;\n    }\n    set outputFormat(value) {\n        this.outputFormatField.setValue(value || PrintOutputFormat.Pdf, {\n            onlySelf: true\n        });\n    }\n    get paperFormat() {\n        return this.paperFormatField.value;\n    }\n    set paperFormat(value) {\n        this.paperFormatField.setValue(value || PrintPaperFormat.Letter, {\n            onlySelf: true\n        });\n    }\n    get orientation() {\n        return this.orientationField.value;\n    }\n    set orientation(value) {\n        this.orientationField.setValue(value || PrintOrientation.landscape, {\n            onlySelf: true\n        });\n    }\n    get resolution() {\n        return this.resolutionField.value;\n    }\n    set resolution(value) {\n        this.resolutionField.setValue(value || PrintResolution['96'], {\n            onlySelf: true\n        });\n    }\n    get title() {\n        return this.titleField.value;\n    }\n    set title(value) {\n        this.titleField.setValue(value, { onlySelf: true });\n    }\n    get comment() {\n        return this.commentField.value;\n    }\n    set comment(value) {\n        this.commentField.setValue(value, { onlySelf: true });\n    }\n    get showProjection() {\n        return this.showProjectionField.value;\n    }\n    set showProjection(value) {\n        this.showProjectionField.setValue(value, { onlySelf: true });\n    }\n    get showScale() {\n        return this.showScaleField.value;\n    }\n    set showScale(value) {\n        this.showScaleField.setValue(value, { onlySelf: true });\n    }\n    get showLegend() {\n        return this.showLegendField.value;\n    }\n    set showLegend(value) {\n        this.showLegendField.setValue(value, { onlySelf: true });\n    }\n    get doZipFile() {\n        return this.doZipFileField.value;\n    }\n    set doZipFile(value) {\n        this.doZipFileField.setValue(value, { onlySelf: true });\n    }\n    get outputFormatField() {\n        return this.form.controls.outputFormat;\n    }\n    get paperFormatField() {\n        return this.form.controls.paperFormat;\n    }\n    get imageFormatField() {\n        return this.form.controls.imageFormat;\n    }\n    get orientationField() {\n        return this.form.controls.orientation;\n    }\n    get resolutionField() {\n        return this.form.controls.resolution;\n    }\n    get commentField() {\n        return this.form.controls.comment;\n    }\n    get showProjectionField() {\n        return this.form.controls.showProjection;\n    }\n    get showScaleField() {\n        return this.form.controls.showScale;\n    }\n    get showLegendField() {\n        return this.form.controls.showLegend;\n    }\n    get doZipFileField() {\n        return this.form.controls.doZipFile;\n    }\n    get titleField() {\n        return this.form.controls.title;\n    }\n    ngOnInit() {\n        this.doZipFileField.setValue(false);\n    }\n    handleFormSubmit(data, isValid) {\n        this.submitted = true;\n        data.isPrintService = this.isPrintService;\n        if (isValid) {\n            this.submit.emit(data);\n        }\n    }\n    toggleImageSaveProp() {\n        if (this.outputFormatField.value === 'Image') {\n            this.isPrintService = false;\n        }\n        else {\n            this.isPrintService = true;\n        }\n    }\n}\nPrintFormComponent.ɵfac = function PrintFormComponent_Factory(t) { return new (t || PrintFormComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc16.FormBuilder)); };\nPrintFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PrintFormComponent, selectors: [[\"igo-print-form\"]], inputs: { disabled: \"disabled\", imageFormat: \"imageFormat\", outputFormat: \"outputFormat\", paperFormat: \"paperFormat\", orientation: \"orientation\", resolution: \"resolution\", title: \"title\", comment: \"comment\", showProjection: \"showProjection\", showScale: \"showScale\", showLegend: \"showLegend\", doZipFile: \"doZipFile\" }, outputs: { submit: \"submit\" }, decls: 57, vars: 65, consts: [[1, \"igo-form\", 3, \"formGroup\"], [1, \"igo-input-container\"], [\"matInput\", \"\", \"formControlName\", \"title\", 3, \"placeholder\"], [\"matInput\", \"\", \"formControlName\", \"comment\", 3, \"placeholder\"], [1, \"print-slide-toggle-container\", \"mat-typography\"], [\"formControlName\", \"showProjection\", 1, \"print-option\", 3, \"labelPosition\"], [\"formControlName\", \"showScale\", 1, \"print-option\", 3, \"labelPosition\"], [\"formControlName\", \"showLegend\", 1, \"print-option\", 3, \"labelPosition\"], [\"formControlName\", \"doZipFile\", 1, \"print-option\", 3, \"labelPosition\"], [\"formControlName\", \"outputFormat\", 3, \"placeholder\", \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"paperFormat\", 3, \"placeholder\"], [\"formControlName\", \"imageFormat\", 3, \"placeholder\"], [1, \"igo-input-container\", 2, \"display\", \"none\"], [\"formControlName\", \"resolution\", 3, \"placeholder\"], [\"formControlName\", \"orientation\", 3, \"placeholder\"], [1, \"igo-form-button-group\", \"print-button-top-padding\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"disabled\", \"click\"], [3, \"value\"]], template: function PrintFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"form\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"mat-form-field\");\n        ɵngcc0.ɵɵelement(3, \"input\", 2);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(6, \"mat-form-field\");\n        ɵngcc0.ɵɵelement(7, \"input\", 3);\n        ɵngcc0.ɵɵpipe(8, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(9, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(10, \"div\", 4);\n        ɵngcc0.ɵɵelementStart(11, \"mat-slide-toggle\", 5);\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(14, \"mat-slide-toggle\", 6);\n        ɵngcc0.ɵɵtext(15);\n        ɵngcc0.ɵɵpipe(16, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(17, \"mat-slide-toggle\", 7);\n        ɵngcc0.ɵɵtext(18);\n        ɵngcc0.ɵɵpipe(19, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(20, \"mat-slide-toggle\", 8);\n        ɵngcc0.ɵɵtext(21);\n        ɵngcc0.ɵɵpipe(22, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(23, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(24, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(25, \"mat-select\", 9);\n        ɵngcc0.ɵɵlistener(\"selectionChange\", function PrintFormComponent_Template_mat_select_selectionChange_25_listener() { return ctx.toggleImageSaveProp(); });\n        ɵngcc0.ɵɵpipe(26, \"translate\");\n        ɵngcc0.ɵɵtemplate(27, PrintFormComponent_mat_option_27_Template, 2, 2, \"mat-option\", 10);\n        ɵngcc0.ɵɵpipe(28, \"keyvalue\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(29, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(30, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(31, \"mat-select\", 11);\n        ɵngcc0.ɵɵpipe(32, \"translate\");\n        ɵngcc0.ɵɵtemplate(33, PrintFormComponent_mat_option_33_Template, 3, 4, \"mat-option\", 10);\n        ɵngcc0.ɵɵpipe(34, \"keyvalue\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(35, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(36, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(37, \"mat-select\", 12);\n        ɵngcc0.ɵɵpipe(38, \"translate\");\n        ɵngcc0.ɵɵtemplate(39, PrintFormComponent_mat_option_39_Template, 2, 2, \"mat-option\", 10);\n        ɵngcc0.ɵɵpipe(40, \"keyvalue\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(41, \"div\", 13);\n        ɵngcc0.ɵɵelementStart(42, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(43, \"mat-select\", 14);\n        ɵngcc0.ɵɵpipe(44, \"translate\");\n        ɵngcc0.ɵɵtemplate(45, PrintFormComponent_mat_option_45_Template, 2, 2, \"mat-option\", 10);\n        ɵngcc0.ɵɵpipe(46, \"keyvalue\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(47, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(48, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(49, \"mat-select\", 15);\n        ɵngcc0.ɵɵpipe(50, \"translate\");\n        ɵngcc0.ɵɵtemplate(51, PrintFormComponent_mat_option_51_Template, 3, 4, \"mat-option\", 10);\n        ɵngcc0.ɵɵpipe(52, \"keyvalue\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(53, \"div\", 16);\n        ɵngcc0.ɵɵelementStart(54, \"button\", 17);\n        ɵngcc0.ɵɵlistener(\"click\", function PrintFormComponent_Template_button_click_54_listener() { return ctx.handleFormSubmit(ctx.form.value, ctx.form.valid); });\n        ɵngcc0.ɵɵtext(55);\n        ɵngcc0.ɵɵpipe(56, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"formGroup\", ctx.form);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(4, 31, \"igo.geo.printForm.title\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(8, 33, \"igo.geo.printForm.comment\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"labelPosition\", \"before\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 35, \"igo.geo.printForm.showProjection\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"labelPosition\", \"before\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(16, 37, \"igo.geo.printForm.showScale\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"labelPosition\", \"before\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(19, 39, \"igo.geo.printForm.showLegend\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵstyleProp(\"display\", ctx.isPrintService ? \"none\" : \"\");\n        ɵngcc0.ɵɵproperty(\"labelPosition\", \"before\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(22, 41, \"igo.geo.printForm.doZipFile\"), \" \");\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(26, 43, \"igo.geo.printForm.outputFormat\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(28, 45, ctx.outputFormats));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵstyleProp(\"display\", ctx.isPrintService ? \"block\" : \"none\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(32, 47, \"igo.geo.printForm.paperFormat\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(34, 49, ctx.paperFormats));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵstyleProp(\"display\", ctx.isPrintService ? \"none\" : \"block\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(38, 51, \"igo.geo.printForm.imageFormat\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(40, 53, ctx.imageFormats));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(44, 55, \"igo.geo.printForm.resolution\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(46, 57, ctx.resolutions));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵstyleProp(\"display\", ctx.isPrintService ? \"block\" : \"none\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ɵngcc0.ɵɵpipeBind1(50, 59, \"igo.geo.printForm.orientation\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(52, 61, ctx.orientations));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.form.valid || ctx.disabled);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(56, 63, \"igo.geo.printForm.saveBtn\"), \" \");\n    } }, directives: [ɵngcc16.ɵangular_packages_forms_forms_y, ɵngcc16.NgControlStatusGroup, ɵngcc16.FormGroupDirective, ɵngcc14.MatFormField, ɵngcc19.MatInput, ɵngcc16.DefaultValueAccessor, ɵngcc16.NgControlStatus, ɵngcc16.FormControlName, ɵngcc20.MatSlideToggle, ɵngcc15.MatSelect, ɵngcc1.NgForOf, ɵngcc2.MatButton, ɵngcc11.MatOption], pipes: [ɵngcc5.TranslatePipe, ɵngcc9.KeyValuePipe], styles: [\"mat-form-field[_ngcontent-%COMP%]{width:100%}.print-slide-toggle-container[_ngcontent-%COMP%]{overflow-x:hidden}.print-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px;width:100%}.print-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mat-slide-toggle-content{width:calc(100% - 60px)}.print-option[_ngcontent-%COMP%]{display:block;margin-bottom:15px;margin-right:10px}.print-button-top-padding[_ngcontent-%COMP%]{padding-top:25px}.igo-form[_ngcontent-%COMP%]{padding:10px 5px 5px}.igo-form-button-group[_ngcontent-%COMP%]{text-align:center}\"] });\nPrintFormComponent.ctorParameters = () => [\n    { type: FormBuilder }\n];\nPrintFormComponent.propDecorators = {\n    disabled: [{ type: Input }],\n    imageFormat: [{ type: Input }],\n    outputFormat: [{ type: Input }],\n    paperFormat: [{ type: Input }],\n    orientation: [{ type: Input }],\n    resolution: [{ type: Input }],\n    title: [{ type: Input }],\n    comment: [{ type: Input }],\n    showProjection: [{ type: Input }],\n    showScale: [{ type: Input }],\n    showLegend: [{ type: Input }],\n    doZipFile: [{ type: Input }],\n    submit: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PrintFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-print-form',\n                template: \"<form class=\\\"igo-form\\\" [formGroup]=\\\"form\\\">\\n  <div class=\\\"igo-input-container\\\">\\n    <mat-form-field>\\n      <input\\n        matInput\\n        formControlName=\\\"title\\\"\\n        placeholder=\\\"{{'igo.geo.printForm.title' | translate}}\\\">\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\">\\n    <mat-form-field>\\n      <input\\n        matInput\\n        formControlName=\\\"comment\\\"\\n        placeholder=\\\"{{'igo.geo.printForm.comment' | translate}}\\\">\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\">\\n    <div class=\\\"print-slide-toggle-container mat-typography\\\">\\n      <mat-slide-toggle\\n        class=\\\"print-option\\\"\\n        formControlName=\\\"showProjection\\\"\\n        [labelPosition]=\\\"'before'\\\">\\n        {{'igo.geo.printForm.showProjection' | translate}}\\n      </mat-slide-toggle>\\n      <mat-slide-toggle\\n        class=\\\"print-option\\\"\\n        formControlName=\\\"showScale\\\"\\n        [labelPosition]=\\\"'before'\\\">\\n        {{'igo.geo.printForm.showScale' | translate}}\\n      </mat-slide-toggle>\\n      <mat-slide-toggle\\n        class=\\\"print-option\\\"\\n        formControlName=\\\"showLegend\\\"\\n        [labelPosition]=\\\"'before'\\\">\\n        {{'igo.geo.printForm.showLegend' | translate}}\\n      </mat-slide-toggle>\\n      <mat-slide-toggle\\n        class=\\\"print-option\\\"\\n        formControlName=\\\"doZipFile\\\"\\n        [labelPosition]=\\\"'before'\\\"\\n        [style.display]=\\\"isPrintService ? 'none' : ''\\\">\\n        {{'igo.geo.printForm.doZipFile' | translate}}\\n      </mat-slide-toggle>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\">\\n    <mat-form-field>\\n      <mat-select (selectionChange)=\\\"toggleImageSaveProp()\\\"\\n        formControlName=\\\"outputFormat\\\"\\n        placeholder=\\\"{{'igo.geo.printForm.outputFormat' | translate}}\\\">\\n        <mat-option *ngFor=\\\"let outputFormat of outputFormats | keyvalue \\\" [value]=\\\"outputFormat.key\\\">\\n            {{outputFormat.value}}\\n        </mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\" [style.display]=\\\"isPrintService ? 'block' : 'none'\\\">\\n    <mat-form-field>\\n      <mat-select\\n        formControlName=\\\"paperFormat\\\"\\n        placeholder=\\\"{{'igo.geo.printForm.paperFormat' | translate}}\\\">\\n        <mat-option *ngFor=\\\"let paperFormat of paperFormats | keyvalue \\\" [value]=\\\"paperFormat.key\\\">\\n          {{('igo.geo.printForm.paperFormats.' + paperFormat.value) | translate}}\\n        </mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\" [style.display]=\\\"isPrintService ? 'none' : 'block'\\\">\\n    <mat-form-field>\\n      <mat-select\\n        formControlName=\\\"imageFormat\\\"\\n        placeholder=\\\"{{'igo.geo.printForm.imageFormat' | translate}}\\\">\\n        <mat-option *ngFor=\\\"let imageFormat of imageFormats | keyvalue \\\" [value]=\\\"imageFormat.key\\\">\\n          {{imageFormat.value}}\\n        </mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\" style=\\\"display: none;\\\">\\n    <mat-form-field>\\n      <mat-select\\n        formControlName=\\\"resolution\\\"\\n        placeholder=\\\"{{'igo.geo.printForm.resolution' | translate}}\\\">\\n        <mat-option *ngFor=\\\"let resolution of resolutions | keyvalue \\\" [value]=\\\"resolution.key\\\">\\n          {{resolution.value + ' PPI'}}\\n        </mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-input-container\\\" [style.display]=\\\"isPrintService ? 'block' : 'none'\\\">\\n    <mat-form-field>\\n      <mat-select\\n        formControlName=\\\"orientation\\\"\\n        placeholder=\\\"{{'igo.geo.printForm.orientation' | translate}}\\\">\\n        <mat-option *ngFor=\\\"let orientation of orientations | keyvalue \\\" [value]=\\\"orientation.key\\\">\\n          {{('igo.geo.printForm.' + orientation.value) | translate}}\\n        </mat-option>\\n      </mat-select>\\n    </mat-form-field>\\n  </div>\\n\\n  <div class=\\\"igo-form-button-group print-button-top-padding\\\">\\n    <button\\n      mat-raised-button\\n      type=\\\"button\\\"\\n      [disabled]=\\\"!form.valid || disabled\\\"\\n      (click)=\\\"handleFormSubmit(form.value, form.valid)\\\">\\n      {{'igo.geo.printForm.saveBtn' | translate}}\\n    </button>\\n  </div>\\n\\n</form>\\n\",\n                styles: [\"mat-form-field{width:100%}.print-slide-toggle-container{overflow-x:hidden}.print-slide-toggle-container mat-slide-toggle{margin:10px;width:100%}.print-slide-toggle-container mat-slide-toggle ::ng-deep .mat-slide-toggle-content{width:calc(100% - 60px)}.print-option{display:block;margin-bottom:15px;margin-right:10px}.print-button-top-padding{padding-top:25px}.igo-form{padding:10px 5px 5px}.igo-form-button-group{text-align:center}\"]\n            }]\n    }], function () { return [{ type: ɵngcc16.FormBuilder }]; }, { submit: [{\n            type: Output\n        }], disabled: [{\n            type: Input\n        }], imageFormat: [{\n            type: Input\n        }], outputFormat: [{\n            type: Input\n        }], paperFormat: [{\n            type: Input\n        }], orientation: [{\n            type: Input\n        }], resolution: [{\n            type: Input\n        }], title: [{\n            type: Input\n        }], comment: [{\n            type: Input\n        }], showProjection: [{\n            type: Input\n        }], showScale: [{\n            type: Input\n        }], showLegend: [{\n            type: Input\n        }], doZipFile: [{\n            type: Input\n        }] }); })();\n\nclass IgoPrintModule {\n}\nIgoPrintModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoPrintModule });\nIgoPrintModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoPrintModule_Factory(t) { return new (t || IgoPrintModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatButtonModule,\n            MatSelectModule,\n            MatOptionModule,\n            MatInputModule,\n            MatFormFieldModule,\n            MatSlideToggleModule,\n            IgoLanguageModule,\n            IgoKeyValueModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoPrintModule, { declarations: function () { return [PrintComponent, PrintFormComponent]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatButtonModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatInputModule,\n        MatFormFieldModule,\n        MatSlideToggleModule,\n        IgoLanguageModule,\n        IgoKeyValueModule]; }, exports: function () { return [PrintComponent, PrintFormComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoPrintModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatSelectModule,\n                    MatOptionModule,\n                    MatInputModule,\n                    MatFormFieldModule,\n                    MatSlideToggleModule,\n                    IgoLanguageModule,\n                    IgoKeyValueModule\n                ],\n                exports: [PrintComponent, PrintFormComponent],\n                declarations: [PrintComponent, PrintFormComponent]\n            }]\n    }], null, null); })();\n\n/**\n * Map search source factory\n * @ignore\n */\nfunction querySearchSourceFactory(config) {\n    return new QuerySearchSource(config.getConfig(`searchSources.${QuerySearchSource.id}`) || {});\n}\n/**\n * Function that returns a provider for the map search source\n */\nfunction provideQuerySearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: querySearchSourceFactory,\n        multi: true,\n        deps: [ConfigService]\n    };\n}\n\nclass IgoQueryModule {\n    static forRoot() {\n        return {\n            ngModule: IgoQueryModule,\n            providers: [provideQuerySearchSource()]\n        };\n    }\n}\nIgoQueryModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoQueryModule });\nIgoQueryModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoQueryModule_Factory(t) { return new (t || IgoQueryModule)(); }, providers: [QueryService], imports: [[CommonModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoQueryModule, { declarations: function () { return [QueryDirective]; }, imports: function () { return [CommonModule]; }, exports: function () { return [QueryDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoQueryModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule],\n                exports: [QueryDirective],\n                declarations: [QueryDirective],\n                providers: [QueryService]\n            }]\n    }], null, null); })();\n\n/**\n * Service where all available search sources are registered.\n */\nclass SearchSourceService {\n    constructor(sources) {\n        this.sources = sources;\n    }\n    /**\n     * Return available search sources\n     * @returns Search sources\n     */\n    getSources() {\n        return this.sources;\n    }\n    /**\n     * Return enabled search sources\n     * @returns Search sources\n     */\n    getEnabledSources() {\n        return this.getSources().filter((source) => source.enabled === true);\n    }\n    /**\n     * Enable search sources of given type\n     * @param type Search type\n     * @todo It would be better to track the enabled search sources\n     *  without updating their 'enabled' property.\n     */\n    enableSourcesByType(type) {\n        this.getSources().forEach((source) => {\n            if (source.constructor.type === type) {\n                source.enabled = true;\n            }\n            else {\n                source.enabled = false;\n            }\n        });\n    }\n    /**\n     * Set Param from the selected settings\n     * @param source search-source\n     * @param setting settings\n     */\n    setParamFromSetting(source, setting) {\n        source.setParamFromSetting(setting);\n    }\n}\n\n/**\n * Function that checks whether a search source implements TextSearch\n * @param source Search source\n * @returns True if the search source implements TextSearch\n */\nfunction sourceCanSearch(source) {\n    return source.search !== undefined;\n}\n/**\n * Function that checks whether a search source implements ReverseSearch\n * @param source Search source\n * @returns True if the search source implements ReverseSearch\n */\nfunction sourceCanReverseSearch(source) {\n    return source.reverseSearch !== undefined;\n}\n/**\n * Function that checks whether a search source implements ReverseSearch AND is shown in the pointer summary\n * @param source Search source\n * @returns True if the search source implements ReverseSearch AND is shown in the pointer summary\n */\nfunction sourceCanReverseSearchAsSummary(source) {\n    return source.reverseSearch !== undefined && source.showInPointerSummary === true;\n}\n/**\n * Return a search result out of an Feature. This is used to adapt\n * the IGO query module to the new Feature/SearchResult interfaces\n * @param feature feature\n * @param source Search source\n * @returns SearchResult\n */\nfunction featureToSearchResult(feature, source) {\n    feature.sourceId = source.getId();\n    return {\n        source,\n        data: feature,\n        meta: {\n            dataType: FEATURE,\n            id: feature.meta.id,\n            title: feature.meta.title,\n            icon: feature.meta.icon || 'map-marker'\n        }\n    };\n}\n\n/**\n * This service perform researches in all the search sources enabled.\n * It returns Research objects who's 'request' property needs to be\n * subscribed to in order to trigger the research. This services has\n * keeps internal state of the researches it performed\n * and the results they yielded.\n */\nclass SearchService {\n    constructor(searchSourceService, mapService) {\n        this.searchSourceService = searchSourceService;\n        this.mapService = mapService;\n    }\n    /**\n     * Perform a research by text\n     * @param term Any text\n     * @returns Researches\n     */\n    search(term, options = {}) {\n        var _a, _b;\n        if (!this.termIsValid(term)) {\n            return [];\n        }\n        const proj = ((_a = this.mapService.getMap()) === null || _a === void 0 ? void 0 : _a.projection) || 'EPSG:3857';\n        const response = stringToLonLat(term, proj, {\n            forceNA: options.forceNA\n        });\n        if (response.lonLat) {\n            return this.reverseSearch(response.lonLat, { distance: response.radius });\n        }\n        else if (response.message) {\n            console.log(response.message);\n        }\n        options.extent = (_b = this.mapService\n            .getMap()) === null || _b === void 0 ? void 0 : _b.viewController.getExtent('EPSG:4326');\n        let sources;\n        if (options.getEnabledOnly || options.getEnabledOnly === undefined) {\n            sources = this.searchSourceService.getEnabledSources();\n        }\n        else {\n            sources = this.searchSourceService.getSources();\n        }\n        if (options.sourceId) {\n            sources = sources.filter((source) => source.getId() === options.sourceId);\n        }\n        else if (options.searchType) {\n            sources = sources.filter((source) => source.getType() === options.searchType);\n        }\n        sources = sources.filter(sourceCanSearch);\n        return this.searchSources(sources, term, options);\n    }\n    /**\n     * Perform a research by lon/lat\n     * @param lonLat Any lon/lat coordinates\n     * @returns Researches\n     */\n    reverseSearch(lonLat, options, asPointerSummary = false) {\n        const reverseSourceFonction = asPointerSummary\n            ? sourceCanReverseSearchAsSummary\n            : sourceCanReverseSearch;\n        const sources = this.searchSourceService\n            .getEnabledSources()\n            .filter(reverseSourceFonction);\n        return this.reverseSearchSources(sources, lonLat, options || {});\n    }\n    /**\n     * Create a text research out of all given search sources\n     * @param sources Search sources that implement TextSearch\n     * @param term Search term\n     * @returns Observable of Researches\n     */\n    searchSources(sources, term, options) {\n        return sources.map((source) => {\n            return {\n                request: source.search(term, options),\n                reverse: false,\n                source\n            };\n        });\n    }\n    /**\n     * Create a reverse research out of all given search sources\n     * @param sources Search sources that implement ReverseSearch\n     * @param lonLat Any lon/lat coordinates\n     * @returns Observable of Researches\n     */\n    reverseSearchSources(sources, lonLat, options) {\n        return sources.map((source) => {\n            return {\n                request: source.reverseSearch(lonLat, options),\n                reverse: true,\n                source\n            };\n        });\n    }\n    /**\n     * Validate that a search term is valid\n     * @param term Search term\n     * @returns True if the search term is valid\n     */\n    termIsValid(term) {\n        return typeof term === 'string' && term !== '';\n    }\n}\nSearchService.ɵfac = function SearchService_Factory(t) { return new (t || SearchService)(ɵngcc0.ɵɵinject(SearchSourceService), ɵngcc0.ɵɵinject(MapService)); };\nSearchService.ɵprov = ɵɵdefineInjectable({ factory: function SearchService_Factory() { return new SearchService(ɵɵinject(SearchSourceService), ɵɵinject(MapService)); }, token: SearchService, providedIn: \"root\" });\nSearchService.ctorParameters = () => [\n    { type: SearchSourceService },\n    { type: MapService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: SearchSourceService }, { type: MapService }]; }, null); })();\n\nclass DirectionsSource {\n}\n\nclass DirectionsSourceService {\n    constructor(sources) {\n        this.sources = sources;\n    }\n}\nfunction directionsSourceServiceFactory(sources) {\n    return new DirectionsSourceService(sources);\n}\nfunction provideDirectionsSourceService() {\n    return {\n        provide: DirectionsSourceService,\n        useFactory: directionsSourceServiceFactory,\n        deps: [DirectionsSource]\n    };\n}\n\nclass DirectionsService {\n    constructor(directionsSourceService) {\n        this.directionsSourceService = directionsSourceService;\n    }\n    route(coordinates, directionsOptions = {}) {\n        if (coordinates.length === 0) {\n            return;\n        }\n        return this.directionsSourceService.sources\n            .filter((source) => source.enabled)\n            .map((source) => this.routeSource(source, coordinates, directionsOptions));\n    }\n    routeSource(source, coordinates, directionsOptions = {}) {\n        const request = source.route(coordinates, directionsOptions);\n        return request;\n    }\n}\nDirectionsService.ɵfac = function DirectionsService_Factory(t) { return new (t || DirectionsService)(ɵngcc0.ɵɵinject(DirectionsSourceService)); };\nDirectionsService.ɵprov = ɵɵdefineInjectable({ factory: function DirectionsService_Factory() { return new DirectionsService(ɵɵinject(DirectionsSourceService)); }, token: DirectionsService, providedIn: \"root\" });\nDirectionsService.ctorParameters = () => [\n    { type: DirectionsSourceService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DirectionsService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: DirectionsSourceService }]; }, null); })();\n\nclass DirectionsFormService {\n    constructor() { }\n    getStopsCoordinates() {\n        const stopsCoordinates = [];\n        if (this.stops) {\n            this.stops.forEach(stop => {\n                stopsCoordinates.push(stop.stopCoordinates);\n            });\n        }\n        return stopsCoordinates;\n    }\n    setStops(stops) {\n        this.stops = stops;\n    }\n    getStops() {\n        return this.stops;\n    }\n}\nDirectionsFormService.ɵfac = function DirectionsFormService_Factory(t) { return new (t || DirectionsFormService)(); };\nDirectionsFormService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: DirectionsFormService, factory: DirectionsFormService.ɵfac });\nDirectionsFormService.ctorParameters = () => [];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DirectionsFormService, [{\n        type: Injectable\n    }], function () { return []; }, null); })();\n\nclass DirectionsFormComponent {\n    constructor(formBuilder, directionsService, languageService, messageService, searchService, queryService, directionsFormService, changeDetectorRefs, route) {\n        this.formBuilder = formBuilder;\n        this.directionsService = directionsService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.searchService = searchService;\n        this.queryService = queryService;\n        this.directionsFormService = directionsFormService;\n        this.changeDetectorRefs = changeDetectorRefs;\n        this.route = route;\n        this.invalidKeys = ['Control', 'Shift', 'Alt'];\n        this.projection = 'EPSG:4326';\n        this.routesQueries$$ = [];\n        this.stream$ = new Subject();\n        this.activeRoute$ = new BehaviorSubject(undefined);\n        this.focusOnStop = false;\n        this.focusKey = [];\n        this.debounce = 200;\n        this.length = 2;\n        this.stopsStore$ = new BehaviorSubject(undefined);\n        this.submit = new EventEmitter();\n    }\n    get activeRoute() {\n        return this._activeRoute;\n    }\n    set activeRoute(value) {\n        this._activeRoute = value;\n        if (value && this.activeRoute$.getValue() && value.id !== this.activeRoute$.getValue().id) {\n            this.activeRoute$.next(value);\n        }\n    }\n    /**\n     * The stops store\n     */\n    get stopsStore() {\n        return this._stopsStore;\n    }\n    set stopsStore(value) {\n        this._stopsStore = value;\n        this.stopsStore$.next(value);\n    }\n    get routeFromFeatureDetail() {\n        return this._routeFromFeatureDetail;\n    }\n    set routeFromFeatureDetail(value) {\n        this._routeFromFeatureDetail = value;\n    }\n    changeRoute() {\n        this.showRouteGeometry(true);\n    }\n    prevent(event) {\n        event.preventDefault();\n    }\n    ngOnInit() {\n        this.queryService.queryEnabled = false;\n        this.focusOnStop = false;\n        this.browserLanguage = this.languageService.getLanguage();\n        this.stopsForm = this.formBuilder.group({\n            directionsType: 'car',\n            directionsMode: 'driving',\n            stopOrderPriority: true,\n            directionsFixedStartEnd: false,\n            stops: this.formBuilder.array([\n                this.createStop('start'),\n                this.createStop('end')\n            ])\n        });\n        setTimeout(() => {\n            this.initStores();\n            this.initOlInteraction();\n        }, 1);\n        this.subscribeToFormChange();\n        this.routesQueries$$.push(this.stream$\n            .pipe(debounceTime(this.debounce), distinctUntilChanged())\n            .subscribe((term) => this.handleTermChanged(term)));\n        this.stopsStore$.subscribe(() => {\n            if (this.routeFromFeatureDetail === true) {\n                this.directionsFormService.setStops([]);\n                setTimeout(() => {\n                    this.resetForm(false);\n                    for (const feature of this.stopsStore.all()) {\n                        if (feature.properties.id && feature.properties.id.toString().startsWith('directionsStop')) {\n                            this.stopsStore.delete(feature);\n                        }\n                    }\n                    if (this.stopsStore.all().length === 2) {\n                        let i = 0;\n                        const coordinates = [];\n                        for (const feature of this.stopsStore.all()) {\n                            coordinates.push(feature.geometry.coordinates);\n                            this.handleLocationProposals(feature.geometry.coordinates, i);\n                            this.chooseProposal(feature, i);\n                            i++;\n                        }\n                        this.writeStopsToFormService(coordinates);\n                        const routeResponse = this.directionsService.route(coordinates, {});\n                        if (routeResponse) {\n                            routeResponse.map(res => this.routesQueries$$.push(res.subscribe(route => {\n                                this.routesResults = route;\n                                this.activeRoute = this.routesResults[0];\n                                this.showRouteGeometry(true);\n                                this.changeDetectorRefs.detectChanges();\n                            })));\n                        }\n                    }\n                    else if (this.stopsStore.all().length === 1) {\n                        this.handleLocationProposals(this.stopsStore.all()[0].geometry.coordinates, 1);\n                        this.chooseProposal(this.stopsStore.all()[0], 1);\n                        this.writeStopsToFormService(this.stopsStore.all()[0].geometry.coordinates);\n                    }\n                }, 1);\n                this.routeFromFeatureDetail = false;\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.unsubscribeRoutesQueries();\n        this.unlistenSingleClick();\n        this.queryService.queryEnabled = true;\n        this.freezeStores();\n        this.writeStopsToFormService();\n    }\n    initStores() {\n        const loadingStrategy = new FeatureStoreLoadingStrategy({\n            motion: FeatureMotion.None\n        });\n        // STOP STORE\n        const stopsStore = this.stopsStore;\n        const stopsLayer = new VectorLayer({\n            title: 'Directions - stops',\n            zIndex: 911,\n            source: new FeatureDataSource(),\n            showInLayerList: false,\n            exportable: false,\n            browsable: false,\n            style: stopMarker\n        });\n        tryBindStoreLayer(stopsStore, stopsLayer);\n        tryAddLoadingStrategy(stopsStore, loadingStrategy);\n        // ROUTE AND VERTEX STORE\n        const routeStore = this.routeStore;\n        const routeLayer = new VectorLayer({\n            title: 'Directions - route and vertex',\n            zIndex: 910,\n            source: new FeatureDataSource(),\n            showInLayerList: false,\n            exportable: false,\n            browsable: false,\n            style: stopMarker\n        });\n        tryBindStoreLayer(routeStore, routeLayer);\n        tryAddLoadingStrategy(routeStore, loadingStrategy);\n    }\n    initOlInteraction() {\n        let selectedStopFeature;\n        const selectStop = new Select({\n            layers: [this.stopsStore.layer.ol],\n            condition: pointerMove,\n            hitTolerance: 7,\n            filter: feature => {\n                return feature.get('type') === 'stop';\n            }\n        });\n        selectStop.on('select', evt => {\n            selectedStopFeature = evt.target.getFeatures()[0];\n        });\n        const translateStop = new Translate({\n            layers: [this.stopsStore.layer.ol],\n            features: selectedStopFeature\n            // TODO In Openlayers >= 6.x, filter is now allowed.\n        });\n        translateStop.on('translating', evt => {\n            const features = evt.features;\n            if (features.getLength() === 0) {\n                return;\n            }\n            this.executeTranslation(features, false, 50, true);\n        });\n        translateStop.on('translateend', evt => {\n            const features = evt.features;\n            if (features.getLength() === 0) {\n                return;\n            }\n            this.executeTranslation(features, true, 0, false);\n        });\n        const selectedRoute = new Select({\n            layers: [this.routeStore.layer.ol],\n            condition: click,\n            hitTolerance: 7,\n            filter: feature => {\n                return feature.getId() === 'route';\n            }\n        });\n        selectedRoute.on('select', evt => {\n            if (this.focusOnStop === false) {\n                const selectCoordinates = transform(evt.mapBrowserEvent.coordinate, this.map.projection, this.projection);\n                this.addStop();\n                const pos = this.stops.length - 2;\n                this.stops.at(pos).patchValue({ stopCoordinates: selectCoordinates });\n                this.handleLocationProposals(selectCoordinates, pos);\n                this.addStopOverlay(selectCoordinates, pos);\n                selectedRoute.getFeatures().clear();\n            }\n            selectedRoute.getFeatures().clear();\n        });\n        this.map.ol.addInteraction(selectStop);\n        this.map.ol.addInteraction(translateStop);\n        this.map.ol.addInteraction(selectedRoute);\n    }\n    subscribeToFormChange() {\n        this.routesQueries$$.push(this.stopsForm.valueChanges\n            .pipe(debounceTime(this.debounce))\n            .subscribe(val => {\n            this.writeStopsToFormService();\n        }));\n    }\n    /**\n     * Freeze any store, meaning the layer is removed, strategies are deactivated\n     * and some listener removed\n     * @internal\n     */\n    freezeStores() {\n        const stopsStore = this.stopsStore;\n        const routeStore = this.routeStore;\n        this.map.removeLayer(stopsStore.layer);\n        this.map.removeLayer(routeStore.layer);\n        stopsStore.deactivateStrategyOfType(FeatureStoreLoadingStrategy);\n        routeStore.deactivateStrategyOfType(FeatureStoreLoadingStrategy);\n    }\n    executeTranslation(features, reverseSearchProposal = false, delay = 0, overview = false) {\n        this.routeStore.clear();\n        const firstFeature = features.getArray()[0];\n        const translatedID = firstFeature.getId();\n        const translatedPos = translatedID.split('_');\n        let p;\n        switch (translatedPos[1]) {\n            case 'start':\n                p = 0;\n                break;\n            case 'end':\n                p = this.stops.length - 1;\n                break;\n            default:\n                p = Number(translatedPos[1]);\n                break;\n        }\n        const translationCoordinates = transform(firstFeature.getGeometry().getCoordinates(), this.map.projection, this.projection);\n        this.stops\n            .at(p)\n            .patchValue({\n            stopCoordinates: translationCoordinates,\n            stopProposals: []\n        });\n        if (reverseSearchProposal) {\n            this.handleLocationProposals(translationCoordinates, p);\n        }\n        const directionsOptions = {\n            steps: true,\n            overview: false,\n            alternatives: true\n        };\n        if (overview) {\n            directionsOptions.overview = true;\n            directionsOptions.steps = false;\n            directionsOptions.alternatives = false;\n        }\n        if (delay > 0) {\n            if (typeof this.lastTimeoutRequest !== 'undefined') {\n                // cancel timeout when the mouse moves\n                clearTimeout(this.lastTimeoutRequest);\n            }\n            this.lastTimeoutRequest = setTimeout(() => {\n                this.getRoutes(undefined, directionsOptions);\n            }, delay);\n        }\n        else {\n            clearTimeout(this.lastTimeoutRequest);\n            this.getRoutes(undefined, directionsOptions);\n        }\n    }\n    handleLocationProposals(coordinates, stopIndex) {\n        const groupedLocations = [];\n        const roundedCoordinates = [\n            coordinates[0].toFixed(5),\n            coordinates[1].toFixed(5)\n        ];\n        this.stops\n            .at(stopIndex)\n            .patchValue({ stopPoint: roundedCoordinates.join(',') });\n        this.searchService\n            .reverseSearch(coordinates, { zoom: this.map.viewController.getZoom() })\n            .map(res => this.routesQueries$$.push(res.request.pipe(map(f => f)).subscribe(results => {\n            results.forEach(result => {\n                if (groupedLocations.filter(f => f.source === result.source)\n                    .length === 0) {\n                    groupedLocations.push({\n                        source: result.source,\n                        results: results.map(r => r.data)\n                    });\n                }\n            });\n            this.stops\n                .at(stopIndex)\n                .patchValue({ stopProposals: groupedLocations });\n            // TODO: Prefer another source?\n            if (results[0]) {\n                if (results[0].source.getId() === 'icherchereverse') {\n                    // prefer address type.\n                    let resultPos = 0;\n                    for (let i = 0; i < results.length; i++) {\n                        const feature = results[i].data;\n                        if (feature.properties.type === 'adresses') {\n                            resultPos = i;\n                            break;\n                        }\n                    }\n                    this.stops.at(stopIndex).patchValue({\n                        stopPoint: getEntityTitle(results[resultPos])\n                    });\n                    if (results[resultPos].data.geometry.type === 'Point') {\n                        this.stops.at(stopIndex).patchValue({\n                            stopCoordinates: results[resultPos].data.geometry.coordinates\n                        });\n                    }\n                    else {\n                        // Not moving the translated point Only to suggest value into the UI.\n                    }\n                }\n                else if (results[0].source.getId() === 'coordinatesreverse') {\n                    this.stops.at(stopIndex).patchValue({\n                        stopPoint: [\n                            results[0].data.geometry.coordinates[0].toFixed(5),\n                            results[0].data.geometry.coordinates[1].toFixed(5)\n                        ].join(',')\n                    });\n                    if (results[0].data.geometry.type === 'Point') {\n                        this.stops.at(stopIndex).patchValue({\n                            stopCoordinates: results[0].data.geometry.coordinates\n                        });\n                    }\n                    else {\n                        // Not moving the translated point Only to suggest value into the UI.\n                    }\n                }\n            }\n            else {\n                this.stops\n                    .at(stopIndex)\n                    .patchValue({\n                    stopPoint: roundedCoordinates.join(','),\n                    stopProposals: []\n                });\n            }\n            this.changeDetectorRefs.detectChanges();\n        })));\n    }\n    directionsText(index, stopsCounts = this.stops.length) {\n        if (index === 0) {\n            return 'start';\n        }\n        else if (index === stopsCounts - 1 || stopsCounts === 1) {\n            return 'end';\n        }\n        else {\n            return 'intermediate';\n        }\n    }\n    raiseStop(index) {\n        if (index > 0) {\n            this.moveStop(index, -1);\n        }\n    }\n    lowerStop(index) {\n        if (index < this.stops.length - 1) {\n            this.moveStop(index, 1);\n        }\n    }\n    moveStop(index, diff) {\n        const fromValue = this.stops.at(index);\n        this.removeStop(index);\n        this.stops.insert(index + diff, fromValue);\n        this.stops\n            .at(index)\n            .patchValue({ directionsText: this.directionsText(index) });\n        this.stops\n            .at(index + diff)\n            .patchValue({ directionsText: this.directionsText(index + diff) });\n        if (this.stops.at(index).value.stopCoordinates) {\n            this.addStopOverlay(this.stops.at(index).value.stopCoordinates, index);\n        }\n        if (this.stops.at(index + diff).value.stopCoordinates) {\n            this.addStopOverlay(this.stops.at(index + diff).value.stopCoordinates, index + diff);\n        }\n    }\n    get stops() {\n        return this.stopsForm.get('stops');\n    }\n    writeStopsToFormService(stopsArray) {\n        if (stopsArray) {\n            this.directionsFormService.setStops(stopsArray);\n        }\n        else {\n            const stops = [];\n            this.stops.value.forEach(stop => {\n                if (stop.stopCoordinates instanceof Array) {\n                    stops.push(stop);\n                }\n            });\n            this.directionsFormService.setStops(stops);\n        }\n    }\n    addStop() {\n        const insertIndex = this.stops.length - 1;\n        this.stops.insert(insertIndex, this.createStop());\n    }\n    createStop(directionsPos = 'intermediate') {\n        return this.formBuilder.group({\n            stopPoint: [''],\n            stopProposals: [[]],\n            directionsText: directionsPos,\n            stopCoordinates: ['', [Validators.required]]\n        });\n    }\n    removeStop(index) {\n        const id = this.getStopOverlayID(index);\n        this.deleteStoreFeatureByID(this.stopsStore, id);\n        this.stops.removeAt(index);\n        let cnt = 0;\n        this.stops.value.forEach(stop => {\n            this.stops\n                .at(cnt)\n                .patchValue({ directionsText: this.directionsText(cnt) });\n            this.addStopOverlay(this.stops.at(cnt).value.stopCoordinates, cnt);\n            cnt++;\n        });\n    }\n    resetForm(stop) {\n        this.routesResults = undefined;\n        const nbStops = this.stops.length;\n        for (let i = 0; i < nbStops; i++) {\n            this.stops.removeAt(0);\n        }\n        this.stops.insert(0, this.createStop('start'));\n        this.stops.insert(1, this.createStop('end'));\n        if (stop === true) {\n            this.stopsStore.clear();\n        }\n        this.routeStore.clear();\n    }\n    formatStep(step, cnt) {\n        return this.formatInstruction(step.maneuver.type, step.maneuver.modifier, step.name, step.maneuver.bearing_after, cnt, step.maneuver.exit, cnt === this.activeRoute.steps.length - 1);\n    }\n    formatInstruction(type, modifier, route, direction, stepPosition, exit, lastStep = false) {\n        let directiveFr;\n        let directiveEn;\n        let image = 'forward';\n        let cssClass = 'rotate-270';\n        const translatedDirection = this.translateBearing(direction);\n        const translatedModifier = this.translateModifier(modifier);\n        const enPrefix = modifier === 'straight' ? '' : 'on the ';\n        const frPrefix = modifier === 'straight' ? '' : 'à ';\n        let frAggregatedDirection = frPrefix + translatedModifier;\n        let enAggregatedDirection = enPrefix + translatedModifier;\n        if (modifier && modifier.search('slight') >= 0) {\n            enAggregatedDirection = translatedModifier;\n        }\n        if (modifier === 'uturn') {\n            image = 'forward';\n            cssClass = 'rotate-90';\n        }\n        else if (modifier === 'sharp right') {\n            image = 'subdirectory-arrow-right';\n            cssClass = 'icon-flipped';\n        }\n        else if (modifier === 'right') {\n            image = 'subdirectory-arrow-right';\n            cssClass = 'icon-flipped';\n        }\n        else if (modifier === 'slight right') {\n            image = 'forward';\n            cssClass = 'rotate-290';\n        }\n        else if (modifier === 'straight') {\n            image = 'forward';\n        }\n        else if (modifier === 'slight left') {\n            image = 'forward';\n            cssClass = 'rotate-250';\n        }\n        else if (modifier === 'left') {\n            image = 'subdirectory-arrow-left';\n            cssClass = 'icon-flipped';\n        }\n        else if (modifier === 'sharp left') {\n            image = 'subdirectory-arrow-left';\n            cssClass = 'icon-flipped';\n        }\n        if (type === 'turn') {\n            if (modifier === 'straight') {\n                directiveFr = 'Continuer sur ' + route;\n                directiveEn = 'Continue on ' + route;\n            }\n            else if (modifier === 'uturn') {\n                directiveFr = 'Faire demi-tour sur ' + route;\n                directiveEn = 'Make u-turn on ' + route;\n            }\n            else {\n                directiveFr = 'Tourner ' + frAggregatedDirection + ' sur ' + route;\n                directiveEn = 'Turn ' + translatedModifier + ' onto ' + route;\n            }\n        }\n        else if (type === 'new name') {\n            directiveFr =\n                'Continuer en direction ' + translatedDirection + ' sur ' + route;\n            directiveEn = 'Head ' + translatedDirection + ' on ' + route;\n            image = 'compass';\n            cssClass = '';\n        }\n        else if (type === 'depart') {\n            directiveFr =\n                'Aller en direction ' + translatedDirection + ' sur ' + route;\n            directiveEn = 'Head ' + translatedDirection + ' on ' + route;\n            image = 'compass';\n            cssClass = '';\n        }\n        else if (type === 'arrive') {\n            if (lastStep) {\n                let coma = ', ';\n                if (!translatedModifier) {\n                    frAggregatedDirection = '';\n                    enAggregatedDirection = '';\n                    coma = '';\n                }\n                directiveFr = 'Vous êtes arrivé' + coma + frAggregatedDirection;\n                directiveEn =\n                    'You have reached your destination' + coma + enAggregatedDirection;\n            }\n            else {\n                directiveFr = 'Vous atteignez le point intermédiare sur ' + route;\n                directiveEn = 'You have reached the intermediate stop onto ' + route;\n                image = 'map-marker';\n                cssClass = '';\n            }\n        }\n        else if (type === 'merge') {\n            directiveFr = 'Continuer sur ' + route;\n            directiveEn = 'Continue on ' + route;\n            image = 'forward';\n            cssClass = 'rotate-270';\n        }\n        else if (type === 'on ramp') {\n            directiveFr = \"Prendre l'entrée d'autoroute \" + frAggregatedDirection;\n            directiveEn = 'Take the ramp ' + enAggregatedDirection;\n        }\n        else if (type === 'off ramp') {\n            directiveFr = \"Prendre la sortie d'autoroute \" + frAggregatedDirection;\n            directiveEn = 'Take exit ' + enAggregatedDirection;\n        }\n        else if (type === 'fork') {\n            if (modifier.search('left') >= 0) {\n                directiveFr = 'Garder la gauche sur ' + route;\n                directiveEn = 'Merge left onto ' + route;\n            }\n            else if (modifier.search('right') >= 0) {\n                directiveFr = 'Garder la droite sur ' + route;\n                directiveEn = 'Merge right onto ' + route;\n            }\n            else {\n                directiveFr = 'Continuer sur ' + route;\n                directiveEn = 'Continue on ' + route;\n            }\n        }\n        else if (type === 'end of road') {\n            directiveFr =\n                'À la fin de la route, tourner ' + translatedModifier + ' sur ' + route;\n            directiveEn =\n                'At the end of the road, turn ' + translatedModifier + ' onto ' + route;\n        }\n        else if (type === 'use lane') {\n            directiveFr = 'Prendre la voie de ... ';\n            directiveEn = 'Take the lane ...';\n        }\n        else if (type === 'continue' && modifier !== 'uturn') {\n            directiveFr = 'Continuer sur ' + route;\n            directiveEn = 'Continue on ' + route;\n            image = 'forward';\n            cssClass = 'rotate-270';\n        }\n        else if (type === 'roundabout') {\n            directiveFr = 'Au rond-point, prendre la ' + exit;\n            directiveFr += exit === 1 ? 're' : 'e';\n            directiveFr += ' sortie vers ' + route;\n            directiveEn = 'At the roundabout, take the ' + exit;\n            directiveEn += exit === 1 ? 'st' : 'rd';\n            directiveEn += ' exit towards ' + route;\n            image = 'chart-donut';\n            cssClass = '';\n        }\n        else if (type === 'rotary') {\n            directiveFr = 'Rond-point rotary....';\n            directiveEn = 'Roundabout rotary....';\n            image = 'chart-donut';\n            cssClass = '';\n        }\n        else if (type === 'roundabout turn') {\n            directiveFr = 'Rond-point, prendre la ...';\n            directiveEn = 'Roundabout, take the ...';\n            image = 'chart-donut';\n            cssClass = '';\n        }\n        else if (type === 'exit roundabout') {\n            directiveFr = 'Poursuivre vers ' + route;\n            directiveEn = 'Continue to ' + route;\n            image = 'forward';\n            cssClass = 'rotate-270';\n        }\n        else if (type === 'notification') {\n            directiveFr = 'notification ....';\n            directiveEn = 'notification ....';\n        }\n        else if (modifier === 'uturn') {\n            directiveFr =\n                'Faire demi-tour et continuer en direction ' +\n                    translatedDirection +\n                    ' sur ' +\n                    route;\n            directiveEn =\n                'Make u-turn and head ' + translatedDirection + ' on ' + route;\n        }\n        else {\n            directiveFr = '???';\n            directiveEn = '???';\n        }\n        if (lastStep) {\n            image = 'flag-variant';\n            cssClass = '';\n        }\n        if (stepPosition === 0) {\n            image = 'compass';\n            cssClass = '';\n        }\n        let directive;\n        if (this.browserLanguage === 'fr') {\n            directive = directiveFr;\n        }\n        else if (this.browserLanguage === 'en') {\n            directive = directiveEn;\n        }\n        return { instruction: directive, image, cssClass };\n    }\n    translateModifier(modifier) {\n        if (modifier === 'uturn') {\n            return this.languageService.translate.instant('igo.geo.directions.uturn');\n        }\n        else if (modifier === 'sharp right') {\n            return this.languageService.translate.instant('igo.geo.directions.sharp right');\n        }\n        else if (modifier === 'right') {\n            return this.languageService.translate.instant('igo.geo.directions.right');\n        }\n        else if (modifier === 'slight right') {\n            return this.languageService.translate.instant('igo.geo.directions.slight right');\n        }\n        else if (modifier === 'sharp left') {\n            return this.languageService.translate.instant('igo.geo.directions.sharp left');\n        }\n        else if (modifier === 'left') {\n            return this.languageService.translate.instant('igo.geo.directions.left');\n        }\n        else if (modifier === 'slight left') {\n            return this.languageService.translate.instant('igo.geo.directions.slight left');\n        }\n        else if (modifier === 'straight') {\n            return this.languageService.translate.instant('igo.geo.directions.straight');\n        }\n        else {\n            return modifier;\n        }\n    }\n    translateBearing(bearing) {\n        if (bearing >= 337 || bearing < 23) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.n');\n        }\n        else if (bearing < 67) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.ne');\n        }\n        else if (bearing < 113) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.e');\n        }\n        else if (bearing < 157) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.se');\n        }\n        else if (bearing < 203) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.s');\n        }\n        else if (bearing < 247) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.sw');\n        }\n        else if (bearing < 293) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.w');\n        }\n        else if (bearing < 337) {\n            return this.languageService.translate.instant('igo.geo.cardinalPoints.nw');\n        }\n        else {\n            return;\n        }\n    }\n    formatDistance(distance) {\n        if (distance === 0) {\n            return;\n        }\n        if (distance >= 100000) {\n            return Math.round(distance / 1000) + ' km';\n        }\n        if (distance >= 10000) {\n            return Math.round(distance / 100) / 10 + ' km';\n        }\n        if (distance >= 100) {\n            return Math.round(distance / 100) / 10 + ' km';\n        }\n        return distance + ' m';\n    }\n    formatDuration(duration, summary = false) {\n        if (duration >= 3600) {\n            const hour = Math.floor(duration / 3600);\n            const minute = Math.round((duration / 3600 - hour) * 60);\n            if (minute === 60) {\n                return hour + 1 + ' h';\n            }\n            return hour + ' h ' + minute + ' min';\n        }\n        if (duration >= 60) {\n            return Math.round(duration / 60) + ' min';\n        }\n        return duration + ' s';\n    }\n    showSegment(step, zoomToExtent = false) {\n        this.showRouteSegmentGeometry(step.geometry.coordinates, zoomToExtent);\n    }\n    showRouteSegmentGeometry(coordinates, zoomToExtent = false) {\n        const vertexId = 'vertex';\n        const geometry4326 = new LineString(coordinates);\n        const geometryMapProjection = geometry4326.transform('EPSG:4326', this.map.projection);\n        const routeSegmentCoordinates = geometryMapProjection.getCoordinates();\n        const lastPoint = routeSegmentCoordinates[0];\n        const geometry = new Point(lastPoint);\n        const feature = new olFeature({ geometry });\n        const geojsonGeom = new OlGeoJSON().writeGeometryObject(geometry, {\n            featureProjection: this.map.projection,\n            dataProjection: this.map.projection\n        });\n        const previousVertex = this.routeStore.get(vertexId);\n        const previousVertexRevision = previousVertex\n            ? previousVertex.meta.revision\n            : 0;\n        const vertexFeature = {\n            type: FEATURE,\n            geometry: geojsonGeom,\n            projection: this.map.projection,\n            properties: {\n                id: vertexId,\n                type: 'vertex'\n            },\n            meta: {\n                id: vertexId,\n                revision: previousVertexRevision + 1\n            },\n            ol: feature\n        };\n        this.routeStore.update(vertexFeature);\n        if (zoomToExtent) {\n            this.map.viewController.zoomToExtent(feature.getGeometry().getExtent());\n        }\n    }\n    zoomRoute(extent) {\n        if (extent) {\n            this.map.viewController.zoomToExtent(extent);\n        }\n        else {\n            if (this.routeStore.layer) {\n                const routeFeature = this.routeStore.layer.ol\n                    .getSource()\n                    .getFeatures()\n                    .find(f => f.getId() === 'route');\n                if (routeFeature) {\n                    const routeExtent = routeFeature.getGeometry().getExtent();\n                    this.map.viewController.zoomToExtent(routeExtent);\n                }\n            }\n        }\n    }\n    showRouteGeometry(moveToExtent = false) {\n        const geom = this.activeRoute.geometry.coordinates;\n        const geometry4326 = new LineString(geom);\n        const geometryMapProjection = geometry4326.transform('EPSG:4326', this.map.projection);\n        if (moveToExtent) {\n            this.zoomRoute(geometryMapProjection.getExtent());\n        }\n        const geojsonGeom = new OlGeoJSON().writeGeometryObject(geometryMapProjection, {\n            featureProjection: this.map.projection,\n            dataProjection: this.map.projection\n        });\n        const previousRoute = this.routeStore.get('route');\n        const previousRouteRevision = previousRoute\n            ? previousRoute.meta.revision\n            : 0;\n        const routeFeature = {\n            type: FEATURE,\n            geometry: geojsonGeom,\n            projection: this.map.projection,\n            properties: {\n                id: 'route',\n                type: 'route'\n            },\n            meta: {\n                id: 'route',\n                revision: previousRouteRevision + 1\n            },\n            ol: new olFeature({ geometry: geometryMapProjection })\n        };\n        this.routeStore.update(routeFeature);\n    }\n    getRoutes(moveToExtent = true, directionsOptions = {}) {\n        this.deleteStoreFeatureByID(this.routeStore, 'vertex');\n        this.writeStopsToFormService();\n        const coords = this.directionsFormService.getStopsCoordinates();\n        if (coords.length < 2) {\n            return;\n        }\n        const routeResponse = this.directionsService.route(coords, directionsOptions);\n        if (routeResponse) {\n            routeResponse.map(res => this.routesQueries$$.push(res.subscribe(route => {\n                this.routesResults = route;\n                this.activeRoute = this.routesResults[0];\n                this.showRouteGeometry(moveToExtent);\n                this.changeDetectorRefs.detectChanges();\n            })));\n        }\n    }\n    unlistenSingleClick() {\n        if (this.focusKey.length !== 0) {\n            this.focusKey.forEach(key => {\n                unByKey(key);\n            });\n        }\n    }\n    unsubscribeRoutesQueries() {\n        this.routesQueries$$.forEach((sub) => sub.unsubscribe());\n        this.routesQueries$$ = [];\n    }\n    copyLinkToClipboard() {\n        const successful = Clipboard.copy(this.getUrl());\n        if (successful) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.geo.directionsForm.dialog.copyTitle');\n            const msg = translate.instant('igo.geo.directionsForm.dialog.copyMsgLink');\n            this.messageService.success(msg, title);\n        }\n    }\n    copyDirectionsToClipboard() {\n        const indent = '\\t';\n        let activeRouteDirective = this.languageService.translate.instant('igo.geo.directionsForm.instructions') + ':\\n';\n        let wayPointList = '';\n        const summary = this.languageService.translate.instant('igo.geo.directionsForm.summary') +\n            ': \\n' +\n            indent +\n            this.activeRoute.title +\n            '\\n' +\n            indent +\n            this.formatDistance(this.activeRoute.distance) +\n            '\\n' +\n            indent +\n            this.formatDuration(this.activeRoute.duration) +\n            '\\n\\n' +\n            this.languageService.translate.instant('igo.geo.directionsForm.stopsList') +\n            ':\\n';\n        const url = this.languageService.translate.instant('igo.geo.directionsForm.link') +\n            ':\\n' +\n            indent +\n            this.getUrl();\n        let wayPointsCnt = 1;\n        this.stops.value.forEach(stop => {\n            let coord = '';\n            let stopPoint = '';\n            if (stop.stopPoint !== stop.stopCoordinates) {\n                stopPoint = stop.stopPoint;\n                coord =\n                    ' (' +\n                        [stop.stopCoordinates[1], stop.stopCoordinates[0]].join(',') +\n                        ')';\n            }\n            else {\n                stopPoint = [stop.stopCoordinates[1], stop.stopCoordinates[0]].join(',');\n            }\n            wayPointList =\n                wayPointList +\n                    indent +\n                    wayPointsCnt.toLocaleString() +\n                    '. ' +\n                    stopPoint +\n                    coord +\n                    '\\n';\n            wayPointsCnt++;\n        });\n        // Directions\n        let localCnt = 0;\n        this.activeRoute.steps.forEach(step => {\n            const instruction = this.formatStep(step, localCnt).instruction;\n            const distance = this.formatDistance(step.distance) === undefined\n                ? ''\n                : ' (' + this.formatDistance(step.distance) + ')';\n            activeRouteDirective =\n                activeRouteDirective +\n                    indent +\n                    (localCnt + 1).toLocaleString() +\n                    '. ' +\n                    instruction +\n                    distance +\n                    '\\n';\n            localCnt++;\n        });\n        const directionsBody = summary + wayPointList + '\\n' + url + '\\n\\n' + activeRouteDirective;\n        const successful = Clipboard.copy(directionsBody);\n        if (successful) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.geo.directionsForm.dialog.copyTitle');\n            const msg = translate.instant('igo.geo.directionsForm.dialog.copyMsg');\n            this.messageService.success(msg, title);\n        }\n    }\n    handleTermChanged(term) {\n        if (term !== undefined || term.length !== 0) {\n            const searchProposals = [];\n            if (this.search$$) {\n                this.search$$.unsubscribe();\n            }\n            const researches = this.searchService.search(term, { searchType: 'Feature' });\n            researches.map(res => this.search$$ =\n                res.request.subscribe(results => {\n                    results\n                        .filter(r => r.data.geometry)\n                        .forEach(element => {\n                        if (searchProposals.filter(r => r.source === element.source)\n                            .length === 0) {\n                            searchProposals.push({\n                                source: element.source,\n                                meta: element.meta,\n                                results: results.map(r => r.data)\n                            });\n                        }\n                    });\n                    if (this.stops) {\n                        this.stops\n                            .at(this.currentStopIndex)\n                            .patchValue({ stopProposals: searchProposals });\n                    }\n                    this.changeDetectorRefs.detectChanges();\n                }));\n        }\n    }\n    setTerm(term) {\n        this.term = term;\n        if (this.keyIsValid(term) &&\n            (term.length >= this.length || term.length === 0)) {\n            this.stream$.next(term);\n        }\n    }\n    keyIsValid(key) {\n        return this.invalidKeys.find(value => value === key) === undefined;\n    }\n    keyup(i, event) {\n        const term = event.target.value;\n        this.setTerm(term);\n        this.map.ol.un('singleclick', evt => {\n            this.handleMapClick(evt, i);\n        });\n    }\n    clearStop(stopIndex) {\n        // this.deleteDirectionsOverlaybyID(this.getStopOverlayID(stopIndex));\n        const id = this.getStopOverlayID(stopIndex);\n        this.deleteStoreFeatureByID(this.stopsStore, id);\n        this.routeStore.clear();\n        const stopsCounts = this.stops.length;\n        this.stops.removeAt(stopIndex);\n        this.stops.insert(stopIndex, this.createStop(this.directionsText(stopIndex, stopsCounts)));\n        this.routesResults = undefined;\n        this.getRoutes(false);\n    }\n    chooseProposal(proposal, i) {\n        if (proposal !== undefined) {\n            let geomCoord;\n            const geom = proposal.geometry;\n            if (geom.type === 'Point') {\n                geomCoord = geom.coordinates;\n            }\n            else if (geom.type.search('Line') >= 0) {\n                const line = new OlGeoJSON().readFeatures(geom);\n                geomCoord = line[0].getGeometry().getFirstCoordinate();\n                geomCoord = [geomCoord[0], geomCoord[1]];\n            }\n            else if (geom.type.search('Polygon') >= 0) {\n                const poly = new OlGeoJSON().readFeatures(geom);\n                geomCoord = poly[0].getGeometry().getType() === 'Polygon' ?\n                    geomCoord = poly[0].getGeometry().getInteriorPoint().getFirstCoordinate() :\n                    geomCoord = poly[0].getGeometry().getInteriorPoints().getFirstCoordinate();\n                geomCoord = [geomCoord[0], geomCoord[1]];\n            }\n            if (geomCoord !== undefined) {\n                this.stops.at(i).patchValue({ stopCoordinates: geomCoord });\n                this.addStopOverlay(geomCoord, i);\n                /*  const proposalExtent = this.directionsStopsOverlayDataSource.ol\n                  .getFeatureById(this.getStopOverlayID(i))\n                  .getGeometry()\n                  .getExtent();*/\n                /* if (!olextent.intersects(proposalExtent, this.map.viewController.getExtent())) {\n                  this.map.viewController.moveToExtent(proposalExtent);\n                }*/\n            }\n        }\n    }\n    focus(i) {\n        this.unlistenSingleClick();\n        this.currentStopIndex = i;\n        this.focusOnStop = true;\n        this.focusKey.push(this.map.ol.once('singleclick', evt => {\n            this.handleMapClick(evt, i);\n        }));\n    }\n    handleMapClick(event, indexPos) {\n        if (this.currentStopIndex === undefined) {\n            this.addStop();\n            indexPos = this.stops.length - 2;\n            this.stops.at(indexPos).value.stopProposals = [];\n        }\n        else {\n            indexPos = this.currentStopIndex;\n        }\n        const clickCoordinates = transform(event.coordinate, this.map.projection, this.projection);\n        this.stops\n            .at(indexPos)\n            .patchValue({ stopProposals: [], stopCoordinates: clickCoordinates });\n        this.handleLocationProposals(clickCoordinates, indexPos);\n        this.addStopOverlay(clickCoordinates, indexPos);\n        setTimeout(() => {\n            this.focusOnStop = false; // prevent to trigger map click and Select on routes at same time.\n        }, 500);\n    }\n    geolocateStop(index) {\n        moveToOlFeatures(this.map, [this.map.geolocationFeature], FeatureMotion.Move);\n        const geolocateCoordinates = this.map.viewController.getCenter(this.projection);\n        this.stops.at(index).patchValue({ stopCoordinates: geolocateCoordinates });\n        this.addStopOverlay(geolocateCoordinates, index);\n        this.handleLocationProposals(geolocateCoordinates, index);\n    }\n    addStopOverlay(coordinates, index) {\n        const directionsText = this.directionsText(index);\n        let stopColor;\n        let stopText;\n        if (directionsText === 'start') {\n            stopColor = 'green';\n            stopText = this.languageService.translate.instant('igo.geo.directionsForm.start');\n        }\n        else if (directionsText === 'end') {\n            stopColor = 'red';\n            stopText = this.languageService.translate.instant('igo.geo.directionsForm.end');\n        }\n        else {\n            stopColor = 'yellow';\n            stopText =\n                this.languageService.translate.instant('igo.geo.directionsForm.intermediate') +\n                    ' #' +\n                    index;\n        }\n        const geometry = new Point(transform(coordinates, this.projection, this.map.projection));\n        const stopID = this.getStopOverlayID(index);\n        const geojsonGeom = new OlGeoJSON().writeGeometryObject(geometry, {\n            featureProjection: this.map.projection,\n            dataProjection: this.map.projection\n        });\n        const previousStop = this.stopsStore.get(stopID);\n        const previousStopRevision = previousStop ? previousStop.meta.revision : 0;\n        const stopFeature = {\n            type: FEATURE,\n            geometry: geojsonGeom,\n            projection: this.map.projection,\n            properties: {\n                id: stopID,\n                type: 'stop',\n                stopText,\n                stopColor,\n                stopOpacity: 1\n            },\n            meta: {\n                id: stopID,\n                revision: previousStopRevision + 1\n            },\n            ol: new olFeature({ geometry })\n        };\n        this.stopsStore.update(stopFeature);\n        this.getRoutes();\n    }\n    getStopOverlayID(index) {\n        let txt;\n        if (index === 0) {\n            txt = 'start';\n        }\n        else if (index === this.stops.length - 1) {\n            txt = 'end';\n        }\n        else {\n            txt = index;\n        }\n        return 'directionsStop_' + txt;\n    }\n    deleteStoreFeatureByID(store, id) {\n        const entity = store.get(id);\n        if (entity) {\n            store.delete(entity);\n        }\n    }\n    getUrl() {\n        if (!this.route) {\n            return;\n        }\n        const directionsKey = this.route.options.directionsCoordKey;\n        const stopsCoordinates = [];\n        if (this.directionsFormService &&\n            this.directionsFormService.getStopsCoordinates() &&\n            this.directionsFormService.getStopsCoordinates().length !== 0) {\n            this.directionsFormService.getStopsCoordinates().forEach(coord => {\n                stopsCoordinates.push(roundCoordTo(coord, 6));\n            });\n        }\n        let directionsUrl = '';\n        if (stopsCoordinates.length >= 2) {\n            directionsUrl = `${directionsKey}=${stopsCoordinates.join(';')}`;\n        }\n        return `${location.origin}${location.pathname}?tool=directions&sidenav=1&${directionsUrl}`;\n    }\n}\nDirectionsFormComponent.ɵfac = function DirectionsFormComponent_Factory(t) { return new (t || DirectionsFormComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc16.FormBuilder), ɵngcc0.ɵɵdirectiveInject(DirectionsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.MessageService), ɵngcc0.ɵɵdirectiveInject(SearchService), ɵngcc0.ɵɵdirectiveInject(QueryService), ɵngcc0.ɵɵdirectiveInject(DirectionsFormService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.RouteService, 8)); };\nDirectionsFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: DirectionsFormComponent, selectors: [[\"igo-directions-form\"]], inputs: { debounce: \"debounce\", length: \"length\", stopsStore: \"stopsStore\", routeFromFeatureDetail: \"routeFromFeatureDetail\", term: \"term\", map: \"map\", routeStore: \"routeStore\" }, outputs: { submit: \"submit\" }, decls: 11, vars: 10, consts: [[1, \"igo-form\", 3, \"formGroup\"], [\"formArrayName\", \"stops\", 4, \"ngFor\", \"ngForOf\"], [1, \"igo-form-button-group\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"map-marker-plus\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"igo-input-container\", 4, \"ngIf\"], [\"formArrayName\", \"stops\"], [\"inputs\", \"\"], [3, \"formGroupName\"], [1, \"igo-input-container\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"matInput\", \"\", \"formControlName\", \"stopPoint\", 3, \"matAutocomplete\", \"placeholder\", \"focus\", \"keyup\", \"keydown.enter\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"color\", \"warn\", \"aria-label\", \"Clear\", 3, \"click\", 4, \"ngIf\"], [\"auto\", \"matAutocomplete\"], [3, \"label\", \"disabled\", 4, \"ngFor\", \"ngForOf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"crosshairs-gps\"], [\"mat-button\", \"\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", \"color\", \"warn\", \"aria-label\", \"Clear\", 3, \"click\"], [\"svgIcon\", \"close\"], [3, \"label\", \"disabled\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\", \"onSelectionChange\", 4, \"ngFor\", \"ngForOf\"], [\"matTooltipShowDelay\", \"500\", 3, \"value\", \"matTooltip\", \"onSelectionChange\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"], [\"svgIcon\", \"magnify-plus-outline\"], [\"svgIcon\", \"file-restore\"], [\"svgIcon\", \"content-copy\"], [\"svgIcon\", \"link\"], [4, \"ngIf\"], [\"mat-header\", \"\", 1, \"igo-route-title\", \"mat-typography\"], [\"mat-subheader\", \"\"], [\"class\", \"igo-steps\", \"igoListItem\", \"\", 3, \"mouseenter\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"placeholder\", \"ngModel\", \"selectionChange\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"igoListItem\", \"\", 1, \"igo-steps\", 3, \"mouseenter\", \"click\"], [\"mat-list-icon\", \"\", 3, \"ngClass\", \"svgIcon\"], [\"mat-line\", \"\"], [\"mat-line\", \"\", 1, \"right\"]], template: function DirectionsFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"form\", 0);\n        ɵngcc0.ɵɵtemplate(1, DirectionsFormComponent_div_1_Template, 13, 9, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"button\", 3);\n        ɵngcc0.ɵɵlistener(\"click\", function DirectionsFormComponent_Template_button_click_3_listener() { return ctx.addStop(); });\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelement(5, \"mat-icon\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(6, DirectionsFormComponent_button_6_Template, 3, 3, \"button\", 5);\n        ɵngcc0.ɵɵtemplate(7, DirectionsFormComponent_button_7_Template, 3, 3, \"button\", 6);\n        ɵngcc0.ɵɵtemplate(8, DirectionsFormComponent_button_8_Template, 3, 3, \"button\", 5);\n        ɵngcc0.ɵɵtemplate(9, DirectionsFormComponent_button_9_Template, 3, 3, \"button\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(10, DirectionsFormComponent_div_10_Template, 10, 6, \"div\", 7);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"formGroup\", ctx.stopsForm);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.stops.controls);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(4, 8, \"igo.geo.directionsForm.addStop\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.routesResults);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.routesResults);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.routesResults);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.routesResults);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.routesResults);\n    } }, directives: [ɵngcc16.ɵangular_packages_forms_forms_y, ɵngcc16.NgControlStatusGroup, ɵngcc16.FormGroupDirective, ɵngcc1.NgForOf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon, ɵngcc1.NgIf, ɵngcc16.FormArrayName, ɵngcc10.MatListItem, ɵngcc16.FormGroupName, ɵngcc14.MatFormField, ɵngcc19.MatInput, ɵngcc16.DefaultValueAccessor, ɵngcc26.MatAutocompleteTrigger, ɵngcc16.NgControlStatus, ɵngcc16.FormControlName, ɵngcc26.MatAutocomplete, ɵngcc14.MatSuffix, ɵngcc11.MatOptgroup, ɵngcc11.MatOption, ɵngcc10.MatList, ɵngcc10.MatListSubheaderCssMatStyler, ɵngcc21.MatDivider, ɵngcc15.MatSelect, ɵngcc16.NgModel, ɵngcc10.MatListIconCssMatStyler, ɵngcc1.NgClass, ɵngcc11.MatLine], pipes: [ɵngcc5.TranslatePipe], styles: [\"mat-form-field[_ngcontent-%COMP%]{width:85%}.igo-route-title[_ngcontent-%COMP%]{font-weight:700}.igo-steps[_ngcontent-%COMP%]{cursor:pointer}form[_ngcontent-%COMP%]{padding:10px}h3[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}.mat-line[_ngcontent-%COMP%]{white-space:pre-wrap!important;word-wrap:break-word!important}.mat-line.right[_ngcontent-%COMP%]{text-align:right}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-45[_ngcontent-%COMP%]{transform:rotate(45deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(270deg)}.rotate-250[_ngcontent-%COMP%]{transform:rotate(250deg)}.rotate-290[_ngcontent-%COMP%]{transform:rotate(290deg)}.icon-flipped[_ngcontent-%COMP%]{transform:scaleY(-1)}\"] });\nDirectionsFormComponent.ctorParameters = () => [\n    { type: FormBuilder },\n    { type: DirectionsService },\n    { type: LanguageService },\n    { type: MessageService },\n    { type: SearchService },\n    { type: QueryService },\n    { type: DirectionsFormService },\n    { type: ChangeDetectorRef },\n    { type: RouteService, decorators: [{ type: Optional }] }\n];\nDirectionsFormComponent.propDecorators = {\n    term: [{ type: Input }],\n    debounce: [{ type: Input }],\n    length: [{ type: Input }],\n    map: [{ type: Input }],\n    stopsStore: [{ type: Input }],\n    routeFromFeatureDetail: [{ type: Input }],\n    routeStore: [{ type: Input }],\n    submit: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DirectionsFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-directions-form',\n                template: \"<form class=\\\"igo-form\\\" [formGroup]=\\\"stopsForm\\\">\\n  <!-- <div class=\\\"igo-form-button-group\\\">\\n\\n  </div> -->\\n  <div #inputs formArrayName=\\\"stops\\\" *ngFor=\\\"let stop of stops.controls; let i = index;\\\">\\n    <mat-list-item [formGroupName]=\\\"i\\\">\\n\\n      <div class=\\\"igo-input-container\\\">\\n        <button *ngIf=\\\"map.geolocationFeature\\\" mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"'igo.geo.directionsForm.geolocate' | translate\\\" (click)=\\\"geolocateStop(i)\\\">\\n          <mat-icon svgIcon=\\\"crosshairs-gps\\\"></mat-icon>\\n        </button>\\n        <mat-form-field>\\n          <input matInput formControlName=\\\"stopPoint\\\" [matAutocomplete]=\\\"auto\\\"\\n            placeholder=\\\"{{'igo.geo.directionsForm.'+stop.value.directionsText | translate}}\\\" (focus)=\\\"focus(i)\\\"\\n            (keyup)=\\\"keyup(i,$event)\\\" (keydown.enter)=\\\"prevent($event)\\\">\\n            <button \\n              mat-button \\n              *ngIf=\\\"stop.value && (stop.value.stopPoint.length > 0 || stop.value.stopProposals.length > 0)\\\"\\n              matSuffix mat-icon-button color=\\\"warn\\\" aria-label=\\\"Clear\\\" (click)=\\\"clearStop(i)\\\">\\n              <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n            </button>\\n\\n          <mat-autocomplete #auto=\\\"matAutocomplete\\\">\\n            <mat-optgroup *ngFor=\\\"let source of stop.value.stopProposals\\\" [label]=\\\"source.source.title\\\" [disabled]=\\\"source.source.enabled === false\\\">\\n              <mat-option *ngFor=\\\"let result of source.results\\\" [value]=\\\"result.meta ? result.meta.title : ''\\\" \\n              (onSelectionChange)=\\\"chooseProposal(result,i)\\\"\\n              matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"result.meta ? result.meta.title : ''\\\">\\n                {{ result.meta ? result.meta.title : '' }}\\n              </mat-option>\\n            </mat-optgroup>\\n          </mat-autocomplete>\\n        </mat-form-field>\\n\\n        <!-- <div class=\\\"igo-form-button-group\\\"> -->\\n\\n\\n          <!-- <button *ngIf=\\\"i !== 0\\\" mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"'igo.geo.directionsForm.raiseStop' | translate\\\"\\n            [color]=\\\"color\\\" (click)=\\\"raiseStop(i)\\\">\\n            <mat-icon svgIcon=\\\"arrow-upward\\\"></mat-icon>\\n          </button>\\n          <button *ngIf=\\\"i !== stops.length - 1\\\" mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"'igo.geo.directionsForm.lowerStop' | translate\\\"\\n            [color]=\\\"color\\\" (click)=\\\"lowerStop(i)\\\">\\n            <mat-icon svgIcon=\\\"arrow-downward\\\"></mat-icon>\\n          </button> -->\\n\\n          <button *ngIf=\\\"i !== 0 && i !== stops.length - 1\\\" mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"'igo.geo.directionsForm.removeStop' | translate\\\"\\n            color=\\\"warn\\\" (click)=\\\"removeStop(i)\\\">\\n            <mat-icon svgIcon=\\\"delete\\\"></mat-icon>\\n          </button>\\n        <!-- </div> -->\\n      </div>\\n\\n    </mat-list-item>\\n  </div>\\n  <div class=\\\"igo-form-button-group\\\">\\n    <button mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.geo.directionsForm.addStop' | translate\\\" color=\\\"primary\\\" (click)=\\\"addStop()\\\">\\n      <mat-icon svgIcon=\\\"map-marker-plus\\\"></mat-icon>\\n    </button>\\n    <button mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.geo.directionsForm.zoomRoute' | translate\\\" *ngIf=\\\"routesResults\\\" color=\\\"primary\\\"\\n      (click)=\\\"zoomRoute()\\\">\\n      <mat-icon svgIcon=\\\"magnify-plus-outline\\\"></mat-icon>\\n    </button>\\n    <button mat-icon-button tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.geo.directionsForm.resetDirectionsBtn' | translate\\\" *ngIf=\\\"routesResults\\\" color=\\\"warn\\\"\\n      (click)=\\\"resetForm(true)\\\">\\n      <mat-icon svgIcon=\\\"file-restore\\\"></mat-icon>\\n    </button>\\n    <button mat-icon-button *ngIf=\\\"routesResults\\\" tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.geo.directionsForm.copy' | translate\\\" color=\\\"primary\\\" (click)=\\\"copyDirectionsToClipboard()\\\">\\n      <mat-icon svgIcon=\\\"content-copy\\\"></mat-icon>\\n    </button>\\n    <button mat-icon-button *ngIf=\\\"routesResults\\\" tooltip-position=\\\"below\\\" matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.geo.directionsForm.link' | translate\\\" color=\\\"primary\\\" (click)=\\\"copyLinkToClipboard()\\\">\\n      <mat-icon svgIcon=\\\"link\\\"></mat-icon>\\n    </button>\\n  </div>\\n\\n</form>\\n\\n<div class=\\\"igo-input-container\\\" *ngIf=\\\"routesResults\\\">\\n  <mat-form-field *ngIf=\\\"routesResults && routesResults.length > 1\\\">\\n    <mat-select placeholder=\\\"{{'igo.geo.directionsForm.drivingOptions' | translate}}\\\" (selectionChange)=\\\"changeRoute()\\\" [(ngModel)]=\\\"activeRoute\\\">\\n      <mat-option *ngFor=\\\"let pathDirections of routesResults; let cnt = index;\\\" [value]=\\\"pathDirections\\\">\\n        Option {{cnt + 1}} : {{formatDistance(pathDirections.distance)}} ({{formatDuration(pathDirections.duration)}})\\n      </mat-option>\\n    </mat-select>\\n  </mat-form-field>\\n\\n  <mat-divider *ngIf=\\\"routesResults && routesResults.length === 0\\\"></mat-divider>\\n\\n  <mat-list>\\n    <h2 mat-header class=\\\"igo-route-title mat-typography\\\">{{activeRoute.title}}</h2>\\n    <h2 mat-subheader>{{formatDistance(activeRoute.distance)}}, {{formatDuration(activeRoute.duration)}}</h2>\\n\\n    <mat-list-item \\n    class=\\\"igo-steps\\\"\\n    (mouseenter)=\\\"showSegment(step)\\\" \\n    (click)=\\\"showSegment(step,true)\\\" \\n    *ngFor=\\\"let step of activeRoute.steps; let cnt = index;\\\"\\n      igoListItem>\\n      <mat-icon [ngClass]=\\\"formatStep(step,cnt).cssClass\\\" mat-list-icon svgIcon=\\\"{{formatStep(step,cnt).image}}\\\"></mat-icon>\\n\\n      <h4 mat-line>{{cnt +1}}. {{formatStep(step,cnt).instruction}}</h4>\\n      <h4 mat-line class=\\\"right\\\">{{formatDistance(step.distance)}}</h4>\\n    </mat-list-item>\\n\\n    <mat-divider></mat-divider>\\n\\n  </mat-list>\\n\\n</div>\\n\",\n                styles: [\"mat-form-field{width:85%}.igo-route-title{font-weight:700}.igo-steps{cursor:pointer}form{padding:10px}h3{padding-left:5px;padding-right:5px}.mat-line{white-space:pre-wrap!important;word-wrap:break-word!important}.mat-line.right{text-align:right}.rotate-90{transform:rotate(90deg)}.rotate-45{transform:rotate(45deg)}.rotate-270{transform:rotate(270deg)}.rotate-250{transform:rotate(250deg)}.rotate-290{transform:rotate(290deg)}.icon-flipped{transform:scaleY(-1)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc16.FormBuilder }, { type: DirectionsService }, { type: ɵngcc7.LanguageService }, { type: ɵngcc7.MessageService }, { type: SearchService }, { type: QueryService }, { type: DirectionsFormService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc7.RouteService, decorators: [{\n                type: Optional\n            }] }]; }, { debounce: [{\n            type: Input\n        }], length: [{\n            type: Input\n        }], submit: [{\n            type: Output\n        }], stopsStore: [{\n            type: Input\n        }], routeFromFeatureDetail: [{\n            type: Input\n        }], term: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], routeStore: [{\n            type: Input\n        }] }); })();\n/**\n * Create a style for the directions stops and routes\n * @param feature OlFeature\n * @returns OL style function\n */\nfunction stopMarker(feature, resolution) {\n    const vertexStyle = [\n        new Style({\n            geometry: feature.getGeometry(),\n            image: new Circle({\n                radius: 7,\n                stroke: new Stroke({ color: '#FF0000', width: 3 })\n            })\n        })\n    ];\n    const stopStyle = new Style({\n        image: new Icon({\n            src: './assets/igo2/geo/icons/place_' +\n                feature.get('stopColor') +\n                '_36px.svg',\n            opacity: feature.get('stopOpacity'),\n            imgSize: [36, 36],\n            anchor: [0.5, 0.92]\n        }),\n        text: new Text({\n            text: feature.get('stopText'),\n            font: '12px Calibri,sans-serif',\n            fill: new Fill({ color: '#000' }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            overflow: true\n        })\n    });\n    const routeStyle = [\n        new Style({\n            stroke: new Stroke({ color: '#6a7982', width: 10, opacity: 0.75 })\n        }),\n        new Style({\n            stroke: new Stroke({ color: '#4fa9dd', width: 6, opacity: 0.75 })\n        })\n    ];\n    if (feature.get('type') === 'stop') {\n        return stopStyle;\n    }\n    if (feature.get('type') === 'vertex') {\n        return vertexStyle;\n    }\n    if (feature.get('type') === 'route') {\n        return routeStyle;\n    }\n}\n\nclass DirectionsFormBindingDirective {\n    constructor(component, directionsFormService, directionsService, changeDetectorRefs, route) {\n        this.component = component;\n        this.directionsFormService = directionsFormService;\n        this.directionsService = directionsService;\n        this.changeDetectorRefs = changeDetectorRefs;\n        this.route = route;\n    }\n    ngAfterViewInit() {\n        const storedStops = this.directionsFormService.getStops();\n        if (!storedStops && this.route && this.route.options.directionsCoordKey) {\n            this.route.queryParams.subscribe((params) => {\n                const directionsParams = params[this.route.options.directionsCoordKey];\n                const stopsCoordinatesFromURL = [];\n                if (directionsParams) {\n                    const directionsCoordUrl = directionsParams.split(';');\n                    if (directionsCoordUrl.length >= 2) {\n                        let cnt = 0;\n                        directionsCoordUrl.forEach((coord) => {\n                            if (cnt !== 0 && cnt !== directionsCoordUrl.length - 1) {\n                                this.component.stops.insert(cnt, this.component.createStop());\n                            }\n                            const stopCoordinatesFromURL = JSON.parse('[' + coord + ']');\n                            this.component.stops\n                                .at(cnt)\n                                .patchValue({ stopCoordinates: stopCoordinatesFromURL });\n                            this.component.stops\n                                .at(cnt)\n                                .patchValue({ stopPoint: stopCoordinatesFromURL });\n                            this.component.handleLocationProposals(stopCoordinatesFromURL, cnt);\n                            stopsCoordinatesFromURL.push(stopCoordinatesFromURL);\n                            this.component.addStopOverlay(stopCoordinatesFromURL, cnt);\n                            cnt++;\n                        });\n                        this.component.activeRoute$.subscribe((activeRoute) => {\n                            this.getRoutes(activeRoute);\n                        });\n                    }\n                }\n            });\n        }\n        else if (storedStops) {\n            for (let i = 0; i < storedStops.length; i++) {\n                if (i !== 0 && i !== storedStops.length - 1) {\n                    this.component.stops.insert(i, this.component.createStop());\n                }\n                if (storedStops[i].stopCoordinates instanceof Array) {\n                    this.component.addStopOverlay(storedStops[i].stopCoordinates, i);\n                    this.component.stops.at(i).patchValue(storedStops[i]);\n                }\n            }\n            this.component.getRoutes();\n        }\n        this.component.writeStopsToFormService();\n    }\n    getRoutes(activeRoute) {\n        this.component.deleteStoreFeatureByID(this.component.routeStore, 'vertex');\n        this.component.writeStopsToFormService();\n        const coords = this.directionsFormService.getStopsCoordinates();\n        if (coords.length < 2) {\n            return;\n        }\n        const routeResponse = this.directionsService.route(coords, {});\n        if (routeResponse) {\n            routeResponse.map((res) => this.component.routesQueries$$.push(res.subscribe((route) => {\n                this.component.routesResults = route;\n                if (!activeRoute) {\n                    this.component.activeRoute = route[0];\n                    return;\n                }\n                this.component.showRouteGeometry(true);\n                this.changeDetectorRefs.detectChanges();\n            })));\n        }\n    }\n}\nDirectionsFormBindingDirective.ɵfac = function DirectionsFormBindingDirective_Factory(t) { return new (t || DirectionsFormBindingDirective)(ɵngcc0.ɵɵdirectiveInject(DirectionsFormComponent, 2), ɵngcc0.ɵɵdirectiveInject(DirectionsFormService), ɵngcc0.ɵɵdirectiveInject(DirectionsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.RouteService, 8)); };\nDirectionsFormBindingDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: DirectionsFormBindingDirective, selectors: [[\"\", \"igoDirectionsFormBinding\", \"\"]] });\nDirectionsFormBindingDirective.ctorParameters = () => [\n    { type: DirectionsFormComponent, decorators: [{ type: Self }] },\n    { type: DirectionsFormService },\n    { type: DirectionsService },\n    { type: ChangeDetectorRef },\n    { type: RouteService, decorators: [{ type: Optional }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DirectionsFormBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoDirectionsFormBinding]'\n            }]\n    }], function () { return [{ type: DirectionsFormComponent, decorators: [{\n                type: Self\n            }] }, { type: DirectionsFormService }, { type: DirectionsService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc7.RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nclass IgoDirectionsModule {\n    static forRoot() {\n        return {\n            ngModule: IgoDirectionsModule\n        };\n    }\n}\nIgoDirectionsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoDirectionsModule });\nIgoDirectionsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoDirectionsModule_Factory(t) { return new (t || IgoDirectionsModule)(); }, providers: [DirectionsFormService, provideDirectionsSourceService()], imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatButtonModule,\n            MatListModule,\n            MatDividerModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatOptionModule,\n            MatSelectModule,\n            MatTooltipModule,\n            MatAutocompleteModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoDirectionsModule, { declarations: function () { return [DirectionsFormComponent, DirectionsFormBindingDirective]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatButtonModule,\n        MatListModule,\n        MatDividerModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatOptionModule,\n        MatSelectModule,\n        MatTooltipModule,\n        MatAutocompleteModule,\n        IgoLanguageModule]; }, exports: function () { return [DirectionsFormComponent, DirectionsFormBindingDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoDirectionsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatListModule,\n                    MatDividerModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatOptionModule,\n                    MatSelectModule,\n                    MatTooltipModule,\n                    MatAutocompleteModule,\n                    IgoLanguageModule\n                ],\n                exports: [DirectionsFormComponent, DirectionsFormBindingDirective],\n                declarations: [DirectionsFormComponent, DirectionsFormBindingDirective],\n                providers: [DirectionsFormService, provideDirectionsSourceService()]\n            }]\n    }], null, null); })();\n\n/**\n * Search source factory\n * @ignore\n */\nfunction searchSourceServiceFactory(sources) {\n    return new SearchSourceService(sources);\n}\n/**\n * Function that returns a provider for the SearchSource service\n */\nfunction provideSearchSourceService() {\n    return {\n        provide: SearchSourceService,\n        useFactory: searchSourceServiceFactory,\n        deps: [SearchSource]\n    };\n}\n\nclass IChercheSearchResultFormatter {\n    constructor(languageService) {\n        this.languageService = languageService;\n    }\n    formatResult(result) {\n        return result;\n    }\n}\nIChercheSearchResultFormatter.ɵfac = function IChercheSearchResultFormatter_Factory(t) { return new (t || IChercheSearchResultFormatter)(ɵngcc0.ɵɵinject(ɵngcc7.LanguageService)); };\nIChercheSearchResultFormatter.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: IChercheSearchResultFormatter, factory: IChercheSearchResultFormatter.ɵfac });\nIChercheSearchResultFormatter.ctorParameters = () => [\n    { type: LanguageService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IChercheSearchResultFormatter, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc7.LanguageService }]; }, null); })();\n/**\n * ICherche search source\n */\nclass IChercheSearchSource extends SearchSource {\n    constructor(http, languageService, options, formatter, injector) {\n        super(options);\n        this.http = http;\n        this.languageService = languageService;\n        this.formatter = formatter;\n        this.title$ = new BehaviorSubject('');\n        this.hashtagsLieuxToKeep = [];\n        this.languageService.translate\n            .get(this.options.title)\n            .subscribe((title) => this.title$.next(title));\n        const authService = injector.get(AuthService);\n        if (this.settings.length) {\n            if (!authService) {\n                this.getAllowedTypes();\n            }\n            else {\n                authService.authenticate$.subscribe(() => {\n                    this.getAllowedTypes();\n                });\n            }\n        }\n    }\n    get title() {\n        return this.title$.getValue();\n    }\n    getId() {\n        return IChercheSearchSource.id;\n    }\n    getType() {\n        return IChercheSearchSource.type;\n    }\n    getDefaultOptions() {\n        const limit = this.options.params && this.options.params.limit\n            ? Number(this.options.params.limit)\n            : undefined;\n        const ecmax = this.options.params && this.options.params.ecmax\n            ? Number(this.options.params.ecmax)\n            : undefined;\n        const types = this.options.params && this.options.params.type\n            ? this.options.params.type.replace(/\\s/g, '').toLowerCase().split(',')\n            : [\n                'adresses',\n                'codes-postaux',\n                'routes',\n                'municipalites',\n                'mrc',\n                'regadmin',\n                'lieux'\n            ];\n        return {\n            title: 'igo.geo.search.icherche.name',\n            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/icherche',\n            settings: [\n                {\n                    type: 'checkbox',\n                    title: 'results type',\n                    name: 'type',\n                    values: [\n                        {\n                            title: 'igo.geo.search.icherche.type.address',\n                            value: 'adresses',\n                            enabled: types.indexOf('adresses') !== -1,\n                            hashtags: ['adresse']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.oldAddress',\n                            value: 'anciennes-adresses',\n                            enabled: types.indexOf('anciennes-adresses') !== -1,\n                            hashtags: ['anciennes-adresses']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.postalCode',\n                            value: 'codes-postaux',\n                            enabled: types.indexOf('codes-postaux') !== -1,\n                            hashtags: ['code-postal']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.road',\n                            value: 'routes',\n                            enabled: types.indexOf('routes') !== -1,\n                            hashtags: ['route']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.city',\n                            value: 'municipalites',\n                            enabled: types.indexOf('municipalites') !== -1,\n                            hashtags: ['municipalité', 'mun']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.oldCity',\n                            value: 'anciennes-municipalites',\n                            enabled: types.indexOf('anciennes-municipalites') !== -1,\n                            hashtags: ['anciennes-municipalites']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.mrc',\n                            value: 'mrc',\n                            enabled: types.indexOf('mrc') !== -1,\n                            hashtags: ['mrc']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.regadmin',\n                            value: 'regadmin',\n                            enabled: types.indexOf('regadmin') !== -1,\n                            hashtags: ['région-administrative', 'regadmin']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.entreprise',\n                            value: 'entreprises',\n                            enabled: types.indexOf('entreprises') !== -1,\n                            available: false,\n                            hashtags: ['entreprise']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.place',\n                            value: 'lieux',\n                            enabled: types.indexOf('lieux') !== -1,\n                            hashtags: ['lieu']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.sumi',\n                            value: 'bornes-sumi',\n                            enabled: types.indexOf('bornes-sumi') !== -1,\n                            hashtags: ['borne', 'bornes', 'sumi']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.km',\n                            value: 'bornes-km',\n                            enabled: false,\n                            hashtags: ['borne', 'bornes', 'repère', 'km']\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.cadastre',\n                            value: 'cadastre',\n                            enabled: false\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'results limit',\n                    name: 'limit',\n                    values: [\n                        {\n                            title: '1',\n                            value: 1,\n                            enabled: limit === 1\n                        },\n                        {\n                            title: '5',\n                            value: 5,\n                            enabled: limit === 5 || !limit\n                        },\n                        {\n                            title: '10',\n                            value: 10,\n                            enabled: limit === 10\n                        },\n                        {\n                            title: '25',\n                            value: 25,\n                            enabled: limit === 25\n                        },\n                        {\n                            title: '50',\n                            value: 50,\n                            enabled: limit === 50\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'ecmax',\n                    name: 'ecmax',\n                    values: [\n                        {\n                            title: '10 %',\n                            value: 10,\n                            enabled: ecmax === 10\n                        },\n                        {\n                            title: '30 %',\n                            value: 30,\n                            enabled: ecmax === 30 || !ecmax\n                        },\n                        {\n                            title: '50 %',\n                            value: 50,\n                            enabled: ecmax === 50\n                        },\n                        {\n                            title: '75 %',\n                            value: 75,\n                            enabled: ecmax === 75\n                        },\n                        {\n                            title: '100 %',\n                            value: 100,\n                            enabled: ecmax === 100\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'restrictExtent',\n                    name: 'loc',\n                    values: [\n                        {\n                            title: 'igo.geo.search.icherche.restrictExtent.map',\n                            value: 'true',\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.restrictExtent.quebec',\n                            value: 'false',\n                            enabled: true\n                        }\n                    ]\n                }\n            ]\n        };\n    }\n    /**\n     * Search a location by name or keyword\n     * @param term Location name or keyword\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    search(term, options) {\n        const params = this.computeRequestParams(term, options || {});\n        if (!params.get('type').length) {\n            return of([]);\n        }\n        this.options.params.page = params.get('page') || '1';\n        return this.http.get(`${this.searchUrl}/geocode`, { params }).pipe(map((response) => this.extractResults(response)), catchError((err) => {\n            err.error.toDisplay = true;\n            err.error.title = this.languageService.translate.instant(this.getDefaultOptions().title);\n            throw err;\n        }));\n    }\n    getAllowedTypes() {\n        return this.http\n            .get(`${this.searchUrl}/types`)\n            .subscribe((types) => {\n            const typeSetting = this.settings.find((s) => s.name === 'type');\n            typeSetting.values.forEach((v) => {\n                const regex = new RegExp(`^${v.value}(\\\\.|$)`);\n                const typesMatched = types.filter((value) => regex.test(value));\n                v.available = typesMatched.length > 0;\n                if (v.value === 'lieux') {\n                    this.hashtagsLieuxToKeep = [\n                        ...new Set(typesMatched\n                            .map((t) => t.split('.'))\n                            .reduce((a, b) => a.concat(b))\n                            .filter((t) => t !== 'lieux'))\n                    ];\n                }\n            });\n        });\n    }\n    computeRequestParams(term, options) {\n        const queryParams = Object.assign({\n            geometry: true,\n            bbox: true,\n            icon: true,\n            type: 'adresses,codes-postaux,municipalites,mrc,regadmin,lieux,entreprises,bornes-sumi'\n        }, this.params, this.computeOptionsParam(term, options || {}).params, {\n            q: this.computeTerm(term),\n            page: options.page\n        });\n        if (queryParams.loc === 'true') {\n            const [xMin, yMin, xMax, yMax] = options.extent;\n            queryParams.loc = `${xMin},${yMin};${xMax},${yMin};${xMax},${yMax};${xMin},${yMax};${xMin},${yMin}`;\n        }\n        else if (queryParams.loc === 'false') {\n            delete queryParams.loc;\n        }\n        if (queryParams.q.indexOf('#') !== -1) {\n            queryParams.type = 'lieux';\n        }\n        return new HttpParams({\n            fromObject: ObjectUtils.removeUndefined(queryParams)\n        });\n    }\n    extractResults(response) {\n        return response.features.map((data) => {\n            return this.formatter.formatResult(this.dataToResult(data, response));\n        });\n    }\n    dataToResult(data, response) {\n        const properties = this.computeProperties(data);\n        const id = [this.getId(), properties.type, properties.code].join('.');\n        const titleHtml = data.highlight.title || data.properties.nom;\n        const subtitleHtml = data.highlight.title2\n            ? ' <small> ' + data.highlight.title2 + '</small>'\n            : '';\n        const subtitleHtml2 = data.highlight.title3\n            ? '<br><small> ' + data.highlight.title3 + '</small>'\n            : '';\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry: data.geometry,\n                extent: data.bbox,\n                properties,\n                meta: {\n                    id,\n                    title: data.properties.nom\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.properties.nom,\n                titleHtml: titleHtml + subtitleHtml + subtitleHtml2,\n                icon: data.icon || 'map-marker',\n                nextPage: response.features.length % +this.options.params.limit === 0 &&\n                    +this.options.params.page < 10\n            }\n        };\n    }\n    computeProperties(data) {\n        const properties = ObjectUtils.removeKeys(data.properties, IChercheSearchSource.propertiesBlacklist);\n        if (data.geometry === undefined) {\n            return Object.assign({ type: data.index }, properties);\n        }\n        const googleLinksProperties = {\n            GoogleMaps: ''\n        };\n        let googleMaps;\n        if (data.geometry.type === 'Point') {\n            googleMaps = GoogleLinks.getGoogleMapsCoordLink(data.geometry.coordinates[0], data.geometry.coordinates[1]);\n        }\n        else {\n            const point = pointOnFeature(data.geometry);\n            googleMaps = GoogleLinks.getGoogleMapsCoordLink(point.geometry.coordinates[0], point.geometry.coordinates[1]);\n        }\n        let googleMapsNom;\n        if (data.index === 'routes') {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink(data.properties.nom + ', ' + data.properties.municipalite);\n        }\n        else if (data.index === 'municipalites') {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink(data.properties.nom + ', ' + 'ville');\n        }\n        else if (data.index === 'mrc') {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink('mrc+' + data.properties.nom);\n        }\n        else if (data.index === 'regadmin') {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink(data.properties.nom + ',+QC');\n        }\n        else {\n            googleMapsNom = GoogleLinks.getGoogleMapsNameLink(data.properties.nom || data.highlight.title);\n        }\n        googleLinksProperties.GoogleMaps =\n            '<a href=' +\n                googleMaps +\n                ' target=\"_blank\">' +\n                this.languageService.translate.instant('igo.geo.searchByCoord') +\n                '</a> <br /> <a href=' +\n                googleMapsNom +\n                ' target=\"_blank\">' +\n                this.languageService.translate.instant('igo.geo.searchByName') +\n                '</a>';\n        if (data.geometry.type === 'Point') {\n            googleLinksProperties.GoogleStreetView = GoogleLinks.getGoogleStreetViewLink(data.geometry.coordinates[0], data.geometry.coordinates[1]);\n        }\n        const routing = {\n            Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>'\n        };\n        return Object.assign({ type: data.index }, properties, googleLinksProperties, routing);\n    }\n    /**\n     * Remove hashtag from query\n     * @param term Query with hashtag\n     */\n    computeTerm(term) {\n        // Keep hashtags for \"lieux\"\n        const hashtags = term.match(/(#[^\\s]+)/g) || [];\n        let keep = false;\n        keep = hashtags.some((hashtag) => {\n            const hashtagKey = hashtag.substring(1);\n            return this.hashtagsLieuxToKeep.some((h) => h\n                .toLowerCase()\n                .normalize('NFD')\n                .replace(/[\\u0300-\\u036f]/g, '') ===\n                hashtagKey\n                    .toLowerCase()\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, ''));\n        });\n        if (!keep) {\n            term = term.replace(/(#[^\\s]*)/g, '');\n        }\n        return term.replace(/[^\\wÀ-ÿ !\\-\\(\\),'#]+/g, '');\n    }\n    /**\n     * Add hashtag to param if valid\n     * @param term Query with hashtag\n     * @param options TextSearchOptions\n     */\n    computeOptionsParam(term, options) {\n        const hashtags = super.getHashtagsValid(term, 'type');\n        if (hashtags) {\n            options.params = Object.assign(options.params || {}, {\n                type: hashtags.join(',')\n            });\n        }\n        return options;\n    }\n}\nIChercheSearchSource.ɵfac = function IChercheSearchSource_Factory(t) { return new (t || IChercheSearchSource)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject('options'), ɵngcc0.ɵɵinject(IChercheSearchResultFormatter), ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nIChercheSearchSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: IChercheSearchSource, factory: IChercheSearchSource.ɵfac });\nIChercheSearchSource.id = 'icherche';\nIChercheSearchSource.type = FEATURE;\nIChercheSearchSource.propertiesBlacklist = [];\nIChercheSearchSource.ctorParameters = () => [\n    { type: HttpClient },\n    { type: LanguageService },\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] },\n    { type: IChercheSearchResultFormatter, decorators: [{ type: Inject, args: [IChercheSearchResultFormatter,] }] },\n    { type: Injector }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IChercheSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.LanguageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }, { type: IChercheSearchResultFormatter, decorators: [{\n                type: Inject,\n                args: [IChercheSearchResultFormatter]\n            }] }, { type: ɵngcc0.Injector }]; }, null); })();\n/**\n * IChercheReverse search source\n */\nclass IChercheReverseSearchSource extends SearchSource {\n    constructor(http, languageService, options, injector) {\n        super(options);\n        this.http = http;\n        this.languageService = languageService;\n        this.title$ = new BehaviorSubject('');\n        this.languageService.translate\n            .get(this.options.title)\n            .subscribe((title) => this.title$.next(title));\n        const authService = injector.get(AuthService);\n        if (this.settings.length) {\n            if (!authService) {\n                this.getAllowedTypes();\n            }\n            else {\n                authService.authenticate$.subscribe(() => {\n                    this.getAllowedTypes();\n                });\n            }\n        }\n    }\n    get title() {\n        return this.title$.getValue();\n    }\n    getId() {\n        return IChercheReverseSearchSource.id;\n    }\n    getType() {\n        return IChercheReverseSearchSource.type;\n    }\n    getDefaultOptions() {\n        const types = this.options.params && this.options.params.type\n            ? this.options.params.type.replace(/\\s/g, '').toLowerCase().split(',')\n            : ['adresses', 'municipalites', 'mrc', 'regadmin'];\n        return {\n            title: 'igo.geo.search.ichercheReverse.name',\n            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/terrapi',\n            settings: [\n                {\n                    type: 'checkbox',\n                    title: 'results type',\n                    name: 'type',\n                    values: [\n                        {\n                            title: 'igo.geo.search.icherche.type.address',\n                            value: 'adresses',\n                            enabled: types.indexOf('adresses') !== -1\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.road',\n                            value: 'routes',\n                            enabled: types.indexOf('routes') !== -1,\n                            available: false\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.district',\n                            value: 'arrondissements',\n                            enabled: types.indexOf('arrondissements') !== -1\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.city',\n                            value: 'municipalites',\n                            enabled: types.indexOf('municipalites') !== -1\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.mrc',\n                            value: 'mrc',\n                            enabled: types.indexOf('mrc') !== -1\n                        },\n                        {\n                            title: 'igo.geo.search.icherche.type.regadmin',\n                            value: 'regadmin',\n                            enabled: types.indexOf('regadmin') !== -1\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'radius',\n                    name: 'buffer',\n                    values: [\n                        {\n                            title: '100 m',\n                            value: 100,\n                            enabled: !this.options.distance || this.options.distance === 100\n                        },\n                        {\n                            title: '500 m',\n                            value: 500,\n                            enabled: this.options.distance === 500\n                        },\n                        {\n                            title: '1 km',\n                            value: 1000,\n                            enabled: this.options.distance === 1000\n                        },\n                        {\n                            title: '2 km',\n                            value: 2000,\n                            enabled: this.options.distance === 2000\n                        },\n                        {\n                            title: '5 km',\n                            value: 5000,\n                            enabled: this.options.distance === 5000\n                        }\n                    ]\n                }\n            ]\n        };\n    }\n    /**\n     * Search a location by coordinates\n     * @param lonLat Location coordinates\n     * @param distance Search raidus around lonLat\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    reverseSearch(lonLat, options) {\n        const params = this.computeRequestParams(lonLat, options || {});\n        if (!params.get('type').length) {\n            return of([]);\n        }\n        return this.http.get(`${this.searchUrl}/locate`, { params }).pipe(map((response) => {\n            return this.extractResults(response);\n        }));\n    }\n    getAllowedTypes() {\n        return this.http\n            .get(`${this.searchUrl}/types`)\n            .subscribe((types) => {\n            const typeSetting = this.settings.find((s) => s.name === 'type');\n            typeSetting.values.forEach((v) => {\n                v.available = types.indexOf(v.value) > -1;\n            });\n        });\n    }\n    computeRequestParams(lonLat, options) {\n        if (options.distance || this.options.distance) {\n            options.params = Object.assign(options.params || {}, {\n                buffer: options.distance || this.options.distance\n            });\n        }\n        return new HttpParams({\n            fromObject: Object.assign({\n                loc: lonLat.join(','),\n                sort: 'distance',\n                geometry: true,\n                icon: true\n            }, options.params || {}, this.params)\n        });\n    }\n    extractResults(response) {\n        return response.features.map((data) => {\n            return this.dataToResult(data);\n        });\n    }\n    getSubtitle(data) {\n        if (!this.settings.length) {\n            return '';\n        }\n        let subtitle = '';\n        switch (data.properties.type) {\n            case 'arrondissements':\n                subtitle = data.properties.municipalite + ' (Arrondissement)';\n                break;\n            default:\n                const typeSetting = this.settings.find((s) => s.name === 'type');\n                const type = typeSetting.values.find((t) => t.value === data.properties.type);\n                if (type) {\n                    subtitle = this.languageService.translate.instant(type.title);\n                }\n        }\n        return subtitle;\n    }\n    dataToResult(data) {\n        const properties = this.computeProperties(data);\n        const extent = this.computeExtent(data);\n        const id = [this.getId(), properties.type, properties.code].join('.');\n        const titleHtml = data.properties.nom;\n        const subtitleHtml = ' <small> ' + this.getSubtitle(data) + '</small>';\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry: data.geometry,\n                extent,\n                properties,\n                meta: {\n                    id,\n                    title: data.properties.nom\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.properties.nom,\n                titleHtml: titleHtml + subtitleHtml,\n                icon: data.icon || 'map-marker'\n            }\n        };\n    }\n    computeProperties(data) {\n        const properties = ObjectUtils.removeKeys(data.properties, IChercheReverseSearchSource.propertiesBlacklist);\n        const routing = {\n            Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>'\n        };\n        return Object.assign(properties, routing);\n    }\n    computeExtent(data) {\n        return data.bbox\n            ? [data.bbox[0], data.bbox[2], data.bbox[1], data.bbox[3]]\n            : undefined;\n    }\n}\nIChercheReverseSearchSource.ɵfac = function IChercheReverseSearchSource_Factory(t) { return new (t || IChercheReverseSearchSource)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject('options'), ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nIChercheReverseSearchSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: IChercheReverseSearchSource, factory: IChercheReverseSearchSource.ɵfac });\nIChercheReverseSearchSource.id = 'icherchereverse';\nIChercheReverseSearchSource.type = FEATURE;\nIChercheReverseSearchSource.propertiesBlacklist = [];\nIChercheReverseSearchSource.ctorParameters = () => [\n    { type: HttpClient },\n    { type: LanguageService },\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] },\n    { type: Injector }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IChercheReverseSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.LanguageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }, { type: ɵngcc0.Injector }]; }, null); })();\n\n/**\n * ICherche search result formatter factory\n * @ignore\n */\nfunction defaultIChercheSearchResultFormatterFactory(languageService) {\n    return new IChercheSearchResultFormatter(languageService);\n}\n/**\n * Function that returns a provider for the ICherche search result formatter\n */\nfunction provideDefaultIChercheSearchResultFormatter() {\n    return {\n        provide: IChercheSearchResultFormatter,\n        useFactory: defaultIChercheSearchResultFormatterFactory,\n        deps: [LanguageService]\n    };\n}\n/**\n * ICherche search source factory\n * @ignore\n */\nfunction ichercheSearchSourceFactory(http, languageService, config, formatter, injector) {\n    return new IChercheSearchSource(http, languageService, config.getConfig(`searchSources.${IChercheSearchSource.id}`), formatter, injector);\n}\n/**\n * Function that returns a provider for the ICherche search source\n */\nfunction provideIChercheSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: ichercheSearchSourceFactory,\n        multi: true,\n        deps: [\n            HttpClient,\n            LanguageService,\n            ConfigService,\n            IChercheSearchResultFormatter,\n            Injector\n        ]\n    };\n}\n/**\n * IChercheReverse search source factory\n * @ignore\n */\nfunction ichercheReverseSearchSourceFactory(http, languageService, config, injector) {\n    return new IChercheReverseSearchSource(http, languageService, config.getConfig(`searchSources.${IChercheReverseSearchSource.id}`), injector);\n}\n/**\n * Function that returns a provider for the IChercheReverse search source\n */\nfunction provideIChercheReverseSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: ichercheReverseSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, ConfigService, Injector]\n    };\n}\n\nclass CoordinatesSearchResultFormatter {\n    constructor(languageService) {\n        this.languageService = languageService;\n    }\n    formatResult(result) {\n        return result;\n    }\n}\nCoordinatesSearchResultFormatter.ɵfac = function CoordinatesSearchResultFormatter_Factory(t) { return new (t || CoordinatesSearchResultFormatter)(ɵngcc0.ɵɵinject(ɵngcc7.LanguageService)); };\nCoordinatesSearchResultFormatter.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: CoordinatesSearchResultFormatter, factory: CoordinatesSearchResultFormatter.ɵfac });\nCoordinatesSearchResultFormatter.ctorParameters = () => [\n    { type: LanguageService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CoordinatesSearchResultFormatter, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc7.LanguageService }]; }, null); })();\n/**\n * CoordinatesReverse search source\n */\nclass CoordinatesReverseSearchSource extends SearchSource {\n    constructor(options, languageService, projections) {\n        super(options);\n        this.languageService = languageService;\n        this.title$ = new BehaviorSubject('');\n        this.projections = projections;\n        this.languageService.translate\n            .get(this.options.title)\n            .subscribe(title => this.title$.next(title));\n    }\n    get title() {\n        return this.title$.getValue();\n    }\n    getId() {\n        return CoordinatesReverseSearchSource.id;\n    }\n    getType() {\n        return CoordinatesReverseSearchSource.type;\n    }\n    getDefaultOptions() {\n        return {\n            title: 'igo.geo.search.coordinates.name',\n            order: 1,\n            showInSettings: false\n        };\n    }\n    /**\n     * Search a location by coordinates\n     * @param lonLat Location coordinates\n     * @param distance Search raidus around lonLat\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    reverseSearch(lonLat, options) {\n        return of([this.dataToResult(lonLat)]);\n    }\n    dataToResult(data) {\n        const convertedCoord = lonLatConversion(data, this.projections);\n        const coords = convertedCoord.reduce((obj, item) => (obj[item.alias] = item.igo2CoordFormat, obj), {});\n        const roundedCoordString = roundCoordTo(data, 6).join(', ');\n        const coordKey = this.languageService.translate.instant('igo.geo.search.coordinates.coord');\n        const coordLonLat = {};\n        coordLonLat[coordKey] = roundedCoordString;\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry: {\n                    type: 'Point',\n                    coordinates: [data[0], data[1]]\n                },\n                extent: undefined,\n                properties: Object.assign({}, coordLonLat, coords, {\n                    GoogleMaps: GoogleLinks.getGoogleMapsCoordLink(data[0], data[1]),\n                    GoogleStreetView: GoogleLinks.getGoogleStreetViewLink(data[0], data[1]),\n                    OpenStreetMap: OsmLinks.getOpenStreetMapLink(data[0], data[1], 14)\n                }, {\n                    Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>'\n                }),\n                meta: {\n                    id: data[0].toString() + ',' + data[1].toString(),\n                    title: roundedCoordString\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id: data[0].toString() + ',' + data[1].toString(),\n                title: roundedCoordString,\n                icon: 'map-marker'\n            }\n        };\n    }\n}\nCoordinatesReverseSearchSource.ɵfac = function CoordinatesReverseSearchSource_Factory(t) { return new (t || CoordinatesReverseSearchSource)(ɵngcc0.ɵɵinject('options'), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject('projections')); };\nCoordinatesReverseSearchSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: CoordinatesReverseSearchSource, factory: CoordinatesReverseSearchSource.ɵfac });\nCoordinatesReverseSearchSource.id = 'coordinatesreverse';\nCoordinatesReverseSearchSource.type = FEATURE;\nCoordinatesReverseSearchSource.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] },\n    { type: LanguageService },\n    { type: Array, decorators: [{ type: Inject, args: ['projections',] }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CoordinatesReverseSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }, { type: ɵngcc7.LanguageService }, { type: Array, decorators: [{\n                type: Inject,\n                args: ['projections']\n            }] }]; }, null); })();\n\n/**\n * ICherche search result formatter factory\n * @ignore\n */\nfunction defaultCoordinatesSearchResultFormatterFactory(languageService) {\n    return new CoordinatesSearchResultFormatter(languageService);\n}\n/**\n * Function that returns a provider for the ICherche search result formatter\n */\nfunction provideDefaultCoordinatesSearchResultFormatter() {\n    return {\n        provide: CoordinatesSearchResultFormatter,\n        useFactory: defaultCoordinatesSearchResultFormatterFactory,\n        deps: [LanguageService]\n    };\n}\n/**\n * CoordinatesReverse search source factory\n * @ignore\n */\nfunction CoordinatesReverseSearchSourceFactory(config, languageService, _projectionService) {\n    return new CoordinatesReverseSearchSource(config.getConfig(`searchSources.${CoordinatesReverseSearchSource.id}`), languageService, config.getConfig('projections') || []);\n}\n/**\n * Function that returns a provider for the IChercheReverse search source\n */\nfunction provideCoordinatesReverseSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: CoordinatesReverseSearchSourceFactory,\n        multi: true,\n        deps: [ConfigService, LanguageService, ProjectionService]\n    };\n}\n\nclass ILayerSearchResultFormatter {\n    constructor(languageService) {\n        this.languageService = languageService;\n    }\n    formatResult(data) {\n        const allowedKey = [\n            'title',\n            'abstract',\n            'groupTitle',\n            'metadataUrl',\n            'downloadUrl',\n            'urlInfo',\n            'name'\n        ];\n        const property = Object.entries(data.properties)\n            .filter(([key]) => allowedKey.indexOf(key) !== -1)\n            .reduce((out, entries) => {\n            const [key, value] = entries;\n            let newKey;\n            try {\n                newKey = this.languageService.translate.instant('igo.geo.search.ilayer.properties.' + key);\n            }\n            catch (e) {\n                newKey = key;\n            }\n            out[newKey] = value ? value : '';\n            return out;\n        }, {});\n        const dataR = Object.assign({}, data);\n        dataR.properties = property;\n        return dataR;\n    }\n}\nILayerSearchResultFormatter.ɵfac = function ILayerSearchResultFormatter_Factory(t) { return new (t || ILayerSearchResultFormatter)(ɵngcc0.ɵɵinject(ɵngcc7.LanguageService)); };\nILayerSearchResultFormatter.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ILayerSearchResultFormatter, factory: ILayerSearchResultFormatter.ɵfac });\nILayerSearchResultFormatter.ctorParameters = () => [\n    { type: LanguageService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ILayerSearchResultFormatter, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc7.LanguageService }]; }, null); })();\n/**\n * ILayer search source\n */\nclass ILayerSearchSource extends SearchSource {\n    constructor(http, languageService, options, formatter) {\n        super(options);\n        this.http = http;\n        this.languageService = languageService;\n        this.formatter = formatter;\n        this.title$ = new BehaviorSubject('');\n        this.languageService.translate\n            .get(this.options.title)\n            .subscribe(title => this.title$.next(title));\n    }\n    get title() {\n        return this.title$.getValue();\n    }\n    getId() {\n        return ILayerSearchSource.id;\n    }\n    getType() {\n        return ILayerSearchSource.type;\n    }\n    getDefaultOptions() {\n        const limit = this.options.params && this.options.params.limit\n            ? Number(this.options.params.limit)\n            : undefined;\n        return {\n            title: 'igo.geo.search.ilayer.name',\n            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/layers/search',\n            settings: [\n                {\n                    type: 'checkbox',\n                    title: 'results type',\n                    name: 'type',\n                    values: [\n                        {\n                            title: 'igo.geo.search.ilayer.type.layer',\n                            value: 'layer',\n                            enabled: true,\n                            hashtags: ['layer', 'layers', 'couche', 'couches']\n                        },\n                        {\n                            title: 'igo.geo.search.ilayer.type.groupLayer',\n                            value: 'group',\n                            enabled: false,\n                            hashtags: ['gr-layer', 'gr-layers', 'gr-couche', 'gr-couches']\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'results limit',\n                    name: 'limit',\n                    values: [\n                        {\n                            title: '1',\n                            value: 1,\n                            enabled: limit === 1\n                        },\n                        {\n                            title: '5',\n                            value: 5,\n                            enabled: limit === 5 || !limit\n                        },\n                        {\n                            title: '10',\n                            value: 10,\n                            enabled: limit === 10\n                        },\n                        {\n                            title: '25',\n                            value: 25,\n                            enabled: limit === 25\n                        },\n                        {\n                            title: '50',\n                            value: 50,\n                            enabled: limit === 50\n                        }\n                    ]\n                }\n            ]\n        };\n    }\n    /**\n     * Search a layer by name or keyword\n     * @param term Layer name or keyword\n     * @returns Observable of <SearchResult<LayerOptions>[]\n     */\n    search(term, options) {\n        const params = this.computeSearchRequestParams(term, options || {});\n        if (!params.get('q') || !params.get('type')) {\n            return of([]);\n        }\n        this.options.params.page = params.get('page') || '1';\n        return this.http\n            .get(this.searchUrl, { params })\n            .pipe(map((response) => this.extractResults(response)));\n    }\n    computeSearchRequestParams(term, options) {\n        return new HttpParams({\n            fromObject: ObjectUtils.removeUndefined(Object.assign({\n                q: this.computeTerm(term)\n            }, this.params, this.computeOptionsParam(term, options || {}).params, {\n                page: options.page\n            }))\n        });\n    }\n    /**\n     * Remove hashtag from query\n     * @param term Query with hashtag\n     */\n    computeTerm(term) {\n        return term.replace(/(#[^\\s]*)/g, '').replace(/[^\\wÀ-ÿ !\\-\\(\\),'#]+/g, '');\n    }\n    /**\n     * Add hashtag to param if valid\n     * @param term Query with hashtag\n     * @param options TextSearchOptions\n     */\n    computeOptionsParam(term, options) {\n        const hashtags = super.getHashtagsValid(term, 'type');\n        if (hashtags) {\n            options.params = Object.assign(options.params || {}, {\n                type: hashtags.join(',')\n            });\n        }\n        return options;\n    }\n    extractResults(response) {\n        return response.items.map((data) => this.dataToResult(data, response));\n    }\n    dataToResult(data, response) {\n        const layerOptions = this.computeLayerOptions(data);\n        const titleHtml = data.highlight.title || data.properties.title;\n        const groupTitle = data.highlight.groupTitle || data.properties.groupTitle;\n        const subtitleHtml = groupTitle\n            ? ' <small style=\"color: #6f6969\"> ' + groupTitle + '</small>'\n            : '';\n        return {\n            source: this,\n            meta: {\n                dataType: LAYER,\n                id: [this.getId(), data.properties.id].join('.'),\n                title: data.properties.title,\n                titleHtml: titleHtml + subtitleHtml,\n                icon: data.properties.type === 'Layer' ? 'layers' : 'map',\n                nextPage: response.items.length % +this.options.params.limit === 0 &&\n                    +this.options.params.page < 10\n            },\n            data: layerOptions\n        };\n    }\n    computeLayerOptions(data) {\n        const url = data.properties.url;\n        const queryParams = this.extractQueryParamsFromSourceUrl(url);\n        return ObjectUtils.removeUndefined({\n            sourceOptions: {\n                id: data.properties.id,\n                type: data.properties.format,\n                url,\n                queryFormat: queryParams.queryFormat,\n                queryHtmlTarget: queryParams.queryHtmlTarget,\n                params: {\n                    LAYERS: data.properties.name\n                },\n                optionsFromCapabilities: true,\n                crossOrigin: 'anonymous'\n            },\n            title: data.properties.title,\n            maxResolution: getResolutionFromScale(Number(data.properties.maxScaleDenom)),\n            minResolution: getResolutionFromScale(Number(data.properties.minScaleDenom)),\n            metadata: {\n                url: data.properties.metadataUrl,\n                extern: true\n            },\n            properties: this.formatter.formatResult(data).properties\n        });\n    }\n    extractQueryParamsFromSourceUrl(url) {\n        let queryFormat;\n        let queryHtmlTarget;\n        const formatOpt = this.options.queryFormat;\n        if (formatOpt) {\n            for (const key of Object.keys(formatOpt)) {\n                const value = formatOpt[key];\n                if (value === '*') {\n                    queryFormat = QueryFormat[key.toUpperCase()];\n                    break;\n                }\n                const urls = value.urls;\n                if (Array.isArray(urls)) {\n                    urls.forEach(urlOpt => {\n                        if (url.indexOf(urlOpt) !== -1) {\n                            queryFormat = QueryFormat[key.toUpperCase()];\n                        }\n                    });\n                    break;\n                }\n            }\n            if (queryFormat === QueryFormat.HTML ||\n                queryFormat === QueryFormat.HTMLGML2) {\n                queryHtmlTarget = 'iframe';\n            }\n        }\n        return {\n            queryFormat,\n            queryHtmlTarget\n        };\n    }\n}\nILayerSearchSource.ɵfac = function ILayerSearchSource_Factory(t) { return new (t || ILayerSearchSource)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject('options'), ɵngcc0.ɵɵinject(ILayerSearchResultFormatter)); };\nILayerSearchSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ILayerSearchSource, factory: ILayerSearchSource.ɵfac });\nILayerSearchSource.id = 'ilayer';\nILayerSearchSource.type = LAYER;\nILayerSearchSource.ctorParameters = () => [\n    { type: HttpClient },\n    { type: LanguageService },\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] },\n    { type: ILayerSearchResultFormatter, decorators: [{ type: Inject, args: [ILayerSearchResultFormatter,] }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ILayerSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.LanguageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }, { type: ILayerSearchResultFormatter, decorators: [{\n                type: Inject,\n                args: [ILayerSearchResultFormatter]\n            }] }]; }, null); })();\n\n/**\n * ILayer search result formatter factory\n * @ignore\n */\nfunction ilayerSearchResultFormatterFactory(languageService) {\n    return new ILayerSearchResultFormatter(languageService);\n}\n/**\n * Function that returns a provider for the ILayer search result formatter\n */\nfunction provideILayerSearchResultFormatter() {\n    return {\n        provide: ILayerSearchResultFormatter,\n        useFactory: ilayerSearchResultFormatterFactory,\n        deps: [LanguageService]\n    };\n}\n/**\n * ILayer search source factory\n * @ignore\n */\nfunction ilayerSearchSourceFactory(http, languageService, config, formatter) {\n    return new ILayerSearchSource(http, languageService, config.getConfig(`searchSources.${ILayerSearchSource.id}`), formatter);\n}\n/**\n * Function that returns a provider for the ILayer search source\n */\nfunction provideILayerSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: ilayerSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, ConfigService, ILayerSearchResultFormatter]\n    };\n}\n\nconst SEARCH_TYPES = [FEATURE, LAYER];\n\n/**\n * This component allows a user to select a search type yo enable. In it's\n * current version, only one search type can be selected at once (radio). If\n * this component were to support more than one search source enabled (checkbox),\n * the searchbar component would require a small change to it's\n * placeholder getter. The search source service already supports having\n * more than one search source enabled.\n */\nclass SearchSelectorComponent {\n    constructor(searchSourceService) {\n        this.searchSourceService = searchSourceService;\n        this.searchType$ = new BehaviorSubject(undefined);\n        /**\n         * List of available search types\n         */\n        this.searchTypes = SEARCH_TYPES;\n        /**\n         * Event emitted when the enabled search type changes\n         */\n        this.searchTypeChange = new EventEmitter();\n    }\n    /**\n     * The search type enabled\n     */\n    set searchType(value) { this.setSearchType(value); }\n    get searchType() { return this.searchType$.value; }\n    ngOnInit() {\n        this.searchType$$ = this.searchType$\n            .pipe(distinctUntilChanged())\n            .subscribe((searchType) => this.onSetSearchType(searchType));\n    }\n    ngOnDestroy() {\n        this.searchType$$.unsubscribe();\n    }\n    /**\n     * Enable the selected search type\n     * @param searchType Search type\n     * @internal\n     */\n    onSearchTypeChange(searchType) {\n        this.setSearchType(searchType);\n    }\n    /**\n     * Get a search type's title. The title\n     * for all availables search typers needs to be defined in the locale\n     * files or an error will be thrown.\n     * @param searchType Search type\n     * @internal\n     */\n    getSearchTypeTitle(searchType) {\n        return `igo.geo.search.${searchType.toLowerCase()}.title`;\n    }\n    /**\n     * Emit an event and enable the search sources of the given type.\n     * @param searchType Search type\n     */\n    setSearchType(searchType) {\n        this.searchType$.next(searchType);\n    }\n    onSetSearchType(searchType) {\n        if (searchType === undefined || searchType === null) {\n            return;\n        }\n        this.searchSourceService.enableSourcesByType(searchType);\n        this.searchTypeChange.emit(searchType);\n    }\n}\nSearchSelectorComponent.ɵfac = function SearchSelectorComponent_Factory(t) { return new (t || SearchSelectorComponent)(ɵngcc0.ɵɵdirectiveInject(SearchSourceService)); };\nSearchSelectorComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SearchSelectorComponent, selectors: [[\"igo-search-selector\"]], inputs: { searchTypes: \"searchTypes\", searchType: \"searchType\" }, outputs: { searchTypeChange: \"searchTypeChange\" }, decls: 9, vars: 8, consts: [[1, \"igo-search-selector\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"igo-search-selector-button\", 3, \"matTooltip\", \"matMenuTriggerFor\"], [\"svgIcon\", \"menu-down\"], [\"xPosition\", \"before\", \"yPosition\", \"above\", 1, \"no-border-radius\"], [\"searchSelectorMenu\", \"matMenu\"], [1, \"igo-search-selector-radio-group\", 3, \"value\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]], template: function SearchSelectorComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"button\", 1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelement(3, \"mat-icon\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"mat-menu\", 3, 4);\n        ɵngcc0.ɵɵelementStart(6, \"mat-radio-group\", 5);\n        ɵngcc0.ɵɵlistener(\"change\", function SearchSelectorComponent_Template_mat_radio_group_change_6_listener($event) { return ctx.onSearchTypeChange($event.value); });\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵtemplate(8, SearchSelectorComponent_mat_radio_button_8_Template, 3, 4, \"mat-radio-button\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = ɵngcc0.ɵɵreference(5);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(2, 4, \"igo.geo.search.menu.tooltip\"))(\"matMenuTriggerFor\", _r0);\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"value\", ɵngcc0.ɵɵpipeBind1(7, 6, ctx.searchType$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.searchTypes);\n    } }, directives: [ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc17.MatMenuTrigger, ɵngcc4.MatIcon, ɵngcc17._MatMenu, ɵngcc28.MatRadioGroup, ɵngcc1.NgForOf, ɵngcc28.MatRadioButton], pipes: [ɵngcc5.TranslatePipe, ɵngcc1.AsyncPipe], styles: [\".igo-search-selector-button[_ngcontent-%COMP%]     div.mat-button-ripple-round{border-radius:0}.igo-search-selector-radio-group[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.igo-search-selector-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin:5px}\"], changeDetection: 0 });\nSearchSelectorComponent.ctorParameters = () => [\n    { type: SearchSourceService }\n];\nSearchSelectorComponent.propDecorators = {\n    searchTypes: [{ type: Input }],\n    searchType: [{ type: Input }],\n    searchTypeChange: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchSelectorComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-selector',\n                template: \"<div class=\\\"igo-search-selector\\\">\\n  <button\\n    mat-icon-button\\n    class=\\\"igo-search-selector-button\\\"\\n    color=\\\"primary\\\"\\n    tooltip-position=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"'igo.geo.search.menu.tooltip' | translate\\\"\\n    [matMenuTriggerFor]=\\\"searchSelectorMenu\\\">\\n    <mat-icon svgIcon=\\\"menu-down\\\"></mat-icon>\\n  </button>\\n\\n  <mat-menu\\n    #searchSelectorMenu=\\\"matMenu\\\"\\n    class=\\\"no-border-radius\\\"\\n    xPosition=\\\"before\\\"\\n    yPosition=\\\"above\\\">\\n    <mat-radio-group\\n      class=\\\"igo-search-selector-radio-group\\\"\\n      [value]=\\\"searchType$ | async\\\"\\n      (change)=\\\"onSearchTypeChange($event.value)\\\">\\n      <mat-radio-button *ngFor=\\\"let searchType of searchTypes\\\" [value]=\\\"searchType\\\">\\n        {{getSearchTypeTitle(searchType) | translate}}\\n      </mat-radio-button>\\n    </mat-radio-group>\\n  </mat-menu>\\n\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".igo-search-selector-button ::ng-deep div.mat-button-ripple-round{border-radius:0}.igo-search-selector-radio-group{display:inline-flex;flex-direction:column}.igo-search-selector-radio-group mat-radio-button{margin:5px}\"]\n            }]\n    }], function () { return [{ type: SearchSourceService }]; }, { searchTypes: [{\n            type: Input\n        }], searchTypeChange: [{\n            type: Output\n        }], searchType: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoSearchSelectorModule {\n}\nIgoSearchSelectorModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoSearchSelectorModule });\nIgoSearchSelectorModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoSearchSelectorModule_Factory(t) { return new (t || IgoSearchSelectorModule)(); }, imports: [[\n            CommonModule,\n            MatTooltipModule,\n            MatIconModule,\n            MatButtonModule,\n            MatMenuModule,\n            MatRadioModule,\n            MatTabsModule,\n            MatCheckboxModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoSearchSelectorModule, { declarations: function () { return [SearchSelectorComponent]; }, imports: function () { return [CommonModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatButtonModule,\n        MatMenuModule,\n        MatRadioModule,\n        MatTabsModule,\n        MatCheckboxModule,\n        IgoLanguageModule]; }, exports: function () { return [SearchSelectorComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoSearchSelectorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatMenuModule,\n                    MatRadioModule,\n                    MatTabsModule,\n                    MatCheckboxModule,\n                    IgoLanguageModule\n                ],\n                exports: [SearchSelectorComponent],\n                declarations: [SearchSelectorComponent]\n            }]\n    }], null, null); })();\n\n/**\n * This component allows a user to select a search type yo enable. In it's\n * current version, only one search type can be selected at once (radio). If\n * this component were to support more than one search source enabled (checkbox),\n * the searchbar component would require a small change to it's\n * placeholder getter. The search source service already supports having\n * more than one search source enabled.\n */\nclass SearchSettingsComponent {\n    constructor(searchSourceService, mediaService) {\n        this.searchSourceService = searchSourceService;\n        this.mediaService = mediaService;\n        this.hasPointerReverseSearchSource = false;\n        this.searchSourcesAllEnabled = false;\n        this.buffer = [];\n        this.lastKeyTime = Date.now();\n        this.pointerSummaryEnabled = false;\n        /**\n         * Event emitted when the enabled search source changes\n         */\n        this.searchSourceChange = new EventEmitter();\n        /**\n         * Event emitted when the pointer summary is activated\n         */\n        this.pointerSummaryStatus = new EventEmitter();\n    }\n    get isTouchScreen() {\n        return this.mediaService.isTouchScreen();\n    }\n    handleKeyboardEvent(event) {\n        if (event.key === 'F2') {\n            this.pointerSummaryEnabled = !this.pointerSummaryEnabled;\n            this.pointerSummaryStatus.emit(this.pointerSummaryEnabled);\n        }\n    }\n    ngOnInit() {\n        this.hasPointerReverseSearchSource = this.hasReverseSearchSourcesForPointerSummary();\n    }\n    /**\n     * Get all search sources\n     * @internal\n     */\n    getSearchSources() {\n        const textSearchSources = this.searchSourceService\n            .getSources()\n            .filter(sourceCanSearch)\n            .filter((s) => s.available && s.getId() !== 'map' && s.showInSettings);\n        const reverseSearchSources = this.searchSourceService\n            .getSources()\n            .filter(sourceCanReverseSearch)\n            .filter((s) => s.available && s.getId() !== 'map' && s.showInSettings);\n        const sources = textSearchSources.concat(reverseSearchSources);\n        this.computeSourcesCheckAllBehavior(sources);\n        return sources;\n    }\n    /**\n     * Get all search sources usable for pointer summary\n     * @internal\n     */\n    hasReverseSearchSourcesForPointerSummary() {\n        if (this.searchSourceService\n            .getEnabledSources()\n            .filter(sourceCanReverseSearchAsSummary).length) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Triggered when a setting is checked (checkbox style)\n     * @internal\n     */\n    settingsValueCheckedCheckbox(event, source, setting, settingValue) {\n        settingValue.enabled = event.checked;\n        source.setParamFromSetting(setting);\n        this.searchSourceChange.emit(source);\n    }\n    /**\n     * Defining the action to do for check/uncheck checkboxes (settings)\n     * return true if all checkbox must be checked\n     * return false if all checkbox must be unchecked\n     * @internal\n     */\n    computeSettingCheckAllBehavior(setting) {\n        if (setting.allEnabled === undefined) {\n            if (setting.values.find((settingValue) => settingValue.enabled)) {\n                setting.allEnabled = false;\n            }\n            else {\n                setting.allEnabled = true;\n            }\n        }\n        else {\n            setting.allEnabled = !setting.allEnabled;\n        }\n    }\n    /**\n     * Defining the action to do for check/uncheck checkboxes (sources)\n     * return true if all checkbox must be checked\n     * return false if all checkbox must be unchecked\n     * @internal\n     */\n    computeSourcesCheckAllBehavior(sources) {\n        const enabledSourcesCnt = sources.filter((source) => source.enabled).length;\n        const disabledSourcesCnt = sources.filter((source) => !source.enabled)\n            .length;\n        this.searchSourcesAllEnabled =\n            enabledSourcesCnt >= disabledSourcesCnt ? false : true;\n    }\n    /**\n     * Triggered when the check all / uncheck all type is clicked,\n     * @internal\n     */\n    checkUncheckAll(event, source, setting) {\n        event.stopPropagation();\n        this.computeSettingCheckAllBehavior(setting);\n        setting.values.forEach((settingValue) => {\n            settingValue.enabled = setting.allEnabled;\n        });\n        source.setParamFromSetting(setting);\n        this.searchSourceChange.emit(source);\n    }\n    /**\n     * Triggered when the check all / uncheck all type is clicked,\n     * @internal\n     */\n    checkUncheckAllSources(event) {\n        event.stopPropagation();\n        this.getSearchSources().map((source) => {\n            source.enabled = this.searchSourcesAllEnabled;\n            this.searchSourceChange.emit(source);\n        });\n    }\n    /**\n     * Triggered when a setting is checked (radiobutton style)\n     * @internal\n     */\n    settingsValueCheckedRadioButton(event, source, setting, settingValue) {\n        setting.values.forEach((conf) => {\n            if (conf.value !== settingValue.value) {\n                conf.enabled = !event.source.checked;\n            }\n            else {\n                conf.enabled = event.source.checked;\n            }\n        });\n        source.setParamFromSetting(setting);\n        this.searchSourceChange.emit(source);\n    }\n    onCheckSearchSource(event, source) {\n        source.enabled = event.checked;\n        this.searchSourceChange.emit(source);\n    }\n    getAvailableValues(setting) {\n        return setting.values.filter((s) => s.available !== false);\n    }\n    getAvailableHashtagsValues(setting) {\n        if (setting.hashtags) {\n            return setting.hashtags.map((h) => '#' + h).join(', ');\n        }\n        return;\n    }\n    stopPropagation(event) {\n        event.stopPropagation();\n    }\n    changePointerReverseSearch(event, fromTitleButton) {\n        if (fromTitleButton) {\n            event.stopPropagation();\n            this.pointerSummaryEnabled = !this.pointerSummaryEnabled;\n        }\n        else {\n            this.pointerSummaryEnabled = event.checked;\n        }\n        this.pointerSummaryStatus.emit(this.pointerSummaryEnabled);\n    }\n}\nSearchSettingsComponent.ɵfac = function SearchSettingsComponent_Factory(t) { return new (t || SearchSettingsComponent)(ɵngcc0.ɵɵdirectiveInject(SearchSourceService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.MediaService)); };\nSearchSettingsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SearchSettingsComponent, selectors: [[\"igo-search-settings\"]], hostBindings: function SearchSettingsComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"keydown\", function SearchSettingsComponent_keydown_HostBindingHandler($event) { return ctx.handleKeyboardEvent($event); }, false, ɵngcc0.ɵɵresolveDocument);\n    } }, inputs: { pointerSummaryEnabled: \"pointerSummaryEnabled\" }, outputs: { searchSourceChange: \"searchSourceChange\", pointerSummaryStatus: \"pointerSummaryStatus\" }, decls: 9, vars: 7, consts: [[1, \"igo-search-settings\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"igo-search-settings-button\", 3, \"matTooltip\", \"matMenuTriggerFor\"], [\"svgIcon\", \"chevron-down\"], [1, \"no-border-radius\"], [\"searchSettingsMenu\", \"matMenu\"], [\"class\", \"checkAllButton\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"checkAllButton\"], [\"mat-raised-button\", \"\", 3, \"click\"], [1, \"igo-search-settings-search-source\"], [1, \"igo-search-settings-checkbox\", 3, \"checked\", \"value\", \"click\", \"change\"], [\"mat-menu-item\", \"\", 3, \"matMenuTriggerFor\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", 4, \"ngIf\"], [\"sub_menu\", \"matMenu\"], [\"mat-menu-item\", \"\", 3, \"matMenuTriggerFor\"], [\"mat-menu-item\", \"\"], [\"yPosition\", \"above\", 3, \"ngSwitch\"], [\"test_sub_menu\", \"matMenu\"], [4, \"ngSwitchCase\"], [1, \"igo-search-settings-radio-group\", 3, \"value\"], [\"class\", \"mat-typography\", 3, \"value\", \"checked\", \"click\", \"change\", 4, \"ngFor\", \"ngForOf\"], [1, \"mat-typography\", 3, \"value\", \"checked\", \"click\", \"change\"], [\"class\", \"mat-menu-item\", 3, \"checked\", \"value\", \"matTooltip\", \"click\", \"change\", 4, \"ngFor\", \"ngForOf\"], [1, \"mat-menu-item\", 3, \"checked\", \"value\", \"matTooltip\", \"click\", \"change\"], [1, \"pointer-summary-slide-toggle-container\", \"mat-typography\"], [\"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 1, \"pointer-summary-option\", 3, \"matTooltip\", \"checked\", \"labelPosition\", \"change\", \"click\"]], template: function SearchSettingsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"button\", 1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelement(3, \"mat-icon\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"mat-menu\", 3, 4);\n        ɵngcc0.ɵɵtemplate(6, SearchSettingsComponent_div_6_Template, 5, 5, \"div\", 5);\n        ɵngcc0.ɵɵtemplate(7, SearchSettingsComponent_ng_container_7_Template, 8, 5, \"ng-container\", 6);\n        ɵngcc0.ɵɵtemplate(8, SearchSettingsComponent_span_8_Template, 7, 8, \"span\", 7);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = ɵngcc0.ɵɵreference(5);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(2, 5, \"igo.geo.search.menu.tooltip\"))(\"matMenuTriggerFor\", _r0);\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.getSearchSources().length > 4);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.getSearchSources());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasPointerReverseSearchSource && !ctx.isTouchScreen);\n    } }, directives: [ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc17.MatMenuTrigger, ɵngcc4.MatIcon, ɵngcc17._MatMenu, ɵngcc1.NgIf, ɵngcc1.NgForOf, ɵngcc13.MatCheckbox, ɵngcc17.MatMenuItem, ɵngcc1.NgSwitch, ɵngcc1.NgSwitchCase, ɵngcc28.MatRadioGroup, ɵngcc28.MatRadioButton, ɵngcc21.MatDivider, ɵngcc20.MatSlideToggle], pipes: [ɵngcc5.TranslatePipe], styles: [\".checkAllButton[_ngcontent-%COMP%]{padding:0 5px;text-align:center}.igo-search-settings-button[_ngcontent-%COMP%]     div.mat-button-ripple-round{border-radius:0}.igo-search-settings-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.igo-search-settings-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin:5px}.igo-search-settings-checkbox[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{display:flex}.igo-search-settings-search-source[_ngcontent-%COMP%]{display:flex;width:100%}.igo-search-settings-search-source[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:flex;margin-left:5px;margin-right:5px}.pointer-summary-option[_ngcontent-%COMP%]{display:block;margin-bottom:15px;margin-right:10px}.pointer-summary-slide-toggle-container[_ngcontent-%COMP%]{overflow-x:hidden}.pointer-summary-slide-toggle-container[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:10px}\"], changeDetection: 0 });\nSearchSettingsComponent.ctorParameters = () => [\n    { type: SearchSourceService },\n    { type: MediaService }\n];\nSearchSettingsComponent.propDecorators = {\n    pointerSummaryEnabled: [{ type: Input }],\n    searchSourceChange: [{ type: Output }],\n    pointerSummaryStatus: [{ type: Output }],\n    handleKeyboardEvent: [{ type: HostListener, args: ['document:keydown', ['$event'],] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchSettingsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-settings',\n                template: \"<div class=\\\"igo-search-settings\\\">\\n\\n  <button\\n    mat-icon-button\\n    class=\\\"igo-search-settings-button\\\"\\n    color=\\\"primary\\\"\\n    tooltip-position=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"'igo.geo.search.menu.tooltip' | translate\\\"\\n    [matMenuTriggerFor]=\\\"searchSettingsMenu\\\">\\n    <mat-icon svgIcon=\\\"chevron-down\\\"></mat-icon>\\n  </button>\\n  <mat-menu\\n    #searchSettingsMenu=\\\"matMenu\\\"\\n    class=\\\"no-border-radius\\\">\\n    <div class=\\\"checkAllButton\\\" *ngIf=\\\"getSearchSources().length>4\\\">\\n      <button mat-raised-button\\n        (click)=\\\"checkUncheckAllSources($event)\\\">{{!searchSourcesAllEnabled  ? ('igo.geo.search.searchSources.unselectAll' | translate): ('igo.geo.search.searchSources.selectAll' | translate)}}</button>\\n    </div>\\n      <ng-container *ngFor=\\\"let source of getSearchSources()\\\">\\n        <span class=\\\"igo-search-settings-search-source\\\">\\n          <mat-checkbox\\n            class=\\\"igo-search-settings-checkbox\\\"\\n            [checked]=\\\"source.enabled\\\"\\n            [value]=\\\"source\\\"\\n            (click)=\\\"$event.stopPropagation()\\\"\\n            (change)=\\\"onCheckSearchSource($event, source)\\\">\\n          </mat-checkbox>\\n          <button *ngIf=\\\"source.settings.length\\u00A0>\\u00A00\\\"\\n            [matMenuTriggerFor]=\\\"sub_menu\\\"\\n            mat-menu-item>{{source.title}}\\n          </button>\\n          <button\\n            mat-menu-item\\n            *ngIf=\\\"source.settings.length\\u00A0===\\u00A00\\\">\\n            {{source.title}}\\n          </button>\\n        </span>\\n          <mat-menu #sub_menu=\\\"matMenu\\\">\\n            <ng-container *ngFor=\\\"let setting of source.settings\\\">\\n              <button\\n                  mat-menu-item\\n                  [matMenuTriggerFor]=\\\"test_sub_menu\\\">\\n                {{'igo.geo.search.searchSources.settings.'+ setting.title | translate}}\\n              </button>\\n              <mat-menu #test_sub_menu=\\\"matMenu\\\"\\n                [ngSwitch]=\\\"setting.type\\\"\\n                yPosition=\\\"above\\\">\\n                <span *ngSwitchCase=\\\"'radiobutton'\\\">\\n                  <mat-radio-group\\n                    class=\\\"igo-search-settings-radio-group\\\"\\n                    [value]=\\\"setting\\\">\\n                    <mat-radio-button *ngFor=\\\"let settingValue of setting.values\\\"\\n                      class=\\\"mat-typography\\\"\\n                      [value]=\\\"settingValue\\\"\\n                      [checked]=\\\"settingValue.enabled\\\"\\n                      (click)=\\\"$event.stopPropagation()\\\"\\n                      (change)=\\\"settingsValueCheckedRadioButton($event, source, setting, settingValue)\\\">\\n                      {{settingValue.title | translate}}\\n                    </mat-radio-button>\\n                  </mat-radio-group>\\n                </span>\\n                <span *ngSwitchCase=\\\"'checkbox'\\\">\\n                  <div class=\\\"checkAllButton\\\" *ngIf=\\\"setting.values.length\\u00A0>\\u00A03\\\">\\n                    <button mat-raised-button\\n                      (click)=\\\"checkUncheckAll($event, source, setting)\\\">{{setting.allEnabled || setting.allEnabled === undefined  ? ('igo.geo.search.searchSources.settings.unselectAll' | translate): ('igo.geo.search.searchSources.settings.selectAll' | translate)}}</button>\\n                  </div>\\n                  <mat-checkbox *ngFor=\\\"let settingValue of getAvailableValues(setting)\\\"\\n                    class=\\\"mat-menu-item\\\"\\n                    [checked]=\\\"settingValue.enabled\\\"\\n                    [value]=\\\"setting\\\"\\n                    [matTooltip]=\\\"getAvailableHashtagsValues(settingValue)\\\"\\n                    (click)=\\\"$event.stopPropagation()\\\"\\n                    (change)=\\\"settingsValueCheckedCheckbox($event, source, setting, settingValue)\\\">\\n                    {{settingValue.title | translate}}\\n                  </mat-checkbox>\\n                </span>\\n              </mat-menu>\\n            </ng-container>\\n          </mat-menu>\\n      </ng-container>\\n      <span *ngIf=\\\"hasPointerReverseSearchSource && !isTouchScreen\\\">\\n        <mat-divider></mat-divider>\\n        <span class=\\\"pointer-summary-slide-toggle-container mat-typography\\\">\\n          <mat-slide-toggle class=\\\"pointer-summary-option\\\" (change)=\\\"changePointerReverseSearch($event)\\\" tooltip-position=\\\"below\\\"\\n            matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"'igo.geo.search.pointerSearchSummary.tooltip' | translate\\\"\\n            (click)=\\\"$event.stopPropagation()\\\" [checked]=\\\"pointerSummaryEnabled\\\" [labelPosition]=\\\"'after'\\\">\\n            {{'igo.geo.search.pointerSearchSummary.title' | translate}}\\n          </mat-slide-toggle>\\n        </span>\\n      </span>\\n  </mat-menu>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".checkAllButton{padding:0 5px;text-align:center}.igo-search-settings-button ::ng-deep div.mat-button-ripple-round{border-radius:0}.igo-search-settings-radio-group{display:flex;flex-direction:column}.igo-search-settings-radio-group mat-radio-button{margin:5px}.igo-search-settings-checkbox mat-radio-button{display:flex}.igo-search-settings-search-source{display:flex;width:100%}.igo-search-settings-search-source mat-checkbox{display:flex;margin-left:5px;margin-right:5px}.pointer-summary-option{display:block;margin-bottom:15px;margin-right:10px}.pointer-summary-slide-toggle-container{overflow-x:hidden}.pointer-summary-slide-toggle-container mat-slide-toggle{margin:10px}\"]\n            }]\n    }], function () { return [{ type: SearchSourceService }, { type: ɵngcc7.MediaService }]; }, { pointerSummaryEnabled: [{\n            type: Input\n        }], searchSourceChange: [{\n            type: Output\n        }], pointerSummaryStatus: [{\n            type: Output\n        }], handleKeyboardEvent: [{\n            type: HostListener,\n            args: ['document:keydown', ['$event']]\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoSearchSettingsModule {\n}\nIgoSearchSettingsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoSearchSettingsModule });\nIgoSearchSettingsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoSearchSettingsModule_Factory(t) { return new (t || IgoSearchSettingsModule)(); }, imports: [[\n            CommonModule,\n            MatTooltipModule,\n            MatIconModule,\n            MatButtonModule,\n            MatMenuModule,\n            MatRadioModule,\n            MatCheckboxModule,\n            MatDividerModule,\n            MatSlideToggleModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoSearchSettingsModule, { declarations: function () { return [SearchSettingsComponent]; }, imports: function () { return [CommonModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatButtonModule,\n        MatMenuModule,\n        MatRadioModule,\n        MatCheckboxModule,\n        MatDividerModule,\n        MatSlideToggleModule,\n        IgoLanguageModule]; }, exports: function () { return [SearchSettingsComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoSearchSettingsModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [SearchSettingsComponent],\n                imports: [\n                    CommonModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatMenuModule,\n                    MatRadioModule,\n                    MatCheckboxModule,\n                    MatDividerModule,\n                    MatSlideToggleModule,\n                    IgoLanguageModule\n                ],\n                exports: [SearchSettingsComponent]\n            }]\n    }], null, null); })();\n\n/**\n * Searchbar that triggers a research in all search sources enabled.\n * If the store input is defined, the search results will be loaded\n * into that store. An event is always emitted when a research is completed.\n */\nclass SearchBarComponent {\n    constructor(languageService, searchService, searchSourceService) {\n        this.languageService = languageService;\n        this.searchService = searchService;\n        this.searchSourceService = searchSourceService;\n        this.placeholder$ = new BehaviorSubject('igo.geo.search.placeholder');\n        this.empty$ = new BehaviorSubject(true);\n        /**\n         * Search term stream\n         */\n        this.stream$ = new BehaviorSubject('');\n        /**\n         * List of available search types\n         */\n        this.searchTypes = SEARCH_TYPES;\n        this.searchType$ = new BehaviorSubject(undefined);\n        /**\n         * Event emitted when the pointer summary is activated by the searchbar setting\n         */\n        this.pointerSummaryStatus = new EventEmitter();\n        this.term$ = new BehaviorSubject('');\n        this.disabled$ = new BehaviorSubject(false);\n        this.pointerSummaryEnabled = false;\n        /**\n         * Whether a float label should be displayed\n         */\n        this.floatLabel = 'never';\n        this.appearance = 'legacy';\n        /**\n         * Icons color (search and clear)\n         */\n        this.color = 'primary';\n        /**\n         * Debounce time between each keystroke\n         */\n        this.debounce = 200;\n        /**\n         * Minimum term length required to trigger a research\n         */\n        this.minLength = 2;\n        /**\n         * Search Selector\n         */\n        this.searchSelector = false;\n        /**\n         * Search Settings\n         */\n        this.searchSettings = false;\n        /**\n         * Force coordinates in north america\n         */\n        this.forceNA = false;\n        /**\n         * Event emitted when the search term changes\n         */\n        this.searchTermChange = new EventEmitter();\n        /**\n         * Event emitted when a research is completed\n         */\n        this.search = new EventEmitter();\n        /**\n         * Event emitted when the search type changes\n         */\n        this.searchTypeChange = new EventEmitter();\n        /**\n         * Event emitted when the search type changes\n         */\n        this.clearFeature = new EventEmitter();\n        /**\n         * Event emitted when the search settings changes\n         */\n        this.searchSettingsChange = new EventEmitter();\n    }\n    /**\n     * Search term\n     */\n    set searchType(value) {\n        this.setSearchType(value);\n    }\n    get searchType() {\n        return this.searchType$.value;\n    }\n    /**\n     * Search term\n     */\n    set term(value) {\n        this.setTerm(value);\n    }\n    get term() {\n        return this.term$.value;\n    }\n    /**\n     * Whether this component is disabled\n     */\n    set disabled(value) {\n        this.disabled$.next(value);\n    }\n    get disabled() {\n        return this.disabled$.value;\n    }\n    /**\n     * Whether the search bar is empty\n     * @internal\n     */\n    get empty() {\n        return this.term.length === 0;\n    }\n    /**\n     * Subscribe to the search term stream and trigger researches\n     * @internal\n     */\n    ngOnInit() {\n        this.term$$ = this.term$.subscribe((term) => {\n            this.empty$.next(term === undefined || term.length === 0);\n        });\n        this.stream$$ = this.stream$\n            .pipe(debounce((term) => (term === '' ? EMPTY : timer(this.debounce))))\n            .subscribe((term) => this.onSetTerm(term));\n        this.handlePlaceholder();\n        this.searchType$$ = this.searchType$\n            .pipe(distinctUntilChanged())\n            .subscribe((searchType) => this.onSetSearchType(searchType));\n    }\n    /**\n     * Unsubscribe to the search term stream\n     * @internal\n     */\n    ngOnDestroy() {\n        this.term$$.unsubscribe();\n        this.stream$$.unsubscribe();\n        this.searchType$$.unsubscribe();\n    }\n    /**\n     * When a user types, validates the key and send it into the\n     * stream if it's valid\n     * @param event Keyboard event\n     * @internal\n     */\n    onKeyup(event) {\n        const key = event.key;\n        if (!this.keyIsValid(key)) {\n            return;\n        }\n        const term = event.target.value;\n        this.setTerm(term);\n    }\n    /**\n     * Clear the stream and the input\n     * @internal\n     */\n    onClearButtonClick() {\n        this.clear();\n        this.clearFeature.emit();\n    }\n    /**\n     * Update search type\n     * @param searchType Enabled search type\n     * @internal\n     */\n    onSearchTypeChange(searchType) {\n        this.setSearchType(searchType);\n    }\n    /**\n     * Update the placeholder with the enabled search type. The placeholder\n     * for all availables search typers needs to be defined in the locale\n     * files or an error will be thrown.\n     * @param searchType Enabled search type\n     * @internal\n     */\n    setSearchType(searchType) {\n        this.searchType$.next(searchType);\n    }\n    onSearchSettingsChange() {\n        this.doSearch(this.term);\n        this.searchSettingsChange.emit();\n        this.handlePlaceholder();\n    }\n    /**\n     * Send the term into the stream only if this component is not disabled\n     * @param term Search term\n     */\n    setTerm(term) {\n        if (this.disabled) {\n            return;\n        }\n        term = term || '';\n        if (term !== this.term) {\n            this.term$.next(term);\n        }\n        const slug = term.replace(/(#[^\\s]*)/g, '').trim();\n        if (slug.length >= this.minLength || slug.length === 0) {\n            this.stream$.next(term);\n        }\n    }\n    /**\n     * Clear the stream and the input\n     */\n    clear() {\n        this.term$.next('');\n        this.stream$.next('');\n        this.input.nativeElement.focus();\n    }\n    /**\n     * Validate if a given key stroke is a valid input\n     */\n    keyIsValid(key) {\n        return SearchBarComponent.invalidKeys.indexOf(key) === -1;\n    }\n    /**\n     * When the search term changes, emit an event and trigger a\n     * research in every enabled search sources.\n     * @param term Search term\n     */\n    onSetTerm(term) {\n        this.searchTermChange.emit(term);\n        this.doSearch(term);\n    }\n    handlePlaceholder() {\n        const searchTypes = [\n            ...new Set(this.searchSourceService\n                .getEnabledSources()\n                .filter((ss) => !['map', 'coordinatesreverse'].includes(ss.getId()))\n                .map((ss) => ss.getType()))\n        ];\n        let placeholder = `igo.geo.search.placeholder`;\n        if (searchTypes.length === 1) {\n            placeholder = `igo.geo.search.${searchTypes[0].toLowerCase()}.placeholder`;\n        }\n        else if (searchTypes.length === 0) {\n            placeholder = `igo.geo.search.emptyType.placeholder`;\n        }\n        this.placeholder$.next(placeholder);\n    }\n    onSetSearchType(searchType) {\n        if (searchType === undefined || searchType === null) {\n            return;\n        }\n        this.searchTypeChange.emit(searchType);\n        const placeholder = `igo.geo.search.${searchType.toLowerCase()}.placeholder`;\n        this.placeholder$.next(placeholder);\n        this.setTerm(this.term);\n    }\n    /**\n     * Execute the search\n     * @param term Search term\n     */\n    doSearch(term) {\n        if (this.researches$$) {\n            this.researches$$.map((research) => research.unsubscribe());\n            this.researches$$ = undefined;\n        }\n        const slug = term ? term.replace(/(#[^\\s]*)/g, '').trim() : '';\n        if (slug === '') {\n            if (this.store !== undefined) {\n                this.store.clear();\n            }\n            return;\n        }\n        const researches = this.searchService.search(term, {\n            forceNA: this.forceNA\n        });\n        this.researches$$ = researches.map((research) => {\n            return research.request.subscribe((results) => {\n                this.onResearchCompleted(research, results);\n            });\n        });\n    }\n    /**\n     * When a research  is completed, emit an event and update\n     * the store's items.\n     * @param research Research\n     * @param results Research results\n     */\n    onResearchCompleted(research, results) {\n        this.search.emit({ research, results });\n        if (this.store !== undefined) {\n            const newResults = this.store\n                .all()\n                .filter((result) => result.source !== research.source)\n                .concat(results);\n            this.store.load(newResults);\n        }\n    }\n}\nSearchBarComponent.ɵfac = function SearchBarComponent_Factory(t) { return new (t || SearchBarComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc7.LanguageService), ɵngcc0.ɵɵdirectiveInject(SearchService), ɵngcc0.ɵɵdirectiveInject(SearchSourceService)); };\nSearchBarComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SearchBarComponent, selectors: [[\"igo-search-bar\"]], viewQuery: function SearchBarComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c27, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.input = _t.first);\n    } }, inputs: { searchTypes: \"searchTypes\", pointerSummaryEnabled: \"pointerSummaryEnabled\", floatLabel: \"floatLabel\", appearance: \"appearance\", color: \"color\", debounce: \"debounce\", minLength: \"minLength\", searchSelector: \"searchSelector\", searchSettings: \"searchSettings\", forceNA: \"forceNA\", searchType: \"searchType\", term: \"term\", disabled: \"disabled\", placeholder: \"placeholder\", label: \"label\", searchIcon: \"searchIcon\", store: \"store\" }, outputs: { pointerSummaryStatus: \"pointerSummaryStatus\", searchTermChange: \"searchTermChange\", search: \"search\", searchTypeChange: \"searchTypeChange\", clearFeature: \"clearFeature\", searchSettingsChange: \"searchSettingsChange\" }, decls: 16, vars: 28, consts: [[1, \"igo-search-bar-container\", 3, \"ngClass\"], [3, \"floatLabel\", \"appearance\"], [4, \"ngIf\"], [\"matInput\", \"\", \"autocomplete\", \"off\", 3, \"ngClass\", \"disabled\", \"placeholder\", \"value\", \"keyup\", \"touchend\"], [\"input\", \"\"], [1, \"search-bar-buttons\"], [\"mat-icon-button\", \"\", 3, \"color\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", 3, \"color\", \"click\", 4, \"ngIf\"], [3, \"searchTypes\", \"searchType\", \"searchTypeChange\", 4, \"ngIf\"], [3, \"pointerSummaryEnabled\", \"pointerSummaryStatus\", \"searchSourceChange\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", 3, \"color\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", 3, \"color\", \"click\"], [\"svgIcon\", \"close\"], [3, \"searchTypes\", \"searchType\", \"searchTypeChange\"], [3, \"pointerSummaryEnabled\", \"pointerSummaryStatus\", \"searchSourceChange\"]], template: function SearchBarComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵelementStart(2, \"mat-form-field\", 1);\n        ɵngcc0.ɵɵtemplate(3, SearchBarComponent_mat_label_3_Template, 2, 1, \"mat-label\", 2);\n        ɵngcc0.ɵɵelementStart(4, \"input\", 3, 4);\n        ɵngcc0.ɵɵlistener(\"keyup\", function SearchBarComponent_Template_input_keyup_4_listener($event) { return ctx.onKeyup($event); })(\"touchend\", function SearchBarComponent_Template_input_touchend_4_listener($event) { return ctx.onKeyup($event); });\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵpipe(7, \"async\");\n        ɵngcc0.ɵɵpipe(8, \"translate\");\n        ɵngcc0.ɵɵpipe(9, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"div\", 5);\n        ɵngcc0.ɵɵtemplate(11, SearchBarComponent_button_11_Template, 2, 2, \"button\", 6);\n        ɵngcc0.ɵɵtemplate(12, SearchBarComponent_button_12_Template, 2, 1, \"button\", 7);\n        ɵngcc0.ɵɵpipe(13, \"async\");\n        ɵngcc0.ɵɵtemplate(14, SearchBarComponent_igo_search_selector_14_Template, 2, 4, \"igo-search-selector\", 8);\n        ɵngcc0.ɵɵtemplate(15, SearchBarComponent_igo_search_settings_15_Template, 1, 1, \"igo-search-settings\", 9);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(24, _c28, ɵngcc0.ɵɵpipeBind1(1, 12, ctx.empty$)));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"floatLabel\", ctx.floatLabel)(\"appearance\", ctx.appearance);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.label);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(26, _c29, ctx.searchIcon))(\"disabled\", ɵngcc0.ɵɵpipeBind1(6, 14, ctx.disabled$))(\"placeholder\", ctx.placeholder ? ctx.placeholder : ɵngcc0.ɵɵpipeBind1(7, 16, ctx.placeholder$) ? ɵngcc0.ɵɵpipeBind1(8, 18, ctx.placeholder$.value) : undefined)(\"value\", ɵngcc0.ɵɵpipeBind1(9, 20, ctx.term$));\n        ɵngcc0.ɵɵadvance(7);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.searchIcon !== undefined);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ɵngcc0.ɵɵpipeBind1(13, 22, ctx.empty$));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.searchSelector);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.searchSettings);\n    } }, directives: [ɵngcc1.NgClass, ɵngcc14.MatFormField, ɵngcc1.NgIf, ɵngcc19.MatInput, ɵngcc14.MatLabel, ɵngcc2.MatButton, ɵngcc4.MatIcon, SearchSelectorComponent, SearchSettingsComponent], pipes: [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe], styles: [\"[_nghost-%COMP%]     .mat-form-field{padding:0 5px}[_nghost-%COMP%]     .mat-form-field-wrapper{margin-bottom:-1.5em}[_nghost-%COMP%]     span.mat-form-field-label-wrapper{top:-20px}[_nghost-%COMP%]     div.mat-form-field-infix{left:5px;padding:0 0 12px!important;right:5px}[_nghost-%COMP%]     div.mat-form-field-underline{display:none}.igo-search-bar-container[_ngcontent-%COMP%]{display:inline-flex;overflow:hidden;position:relative;width:100%}.igo-search-bar-container[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 80px)}.igo-search-bar-container.empty[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 40px)}.search-bar-buttons[_ngcontent-%COMP%]{display:inline-flex;position:relative;right:0;top:0}.search-bar-buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:nth-child(2):before{border-right:1px solid #ddd;content:\\\"\\\";height:28px;left:0;top:5px}igo-search-selector[_ngcontent-%COMP%], igo-search-settings[_ngcontent-%COMP%]{background-color:#fff;border-radius:0;top:0}\"], changeDetection: 0 });\n/**\n * Invalid keys\n */\nSearchBarComponent.invalidKeys = [\n    'Control',\n    'Shift',\n    'Alt',\n    'ArrowDown',\n    'ArrowUp',\n    'ArrowRight',\n    'ArrowLeft'\n];\nSearchBarComponent.ctorParameters = () => [\n    { type: LanguageService },\n    { type: SearchService },\n    { type: SearchSourceService }\n];\nSearchBarComponent.propDecorators = {\n    searchTypes: [{ type: Input }],\n    searchType: [{ type: Input }],\n    pointerSummaryStatus: [{ type: Output }],\n    term: [{ type: Input }],\n    disabled: [{ type: Input }],\n    pointerSummaryEnabled: [{ type: Input }],\n    floatLabel: [{ type: Input }],\n    appearance: [{ type: Input }],\n    placeholder: [{ type: Input }],\n    label: [{ type: Input }],\n    color: [{ type: Input }],\n    debounce: [{ type: Input }],\n    minLength: [{ type: Input }],\n    searchIcon: [{ type: Input }],\n    searchSelector: [{ type: Input }],\n    searchSettings: [{ type: Input }],\n    forceNA: [{ type: Input }],\n    store: [{ type: Input }],\n    searchTermChange: [{ type: Output }],\n    search: [{ type: Output }],\n    searchTypeChange: [{ type: Output }],\n    clearFeature: [{ type: Output }],\n    searchSettingsChange: [{ type: Output }],\n    input: [{ type: ViewChild, args: ['input', { static: true },] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchBarComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-bar',\n                template: \"<div class=\\\"igo-search-bar-container\\\" [ngClass]=\\\"{empty: empty$ | async}\\\">\\n  <mat-form-field [floatLabel]=\\\"floatLabel\\\" [appearance]=\\\"appearance\\\">\\n    <mat-label *ngIf=\\\"label\\\">{{label}}</mat-label>\\n    <input\\n      #input\\n      matInput\\n      autocomplete=\\\"off\\\"\\n      [ngClass]=\\\"{'hasSearchIcon': searchIcon}\\\"\\n      [disabled]=\\\"disabled$ | async\\\"\\n      [placeholder]=\\\"placeholder ? placeholder : (placeholder$ | async) ? (placeholder$.value | translate) : undefined\\\"\\n      [value]=\\\"term$ | async\\\"\\n      (keyup)=\\\"onKeyup($event)\\\"\\n      (touchend)=\\\"onKeyup($event)\\\">\\n  </mat-form-field>\\n\\n  <div class=\\\"search-bar-buttons\\\">\\n    <button\\n      mat-icon-button\\n      [color]=\\\"color\\\"\\n      *ngIf=\\\"searchIcon !== undefined\\\">\\n      <mat-icon svgIcon=\\\"{{searchIcon}}\\\"></mat-icon>\\n    </button>\\n\\n    <button\\n      *ngIf=\\\"!(empty$ | async)\\\"\\n      mat-icon-button\\n      [color]=\\\"color\\\"\\n      (click)=\\\"onClearButtonClick()\\\">\\n      <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n    </button>\\n\\n    <igo-search-selector\\n      *ngIf=\\\"searchSelector\\\"\\n      [searchTypes]=\\\"searchTypes\\\"\\n      [searchType]=\\\"searchType$ | async\\\"\\n      (searchTypeChange)=\\\"onSearchTypeChange($event)\\\">\\n    </igo-search-selector>\\n\\n    <igo-search-settings\\n      *ngIf=\\\"searchSettings\\\"\\n      [pointerSummaryEnabled]=\\\"pointerSummaryEnabled\\\"\\n      (pointerSummaryStatus)=\\\"pointerSummaryStatus.emit($event)\\\"\\n      (searchSourceChange)=\\\"onSearchSettingsChange()\\\">\\n    </igo-search-settings>\\n  </div>\\n</div>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host ::ng-deep .mat-form-field{padding:0 5px}:host ::ng-deep .mat-form-field-wrapper{margin-bottom:-1.5em}:host ::ng-deep span.mat-form-field-label-wrapper{top:-20px}:host ::ng-deep div.mat-form-field-infix{left:5px;padding:0 0 12px!important;right:5px}:host ::ng-deep div.mat-form-field-underline{display:none}.igo-search-bar-container{display:inline-flex;overflow:hidden;position:relative;width:100%}.igo-search-bar-container>mat-form-field{width:calc(100% - 80px)}.igo-search-bar-container.empty>mat-form-field{width:calc(100% - 40px)}.search-bar-buttons{display:inline-flex;position:relative;right:0;top:0}.search-bar-buttons>button:nth-child(2):before{border-right:1px solid #ddd;content:\\\"\\\";height:28px;left:0;top:5px}igo-search-selector,igo-search-settings{background-color:#fff;border-radius:0;top:0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc7.LanguageService }, { type: SearchService }, { type: SearchSourceService }]; }, { searchTypes: [{\n            type: Input\n        }], pointerSummaryStatus: [{\n            type: Output\n        }], pointerSummaryEnabled: [{\n            type: Input\n        }], floatLabel: [{\n            type: Input\n        }], appearance: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }], debounce: [{\n            type: Input\n        }], minLength: [{\n            type: Input\n        }], searchSelector: [{\n            type: Input\n        }], searchSettings: [{\n            type: Input\n        }], forceNA: [{\n            type: Input\n        }], searchTermChange: [{\n            type: Output\n        }], search: [{\n            type: Output\n        }], searchTypeChange: [{\n            type: Output\n        }], clearFeature: [{\n            type: Output\n        }], searchSettingsChange: [{\n            type: Output\n        }], searchType: [{\n            type: Input\n        }], term: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], placeholder: [{\n            type: Input\n        }], label: [{\n            type: Input\n        }], searchIcon: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], input: [{\n            type: ViewChild,\n            args: ['input', { static: true }]\n        }] }); })();\n\nclass SearchUrlParamDirective {\n    constructor(component, ref, route) {\n        this.component = component;\n        this.ref = ref;\n        this.route = route;\n    }\n    ngOnInit() {\n        if (this.route && this.route.options.searchKey) {\n            this.route.queryParams.subscribe(params => {\n                const searchParams = params[this.route.options.searchKey];\n                if (searchParams) {\n                    this.component.setTerm(searchParams);\n                    this.ref.detectChanges();\n                }\n            });\n        }\n    }\n}\nSearchUrlParamDirective.ɵfac = function SearchUrlParamDirective_Factory(t) { return new (t || SearchUrlParamDirective)(ɵngcc0.ɵɵdirectiveInject(SearchBarComponent, 2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.RouteService, 8)); };\nSearchUrlParamDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: SearchUrlParamDirective, selectors: [[\"\", \"igoSearchUrlParam\", \"\"]] });\nSearchUrlParamDirective.ctorParameters = () => [\n    { type: SearchBarComponent, decorators: [{ type: Self }] },\n    { type: ChangeDetectorRef },\n    { type: RouteService, decorators: [{ type: Optional }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchUrlParamDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSearchUrlParam]'\n            }]\n    }], function () { return [{ type: SearchBarComponent, decorators: [{\n                type: Self\n            }] }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc7.RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\n/**\n * @ignore\n */\nclass IgoSearchBarModule {\n}\nIgoSearchBarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoSearchBarModule });\nIgoSearchBarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoSearchBarModule_Factory(t) { return new (t || IgoSearchBarModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            MatTooltipModule,\n            MatIconModule,\n            MatButtonModule,\n            MatMenuModule,\n            MatRadioModule,\n            MatFormFieldModule,\n            MatInputModule,\n            IgoLanguageModule,\n            IgoSearchSelectorModule,\n            IgoSearchSettingsModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoSearchBarModule, { declarations: function () { return [SearchBarComponent, SearchUrlParamDirective]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatButtonModule,\n        MatMenuModule,\n        MatRadioModule,\n        MatFormFieldModule,\n        MatInputModule,\n        IgoLanguageModule, IgoSearchSelectorModule, IgoSearchSettingsModule]; }, exports: function () { return [SearchBarComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoSearchBarModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatMenuModule,\n                    MatRadioModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    IgoLanguageModule,\n                    IgoSearchSelectorModule,\n                    IgoSearchSettingsModule\n                ],\n                exports: [\n                    SearchBarComponent,\n                ],\n                declarations: [\n                    SearchBarComponent,\n                    SearchUrlParamDirective\n                ]\n            }]\n    }], null, null); })();\n\nvar SearchResultMode;\n(function (SearchResultMode) {\n    SearchResultMode[\"Grouped\"] = \"grouped\";\n    SearchResultMode[\"Flat\"] = \"flat\";\n})(SearchResultMode || (SearchResultMode = {}));\n/**\n * List of search results with focus and selection capabilities.\n * This component is dumb and only emits events.\n */\nclass SearchResultsComponent {\n    constructor(cdRef, searchService) {\n        this.cdRef = cdRef;\n        this.searchService = searchService;\n        /**\n         * Reference to the SearchResultMode enum\n         * @internal\n         */\n        this.searchResultMode = SearchResultMode;\n        this.pageIterator = [];\n        this.collapsed = [];\n        /**\n         * Search results display mode\n         */\n        this.mode = SearchResultMode.Grouped;\n        /**\n         * Whether there should be a zoom button\n         */\n        this.withZoomButton = false;\n        this.settingsChange$ = new BehaviorSubject(undefined);\n        /**\n         * Event emitted when a result is focused\n         */\n        this.resultFocus = new EventEmitter();\n        /**\n         * Event emitted when a result is unfocused\n         */\n        this.resultUnfocus = new EventEmitter();\n        /**\n         * Event emitted when a result is selected\n         */\n        this.resultSelect = new EventEmitter();\n        /**\n         * Event emitted when a research is completed after displaying more results is clicked\n         */\n        this.moreResults = new EventEmitter();\n        /**\n         * Events emitted when a result is focus or unfocus by mouse event\n         */\n        this.resultMouseenter = new EventEmitter();\n        this.resultMouseleave = new EventEmitter();\n    }\n    /**\n     * Search term\n     */\n    get term() {\n        return this._term;\n    }\n    set term(value) {\n        this._term = value;\n        this.pageIterator = [];\n    }\n    get results$() {\n        if (this._results$ === undefined) {\n            this._results$ = this.liftResults();\n        }\n        return this._results$;\n    }\n    /**\n     * Bind the search results store to the watcher\n     * @internal\n     */\n    ngOnInit() {\n        this.watcher = new EntityStoreWatcher(this.store, this.cdRef);\n        this.settingsChange$.subscribe(() => {\n            this.pageIterator = [];\n        });\n    }\n    /**\n     * Unbind the search results store from the watcher\n     * @internal\n     */\n    ngOnDestroy() {\n        this.watcher.destroy();\n    }\n    /**\n     * Compute a group title\n     * @param group Search results group\n     * @returns Group title\n     * @internal\n     */\n    computeGroupTitle(group) {\n        const parts = [group.source.title];\n        const count = group.results.length;\n        if (count > 1) {\n            parts.push(`(${count})`);\n        }\n        return parts.join(' ');\n    }\n    /**\n     * When a result is selected, update it's state in the store and emit\n     * an event. A selected result is also considered focused\n     * @param result Search result\n     * @internal\n     */\n    onResultSelect(result) {\n        if (this.store.state.get(result)) {\n            if (this.store.state.get(result).selected === true) {\n                return;\n            }\n        }\n        this.store.state.update(result, { focused: true, selected: true }, true);\n        this.resultSelect.emit(result);\n    }\n    /**\n     * Return an observable of the search results, grouped by search source\n     * @returns Observable of grouped search results\n     * @internal\n     */\n    liftResults() {\n        return this.store.view.all$().pipe(debounce((results) => {\n            return results.length === 0 ? EMPTY : timer(200);\n        }), map((results) => {\n            return this.groupResults(results.sort(this.sortByOrder));\n        }));\n    }\n    /**\n     * Sort the results by display order.\n     * @param r1 First result\n     * @param r2 Second result\n     */\n    sortByOrder(r1, r2) {\n        return r1.source.displayOrder - r2.source.displayOrder;\n    }\n    /**\n     * Group results by search source\n     * @param results Search results from all sources\n     * @returns Search results grouped by source\n     */\n    groupResults(results) {\n        const grouped = new Map();\n        results.forEach((result) => {\n            const source = result.source;\n            let sourceResults = grouped.get(source);\n            if (sourceResults === undefined) {\n                sourceResults = [];\n                grouped.set(source, sourceResults);\n            }\n            sourceResults.push(result);\n        });\n        return Array.from(grouped.keys()).map((source) => {\n            if (this.pageIterator[source.getId()] === undefined) {\n                this.pageIterator[source.getId()] = 1;\n            }\n            return { source, results: grouped.get(source) };\n        });\n    }\n    isMoreResults(group) {\n        return group.results && group.results[group.results.length - 1].meta.nextPage === true;\n    }\n    displayMoreResults(group) {\n        const options = {\n            sourceId: group.source.getId(),\n            page: ++this.pageIterator[group.source.getId()]\n        };\n        const researches = this.searchService.search(this.term, options);\n        researches.map(research => {\n            research.request.subscribe((results) => {\n                const newResults = group.results.concat(results);\n                if (!results.length) {\n                    newResults[newResults.length - 1].meta.nextPage = false;\n                }\n                this.moreResults.emit({ research, results: newResults });\n            });\n        });\n        return;\n    }\n}\nSearchResultsComponent.ɵfac = function SearchResultsComponent_Factory(t) { return new (t || SearchResultsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(SearchService)); };\nSearchResultsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SearchResultsComponent, selectors: [[\"igo-search-results\"]], contentQueries: function SearchResultsComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, _c30, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.templateSearchToolbar = _t.first);\n    } }, inputs: { mode: \"mode\", withZoomButton: \"withZoomButton\", settingsChange$: \"settingsChange$\", term: \"term\", map: \"map\", store: \"store\", showIcons: \"showIcons\" }, outputs: { resultFocus: \"resultFocus\", resultUnfocus: \"resultUnfocus\", resultSelect: \"resultSelect\", moreResults: \"moreResults\", resultMouseenter: \"resultMouseenter\", resultMouseleave: \"resultMouseleave\" }, decls: 4, vars: 4, consts: [[3, \"navigation\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"groupTemplate\", \"\"], [3, \"class\", \"title\", \"collapsed\", \"toggle\", 4, \"ngIf\", \"ngIfElse\"], [\"flatTemplate\", \"\"], [\"storeItemTemplate\", \"\"], [3, \"title\", \"collapsed\", \"toggle\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"class\", \"moreResults mat-typography\", 3, \"click\", 4, \"ngIf\"], [\"igoListItem\", \"\", \"color\", \"accent\", 3, \"map\", \"result\", \"showIcons\", \"withZoomButton\", \"focused\", \"selected\", \"focus\", \"unfocus\", \"select\", \"mouseenter\", \"mouseleave\"], [\"igoSearchItemToolbar\", \"\", 3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [1, \"moreResults\", \"mat-typography\", 3, \"click\"]], template: function SearchResultsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-list\", 0);\n        ɵngcc0.ɵɵtemplate(1, SearchResultsComponent_ng_template_1_Template, 5, 2, \"ng-template\", 1, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵpipe(3, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"navigation\", true);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(3, 2, ctx.results$));\n    } }, directives: function () { return [ɵngcc9.ListComponent, ɵngcc1.NgForOf, ɵngcc1.NgIf, ɵngcc9.CollapsibleComponent, ɵngcc1.NgTemplateOutlet, SearchResultsItemComponent, ɵngcc9.ListItemDirective]; }, pipes: function () { return [ɵngcc1.AsyncPipe, ɵngcc5.TranslatePipe]; }, styles: [\".moreResults[_ngcontent-%COMP%]{color:#00f;cursor:pointer;float:right;margin-right:10px;margin-top:5px}igo-list[_ngcontent-%COMP%]     mat-list{height:100%}\"], changeDetection: 0 });\nSearchResultsComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef },\n    { type: SearchService }\n];\nSearchResultsComponent.propDecorators = {\n    map: [{ type: Input }],\n    store: [{ type: Input }],\n    showIcons: [{ type: Input }],\n    mode: [{ type: Input }],\n    withZoomButton: [{ type: Input }],\n    term: [{ type: Input }],\n    settingsChange$: [{ type: Input }],\n    resultFocus: [{ type: Output }],\n    resultUnfocus: [{ type: Output }],\n    resultSelect: [{ type: Output }],\n    moreResults: [{ type: Output }],\n    resultMouseenter: [{ type: Output }],\n    resultMouseleave: [{ type: Output }],\n    templateSearchToolbar: [{ type: ContentChild, args: ['igoSearchItemToolbar', /* TODO: add static flag */ {},] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchResultsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-results',\n                template: \"<igo-list [navigation]=\\\"true\\\">\\n  <ng-template\\n    #groupTemplate\\n    ngFor let-group\\n    [ngForOf]=\\\"results$ | async\\\">\\n\\n    <igo-collapsible [class]=\\\"group.source.getId()\\\"\\n      *ngIf=\\\"mode === searchResultMode.Grouped; else flatTemplate\\\"\\n      [title]=\\\"computeGroupTitle(group)\\\"\\n      [collapsed]=\\\"collapsed[group.source.title]\\\"\\n      (toggle)=\\\"collapsed[group.source.title] = $event\\\">\\n      <ng-container *ngTemplateOutlet=\\\"storeItemTemplate; context: {results: group.results}\\\"></ng-container>\\n    </igo-collapsible>\\n\\n    <ng-template #flatTemplate>\\n      <ng-container *ngTemplateOutlet=\\\"storeItemTemplate; context: {results: group.results}\\\"></ng-container>\\n    </ng-template>\\n\\n    <ng-template #storeItemTemplate let-results=\\\"results\\\">\\n      <ng-template ngFor let-result [ngForOf]=\\\"results\\\">\\n        <igo-search-results-item\\n          igoListItem\\n          color=\\\"accent\\\"\\n          [map]=\\\"map\\\"\\n          [result]=\\\"result\\\"\\n          [showIcons]=\\\"showIcons\\\"\\n          [withZoomButton]=\\\"withZoomButton\\\"\\n          [focused]=\\\"store.state.get(result).focused\\\"\\n          [selected]=\\\"store.state.get(result).selected\\\"\\n          (focus)=\\\"resultFocus.emit(result)\\\"\\n          (unfocus)=\\\"resultUnfocus.emit(result)\\\"\\n          (select)=\\\"onResultSelect(result)\\\"\\n          (mouseenter)=\\\"resultFocus.emit(result)\\\"\\n          (mouseleave)=\\\"resultUnfocus.emit(result)\\\">\\n\\n          <ng-container igoSearchItemToolbar\\n            [ngTemplateOutlet]=\\\"templateSearchToolbar\\\"\\n            [ngTemplateOutletContext]=\\\"{result: result}\\\">\\n          </ng-container>\\n\\n        </igo-search-results-item>\\n      </ng-template>\\n      <span class=\\\"moreResults mat-typography\\\" *ngIf=\\\"isMoreResults(group)\\\" (click)=\\\"displayMoreResults(group)\\\">\\n        <u>{{ 'igo.geo.search.displayMoreResults' | translate }}</u>\\n      </span>\\n    </ng-template>\\n\\n  </ng-template>\\n\\n</igo-list>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".moreResults{color:#00f;cursor:pointer;float:right;margin-right:10px;margin-top:5px}igo-list ::ng-deep mat-list{height:100%}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: SearchService }]; }, { mode: [{\n            type: Input\n        }], withZoomButton: [{\n            type: Input\n        }], settingsChange$: [{\n            type: Input\n        }], resultFocus: [{\n            type: Output\n        }], resultUnfocus: [{\n            type: Output\n        }], resultSelect: [{\n            type: Output\n        }], moreResults: [{\n            type: Output\n        }], resultMouseenter: [{\n            type: Output\n        }], resultMouseleave: [{\n            type: Output\n        }], term: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], store: [{\n            type: Input\n        }], showIcons: [{\n            type: Input\n        }], templateSearchToolbar: [{\n            type: ContentChild,\n            args: ['igoSearchItemToolbar', /* TODO: add static flag */ {}]\n        }] }); })();\n\n/**\n * Search results list item\n */\nclass SearchResultsItemComponent {\n    constructor() {\n        /**\n         * Whether there should be a zoom button\n         */\n        this.withZoomButton = false;\n        this.zoomEvent = new EventEmitter();\n        this.format = new OlGeoJSON();\n    }\n    get title() {\n        return getEntityTitle(this.result);\n    }\n    /**\n     * Search result HTML title\n     * @internal\n     */\n    get titleHtml() {\n        return getEntityTitleHtml(this.result);\n    }\n    /**\n     * Search result tooltip\n     * @internal\n     */\n    get tooltipHtml() {\n        return this.titleHtml\n            .replace(/<small?[^>]+(>|$)/g, '\\n')\n            .replace(/<\\/?[^>]+(>|$)/g, '');\n    }\n    /**\n     * Search result icon\n     * @internal\n     */\n    get icon() {\n        return getEntityIcon(this.result);\n    }\n    onZoomHandler() {\n        const olFeature = this.format.readFeature(this.result.data, {\n            dataProjection: this.result.data.projection,\n            featureProjection: this.map.projection\n        });\n        moveToOlFeatures(this.map, [olFeature], FeatureMotion.Default);\n    }\n}\nSearchResultsItemComponent.ɵfac = function SearchResultsItemComponent_Factory(t) { return new (t || SearchResultsItemComponent)(); };\nSearchResultsItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SearchResultsItemComponent, selectors: [[\"igo-search-results-item\"]], inputs: { withZoomButton: \"withZoomButton\", result: \"result\", map: \"map\", showIcons: \"showIcons\" }, outputs: { zoomEvent: \"zoomEvent\" }, ngContentSelectors: _c34, decls: 6, vars: 4, consts: [[\"mat-list-avatar\", \"\", 3, \"svgIcon\", 4, \"ngIf\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"search-result-tooltip\", 3, \"innerHtml\", \"matTooltip\", 4, \"ngIf\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", 4, \"ngIf\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", 3, \"click\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", 3, \"svgIcon\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", \"matTooltipClass\", \"search-result-tooltip\", 3, \"innerHtml\", \"matTooltip\"], [\"matLine\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", 3, \"click\"], [\"svgIcon\", \"magnify\"]], template: function SearchResultsItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c33);\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n        ɵngcc0.ɵɵtemplate(1, SearchResultsItemComponent_mat_icon_1_Template, 1, 1, \"mat-icon\", 0);\n        ɵngcc0.ɵɵtemplate(2, SearchResultsItemComponent_h4_2_Template, 1, 2, \"h4\", 1);\n        ɵngcc0.ɵɵtemplate(3, SearchResultsItemComponent_h4_3_Template, 2, 2, \"h4\", 2);\n        ɵngcc0.ɵɵtemplate(4, SearchResultsItemComponent_button_4_Template, 2, 0, \"button\", 3);\n        ɵngcc0.ɵɵprojection(5);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.icon);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.titleHtml);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.titleHtml);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.withZoomButton);\n    } }, directives: [ɵngcc10.MatListItem, ɵngcc1.NgIf, ɵngcc4.MatIcon, ɵngcc10.MatListAvatarCssMatStyler, ɵngcc11.MatLine, ɵngcc3.MatTooltip, ɵngcc2.MatButton, ɵngcc9.StopPropagationDirective], styles: [\"[_nghost-%COMP%]     small{color:#8c8c8c}  .search-result-tooltip{white-space:pre-line}\"], changeDetection: 0 });\nSearchResultsItemComponent.ctorParameters = () => [];\nSearchResultsItemComponent.propDecorators = {\n    result: [{ type: Input }],\n    map: [{ type: Input }],\n    showIcons: [{ type: Input }],\n    withZoomButton: [{ type: Input }],\n    zoomEvent: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchResultsItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-results-item',\n                template: \"<mat-list-item>\\n  <mat-icon *ngIf=\\\"icon\\\" mat-list-avatar svgIcon=\\\"{{showIcons ? icon : 'blank'}}\\\"></mat-icon>\\n\\n  <h4 matLine *ngIf=\\\"titleHtml\\\" [innerHtml]=\\\"titleHtml\\\" matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"tooltipHtml\\\" matTooltipClass=\\\"search-result-tooltip\\\"></h4>\\n  <h4 matLine *ngIf=\\\"!titleHtml\\\" matTooltipShowDelay=\\\"500\\\" [matTooltip]=\\\"title\\\">{{title}}</h4>\\n\\n  <button *ngIf=\\\"withZoomButton\\\"\\n    igoStopPropagation\\n    mat-icon-button\\n    (click)=\\\"onZoomHandler()\\\">\\n    <mat-icon svgIcon=\\\"magnify\\\"></mat-icon>\\n  </button>\\n\\n  <ng-content\\n    select=[igoSearchItemToolbar]>\\n  </ng-content>\\n\\n</mat-list-item>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host ::ng-deep small{color:#8c8c8c}::ng-deep .search-result-tooltip{white-space:pre-line}\"]\n            }]\n    }], function () { return []; }, { withZoomButton: [{\n            type: Input\n        }], zoomEvent: [{\n            type: Output\n        }], result: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], showIcons: [{\n            type: Input\n        }] }); })();\n\nclass SearchResultAddButtonComponent {\n    constructor(layerService) {\n        this.layerService = layerService;\n        this.tooltip$ = new BehaviorSubject('igo.geo.catalog.layer.addToMap');\n        this.inRange$ = new BehaviorSubject(true);\n        this.isPreview$ = new BehaviorSubject(false);\n        this.layersSubcriptions = [];\n        this.mouseInsideAdd = false;\n        this._color = 'primary';\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        if (this.layer.meta.dataType === 'Layer') {\n            this.added =\n                this.map.layers.findIndex(lay => lay.id === this.layer.data.sourceOptions.id) !== -1;\n        }\n        this.resolution$$ = this.map.viewController.resolution$.subscribe(value => {\n            this.isInResolutionsRange(value);\n            this.tooltip$.next(this.computeTooltip());\n        });\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n    }\n    /**\n     * On mouse event, mouseenter /mouseleave\n     * @internal\n     */\n    onMouseEvent(event) {\n        this.onToggleClick(event);\n    }\n    /**\n     * On toggle button click, emit the added change event\n     * @internal\n     */\n    onToggleClick(event) {\n        if (typeof this.lastTimeoutRequest !== 'undefined') {\n            clearTimeout(this.lastTimeoutRequest);\n        }\n        if (event.type === 'mouseenter' && this.mouseInsideAdd) {\n            return;\n        }\n        switch (event.type) {\n            case 'click':\n                if (!this.isPreview$.value) {\n                    if (this.added) {\n                        this.remove();\n                    }\n                    else {\n                        this.add();\n                    }\n                }\n                this.isPreview$.next(false);\n                break;\n            case 'mouseenter':\n                if (!this.isPreview$.value && !this.added) {\n                    this.lastTimeoutRequest = setTimeout(() => {\n                        this.add();\n                        this.isPreview$.next(true);\n                    }, 500);\n                }\n                this.mouseInsideAdd = true;\n                break;\n            case 'mouseleave':\n                if (this.isPreview$.value) {\n                    this.remove();\n                    this.isPreview$.next(false);\n                }\n                this.mouseInsideAdd = false;\n                break;\n            default:\n                break;\n        }\n    }\n    add() {\n        if (!this.added) {\n            this.added = true;\n            this.addLayerToMap();\n        }\n    }\n    remove() {\n        if (this.added) {\n            this.added = false;\n            this.removeLayerFromMap();\n            this.layersSubcriptions.map(s => s.unsubscribe());\n            this.layersSubcriptions = [];\n        }\n    }\n    /**\n     * Emit added change event with added = true\n     */\n    addLayerToMap() {\n        if (this.map === undefined) {\n            return;\n        }\n        if (this.layer.meta.dataType !== LAYER) {\n            return undefined;\n        }\n        const layerOptions = this.layer.data;\n        if (layerOptions.sourceOptions.optionsFromApi === undefined) {\n            layerOptions.sourceOptions.optionsFromApi = true;\n        }\n        this.layersSubcriptions.push(this.layerService\n            .createAsyncLayer(layerOptions)\n            .subscribe(layer => this.map.addLayer(layer)));\n    }\n    /**\n     * Emit added change event with added = false\n     */\n    removeLayerFromMap() {\n        if (this.map === undefined) {\n            return;\n        }\n        if (this.layer.meta.dataType !== LAYER) {\n            return undefined;\n        }\n        const oLayer = this.map.getLayerById(this.layer.data.sourceOptions.id);\n        this.map.removeLayer(oLayer);\n    }\n    isInResolutionsRange(resolution) {\n        const minResolution = this.layer.data.minResolution || 0;\n        const maxResolution = this.layer.data.maxResolution || Infinity;\n        this.inRange$.next(resolution >= minResolution && resolution <= maxResolution);\n    }\n    computeTooltip() {\n        if (this.added) {\n            return this.inRange$.value\n                ? 'igo.geo.catalog.layer.removeFromMap'\n                : 'igo.geo.catalog.layer.removeFromMapOutRange';\n        }\n        else {\n            return this.inRange$.value\n                ? 'igo.geo.catalog.layer.addToMap'\n                : 'igo.geo.catalog.layer.addToMapOutRange';\n        }\n    }\n}\nSearchResultAddButtonComponent.ɵfac = function SearchResultAddButtonComponent_Factory(t) { return new (t || SearchResultAddButtonComponent)(ɵngcc0.ɵɵdirectiveInject(LayerService)); };\nSearchResultAddButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SearchResultAddButtonComponent, selectors: [[\"igo-search-add-button\"]], inputs: { color: \"color\", added: \"added\", layer: \"layer\", map: \"map\" }, decls: 1, vars: 1, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"mouseenter\", \"mouseleave\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"mouseenter\", \"mouseleave\", \"click\"], [\"matBadge\", \"\", \"igoMatBadgeIcon\", \"eye-off\", \"igoMatBadgeInverseColor\", \"true\", \"matBadgeDisabled\", \"true\", \"matBadgeSize\", \"small\", \"matBadgePosition\", \"after\", 3, \"matBadgeHidden\", \"svgIcon\"]], template: function SearchResultAddButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, SearchResultAddButtonComponent_button_0_Template, 7, 14, \"button\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.layer.meta.dataType === \"Layer\");\n    } }, directives: [ɵngcc1.NgIf, ɵngcc2.MatButton, ɵngcc3.MatTooltip, ɵngcc4.MatIcon, ɵngcc12.MatBadge, ɵngcc9.IgoBadgeIconDirective], pipes: [ɵngcc5.TranslatePipe, ɵngcc1.AsyncPipe], styles: [\"\"], changeDetection: 0 });\nSearchResultAddButtonComponent.ctorParameters = () => [\n    { type: LayerService }\n];\nSearchResultAddButtonComponent.propDecorators = {\n    layer: [{ type: Input }],\n    added: [{ type: Input }],\n    map: [{ type: Input }],\n    color: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchResultAddButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-add-button',\n                template: \"<button\\n(mouseenter)=\\\"onMouseEvent($event)\\\" (mouseleave)=\\\"onMouseEvent($event)\\\"\\n*ngIf=\\\"layer.meta.dataType === 'Layer'\\\"\\nmat-icon-button\\ntooltip-position=\\\"below\\\"\\nmatTooltipShowDelay=\\\"500\\\"\\n[matTooltip]=\\\"(tooltip$ | async) | translate\\\"\\n[color]=\\\"(isPreview$ | async) ? '' : added ? 'warn' : ''\\\"\\n(click)=\\\"onToggleClick($event)\\\">\\n<mat-icon\\n  matBadge\\n  igoMatBadgeIcon=\\\"eye-off\\\"\\n  igoMatBadgeInverseColor=\\\"true\\\"\\n  [matBadgeHidden]=\\\"(inRange$ | async)\\\"\\n  matBadgeDisabled=\\\"true\\\"\\n  matBadgeSize=\\\"small\\\"\\n  matBadgePosition=\\\"after\\\"\\n  [svgIcon]=\\\"(isPreview$ | async) ? 'plus' : added ? 'delete' : 'plus'\\\">\\n</mat-icon>\\n</button>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: LayerService }]; }, { color: [{\n            type: Input\n        }], added: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoSearchResultsModule {\n}\nIgoSearchResultsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoSearchResultsModule });\nIgoSearchResultsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoSearchResultsModule_Factory(t) { return new (t || IgoSearchResultsModule)(); }, imports: [[\n            CommonModule,\n            MatBadgeModule,\n            MatTooltipModule,\n            MatIconModule,\n            MatListModule,\n            MatButtonModule,\n            IgoCollapsibleModule,\n            IgoListModule,\n            IgoStopPropagationModule,\n            IgoLanguageModule,\n            IgoMatBadgeIconModule,\n            IgoMetadataModule,\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoSearchResultsModule, { declarations: function () { return [SearchResultsComponent, SearchResultsItemComponent, SearchResultAddButtonComponent]; }, imports: function () { return [CommonModule,\n        MatBadgeModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatListModule,\n        MatButtonModule,\n        IgoCollapsibleModule,\n        IgoListModule,\n        IgoStopPropagationModule,\n        IgoLanguageModule,\n        IgoMatBadgeIconModule, IgoMetadataModule]; }, exports: function () { return [SearchResultsComponent, SearchResultAddButtonComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoSearchResultsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatBadgeModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    MatListModule,\n                    MatButtonModule,\n                    IgoCollapsibleModule,\n                    IgoListModule,\n                    IgoStopPropagationModule,\n                    IgoLanguageModule,\n                    IgoMatBadgeIconModule,\n                    IgoMetadataModule,\n                ],\n                exports: [\n                    SearchResultsComponent,\n                    SearchResultAddButtonComponent\n                ],\n                declarations: [\n                    SearchResultsComponent,\n                    SearchResultsItemComponent,\n                    SearchResultAddButtonComponent\n                ]\n            }]\n    }], null, null); })();\n\n/**\n * This directive makes the mouse coordinate trigger a reverse search on available search sources.\n * The search results are placed into a label, on a cross icon, representing the mouse coordinate.\n * By default, no search sources. Config in config file must be defined.\n * the layer level.\n */\nclass SearchPointerSummaryDirective {\n    constructor(component, searchService, searchSourceService, mediaService) {\n        this.component = component;\n        this.searchService = searchService;\n        this.searchSourceService = searchSourceService;\n        this.mediaService = mediaService;\n        this.pointerSearchStore = new EntityStore([]);\n        this.reverseSearch$$ = [];\n        this.hasPointerReverseSearchSource = false;\n        this.searchPointerSummaryFeatureId = 'searchPointerSummaryFeatureId';\n        /**\n         * The delay where the mouse must be motionless before trigger the reverse search\n         */\n        this.igoSearchPointerSummaryDelay = 1000;\n        /**\n         * If the user has enabled or not the directive\n         */\n        this.igoSearchPointerSummaryEnabled = false;\n    }\n    mouseout() {\n        clearTimeout(this.lastTimeoutRequest);\n        this.clearLayer();\n    }\n    /**\n     * IGO map\n     * @internal\n     */\n    get map() {\n        return this.component.map;\n    }\n    get mapProjection() {\n        return this.component.map.projection;\n    }\n    /**\n     * Start listening to pointermove and reverse search results.\n     * @internal\n     */\n    ngOnInit() {\n        this.listenToMapPointerMove();\n        this.subscribeToPointerStore();\n        this.map.status$.pipe(take(1)).subscribe(() => {\n            this.store = new FeatureStore([], { map: this.map });\n            this.initStore();\n        });\n        // To handle context change without using the contextService.\n        this.layers$$ = this.map.layers$.subscribe((layers) => {\n            if (this.store && !layers.find(l => l.id === 'searchPointerSummaryId')) {\n                this.initStore();\n            }\n        });\n    }\n    /**\n     * Initialize the pointer position store\n     * @internal\n     */\n    initStore() {\n        const store = this.store;\n        const layer = new VectorLayer({\n            id: 'searchPointerSummaryId',\n            title: 'searchPointerSummary',\n            zIndex: 900,\n            source: new FeatureDataSource(),\n            showInLayerList: false,\n            exportable: false,\n            browsable: false,\n            style: pointerPositionSummaryMarker\n        });\n        tryBindStoreLayer(store, layer);\n    }\n    ngAfterContentChecked() {\n        if (!this.searchSourceService.getEnabledSources().filter(sourceCanReverseSearchAsSummary).length) {\n            this.hasPointerReverseSearchSource = false;\n        }\n        else {\n            this.hasPointerReverseSearchSource = true;\n        }\n    }\n    /**\n     * Stop listening to pointermove and reverse search results.\n     * @internal\n     */\n    ngOnDestroy() {\n        this.unlistenToMapPointerMove();\n        this.unsubscribeToPointerStore();\n        this.unsubscribeReverseSearch();\n        this.layers$$.unsubscribe();\n    }\n    /**\n     * Subscribe to pointermove result store\n     * @internal\n     */\n    subscribeToPointerStore() {\n        this.store$$ = this.pointerSearchStore.entities$.subscribe(resultsUnderPointerPosition => {\n            this.entitiesToPointerOverlay(resultsUnderPointerPosition);\n        });\n    }\n    /**\n     * Build an object based on the closest feature by type (base on type and distance properties )\n     * @param results SearchResult[]\n     * @returns OL style function\n     */\n    computeSummaryClosestFeature(results) {\n        const closestResultByType = {};\n        results.map(result => {\n            if (result.data.properties.type && result.data.properties.distance >= 0) {\n                if (closestResultByType.hasOwnProperty(result.data.properties.type)) {\n                    const prevDistance = closestResultByType[result.data.properties.type].distance;\n                    if (result.data.properties.distance < prevDistance) {\n                        closestResultByType[result.data.properties.type] = { distance: result.data.properties.distance, title: result.meta.title };\n                    }\n                }\n                else {\n                    closestResultByType[result.data.properties.type] = { distance: result.data.properties.distance, title: result.meta.title };\n                }\n            }\n        });\n        return closestResultByType;\n    }\n    /**\n     * convert store entities to a pointer position overlay with label summary on.\n     * @param event OL map browser pointer event\n     */\n    entitiesToPointerOverlay(resultsUnderPointerPosition) {\n        const closestResultByType = this.computeSummaryClosestFeature(resultsUnderPointerPosition);\n        const summarizedClosestType = Object.keys(closestResultByType);\n        const processedSummarizedClosestType = [];\n        const summary = [];\n        resultsUnderPointerPosition.map(result => {\n            const typeIndex = summarizedClosestType.indexOf(result.data.properties.type);\n            if (typeIndex !== -1) {\n                summary.push(closestResultByType[result.data.properties.type].title);\n                summarizedClosestType.splice(typeIndex, 1);\n                processedSummarizedClosestType.push(result.data.properties.type);\n            }\n            else {\n                if (processedSummarizedClosestType.indexOf(result.data.properties.type) === -1) {\n                    summary.push(result.meta.title);\n                }\n            }\n        });\n        if (summary.length) {\n            this.addPointerOverlay(summary.join('\\n'));\n        }\n    }\n    /**\n     * On map pointermove\n     */\n    listenToMapPointerMove() {\n        this.pointerMoveListener = this.map.ol.on('pointermove', (event) => this.onMapEvent(event));\n    }\n    /**\n     * Unsubscribe to pointer store.\n     * @internal\n     */\n    unsubscribeToPointerStore() {\n        this.store$$.unsubscribe();\n    }\n    /**\n     * Unsubscribe to reverse seatch store.\n     * @internal\n     */\n    unsubscribeReverseSearch() {\n        this.reverseSearch$$.map(s => s.unsubscribe());\n        this.reverseSearch$$ = [];\n    }\n    /**\n     * Stop listening for map pointermove\n     * @internal\n     */\n    unlistenToMapPointerMove() {\n        this.map.ol.un(this.pointerMoveListener.type, this.pointerMoveListener.listener);\n        this.pointerMoveListener = undefined;\n    }\n    /**\n     * Trigger reverse search when the mouse is motionless during the defined delay (pointerMoveDelay).\n     * @param event OL map browser pointer event\n     */\n    onMapEvent(event) {\n        if (event.dragging || !this.igoSearchPointerSummaryEnabled ||\n            !this.hasPointerReverseSearchSource || this.mediaService.isTouchScreen()) {\n            this.clearLayer();\n            return;\n        }\n        if (typeof this.lastTimeoutRequest !== 'undefined') { // cancel timeout when the mouse moves\n            clearTimeout(this.lastTimeoutRequest);\n            this.clearLayer();\n            this.unsubscribeReverseSearch();\n        }\n        this.lonLat = transform(event.coordinate, this.mapProjection, 'EPSG:4326');\n        this.lastTimeoutRequest = setTimeout(() => {\n            this.onSearchCoordinate();\n        }, this.igoSearchPointerSummaryDelay);\n    }\n    onSearchCoordinate() {\n        this.pointerSearchStore.clear();\n        const results = this.searchService.reverseSearch(this.lonLat, { params: { geometry: 'false', icon: 'false' } }, true);\n        for (const i in results) {\n            if (results.length > 0) {\n                this.reverseSearch$$.push(results[i].request.subscribe((_results) => {\n                    this.onSearch({ research: results[i], results: _results });\n                }));\n            }\n        }\n    }\n    onSearch(event) {\n        const results = event.results;\n        const newResults = this.pointerSearchStore.all()\n            .filter((result) => result.source !== event.research.source)\n            .concat(results);\n        this.pointerSearchStore.load(newResults);\n    }\n    /**\n     * Add a feature to the pointer store\n     * @param text string\n     */\n    addPointerOverlay(text) {\n        this.clearLayer();\n        const geometry = new Point(transform(this.lonLat, 'EPSG:4326', this.mapProjection));\n        const feature = new olFeature({ geometry });\n        const geojsonGeom = new OlGeoJSON().writeGeometryObject(geometry, {\n            featureProjection: this.mapProjection,\n            dataProjection: this.mapProjection\n        });\n        const f = {\n            type: FEATURE,\n            geometry: geojsonGeom,\n            projection: this.mapProjection,\n            properties: {\n                id: this.searchPointerSummaryFeatureId,\n                pointerSummary: text\n            },\n            meta: {\n                id: this.searchPointerSummaryFeatureId\n            },\n            ol: feature\n        };\n        this.store.setLayerFeatures([f], FeatureMotion.None);\n    }\n    /**\n     * Clear the pointer store features\n     */\n    clearLayer() {\n        if (this.store) {\n            this.store.clearLayer();\n        }\n    }\n}\nSearchPointerSummaryDirective.ɵfac = function SearchPointerSummaryDirective_Factory(t) { return new (t || SearchPointerSummaryDirective)(ɵngcc0.ɵɵdirectiveInject(MapBrowserComponent, 2), ɵngcc0.ɵɵdirectiveInject(SearchService), ɵngcc0.ɵɵdirectiveInject(SearchSourceService), ɵngcc0.ɵɵdirectiveInject(ɵngcc7.MediaService)); };\nSearchPointerSummaryDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: SearchPointerSummaryDirective, selectors: [[\"\", \"igoSearchPointerSummary\", \"\"]], hostBindings: function SearchPointerSummaryDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"mouseout\", function SearchPointerSummaryDirective_mouseout_HostBindingHandler() { return ctx.mouseout(); });\n    } }, inputs: { igoSearchPointerSummaryDelay: \"igoSearchPointerSummaryDelay\", igoSearchPointerSummaryEnabled: \"igoSearchPointerSummaryEnabled\" } });\nSearchPointerSummaryDirective.ctorParameters = () => [\n    { type: MapBrowserComponent, decorators: [{ type: Self }] },\n    { type: SearchService },\n    { type: SearchSourceService },\n    { type: MediaService }\n];\nSearchPointerSummaryDirective.propDecorators = {\n    igoSearchPointerSummaryDelay: [{ type: Input }],\n    igoSearchPointerSummaryEnabled: [{ type: Input }],\n    mouseout: [{ type: HostListener, args: ['mouseout',] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchPointerSummaryDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSearchPointerSummary]'\n            }]\n    }], function () { return [{ type: MapBrowserComponent, decorators: [{\n                type: Self\n            }] }, { type: SearchService }, { type: SearchSourceService }, { type: ɵngcc7.MediaService }]; }, { igoSearchPointerSummaryDelay: [{\n            type: Input\n        }], igoSearchPointerSummaryEnabled: [{\n            type: Input\n        }], mouseout: [{\n            type: HostListener,\n            args: ['mouseout']\n        }] }); })();\n/**\n * Create a default style for the pointer position and it's label summary.\n * @param feature OlFeature\n * @returns OL style function\n */\nfunction pointerPositionSummaryMarker(feature, resolution) {\n    return new Style({\n        image: new Icon({\n            src: './assets/igo2/geo/icons/cross_black_18px.svg',\n            imgSize: [18, 18],\n        }),\n        text: new Text({\n            text: feature.get('pointerSummary'),\n            textAlign: 'left',\n            textBaseline: 'bottom',\n            font: '12px Calibri,sans-serif',\n            fill: new Fill({ color: '#000' }),\n            backgroundFill: new Fill({ color: 'rgba(255, 255, 255, 0.5)' }),\n            backgroundStroke: new Stroke({ color: 'rgba(200, 200, 200, 0.75)', width: 2 }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            overflow: true,\n            offsetX: 10,\n            offsetY: -10,\n            padding: [2.5, 2.5, 2.5, 2.5]\n        })\n    });\n}\n\nclass IgoSearchModule {\n    static forRoot() {\n        return {\n            ngModule: IgoSearchModule,\n            providers: [\n                provideSearchSourceService(),\n                provideDefaultIChercheSearchResultFormatter(),\n                provideDefaultCoordinatesSearchResultFormatter(),\n                provideILayerSearchResultFormatter()\n            ]\n        };\n    }\n}\nIgoSearchModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoSearchModule });\nIgoSearchModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoSearchModule_Factory(t) { return new (t || IgoSearchModule)(); }, imports: [[\n            CommonModule,\n            IgoSearchBarModule,\n            IgoSearchSelectorModule,\n            IgoSearchResultsModule,\n            IgoSearchSettingsModule\n        ], IgoSearchBarModule, IgoSearchSelectorModule, IgoSearchResultsModule, IgoSearchSettingsModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoSearchModule, { declarations: function () { return [SearchPointerSummaryDirective]; }, imports: function () { return [CommonModule, IgoSearchBarModule, IgoSearchSelectorModule, IgoSearchResultsModule, IgoSearchSettingsModule]; }, exports: function () { return [IgoSearchBarModule, IgoSearchSelectorModule, IgoSearchResultsModule, IgoSearchSettingsModule, SearchPointerSummaryDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoSearchModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoSearchBarModule,\n                    IgoSearchSelectorModule,\n                    IgoSearchResultsModule,\n                    IgoSearchSettingsModule\n                ],\n                exports: [\n                    IgoSearchBarModule,\n                    IgoSearchSelectorModule,\n                    IgoSearchResultsModule,\n                    IgoSearchSettingsModule,\n                    SearchPointerSummaryDirective\n                ],\n                declarations: [SearchPointerSummaryDirective]\n            }]\n    }], null, null); })();\n\nclass ToastComponent {\n    constructor() {\n        this.format = new OlGeoJSON();\n        this.opened = new EventEmitter();\n    }\n    get expanded() {\n        return this._expanded;\n    }\n    set expanded(value) {\n        this.state = value ? 'expanded' : 'collapsed';\n        this._expanded = value;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get feature() {\n        return this._feature;\n    }\n    set feature(value) {\n        this._feature = value;\n    }\n    /**\n     * @internal\n     */\n    get title() { return getEntityTitle(this.feature); }\n    toggle() {\n        this.expanded = !this.expanded;\n        this.opened.emit(this.expanded);\n    }\n    zoomToFeatureExtent() {\n        if (this.feature.geometry) {\n            const olFeature = this.format.readFeature(this.feature, {\n                dataProjection: this.feature.projection,\n                featureProjection: this.map.projection\n            });\n            moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\n        }\n    }\n    swipe(action) {\n        if (action === ToastComponent.SWIPE_ACTION.UP) {\n            if (!this.expanded) {\n                this.toggle();\n            }\n        }\n        else if (action === ToastComponent.SWIPE_ACTION.DOWN) {\n            if (this.expanded) {\n                this.toggle();\n            }\n        }\n    }\n}\nToastComponent.ɵfac = function ToastComponent_Factory(t) { return new (t || ToastComponent)(); };\nToastComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ToastComponent, selectors: [[\"igo-toast\"]], inputs: { expanded: \"expanded\", map: \"map\", feature: \"feature\" }, outputs: { opened: \"opened\" }, decls: 7, vars: 6, consts: [[\"collapsedMobile\", \"51px\", \"expandedMobile\", \"300px\", 3, \"state\", \"swipeup\", \"swipedown\"], [\"flex\", \"\"], [3, \"title\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", 3, \"click\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"class\", \"igo-icon-button\", 3, \"click\", 4, \"ngIf\"], [3, \"feature\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", 1, \"igo-icon-button\", 3, \"click\"], [\"svgIcon\", \"zoom-in\"]], template: function ToastComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-flexible\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"swipeup\", function ToastComponent_Template_igo_flexible_swipeup_0_listener($event) { return ctx.swipe($event.type); })(\"swipedown\", function ToastComponent_Template_igo_flexible_swipedown_0_listener($event) { return ctx.swipe($event.type); });\n        ɵngcc0.ɵɵelementStart(2, \"igo-panel\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"button\", 3);\n        ɵngcc0.ɵɵlistener(\"click\", function ToastComponent_Template_button_click_3_listener() { return ctx.toggle(); });\n        ɵngcc0.ɵɵelement(4, \"mat-icon\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(5, ToastComponent_button_5_Template, 2, 0, \"button\", 5);\n        ɵngcc0.ɵɵelement(6, \"igo-feature-details\", 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r0 = ɵngcc0.ɵɵreference(1);\n        ɵngcc0.ɵɵproperty(\"state\", ctx.state);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"title\", ctx.title);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"svgIcon\", ɵngcc0.ɵɵpureFunction0(5, _c35).indexOf(_r0.state) >= 0 ? \"arrow_upward\" : \"arrow_downward\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.feature.geometry);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"feature\", ctx.feature);\n    } }, directives: [ɵngcc9.FlexibleComponent, ɵngcc9.PanelComponent, ɵngcc2.MatButton, ɵngcc4.MatIcon, ɵngcc1.NgIf, FeatureDetailsComponent], styles: [\"[_nghost-%COMP%]{background-color:#fff;bottom:0;max-height:calc(100% - 50px);position:absolute}[_nghost-%COMP%], igo-feature-details[_ngcontent-%COMP%]     table{width:100%}\"] });\nToastComponent.SWIPE_ACTION = {\n    UP: 'swipeup',\n    DOWN: 'swipedown'\n};\nToastComponent.ctorParameters = () => [];\nToastComponent.propDecorators = {\n    expanded: [{ type: Input }],\n    map: [{ type: Input }],\n    feature: [{ type: Input }],\n    opened: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ToastComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-toast',\n                template: \"<igo-flexible #flex\\n  collapsedMobile=\\\"51px\\\"\\n  expandedMobile=\\\"300px\\\"\\n  [state]=\\\"state\\\"\\n  (swipeup)=\\\"swipe($event.type)\\\"\\n  (swipedown)=\\\"swipe($event.type)\\\">\\n\\n  <igo-panel [title]=\\\"title\\\">\\n    <button\\n      mat-icon-button\\n      panelLeftButton\\n      (click)=\\\"toggle()\\\">\\n      <mat-icon [svgIcon]=\\\"['collapsed', 'initial'].indexOf(flex.state) >= 0 ? 'arrow_upward' : 'arrow_downward'\\\"></mat-icon>\\n    </button>\\n\\n    <button mat-icon-button panelRightButton class=\\\"igo-icon-button\\\" (click)=\\\"zoomToFeatureExtent()\\\" *ngIf=\\\"feature.geometry\\\">\\n      <mat-icon svgIcon=\\\"zoom-in\\\"></mat-icon>\\n    </button>\\n\\n    <igo-feature-details [feature]=\\\"feature\\\"></igo-feature-details>\\n  </igo-panel>\\n\\n</igo-flexible>\\n\",\n                styles: [\":host{background-color:#fff;bottom:0;max-height:calc(100% - 50px);position:absolute}:host,igo-feature-details ::ng-deep table{width:100%}\"]\n            }]\n    }], function () { return []; }, { opened: [{\n            type: Output\n        }], expanded: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], feature: [{\n            type: Input\n        }] }); })();\n\nclass IgoToastModule {\n    static forRoot() {\n        return {\n            ngModule: IgoToastModule\n        };\n    }\n}\nIgoToastModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoToastModule });\nIgoToastModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoToastModule_Factory(t) { return new (t || IgoToastModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            IgoPanelModule,\n            IgoFlexibleModule,\n            IgoFeatureModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoToastModule, { declarations: function () { return [ToastComponent]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        IgoPanelModule,\n        IgoFlexibleModule, IgoFeatureModule]; }, exports: function () { return [ToastComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoToastModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    IgoPanelModule,\n                    IgoFlexibleModule,\n                    IgoFeatureModule\n                ],\n                exports: [ToastComponent],\n                declarations: [ToastComponent]\n            }]\n    }], null, null); })();\n\nclass OgcFilterComponent {\n    constructor(cdRef) {\n        this.cdRef = cdRef;\n        /**\n         * Event emitted on complete\n         */\n        this.complete = new EventEmitter();\n        /**\n         * Event emitted on cancel\n         */\n        this.cancel = new EventEmitter();\n    }\n    /**\n     * Implemented as part of OnUpdateInputs\n     */\n    onUpdateInputs() {\n        this.cdRef.detectChanges();\n    }\n    /**\n     * On close, emit the cancel event\n     */\n    onClose() {\n        this.cancel.emit();\n    }\n}\nOgcFilterComponent.ɵfac = function OgcFilterComponent_Factory(t) { return new (t || OgcFilterComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nOgcFilterComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OgcFilterComponent, selectors: [[\"igo-ogc-filter\"]], inputs: { layer: \"layer\", map: \"map\" }, outputs: { complete: \"complete\", cancel: \"cancel\" }, decls: 1, vars: 3, consts: [[\"igoListItem\", \"\", 3, \"layer\", \"header\", \"map\"]], template: function OgcFilterComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-ogc-filterable-item\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"layer\", ctx.layer)(\"header\", false)(\"map\", ctx.map);\n    } }, directives: [OgcFilterableItemComponent], styles: [\"\"], changeDetection: 0 });\nOgcFilterComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef }\n];\nOgcFilterComponent.propDecorators = {\n    layer: [{ type: Input }],\n    map: [{ type: Input }],\n    complete: [{ type: Output }],\n    cancel: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter',\n                template: \"<igo-ogc-filterable-item\\n  igoListItem\\n  [layer]=\\\"layer\\\"\\n  [header]=\\\"false\\\" \\n  [map]=\\\"map\\\" >\\n</igo-ogc-filterable-item>\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { complete: [{\n            type: Output\n        }], cancel: [{\n            type: Output\n        }], layer: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }] }); })();\n\nconst OgcFilterWidget = new InjectionToken('OgcFilterWidget');\nfunction ogcFilterWidgetFactory(widgetService) {\n    return widgetService.create(OgcFilterComponent);\n}\nfunction provideOgcFilterWidget() {\n    return {\n        provide: OgcFilterWidget,\n        useFactory: ogcFilterWidgetFactory,\n        deps: [WidgetService]\n    };\n}\n\n/**\n * @ignore\n */\nclass IgoOgcFilterModule {\n}\nIgoOgcFilterModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoOgcFilterModule });\nIgoOgcFilterModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoOgcFilterModule_Factory(t) { return new (t || IgoOgcFilterModule)(); }, imports: [[\n            CommonModule,\n            MatButtonModule,\n            IgoLanguageModule,\n            IgoFilterModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoOgcFilterModule, { declarations: function () { return [OgcFilterComponent]; }, imports: function () { return [CommonModule,\n        MatButtonModule,\n        IgoLanguageModule, IgoFilterModule]; }, exports: function () { return [OgcFilterComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoOgcFilterModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatButtonModule,\n                    IgoLanguageModule,\n                    IgoFilterModule\n                ],\n                exports: [OgcFilterComponent],\n                declarations: [OgcFilterComponent]\n            }]\n    }], null, null); })();\n\nclass WfsWorkspace extends Workspace {\n    constructor(options) {\n        super(options);\n        this.options = options;\n    }\n    get layer() { return this.options.layer; }\n    get map() { return this.options.map; }\n}\n\nclass WfsWorkspaceService {\n    constructor(storageService) {\n        this.storageService = storageService;\n    }\n    get zoomAuto() {\n        return this.storageService.get('zoomAuto');\n    }\n    createWorkspace(layer, map) {\n        const wks = new WfsWorkspace({\n            id: layer.id,\n            title: layer.title,\n            layer,\n            map,\n            entityStore: this.createFeatureStore(layer, map),\n            actionStore: new ActionStore([]),\n            meta: {\n                tableTemplate: undefined\n            }\n        });\n        this.createTableTemplate(wks, layer);\n        return wks;\n    }\n    createFeatureStore(layer, map) {\n        const store = new FeatureStore([], { map });\n        store.bindLayer(layer);\n        const loadingStrategy = new FeatureStoreLoadingLayerStrategy({});\n        const inMapExtentStrategy = new FeatureStoreInMapExtentStrategy({});\n        const selectedRecordStrategy = new EntityStoreFilterSelectionStrategy({});\n        const selectionStrategy = new FeatureStoreSelectionStrategy({\n            layer: new VectorLayer({\n                zIndex: 300,\n                source: new FeatureDataSource(),\n                style: undefined,\n                showInLayerList: false,\n                exportable: false,\n                browsable: false\n            }),\n            map,\n            hitTolerance: 15,\n            motion: this.zoomAuto ? FeatureMotion.Default : FeatureMotion.None,\n            many: true,\n            dragBox: true\n        });\n        this.storageService.set('rowsInMapExtent', true, StorageScope.SESSION);\n        store.addStrategy(loadingStrategy, true);\n        store.addStrategy(inMapExtentStrategy, true);\n        store.addStrategy(selectionStrategy, true);\n        store.addStrategy(selectedRecordStrategy, false);\n        store.addStrategy(this.createFilterInMapExtentStrategy(), true);\n        return store;\n    }\n    createTableTemplate(workspace, layer) {\n        const fields = layer.dataSource.options.sourceFields || [];\n        if (fields.length === 0) {\n            workspace.entityStore.entities$.pipe(skipWhile(val => val.length === 0), take(1)).subscribe(entities => {\n                const columnsFromFeatures = entities[0].ol.getKeys()\n                    .filter(col => !col.startsWith('_') &&\n                    col !== 'geometry' &&\n                    col !== entities[0].ol.getGeometryName() &&\n                    !col.match(/boundedby/gi))\n                    .map(key => {\n                    return {\n                        name: `properties.${key}`,\n                        title: key\n                    };\n                });\n                workspace.meta.tableTemplate = {\n                    selection: true,\n                    sort: true,\n                    columns: columnsFromFeatures\n                };\n            });\n            return;\n        }\n        const columns = fields.map((field) => {\n            return {\n                name: `properties.${field.name}`,\n                title: field.alias ? field.alias : field.name\n            };\n        });\n        workspace.meta.tableTemplate = {\n            selection: true,\n            sort: true,\n            columns\n        };\n    }\n    createFilterInMapExtentStrategy() {\n        const filterClauseFunc = (record) => {\n            return record.state.inMapExtent === true;\n        };\n        return new EntityStoreFilterCustomFuncStrategy({ filterClauseFunc });\n    }\n}\nWfsWorkspaceService.ɵfac = function WfsWorkspaceService_Factory(t) { return new (t || WfsWorkspaceService)(ɵngcc0.ɵɵinject(ɵngcc7.StorageService)); };\nWfsWorkspaceService.ɵprov = ɵɵdefineInjectable({ factory: function WfsWorkspaceService_Factory() { return new WfsWorkspaceService(ɵɵinject(StorageService)); }, token: WfsWorkspaceService, providedIn: \"root\" });\nWfsWorkspaceService.ctorParameters = () => [\n    { type: StorageService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WfsWorkspaceService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc7.StorageService }]; }, null); })();\n\nclass FeatureWorkspace extends Workspace {\n    constructor(options) {\n        super(options);\n        this.options = options;\n    }\n    get layer() { return this.options.layer; }\n    get map() { return this.options.map; }\n}\n\nclass FeatureWorkspaceService {\n    constructor(storageService) {\n        this.storageService = storageService;\n    }\n    get zoomAuto() {\n        return this.storageService.get('zoomAuto');\n    }\n    createWorkspace(layer, map) {\n        const wks = new FeatureWorkspace({\n            id: layer.id,\n            title: layer.title,\n            layer,\n            map,\n            entityStore: this.createFeatureStore(layer, map),\n            actionStore: new ActionStore([]),\n            meta: {\n                tableTemplate: undefined\n            }\n        });\n        this.createTableTemplate(wks, layer);\n        return wks;\n    }\n    createFeatureStore(layer, map) {\n        const store = new FeatureStore([], { map });\n        store.bindLayer(layer);\n        const loadingStrategy = new FeatureStoreLoadingLayerStrategy({});\n        const inMapExtentStrategy = new FeatureStoreInMapExtentStrategy({});\n        const selectedRecordStrategy = new EntityStoreFilterSelectionStrategy({});\n        const selectionStrategy = new FeatureStoreSelectionStrategy({\n            layer: new VectorLayer({\n                zIndex: 300,\n                source: new FeatureDataSource(),\n                style: undefined,\n                showInLayerList: false,\n                exportable: false,\n                browsable: false\n            }),\n            map,\n            hitTolerance: 15,\n            motion: this.zoomAuto ? FeatureMotion.Default : FeatureMotion.None,\n            many: true,\n            dragBox: true\n        });\n        this.storageService.set('rowsInMapExtent', true, StorageScope.SESSION);\n        store.addStrategy(loadingStrategy, true);\n        store.addStrategy(inMapExtentStrategy, true);\n        store.addStrategy(selectionStrategy, true);\n        store.addStrategy(selectedRecordStrategy, false);\n        store.addStrategy(this.createFilterInMapExtentStrategy(), true);\n        return store;\n    }\n    createTableTemplate(workspace, layer) {\n        const fields = layer.dataSource.options.sourceFields || [];\n        if (fields.length === 0) {\n            workspace.entityStore.entities$.pipe(skipWhile(val => val.length === 0), take(1)).subscribe(entities => {\n                const columnsFromFeatures = entities[0].ol.getKeys()\n                    .filter(col => !col.startsWith('_') &&\n                    col !== 'geometry' &&\n                    col !== entities[0].ol.getGeometryName() &&\n                    !col.match(/boundedby/gi))\n                    .map(key => {\n                    return {\n                        name: `properties.${key}`,\n                        title: key\n                    };\n                });\n                workspace.meta.tableTemplate = {\n                    selection: true,\n                    sort: true,\n                    columns: columnsFromFeatures\n                };\n            });\n            return;\n        }\n        const columns = fields.map((field) => {\n            return {\n                name: `properties.${field.name}`,\n                title: field.alias ? field.alias : field.name\n            };\n        });\n        workspace.meta.tableTemplate = {\n            selection: true,\n            sort: true,\n            columns\n        };\n    }\n    createFilterInMapExtentStrategy() {\n        const filterClauseFunc = (record) => {\n            return record.state.inMapExtent === true;\n        };\n        return new EntityStoreFilterCustomFuncStrategy({ filterClauseFunc });\n    }\n}\nFeatureWorkspaceService.ɵfac = function FeatureWorkspaceService_Factory(t) { return new (t || FeatureWorkspaceService)(ɵngcc0.ɵɵinject(ɵngcc7.StorageService)); };\nFeatureWorkspaceService.ɵprov = ɵɵdefineInjectable({ factory: function FeatureWorkspaceService_Factory() { return new FeatureWorkspaceService(ɵɵinject(StorageService)); }, token: FeatureWorkspaceService, providedIn: \"root\" });\nFeatureWorkspaceService.ctorParameters = () => [\n    { type: StorageService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FeatureWorkspaceService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc7.StorageService }]; }, null); })();\n\nclass WorkspaceSelectorDirective {\n    constructor(component, wfsWorkspaceService, \n    // private wmsWorkspaceService: WmsWorkspaceService,\n    featureWorkspaceService) {\n        this.component = component;\n        this.wfsWorkspaceService = wfsWorkspaceService;\n        this.featureWorkspaceService = featureWorkspaceService;\n        this.entities$$ = [];\n    }\n    get workspaceStore() {\n        return this.component.store;\n    }\n    ngOnInit() {\n        this.layers$$ = this.map.layers$\n            .pipe(debounceTime(50))\n            .subscribe((layers) => this.onLayersChange(layers));\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n        this.entities$$.map(entities => entities.unsubscribe());\n    }\n    onLayersChange(layers) {\n        const editableLayers = layers.filter((layer) => this.layerIsEditable(layer));\n        const editableLayersIds = editableLayers.map((layer) => layer.id);\n        const workspacesToAdd = editableLayers\n            .map((layer) => this.getOrCreateWorkspace(layer))\n            .filter((workspace) => workspace !== undefined);\n        const workspacesToRemove = this.workspaceStore.all()\n            .filter((workspace) => {\n            return editableLayersIds.indexOf(workspace.id) < 0;\n        });\n        if (workspacesToRemove.length > 0) {\n            workspacesToRemove.forEach((workspace) => {\n                workspace.entityStore.deactivateStrategyOfType(FeatureStoreInMapExtentStrategy);\n                workspace.deactivate();\n            });\n            this.workspaceStore.state.updateMany(workspacesToRemove, { active: false, selected: false });\n            this.workspaceStore.deleteMany(workspacesToRemove);\n        }\n        if (workspacesToAdd.length > 0) {\n            this.workspaceStore.insertMany(workspacesToAdd);\n        }\n    }\n    getOrCreateWorkspace(layer) {\n        const workspace = this.workspaceStore.get(layer.id);\n        if (workspace !== undefined) {\n            return;\n        }\n        if (layer.dataSource instanceof WFSDataSource) {\n            const wfsWks = this.wfsWorkspaceService.createWorkspace(layer, this.map);\n            return wfsWks;\n            /* } else if (layer.dataSource instanceof WMSDataSource) {\n               return this.wmsWorkspaceService.createWorkspace(layer as ImageLayer, this.map);*/\n        }\n        else if (layer.dataSource instanceof FeatureDataSource && layer.exportable === true) {\n            const featureWks = this.featureWorkspaceService.createWorkspace(layer, this.map);\n            return featureWks;\n        }\n        return;\n    }\n    layerIsEditable(layer) {\n        const dataSource = layer.dataSource;\n        if (dataSource instanceof WFSDataSource) {\n            return true;\n        }\n        if (dataSource instanceof FeatureDataSource) {\n            return true;\n        }\n        if (dataSource instanceof WMSDataSource) {\n            const dataSourceOptions = (dataSource.options ||\n                {});\n            return (dataSourceOptions.ogcFilters && dataSourceOptions.ogcFilters.enabled);\n        }\n        return false;\n    }\n}\nWorkspaceSelectorDirective.ɵfac = function WorkspaceSelectorDirective_Factory(t) { return new (t || WorkspaceSelectorDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc9.WorkspaceSelectorComponent), ɵngcc0.ɵɵdirectiveInject(WfsWorkspaceService), ɵngcc0.ɵɵdirectiveInject(FeatureWorkspaceService)); };\nWorkspaceSelectorDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: WorkspaceSelectorDirective, selectors: [[\"\", \"igoWorkspaceSelector\", \"\"]], inputs: { map: \"map\" } });\nWorkspaceSelectorDirective.ctorParameters = () => [\n    { type: WorkspaceSelectorComponent },\n    { type: WfsWorkspaceService },\n    { type: FeatureWorkspaceService }\n];\nWorkspaceSelectorDirective.propDecorators = {\n    map: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WorkspaceSelectorDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoWorkspaceSelector]'\n            }]\n    }], function () { return [{ type: ɵngcc9.WorkspaceSelectorComponent }, { type: WfsWorkspaceService }, { type: FeatureWorkspaceService }]; }, { map: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWorkspaceSelectorModule {\n}\nIgoWorkspaceSelectorModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoWorkspaceSelectorModule });\nIgoWorkspaceSelectorModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoWorkspaceSelectorModule_Factory(t) { return new (t || IgoWorkspaceSelectorModule)(); }, imports: [[\n            CommonModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoWorkspaceSelectorModule, { declarations: function () { return [WorkspaceSelectorDirective]; }, imports: function () { return [CommonModule]; }, exports: function () { return [WorkspaceSelectorDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoWorkspaceSelectorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    WorkspaceSelectorDirective\n                ],\n                declarations: [\n                    WorkspaceSelectorDirective\n                ]\n            }]\n    }], null, null); })();\n\nclass WorkspaceUpdatorDirective {\n    constructor(wfsWorkspaceService, \n    // private wmsWorkspaceService: WmsWorkspaceService,\n    featureWorkspaceService) {\n        this.wfsWorkspaceService = wfsWorkspaceService;\n        this.featureWorkspaceService = featureWorkspaceService;\n        this.entities$$ = [];\n    }\n    ngOnInit() {\n        this.layers$$ = this.map.layers$\n            .pipe(debounceTime(50))\n            .subscribe((layers) => this.onLayersChange(layers));\n    }\n    ngOnDestroy() {\n        this.layers$$.unsubscribe();\n        this.entities$$.map(entities => entities.unsubscribe());\n    }\n    onLayersChange(layers) {\n        const editableLayers = layers.filter((layer) => this.layerIsEditable(layer));\n        const editableLayersIds = editableLayers.map((layer) => layer.id);\n        const workspacesToAdd = editableLayers\n            .map((layer) => this.getOrCreateWorkspace(layer))\n            .filter((workspace) => workspace !== undefined);\n        const workspacesToRemove = this.workspaceStore.all()\n            .filter((workspace) => {\n            return editableLayersIds.indexOf(workspace.id) < 0;\n        });\n        if (workspacesToRemove.length > 0) {\n            workspacesToRemove.forEach((workspace) => {\n                workspace.entityStore.deactivateStrategyOfType(FeatureStoreInMapExtentStrategy);\n                workspace.deactivate();\n            });\n            this.workspaceStore.state.updateMany(workspacesToRemove, { active: false, selected: false });\n            this.workspaceStore.deleteMany(workspacesToRemove);\n        }\n        if (workspacesToAdd.length > 0) {\n            this.workspaceStore.insertMany(workspacesToAdd);\n        }\n    }\n    getOrCreateWorkspace(layer) {\n        const workspace = this.workspaceStore.get(layer.id);\n        if (workspace !== undefined) {\n            return;\n        }\n        if (layer.dataSource instanceof WFSDataSource) {\n            const wfsWks = this.wfsWorkspaceService.createWorkspace(layer, this.map);\n            return wfsWks;\n            /*} else if (layer.dataSource instanceof WMSDataSource) {\n              return this.wmsWorkspaceService.createWorkspace(layer as ImageLayer, this.map);*/\n        }\n        else if (layer.dataSource instanceof FeatureDataSource && layer.exportable === true) {\n            const featureWks = this.featureWorkspaceService.createWorkspace(layer, this.map);\n            return featureWks;\n        }\n        return;\n    }\n    layerIsEditable(layer) {\n        const dataSource = layer.dataSource;\n        if (dataSource instanceof WFSDataSource) {\n            return true;\n        }\n        if (dataSource instanceof FeatureDataSource) {\n            return true;\n        }\n        if (dataSource instanceof WMSDataSource) {\n            const dataSourceOptions = (dataSource.options ||\n                {});\n            return (dataSourceOptions.ogcFilters && dataSourceOptions.ogcFilters.enabled);\n        }\n        return false;\n    }\n}\nWorkspaceUpdatorDirective.ɵfac = function WorkspaceUpdatorDirective_Factory(t) { return new (t || WorkspaceUpdatorDirective)(ɵngcc0.ɵɵdirectiveInject(WfsWorkspaceService), ɵngcc0.ɵɵdirectiveInject(FeatureWorkspaceService)); };\nWorkspaceUpdatorDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: WorkspaceUpdatorDirective, selectors: [[\"\", \"igoWorkspaceUpdator\", \"\"]], inputs: { map: \"map\", workspaceStore: \"workspaceStore\" } });\nWorkspaceUpdatorDirective.ctorParameters = () => [\n    { type: WfsWorkspaceService },\n    { type: FeatureWorkspaceService }\n];\nWorkspaceUpdatorDirective.propDecorators = {\n    map: [{ type: Input }],\n    workspaceStore: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WorkspaceUpdatorDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoWorkspaceUpdator]'\n            }]\n    }], function () { return [{ type: WfsWorkspaceService }, { type: FeatureWorkspaceService }]; }, { map: [{\n            type: Input\n        }], workspaceStore: [{\n            type: Input\n        }] }); })();\n\n/**\n * @ignore\n */\nclass IgoWorkspaceUpdatorModule {\n}\nIgoWorkspaceUpdatorModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoWorkspaceUpdatorModule });\nIgoWorkspaceUpdatorModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoWorkspaceUpdatorModule_Factory(t) { return new (t || IgoWorkspaceUpdatorModule)(); }, imports: [[\n            CommonModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoWorkspaceUpdatorModule, { declarations: function () { return [WorkspaceUpdatorDirective]; }, imports: function () { return [CommonModule]; }, exports: function () { return [WorkspaceUpdatorDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoWorkspaceUpdatorModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    WorkspaceUpdatorDirective\n                ],\n                declarations: [\n                    WorkspaceUpdatorDirective\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoGeoWorkspaceModule {\n}\nIgoGeoWorkspaceModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoGeoWorkspaceModule });\nIgoGeoWorkspaceModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoGeoWorkspaceModule_Factory(t) { return new (t || IgoGeoWorkspaceModule)(); }, providers: [\n        provideOgcFilterWidget()\n    ], imports: [[\n            CommonModule,\n            IgoWidgetModule,\n            IgoWorkspaceSelectorModule,\n            IgoWorkspaceUpdatorModule,\n            IgoOgcFilterModule\n        ], IgoWorkspaceSelectorModule, IgoWorkspaceUpdatorModule, IgoOgcFilterModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoGeoWorkspaceModule, { imports: function () { return [CommonModule,\n        IgoWidgetModule, IgoWorkspaceSelectorModule, IgoWorkspaceUpdatorModule, IgoOgcFilterModule]; }, exports: function () { return [IgoWorkspaceSelectorModule, IgoWorkspaceUpdatorModule, IgoOgcFilterModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoGeoWorkspaceModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoWidgetModule,\n                    IgoWorkspaceSelectorModule,\n                    IgoWorkspaceUpdatorModule,\n                    IgoOgcFilterModule\n                ],\n                exports: [\n                    IgoWorkspaceSelectorModule,\n                    IgoWorkspaceUpdatorModule,\n                    IgoOgcFilterModule\n                ],\n                declarations: [],\n                providers: [\n                    provideOgcFilterWidget()\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoWktModule {\n    static forRoot() {\n        return {\n            ngModule: IgoWktModule,\n            providers: []\n        };\n    }\n}\nIgoWktModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoWktModule });\nIgoWktModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoWktModule_Factory(t) { return new (t || IgoWktModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoWktModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                exports: [],\n                declarations: []\n            }]\n    }], null, null); })();\n\nclass IgoGeoModule {\n    static forRoot() {\n        return {\n            ngModule: IgoGeoModule,\n            providers: []\n        };\n    }\n}\nIgoGeoModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoGeoModule });\nIgoGeoModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoGeoModule_Factory(t) { return new (t || IgoGeoModule)(); }, imports: [[], IgoCatalogModule, IgoDataSourceModule, IgoDownloadModule, IgoFeatureModule, IgoFilterModule, IgoGeometryModule, IgoImportExportModule, IgoLayerModule, IgoMapModule, IgoMeasureModule, IgoMetadataModule, IgoOverlayModule, IgoPrintModule, IgoQueryModule, IgoDirectionsModule, IgoSearchModule, IgoToastModule, IgoGeoWorkspaceModule, IgoWktModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoGeoModule, { exports: [IgoCatalogModule, IgoDataSourceModule, IgoDownloadModule, IgoFeatureModule, IgoFilterModule, IgoGeometryModule, IgoImportExportModule, IgoLayerModule, IgoMapModule, IgoMeasureModule, IgoMetadataModule, IgoOverlayModule, IgoPrintModule, IgoQueryModule, IgoDirectionsModule, IgoSearchModule, IgoToastModule, IgoGeoWorkspaceModule, IgoWktModule] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoGeoModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoCatalogModule,\n                    IgoDataSourceModule,\n                    IgoDownloadModule,\n                    IgoFeatureModule,\n                    IgoFilterModule,\n                    IgoGeometryModule,\n                    IgoImportExportModule,\n                    IgoLayerModule,\n                    IgoMapModule,\n                    IgoMeasureModule,\n                    IgoMetadataModule,\n                    IgoOverlayModule,\n                    IgoPrintModule,\n                    IgoQueryModule,\n                    IgoDirectionsModule,\n                    IgoSearchModule,\n                    IgoToastModule,\n                    IgoGeoWorkspaceModule,\n                    IgoWktModule\n                ]\n            }]\n    }], null, null); })();\n\nvar DirectionsFormat;\n(function (DirectionsFormat) {\n    DirectionsFormat[DirectionsFormat[\"GeoJSON\"] = 0] = \"GeoJSON\";\n    DirectionsFormat[DirectionsFormat[\"JSON\"] = 1] = \"JSON\";\n})(DirectionsFormat || (DirectionsFormat = {}));\nvar SourceDirectionsType;\n(function (SourceDirectionsType) {\n    SourceDirectionsType[\"Route\"] = \"Route\";\n    SourceDirectionsType[\"Trip\"] = \"Trip\";\n})(SourceDirectionsType || (SourceDirectionsType = {}));\n\nclass OsrmDirectionsSource extends DirectionsSource {\n    constructor(http, config) {\n        super();\n        this.http = http;\n        this.config = config;\n        this.directionsUrl = 'https://geoegl.msp.gouv.qc.ca/services/itineraire/route/v1/driving/';\n        this.options = this.config.getConfig('directionsSources.osrm') || {};\n        this.directionsUrl = this.options.url || this.directionsUrl;\n    }\n    get enabled() {\n        return this.options.enabled !== false;\n    }\n    set enabled(value) {\n        this.options.enabled = value;\n    }\n    getName() {\n        return OsrmDirectionsSource._name;\n    }\n    route(coordinates, directionsOptions = {}) {\n        const directionsParams = this.getRouteParams(directionsOptions);\n        return this.http\n            .get(this.directionsUrl + coordinates.join(';'), {\n            params: directionsParams\n        })\n            .pipe(map(res => this.extractRoutesData(res)));\n    }\n    extractRoutesData(response) {\n        const routeResponse = [];\n        response.routes.forEach(route => {\n            routeResponse.push(this.formatRoute(route, response.waypoints));\n        });\n        return routeResponse;\n    }\n    getRouteParams(directionsOptions = {}) {\n        directionsOptions.alternatives = directionsOptions.alternatives !== undefined ? directionsOptions.alternatives : true;\n        directionsOptions.steps = directionsOptions.steps !== undefined ? directionsOptions.steps : true;\n        directionsOptions.geometries = directionsOptions.geometries !== undefined ? directionsOptions.geometries : 'geojson';\n        directionsOptions.overview = directionsOptions.overview !== undefined ? directionsOptions.overview : false;\n        return new HttpParams({\n            fromObject: {\n                alternatives: directionsOptions.alternatives ? 'true' : 'false',\n                overview: directionsOptions.overview ? 'simplified' : 'full',\n                steps: directionsOptions.steps ? 'true' : 'false',\n                geometries: directionsOptions.geometries ? directionsOptions.geometries : 'geojson',\n            }\n        });\n    }\n    formatRoute(roadNetworkRoute, waypoints) {\n        const stepsUI = [];\n        roadNetworkRoute.legs.forEach(leg => {\n            leg.steps.forEach(step => {\n                stepsUI.push(step);\n            });\n        });\n        return {\n            id: uuid(),\n            title: roadNetworkRoute.legs[0].summary,\n            source: OsrmDirectionsSource._name,\n            sourceType: SourceDirectionsType.Route,\n            order: 1,\n            format: DirectionsFormat.GeoJSON,\n            icon: 'directions',\n            projection: 'EPSG:4326',\n            waypoints,\n            distance: roadNetworkRoute.distance,\n            duration: roadNetworkRoute.duration,\n            geometry: roadNetworkRoute.geometry,\n            legs: roadNetworkRoute.legs,\n            steps: stepsUI,\n            weight: roadNetworkRoute.weight,\n            weight_name: roadNetworkRoute.weight_name\n        };\n    }\n}\nOsrmDirectionsSource.ɵfac = function OsrmDirectionsSource_Factory(t) { return new (t || OsrmDirectionsSource)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.ConfigService)); };\nOsrmDirectionsSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: OsrmDirectionsSource, factory: OsrmDirectionsSource.ɵfac });\nOsrmDirectionsSource._name = 'OSRM Québec';\nOsrmDirectionsSource.ctorParameters = () => [\n    { type: HttpClient },\n    { type: ConfigService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OsrmDirectionsSource, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.ConfigService }]; }, null); })();\n\nfunction osrmDirectionsSourcesFactory(http, config) {\n    return new OsrmDirectionsSource(http, config);\n}\nfunction provideOsrmDirectionsSource() {\n    return {\n        provide: DirectionsSource,\n        useFactory: osrmDirectionsSourcesFactory,\n        multi: true,\n        deps: [HttpClient, ConfigService]\n    };\n}\n\n/**\n * Cadastre search source\n */\nclass CadastreSearchSource extends SearchSource {\n    constructor(http, languageService, options) {\n        super(options);\n        this.http = http;\n        this.languageService = languageService;\n    }\n    getId() {\n        return CadastreSearchSource.id;\n    }\n    getType() {\n        return CadastreSearchSource.type;\n    }\n    /*\n     * Source : https://wiki.openstreetmap.org/wiki/Key:amenity\n     */\n    getDefaultOptions() {\n        return {\n            title: 'Cadastre (Québec)',\n            searchUrl: 'https://carto.cptaq.gouv.qc.ca/php/find_lot_v1.php?'\n        };\n    }\n    /**\n     * Search a place by name\n     * @param term Place name\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    search(term, options) {\n        term = term.endsWith(',') ? term.slice(0, -1) : term;\n        term = term.startsWith(',') ? term.substr(1) : term;\n        term = term.replace(/ /g, '');\n        const params = this.computeSearchRequestParams(term, options || {});\n        if (!params.get('numero') || !params.get('numero').match(/^[0-9,]+$/g)) {\n            return of([]);\n        }\n        return this.http\n            .get(this.searchUrl, { params, responseType: 'text' })\n            .pipe(map((response) => this.extractResults(response)));\n    }\n    computeSearchRequestParams(term, options) {\n        return new HttpParams({\n            fromObject: Object.assign({\n                numero: term,\n                epsg: '4326'\n            }, this.params, options.params || {})\n        });\n    }\n    extractResults(response) {\n        return response\n            .split('<br />')\n            .filter((lot) => lot.length > 0)\n            .map((lot) => this.dataToResult(lot));\n    }\n    dataToResult(data) {\n        const lot = data.split(';');\n        const numero = lot[0];\n        const wkt = lot[7];\n        const geometry = this.computeGeometry(wkt);\n        const properties = {\n            NoLot: numero,\n            Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>'\n        };\n        const id = [this.getId(), 'cadastre', numero].join('.');\n        return {\n            source: this,\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: numero,\n                icon: 'map-marker'\n            },\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry,\n                properties,\n                meta: {\n                    id,\n                    title: numero\n                }\n            }\n        };\n    }\n    computeGeometry(wkt) {\n        const feature = new olWKT().readFeature(wkt, {\n            dataProjection: 'EPSG:4326',\n            featureProjection: 'EPSG:4326'\n        });\n        return {\n            type: feature.getGeometry().getType(),\n            coordinates: feature.getGeometry().getCoordinates()\n        };\n    }\n}\nCadastreSearchSource.ɵfac = function CadastreSearchSource_Factory(t) { return new (t || CadastreSearchSource)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject('options')); };\nCadastreSearchSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: CadastreSearchSource, factory: CadastreSearchSource.ɵfac });\nCadastreSearchSource.id = 'cadastre';\nCadastreSearchSource.type = FEATURE;\nCadastreSearchSource.ctorParameters = () => [\n    { type: HttpClient },\n    { type: LanguageService },\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CadastreSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.LanguageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n\n/**\n * Cadastre search source factory\n * @ignore\n */\nfunction cadastreSearchSourceFactory(http, languageService, config) {\n    return new CadastreSearchSource(http, languageService, config.getConfig(`searchSources.${CadastreSearchSource.id}`));\n}\n/**\n * Function that returns a provider for the Cadastre search source\n */\nfunction provideCadastreSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: cadastreSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, ConfigService]\n    };\n}\n\n/**\n * Nominatim search source\n */\nclass NominatimSearchSource extends SearchSource {\n    constructor(http, options) {\n        super(options);\n        this.http = http;\n    }\n    getId() {\n        return NominatimSearchSource.id;\n    }\n    getType() {\n        return NominatimSearchSource.type;\n    }\n    /*\n     * Source : https://wiki.openstreetmap.org/wiki/Key:amenity\n     */\n    getDefaultOptions() {\n        return {\n            title: 'Nominatim (OSM)',\n            searchUrl: 'https://nominatim.openstreetmap.org/search',\n            settings: [\n                {\n                    type: 'checkbox',\n                    title: 'results type',\n                    name: 'amenity',\n                    values: [\n                        {\n                            title: 'igo.geo.search.nominatim.type.food',\n                            value: 'bar,bbq,biergaten,cafe,drinking_water,fast_food,food_court,ice_cream,pub,restaurant',\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.nominatim.type.health',\n                            value: 'baby_hatch,clinic,dentist,doctors,hospital,nursing_home,pharmacy,social_facility,veterinary',\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.nominatim.type.entertainment',\n                            value: 'arts_centre,brothel,casino,cinema,community_center_fountain,gambling,nightclub,planetarium \\\n                          ,public_bookcase,social_centre,stripclub,studio,swingerclub,theatre,internet_cafe',\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.nominatim.type.finance',\n                            value: 'atm,bank,bureau_de_change',\n                            enabled: false\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'results limit',\n                    name: 'limit',\n                    values: [\n                        {\n                            title: '10',\n                            value: 10,\n                            enabled: true\n                        },\n                        {\n                            title: '20',\n                            value: 20,\n                            enabled: false\n                        },\n                        {\n                            title: '50',\n                            value: 50,\n                            enabled: false\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'restrictExtent',\n                    name: 'countrycodes',\n                    values: [\n                        {\n                            title: 'igo.geo.search.nominatim.country.canada',\n                            value: 'CA',\n                            enabled: true\n                        },\n                        {\n                            title: 'igo.geo.search.nominatim.country.all',\n                            value: null,\n                            enabled: false\n                        }\n                    ]\n                },\n                {\n                    type: 'radiobutton',\n                    title: 'multiple object',\n                    name: 'dedupe',\n                    values: [\n                        {\n                            title: 'igo.geo.search.searchSources.settings.true',\n                            value: 0,\n                            enabled: false\n                        },\n                        {\n                            title: 'igo.geo.search.searchSources.settings.false',\n                            value: 1,\n                            enabled: true\n                        }\n                    ]\n                }\n            ]\n        };\n    }\n    /**\n     * Search a place by name\n     * @param term Place name\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    search(term, options) {\n        const params = this.computeSearchRequestParams(term, options || {});\n        if (!params.get('q')) {\n            return of([]);\n        }\n        return this.http\n            .get(this.searchUrl, { params })\n            .pipe(map((response) => this.extractResults(response)));\n    }\n    computeSearchRequestParams(term, options) {\n        return new HttpParams({\n            fromObject: Object.assign({\n                q: this.computeTerm(term),\n                format: 'json'\n            }, this.params, options.params || {})\n        });\n    }\n    extractResults(response) {\n        return response.map((data) => this.dataToResult(data));\n    }\n    dataToResult(data) {\n        const properties = this.computeProperties(data);\n        const geometry = this.computeGeometry(data);\n        const extent = this.computeExtent(data);\n        const id = [this.getId(), 'place', data.place_id].join('.');\n        return {\n            source: this,\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.display_name,\n                icon: 'map-marker'\n            },\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry,\n                extent,\n                properties,\n                meta: {\n                    id,\n                    title: data.display_name\n                }\n            }\n        };\n    }\n    computeProperties(data) {\n        return {\n            display_name: data.display_name,\n            place_id: data.place_id,\n            osm_type: data.osm_type,\n            class: data.class,\n            type: data.type\n        };\n    }\n    computeGeometry(data) {\n        return {\n            type: 'Point',\n            coordinates: [parseFloat(data.lon), parseFloat(data.lat)]\n        };\n    }\n    computeExtent(data) {\n        return [\n            parseFloat(data.boundingbox[2]),\n            parseFloat(data.boundingbox[0]),\n            parseFloat(data.boundingbox[3]),\n            parseFloat(data.boundingbox[1])\n        ];\n    }\n    computeTerm(term) {\n        return this.computeTermTags(term);\n    }\n    /**\n     * Add hashtag from query in Nominatim's format (+[])\n     * @param term Query with hashtag\n     */\n    computeTermTags(term) {\n        const hashtags = super.getHashtagsValid(term, 'amenity');\n        if (!hashtags) {\n            return this.computeTermSettings(term);\n        }\n        if (!hashtags.length) {\n            return null;\n        }\n        term = term.replace(/(#[^\\s]*)/g, '');\n        hashtags.forEach(tag => {\n            term += '+[' + tag + ']';\n        });\n        return term;\n    }\n    /**\n     * Add hashtag from settings in Nominatim's format (+[])\n     * @param term Query\n     */\n    computeTermSettings(term) {\n        this.options.settings.forEach(settings => {\n            if (settings.name === 'amenity') {\n                settings.values.forEach(conf => {\n                    if (conf.enabled && typeof conf.value === 'string') {\n                        const splitted = conf.value.split(',');\n                        splitted.forEach(value => {\n                            term += '+[' + value + ']';\n                        });\n                    }\n                });\n            }\n        });\n        return term;\n    }\n}\nNominatimSearchSource.ɵfac = function NominatimSearchSource_Factory(t) { return new (t || NominatimSearchSource)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject('options')); };\nNominatimSearchSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NominatimSearchSource, factory: NominatimSearchSource.ɵfac });\nNominatimSearchSource.id = 'nominatim';\nNominatimSearchSource.type = FEATURE;\nNominatimSearchSource.ctorParameters = () => [\n    { type: HttpClient },\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NominatimSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n\n/**\n * Nominatim search source factory\n * @ignore\n */\nfunction nominatimSearchSourceFactory(http, config) {\n    return new NominatimSearchSource(http, config.getConfig(`searchSources.${NominatimSearchSource.id}`));\n}\n/**\n * Function that returns a provider for the Nominatim search source\n */\nfunction provideNominatimSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: nominatimSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, ConfigService]\n    };\n}\n\n/**\n * StoredQueries search source\n */\nclass StoredQueriesSearchSource extends SearchSource {\n    constructor(http, languageService, options) {\n        super(options);\n        this.http = http;\n        this.languageService = languageService;\n        this.storedQueriesOptions = options;\n        if (this.storedQueriesOptions && !this.storedQueriesOptions.available) {\n            return;\n        }\n        const defaultStoredqueryId = 'rtss';\n        const defaultFieldSplitter = [\n            { name: 'rtss', defaultValue: '-99' },\n            { name: 'chainage', defaultValue: '0', splitPrefix: '\\\\+' }\n        ];\n        const defaultOutputformat = 'text/xml; subtype=gml/3.1.1';\n        const defaultSrsname = 'EPSG:4326';\n        const defaultResultTitle = 'title';\n        if (!this.storedQueriesOptions) {\n            console.log(' No configuration for this search source (storedqueries). You will use the default values');\n            this.storedQueriesOptions = {\n                storedquery_id: defaultStoredqueryId,\n                fields: defaultFieldSplitter,\n                outputformat: defaultOutputformat,\n                srsname: defaultSrsname,\n                resultTitle: defaultResultTitle\n            };\n            this.resultTitle = defaultResultTitle;\n            console.log('Default values', this.storedQueriesOptions);\n        }\n        if (!this.storedQueriesOptions.storedquery_id) {\n            const err = 'Stored Queries :You have to set \"storedquery_id\" into StoredQueries options. ex: storedquery_id: \"nameofstoredquerie\"';\n            throw new Error(err);\n        }\n        if (!this.storedQueriesOptions.fields) {\n            throw new Error('Stored Queries :You have to set \"fields\" into options. ex: fields: {\"name\": \"rtss\", \"defaultValue\": \"-99\"}');\n        }\n        this.storedQueriesOptions.outputformat =\n            this.storedQueriesOptions.outputformat || 'text/xml; subtype=gml/3.1.1';\n        this.storedQueriesOptions.srsname =\n            this.storedQueriesOptions.srsname || 'EPSG:4326';\n        const storedQueryId = this.storedQueriesOptions.storedquery_id.toLowerCase();\n        if (storedQueryId.includes('getfeaturebyid') &&\n            this.storedQueriesOptions.outputformat\n                .toLowerCase()\n                .includes('getfeaturebyid')) {\n            let err = 'You must set a geojson format for your stored query. This is due to an openlayers issue)';\n            err += ' (wfs 1.1.0 & gml 3.1.1 limitation)';\n            throw new Error(err);\n        }\n        if (!(this.storedQueriesOptions.fields instanceof Array)) {\n            this.storedQueriesOptions.fields = [this.storedQueriesOptions.fields];\n        }\n        this.multipleFieldsQuery =\n            this.storedQueriesOptions.fields.length > 1 ? true : false;\n        this.storedQueriesOptions.fields.forEach((field, index) => {\n            if (this.multipleFieldsQuery && !field.splitPrefix && index !== 0) {\n                throw new Error('Stored Queries :You must set a field spliter into your field definition (optional for the first one!)');\n            }\n            if (!field.defaultValue) {\n                throw new Error('Stored Queries :You must set a field default value into your field definition');\n            }\n        });\n        this.storedQueriesOptions.resultTitle =\n            this.storedQueriesOptions.resultTitle || this.resultTitle;\n    }\n    getId() {\n        return StoredQueriesSearchSource.id;\n    }\n    getType() {\n        return StoredQueriesSearchSource.type;\n    }\n    getDefaultOptions() {\n        return {\n            title: 'Stored Queries',\n            searchUrl: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq'\n        };\n    }\n    // URL CALL EXAMPLES:\n    //  GetFeatureById (mandatory storedquery for wfs server) (outputformat must be in geojson)\n    //  tslint:disable-next-line:max-line-length\n    //  https://geoegl.msp.gouv.qc.ca/apis/ws/swtq?service=wfs&version=2.0.0&request=GetFeature&storedquery_id=urn:ogc:def:query:OGC-WFS::GetFeatureById&srsname=epsg:4326&outputformat=geojson&ID=a_num_route.132\n    //  Custom StoredQuery\n    //  tslint:disable-next-line:max-line-length\n    //  https://geoegl.msp.gouv.qc.ca/apis/ws/swtq?service=wfs&version=1.1.0&request=GetFeature&storedquery_id=rtss&srsname=epsg:4326&outputformat=text/xml;%20subtype=gml/3.1.1&rtss=0013801110000c&chainage=12\n    /**\n     * Search a location by name or keyword\n     * @param term Location name or keyword\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    search(term, options) {\n        const storedqueriesParams = this.termSplitter(term, this.storedQueriesOptions.fields);\n        const params = this.computeRequestParams(options || {}, storedqueriesParams);\n        if (new RegExp('.*?gml.*?', 'i').test(this.storedQueriesOptions.outputformat)) {\n            return this.http\n                .get(this.searchUrl, { params, responseType: 'text' })\n                .pipe(map(response => {\n                return this.extractResults(this.extractWFSData(response));\n            }));\n        }\n        else {\n            return this.http.get(this.searchUrl, { params }).pipe(map(response => {\n                return this.extractResults(this.extractWFSData(response));\n            }));\n        }\n    }\n    getFormatFromOptions() {\n        let olFormatCls;\n        const outputFormat = this.storedQueriesOptions.outputformat;\n        const patternGml3 = new RegExp('.*?gml.*?', 'i');\n        const patternGeojson = new RegExp('.*?json.*?', 'i');\n        if (patternGeojson.test(outputFormat)) {\n            olFormatCls = GeoJSON;\n        }\n        if (patternGml3.test(outputFormat)) {\n            olFormatCls = WFS;\n        }\n        return new olFormatCls();\n    }\n    extractWFSData(res) {\n        const olFormat = this.getFormatFromOptions();\n        const geojson = GeoJSON;\n        const wfsfeatures = olFormat.readFeatures(res);\n        const features = JSON.parse(new geojson().writeFeatures(wfsfeatures));\n        return features;\n    }\n    termSplitter(term, fields) {\n        const splittedTerm = {};\n        let remainingTerm = term;\n        let cnt = 0;\n        // Used to build the default values\n        fields.forEach(field => {\n            splittedTerm[field.name] = field.defaultValue;\n            const splitterRegex = new RegExp(field.splitPrefix + '(.+)', 'i');\n            if (splitterRegex.test(remainingTerm)) {\n                cnt = field.splitPrefix ? (cnt += 1) : cnt;\n                remainingTerm = remainingTerm.split(splitterRegex)[1];\n            }\n        });\n        if (cnt === 0) {\n            splittedTerm[fields[0].name] = term;\n            return splittedTerm;\n        }\n        remainingTerm = term;\n        const localFields = [...fields].reverse();\n        localFields.forEach(field => {\n            const splitterRegex = new RegExp(field.splitPrefix || '' + '(.+)', 'i');\n            if (remainingTerm || remainingTerm !== '') {\n                const values = remainingTerm.split(splitterRegex);\n                remainingTerm = values[0];\n                if (values[1]) {\n                    splittedTerm[field.name] = values[1].trim();\n                }\n            }\n        });\n        return splittedTerm;\n    }\n    computeRequestParams(options, queryParams) {\n        const wfsversion = this.storedQueriesOptions.storedquery_id\n            .toLowerCase()\n            .includes('getfeaturebyid')\n            ? '2.0.0'\n            : '1.1.0';\n        return new HttpParams({\n            fromObject: Object.assign({\n                service: 'wfs',\n                version: wfsversion,\n                request: 'GetFeature',\n                storedquery_id: this.storedQueriesOptions.storedquery_id,\n                srsname: this.storedQueriesOptions.srsname,\n                outputformat: this.storedQueriesOptions.outputformat\n            }, queryParams, this.params, options.params || {})\n        });\n    }\n    extractResults(response) {\n        return response.features.map((data) => {\n            return this.dataToResult(data);\n        });\n    }\n    dataToResult(data) {\n        const properties = this.computeProperties(data);\n        const id = [this.getId(), properties.type, data.id].join('.');\n        const title = data.properties[this.storedQueriesOptions.resultTitle]\n            ? this.storedQueriesOptions.resultTitle\n            : this.resultTitle;\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry: data.geometry,\n                // extent: data.bbox,\n                properties,\n                meta: {\n                    id,\n                    title: data.properties[title]\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.properties.title,\n                titleHtml: data.properties[title],\n                icon: 'map-marker'\n            }\n        };\n    }\n    computeProperties(data) {\n        const properties = Object.assign({}, ObjectUtils.removeKeys(data.properties, StoredQueriesSearchSource.propertiesBlacklist), { Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>' });\n        return properties;\n    }\n}\nStoredQueriesSearchSource.ɵfac = function StoredQueriesSearchSource_Factory(t) { return new (t || StoredQueriesSearchSource)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject('options')); };\nStoredQueriesSearchSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: StoredQueriesSearchSource, factory: StoredQueriesSearchSource.ɵfac });\nStoredQueriesSearchSource.id = 'storedqueries';\nStoredQueriesSearchSource.type = FEATURE;\nStoredQueriesSearchSource.propertiesBlacklist = [\n    'boundedBy',\n    'id',\n    'coord_x',\n    'coord_y'\n];\nStoredQueriesSearchSource.ctorParameters = () => [\n    { type: HttpClient },\n    { type: LanguageService },\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StoredQueriesSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.LanguageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n/**\n * StoredQueriesReverse search source\n */\n// EXAMPLE CALLS\n// tslint:disable-next-line:max-line-length\n// https://ws.mapserver.transports.gouv.qc.ca/swtq?service=wfs&version=1.1.0&request=GetFeature&storedquery_id=lim_adm&srsname=epsg:4326&outputformat=text/xml;%20subtype=gml/3.1.1&long=-71.292469&lat=46.748107\n//\nclass StoredQueriesReverseSearchSource extends SearchSource {\n    constructor(http, languageService, options) {\n        super(options);\n        this.http = http;\n        this.languageService = languageService;\n        this.storedQueriesOptions = options;\n        if (!this.storedQueriesOptions || (this.storedQueriesOptions && !this.storedQueriesOptions.available)) {\n            return;\n        }\n        if (!this.storedQueriesOptions.storedquery_id) {\n            const err = 'Stored Queries :You have to set \"storedquery_id\" into StoredQueries options. ex: storedquery_id: \"nameofstoredquerie\"';\n            throw new Error(err);\n        }\n        if (!this.storedQueriesOptions.longField) {\n            throw new Error('Stored Queries :You have to set \"longField\" to map the longitude coordinate to the query params.');\n        }\n        if (!this.storedQueriesOptions.latField) {\n            throw new Error('Stored Queries :You have to set \"latField\" to map the latitude coordinate to the query params.');\n        }\n        this.storedQueriesOptions.outputformat =\n            this.storedQueriesOptions.outputformat || 'text/xml; subtype=gml/3.1.1';\n        this.storedQueriesOptions.srsname =\n            this.storedQueriesOptions.srsname || 'EPSG:4326';\n        this.storedQueriesOptions.resultTitle =\n            this.storedQueriesOptions.resultTitle || this.resultTitle;\n    }\n    getId() {\n        return StoredQueriesReverseSearchSource.id;\n    }\n    getType() {\n        return StoredQueriesReverseSearchSource.type;\n    }\n    getDefaultOptions() {\n        return {\n            title: 'Stored Queries (reverse)',\n            searchUrl: 'https://ws.mapserver.transports.gouv.qc.ca/swtq'\n        };\n    }\n    /**\n     * Search a location by coordinates\n     * @param lonLat Location coordinates\n     * @param distance Search raidus around lonLat\n     * @returns Observable of <SearchResult<Feature>[]\n     */\n    reverseSearch(lonLat, options) {\n        const params = this.computeRequestParams(lonLat, options || {});\n        if (new RegExp('.*?gml.*?', 'i').test(this.storedQueriesOptions.outputformat)) {\n            return this.http\n                .get(this.searchUrl, { params, responseType: 'text' })\n                .pipe(map(response => {\n                return this.extractResults(this.extractWFSData(response));\n            }));\n        }\n        else {\n            return this.http.get(this.searchUrl, { params }).pipe(map(response => {\n                return this.extractResults(this.extractWFSData(response));\n            }));\n        }\n    }\n    getFormatFromOptions() {\n        let olFormatCls;\n        const outputFormat = this.storedQueriesOptions.outputformat;\n        const patternGml3 = new RegExp('.*?gml.*?', 'i');\n        const patternGeojson = new RegExp('.*?json.*?', 'i');\n        if (patternGeojson.test(outputFormat)) {\n            olFormatCls = GeoJSON;\n        }\n        if (patternGml3.test(outputFormat)) {\n            olFormatCls = WFS;\n        }\n        return new olFormatCls();\n    }\n    extractWFSData(res) {\n        const olFormat = this.getFormatFromOptions();\n        const geojson = GeoJSON;\n        const wfsfeatures = olFormat.readFeatures(res);\n        const features = JSON.parse(new geojson().writeFeatures(wfsfeatures));\n        return features;\n    }\n    computeRequestParams(lonLat, options) {\n        const longLatParams = {};\n        longLatParams[this.storedQueriesOptions.longField] = lonLat[0];\n        longLatParams[this.storedQueriesOptions.latField] = lonLat[1];\n        return new HttpParams({\n            fromObject: Object.assign({\n                service: 'WFS',\n                version: '1.1.0',\n                request: 'GetFeature',\n                storedquery_id: this.storedQueriesOptions.storedquery_id,\n                srsname: this.storedQueriesOptions.srsname,\n                outputformat: this.storedQueriesOptions.outputformat\n            }, longLatParams, this.params, options.params || {})\n        });\n    }\n    extractResults(response) {\n        return response.features.map((data) => {\n            return this.dataToResult(data);\n        });\n    }\n    dataToResult(data) {\n        const properties = this.computeProperties(data);\n        const id = [this.getId(), properties.type, data.id].join('.');\n        const title = data.properties[this.storedQueriesOptions.resultTitle]\n            ? this.storedQueriesOptions.resultTitle\n            : this.resultTitle;\n        return {\n            source: this,\n            data: {\n                type: FEATURE,\n                projection: 'EPSG:4326',\n                geometry: data.geometry,\n                properties,\n                meta: {\n                    id,\n                    title: data.properties[title]\n                }\n            },\n            meta: {\n                dataType: FEATURE,\n                id,\n                title: data.properties[title],\n                icon: 'map-marker'\n            }\n        };\n    }\n    computeProperties(data) {\n        const properties = ObjectUtils.removeKeys(data.properties, StoredQueriesReverseSearchSource.propertiesBlacklist);\n        const routing = {\n            Route: '<span class=\"routing\"> <u>' + this.languageService.translate.instant('igo.geo.seeRouting') + '</u> </span>'\n        };\n        return Object.assign(properties, { type: data.properties.doc_type }, routing);\n    }\n}\nStoredQueriesReverseSearchSource.ɵfac = function StoredQueriesReverseSearchSource_Factory(t) { return new (t || StoredQueriesReverseSearchSource)(ɵngcc0.ɵɵinject(ɵngcc6.HttpClient), ɵngcc0.ɵɵinject(ɵngcc7.LanguageService), ɵngcc0.ɵɵinject('options')); };\nStoredQueriesReverseSearchSource.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: StoredQueriesReverseSearchSource, factory: StoredQueriesReverseSearchSource.ɵfac });\nStoredQueriesReverseSearchSource.id = 'storedqueriesreverse';\nStoredQueriesReverseSearchSource.type = FEATURE;\nStoredQueriesReverseSearchSource.propertiesBlacklist = [];\nStoredQueriesReverseSearchSource.ctorParameters = () => [\n    { type: HttpClient },\n    { type: LanguageService },\n    { type: undefined, decorators: [{ type: Inject, args: ['options',] }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StoredQueriesReverseSearchSource, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc6.HttpClient }, { type: ɵngcc7.LanguageService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: ['options']\n            }] }]; }, null); })();\n\n/**\n * StoredQueries search source factory\n * @ignore\n */\nfunction storedqueriesSearchSourceFactory(http, languageService, config) {\n    return new StoredQueriesSearchSource(http, languageService, config.getConfig(`searchSources.${StoredQueriesSearchSource.id}`));\n}\n/**\n * Function that returns a provider for the StoredQueries search source\n */\nfunction provideStoredQueriesSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: storedqueriesSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, ConfigService]\n    };\n}\n/**\n * StoredQueriesReverse search source factory\n * @ignore\n */\nfunction storedqueriesReverseSearchSourceFactory(http, languageService, config) {\n    return new StoredQueriesReverseSearchSource(http, languageService, config.getConfig(`searchSources.${StoredQueriesReverseSearchSource.id}`));\n}\n/**\n * Function that returns a provider for the StoredQueriesReverse search source\n */\nfunction provideStoredQueriesReverseSearchSource() {\n    return {\n        provide: SearchSource,\n        useFactory: storedqueriesReverseSearchSourceFactory,\n        multi: true,\n        deps: [HttpClient, LanguageService, ConfigService]\n    };\n}\n\nfunction mapExtentStrategyActiveToolTip(ws) {\n    return ws.entityStore.getStrategyOfType(EntityStoreFilterCustomFuncStrategy).active$.pipe(map((active) => active ? 'igo.geo.workspace.inMapExtent.active.tooltip' : 'igo.geo.workspace.inMapExtent.inactive.tooltip'));\n}\nfunction featureMotionStrategyActiveToolTip(ws) {\n    return ws.entityStore.getStrategyOfType(EntityStoreFilterCustomFuncStrategy).active$.pipe(map((active) => active ? 'igo.geo.workspace.zoomAuto.tooltip' : 'igo.geo.workspace.zoomAuto.tooltip'));\n}\nfunction noElementSelected(ws) {\n    return ws.entityStore.stateView.manyBy$((record) => {\n        return record.state.selected === true;\n    }).pipe(map((entities) => entities.length >= 1));\n}\n\n/*\n * Public API Surface of geo\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ArcGISRestDataSource, BaseLayersSwitcherComponent, CadastreSearchSource, CapabilitiesService, CartoDataSource, Catalog, CatalogBrowserComponent, CatalogFactory, CatalogItemType, CatalogLibaryComponent, CatalogService, ClusterDataSource, CompositeCatalog, CoordinatesReverseSearchSource, CoordinatesReverseSearchSourceFactory, CoordinatesSearchResultFormatter, DataService, DataSource, DataSourceService, DirectionsFormBindingDirective, DirectionsFormComponent, DirectionsFormService, DirectionsFormat, DirectionsService, DirectionsSource, DownloadButtonComponent, DownloadService, DrawControl, DropGeoFileDirective, EncodingFormat, EsriStyleGenerator, ExportButtonComponent, ExportError, ExportFormat, ExportInvalidFileError, ExportNothingToExportError, ExportService, FEATURE, FeatureDataSource, FeatureDetailsComponent, FeatureDetailsDirective, FeatureFormComponent, FeatureMotion, FeatureStore, FeatureStoreInMapExtentStrategy, FeatureStoreLoadingLayerStrategy, FeatureStoreLoadingStrategy, FeatureStoreSelectionStrategy, FeatureWorkspace, FeatureWorkspaceService, FilterableDataSourcePipe, GeolocateButtonComponent, GeometryFormFieldComponent, GeometryFormFieldInputComponent, GeometrySliceError, GeometrySliceLineStringError, GeometrySliceMultiPolygonError, GeometrySliceTooManyIntersectionError, GoogleLinks, IChercheReverseSearchSource, IChercheSearchResultFormatter, IChercheSearchSource, ILayerSearchResultFormatter, ILayerSearchSource, IgoCatalogBrowserModule, IgoCatalogLibraryModule, IgoCatalogModule, IgoDataSourceModule, IgoDirectionsModule, IgoDownloadModule, IgoFeatureDetailsModule, IgoFeatureFormModule, IgoFeatureModule, IgoFilterModule, IgoGeoModule, IgoGeoWorkspaceModule, IgoGeometryFormFieldModule, IgoGeometryModule, IgoImportExportModule, IgoLayerModule, IgoMap, IgoMapModule, IgoMeasureModule, IgoMeasurerModule, IgoMetadataModule, IgoOgcFilterModule, IgoOverlayModule, IgoPrintModule, IgoQueryModule, IgoSearchBarModule, IgoSearchModule, IgoSearchResultsModule, IgoSearchSelectorModule, IgoSearchSettingsModule, IgoStyleListModule, IgoToastModule, IgoWktModule, IgoWorkspaceSelectorModule, IgoWorkspaceUpdatorModule, ImageLayer, ImageWatcher, ImportError, ImportExportComponent, ImportInvalidFileError, ImportNothingToImportError, ImportSRSError, ImportService, ImportSizeError, ImportUnreadableFileError, LAYER, Layer, LayerItemComponent, LayerLegendComponent, LayerLegendItemComponent, LayerLegendListBindingDirective, LayerLegendListComponent, LayerListBindingDirective, LayerListComponent, LayerListControlsEnum, LayerListSelectVisibleEnum, LayerListToolComponent, LayerListToolControlsEnum, LayerListToolService, LayerService, MEASURE_UNIT_AUTO, MVTDataSource, MapBrowserComponent, MapController, MapOfflineDirective, MapService, MapViewAction, MapViewController, MeasureAreaUnit, MeasureAreaUnitAbbreviation, MeasureFormatPipe, MeasureLengthUnit, MeasureLengthUnitAbbreviation, MeasureType, MeasurerComponent, MetadataButtonComponent, MetadataService, MiniBaseMapComponent, ModifyControl, NominatimSearchSource, OGCFilterService, OSMDataSource, OfflineButtonComponent, OgcFilterButtonComponent, OgcFilterComponent, OgcFilterFormComponent, OgcFilterOperator, OgcFilterOperatorType, OgcFilterTimeComponent, OgcFilterToggleButtonComponent, OgcFilterWidget, OgcFilterWriter, OgcFilterableFormComponent, OgcFilterableItemComponent, OgcFilterableListBindingDirective, OgcFilterableListComponent, OlDragSelectInteraction, OptionsApiService, OptionsService, OsmLinks, OsrmDirectionsSource, Overlay, OverlayAction, OverlayDirective, OverlayService, PointerPositionDirective, PrintComponent, PrintFormComponent, PrintOrientation, PrintOutputFormat, PrintPaperFormat, PrintResolution, PrintSaveImageFormat, PrintService, ProjectionService, QueryDirective, QueryFormat, QueryFormatMimeType, QueryHtmlTarget, QuerySearchSource, QueryService, RotationButtonComponent, SEARCH_TYPES, STYLELIST_OPTIONS, SearchBarComponent, SearchPointerSummaryDirective, SearchResultAddButtonComponent, SearchResultMode, SearchResultsComponent, SearchResultsItemComponent, SearchSelectorComponent, SearchService, SearchSettingsComponent, SearchSource, SearchSourceService, SliceControl, SourceDirectionsType, SpatialFilterItemComponent, SpatialFilterItemType, SpatialFilterListComponent, SpatialFilterQueryType, SpatialFilterService, SpatialFilterType, SpatialFilterTypeComponent, StoredQueriesReverseSearchSource, StoredQueriesSearchSource, StyleListService, StyleService, TileArcGISRestDataSource, TileLayer, TileWatcher, TimeFilterButtonComponent, TimeFilterFormComponent, TimeFilterItemComponent, TimeFilterListBindingDirective, TimeFilterListComponent, TimeFilterService, TimeFilterStyle, TimeFilterType, ToastComponent, TooltipType, TrackFeatureButtonComponent, TypeCapabilities, TypeCatalog, VectorLayer, VectorTileLayer, VectorWatcher, WFSDataSource, WFSService, WMSDataSource, WMTSDataSource, WebSocketDataSource, WfsWorkspace, WfsWorkspaceService, WktService, WorkspaceSelectorDirective, WorkspaceUpdatorDirective, XYZDataSource, ZoomButtonComponent, addLayerAndFeaturesStyledToMap, addLayerAndFeaturesToMap, addLinearRingToOlPolygon, cadastreSearchSourceFactory, checkWfsParams, clearOlGeometryMidpoints, computeBestAreaUnit, computeBestLengthUnit, computeLayerTitleFromFile, computeOlFeatureExtent, computeOlFeaturesDiff, computeOlFeaturesExtent, createDefaultTileGrid, createDrawHoleInteractionStyle, createDrawInteractionStyle, createMeasureInteractionStyle, createMeasureLayerStyle, createOlTooltipAtPoint, createOverlayDefaultStyle, createOverlayLayer, createOverlayMarkerStyle, ctrlKeyDown, defaultCoordinatesSearchResultFormatterFactory, defaultEpsg, defaultFieldNameGeometry, defaultIChercheSearchResultFormatterFactory, defaultMaxFeatures, defaultWfsVersion, entitiesToRowData, exportToCSV, featureFromOl, featureMotionStrategyActiveToolTip, featureToOl, featureToSearchResult, featuresAreOutOfView, featuresAreTooDeepInView, formatMeasure, formatScale, formatWFSQueryString, generateArcgisRestIdFromSourceOptions, generateFeatureIdFromSourceOptions, generateId, generateIdFromSourceOptions, generateWMSIdFromSourceOptions, generateWMTSIdFromSourceOptions, generateXYZIdFromSourceOptions, getFileExtension, getFormatFromOptions, getLayersLegends, getMarkerStyle, getMousePositionFromOlGeometryEvent, getOlTooltipAtCenter, getOlTooltipsAtMidpoints, getResolutionFromScale, getScaleFromResolution, getSelectedMarkerStyle, getTooltipsOfOlGeometry, gmlRegex, handleFileExportError, handleFileExportSuccess, handleFileImportError, handleFileImportSuccess, handleInvalidFileImportError, handleNothingToExportError, handleNothingToImportError, handleSRSImportError, handleSizeFileImportError, handleUnreadbleFileImportError, hideOlFeature, ichercheReverseSearchSourceFactory, ichercheSearchSourceFactory, ilayerSearchResultFormatterFactory, ilayerSearchSourceFactory, jsonRegex, layerIsQueryable, lonLatConversion, mapExtentStrategyActiveToolTip, measureOlGeometry, measureOlGeometryArea, measureOlGeometryLength, metersToFeet, metersToKilometers, metersToMiles, metersToUnit, moveToOlFeatures, mtmZoneFromLonLat, noElementSelected, nominatimSearchSourceFactory, ogcFilterWidgetFactory, olLayerIsQueryable, optionsApiFactory, osrmDirectionsSourcesFactory, pointerPositionSummaryMarker, provideCadastreSearchSource, provideCoordinatesReverseSearchSource, provideDefaultCoordinatesSearchResultFormatter, provideDefaultIChercheSearchResultFormatter, provideIChercheReverseSearchSource, provideIChercheSearchSource, provideILayerSearchResultFormatter, provideILayerSearchSource, provideNominatimSearchSource, provideOgcFilterWidget, provideOptionsApi, provideOsrmDirectionsSource, provideSearchSourceService, provideStoredQueriesReverseSearchSource, provideStoredQueriesSearchSource, provideStyleListLoader, provideStyleListOptions, renderFeatureFromOl, roundCoordTo, scaleExtent, searchSourceServiceFactory, sliceOlGeometry, sliceOlLineString, sliceOlPolygon, sourceCanReverseSearch, sourceCanReverseSearchAsSummary, sourceCanSearch, squareMetersToAcres, squareMetersToHectares, squareMetersToSquareFeet, squareMetersToSquareKilometers, squareMetersToSquareMiles, squareMetersToUnit, stopMarker, storedqueriesReverseSearchSourceFactory, storedqueriesSearchSourceFactory, stringToLonLat, styleListFactory, tryAddLoadingStrategy, tryAddSelectionStrategy, tryBindStoreLayer, updateOlGeometryCenter, updateOlGeometryMidpoints, updateOlTooltipAtCenter, updateOlTooltipsAtMidpoints, utmZoneFromLonLat, viewStatesAreEqual, MetadataButtonComponent as ɵa, MetadataService as ɵb, DownloadButtonComponent as ɵba, DownloadService as ɵbb, FeatureDetailsComponent as ɵbc, FeatureFormComponent as ɵbd, GeometryFormFieldComponent as ɵbe, GeometryFormFieldInputComponent as ɵbf, FilterableDataSourcePipe as ɵbg, TimeFilterButtonComponent as ɵbh, TimeFilterFormComponent as ɵbi, TimeFilterItemComponent as ɵbj, TimeFilterService as ɵbk, TimeFilterListComponent as ɵbl, TimeFilterListBindingDirective as ɵbm, OgcFilterFormComponent as ɵbn, WktService as ɵbo, OgcFilterButtonComponent as ɵbp, OgcFilterToggleButtonComponent as ɵbq, OGCFilterService as ɵbr, OgcFilterableFormComponent as ɵbs, OgcFilterableItemComponent as ɵbt, OgcFilterableListComponent as ɵbu, OgcFilterableListBindingDirective as ɵbv, SpatialFilterTypeComponent as ɵbw, SpatialFilterListComponent as ɵbx, SpatialFilterService as ɵby, SpatialFilterItemComponent as ɵbz, LayerItemComponent as ɵc, OgcFilterTimeComponent as ɵca, IgoStyleListModule as ɵcb, STYLELIST_OPTIONS as ɵcc, provideStyleListOptions as ɵcd, styleListFactory as ɵce, provideStyleListLoader as ɵcf, StyleListService as ɵcg, ImportExportComponent as ɵch, ImportService as ɵci, ExportService as ɵcj, DropGeoFileDirective as ɵck, MapBrowserComponent as ɵcl, ExportButtonComponent as ɵcm, ZoomButtonComponent as ɵcn, GeolocateButtonComponent as ɵco, RotationButtonComponent as ɵcp, BaseLayersSwitcherComponent as ɵcq, baseLayersSwitcherSlideInOut as ɵcr, MiniBaseMapComponent as ɵcs, MapOfflineDirective as ɵct, OfflineButtonComponent as ɵcu, PointerPositionDirective as ɵcv, MeasureFormatPipe as ɵcw, MeasurerItemComponent as ɵcx, MeasurerComponent as ɵcy, MeasurerDialogComponent as ɵcz, LayerLegendItemComponent as ɵd, OverlayDirective as ɵdb, OverlayService as ɵdc, PrintComponent as ɵdd, PrintService as ɵde, PrintFormComponent as ɵdf, QueryDirective as ɵdg, QueryService as ɵdh, querySearchSourceFactory as ɵdi, provideQuerySearchSource as ɵdj, SearchSource as ɵdk, QuerySearchSource as ɵdm, DirectionsFormComponent as ɵdn, DirectionsService as ɵdo, DirectionsSourceService as ɵdp, directionsSourceServiceFactory as ɵdq, provideDirectionsSourceService as ɵdr, DirectionsSource as ɵds, SearchService as ɵdt, SearchSourceService as ɵdu, DirectionsFormService as ɵdv, DirectionsFormBindingDirective as ɵdw, IgoSearchBarModule as ɵdx, IgoSearchSelectorModule as ɵdy, SearchSelectorComponent as ɵdz, LayerLegendComponent as ɵe, IgoSearchSettingsModule as ɵea, SearchSettingsComponent as ɵeb, SearchBarComponent as ɵec, SearchUrlParamDirective as ɵed, IgoSearchResultsModule as ɵee, SearchResultsComponent as ɵef, SearchResultAddButtonComponent as ɵeg, SearchResultsItemComponent as ɵeh, SearchPointerSummaryDirective as ɵei, searchSourceServiceFactory as ɵej, provideSearchSourceService as ɵek, defaultIChercheSearchResultFormatterFactory as ɵel, provideDefaultIChercheSearchResultFormatter as ɵem, IChercheSearchResultFormatter as ɵen, defaultCoordinatesSearchResultFormatterFactory as ɵeo, provideDefaultCoordinatesSearchResultFormatter as ɵep, CoordinatesSearchResultFormatter as ɵeq, ilayerSearchResultFormatterFactory as ɵer, provideILayerSearchResultFormatter as ɵes, ILayerSearchResultFormatter as ɵet, ToastComponent as ɵeu, IgoWorkspaceSelectorModule as ɵev, WorkspaceSelectorDirective as ɵew, WfsWorkspaceService as ɵex, FeatureWorkspaceService as ɵey, IgoWorkspaceUpdatorModule as ɵez, CapabilitiesService as ɵf, WorkspaceUpdatorDirective as ɵfa, IgoOgcFilterModule as ɵfb, OgcFilterComponent as ɵfc, OgcFilterWidget as ɵfd, ogcFilterWidgetFactory as ɵfe, provideOgcFilterWidget as ɵff, LayerListComponent as ɵg, LayerListToolComponent as ɵh, LayerLegendListComponent as ɵi, LayerListBindingDirective as ɵj, MapService as ɵk, LayerLegendListBindingDirective as ɵl, TrackFeatureButtonComponent as ɵm, LayerService as ɵn, StyleService as ɵo, DataSourceService as ɵp, OptionsService as ɵq, WFSService as ɵr, DataService as ɵs, ProjectionService as ɵt, LayerListToolService as ɵu, CatalogBrowserComponent as ɵv, CatalogBrowserGroupComponent as ɵw, CatalogBrowserLayerComponent as ɵx, CatalogLibaryComponent as ɵy, CatalogLibaryItemComponent as ɵz };\n\n//# sourceMappingURL=igo2-geo.js.map","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/simple-map\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\"\n  igoPointerPosition\n  [pointerPositionDelay]=\"pointerCoordDelay\"\n  (pointerPositionCoord)=\"onPointerMove($event)\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n    <igo-geolocate-button [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n    <igo-rotation-button [map]=\"map\" [showIfNoRotation]=\"true\" color=\"primary\"></igo-rotation-button>\n  </igo-map-browser>\n\n</mat-card>\n\n<p *ngIf=\"!isTouchScreen\">{{pointerCoord}}</p>","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppSimpleMapComponent } from './simple-map.component';\n\nconst routes: Routes = [\n  {\n    path: 'simple-map',\n    component: AppSimpleMapComponent\n  }\n];\n\nexport const AppSimpleMapRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService, MediaService } from '@igo2/core';\nimport { IgoMap, DataSourceService, LayerService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-simple-map',\n  templateUrl: './simple-map.component.html',\n  styleUrls: ['./simple-map.component.scss']\n})\nexport class AppSimpleMapComponent {\n  public pointerCoord;\n  public pointerCoordDelay: number = 0;\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6,\n    rotation: 0.75\n  };\n\n  get media() {\n    return this.mediaService.getMedia();\n  }\n\n  get isTouchScreen() {\n    return this.mediaService.isTouchScreen();\n  }\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    private mediaService: MediaService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n  }\n\n  onPointerMove(event) {\n    this.pointerCoord = event;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMapModule } from '@igo2/geo';\n\nimport { AppSimpleMapComponent } from './simple-map.component';\nimport { AppSimpleMapRoutingModule } from './simple-map-routing.module';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  declarations: [AppSimpleMapComponent],\n  imports: [\n    CommonModule,\n    AppSimpleMapRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMapModule\n  ],\n  exports: [AppSimpleMapComponent]\n})\nexport class AppSimpleMapModule {}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/layer\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Layers\">\n    <igo-layer-list\n    [map]=\"map\"\n    [layers]=\"map.layers\"\n    [expandLegendOfVisibleLayers]=\"false\"\n    floatLabel=\"never\"\n    [queryBadge]=\"true\">\n\n      <ng-template #igoLayerItemToolbar let-layer=\"layer\">\n        <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\n        <igo-download-button [layer]=\"layer\"></igo-download-button>\n        <igo-ogc-filter-button [header]=\"true\" [layer]=\"layer\"></igo-ogc-filter-button>\n        <igo-time-filter-button [header]=\"true\" [layer]=\"layer\"></igo-time-filter-button>\n        <igo-track-feature-button [layer]=\"layer\" [trackFeature]=\"true\"></igo-track-feature-button>\n      </ng-template>\n\n    </igo-layer-list>\n  </igo-panel>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppLayerComponent } from './layer.component';\n\nconst routes: Routes = [\n  {\n    path: 'layer',\n    component: AppLayerComponent\n  }\n];\n\nexport const AppLayerRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WMSDataSourceOptions,\n  LayerOptions,\n  WFSDataSourceOptions,\n  OgcFilterableDataSourceOptions,\n  MetadataLayerOptions\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-layer',\n  templateUrl: './layer.component.html',\n  styleUrls: ['./layer.component.scss']\n})\nexport class AppLayerComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            visible: true,\n            baseLayer: true,\n            source: dataSource\n          })\n        );\n      });\n\n    interface WFSoptions\n      extends WFSDataSourceOptions,\n        OgcFilterableDataSourceOptions {}\n\n    const wfsDatasource: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'shp'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        filters: {\n          operator: 'PropertyIsEqualTo',\n          propertyName: 'code_municipalite',\n          expression: '10043'\n        }\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptions = {\n          title: 'WFS ',\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n    const wfsDatasourceCustomEPSG: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: 'geojson_utf8',\n        srsName: 'EPSG:32198',\n        outputFormatDownload: 'shp'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        filters: {\n          operator: 'PropertyIsEqualTo',\n          propertyName: 'code_municipalite',\n          expression: '12072'\n        }\n      },\n      formatOptions: {\n        dataProjection: 'EPSG:32198'\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasourceCustomEPSG)\n      .subscribe(dataSource => {\n        const layer: LayerOptions = {\n          title: 'WFS (Custom EPSG)',\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n    this.layerService\n      .createAsyncLayer({\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'MELS_CS_ANGLO_S',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Réseau routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          params: {\n            LAYERS: 'bgr_v_sous_route_res_sup_act',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'lieu habité',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'lieuhabite',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'sh_dis_eco',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'sh_dis_eco',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'nurc:Arc_Sample_Parent',\n        visible: false,\n        legendOptions: {\n          // collapsed: false,\n          display: true,\n          // url: 'https://v.seloger.com/s/width/1144/visuels/0/m/l/4/0ml42xbt1n3itaboek3qec5dtskdgw6nlscu7j69k.jpg',\n          stylesAvailable: [\n            { name: 'rain', title: 'Pluie' },\n            { name: 'raster', title: 'Défaut' }\n          ] //\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://demo.geo-solutions.it/geoserver/ows',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'nurc:Arc_Sample', // , test:Linea_costa\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Avertissements routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          params: {\n            LAYERS: 'evenements',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    const datasource: WMSDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      refreshIntervalSec: 15,\n      params: {\n        LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n        VERSION: '1.3.0'\n      }\n    };\n\n    interface LayerOptionsWithMetadata\n      extends LayerOptions,\n        MetadataLayerOptions {}\n\n    this.dataSourceService\n      .createAsyncDataSource(datasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptionsWithMetadata = {\n          title: 'Embâcle',\n          source: dataSource,\n          metadata: {\n            url:\n              'https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp',\n            extern: true\n          }\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoLayerModule,\n  IgoFilterModule,\n  IgoMetadataModule,\n  IgoDownloadModule\n} from '@igo2/geo';\n\nimport { AppLayerComponent } from './layer.component';\nimport { AppLayerRoutingModule } from './layer-routing.module';\n\n@NgModule({\n  declarations: [AppLayerComponent],\n  imports: [\n    AppLayerRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoLayerModule,\n    IgoFilterModule,\n    IgoMetadataModule,\n    IgoDownloadModule\n  ],\n  exports: [AppLayerComponent]\n})\nexport class AppLayerModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppLegendComponent } from './legend.component';\n\nconst routes: Routes = [\n  {\n    path: 'legend',\n    component: AppLegendComponent\n  }\n];\n\nexport const AppLegendRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WMSDataSourceOptions,\n  LayerOptions,\n  WFSDataSourceOptions,\n  OgcFilterableDataSourceOptions,\n  MetadataLayerOptions\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-legend',\n  templateUrl: './legend.component.html',\n  styleUrls: ['./legend.component.scss']\n})\nexport class AppLegendComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            visible: true,\n            baseLayer: true,\n            source: dataSource\n          })\n        );\n      });\n\n    interface WFSoptions\n      extends WFSDataSourceOptions,\n        OgcFilterableDataSourceOptions {}\n\n    const wfsDatasource: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'shp'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        filters: {\n          operator: 'PropertyIsEqualTo',\n          propertyName: 'code_municipalite',\n          expression: '10043'\n        }\n      }\n    };\n\n    this.layerService\n    .createAsyncLayer({\n      title: 'legend with display:false',\n      visible: true,\n      legendOptions: {\n        display: false,\n        html: 'test html'\n      },\n      sourceOptions: {\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n        optionsFromCapabilities: true,\n        params: {\n          LAYERS: 'sh_dis_eco',\n          VERSION: '1.3.0'\n        }\n      }\n    })\n    .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n    .createAsyncLayer({\n      title: 'legend in html',\n      visible: true,\n      legendOptions: {\n        display: true,\n        html: '<h2>HTML légende</h2>'\n      },\n      sourceOptions: {\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n        optionsFromCapabilities: true,\n        params: {\n          LAYERS: 'sh_sreg_eco',\n          VERSION: '1.3.0'\n        }\n      }\n    })\n    .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n    .createAsyncLayer({\n      title: 'legend with url param',\n      visible: true,\n      legendOptions: {\n        url: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxASEhUQEBISFRUVFRAQFRUQFRUVFRAPFRUWFhUVFRUYHSggGBolGxUVITEiJSkrLi4uFx8zODMsNygtLisBCgoKDg0OGhAQGy0dHyUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSstLS0tLS0tLS0tKy0tLS0tLS0tLf/AABEIAKgBLAMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAACAQMEBQYAB//EADwQAAIBAwEGAwYFAgUEAwAAAAECAAMEESEFEjFBUWETInEGFDKBkaFCscHR8FJyFSNTYoIzQ5LxFqLh/8QAGQEAAwEBAQAAAAAAAAAAAAAAAAECAwQF/8QAJREBAQACAgEFAAEFAAAAAAAAAAECERIhAwQTMUFRYRQiI3Gh/9oADAMBAAIRAxEAPwB0QhAEMTFQhCEEQhACEIQRFEYEIQgiEIAU6IIsAWLEnQAp0KmBqSdFBY+g5D1OBGD4nxYBHQafQzLPzTDLVbYeHLObh2LARwwyD+4PQiFNJZZuMrLLqlnRJ0ZFiTp0A6KEOM4OITuF8q4L8ydVp9sc2+0atrlw/hVGLBw2MnO66gsMdBpjHeYZeoxmXGOjH0+Vx5UsSLEm7ndEM6IYAhgmEYJgCGCYRgmIBMEwjAJgAmAYRgkwAGjTxxjGniBipGo5UjcAthCEAGEIwMQhAEIGAHFEERcxgYiiBmEDADzFgAxcwA50HMXMANh5H/tA+rrJhXy8JDXJDAcSpx6jB/SE18u6uuhGnqeU4vPP8m7+PR9N34tT9V20FZD4ifMcmHSSra5V1DKdD9Qeh7yLd1d4HAOJm7W9q27NlWKE55cOozzleLLTPz4b7bPM7MrbXbC1AFRQGb4d84OemP17Rk7YYsUREJUn8XxhfjI7gzp5xyXGrjMj3l5uYVfjYeX/AGrzb15D5mRau0N0Bt3e3uAVhoO56ympms1Z6lTtgaaDHAdgBiZZ+Tc1G3i8fe60FsN0AZ1iLUzXpDTRifqpHGVh2ioGMP8AIQtm3G9WUdmbX+04nNw3Y7+Wsb/peRJ0Qz0HkOMQzokQcTBM4xCYBxgGKTBJgCEwTFJgEwBCYBMUmCTABaMvHGMacxGZeNw3jUCWwMIGNAwgYwdBhAxoGEDAHAYQMbBigwBzMIGNAwgYA4DFzGwYWYwPMXMbzCBgD1PjxxylRUuEpv4J0PDXPx9BLNDrI17bMtd2PmVgrNngHwNdZzeeTqur02dm4RquAWK4A111yOxme2tXZicaAcuZGf3/ADl7UrFtRwA68x69jM/eVGffZcBkyxA0bdAGZHjna/Jl0pKdJmuFUN8A3ufyA+UGz3jVABIOWBOez5z05fWSrxs0qV2g1DbrY/pJAx35H6yMoxWDjhq2Ou8Dp/5GdDmBYsy7yF87rnGpx/NZfWd4yrg65JGeJHM6SjpjcthUK+apUI7glifyMnUKhV9zPH4vpjT7yMpteF0tL6qwAK6j0zr6x72YY1HLlQNwNnHMnQfrIyVAujHThx0lt7MhQKqjj5W/46iRjO42zyvG6XGYhMSJmdLjdmITOJgkwBSYJMQmITAOJgkziYJMA4mATOJgEwDiYBM4mATAOYxpzCJjTGIG3MbzFcwMwCzBhAxpQekPdPSPVLcOAwgYzgxd6GjPAwsxkNFDQB7MUNGhnpDCGPVLcOAxQY3unpFzA9nQYoMaBhAxBO2bS3qijvk+g1kXbFVqlY0qWAB56jHn0EnbPfw1ZzngeExu3L2qRu0iVNVtWGclQPyyZz+T+7LTfx9Y7XdfaNvRQh2ydFAXBJY6AADhrjjMlW2jRSqCyVFLb2vlO8uobKjQj9oT2lMUmpHILbp8TGSHU6b2OIzIVwtVt1moFmUEK9IhlI7a9esMJB5Ll9L1dnqLUCk29TJJ05KSfuAT9BK/w/PpodBwGdOGny9NInsrfstSpQq+UMDuqdd0jj+hkg4Fbf5Zzj7Qm5bKq9yWHLq1QUEeqd1UffAxx5LpzPDSU9G/pl2dKTnd0YlgCfly4R72huHqV6dKjhgi4wdBvEfY6SOthUGfFZKYbG8KZLVHA5Y5SsZNdoz3vpate0agXdyuQG3X4gH85P8AZ2p4dfdfmCgP+08P0lNcW3jDK090IMIc6jHAd47sWuxanv8AEFR8wZOuul7beoMEiBmFVyTnrGjmdHbmKTBJiZnYgCExCYpWAYg4mAWiEwC0AItAJiFoBaAKTAJiFoJMA5jGnMJjG2gDTmDmKwMHBhomsFsI4trLJLaP07aepxjjtqmNn2jbWA6TRi1gNbCK4Y0TLJnvch0hrZdpc+COkcShJ4YnyyVVOzjwtO0tVoiOCkJWoXalNnANl2l74U4UIaxPtRe59oq2faXvgTnTAJ0+gkZSKm2M9pK2F8NSQeOnT9pQJbFqbVq9ZRpujGm4O2ect/amoynLZ3dfh00PUzMW9AK2uMH4S3mHbAPOeLbvderJrUO+IHXcRqjqOBekx9QGUg4+RjKW1VGyhK9cAjP/ABM0lihGFqPT64Ua/wD1kza9gXVGViMHOFpv59eBMmZ96O4xjaNBxVNTdw7ndXPEA8TIj3JBPE68wdZtKeyvGTB31ZSSrqGTB5EZOT85namyqu97rk+Lx8TAx4e98Weu7p1zNMcti46VtrSZnFRR5hkH04D6ayStlU1YAknJydSPU/WaB9jigoCbxYnLMys28Txzidsy2KKcsxzyKFQO2WzFzK4M8XXIR9/e0KsWA83TdXQQrOo6VlBXy7+8OfHiJZ7QsS2rboA1UhRnI4a6SHswO9dd4g6jkVOnYiPG7icpp6LTtwVB7RDajpBt78DRvvH/AH1ZvPPYxvilR/dlne7iSPGUwHdYf1U/C9j+TDWwgGzzHGrATkuR1mmPqML8xN8GU+Ki1LDtGv8ADzLujWUyQKAM6Zhhe3PblOmaNlBNjNT7oOkZqW4j9vEuVZr3CC1oJoDbxipZw4Q+VULUBGzb9polsIZsBF7cHJmPdD0ie5zTe4RPcu0qeKJudaJbacaMaW9ne9TH3m3tnRTMUWxMKjWllQIMfvUe3FctnFNsZdLTE40BF7lPhFL7tE92ls9CR3oGL3aOEREoR8W8NaZEdEPdo4REa2kPaFLdQky33pA2yM0mHaTl5bqqmE2yF8ErJgg4xxI4ntnjMc9N0yppgINTUYjyjkWc8PQYlvR2luVGSrndUgZ6k8FH3k7aNrTqqoqaLxWmuSSepxr+vpPPn8uxmLFwrb9Niyg6u5O4D0A+Jzrw9Jq7C/p1BuFjjucHeHHOD3GnLnrpMnteg4ICEBVyCyjSmnMKvXlnnnAwDqxb3wUhcYxhDg5wF1K/fB6lm7StS9lu/bf+5Mo8gU548vrxMpG2NW8fxd8cMbpXQjP1kKx2zcAZVsjjg8DrJr+0tXnTXPDOsXU+D+Vi1uxH+YFUDnnOR+kp9pbVpou4nDUZ46+n8/SQ7zaNWpjeY45gcBKa+vV1GBk/U6/nz/8AcJjunbqHql+w1NUlTwHEHtrofQiFb3qrh38nJQOHqU5fKV1FN3LvjH9J4N0P84QqVJqzg/g7jgOhmmmdu2pvr1t1cZ1Gc/hP04SGu2WQ7rR2nWVk3AVwowN7OCZn9s13yKemBqMYixm+itaVdtA8DJ9ttANznm4uWXnLSy2lgZzDLx/gmbZ3lbTIMrqN6d7GZWU9rqeJkb3vLgrFMP1VybaxdidJorJmHGUGwwzAEiX7XAAwY/H5ssPhOfjmS0R1Mbq0hK1nIGQY5bXe8NTOvH1Eyc98OkoUYnu8RLgR9amZtM2dxAtvOahJIEBjK5xPFEqUwJBeprJt3UAEzdzdeY6zPLzaOePbcps9e0L/AA4dJW09o1BxWSKe1+oM5OUdXE89liAodYX+KrOF6hj5wcTyXhHGODaYkZipgG3Uw5jinC/U84a3APOVhsl6wDa9GMXKjiuBVWGMGUPgVOTSXRFQcY5kNLTwRIm0LfyH0MEXbDiI1dbSBUiPotMNtawR8OOKZO7nAL/zny5a6jF3l/cU3L587ZHDRKY00HLJ4dh3mr2lvhjVpkFMtvr1A79ZE8ajcDBAD8xzHQZ+k5rdNpNswdsOiDxBlm1HLGuhx24/MSDUuVxvU9NBkdcgZ/naX+1dj7zDGCNEHYAfw/OUd7sKoDoDz4fQSsbiLMg0L9eRZTofLwJ5nEsVvSQMEHn007zPvs6qOXI4wOcdt7e4A3TqOGvDMu4xPKrK8r1GGE0zrK0lE1Ygtr9ZEqUq+8QoYZ5dPST9mbHz56p0HIx6khbtqRs62asByAz5Tkj+cZZ3VZKaGjTxvt9usgXF+f8Ap0RjGBnkO8C2UJlmbLccnv0zJ190966iws3VFwQGxqe31lZcMu8TjGekds7nVmYZz5cc4l5bEciM8MjEufKag3FvkZWQDvLLClX3TumSXtlaVtOlNTZidJodhW53gWjFCgqydZVSGzIzvS8Me29s75KaY5yBd7Wzw+0qQ5PGMuxBnJa6pjFqu1anDlJFLaeBrKRq2kAVsysUZRa0/aDdfBOk0uydso/AzynajkHIh7P2g9MhgSJ1Y7nbmuq9sN0McZWXe1FHEiZq22m1ZNG+kS22O1U5ZjD3h7azvdrKRoZlbi5JYnM1dD2YTmWPzjh2BRGm4PpJ7vdPUnw0NGgx+IYhtbCW7UpFqWy88iGhtULa68ZKS1XtHfcFJyHM6tZNyePUG3NZ9DGXsao+FozVsq/4XEVLW6/1F+kWv4Dmo3A6GMV2uRwUH5yZv3K8d0wm2qy/HSPy1ho0K2vao+ND8pY09rrzBHqIFLbFBtOB7x2rbpUGVIilB9b6mw4iQ7w02U4xwMYr7PbGglXWsXXJ1Eq5CRQ1qLGk3hnO4xGP9szW6lQgklH+IngSM66GW3+IFC6qMgtu4P4uWgme2xc+bygZGpI7Hh9dJGrs9xOb3mm3HfGOXEAc+8JNsgndIKnkCMcOEpBt5kwTjQa4568B9oR21Tc+dRoQo7aZOvpF7d+4rnPqr1LpSQB3PXGRgfpGGZs4ABGn01IP86SppIh1QkajTPLOknWTMjEE59f6c4+uknjpUy2kJqx0Hy5aZlZtO6GoB04a8AeklOzZYKJQ3jK2jNjtLwxRlkb97J8qDA4EnnOe4Pwrr8v3nF6IGCfl1hU95x/lKFX+o8Zqz2KgAmrnXiB0mh9/NWhlk0XTMzFeg40G8x68pK2O1Viafhs2RoADmFn2UokUE4IkqpSKiC9AqcEFSDqDxEnOuV1itVIrLepvHEuLeljUyBQoYOZNNWZZ1rhE4NOqtI9N51SpMuDbloDVI2z44Rlt5jhQT/aM/lJFLZF2w0oVPmMfnNJGWWSDdJvSFd6LiXjez17/AKLfMr+8hXexrofFRf5YP5TWVjew+z+0igmq2f7UAYXHGU+xvZhviqndHTnLC62Va6qr+YDkRmZZZY29LmOWu24ttpBlGCIFVWJ4mZT2c2dVQ5Z/T0mqLGLnvo+Om4DwWAPKMLCDTfbLTmtUPLEaOzRyJj2/6wg8Ogrq+yHPwuZCqbGuR8NQ/OX+8YYc9fyhqBl22Rd/6sae0vV/Eh9QZqKtZxwUn+3EHxcjJRvprFYcrJVEqf8AdoBu6a/Yxmnof8moyH+ipn9ZsPBzqAV9RKu+2dVbiiOv0Mjirki2ntCVIS4XHLe5H5y2uHpumQRqJm721qoMeE7pzUgkj+085SJfvRPlLGm3JshkPTBi3Z8nqX4RtpWtKmlR6jYPiNu4x5RMlV2Z4qnwgxUebI54zgA8M/vNPV2OtxVFWuc0qYyFzoWJzrJVrWp1AapA8FDu00XgzD8Rx3hy0VxYil7NVCm8FJAIAAGdSAePPlIdXZaqPMCOJJweWh/Oenrf1ar+HTUIAN9ieRI8oA689eEZuEWoDSuAjZ47vlA7b2fN8oTy/o4fjzZaCqcjTHCPVr8annqPUHj+8l7Z2HUouSgLodQVGcfIcJR1mA0PPryM11Kjek6zqkNkNnXnKe8phqrdznEstnWdWq2KSlsfTHrNLsj2URH8W4IJ4hAeJ7mFymI1az+yNg75B0A5F8y7q0UoEK64HBWOCra6AGLta7u97IUIg0AQ4wO3IwrfaAqLuVNQ2hBBAJ7f0kdpF3e1TU6NeDSqkKh3W6/hbtkcD2jaq1u281XXBwFVgQegbGD9Yxf7JqU8VKJ38fhPxYGvz/PSS6hS5okjRlBOD8SkcQecc/4VDWvKdUZyS3VskyOwPIymt3K1N09cazTWNMtooLHoNZVx0UyRKNJzyku12RVqHyAn0ms2T7Lu2GqkAdBrNTQtqNEYAGn84CRdLlrIbO9i3YDxHx2XUy+tfY61p6shc/7tf/yWr7RxooP/AIn8sSK+0UY+YVVPZTg/XSLo7s74NOmMU6aL6LGffQ3lzg+kYN1RByXYf8WB9eOPtHqN5bVPxjPDJGDJCsudpVkbcYadeokG6vqg83FTx04TV07ZOJdHXln9JL8OnjAVT2wBCSj4YY12chcZzoMSds72NtUqeNVyznXU6D5cJqVorn/poMcMYMSuBzXP7R446K3Y1taOBhRpwkKvbrn4BCNUE+Rs9uYjqk8xH0O04Oen3hmQaVxHQ8pKauOs7HeRd4wlJ6wCSSP/AFBL9MxsRcmAPo/Uzt8dzGgIYWMONbtAas3yhPpIdZzHsaSTV7/eMXNJXGHVWHRgD+cbWqOAEcCdY52FTfbCouhRVZAcE+G3T1z9pSXexqlNadOnh0Vt473kxrkZHMCbMiRquDpJuMPahegtOmFGMsxZyPxdsyjvL2lTfKrvMRrnXHp0mpvLEOMA4lDtL2WqMd5GGnUcfpMbhdtJlNKOl7TVN4gBR2lXdWdC8rA1PIx0O7oGMXbOzqlFt90I5EjUGVlglZ6quadUIuSCqnX7TTDH7ic7GztLBLVXRMKgAJJ1Zmmd2rdMy75JGuF5GOUPfXfd3SygkgucEjlkTrzYl61QOyAqOQPOTwvLsTKadTu2NMipwA4HnGNneEy7yjUHjnOnTEtP/itzVQhmCZ+ZxFs/YitSXcVxgnU45RzHorlNoV9cimA3MlcfvHqQtCQ7O9NyDnChlIP9XD85p7T2ctwAKi75HNjmHfez1vU0A3ca+XT6yuPSeW2HX2cUtvU7iiykg+clGHyOn3m02PbW9BQDUTqSGBLH5cpW3fskRqnm7DQ/aV52Qy6MHHqTC205I2F17UUlG7SBbvwEz9z7Q12/Hx5KMYjVts4D8DH6mFb7IqbxCocciREfR+32rWHmZyf1k239oXPHQyPU2DXOuAOgzGDs9wQCsCae020rDDYj1SiG1plfRgCJkLi2qLjcU9TLjZVZ9CYocy0sjQdf+zSz/tHGLb+Lzor8s/vJi3MJLnJ0jvRy7O0Cw/CAPU/vHDUx3iUzn4sQXccBHpBqqik7w0PUfr1jxRzqpGO/WNEQPFxwMVitomHzHkqHrEnQkI5TrmOi4nTpRDW5jouDOnRmIV2jq3ESdFQJ68YJJnToASkLqZFr7S1wonTobBErMRrG3M6dEAKxkynV0nTowi3Qpt8QBi0FpcAonToEbr2VPO9gQhTUjAnTpROWniGyTp0ZK+uwBgb/AEE6dIqofpEwy4X4hn1nToqccbxQMhRH7a7zyAnToYlXVq0ZVA3ETp0mnB1LVcaxilQXOAIk6HxSSjSAEra+8moiTppZuJnRy3vAeJklWXOQZ06R8KO+IesBlnTo7Q//2Q=='\n\n      },\n      sourceOptions: {\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/mffpecofor.fcgi',\n        optionsFromCapabilities: true,\n        params: {\n          LAYERS: 'sh_reg_eco',\n          VERSION: '1.3.0'\n        }\n      }\n    })\n    .subscribe(l => this.map.addLayer(l));\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDatasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptions = {\n          title: 'WFS ',\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n\n    this.layerService\n      .createAsyncLayer({\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'MELS_CS_ANGLO_S',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Réseau routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          params: {\n            LAYERS: 'bgr_v_sous_route_res_sup_act',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'lieu habité',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'lieuhabite',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: '2 styles nurc:Arc_Sample_Parent',\n        visible: true,\n        legendOptions: {\n          // collapsed: false,\n          display: true,\n          // url: 'https://v.seloger.com/s/width/1144/visuels/0/m/l/4/0ml42xbt1n3itaboek3qec5dtskdgw6nlscu7j69k.jpg',\n          stylesAvailable: [\n            { name: 'rain', title: 'Pluie' },\n            { name: 'raster', title: 'Défaut' }\n          ] //\n        },\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://demo.geo-solutions.it/geoserver/ows',\n          optionsFromCapabilities: true,\n          params: {\n            LAYERS: 'nurc:Arc_Sample', // , test:Linea_costa\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'Avertissements routier',\n        visible: false,\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n          params: {\n            LAYERS: 'evenements',\n            VERSION: '1.3.0'\n          }\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    const datasource: WMSDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      refreshIntervalSec: 15,\n      params: {\n        LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n        VERSION: '1.3.0'\n      }\n    };\n\n    interface LayerOptionsWithMetadata\n      extends LayerOptions,\n        MetadataLayerOptions {}\n\n    this.dataSourceService\n      .createAsyncDataSource(datasource)\n      .subscribe(dataSource => {\n        const layer: LayerOptionsWithMetadata = {\n          title: 'Embâcle',\n          visible: true,\n          source: dataSource,\n          metadata: {\n            url:\n              'https://www.donneesquebec.ca/recherche/fr/dataset/historique-publique-d-embacles-repertories-au-msp',\n            extern: true\n          }\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map with a legend list</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/layer\">code of this\n      example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Legends\">\n    <igo-layer-legend-list [layers]=\"map.layers\"\n    [excludeBaseLayers]=\"true\"\n    [allowShowAllLegends]=\"true\"\n    [updateLegendOnResolutionChange]=\"false\"\n    [showAllLegendsValue]=\"false\">\n  </igo-layer-legend-list>\n\n  </igo-panel>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoLayerModule,\n  IgoFilterModule,\n  IgoMetadataModule,\n  IgoDownloadModule\n} from '@igo2/geo';\n\nimport { AppLegendComponent } from './legend.component';\nimport { AppLegendRoutingModule } from './legend-routing.module';\n\n@NgModule({\n  declarations: [AppLegendComponent],\n  imports: [\n    AppLegendRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoLayerModule,\n    IgoFilterModule,\n    IgoMetadataModule,\n    IgoDownloadModule\n  ],\n  exports: [AppLegendComponent]\n})\nexport class AppLegendModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppOverlayComponent } from './overlay.component';\n\nconst routes: Routes = [\n  {\n    path: 'overlay',\n    component: AppOverlayComponent\n  }\n];\n\nexport const AppOverlayRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, AfterViewInit } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  FEATURE,\n  Feature,\n  FeatureMotion\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-overlay',\n  templateUrl: './overlay.component.html',\n  styleUrls: ['./overlay.component.scss']\n})\nexport class AppOverlayComponent implements OnInit, AfterViewInit {\n  public map = new IgoMap({\n    overlay: true,\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {}\n\n  ngOnInit() {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n  }\n\n  ngAfterViewInit() {\n    const feature1: Feature = {\n      type: FEATURE,\n      projection: 'EPSG:4326',\n      meta: {\n        id: 1\n      },\n      properties: {},\n      geometry: {\n        type: 'Point',\n        coordinates: [-73, 46.6]\n      }\n    };\n\n    const feature2: Feature = {\n      type: FEATURE,\n      projection: 'EPSG:4326',\n      meta: {\n        id: 2\n      },\n      properties: {},\n      geometry: {\n        type: 'LineString',\n        coordinates: [[-72, 47.8], [-73.5, 47.4], [-72.4, 48.6]]\n      }\n    };\n\n    const feature3: Feature = {\n      type: FEATURE,\n      projection: 'EPSG:4326',\n      meta: {\n        id: 3\n      },\n      properties: {},\n      geometry: {\n        type: 'Polygon',\n        coordinates: [[[-71, 46.8], [-73, 47], [-71.2, 46.6]]]\n      }\n    };\n\n    this.map.overlay.setFeatures(\n      [feature1, feature2, feature3],\n      FeatureMotion.None\n    );\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Overlay</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/overlay\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMapModule, IgoOverlayModule } from '@igo2/geo';\n\nimport { AppOverlayComponent } from './overlay.component';\nimport { AppOverlayRoutingModule } from './overlay-routing.module';\n\n@NgModule({\n  declarations: [AppOverlayComponent],\n  imports: [\n    AppOverlayRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMapModule,\n    IgoOverlayModule\n  ],\n  exports: [AppOverlayComponent]\n})\nexport class AppOverlayModule {}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Geometry Form</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/common/form\">code of this example</a>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-form\n    *ngIf=\"form$ | async as form\"\n    [form]=\"form\"\n    [formData]=\"data$ | async\"\n    (submitForm)=\"onSubmit($event)\">\n\n    <igo-form-group [group]=\"form.groups[0]\"></igo-form-group>\n\n    <div formButtons>\n      <button\n        mat-stroked-button\n        type=\"button\"\n        color=\"primary\"\n        (click)=\"fillForm()\">\n        Fill Form\n      </button>\n      <button\n        mat-stroked-button\n        type=\"button\"\n        color=\"primary\"\n        (click)=\"clearForm()\">\n        Clear Form\n      </button>\n      <button\n        mat-flat-button\n        type=\"submit\"\n        color=\"primary\"\n        [disabled]=\"submitDisabled\">\n        Submit\n      </button>\n    </div>\n  </igo-form>\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppGeometryComponent } from './geometry.component';\n\nconst routes: Routes = [\n  {\n    path: 'geometry',\n    component: AppGeometryComponent\n  }\n];\n\nexport const AppGeometryRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport * as olstyle from 'ol/style';\n\nimport { LanguageService } from '@igo2/core';\nimport { Form, FormService } from '@igo2/common';\nimport { IgoMap, DataSourceService, LayerService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-geometry',\n  templateUrl: './geometry.component.html',\n  styleUrls: ['./geometry.component.scss']\n})\nexport class AppGeometryComponent implements OnInit, OnDestroy {\n\n  map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  view = {\n    center: [-73, 47.2],\n    zoom: 15\n  };\n\n  form$ = new BehaviorSubject<Form>(undefined);\n\n  data$ = new BehaviorSubject<{[key: string]: any}>(undefined);\n\n  submitDisabled = true;\n\n  private valueChanges$$: Subscription;\n\n  constructor(\n    private languageService: LanguageService,\n    private formService: FormService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {}\n\n  ngOnInit() {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    const fieldConfigs = [\n      {\n        name: 'geometry',\n        title: 'Geometry',\n        options:  {\n          validator: Validators.required\n        },\n        type: 'geometry',\n        inputs: {\n          map: this.map,\n          geometryTypeField: true,\n          geometryType: 'Polygon',\n          drawGuideField: true,\n          drawGuide: 50,\n          drawGuidePlaceholder: 'Draw Guide',\n          drawStyle: new olstyle.Style({\n            stroke: new olstyle.Stroke({\n              color: [255, 0, 0, 1],\n              width: 2\n            }),\n            fill:  new olstyle.Fill({\n              color: [255, 0, 0, 0.2]\n            }),\n            image: new olstyle.Circle({\n              radius: 8,\n              stroke: new olstyle.Stroke({\n                color: [255, 0, 0, 1]\n              }),\n              fill: new olstyle.Fill({\n                color: [255, 0, 0, 0.2]\n              })\n            })\n          })\n        }\n      },\n      {\n        name: 'name',\n        title: 'Name',\n        options:  {\n          validator: Validators.required\n        }\n      }\n    ];\n\n    const fields = fieldConfigs.map((config) => this.formService.field(config));\n    const form = this.formService.form([], [this.formService.group({name: 'info'}, fields)]);\n\n    this.valueChanges$$ = form.control.valueChanges.subscribe(() => {\n      this.submitDisabled = !form.control.valid;\n    });\n\n    this.form$.next(form);\n  }\n\n  ngOnDestroy() {\n    this.valueChanges$$.unsubscribe();\n  }\n\n  fillForm() {\n    this.data$.next({\n      name: 'Place',\n      geometry: JSON.stringify({type: 'Polygon', coordinates: [[\n        [-106, 42],\n        [-107, 31],\n        [-81, 32],\n        [-82, 42],\n        [-106, 42]\n      ]]})\n    });\n  }\n\n  clearForm() {\n    this.form$.value.control.reset();\n  }\n\n  onSubmit(data: {[key: string]: any}) {\n    alert(JSON.stringify(data));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoFormModule } from '@igo2/common';\nimport { IgoGeometryModule, IgoMapModule } from '@igo2/geo';\n\nimport { AppGeometryComponent } from './geometry.component';\nimport { AppGeometryRoutingModule } from './geometry-routing.module';\n\n@NgModule({\n  declarations: [AppGeometryComponent],\n  imports: [\n    CommonModule,\n    AppGeometryRoutingModule,\n    MatButtonModule,\n    MatCardModule,\n    IgoFormModule,\n    IgoGeometryModule,\n    IgoMapModule\n  ],\n  exports: [AppGeometryComponent]\n})\nexport class AppGeometryModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppFeatureComponent } from './feature.component';\n\nconst routes: Routes = [\n  {\n    path: 'feature',\n    component: AppFeatureComponent\n  }\n];\n\nexport const AppFeatureRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit, OnDestroy } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  VectorLayer,\n  FeatureStore,\n  FeatureStoreLoadingStrategy,\n  FeatureStoreSelectionStrategy,\n  FeatureMotion\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-feature',\n  templateUrl: './feature.component.html',\n  styleUrls: ['./feature.component.scss']\n})\nexport class AppFeatureComponent implements OnInit, OnDestroy {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  public tableTemplate = {\n    selection: true,\n    selectMany: true,\n    sort: true,\n    columns: [\n      {\n        name: 'properties.id',\n        title: 'ID'\n      },\n      {\n        name: 'properties.name',\n        title: 'Name'\n      },\n      {\n        name: 'properties.description',\n        title: 'Description'\n      }\n    ]\n  };\n\n  public store = new FeatureStore([], { map: this.map });\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {}\n\n  ngOnInit() {\n    const loadingStrategy = new FeatureStoreLoadingStrategy({});\n    this.store.addStrategy(loadingStrategy);\n\n    const selectionStrategy = new FeatureStoreSelectionStrategy({\n      map: this.map,\n      motion: FeatureMotion.Default\n    });\n    this.store.addStrategy(selectionStrategy);\n\n    this.store.load([\n      {\n        meta: { id: 1 },\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [-72, 47.8]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 1,\n          name: 'Name 1',\n          description: 'Description 1'\n        }\n      },\n      {\n        meta: { id: 2 },\n        type: 'Feature',\n        geometry: {\n          type: 'LineString',\n          coordinates: [[-72, 47.8], [-73.5, 47.4], [-72.4, 48.6]]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 2,\n          name: 'Name 2',\n          description: 'Description 2'\n        }\n      },\n      {\n        meta: { id: 3 },\n        type: 'Feature',\n        geometry: {\n          type: 'Polygon',\n          coordinates: [[[-71, 46.8], [-73, 47], [-71.2, 46.6]]]\n        },\n        projection: 'EPSG:4326',\n        properties: {\n          id: 3,\n          name: 'Name 3',\n          description: 'Description 3'\n        }\n      }\n    ]);\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'MVT test',\n        visible: true,\n        sourceOptions: {\n          type: 'mvt',\n          url:\n            'https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/ne:ne_10m_admin_0_countries@EPSG:900913@pbf/{z}/{x}/{-y}.pbf',\n          queryable: true\n        },\n        mapboxStyle: {\n          url: 'assets/mapboxStyleExample-vectortile.json',\n          source: 'ahocevar'\n        }\n      } as any)\n      .subscribe(l => this.map.addLayer(l));\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'vector'\n      })\n      .subscribe(dataSource => {\n        const layer = this.layerService.createLayer({\n          title: 'Vector Layer',\n          source: dataSource,\n          animation: {\n            duration: 2000\n          },\n          mapboxStyle: {\n            url: 'assets/mapboxStyleExample-feature.json',\n            source: 'source_nameX'\n          }\n        }) as VectorLayer;\n        this.map.addLayer(layer);\n        this.store.bindLayer(layer);\n        loadingStrategy.activate();\n        selectionStrategy.activate();\n      });\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Feature</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geom/feature\">code of this example</a>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-entity-table\n    [store]=\"store\"\n    [template]=\"tableTemplate\">\n  </igo-entity-table>\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule, IgoEntityTableModule } from '@igo2/common';\nimport { IgoMapModule, IgoFeatureModule } from '@igo2/geo';\n\nimport { AppFeatureComponent } from './feature.component';\nimport { AppFeatureRoutingModule } from './feature-routing.module';\n\n@NgModule({\n  declarations: [AppFeatureComponent],\n  imports: [\n    AppFeatureRoutingModule,\n    CommonModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoEntityTableModule,\n    IgoMapModule,\n    IgoFeatureModule\n  ],\n  exports: [AppFeatureComponent]\n})\nexport class AppFeatureModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppMeasureComponent } from './measure.component';\n\nconst routes: Routes = [\n  {\n    path: 'measure',\n    component: AppMeasureComponent\n  }\n];\n\nexport const AppMeasureRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  FeatureStore,\n  FeatureWithMeasure\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-measure',\n  templateUrl: './measure.component.html',\n  styleUrls: ['./measure.component.scss']\n})\nexport class AppMeasureComponent {\n\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      },\n      scaleLine: true\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6,\n    projection: 'EPSG:3857'\n  };\n\n  public store = new FeatureStore<FeatureWithMeasure>([], {map: this.map});\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Simple Map</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/measure\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-measurer [store]=\"store\" [map]=\"map\"></igo-measurer>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMapModule, IgoMeasureModule } from '@igo2/geo';\n\nimport { AppMeasureComponent } from './measure.component';\nimport { AppMeasureRoutingModule } from './measure-routing.module';\n\n@NgModule({\n  declarations: [AppMeasureComponent],\n  imports: [\n    AppMeasureRoutingModule,\n    MatCardModule,\n    IgoMapModule,\n    IgoMeasureModule\n  ],\n  exports: [AppMeasureComponent]\n})\nexport class AppMeasureModule {}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Query</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/query\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser\n    [map]=\"map\"\n    [view]=\"view\"\n    igoOverlay\n    igoQuery\n    [queryFeatures]=\"true\"\n    (query)=\"handleQueryResults($event)\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Details\">\n    <ng-container *ngIf=\"feature$ | async as feature\">\n      <h1>Query Title : <span style=\"background-color: #e0e0e0;\">{{getTitle(feature)}}</span></h1>\n      <igo-feature-details [feature]=\"feature\"></igo-feature-details>\n    </ng-container>\n  </igo-panel>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppQueryComponent } from './query.component';\n\nconst routes: Routes = [\n  {\n    path: 'query',\n    component: AppQueryComponent\n  }\n];\n\nexport const AppQueryRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport olFeature from 'ol/Feature';\nimport olPoint from 'ol/geom/Point';\nimport olPolygon from 'ol/geom/Polygon';\nimport olLineString from 'ol/geom/LineString';\nimport * as olproj from 'ol/proj';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  FeatureDataSource,\n  DataSourceService,\n  LayerService,\n  OverlayService,\n  Feature,\n  QueryableDataSourceOptions,\n  QueryFormat,\n  QueryHtmlTarget,\n  SearchResult,\n  FeatureMotion\n} from '@igo2/geo';\n\nimport { getEntityTitle, EntityStore } from '@igo2/common';\n\n@Component({\n  selector: 'app-query',\n  templateUrl: './query.component.html',\n  styleUrls: ['./query.component.scss']\n})\nexport class AppQueryComponent {\n  public feature$ = new BehaviorSubject<Feature>(undefined);\n\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    private overlayService: OverlayService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n        queryable: true,\n        queryTitle: 'num_rts',\n        params: {\n          layers: 'bgr_v_sous_route_res_sup_act',\n          version: '1.3.0'\n        }\n      } as QueryableDataSourceOptions)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'WMS',\n            source: dataSource,\n            sourceOptions: dataSource.options\n          })\n        );\n      });\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n        queryable: true,\n        queryFormat: QueryFormat.HTMLGML2,\n        queryHtmlTarget: QueryHtmlTarget.IFRAME,\n        params: {\n          layers: 'bgr_v_sous_route_res_sup_act',\n          version: '1.3.0'\n        }\n      } as QueryableDataSourceOptions)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'WMS html with a pre call in GML',\n            source: dataSource,\n            sourceOptions: dataSource.options\n          })\n        );\n      });\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'vector',\n        queryable: true,\n        queryTitle: 'So beautiful ${name}',\n        sourceFields: [\n          { name: 'name', alias: 'Alias name' },\n          { name: 'description', alias: 'Alias description' }\n        ]\n      } as QueryableDataSourceOptions)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Vector Layer',\n            source: dataSource,\n            sourceOptions: dataSource.options\n          })\n        );\n        this.addFeatures(dataSource as FeatureDataSource);\n      });\n  }\n\n  addFeatures(dataSource: FeatureDataSource) {\n    const feature1 = new olFeature({\n      name: 'feature1',\n      geometry: new olLineString([\n        olproj.transform([-72, 47.8], 'EPSG:4326', 'EPSG:3857'),\n        olproj.transform([-73.5, 47.4], 'EPSG:4326', 'EPSG:3857'),\n        olproj.transform([-72.4, 48.6], 'EPSG:4326', 'EPSG:3857')\n      ]),\n    });\n\n    const feature2 = new olFeature({\n      name: 'feature2',\n      geometry: new olPoint(\n        olproj.transform([-73, 46.6], 'EPSG:4326', 'EPSG:3857')\n      ),\n    });\n\n    const feature3 = new olFeature({\n      name: 'feature3',\n      geometry: new olPolygon([\n        [\n          olproj.transform([-71, 46.8], 'EPSG:4326', 'EPSG:3857'),\n          olproj.transform([-73, 47], 'EPSG:4326', 'EPSG:3857'),\n          olproj.transform([-71.2, 46.6], 'EPSG:4326', 'EPSG:3857')\n        ]\n      ]),\n    });\n\n    dataSource.ol.addFeatures([feature1, feature2, feature3]);\n  }\n\n  handleQueryResults(results) {\n    const features: Feature[] = results.features;\n    let feature: Feature;\n    if (features.length) {\n      feature = features[0];\n    }\n    this.feature$.next(feature);\n\n    this.map.overlay.setFeatures([feature], FeatureMotion.None);\n  }\n\n  getTitle(result: SearchResult) {\n    return getEntityTitle(result);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoOverlayModule,\n  IgoQueryModule,\n  IgoFeatureModule\n} from '@igo2/geo';\n\nimport { AppQueryComponent } from './query.component';\nimport { AppQueryRoutingModule } from './query-routing.module';\n\n@NgModule({\n  declarations: [AppQueryComponent],\n  imports: [\n    AppQueryRoutingModule,\n    CommonModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoOverlayModule,\n    IgoQueryModule,\n    IgoFeatureModule\n  ],\n  exports: [AppQueryComponent]\n})\nexport class AppQueryModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppCatalogComponent } from './catalog.component';\n\nconst routes: Routes = [\n  {\n    path: 'catalog',\n    component: AppCatalogComponent\n  }\n];\n\nexport const AppCatalogRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit } from '@angular/core';\n\nimport { LanguageService, ConfigService } from '@igo2/core';\nimport { IgoMap, LayerService, Catalog, CatalogItem, CatalogService } from '@igo2/geo';\nimport { EntityStore } from '@igo2/common';\n\n@Component({\n  selector: 'app-catalog',\n  templateUrl: './catalog.component.html',\n  styleUrls: ['./catalog.component.scss']\n})\nexport class AppCatalogComponent implements OnInit {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  public catalogStore = new EntityStore<Catalog>([]);\n\n  public catalogItemStore = new EntityStore<CatalogItem>([]);\n\n  constructor(\n    private configService: ConfigService,\n    private languageService: LanguageService,\n    private layerService: LayerService,\n    private catalogService: CatalogService\n  ) {}\n\n  /**\n   * @internal\n   */\n  ngOnInit() {\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(layer => this.map.addLayer(layer));\n\n    this.loadCatalogs();\n  }\n\n  /**\n   * When the selected catalog changes, toggle the the CatalogBrowser tool.\n   * @internal\n   * @param event Select event\n   */\n  onCatalogSelectChange(event: {selected: boolean; catalog: Catalog}) {\n    this.loadCatalogItems(event.catalog);\n  }\n\n  /**\n   * Get all the available catalogs from the CatalogService and\n   * load them into the store.\n   */\n  private loadCatalogs() {\n    this.catalogService.loadCatalogs()\n      .subscribe((catalogs: Catalog[]) => {\n        this.catalogStore.clear();\n        this.catalogStore.load(catalogs);\n      });\n  }\n\n  /**\n   * Get the selected catalog's items from the CatalogService and\n   * load them into the store.\n   * @param catalog Selected catalog\n   */\n  private loadCatalogItems(catalog: Catalog) {\n    this.catalogService.loadCatalogItems(catalog)\n      .subscribe((items: CatalogItem[]) => {\n        this.catalogItemStore.clear();\n        this.catalogItemStore.load(items);\n      });\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Catalog</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: ConfigService, LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/catalog\">code of this example</a><br>\n    See catalog section of the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Catalog Library\">\n    <igo-catalog-library\n      [store]=\"catalogStore\"\n      (catalogSelectChange)=\"onCatalogSelectChange($event)\">\n    </igo-catalog-library>\n  </igo-panel>\n\n  <igo-panel title=\"Catalog Browser\">\n    <igo-catalog-browser\n      [store]=\"catalogItemStore\"\n      [map]=\"map\">\n    </igo-catalog-browser>\n  </igo-panel>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoConfigModule, provideConfigOptions } from '@igo2/core';\nimport { IgoPanelModule } from '@igo2/common';\nimport { IgoMapModule, IgoCatalogModule } from '@igo2/geo';\n\nimport { environment } from '../../../environments/environment';\nimport { AppCatalogComponent } from './catalog.component';\nimport { AppCatalogRoutingModule } from './catalog-routing.module';\n\n@NgModule({\n  declarations: [AppCatalogComponent],\n  imports: [\n    CommonModule,\n    AppCatalogRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    MatTooltipModule,\n    IgoConfigModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoCatalogModule\n  ],\n  exports: [AppCatalogComponent],\n  providers: [\n    provideConfigOptions({\n      default: environment.igo\n    })\n  ]\n})\nexport class AppCatalogModule {}\n","import { ɵɵdefineInjectable, ɵɵinject, Injectable, Optional, Component, Input, NgModule, Directive, EventEmitter, ChangeDetectionStrategy, ChangeDetectorRef, Output, Self, HostListener } from '@angular/core';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatOptionModule } from '@angular/material/core';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { LanguageService, ConfigService, MessageService, RouteService, IgoLanguageModule, StorageService } from '@igo2/core';\nimport { Validators, FormBuilder, FormsModule, ReactiveFormsModule, FormControl } from '@angular/forms';\nimport { BehaviorSubject, of, Observable, merge, ReplaySubject, EMPTY, timer } from 'rxjs';\nimport { Stroke, Fill, Style, Circle } from 'ol/style';\nimport { FeatureDataSource, VectorLayer, ClusterDataSource, MapBrowserComponent, LayerService, StyleListService, StyleService, MapService, moveToOlFeatures, FeatureMotion, IgoFeatureModule } from '@igo2/geo';\nimport { HttpClient } from '@angular/common/http';\nimport { first, catchError, tap, map, mergeMap, debounceTime, filter, buffer, debounce } from 'rxjs/operators';\nimport olPoint from 'ol/geom/Point';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport Cluster from 'ol/source/Cluster';\nimport { ObjectUtils, uuid, downloadContent, Clipboard } from '@igo2/utils';\nimport { AuthService, IgoAuthModule } from '@igo2/auth';\nimport { IgoSpinnerModule, ActionStore, ActionbarMode, ConfirmDialogService, IgoConfirmDialogModule, IgoStopPropagationModule, IgoListModule, IgoKeyValueModule, IgoCollapsibleModule, IgoActionbarModule, getEntityTitle, IgoPanelModule, IgoFlexibleModule } from '@igo2/common';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatDialogRef, MatDialog, MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { fromLonLat } from 'ol/proj';\nimport { easeOut } from 'ol/easing';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { Title } from '@angular/platform-browser';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common/http';\nimport * as ɵngcc2 from '@igo2/auth';\nimport * as ɵngcc3 from '@igo2/core';\nimport * as ɵngcc4 from '@angular/forms';\nimport * as ɵngcc5 from '@angular/material/button-toggle';\nimport * as ɵngcc6 from '@angular/common';\nimport * as ɵngcc7 from '@angular/material/button';\nimport * as ɵngcc8 from '@igo2/common';\nimport * as ɵngcc9 from '@angular/material/form-field';\nimport * as ɵngcc10 from '@angular/material/input';\nimport * as ɵngcc11 from '@angular/material/select';\nimport * as ɵngcc12 from '@angular/material/core';\nimport * as ɵngcc13 from '@angular/material/divider';\nimport * as ɵngcc14 from '@ngx-translate/core';\nimport * as ɵngcc15 from '@igo2/geo';\nimport * as ɵngcc16 from '@angular/material/dialog';\nimport * as ɵngcc17 from '@angular/material/menu';\nimport * as ɵngcc18 from '@angular/material/checkbox';\nimport * as ɵngcc19 from '@angular/material/icon';\nimport * as ɵngcc20 from '@angular/material/tooltip';\nimport * as ɵngcc21 from '@angular/material/list';\nimport * as ɵngcc22 from '@angular/material/radio';\nimport * as ɵngcc23 from '@angular/material/autocomplete';\nimport * as ɵngcc24 from '@angular/platform-browser';\nimport * as ɵngcc25 from '@angular/material/sidenav';\n\nconst _c0 = function (a0) { return { size: a0 }; };\nfunction ContextImportExportComponent_div_8_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"form\", 5);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 6);\n    ɵngcc0.ɵɵelementStart(3, \"button\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextImportExportComponent_div_8_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r4); const _r2 = ɵngcc0.ɵɵreference(10); return _r2.click(); });\n    ɵngcc0.ɵɵpipe(4, \"async\");\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(7, \"igo-spinner\", 8);\n    ɵngcc0.ɵɵpipe(8, \"async\");\n    ɵngcc0.ɵɵelementStart(9, \"input\", 9, 10);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextImportExportComponent_div_8_Template_input_click_9_listener() { ɵngcc0.ɵɵrestoreView(_r4); const _r2 = ɵngcc0.ɵɵreference(10); return _r2.value = null; })(\"change\", function ContextImportExportComponent_div_8_Template_input_change_9_listener($event) { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.importFiles($event.target.files); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"section\", 11);\n    ɵngcc0.ɵɵelementStart(12, \"h4\");\n    ɵngcc0.ɵɵtext(13);\n    ɵngcc0.ɵɵpipe(14, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(15, \"ul\");\n    ɵngcc0.ɵɵelementStart(16, \"li\");\n    ɵngcc0.ɵɵtext(17);\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", ɵngcc0.ɵɵpipeBind1(4, 7, ctx_r0.loading$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 9, \"igo.geo.importExportForm.importButton\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"shown\", ɵngcc0.ɵɵpipeBind1(8, 11, ctx_r0.loading$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵstyleProp(\"display\", \"none\");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(14, 13, \"igo.geo.importExportForm.importClarifications\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(18, 15, \"igo.geo.importExportForm.importSizeMax\", ɵngcc0.ɵɵpureFunction1(18, _c0, ctx_r0.fileSizeMb)));\n} }\nfunction ContextImportExportComponent_form_9_mat_option_18_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const layer_r9 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", layer_r9);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(layer_r9.title);\n} }\nfunction ContextImportExportComponent_form_9_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 13);\n    ɵngcc0.ɵɵelementStart(2, \"mat-form-field\", 14);\n    ɵngcc0.ɵɵelementStart(3, \"mat-label\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(6, \"input\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"div\", 13);\n    ɵngcc0.ɵɵelementStart(8, \"mat-form-field\");\n    ɵngcc0.ɵɵelementStart(9, \"mat-label\");\n    ɵngcc0.ɵɵtext(10);\n    ɵngcc0.ɵɵpipe(11, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(12, \"mat-select\", 16);\n    ɵngcc0.ɵɵelementStart(13, \"mat-option\", 17, 18);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextImportExportComponent_form_9_Template_mat_option_click_13_listener() { ɵngcc0.ɵɵrestoreView(_r11); const _r7 = ɵngcc0.ɵɵreference(14); const ctx_r10 = ɵngcc0.ɵɵnextContext(); return ctx_r10.selectAll(_r7); });\n    ɵngcc0.ɵɵtext(15);\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(17, \"mat-divider\");\n    ɵngcc0.ɵɵtemplate(18, ContextImportExportComponent_form_9_mat_option_18_Template, 2, 2, \"mat-option\", 19);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(19, \"div\", 6);\n    ɵngcc0.ɵɵelementStart(20, \"button\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextImportExportComponent_form_9_Template_button_click_20_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r12 = ɵngcc0.ɵɵnextContext(); return ctx_r12.handleExportFormSubmit(ctx_r12.form.value); });\n    ɵngcc0.ɵɵpipe(21, \"async\");\n    ɵngcc0.ɵɵtext(22);\n    ɵngcc0.ɵɵpipe(23, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(24, \"igo-spinner\", 8);\n    ɵngcc0.ɵɵpipe(25, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r1.form);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 9, \"igo.context.contextImportExport.export.exportContextName\"));\n    ɵngcc0.ɵɵadvance(6);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(11, 11, \"igo.context.contextImportExport.export.exportPlaceHolder\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"value\", 1);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(16, 13, \"igo.context.contextImportExport.export.exportSelectAll\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.userControlledLayerList);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r1.form.valid || ɵngcc0.ɵɵpipeBind1(21, 15, ctx_r1.loading$));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(23, 17, \"igo.geo.importExportForm.exportButton\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"shown\", ɵngcc0.ɵɵpipeBind1(25, 19, ctx_r1.loading$));\n} }\nfunction ContextListComponent_mat_form_field_1_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextListComponent_mat_form_field_1_button_3_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(2); return ctx_r9.clearFilter(); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 15);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction ContextListComponent_mat_form_field_1_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-form-field\", 11);\n    ɵngcc0.ɵɵelementStart(1, \"input\", 12);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ContextListComponent_mat_form_field_1_Template_input_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.term = $event; });\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(3, ContextListComponent_mat_form_field_1_button_3_Template, 2, 0, \"button\", 13);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r0.auth.authenticated ? \"context-filter-min-width\" : \"context-filter-max-width\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(2, 4, \"igo.context.contextManager.filterPlaceHolder\"))(\"ngModel\", ctx_r0.term);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.term.length);\n} }\nfunction ContextListComponent_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextListComponent_button_2_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.toggleSort(true); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 17);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.context.contextManager.sortAlphabetically\"));\n} }\nfunction ContextListComponent_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextListComponent_button_3_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15.toggleSort(false); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 18);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.context.contextManager.sortContextOrder\"));\n} }\nfunction ContextListComponent_igo_actionbar_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-actionbar\", 19);\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"iconColor\", ctx_r3.color)(\"store\", ctx_r3.actionStore)(\"withIcon\", true)(\"withTitle\", ctx_r3.actionbarMode === \"overlay\")(\"horizontal\", false)(\"mode\", ctx_r3.actionbarMode);\n} }\nfunction ContextListComponent_button_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 20);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 21);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵnextContext();\n    const _r5 = ɵngcc0.ɵɵreference(7);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.context.contextManager.filterUser\"))(\"matMenuTriggerFor\", _r5);\n} }\nfunction ContextListComponent_ng_container_8_button_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 27);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const user_r17 = ɵngcc0.ɵɵnextContext().$implicit;\n    const _r20 = ɵngcc0.ɵɵreference(6);\n    ɵngcc0.ɵɵproperty(\"matMenuTriggerFor\", _r20);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", user_r17.title, \" \");\n} }\nfunction ContextListComponent_ng_container_8_button_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 9);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const user_r17 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", user_r17.title, \" \");\n} }\nfunction ContextListComponent_ng_container_8_mat_checkbox_7_Template(rf, ctx) { if (rf & 1) {\n    const _r26 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-checkbox\", 8);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextListComponent_ng_container_8_mat_checkbox_7_Template_mat_checkbox_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r26); return $event.stopPropagation(); })(\"change\", function ContextListComponent_ng_container_8_mat_checkbox_7_Template_mat_checkbox_change_0_listener() { ɵngcc0.ɵɵrestoreView(_r26); const child_r24 = ctx.$implicit; const user_r17 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.userSelection(child_r24, user_r17); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const child_r24 = ctx.$implicit;\n    const ctx_r21 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r21.getPermission(child_r24).checked);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", child_r24.title, \" \");\n} }\nfunction ContextListComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {\n    const _r30 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"span\", 7);\n    ɵngcc0.ɵɵelementStart(2, \"mat-checkbox\", 22);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextListComponent_ng_container_8_Template_mat_checkbox_click_2_listener($event) { ɵngcc0.ɵɵrestoreView(_r30); return $event.stopPropagation(); })(\"change\", function ContextListComponent_ng_container_8_Template_mat_checkbox_change_2_listener() { ɵngcc0.ɵɵrestoreView(_r30); const user_r17 = ctx.$implicit; const ctx_r31 = ɵngcc0.ɵɵnextContext(); return ctx_r31.userSelection(user_r17); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(3, ContextListComponent_ng_container_8_button_3_Template, 2, 2, \"button\", 23);\n    ɵngcc0.ɵɵtemplate(4, ContextListComponent_ng_container_8_button_4_Template, 2, 1, \"button\", 24);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"mat-menu\", null, 25);\n    ɵngcc0.ɵɵtemplate(7, ContextListComponent_ng_container_8_mat_checkbox_7_Template, 2, 2, \"mat-checkbox\", 26);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const user_r17 = ctx.$implicit;\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r6.getPermission(user_r17).checked)(\"indeterminate\", ctx_r6.getPermission(user_r17).indeterminate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", user_r17.childs);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !user_r17.childs);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", user_r17.childs);\n} }\nfunction ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    const _r38 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-context-item\", 31);\n    ɵngcc0.ɵɵlistener(\"edit\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_edit_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r37 = ɵngcc0.ɵɵnextContext(3); return ctx_r37.edit.emit(context_r36); })(\"delete\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_delete_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r39 = ɵngcc0.ɵɵnextContext(3); return ctx_r39.delete.emit(context_r36); })(\"clone\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_clone_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r40 = ɵngcc0.ɵɵnextContext(3); return ctx_r40.clone.emit(context_r36); })(\"save\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_save_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r41 = ɵngcc0.ɵɵnextContext(3); return ctx_r41.save.emit(context_r36); })(\"hide\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_hide_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r42 = ɵngcc0.ɵɵnextContext(3); return ctx_r42.hideContext(context_r36); })(\"show\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_show_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r43 = ɵngcc0.ɵɵnextContext(3); return ctx_r43.showContext(context_r36); })(\"favorite\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_favorite_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r44 = ɵngcc0.ɵɵnextContext(3); return ctx_r44.favorite.emit(context_r36); })(\"manageTools\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_manageTools_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r45 = ɵngcc0.ɵɵnextContext(3); return ctx_r45.manageTools.emit(context_r36); })(\"managePermissions\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_managePermissions_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r46 = ɵngcc0.ɵɵnextContext(3); return ctx_r46.managePermissions.emit(context_r36); })(\"select\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_select_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r47 = ɵngcc0.ɵɵnextContext(3); return ctx_r47.select.emit(context_r36); })(\"unselect\", function ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template_igo_context_item_unselect_0_listener() { ɵngcc0.ɵɵrestoreView(_r38); const context_r36 = ctx.$implicit; const ctx_r48 = ɵngcc0.ɵɵnextContext(3); return ctx_r48.unselect.emit(context_r36); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const context_r36 = ctx.$implicit;\n    const ctx_r35 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"selected\", ctx_r35.selectedContext && ctx_r35.selectedContext.uri === context_r36.uri)(\"context\", context_r36)(\"default\", context_r36.id && ctx_r35.defaultContextId && ctx_r35.defaultContextId === context_r36.id);\n} }\nfunction ContextListComponent_ng_template_14_igo_collapsible_0_Template(rf, ctx) { if (rf & 1) {\n    const _r50 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-collapsible\", 30);\n    ɵngcc0.ɵɵlistener(\"toggle\", function ContextListComponent_ng_template_14_igo_collapsible_0_Template_igo_collapsible_toggle_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r50); const groupContexts_r32 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r49 = ɵngcc0.ɵɵnextContext(); return (ctx_r49.collapsed[ctx_r49.titleMapping[groupContexts_r32.key]] = $event); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtemplate(2, ContextListComponent_ng_template_14_igo_collapsible_0_ng_template_2_Template, 1, 3, \"ng-template\", 10);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const groupContexts_r32 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r33 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(1, 3, ctx_r33.titleMapping[groupContexts_r32.key]))(\"collapsed\", ctx_r33.collapsed[ctx_r33.titleMapping[groupContexts_r32.key]]);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", groupContexts_r32.value);\n} }\nfunction ContextListComponent_ng_template_14_1_ng_template_0_Template(rf, ctx) { if (rf & 1) {\n    const _r56 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-context-item\", 32);\n    ɵngcc0.ɵɵlistener(\"select\", function ContextListComponent_ng_template_14_1_ng_template_0_Template_igo_context_item_select_0_listener() { ɵngcc0.ɵɵrestoreView(_r56); const context_r54 = ctx.$implicit; const ctx_r55 = ɵngcc0.ɵɵnextContext(3); return ctx_r55.select.emit(context_r54); })(\"unselect\", function ContextListComponent_ng_template_14_1_ng_template_0_Template_igo_context_item_unselect_0_listener() { ɵngcc0.ɵɵrestoreView(_r56); const context_r54 = ctx.$implicit; const ctx_r57 = ɵngcc0.ɵɵnextContext(3); return ctx_r57.unselect.emit(context_r54); });\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const context_r54 = ctx.$implicit;\n    const ctx_r53 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵproperty(\"selected\", ctx_r53.selectedContext && ctx_r53.selectedContext.uri === context_r54.uri)(\"context\", context_r54)(\"default\", ctx_r53.defaultContextId === context_r54.id);\n} }\nfunction ContextListComponent_ng_template_14_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ContextListComponent_ng_template_14_1_ng_template_0_Template, 1, 3, \"ng-template\", 10);\n} if (rf & 2) {\n    const groupContexts_r32 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"ngForOf\", groupContexts_r32.value);\n} }\nfunction ContextListComponent_ng_template_14_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ContextListComponent_ng_template_14_igo_collapsible_0_Template, 3, 5, \"igo-collapsible\", 28);\n    ɵngcc0.ɵɵtemplate(1, ContextListComponent_ng_template_14_1_Template, 1, 1, undefined, 29);\n} if (rf & 2) {\n    const groupContexts_r32 = ctx.$implicit;\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", groupContexts_r32.value.length && ctx_r7.auth.authenticated);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", groupContexts_r32.value.length && !ctx_r7.auth.authenticated);\n} }\nfunction ContextItemComponent_button_1_mat_icon_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"mat-icon\", 7);\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵpropertyInterpolate(\"svgIcon\", ctx_r2.context.icon ? ctx_r2.context.icon : ctx_r2.context.scope === \"public\" ? \"earth\" : \"star\");\n} }\nfunction ContextItemComponent_button_1_img_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 8);\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"src\", ctx_r3.context.iconImage, ɵngcc0.ɵɵsanitizeUrl);\n} }\nfunction ContextItemComponent_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextItemComponent_button_1_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.favoriteClick(ctx_r4.context); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtemplate(2, ContextItemComponent_button_1_mat_icon_2_Template, 1, 1, \"mat-icon\", 5);\n    ɵngcc0.ɵɵtemplate(3, ContextItemComponent_button_1_img_3_Template, 1, 1, \"img\", 6);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ctx_r0.auth.authenticated ? ɵngcc0.ɵɵpipeBind1(1, 4, \"igo.context.contextManager.favorite\") : \"\")(\"color\", ctx_r0.default ? \"primary\" : \"default\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.context.iconImage);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.context.iconImage);\n} }\nfunction ContextItemComponent_div_4_button_1_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 17);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_1_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(2); return ctx_r14.save.emit(ctx_r14.context); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 18);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.context.contextManager.save\"))(\"color\", ctx_r6.color);\n} }\nfunction ContextItemComponent_div_4_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 17);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(2); return ctx_r16.managePermissions.emit(ctx_r16.context); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 19);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.context.contextManager.managePermissions\"))(\"color\", ctx_r8.color);\n} }\nfunction ContextItemComponent_div_4_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r19 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 17);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_5_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r19); const ctx_r18 = ɵngcc0.ɵɵnextContext(2); return ctx_r18.clone.emit(ctx_r18.context); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 20);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r9 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.context.contextManager.clone\"))(\"color\", ctx_r9.color);\n} }\nfunction ContextItemComponent_div_4_button_6_Template(rf, ctx) { if (rf & 1) {\n    const _r21 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 21);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_6_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r21); const ctx_r20 = ɵngcc0.ɵɵnextContext(2); return ctx_r20.edit.emit(ctx_r20.context); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r10.color)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.context.contextManager.edit\"));\n} }\nfunction ContextItemComponent_div_4_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 21);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r23); const ctx_r22 = ɵngcc0.ɵɵnextContext(2); return ctx_r22.hide.emit(ctx_r22.context); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 23);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r11 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r11.color)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.context.contextManager.hide\"));\n} }\nfunction ContextItemComponent_div_4_button_8_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 21);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_8_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r25); const ctx_r24 = ɵngcc0.ɵɵnextContext(2); return ctx_r24.show.emit(ctx_r24.context); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 24);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r12.color)(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.context.contextManager.show\"));\n} }\nfunction ContextItemComponent_div_4_button_9_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 25);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextItemComponent_div_4_button_9_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r27); const ctx_r26 = ɵngcc0.ɵɵnextContext(2); return ctx_r26.delete.emit(ctx_r26.context); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 26);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.context.contextManager.delete\"));\n} }\nfunction ContextItemComponent_div_4_Template(rf, ctx) { if (rf & 1) {\n    const _r29 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 9);\n    ɵngcc0.ɵɵtemplate(1, ContextItemComponent_div_4_button_1_Template, 3, 4, \"button\", 10);\n    ɵngcc0.ɵɵelementStart(2, \"div\", 11, 12);\n    ɵngcc0.ɵɵtemplate(4, ContextItemComponent_div_4_button_4_Template, 3, 4, \"button\", 10);\n    ɵngcc0.ɵɵtemplate(5, ContextItemComponent_div_4_button_5_Template, 3, 4, \"button\", 10);\n    ɵngcc0.ɵɵtemplate(6, ContextItemComponent_div_4_button_6_Template, 3, 4, \"button\", 13);\n    ɵngcc0.ɵɵtemplate(7, ContextItemComponent_div_4_button_7_Template, 3, 4, \"button\", 13);\n    ɵngcc0.ɵɵtemplate(8, ContextItemComponent_div_4_button_8_Template, 3, 4, \"button\", 13);\n    ɵngcc0.ɵɵtemplate(9, ContextItemComponent_div_4_button_9_Template, 3, 3, \"button\", 14);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextItemComponent_div_4_Template_button_click_10_listener() { ɵngcc0.ɵɵrestoreView(_r29); const ctx_r28 = ɵngcc0.ɵɵnextContext(); return ctx_r28.collapsed = !ctx_r28.collapsed; });\n    ɵngcc0.ɵɵelement(11, \"mat-icon\", 16);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r7 = ɵngcc0.ɵɵreference(3);\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.collapsed && ctx_r1.selected && (ctx_r1.context.permission === ctx_r1.typePermission[ctx_r1.typePermission.write] || ctx_r1.context.imported));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.canShare && !ctx_r1.context.imported);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r1.context.imported);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.context.permission === ctx_r1.typePermission[ctx_r1.typePermission.write] && !ctx_r1.context.imported);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r1.context.hidden && !ctx_r1.context.imported);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.context.hidden && !ctx_r1.context.imported);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.context.permission === ctx_r1.typePermission[ctx_r1.typePermission.write] || ctx_r1.context.imported);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r1.color)(\"target\", _r7)(\"collapsed\", ctx_r1.collapsed);\n} }\nconst _c1 = function (a0) { return { \"mat-list-item-light\": a0 }; };\nfunction ContextFormComponent_span_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 11);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ctx_r0.prefix, \"-\");\n} }\nfunction ContextEditComponent_igo_context_form_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-context-form\", 1);\n    ɵngcc0.ɵɵlistener(\"submitForm\", function ContextEditComponent_igo_context_form_0_Template_igo_context_form_submitForm_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.submitForm.emit($event); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"btnSubmitText\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.context.contextManager.save\"))(\"context\", ctx_r0.context);\n} }\nfunction ContextPermissionsComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"h4\");\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"p\");\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(3, 2, \"igo.context.permission.readOnlyTitle\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(6, 4, \"igo.context.permission.readOnlyMsg\"));\n} }\nfunction ContextPermissionsComponent_div_0_div_2_mat_radio_button_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-radio-button\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.context.permission.scope.public\"), \" \");\n} }\nfunction ContextPermissionsComponent_div_0_div_2_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(1, \"mat-radio-group\", 4);\n    ɵngcc0.ɵɵlistener(\"ngModelChange\", function ContextPermissionsComponent_div_0_div_2_Template_mat_radio_group_ngModelChange_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r7); const ctx_r6 = ɵngcc0.ɵɵnextContext(2); return ctx_r6.context.scope = $event; })(\"change\", function ContextPermissionsComponent_div_0_div_2_Template_mat_radio_group_change_1_listener() { ɵngcc0.ɵɵrestoreView(_r7); const ctx_r8 = ɵngcc0.ɵɵnextContext(2); return ctx_r8.scopeChanged.emit(ctx_r8.context); });\n    ɵngcc0.ɵɵelementStart(2, \"mat-radio-button\", 5);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"mat-radio-button\", 6);\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵpipe(7, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(8, ContextPermissionsComponent_div_0_div_2_mat_radio_button_8_Template, 3, 3, \"mat-radio-button\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngModel\", ctx_r2.context.scope);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 4, \"igo.context.permission.scope.private\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(7, 6, \"igo.context.permission.scope.shared\"), \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.authService.isAdmin);\n} }\nfunction ContextPermissionsComponent_div_0_form_3_mat_option_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 20);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelement(2, \"br\");\n    ɵngcc0.ɵɵelementStart(3, \"small\", 21);\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const profil_r11 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", profil_r11);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", profil_r11.title, \"\");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(profil_r11.name);\n} }\nfunction ContextPermissionsComponent_div_0_form_3_Template(rf, ctx) { if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"form\", 9);\n    ɵngcc0.ɵɵlistener(\"ngSubmit\", function ContextPermissionsComponent_div_0_form_3_Template_form_ngSubmit_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.handleFormSubmit(ctx_r12.form.value); });\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\", 10);\n    ɵngcc0.ɵɵelement(2, \"input\", 11);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementStart(4, \"mat-autocomplete\", 12, 13);\n    ɵngcc0.ɵɵlistener(\"optionSelected\", function ContextPermissionsComponent_div_0_form_3_Template_mat_autocomplete_optionSelected_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r14 = ɵngcc0.ɵɵnextContext(2); return ctx_r14.onProfilSelected($event.option.value); });\n    ɵngcc0.ɵɵtemplate(6, ContextPermissionsComponent_div_0_form_3_mat_option_6_Template, 5, 3, \"mat-option\", 14);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"mat-error\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"mat-radio-group\", 15);\n    ɵngcc0.ɵɵelementStart(11, \"mat-radio-button\", 16);\n    ɵngcc0.ɵɵtext(12);\n    ɵngcc0.ɵɵpipe(13, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(14, \"mat-radio-button\", 17);\n    ɵngcc0.ɵɵtext(15);\n    ɵngcc0.ɵɵpipe(16, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(17, \"div\", 18);\n    ɵngcc0.ɵɵelementStart(18, \"button\", 19);\n    ɵngcc0.ɵɵtext(19);\n    ɵngcc0.ɵɵpipe(20, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const _r9 = ɵngcc0.ɵɵreference(5);\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"formGroup\", ctx_r3.form);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(3, 11, \"igo.context.permission.user\"))(\"formControl\", ctx_r3.formControl)(\"matAutocomplete\", _r9);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"displayWith\", ctx_r3.displayFn);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r3.profils);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(9, 13, \"igo.context.permission.profilRequired\"), \" \");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 15, \"igo.context.permission.read\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(16, 17, \"igo.context.permission.write\"), \" \");\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r3.form.valid);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(20, 19, \"igo.context.permission.addBtn\"), \" \");\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_button_7_Template(rf, ctx) { if (rf & 1) {\n    const _r23 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 29);\n    ɵngcc0.ɵɵlistener(\"click\", function ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_button_7_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r23); const permission_r19 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r21 = ɵngcc0.ɵɵnextContext(5); return ctx_r21.removePermission.emit(permission_r19); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 30);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.context.permission.delete\"));\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 25);\n    ɵngcc0.ɵɵelementStart(2, \"h4\", 26);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementStart(4, \"small\", 21);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"div\", 27);\n    ɵngcc0.ɵɵtemplate(7, ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_button_7_Template, 3, 3, \"button\", 28);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const permission_r19 = ctx.$implicit;\n    const ctx_r18 = ɵngcc0.ɵɵnextContext(5);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", permission_r19.profilTitle, \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(permission_r19.profil);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r18.canWrite || permission_r19.profil === ctx_r18.authService.decodeToken().user.sourceId);\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"igo-collapsible\", 24);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵtemplate(2, ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_ng_template_2_Template, 8, 3, \"ng-template\", 22);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const groupPermissions_r16 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"title\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.context.permission.\" + groupPermissions_r16.key));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", groupPermissions_r16.value);\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_igo_collapsible_0_Template, 3, 4, \"igo-collapsible\", 23);\n} if (rf & 2) {\n    const groupPermissions_r16 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"ngIf\", groupPermissions_r16.value.length);\n} }\nfunction ContextPermissionsComponent_div_0_igo_list_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"igo-list\");\n    ɵngcc0.ɵɵtemplate(1, ContextPermissionsComponent_div_0_igo_list_4_ng_template_1_Template, 1, 1, \"ng-template\", 22);\n    ɵngcc0.ɵɵpipe(2, \"keyvalue\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r4.permissions));\n} }\nfunction ContextPermissionsComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtemplate(1, ContextPermissionsComponent_div_0_div_1_Template, 7, 6, \"div\", 1);\n    ɵngcc0.ɵɵtemplate(2, ContextPermissionsComponent_div_0_div_2_Template, 9, 8, \"div\", 1);\n    ɵngcc0.ɵɵtemplate(3, ContextPermissionsComponent_div_0_form_3_Template, 21, 21, \"form\", 2);\n    ɵngcc0.ɵɵtemplate(4, ContextPermissionsComponent_div_0_igo_list_4_Template, 3, 3, \"igo-list\", 0);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.canWrite);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.canWrite);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.context.scope !== \"private\" && ctx_r0.canWrite);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.permissions && ctx_r0.context.scope !== \"private\");\n} }\nfunction PoiButtonComponent_mat_option_8_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-option\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function PoiButtonComponent_mat_option_8_Template_mat_option_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r3); const poi_r1 = ctx.$implicit; const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.zoomOnPoi(poi_r1.id); });\n    ɵngcc0.ɵɵelementStart(1, \"div\", 2);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"button\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function PoiButtonComponent_mat_option_8_Template_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r3); const poi_r1 = ctx.$implicit; const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.deletePoi(poi_r1); });\n    ɵngcc0.ɵɵelement(4, \"mat-icon\", 8);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const poi_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"value\", poi_r1.id);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(poi_r1.title);\n} }\nfunction UserButtonComponent_div_0_igo_poi_button_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-poi-button\", 9);\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r1.color)(\"map\", ctx_r1.map);\n} }\nfunction UserButtonComponent_div_0_igo_bookmark_button_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-bookmark-button\", 9);\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r2.color)(\"map\", ctx_r2.map);\n} }\nfunction UserButtonComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 2);\n    ɵngcc0.ɵɵtemplate(2, UserButtonComponent_div_0_igo_poi_button_2_Template, 1, 2, \"igo-poi-button\", 3);\n    ɵngcc0.ɵɵtemplate(3, UserButtonComponent_div_0_igo_bookmark_button_3_Template, 1, 2, \"igo-bookmark-button\", 3);\n    ɵngcc0.ɵɵelementStart(4, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function UserButtonComponent_div_0_Template_button_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.infoUser(); });\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelement(6, \"mat-icon\", 5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"button\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function UserButtonComponent_div_0_Template_button_click_7_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.logout(); });\n    ɵngcc0.ɵɵpipe(8, \"translate\");\n    ɵngcc0.ɵɵelement(9, \"mat-icon\", 6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"button\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function UserButtonComponent_div_0_Template_button_click_10_listener() { ɵngcc0.ɵɵrestoreView(_r4); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.accountClick(); });\n    ɵngcc0.ɵɵelement(11, \"mat-icon\", 8);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"@userButtonState\", ctx_r0.expand ? \"expand\" : \"collapse\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.hasApi);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.hasApi);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(5, 8, \"igo.context.userButton.infoTitle\"))(\"color\", ctx_r0.color);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(8, 10, \"igo.context.userButton.logout\"))(\"color\", ctx_r0.color);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"color\", ctx_r0.auth.authenticated ? ctx_r0.color : \"warn\");\n} }\nfunction ShareMapComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 5);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n    ɵngcc0.ɵɵelement(2, \"input\", 6);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementStart(4, \"mat-error\");\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(3, 2, \"igo.context.contextManager.form.title\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 4, \"igo.context.contextManager.form.titleRequired\"), \" \");\n} }\nfunction ShareMapComponent_div_2_span_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 11);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ctx_r4.userId, \"-\");\n} }\nfunction ShareMapComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n    ɵngcc0.ɵɵtemplate(2, ShareMapComponent_div_2_span_2_Template, 2, 1, \"span\", 8);\n    ɵngcc0.ɵɵelementStart(3, \"span\", 9);\n    ɵngcc0.ɵɵelement(4, \"input\", 10);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"mat-error\");\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵpipe(8, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.userId);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"readonly\", !ctx_r1.userId)(\"placeholder\", ɵngcc0.ɵɵpipeBind1(5, 4, \"igo.context.contextManager.form.uri\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(8, 6, \"igo.context.contextManager.form.uriRequired\"), \" \");\n} }\nfunction ShareMapComponent_div_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 13);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"disabled\", !ctx_r2.form.valid);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 2, \"igo.context.shareMap.button\"), \" \");\n} }\nfunction ShareMapComponent_div_4_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 19);\n    ɵngcc0.ɵɵlistener(\"click\", function ShareMapComponent_div_4_button_5_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r10); ɵngcc0.ɵɵnextContext(); const _r5 = ɵngcc0.ɵɵreference(3); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.copyTextToClipboard(_r5); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 20);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.context.shareMap.copy\"));\n} }\nfunction ShareMapComponent_div_4_div_6_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 21);\n    ɵngcc0.ɵɵlistener(\"click\", function ShareMapComponent_div_4_div_6_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r12); ɵngcc0.ɵɵnextContext(); const _r5 = ɵngcc0.ɵɵreference(3); const ctx_r11 = ɵngcc0.ɵɵnextContext(); return ctx_r11.copyTextToClipboard(_r5); });\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 20);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 1, \"igo.context.shareMap.copy\"), \" \");\n} }\nfunction ShareMapComponent_div_4_div_7_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelement(1, \"br\");\n    ɵngcc0.ɵɵelementStart(2, \"section\", 22);\n    ɵngcc0.ɵɵelementStart(3, \"h4\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"ul\");\n    ɵngcc0.ɵɵelementStart(7, \"li\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(10, \"li\");\n    ɵngcc0.ɵɵtext(11);\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(13, \"li\");\n    ɵngcc0.ɵɵtext(14);\n    ɵngcc0.ɵɵpipe(15, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(16, \"li\");\n    ɵngcc0.ɵɵtext(17);\n    ɵngcc0.ɵɵpipe(18, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(19, \"li\");\n    ɵngcc0.ɵɵtext(20);\n    ɵngcc0.ɵɵpipe(21, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(22, \"h4\");\n    ɵngcc0.ɵɵtext(23);\n    ɵngcc0.ɵɵpipe(24, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(25, \"ul\");\n    ɵngcc0.ɵɵelementStart(26, \"li\");\n    ɵngcc0.ɵɵtext(27);\n    ɵngcc0.ɵɵpipe(28, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(29, \"li\");\n    ɵngcc0.ɵɵtext(30);\n    ɵngcc0.ɵɵpipe(31, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(32, \"li\");\n    ɵngcc0.ɵɵtext(33);\n    ɵngcc0.ɵɵpipe(34, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(35, \"li\");\n    ɵngcc0.ɵɵtext(36);\n    ɵngcc0.ɵɵpipe(37, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 11, \"igo.context.shareMap.included\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 13, \"igo.context.shareMap.context\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(12, 15, \"igo.context.shareMap.center\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(15, 17, \"igo.context.shareMap.zoom\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(18, 19, \"igo.context.shareMap.addedLayers\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(21, 21, \"igo.context.shareMap.visibleInvisible\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(24, 23, \"igo.context.shareMap.excluded\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(28, 25, \"igo.context.shareMap.order\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(31, 27, \"igo.context.shareMap.opacity\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(34, 29, \"igo.context.shareMap.filterOgc\"));\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(37, 31, \"igo.context.shareMap.filterTime\"));\n} }\nconst _c2 = function (a0) { return { \"textAreaWithButton\": a0 }; };\nfunction ShareMapComponent_div_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 14);\n    ɵngcc0.ɵɵelementStart(1, \"mat-form-field\");\n    ɵngcc0.ɵɵelement(2, \"textarea\", 15, 16);\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵtemplate(5, ShareMapComponent_div_4_button_5_Template, 3, 3, \"button\", 17);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(6, ShareMapComponent_div_4_div_6_Template, 5, 3, \"div\", 3);\n    ɵngcc0.ɵɵtemplate(7, ShareMapComponent_div_4_div_7_Template, 38, 33, \"div\", 18);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(8, _c2, ctx_r3.hasApi))(\"placeholder\", ɵngcc0.ɵɵpipeBind1(4, 6, \"igo.context.shareMap.placeholderLink\"))(\"value\", ctx_r3.url);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.hasApi);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r3.hasApi);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r3.hasApi);\n} }\nfunction SidenavComponent_button_8_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 11);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 12);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.context.sidenav.goBack\"));\n} }\nfunction SidenavComponent_button_9_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"button\", 13);\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 14);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 1, \"igo.context.sidenav.mainMenu\"));\n} }\nfunction SidenavComponent_igo_panel_11_button_3_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 19);\n    ɵngcc0.ɵɵlistener(\"click\", function SidenavComponent_igo_panel_11_button_3_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.zoomToFeatureExtent(); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 20);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction SidenavComponent_igo_panel_11_igo_feature_details_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-feature-details\", 21);\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"feature\", ctx_r6.feature);\n} }\nconst _c3 = function () { return [\"collapsed\", \"initial\"]; };\nfunction SidenavComponent_igo_panel_11_Template(rf, ctx) { if (rf & 1) {\n    const _r10 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-panel\", 6);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 15);\n    ɵngcc0.ɵɵlistener(\"click\", function SidenavComponent_igo_panel_11_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r10); const ctx_r9 = ɵngcc0.ɵɵnextContext(); return ctx_r9.toggleTopPanel(); });\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 16);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(3, SidenavComponent_igo_panel_11_button_3_Template, 2, 0, \"button\", 17);\n    ɵngcc0.ɵɵtemplate(4, SidenavComponent_igo_panel_11_igo_feature_details_4_Template, 1, 1, \"igo-feature-details\", 18);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    const _r1 = ɵngcc0.ɵɵreference(4);\n    ɵngcc0.ɵɵproperty(\"title\", ctx_r4.featureTitle);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"svgIcon\", ɵngcc0.ɵɵpureFunction0(4, _c3).indexOf(_r1.state) >= 0 ? \"arrow_downward\" : \"arrow_upward\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.feature.geometry);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpureFunction0(5, _c3).indexOf(_r1.state) >= 0);\n} }\nclass ExportError extends Error {\n}\nclass ExportInvalidFileError extends ExportError {\n    constructor() {\n        super('Invalid context');\n        Object.setPrototypeOf(this, ExportInvalidFileError.prototype);\n    }\n}\nclass ExportNothingToExportError extends ExportError {\n    constructor() {\n        super('Nothing to export');\n        Object.setPrototypeOf(this, ExportNothingToExportError.prototype);\n    }\n}\n\nfunction handleFileExportError(error, messageService, languageService) {\n    if (error instanceof ExportNothingToExportError) {\n        this.handleNothingToExportError(messageService, languageService);\n        return;\n    }\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.export.failed.title');\n    const message = translate.instant('igo.context.contextImportExport.export.failed.text');\n    messageService.error(message, title);\n}\nfunction handleFileExportSuccess(messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.export.success.title');\n    const message = translate.instant('igo.context.contextImportExport.export.success.text');\n    messageService.success(message, title);\n}\nfunction handleNothingToExportError(messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.export.nothing.title');\n    const message = translate.instant('igo.context.contextImportExport.export.nothing.text');\n    messageService.error(message, title);\n}\n\nfunction handleFileImportSuccess(file, context, messageService, languageService, contextService) {\n    if (Object.keys(context).length <= 0) {\n        handleNothingToImportError(file, messageService, languageService);\n        return;\n    }\n    const contextTitle = computeLayerTitleFromFile(file);\n    addContextToContextList(context, contextTitle, contextService);\n    const translate = languageService.translate;\n    const messageTitle = translate.instant('igo.context.contextImportExport.import.success.title');\n    const message = translate.instant('igo.context.contextImportExport.import.success.text', {\n        value: contextTitle\n    });\n    messageService.success(message, messageTitle);\n}\nfunction handleFileImportError(file, error, messageService, languageService, sizeMb) {\n    sizeMb = sizeMb ? sizeMb : 30;\n    const errMapping = {\n        'Invalid file': handleInvalidFileImportError,\n        'File is too large': handleSizeFileImportError,\n        'Failed to read file': handleUnreadbleFileImportError\n    };\n    errMapping[error.message](file, error, messageService, languageService, sizeMb);\n}\nfunction handleInvalidFileImportError(file, error, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.import.invalid.title');\n    const message = translate.instant('igo.context.contextImportExport.import.invalid.text', {\n        value: file.name,\n        mimeType: file.type\n    });\n    messageService.error(message, title);\n}\nfunction handleSizeFileImportError(file, error, messageService, languageService, sizeMb) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.import.tooLarge.title');\n    const message = translate.instant('igo.context.contextImportExport.import.tooLarge.text', {\n        value: file.name,\n        size: sizeMb\n    });\n    messageService.error(message, title);\n}\nfunction handleUnreadbleFileImportError(file, error, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.import.unreadable.title');\n    const message = translate.instant('igo.context.contextImportExport.import.unreadable.text', {\n        value: file.name\n    });\n    messageService.error(message, title);\n}\nfunction handleNothingToImportError(file, messageService, languageService) {\n    const translate = languageService.translate;\n    const title = translate.instant('igo.context.contextImportExport.import.empty.title');\n    const message = translate.instant('igo.context.contextImportExport.import.empty.text', {\n        value: file.name\n    });\n    messageService.error(message, title);\n}\nfunction addContextToContextList(context, contextTitle, contextService) {\n    context.title = contextTitle;\n    context.imported = true;\n    contextService.contexts$.value.ours.unshift(context);\n    contextService.contexts$.next(contextService.contexts$.value);\n    contextService.importedContext.unshift(context);\n    contextService.loadContext(context.uri);\n}\nfunction getFileExtension(file) {\n    return file.name.split('.').pop().toLowerCase();\n}\nfunction computeLayerTitleFromFile(file) {\n    return file.name.substr(0, file.name.lastIndexOf('.'));\n}\nfunction addImportedFeaturesToMap(olFeatures, map, layerTitle) {\n    const r = Math.floor(Math.random() * 255);\n    const g = Math.floor(Math.random() * 255);\n    const b = Math.floor(Math.random() * 255);\n    const stroke = new Stroke({\n        color: [r, g, b, 1],\n        width: 2\n    });\n    const fill = new Fill({\n        color: [r, g, b, 0.4]\n    });\n    const sourceOptions = {\n        type: 'vector',\n        queryable: true\n    };\n    const source = new FeatureDataSource(sourceOptions);\n    source.ol.addFeatures(olFeatures);\n    const layer = new VectorLayer({\n        title: layerTitle,\n        source,\n        style: new Style({\n            stroke,\n            fill,\n            image: new Circle({\n                radius: 5,\n                stroke,\n                fill\n            })\n        })\n    });\n    map.addLayer(layer);\n    return layer;\n}\nfunction addImportedFeaturesStyledToMap(olFeatures, map, layerTitle, styleListService, styleService) {\n    let style;\n    let distance;\n    if (styleListService.getStyleList(layerTitle.toString() + '.styleByAttribute')) {\n        const styleByAttribute = styleListService.getStyleList(layerTitle.toString() + '.styleByAttribute');\n        style = (feature) => {\n            return styleService.createStyleByAttribute(feature, styleByAttribute);\n        };\n    }\n    else if (styleListService.getStyleList(layerTitle.toString() + '.clusterStyle')) {\n        const clusterParam = styleListService.getStyleList(layerTitle.toString() + '.clusterParam');\n        distance = styleListService.getStyleList(layerTitle.toString() + '.distance');\n        const baseStyle = styleService.createStyle(styleListService.getStyleList(layerTitle.toString() + '.clusterStyle'));\n        style = (feature) => {\n            return styleService.createClusterStyle(feature, clusterParam, baseStyle);\n        };\n    }\n    else if (styleListService.getStyleList(layerTitle.toString() + '.style')) {\n        style = styleService.createStyle(styleListService.getStyleList(layerTitle.toString() + '.style'));\n    }\n    else {\n        style = styleService.createStyle(styleListService.getStyleList('default.style'));\n    }\n    let source;\n    if (styleListService.getStyleList(layerTitle.toString() + '.clusterStyle')) {\n        const sourceOptions = {\n            distance,\n            type: 'cluster',\n            queryable: true\n        };\n        source = new ClusterDataSource(sourceOptions);\n        source.ol.source.addFeatures(olFeatures);\n    }\n    else {\n        const sourceOptions = {\n            type: 'vector',\n            queryable: true\n        };\n        source = new FeatureDataSource(sourceOptions);\n        source.ol.addFeatures(olFeatures);\n    }\n    const layer = new VectorLayer({\n        title: layerTitle,\n        source,\n        style\n    });\n    map.addLayer(layer);\n    return layer;\n}\n\nvar TypePermission;\n(function (TypePermission) {\n    TypePermission[TypePermission[\"null\"] = 0] = \"null\";\n    TypePermission[TypePermission[\"read\"] = 1] = \"read\";\n    TypePermission[TypePermission[\"write\"] = 2] = \"write\";\n})(TypePermission || (TypePermission = {}));\nvar Scope;\n(function (Scope) {\n    Scope[Scope[\"public\"] = 0] = \"public\";\n    Scope[Scope[\"protected\"] = 1] = \"protected\";\n    Scope[Scope[\"private\"] = 2] = \"private\";\n})(Scope || (Scope = {}));\n\nclass ContextService {\n    constructor(http, authService, languageService, config, messageService, route) {\n        this.http = http;\n        this.authService = authService;\n        this.languageService = languageService;\n        this.config = config;\n        this.messageService = messageService;\n        this.route = route;\n        this.context$ = new BehaviorSubject(undefined);\n        this.contexts$ = new BehaviorSubject({ ours: [] });\n        this.defaultContextId$ = new BehaviorSubject(undefined);\n        this.editedContext$ = new BehaviorSubject(undefined);\n        this.importedContext = [];\n        this.mapViewFromRoute = {};\n        this.options = Object.assign({\n            basePath: 'contexts',\n            contextListFile: '_contexts.json',\n            defaultContextUri: '_default'\n        }, this.config.getConfig('context'));\n        this.baseUrl = this.options.url;\n        this.readParamsFromRoute();\n        this.authService.authenticate$.subscribe((authenticated) => {\n            if (authenticated && this.baseUrl) {\n                this.get().subscribe((contexts) => {\n                    this.handleContextsChange(contexts);\n                });\n            }\n            else {\n                this.contexts$.pipe(first()).subscribe((contexts) => {\n                    this.handleContextsChange(contexts);\n                });\n                this.loadContexts();\n            }\n        });\n    }\n    get defaultContextUri() {\n        return this._defaultContextUri || this.options.defaultContextUri;\n    }\n    set defaultContextUri(uri) {\n        this._defaultContextUri = uri;\n    }\n    get(permissions, hidden) {\n        let url = this.baseUrl + '/contexts';\n        if (permissions && this.authService.authenticated) {\n            url += '?permission=' + permissions.join();\n            if (hidden) {\n                url += '&hidden=true';\n            }\n        }\n        return this.http.get(url);\n    }\n    getById(id) {\n        const url = this.baseUrl + '/contexts/' + id;\n        return this.http.get(url);\n    }\n    getDetails(id) {\n        const url = `${this.baseUrl}/contexts/${id}/details`;\n        return this.http.get(url).pipe(catchError((res) => {\n            return this.handleError(res, id);\n        }));\n    }\n    getDefault() {\n        const url = this.baseUrl + '/contexts/default';\n        return this.http.get(url).pipe(tap((context) => {\n            this.defaultContextId$.next(context.id);\n        }));\n    }\n    getProfilByUser() {\n        if (this.baseUrl) {\n            const url = this.baseUrl + '/profils?';\n            return this.http.get(url);\n        }\n        return of([]);\n    }\n    setDefault(id) {\n        const url = this.baseUrl + '/contexts/default';\n        return this.http.post(url, { defaultContextId: id });\n    }\n    hideContext(id) {\n        const url = this.baseUrl + '/contexts/' + id + '/hide';\n        return this.http.post(url, {});\n    }\n    showContext(id) {\n        const url = this.baseUrl + '/contexts/' + id + '/show';\n        return this.http.post(url, {});\n    }\n    delete(id, imported = false) {\n        const contexts = { ours: [] };\n        Object.keys(this.contexts$.value).forEach((key) => (contexts[key] = this.contexts$.value[key].filter((c) => c.id !== id)));\n        if (imported) {\n            this.importedContext = this.importedContext.filter((c) => c.id !== id);\n            return of(this.contexts$.next(contexts));\n        }\n        const url = this.baseUrl + '/contexts/' + id;\n        return this.http.delete(url).pipe(tap((res) => {\n            this.contexts$.next(contexts);\n        }));\n    }\n    create(context) {\n        const url = this.baseUrl + '/contexts';\n        return this.http.post(url, JSON.stringify(context)).pipe(map((contextCreated) => {\n            if (this.authService.authenticated) {\n                contextCreated.permission = TypePermission[TypePermission.write];\n            }\n            else {\n                contextCreated.permission = TypePermission[TypePermission.read];\n            }\n            this.contexts$.value.ours.unshift(contextCreated);\n            this.contexts$.next(this.contexts$.value);\n            return contextCreated;\n        }));\n    }\n    clone(id, properties = {}) {\n        const url = this.baseUrl + '/contexts/' + id + '/clone';\n        return this.http.post(url, JSON.stringify(properties)).pipe(map((contextCloned) => {\n            contextCloned.permission = TypePermission[TypePermission.write];\n            this.contexts$.value.ours.unshift(contextCloned);\n            this.contexts$.next(this.contexts$.value);\n            return contextCloned;\n        }));\n    }\n    update(id, context) {\n        const url = this.baseUrl + '/contexts/' + id;\n        return this.http.patch(url, JSON.stringify(context));\n    }\n    // =================================================================\n    addToolAssociation(contextId, toolId) {\n        const url = `${this.baseUrl}/contexts/${contextId}/tools`;\n        const association = {\n            toolId\n        };\n        return this.http.post(url, JSON.stringify(association));\n    }\n    deleteToolAssociation(contextId, toolId) {\n        const url = `${this.baseUrl}/contexts/${contextId}/tools/${toolId}`;\n        return this.http.delete(url);\n    }\n    getPermissions(id) {\n        const url = this.baseUrl + '/contexts/' + id + '/permissions';\n        return this.http.get(url);\n    }\n    addPermissionAssociation(contextId, profil, type) {\n        const url = `${this.baseUrl}/contexts/${contextId}/permissions`;\n        const association = {\n            profil,\n            typePermission: type\n        };\n        return this.http\n            .post(url, JSON.stringify(association))\n            .pipe(catchError((res) => {\n            return [this.handleError(res, undefined, true)];\n        }));\n    }\n    deletePermissionAssociation(contextId, permissionId) {\n        const url = `${this.baseUrl}/contexts/${contextId}/permissions/${permissionId}`;\n        return this.http.delete(url);\n    }\n    // ======================================================================\n    getLocalContexts() {\n        const url = this.getPath(this.options.contextListFile);\n        return this.http.get(url).pipe(map((res) => {\n            return { ours: res };\n        }));\n    }\n    getLocalContext(uri) {\n        const url = this.getPath(`${uri}.json`);\n        return this.http.get(url).pipe(mergeMap((res) => {\n            if (!res.base) {\n                return of(res);\n            }\n            const urlBase = this.getPath(`${res.base}.json`);\n            return this.http.get(urlBase).pipe(map((resBase) => {\n                const resMerge = res;\n                resMerge.map = ObjectUtils.mergeDeep(resBase.map, res.map);\n                resMerge.layers = (resBase.layers || [])\n                    .concat(res.layers || [])\n                    .reverse()\n                    .filter((l, index, self) => !l.id || self.findIndex((l2) => l2.id === l.id) === index)\n                    .reverse();\n                resMerge.toolbar = res.toolbar || resBase.toolbar;\n                resMerge.message = res.message || resBase.message;\n                resMerge.tools = (res.tools || [])\n                    .concat(resBase.tools || [])\n                    .filter((t, index, self) => self.findIndex((t2) => t2.name === t.name) === index);\n                return resMerge;\n            }), catchError((err) => {\n                return this.handleError(err, uri);\n            }));\n        }), catchError((err2) => {\n            return this.handleError(err2, uri);\n        }));\n    }\n    loadContexts(permissions, hidden) {\n        let request;\n        if (this.baseUrl) {\n            request = this.get(permissions, hidden);\n        }\n        else {\n            request = this.getLocalContexts();\n        }\n        request.subscribe((contexts) => {\n            contexts.ours = this.importedContext.concat(contexts.ours);\n            this.contexts$.next(contexts);\n        });\n    }\n    loadDefaultContext() {\n        const loadFct = (direct = false) => {\n            if (!direct && this.baseUrl && this.authService.authenticated) {\n                this.getDefault().subscribe((_context) => {\n                    this.defaultContextUri = _context.uri;\n                    this.addContextToList(_context);\n                    this.setContext(_context);\n                }, () => {\n                    this.defaultContextId$.next(undefined);\n                    this.loadContext(this.defaultContextUri);\n                });\n            }\n            else {\n                this.loadContext(this.defaultContextUri);\n            }\n        };\n        if (this.route && this.route.options.contextKey) {\n            this.route.queryParams.pipe(debounceTime(100)).subscribe((params) => {\n                const contextParam = params[this.route.options.contextKey];\n                let direct = false;\n                if (contextParam) {\n                    this.defaultContextUri = contextParam;\n                    direct = true;\n                }\n                loadFct(direct);\n            });\n        }\n        else {\n            loadFct();\n        }\n    }\n    loadContext(uri) {\n        const context = this.context$.value;\n        if (context && context.uri === uri) {\n            return;\n        }\n        this.getContextByUri(uri)\n            .pipe(first())\n            .subscribe((_context) => {\n            this.addContextToList(_context);\n            this.setContext(_context);\n        }, (err) => {\n            if (uri !== this.options.defaultContextUri) {\n                this.loadContext(this.options.defaultContextUri);\n            }\n        });\n    }\n    setContext(context) {\n        this.handleContextMessage(context);\n        const currentContext = this.context$.value;\n        if (currentContext && context && context.id === currentContext.id) {\n            if (context.map.view.keepCurrentView === undefined) {\n                context.map.view.keepCurrentView = true;\n            }\n            this.context$.next(context);\n            return;\n        }\n        if (!context.map) {\n            context.map = { view: {} };\n        }\n        Object.assign(context.map.view, this.mapViewFromRoute);\n        this.context$.next(context);\n    }\n    loadEditedContext(uri) {\n        this.getContextByUri(uri).subscribe((_context) => {\n            this.setEditedContext(_context);\n        });\n    }\n    setEditedContext(context) {\n        this.editedContext$.next(context);\n    }\n    getContextFromMap(igoMap, empty) {\n        const view = igoMap.ol.getView();\n        const proj = view.getProjection().getCode();\n        const center = new olPoint(view.getCenter()).transform(proj, 'EPSG:4326');\n        const context = {\n            uri: uuid(),\n            title: '',\n            scope: 'private',\n            map: {\n                view: {\n                    center: center.getCoordinates(),\n                    zoom: view.getZoom(),\n                    projection: proj,\n                    maxZoomOnExtent: igoMap.viewController.maxZoomOnExtent\n                }\n            },\n            layers: [],\n            tools: []\n        };\n        let layers = [];\n        if (empty === true) {\n            layers = igoMap.layers$\n                .getValue()\n                .filter((lay) => lay.baseLayer === true ||\n                lay.options.id === 'searchPointerSummaryId')\n                .sort((a, b) => a.zIndex - b.zIndex);\n        }\n        else {\n            layers = igoMap.layers$.getValue().sort((a, b) => a.zIndex - b.zIndex);\n        }\n        let i = 0;\n        for (const l of layers) {\n            const layer = l;\n            const opts = {\n                id: layer.options.id ? String(layer.options.id) : undefined,\n                layerOptions: {\n                    title: layer.options.title,\n                    zIndex: ++i,\n                    visible: layer.visible\n                },\n                sourceOptions: {\n                    type: layer.dataSource.options.type,\n                    params: layer.dataSource.options.params,\n                    url: layer.dataSource.options.url,\n                    queryable: layer.queryable\n                }\n            };\n            if (opts.sourceOptions.type) {\n                context.layers.push(opts);\n            }\n        }\n        context.tools = this.tools.map((tool) => {\n            return { id: String(tool.id), global: tool.global };\n        });\n        return context;\n    }\n    getContextFromLayers(igoMap, layers, name) {\n        const currentContext = this.context$.getValue();\n        const view = igoMap.ol.getView();\n        const proj = view.getProjection().getCode();\n        const center = new olPoint(view.getCenter()).transform(proj, 'EPSG:4326');\n        const context = {\n            uri: name,\n            title: name,\n            map: {\n                view: {\n                    center: center.getCoordinates(),\n                    zoom: view.getZoom(),\n                    projection: proj\n                }\n            },\n            layers: [],\n            toolbar: [],\n            tools: [],\n            extraFeatures: []\n        };\n        const currentLayers = igoMap.layers$.getValue();\n        context.layers = currentLayers\n            .filter((l) => l.baseLayer)\n            .map((l) => {\n            return {\n                baseLayer: true,\n                sourceOptions: l.options.sourceOptions,\n                title: l.options.title,\n                visible: l.visible\n            };\n        });\n        layers.forEach((layer) => {\n            const layerFound = currentContext.layers.find((contextLayer) => layer.id === contextLayer.source.id && !contextLayer.baseLayer);\n            if (layerFound) {\n                let layerStyle = layerFound[`style`];\n                if (layerFound[`styleByAttribute`]) {\n                    layerStyle = undefined;\n                }\n                else if (layerFound[`clusterBaseStyle`]) {\n                    layerStyle = undefined;\n                    delete layerFound.sourceOptions[`source`];\n                    delete layerFound.sourceOptions[`format`];\n                }\n                const opts = {\n                    baseLayer: layerFound.baseLayer,\n                    title: layer.options.title,\n                    zIndex: layer.zIndex,\n                    styleByAttribute: layerFound[`styleByAttribute`],\n                    clusterBaseStyle: layerFound[`clusterBaseStyle`],\n                    style: layerStyle,\n                    clusterParam: layerFound[`clusterParam`],\n                    visible: layer.visible,\n                    opacity: layer.opacity,\n                    sourceOptions: layerFound.sourceOptions\n                };\n                context.layers.push(opts);\n            }\n            else {\n                if (layer.ol.type !== 'VECTOR') {\n                    const catalogLayer = layer.options;\n                    catalogLayer.zIndex = layer.zIndex;\n                    delete catalogLayer.source;\n                    context.layers.push(catalogLayer);\n                }\n                else {\n                    let features;\n                    const writer = new GeoJSON();\n                    if (layer.ol.getSource() instanceof Cluster) {\n                        features = writer.writeFeatures(layer.ol.getSource().getSource().getFeatures(), {\n                            dataProjection: 'EPSG:4326',\n                            featureProjection: 'EPSG:3857'\n                        });\n                    }\n                    else {\n                        features = writer.writeFeatures(layer.ol.getSource().getFeatures(), {\n                            dataProjection: 'EPSG:4326',\n                            featureProjection: 'EPSG:3857'\n                        });\n                    }\n                    features = JSON.parse(features);\n                    features.name = layer.options.title;\n                    context.extraFeatures.push(features);\n                }\n            }\n        });\n        context.toolbar = this.toolbar;\n        context.tools = this.tools;\n        return context;\n    }\n    setTools(tools) {\n        this.tools = tools;\n    }\n    setToolbar(toolbar) {\n        this.toolbar = toolbar;\n    }\n    handleContextMessage(context) {\n        if (this.contextMessage) {\n            this.messageService.remove(this.contextMessage.id);\n        }\n        const message = context.message;\n        if (message) {\n            message.title = message.title\n                ? this.languageService.translate.instant(message.title)\n                : undefined;\n            message.text = message.text\n                ? this.languageService.translate.instant(message.text)\n                : undefined;\n            this.messageService.message(message);\n        }\n    }\n    getContextByUri(uri) {\n        if (this.baseUrl) {\n            let contextToLoad;\n            for (const key of Object.keys(this.contexts$.value)) {\n                contextToLoad = this.contexts$.value[key].find((c) => {\n                    return c.uri === uri;\n                });\n                if (contextToLoad) {\n                    break;\n                }\n            }\n            if (contextToLoad && contextToLoad.imported) {\n                return of(contextToLoad);\n            }\n            // TODO : use always id or uri\n            const id = contextToLoad ? contextToLoad.id : uri;\n            return this.getDetails(id);\n        }\n        const importedContext = this.contexts$.value.ours.find((currentContext) => {\n            return currentContext.uri === uri && currentContext.imported === true;\n        });\n        if (importedContext) {\n            return of(importedContext);\n        }\n        else {\n            return this.getLocalContext(uri);\n        }\n    }\n    getContextLayers(igoMap) {\n        const layers = [];\n        const mapLayers = igoMap.layers$.getValue();\n        mapLayers.forEach((layer) => {\n            if (!layer.baseLayer && layer.options.id !== 'searchPointerSummaryId') {\n                layers.push(layer);\n            }\n        });\n        return layers;\n    }\n    readParamsFromRoute() {\n        if (!this.route) {\n            return;\n        }\n        this.route.queryParams.subscribe((params) => {\n            const centerKey = this.route.options.centerKey;\n            if (centerKey && params[centerKey]) {\n                const centerParams = params[centerKey];\n                this.mapViewFromRoute.center = centerParams.split(',').map(Number);\n                this.mapViewFromRoute.geolocate = false;\n            }\n            const projectionKey = this.route.options.projectionKey;\n            if (projectionKey && params[projectionKey]) {\n                const projectionParam = params[projectionKey];\n                this.mapViewFromRoute.projection = projectionParam;\n            }\n            const zoomKey = this.route.options.zoomKey;\n            if (zoomKey && params[zoomKey]) {\n                const zoomParam = params[zoomKey];\n                this.mapViewFromRoute.zoom = Number(zoomParam);\n            }\n        });\n    }\n    getPath(file) {\n        const basePath = this.options.basePath.replace(/\\/$/, '');\n        return `${basePath}/${file}`;\n    }\n    handleError(error, uri, permissionError) {\n        const context = this.contexts$.value.ours.find((obj) => obj.uri === uri);\n        const titleContext = context ? context.title : uri;\n        error.error.title = this.languageService.translate.instant('igo.context.contextManager.invalid.title');\n        error.error.message = this.languageService.translate.instant('igo.context.contextManager.invalid.text', { value: titleContext });\n        error.error.toDisplay = true;\n        if (permissionError) {\n            error.error.title = this.languageService.translate.instant('igo.context.contextManager.errors.addPermissionTitle');\n            error.error.message = this.languageService.translate.instant('igo.context.contextManager.errors.addPermission');\n        }\n        throw error;\n    }\n    handleContextsChange(contexts, keepCurrentContext = true) {\n        const context = this.context$.value;\n        const editedContext = this.editedContext$.value;\n        if (!keepCurrentContext || !this.findContext(context)) {\n            this.loadDefaultContext();\n        }\n        else {\n            if (context.map.view.keepCurrentView === undefined) {\n                context.map.view.keepCurrentView = true;\n            }\n            this.context$.next(context);\n            if (this.baseUrl && this.authService.authenticated) {\n                this.getDefault().subscribe();\n            }\n        }\n        const editedFound = this.findContext(editedContext);\n        if (!editedFound || editedFound.permission !== 'write') {\n            this.setEditedContext(undefined);\n        }\n    }\n    addContextToList(context) {\n        const contextFound = this.findContext(context);\n        if (!contextFound) {\n            const contextSimplifie = {\n                id: context.id,\n                uri: context.uri,\n                title: context.title,\n                scope: context.scope,\n                permission: TypePermission[TypePermission.read]\n            };\n            if (this.contexts$.value && this.contexts$.value.public) {\n                this.contexts$.value.public.push(contextSimplifie);\n                this.contexts$.next(this.contexts$.value);\n            }\n        }\n    }\n    findContext(context) {\n        if (!context) {\n            return false;\n        }\n        const contexts = this.contexts$.value;\n        let found;\n        for (const key of Object.keys(contexts)) {\n            const value = contexts[key];\n            found = value.find((c) => (context.id && c.id === context.id) ||\n                (context.uri && c.uri === context.uri));\n            if (found) {\n                break;\n            }\n        }\n        return found;\n    }\n}\nContextService.ɵfac = function ContextService_Factory(t) { return new (t || ContextService)(ɵngcc0.ɵɵinject(ɵngcc1.HttpClient), ɵngcc0.ɵɵinject(ɵngcc2.AuthService), ɵngcc0.ɵɵinject(ɵngcc3.LanguageService), ɵngcc0.ɵɵinject(ɵngcc3.ConfigService), ɵngcc0.ɵɵinject(ɵngcc3.MessageService), ɵngcc0.ɵɵinject(ɵngcc3.RouteService, 8)); };\nContextService.ɵprov = ɵɵdefineInjectable({ factory: function ContextService_Factory() { return new ContextService(ɵɵinject(HttpClient), ɵɵinject(AuthService), ɵɵinject(LanguageService), ɵɵinject(ConfigService), ɵɵinject(MessageService), ɵɵinject(RouteService, 8)); }, token: ContextService, providedIn: \"root\" });\nContextService.ctorParameters = () => [\n    { type: HttpClient },\n    { type: AuthService },\n    { type: LanguageService },\n    { type: ConfigService },\n    { type: MessageService },\n    { type: RouteService, decorators: [{ type: Optional }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.HttpClient }, { type: ɵngcc2.AuthService }, { type: ɵngcc3.LanguageService }, { type: ɵngcc3.ConfigService }, { type: ɵngcc3.MessageService }, { type: ɵngcc3.RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nclass ImportError extends Error {\n}\nclass ImportInvalidFileError extends ImportError {\n    constructor() {\n        super('Invalid file');\n        Object.setPrototypeOf(this, ImportInvalidFileError.prototype);\n    }\n}\nclass ImportUnreadableFileError extends ImportError {\n    constructor() {\n        super('Failed to read file');\n        Object.setPrototypeOf(this, ImportUnreadableFileError.prototype);\n    }\n}\nclass ImportNothingToImportError extends ImportError {\n    constructor() {\n        super('Nothing to import');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\nclass ImportSizeError extends ImportError {\n    constructor() {\n        super('File is too large');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\nclass ImportSRSError extends ImportError {\n    constructor() {\n        super('Invalid SRS definition');\n        Object.setPrototypeOf(this, ImportNothingToImportError.prototype);\n    }\n}\n\nclass ContextImportService {\n    constructor(config) {\n        this.config = config;\n        const configFileSizeMb = this.config.getConfig('importExport.clientSideFileSizeMaxMb');\n        this.clientSideFileSizeMax =\n            (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n    }\n    import(file) {\n        return this.importAsync(file);\n    }\n    getFileImporter(file) {\n        const extension = getFileExtension(file);\n        const mimeType = file.type;\n        const allowedMimeTypes = [...ContextImportService.allowedMimeTypes];\n        const allowedExtensions = ContextImportService.allowedExtensions;\n        if (allowedMimeTypes.indexOf(mimeType) < 0 &&\n            allowedExtensions.indexOf(extension) < 0) {\n            return undefined;\n        }\n        else if (mimeType === 'application/json' ||\n            extension === ContextImportService.allowedExtensions) {\n            return this.importFile;\n        }\n        return undefined;\n    }\n    importAsync(file) {\n        const doImport = (observer) => {\n            if (file.size >= this.clientSideFileSizeMax) {\n                observer.error(new ImportSizeError());\n                return;\n            }\n            const importer = this.getFileImporter(file);\n            if (importer === undefined) {\n                observer.error(new ImportInvalidFileError());\n                return;\n            }\n            importer.call(this, file, observer);\n        };\n        return new Observable(doImport);\n    }\n    importFile(file, observer) {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n            try {\n                const context = this.parseContextFromFile(file, event.target.result);\n                observer.next(context);\n            }\n            catch (e) {\n                observer.error(new ImportUnreadableFileError());\n            }\n            observer.complete();\n        };\n        reader.onerror = (evt) => {\n            observer.error(new ImportUnreadableFileError());\n        };\n        reader.readAsText(file, 'UTF-8');\n    }\n    parseContextFromFile(file, data) {\n        const context = JSON.parse(data);\n        return context;\n    }\n}\nContextImportService.ɵfac = function ContextImportService_Factory(t) { return new (t || ContextImportService)(ɵngcc0.ɵɵinject(ɵngcc3.ConfigService)); };\nContextImportService.allowedMimeTypes = ['application/json'];\nContextImportService.allowedExtensions = 'json';\nContextImportService.ɵprov = ɵɵdefineInjectable({ factory: function ContextImportService_Factory() { return new ContextImportService(ɵɵinject(ConfigService)); }, token: ContextImportService, providedIn: \"root\" });\nContextImportService.ctorParameters = () => [\n    { type: ConfigService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextImportService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc3.ConfigService }]; }, null); })();\n\nclass ContextExportService {\n    export(res) {\n        return this.exportAsync(res);\n    }\n    exportAsync(res) {\n        const doExport = (observer) => {\n            const nothingToExport = this.nothingToExport(res);\n            if (nothingToExport === true) {\n                observer.error(new ExportNothingToExportError());\n                return;\n            }\n            const contextJSON = JSON.stringify(res);\n            downloadContent(contextJSON, 'text/json;charset=utf-8', `${res.uri}.json`);\n            observer.complete();\n        };\n        return new Observable(doExport);\n    }\n    nothingToExport(res) {\n        if (res.map === undefined) {\n            return true;\n        }\n        return false;\n    }\n}\nContextExportService.ɵfac = function ContextExportService_Factory(t) { return new (t || ContextExportService)(); };\nContextExportService.ɵprov = ɵɵdefineInjectable({ factory: function ContextExportService_Factory() { return new ContextExportService(); }, token: ContextExportService, providedIn: \"root\" });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextExportService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], null, null); })();\n\nclass ContextImportExportComponent {\n    constructor(contextImportService, contextExportService, languageService, messageService, formBuilder, config, contextService) {\n        this.contextImportService = contextImportService;\n        this.contextExportService = contextExportService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.formBuilder = formBuilder;\n        this.config = config;\n        this.contextService = contextService;\n        this.inputProj = 'EPSG:4326';\n        this.loading$ = new BehaviorSubject(false);\n        this.forceNaming = false;\n        this.activeImportExport = 'import';\n        this.buildForm();\n    }\n    ngOnInit() {\n        const configFileSizeMb = this.config.getConfig('importExport.clientSideFileSizeMaxMb');\n        this.clientSideFileSizeMax =\n            (configFileSizeMb ? configFileSizeMb : 30) * Math.pow(1024, 2);\n        this.fileSizeMb = this.clientSideFileSizeMax / Math.pow(1024, 2);\n        this.layerList = this.contextService.getContextLayers(this.map);\n        this.userControlledLayerList = this.layerList.filter(layer => layer.showInLayerList);\n    }\n    importFiles(files) {\n        this.loading$.next(true);\n        for (const file of files) {\n            this.contextImportService.import(file).subscribe((context) => this.onFileImportSuccess(file, context), (error) => this.onFileImportError(file, error), () => {\n                this.loading$.next(false);\n            });\n        }\n    }\n    handleExportFormSubmit(contextOptions) {\n        this.loading$.next(true);\n        this.res = this.contextService.getContextFromLayers(this.map, contextOptions.layers, contextOptions.name);\n        this.res.imported = true;\n        this.contextExportService.export(this.res).subscribe(() => { }, (error) => this.onFileExportError(error), () => {\n            this.onFileExportSuccess();\n            this.loading$.next(false);\n        });\n    }\n    buildForm() {\n        this.form = this.formBuilder.group({\n            layers: ['', [Validators.required]],\n            name: ['', [Validators.required]]\n        });\n    }\n    onFileImportSuccess(file, context) {\n        handleFileImportSuccess(file, context, this.messageService, this.languageService, this.contextService);\n    }\n    onFileImportError(file, error) {\n        this.loading$.next(false);\n        handleFileImportError(file, error, this.messageService, this.languageService, this.fileSizeMb);\n    }\n    onFileExportError(error) {\n        this.loading$.next(false);\n        handleFileExportError(error, this.messageService, this.languageService);\n    }\n    onFileExportSuccess() {\n        handleFileExportSuccess(this.messageService, this.languageService);\n    }\n    selectAll(e) {\n        if (e._selected) {\n            this.form.controls.layers.setValue(this.userControlledLayerList);\n            e._selected = true;\n        }\n        if (e._selected === false) {\n            this.form.controls.layers.setValue([]);\n        }\n    }\n    onImportExportChange(event) {\n        this.activeImportExport = event.value;\n    }\n}\nContextImportExportComponent.ɵfac = function ContextImportExportComponent_Factory(t) { return new (t || ContextImportExportComponent)(ɵngcc0.ɵɵdirectiveInject(ContextImportService), ɵngcc0.ɵɵdirectiveInject(ContextExportService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.MessageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.ConfigService), ɵngcc0.ɵɵdirectiveInject(ContextService)); };\nContextImportExportComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextImportExportComponent, selectors: [[\"igo-context-import-export\"]], inputs: { map: \"map\" }, decls: 10, vars: 11, consts: [[1, \"import-export-toggle\", \"mat-typography\"], [3, \"value\", \"change\"], [3, \"value\"], [4, \"ngIf\"], [\"class\", \"igo-form\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"igo-form\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", \"type\", \"button\", 3, \"disabled\", \"click\"], [3, \"shown\"], [\"type\", \"file\", 3, \"click\", \"change\"], [\"fileInput\", \"\"], [1, \"mat-typography\"], [1, \"igo-form\", 3, \"formGroup\"], [1, \"igo-input-container\"], [1, \"example-full-width\"], [\"formControlName\", \"name\", \"matInput\", \"\", 3, \"value\"], [\"formControlName\", \"layers\", \"multiple\", \"\"], [3, \"value\", \"click\"], [\"e\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"]], template: function ContextImportExportComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"mat-button-toggle-group\", 1);\n        ɵngcc0.ɵɵlistener(\"change\", function ContextImportExportComponent_Template_mat_button_toggle_group_change_1_listener($event) { return ctx.onImportExportChange($event); });\n        ɵngcc0.ɵɵelementStart(2, \"mat-button-toggle\", 2);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"mat-button-toggle\", 2);\n        ɵngcc0.ɵɵtext(6);\n        ɵngcc0.ɵɵpipe(7, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, ContextImportExportComponent_div_8_Template, 19, 20, \"div\", 3);\n        ɵngcc0.ɵɵtemplate(9, ContextImportExportComponent_form_9_Template, 26, 21, \"form\", 4);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"value\", ctx.activeImportExport);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"value\", \"import\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(4, 7, \"igo.geo.importExportForm.importTabTitle\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"value\", \"export\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(7, 9, \"igo.geo.importExportForm.exportTabTitle\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.activeImportExport === \"import\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.activeImportExport === \"export\");\n    } }, directives: [ɵngcc5.MatButtonToggleGroup, ɵngcc5.MatButtonToggle, ɵngcc6.NgIf, ɵngcc4.ɵangular_packages_forms_forms_y, ɵngcc4.NgControlStatusGroup, ɵngcc4.NgForm, ɵngcc7.MatButton, ɵngcc8.SpinnerComponent, ɵngcc4.FormGroupDirective, ɵngcc9.MatFormField, ɵngcc9.MatLabel, ɵngcc4.DefaultValueAccessor, ɵngcc10.MatInput, ɵngcc4.NgControlStatus, ɵngcc4.FormControlName, ɵngcc11.MatSelect, ɵngcc12.MatOption, ɵngcc13.MatDivider, ɵngcc6.NgForOf], pipes: [ɵngcc14.TranslatePipe, ɵngcc6.AsyncPipe], styles: [\".import-export-toggle[_ngcontent-%COMP%]{padding:10px;text-align:center}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}.import-export-toggle[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{width:50%}.igo-input-container[_ngcontent-%COMP%]{padding:10px}.igo-input-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}h4[_ngcontent-%COMP%]{padding:0 5px}.igo-form[_ngcontent-%COMP%]{padding:15px 5px}.igo-form-button-group[_ngcontent-%COMP%]{padding-top:10px;text-align:center}igo-spinner[_ngcontent-%COMP%]{padding-left:10px;position:absolute}\"] });\nContextImportExportComponent.ctorParameters = () => [\n    { type: ContextImportService },\n    { type: ContextExportService },\n    { type: LanguageService },\n    { type: MessageService },\n    { type: FormBuilder },\n    { type: ConfigService },\n    { type: ContextService }\n];\nContextImportExportComponent.propDecorators = {\n    map: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextImportExportComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-import-export',\n                template: \"<div class=\\\"import-export-toggle mat-typography\\\">\\n    <mat-button-toggle-group\\n          [value]=\\\"activeImportExport\\\"\\n          (change)=\\\"onImportExportChange($event)\\\">\\n          <mat-button-toggle [value]=\\\"'import'\\\">\\n            {{'igo.geo.importExportForm.importTabTitle' | translate}}\\n          </mat-button-toggle>\\n          <mat-button-toggle [value]=\\\"'export'\\\">\\n            {{'igo.geo.importExportForm.exportTabTitle' | translate}}\\n          </mat-button-toggle>\\n    </mat-button-toggle-group>\\n</div>\\n\\n<div *ngIf=\\\"activeImportExport === 'import'\\\">\\n    <form class=\\\"igo-form\\\">\\n        <div class=\\\"igo-form-button-group\\\">\\n            <button mat-raised-button type=\\\"button\\\" (click)=\\\"fileInput.click()\\\" [disabled]=\\\"loading$ | async\\\">\\n                {{'igo.geo.importExportForm.importButton' | translate}}\\n            </button>\\n            <igo-spinner [shown]=\\\"loading$ | async\\\"></igo-spinner>\\n            <input\\n                #fileInput\\n                type=\\\"file\\\"\\n                [style.display]=\\\"'none'\\\"\\n                (click)=\\\"fileInput.value = null\\\"\\n                (change)=\\\"importFiles($event.target.files)\\\">\\n        </div>\\n    </form>\\n    <section class=\\\"mat-typography\\\">\\n        <h4>{{'igo.geo.importExportForm.importClarifications' | translate}}</h4>\\n            <ul>\\n                <li>{{'igo.geo.importExportForm.importSizeMax' | translate: {size: fileSizeMb} }}</li>\\n            </ul>\\n    </section>\\n</div>\\n\\n\\n<form class=\\\"igo-form\\\" *ngIf=\\\"activeImportExport === 'export'\\\" [formGroup]=\\\"form\\\">\\n    <div class=\\\"igo-input-container\\\">\\n        <mat-form-field class=\\\"example-full-width\\\">\\n            <mat-label>{{'igo.context.contextImportExport.export.exportContextName' | translate}}</mat-label>\\n            <input formControlName=\\\"name\\\" matInput [value]=\\\"\\\">\\n        </mat-form-field>\\n    </div>\\n    <div class=\\\"igo-input-container\\\">\\n        <mat-form-field>\\n            <mat-label>{{'igo.context.contextImportExport.export.exportPlaceHolder' | translate}}</mat-label>\\n            <mat-select formControlName=\\\"layers\\\" multiple>\\n                <mat-option [value]=\\\"1\\\" (click)=\\\"selectAll(e)\\\" #e>\\n                    {{'igo.context.contextImportExport.export.exportSelectAll' | translate}}\\n                </mat-option>\\n                <mat-divider></mat-divider>\\n                <mat-option *ngFor=\\\"let layer of userControlledLayerList\\\" [value]=\\\"layer\\\">{{layer.title}}</mat-option>\\n            </mat-select>\\n        </mat-form-field>\\n    </div>\\n    <div class=\\\"igo-form-button-group\\\">\\n        <button\\n            mat-raised-button\\n            type=\\\"button\\\"\\n            [disabled]=\\\"!form.valid || (loading$ | async)\\\"\\n            (click)=\\\"handleExportFormSubmit(form.value)\\\">\\n            {{'igo.geo.importExportForm.exportButton' | translate}}\\n        </button>\\n        <igo-spinner [shown]=\\\"loading$ | async\\\"></igo-spinner>\\n    </div>\\n</form>\\n\",\n                styles: [\".import-export-toggle{padding:10px;text-align:center}.import-export-toggle mat-button-toggle-group{width:100%}.import-export-toggle mat-button-toggle-group mat-button-toggle{width:50%}.igo-input-container{padding:10px}.igo-input-container mat-form-field{width:100%}h4{padding:0 5px}.igo-form{padding:15px 5px}.igo-form-button-group{padding-top:10px;text-align:center}igo-spinner{padding-left:10px;position:absolute}\"]\n            }]\n    }], function () { return [{ type: ContextImportService }, { type: ContextExportService }, { type: ɵngcc3.LanguageService }, { type: ɵngcc3.MessageService }, { type: ɵngcc4.FormBuilder }, { type: ɵngcc3.ConfigService }, { type: ContextService }]; }, { map: [{\n            type: Input\n        }] }); })();\n\nclass IgoContextImportExportModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextImportExportModule\n        };\n    }\n}\nIgoContextImportExportModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoContextImportExportModule });\nIgoContextImportExportModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoContextImportExportModule_Factory(t) { return new (t || IgoContextImportExportModule)(); }, imports: [[\n            FormsModule,\n            ReactiveFormsModule,\n            CommonModule,\n            MatButtonModule,\n            MatButtonToggleModule,\n            MatDividerModule,\n            MatTabsModule,\n            MatSelectModule,\n            MatOptionModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatCheckboxModule,\n            IgoLanguageModule,\n            IgoSpinnerModule,\n            MatTooltipModule,\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoContextImportExportModule, { declarations: function () { return [ContextImportExportComponent]; }, imports: function () { return [FormsModule,\n        ReactiveFormsModule,\n        CommonModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        MatDividerModule,\n        MatTabsModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatCheckboxModule,\n        IgoLanguageModule,\n        IgoSpinnerModule,\n        MatTooltipModule]; }, exports: function () { return [ContextImportExportComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoContextImportExportModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    FormsModule,\n                    ReactiveFormsModule,\n                    CommonModule,\n                    MatButtonModule,\n                    MatButtonToggleModule,\n                    MatDividerModule,\n                    MatTabsModule,\n                    MatSelectModule,\n                    MatOptionModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatCheckboxModule,\n                    IgoLanguageModule,\n                    IgoSpinnerModule,\n                    MatTooltipModule,\n                ],\n                exports: [\n                    ContextImportExportComponent\n                ],\n                declarations: [\n                    ContextImportExportComponent\n                ]\n            }]\n    }], null, null); })();\n\nclass MapContextDirective {\n    constructor(component, contextService) {\n        this.contextService = contextService;\n        this.component = component;\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngOnInit() {\n        this.context$$ = this.contextService.context$\n            .pipe(filter(context => context !== undefined))\n            .subscribe(context => this.handleContextChange(context));\n    }\n    ngOnDestroy() {\n        this.context$$.unsubscribe();\n    }\n    handleContextChange(context) {\n        if (context.map === undefined) {\n            return;\n        }\n        // This creates a new ol.Map when the context changes. Doing that\n        // allows the print tool to work properly even when the map's canvas\n        // has been tainted (CORS) with the layers of another context. This could\n        // have some side effects such as unbinding all listeners on the first map.\n        // A better solution would be to create a new map (preview) before\n        // printing and avoid the tainted canvas issue. This will come later so\n        // this snippet of code is kept here in case it takes too long becomes\n        // an issue\n        // const target = this.component.map.ol.getTarget();\n        // this.component.map.ol.setTarget(undefined);\n        // this.component.map.init();\n        // this.component.map.ol.setTarget(target);\n        const viewContext = context.map.view;\n        if (!this.component.view || viewContext.keepCurrentView !== true) {\n            this.component.view = viewContext;\n        }\n    }\n}\nMapContextDirective.ɵfac = function MapContextDirective_Factory(t) { return new (t || MapContextDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc15.MapBrowserComponent), ɵngcc0.ɵɵdirectiveInject(ContextService)); };\nMapContextDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: MapContextDirective, selectors: [[\"\", \"igoMapContext\", \"\"]] });\nMapContextDirective.ctorParameters = () => [\n    { type: MapBrowserComponent },\n    { type: ContextService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapContextDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoMapContext]'\n            }]\n    }], function () { return [{ type: ɵngcc15.MapBrowserComponent }, { type: ContextService }]; }, null); })();\n\nclass LayerContextDirective {\n    constructor(component, contextService, layerService, configService, styleListService, styleService, route) {\n        this.component = component;\n        this.contextService = contextService;\n        this.layerService = layerService;\n        this.configService = configService;\n        this.styleListService = styleListService;\n        this.styleService = styleService;\n        this.route = route;\n        this.contextLayers = [];\n        this.removeLayersOnContextChange = true;\n    }\n    get map() {\n        return this.component.map;\n    }\n    ngOnInit() {\n        this.context$$ = this.contextService.context$\n            .pipe(filter((context) => context !== undefined))\n            .subscribe((context) => this.handleContextChange(context));\n        if (this.route &&\n            this.route.options.visibleOnLayersKey &&\n            this.route.options.visibleOffLayersKey &&\n            this.route.options.contextKey) {\n            const queryParams$$ = this.route.queryParams.subscribe((params) => {\n                if (Object.keys(params).length > 0) {\n                    this.queryParams = params;\n                    queryParams$$.unsubscribe();\n                }\n            });\n        }\n    }\n    ngOnDestroy() {\n        this.context$$.unsubscribe();\n    }\n    handleContextChange(context) {\n        if (context.layers === undefined) {\n            return;\n        }\n        if (this.removeLayersOnContextChange === true) {\n            this.map.removeAllLayers();\n        }\n        else {\n            this.map.removeLayers(this.contextLayers);\n        }\n        this.contextLayers = [];\n        const layersAndIndex$ = merge(...context.layers.map((layerOptions, index) => {\n            return this.layerService.createAsyncLayer(layerOptions);\n        }));\n        layersAndIndex$\n            .pipe(buffer(layersAndIndex$.pipe(debounceTime(500))))\n            .subscribe((layers) => {\n            layers = layers\n                .filter((layer) => layer !== undefined)\n                .map((layer) => {\n                layer.visible = this.computeLayerVisibilityFromUrl(layer);\n                layer.zIndex = layer.zIndex;\n                return layer;\n            });\n            this.contextLayers.concat(layers);\n            this.map.addLayers(layers);\n            if (context.extraFeatures) {\n                context.extraFeatures.forEach((featureCollection) => {\n                    const format = new GeoJSON();\n                    const title = featureCollection.name;\n                    featureCollection = JSON.stringify(featureCollection);\n                    featureCollection = format.readFeatures(featureCollection, {\n                        dataProjection: 'EPSG:4326',\n                        featureProjection: 'EPSG:3857'\n                    });\n                    if (!this.configService.getConfig('importWithStyle')) {\n                        addImportedFeaturesToMap(featureCollection, this.map, title);\n                    }\n                    else {\n                        addImportedFeaturesStyledToMap(featureCollection, this.map, title, this.styleListService, this.styleService);\n                    }\n                });\n            }\n        });\n    }\n    computeLayerVisibilityFromUrl(layer) {\n        const params = this.queryParams;\n        const currentContext = this.contextService.context$.value.uri;\n        const currentLayerid = layer.id;\n        let visible = layer.visible;\n        if (!params || !currentLayerid) {\n            return visible;\n        }\n        const contextParams = params[this.route.options.contextKey];\n        if (contextParams === currentContext || !contextParams) {\n            let visibleOnLayersParams = '';\n            let visibleOffLayersParams = '';\n            let visiblelayers = [];\n            let invisiblelayers = [];\n            if (this.route.options.visibleOnLayersKey &&\n                params[this.route.options.visibleOnLayersKey]) {\n                visibleOnLayersParams =\n                    params[this.route.options.visibleOnLayersKey];\n            }\n            if (this.route.options.visibleOffLayersKey &&\n                params[this.route.options.visibleOffLayersKey]) {\n                visibleOffLayersParams =\n                    params[this.route.options.visibleOffLayersKey];\n            }\n            /* This order is important because to control whichever\n             the order of * param. First whe open and close everything.*/\n            if (visibleOnLayersParams === '*') {\n                visible = true;\n            }\n            if (visibleOffLayersParams === '*') {\n                visible = false;\n            }\n            // After, managing named layer by id (context.json OR id from datasource)\n            visiblelayers = visibleOnLayersParams.split(',');\n            invisiblelayers = visibleOffLayersParams.split(',');\n            if (visiblelayers.indexOf(currentLayerid) > -1) {\n                visible = true;\n            }\n            if (invisiblelayers.indexOf(currentLayerid) > -1) {\n                visible = false;\n            }\n        }\n        return visible;\n    }\n}\nLayerContextDirective.ɵfac = function LayerContextDirective_Factory(t) { return new (t || LayerContextDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc15.MapBrowserComponent), ɵngcc0.ɵɵdirectiveInject(ContextService), ɵngcc0.ɵɵdirectiveInject(ɵngcc15.LayerService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.ConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc15.StyleListService), ɵngcc0.ɵɵdirectiveInject(ɵngcc15.StyleService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.RouteService, 8)); };\nLayerContextDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: LayerContextDirective, selectors: [[\"\", \"igoLayerContext\", \"\"]], inputs: { removeLayersOnContextChange: \"removeLayersOnContextChange\" } });\nLayerContextDirective.ctorParameters = () => [\n    { type: MapBrowserComponent },\n    { type: ContextService },\n    { type: LayerService },\n    { type: ConfigService },\n    { type: StyleListService },\n    { type: StyleService },\n    { type: RouteService, decorators: [{ type: Optional }] }\n];\nLayerContextDirective.propDecorators = {\n    removeLayersOnContextChange: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerContextDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoLayerContext]'\n            }]\n    }], function () { return [{ type: ɵngcc15.MapBrowserComponent }, { type: ContextService }, { type: ɵngcc15.LayerService }, { type: ɵngcc3.ConfigService }, { type: ɵngcc15.StyleListService }, { type: ɵngcc15.StyleService }, { type: ɵngcc3.RouteService, decorators: [{\n                type: Optional\n            }] }]; }, { removeLayersOnContextChange: [{\n            type: Input\n        }] }); })();\n\nvar ContextListControlsEnum;\n(function (ContextListControlsEnum) {\n    ContextListControlsEnum[\"always\"] = \"always\";\n    ContextListControlsEnum[\"never\"] = \"never\";\n    ContextListControlsEnum[\"default\"] = \"default\";\n})(ContextListControlsEnum || (ContextListControlsEnum = {}));\n\nclass BookmarkDialogComponent {\n    constructor(dialogRef) {\n        this.dialogRef = dialogRef;\n    }\n}\nBookmarkDialogComponent.ɵfac = function BookmarkDialogComponent_Factory(t) { return new (t || BookmarkDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc16.MatDialogRef)); };\nBookmarkDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: BookmarkDialogComponent, selectors: [[\"igo-bookmark-dialog\"]], decls: 14, vars: 14, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\", 1, \"mat-typography\"], [\"matInput\", \"\", \"required\", \"\", \"autocomplete\", \"off\", \"maxlength\", \"128\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", 3, \"click\"]], template: function BookmarkDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"h1\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(4, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(5, \"input\", 2);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function BookmarkDialogComponent_Template_input_ngModelChange_5_listener($event) { return ctx.title = $event; });\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(8, \"button\", 4);\n        ɵngcc0.ɵɵlistener(\"click\", function BookmarkDialogComponent_Template_button_click_8_listener() { return ctx.dialogRef.close(ctx.title); });\n        ɵngcc0.ɵɵtext(9);\n        ɵngcc0.ɵɵpipe(10, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(11, \"button\", 5);\n        ɵngcc0.ɵɵlistener(\"click\", function BookmarkDialogComponent_Template_button_click_11_listener() { return ctx.dialogRef.close(false); });\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 6, \"igo.context.bookmarkButton.dialog.title\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(6, 8, \"igo.context.bookmarkButton.dialog.placeholder\"))(\"ngModel\", ctx.title);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(10, 10, \"igo.common.confirmDialog.confirmBtn\"), \" \");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 12, \"igo.common.confirmDialog.cancelBtn\"), \" \");\n    } }, directives: [ɵngcc16.MatDialogTitle, ɵngcc16.MatDialogContent, ɵngcc9.MatFormField, ɵngcc10.MatInput, ɵngcc4.DefaultValueAccessor, ɵngcc4.RequiredValidator, ɵngcc4.MaxLengthValidator, ɵngcc4.NgControlStatus, ɵngcc4.NgModel, ɵngcc16.MatDialogActions, ɵngcc7.MatButton], pipes: [ɵngcc14.TranslatePipe], encapsulation: 2 });\nBookmarkDialogComponent.ctorParameters = () => [\n    { type: MatDialogRef }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(BookmarkDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-bookmark-dialog',\n                template: \"<h1 mat-dialog-title class=\\\"mat-typography\\\">{{ 'igo.context.bookmarkButton.dialog.title' |\\u00A0translate }}</h1>\\n<div mat-dialog-content class=\\\"mat-typography\\\">\\n  <mat-form-field>\\n    <input matInput required autocomplete=\\\"off\\\"\\n      maxlength=\\\"128\\\"\\n      [placeholder]=\\\"'igo.context.bookmarkButton.dialog.placeholder' |\\u00A0translate\\\"\\n      [(ngModel)]=\\\"title\\\">\\n  </mat-form-field>\\n</div>\\n<div mat-dialog-actions>\\n  <button mat-button color=\\\"primary\\\"\\n         [disabled]=\\\"!title\\\"\\n         (click)=\\\"dialogRef.close(title)\\\">\\n    {{'igo.common.confirmDialog.confirmBtn' | translate}}\\n  </button>\\n  <button mat-button\\n          (click)=\\\"dialogRef.close(false)\\\">\\n    {{'igo.common.confirmDialog.cancelBtn' |\\u00A0translate}}\\n  </button>\\n</div>\\n\"\n            }]\n    }], function () { return [{ type: ɵngcc16.MatDialogRef }]; }, null); })();\n\nclass ContextListComponent {\n    constructor(cdRef, contextService, auth, dialog, languageService, storageService) {\n        this.cdRef = cdRef;\n        this.contextService = contextService;\n        this.auth = auth;\n        this.dialog = dialog;\n        this.languageService = languageService;\n        this.storageService = storageService;\n        this.contextsInitial = { ours: [] };\n        this.contexts$ = new BehaviorSubject(this.contextsInitial);\n        this.change$ = new ReplaySubject(1);\n        this._contexts = { ours: [] };\n        this.collapsed = [];\n        this.select = new EventEmitter();\n        this.unselect = new EventEmitter();\n        this.edit = new EventEmitter();\n        this.delete = new EventEmitter();\n        this.save = new EventEmitter();\n        this.clone = new EventEmitter();\n        this.create = new EventEmitter();\n        this.hide = new EventEmitter();\n        this.show = new EventEmitter();\n        this.showHiddenContexts = new EventEmitter();\n        this.favorite = new EventEmitter();\n        this.managePermissions = new EventEmitter();\n        this.manageTools = new EventEmitter();\n        this.filterPermissionsChanged = new EventEmitter();\n        this.titleMapping = {\n            ours: 'igo.context.contextManager.ourContexts',\n            shared: 'igo.context.contextManager.sharedContexts',\n            public: 'igo.context.contextManager.publicContexts'\n        };\n        this.permissions = [];\n        this.actionStore = new ActionStore([]);\n        this.actionbarMode = ActionbarMode.Overlay;\n        this.color = 'primary';\n        this.showHidden = false;\n        this._term = '';\n        this._sortedAlpha = undefined;\n        this.showContextFilter = ContextListControlsEnum.always;\n        this.thresholdToFilter = 5;\n    }\n    get contexts() {\n        return this._contexts;\n    }\n    set contexts(value) {\n        this._contexts = value;\n        this.cdRef.detectChanges();\n        this.next();\n    }\n    get selectedContext() {\n        return this._selectedContext;\n    }\n    set selectedContext(value) {\n        this._selectedContext = value;\n        this.cdRef.detectChanges();\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get defaultContextId() {\n        return this._defaultContextId;\n    }\n    set defaultContextId(value) {\n        this._defaultContextId = value;\n    }\n    /**\n     * Context filter term\n     */\n    set term(value) {\n        this._term = value;\n        this.next();\n    }\n    get term() {\n        return this._term;\n    }\n    get sortedAlpha() {\n        return this._sortedAlpha;\n    }\n    set sortedAlpha(value) {\n        this._sortedAlpha = value;\n        this.next();\n    }\n    ngOnInit() {\n        this.change$$ = this.change$\n            .pipe(debounce(() => {\n            return this.contexts.ours.length === 0 ? EMPTY : timer(50);\n        }))\n            .subscribe(() => {\n            this.contexts$.next(this.filterContextsList(this.contexts));\n        });\n        this.actionStore.load([\n            {\n                id: 'emptyContext',\n                title: this.languageService.translate.instant('igo.context.contextManager.emptyContext'),\n                icon: 'map-outline',\n                tooltip: this.languageService.translate.instant('igo.context.contextManager.emptyContextTooltip'),\n                handler: () => {\n                    this.createContext(true);\n                }\n            },\n            {\n                id: 'contextFromMap',\n                title: this.languageService.translate.instant('igo.context.contextManager.contextMap'),\n                icon: 'map-check',\n                tooltip: this.languageService.translate.instant('igo.context.contextManager.contextMapTooltip'),\n                handler: () => {\n                    this.createContext(false);\n                }\n            }\n        ]);\n    }\n    next() {\n        this.change$.next();\n    }\n    filterContextsList(contexts) {\n        if (this.term === '') {\n            if (this.sortedAlpha) {\n                contexts = this.sortContextsList(contexts);\n            }\n            return contexts;\n        }\n        else {\n            const ours = contexts.ours.filter((context) => {\n                const filterNormalized = this.term\n                    .toLowerCase()\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '');\n                const contextTitleNormalized = context.title\n                    .toLowerCase()\n                    .normalize('NFD')\n                    .replace(/[\\u0300-\\u036f]/g, '');\n                return contextTitleNormalized.includes(filterNormalized);\n            });\n            let updateContexts = {\n                ours\n            };\n            if (this.contexts.public) {\n                const publics = contexts.public.filter((context) => {\n                    const filterNormalized = this.term\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '');\n                    const contextTitleNormalized = context.title\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '');\n                    return contextTitleNormalized.includes(filterNormalized);\n                });\n                updateContexts.public = publics;\n            }\n            if (this.contexts.shared) {\n                const shared = contexts.shared.filter((context) => {\n                    const filterNormalized = this.term\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '');\n                    const contextTitleNormalized = context.title\n                        .toLowerCase()\n                        .normalize('NFD')\n                        .replace(/[\\u0300-\\u036f]/g, '');\n                    return contextTitleNormalized.includes(filterNormalized);\n                });\n                updateContexts.shared = shared;\n            }\n            if (this.sortedAlpha) {\n                updateContexts = this.sortContextsList(updateContexts);\n            }\n            return updateContexts;\n        }\n    }\n    ngOnDestroy() {\n        this.change$$.unsubscribe();\n    }\n    showFilter() {\n        switch (this.showContextFilter) {\n            case ContextListControlsEnum.always:\n                return true;\n            case ContextListControlsEnum.never:\n                return false;\n            default:\n                let totalLength = this.contexts.ours.length;\n                this.contexts.public\n                    ? (totalLength += this.contexts.public.length)\n                    : (totalLength += 0);\n                this.contexts.shared\n                    ? (totalLength += this.contexts.shared.length)\n                    : (totalLength += 0);\n                if (totalLength >= this.thresholdToFilter) {\n                    return true;\n                }\n                return false;\n        }\n    }\n    sortContextsList(contexts) {\n        if (contexts) {\n            const contextsList = JSON.parse(JSON.stringify(contexts));\n            contextsList.ours.sort((a, b) => {\n                if (this.normalize(a.title) < this.normalize(b.title)) {\n                    return -1;\n                }\n                if (this.normalize(a.title) > this.normalize(b.title)) {\n                    return 1;\n                }\n                return 0;\n            });\n            if (contextsList.shared) {\n                contextsList.shared.sort((a, b) => {\n                    if (this.normalize(a.title) < this.normalize(b.title)) {\n                        return -1;\n                    }\n                    if (this.normalize(a.title) > this.normalize(b.title)) {\n                        return 1;\n                    }\n                    return 0;\n                });\n            }\n            else if (contextsList.public) {\n                contextsList.public.sort((a, b) => {\n                    if (this.normalize(a.title) < this.normalize(b.title)) {\n                        return -1;\n                    }\n                    if (this.normalize(a.title) > this.normalize(b.title)) {\n                        return 1;\n                    }\n                    return 0;\n                });\n            }\n            return contextsList;\n        }\n    }\n    normalize(str) {\n        return str\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')\n            .toLowerCase();\n    }\n    toggleSort(sortAlpha) {\n        this.sortedAlpha = sortAlpha;\n    }\n    clearFilter() {\n        this.term = '';\n    }\n    createContext(empty) {\n        this.dialog\n            .open(BookmarkDialogComponent, { disableClose: false })\n            .afterClosed()\n            .subscribe((title) => {\n            if (title) {\n                this.create.emit({ title, empty });\n            }\n        });\n    }\n    getPermission(user) {\n        if (user) {\n            const permission = this.permissions.find((p) => p.name === user.name);\n            return permission;\n        }\n    }\n    userSelection(user, parent) {\n        const permission = this.getPermission(user);\n        if (permission) {\n            permission.checked = !permission.checked;\n            this.storageService.set('contexts.permissions.' + permission.name, permission.checked);\n            permission.indeterminate = false;\n        }\n        if (parent) {\n            let indeterminate = false;\n            for (const c of parent.childs) {\n                const cPermission = this.getPermission(c);\n                if (cPermission.checked !== permission.checked) {\n                    indeterminate = true;\n                    break;\n                }\n            }\n            const parentPermission = this.getPermission(parent);\n            if (parentPermission) {\n                parentPermission.checked = permission.checked;\n                this.storageService.set('contexts.permissions.' + parentPermission.name, permission.checked);\n                parentPermission.indeterminate = indeterminate;\n            }\n        }\n        if (user.childs) {\n            for (const c of user.childs) {\n                const childrenPermission = this.getPermission(c);\n                if (childrenPermission &&\n                    childrenPermission.checked !== permission.checked) {\n                    childrenPermission.checked = permission.checked;\n                    this.storageService.set('contexts.permissions.' + childrenPermission.name, permission.checked);\n                }\n            }\n        }\n        this.filterPermissionsChanged.emit(this.permissions);\n    }\n    hideContext(context) {\n        context.hidden = true;\n        if (!this.showHidden) {\n            const contexts = { ours: [], shared: [], public: [] };\n            contexts.ours = this.contexts.ours.filter((c) => c.id !== context.id);\n            contexts.shared = this.contexts.shared.filter((c) => c.id !== context.id);\n            contexts.public = this.contexts.public.filter((c) => c.id !== context.id);\n            this.contexts = contexts;\n        }\n        this.hide.emit(context);\n    }\n    showContext(context) {\n        context.hidden = false;\n        this.show.emit(context);\n    }\n}\nContextListComponent.ɵfac = function ContextListComponent_Factory(t) { return new (t || ContextListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ContextService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AuthService), ɵngcc0.ɵɵdirectiveInject(ɵngcc16.MatDialog), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.StorageService)); };\nContextListComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextListComponent, selectors: [[\"igo-context-list\"]], inputs: { contexts: \"contexts\", selectedContext: \"selectedContext\", map: \"map\", defaultContextId: \"defaultContextId\", term: \"term\" }, outputs: { select: \"select\", unselect: \"unselect\", edit: \"edit\", delete: \"delete\", save: \"save\", clone: \"clone\", create: \"create\", hide: \"hide\", show: \"show\", showHiddenContexts: \"showHiddenContexts\", favorite: \"favorite\", managePermissions: \"managePermissions\", manageTools: \"manageTools\", filterPermissionsChanged: \"filterPermissionsChanged\" }, decls: 17, vars: 16, consts: [[3, \"navigation\"], [3, \"ngClass\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"class\", \"add-context-button\", \"icon\", \"plus\", 3, \"iconColor\", \"store\", \"withIcon\", \"withTitle\", \"horizontal\", \"mode\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"matMenuTriggerFor\", 4, \"ngIf\"], [\"accountMenu\", \"matMenu\"], [4, \"ngFor\", \"ngForOf\"], [1, \"profilsMenu\"], [1, \"mat-menu-item\", 3, \"checked\", \"click\", \"change\"], [\"mat-menu-item\", \"\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"ngClass\"], [\"matInput\", \"\", \"type\", \"text\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"mat-button\", \"\", \"mat-icon-button\", \"\", \"matSuffix\", \"\", \"class\", \"clear-button\", \"aria-label\", \"Clear\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", \"mat-icon-button\", \"\", \"matSuffix\", \"\", \"aria-label\", \"Clear\", \"color\", \"warn\", 1, \"clear-button\", 3, \"click\"], [\"svgIcon\", \"close\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\"], [\"color\", \"primary\", \"svgIcon\", \"sort-alphabetical-variant\"], [\"color\", \"warn\", \"svgIcon\", \"sort-variant-remove\"], [\"icon\", \"plus\", 1, \"add-context-button\", 3, \"iconColor\", \"store\", \"withIcon\", \"withTitle\", \"horizontal\", \"mode\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"matMenuTriggerFor\"], [\"color\", \"primary\", \"svgIcon\", \"filter-menu\"], [1, \"mat-menu-item\", 3, \"checked\", \"indeterminate\", \"click\", \"change\"], [\"mat-menu-item\", \"\", 3, \"matMenuTriggerFor\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", 4, \"ngIf\"], [\"subAccountMenu\", \"matMenu\"], [\"class\", \"mat-menu-item\", 3, \"checked\", \"click\", \"change\", 4, \"ngFor\", \"ngForOf\"], [\"mat-menu-item\", \"\", 3, \"matMenuTriggerFor\"], [3, \"title\", \"collapsed\", \"toggle\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"title\", \"collapsed\", \"toggle\"], [\"igoListItem\", \"\", \"color\", \"accent\", 3, \"selected\", \"context\", \"default\", \"edit\", \"delete\", \"clone\", \"save\", \"hide\", \"show\", \"favorite\", \"manageTools\", \"managePermissions\", \"select\", \"unselect\"], [\"igoListItem\", \"\", \"color\", \"accent\", 3, \"selected\", \"context\", \"default\", \"select\", \"unselect\"]], template: function ContextListComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-list\", 0);\n        ɵngcc0.ɵɵtemplate(1, ContextListComponent_mat_form_field_1_Template, 4, 6, \"mat-form-field\", 1);\n        ɵngcc0.ɵɵtemplate(2, ContextListComponent_button_2_Template, 3, 3, \"button\", 2);\n        ɵngcc0.ɵɵtemplate(3, ContextListComponent_button_3_Template, 3, 3, \"button\", 2);\n        ɵngcc0.ɵɵtemplate(4, ContextListComponent_igo_actionbar_4_Template, 1, 6, \"igo-actionbar\", 3);\n        ɵngcc0.ɵɵtemplate(5, ContextListComponent_button_5_Template, 3, 4, \"button\", 4);\n        ɵngcc0.ɵɵelementStart(6, \"mat-menu\", null, 5);\n        ɵngcc0.ɵɵtemplate(8, ContextListComponent_ng_container_8_Template, 8, 5, \"ng-container\", 6);\n        ɵngcc0.ɵɵelementStart(9, \"span\", 7);\n        ɵngcc0.ɵɵelementStart(10, \"mat-checkbox\", 8);\n        ɵngcc0.ɵɵlistener(\"click\", function ContextListComponent_Template_mat_checkbox_click_10_listener($event) { return $event.stopPropagation(); })(\"change\", function ContextListComponent_Template_mat_checkbox_change_10_listener() { return ctx.showHiddenContexts.emit(); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(11, \"button\", 9);\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(14, ContextListComponent_ng_template_14_Template, 2, 2, \"ng-template\", 10);\n        ɵngcc0.ɵɵpipe(15, \"keyvalue\");\n        ɵngcc0.ɵɵpipe(16, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"navigation\", true);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showFilter());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.sortedAlpha);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.sortedAlpha);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.auth.authenticated);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.auth.authenticated && ctx.users && ctx.users.length);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.users);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"checked\", ctx.showHidden);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 10, \"igo.context.contextManager.showHidden\"), \" \");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind1(15, 12, ɵngcc0.ɵɵpipeBind1(16, 14, ctx.contexts$)));\n    } }, directives: function () { return [ɵngcc8.ListComponent, ɵngcc6.NgIf, ɵngcc17._MatMenu, ɵngcc6.NgForOf, ɵngcc18.MatCheckbox, ɵngcc17.MatMenuItem, ɵngcc9.MatFormField, ɵngcc6.NgClass, ɵngcc10.MatInput, ɵngcc4.DefaultValueAccessor, ɵngcc4.NgControlStatus, ɵngcc4.NgModel, ɵngcc7.MatButton, ɵngcc9.MatSuffix, ɵngcc19.MatIcon, ɵngcc20.MatTooltip, ɵngcc8.ActionbarComponent, ɵngcc17.MatMenuTrigger, ɵngcc8.CollapsibleComponent, ContextItemComponent, ɵngcc8.ListItemDirective]; }, pipes: function () { return [ɵngcc14.TranslatePipe, ɵngcc8.KeyValuePipe, ɵngcc6.AsyncPipe]; }, styles: [\".context-filter-max-width[_ngcontent-%COMP%]{margin:5px;padding-left:6px;width:calc(100% - 100px)}.context-filter-min-width[_ngcontent-%COMP%]{margin:5px;padding-left:6px;width:calc(100% - 135px)}.clear-button[_ngcontent-%COMP%]{padding-right:5px}mat-form-field[_ngcontent-%COMP%]{height:40px}.profilsMenu[_ngcontent-%COMP%]{display:flex}.profilsMenu[_ngcontent-%COMP%] > mat-checkbox[_ngcontent-%COMP%]{width:8px}.add-context-button[_ngcontent-%COMP%]{display:inline-flex;margin:0;width:40px}\"], changeDetection: 0 });\nContextListComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef },\n    { type: ContextService },\n    { type: AuthService },\n    { type: MatDialog },\n    { type: LanguageService },\n    { type: StorageService }\n];\nContextListComponent.propDecorators = {\n    contexts: [{ type: Input }],\n    selectedContext: [{ type: Input }],\n    map: [{ type: Input }],\n    defaultContextId: [{ type: Input }],\n    select: [{ type: Output }],\n    unselect: [{ type: Output }],\n    edit: [{ type: Output }],\n    delete: [{ type: Output }],\n    save: [{ type: Output }],\n    clone: [{ type: Output }],\n    create: [{ type: Output }],\n    hide: [{ type: Output }],\n    show: [{ type: Output }],\n    showHiddenContexts: [{ type: Output }],\n    favorite: [{ type: Output }],\n    managePermissions: [{ type: Output }],\n    manageTools: [{ type: Output }],\n    filterPermissionsChanged: [{ type: Output }],\n    term: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextListComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-list',\n                template: \"<igo-list [navigation]=\\\"true\\\">\\n  <mat-form-field *ngIf=\\\"showFilter()\\\" [ngClass]=\\\"auth.authenticated ? 'context-filter-min-width' : 'context-filter-max-width'\\\">\\n    <input\\n      matInput\\n      type=\\\"text\\\"\\n      [placeholder]=\\\"'igo.context.contextManager.filterPlaceHolder' | translate\\\"\\n      [(ngModel)]=\\\"term\\\">\\n    <button\\n      mat-button\\n      mat-icon-button\\n      matSuffix\\n      class=\\\"clear-button\\\"\\n      *ngIf=\\\"term.length\\\"\\n      aria-label=\\\"Clear\\\"\\n      color=\\\"warn\\\"\\n      (click)=\\\"clearFilter()\\\">\\n      <mat-icon svgIcon=\\\"close\\\"></mat-icon>\\n    </button>\\n  </mat-form-field>\\n\\n  <button\\n  *ngIf=\\\"!sortedAlpha\\\"\\n  mat-icon-button\\n  [matTooltip]=\\\"'igo.context.contextManager.sortAlphabetically' | translate\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  (click)=\\\"toggleSort(true)\\\">\\n  <mat-icon color=\\\"primary\\\" svgIcon=\\\"sort-alphabetical-variant\\\"></mat-icon>\\n  </button>\\n  <button\\n    *ngIf=\\\"sortedAlpha\\\"\\n    mat-icon-button\\n    [matTooltip]=\\\"'igo.context.contextManager.sortContextOrder' | translate\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    (click)=\\\"toggleSort(false)\\\">\\n    <mat-icon color=\\\"warn\\\" svgIcon=\\\"sort-variant-remove\\\"></mat-icon>\\n  </button>\\n\\n  <igo-actionbar *ngIf=\\\"auth.authenticated\\\"\\n    class=\\\"add-context-button\\\"\\n    [iconColor]=\\\"color\\\"\\n    [store]=\\\"actionStore\\\"\\n    [withIcon]=\\\"true\\\"\\n    icon=\\\"plus\\\"\\n    [withTitle]=\\\"actionbarMode === 'overlay'\\\"\\n    [horizontal]=\\\"false\\\"\\n    [mode]=\\\"actionbarMode\\\">\\n  </igo-actionbar>\\n\\n  <button *ngIf=\\\"auth.authenticated && users && users.length\\\"\\n    mat-icon-button\\n    [matTooltip]=\\\"'igo.context.contextManager.filterUser' | translate\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matMenuTriggerFor]=\\\"accountMenu\\\">\\n    <mat-icon color=\\\"primary\\\" svgIcon=\\\"filter-menu\\\"></mat-icon>\\n  </button>\\n\\n  <mat-menu #accountMenu=\\\"matMenu\\\">\\n    <ng-container *ngFor=\\\"let user of users\\\">\\n      <span class=\\\"profilsMenu\\\">\\n        <mat-checkbox\\n          class=\\\"mat-menu-item\\\"\\n          [checked]=\\\"getPermission(user).checked\\\"\\n          [indeterminate]=\\\"getPermission(user).indeterminate\\\"\\n          (click)=\\\"$event.stopPropagation()\\\"\\n          (change)=\\\"userSelection(user)\\\">\\n        </mat-checkbox>\\n        <button *ngIf=\\\"user.childs\\\"\\n          [matMenuTriggerFor]=\\\"subAccountMenu\\\"\\n          mat-menu-item>\\n          {{user.title}}\\n        </button>\\n        <button\\n          mat-menu-item\\n          *ngIf=\\\"!user.childs\\\">\\n          {{user.title}}\\n        </button>\\n      </span>\\n\\n      <mat-menu #subAccountMenu=\\\"matMenu\\\">\\n        <mat-checkbox *ngFor=\\\"let child of user.childs\\\"\\n          class=\\\"mat-menu-item\\\"\\n          [checked]=\\\"getPermission(child).checked\\\"\\n          (click)=\\\"$event.stopPropagation()\\\"\\n          (change)=\\\"userSelection(child, user)\\\">\\n          {{child.title}}\\n        </mat-checkbox>\\n      </mat-menu>\\n    </ng-container>\\n\\n    <span class=\\\"profilsMenu\\\">\\n      <mat-checkbox\\n        class=\\\"mat-menu-item\\\"\\n        [checked]=\\\"showHidden\\\"\\n        (click)=\\\"$event.stopPropagation()\\\"\\n        (change)=\\\"showHiddenContexts.emit()\\\">\\n      </mat-checkbox>\\n      <button mat-menu-item>\\n        {{ 'igo.context.contextManager.showHidden' | translate }}\\n      </button>\\n    </span>\\n  </mat-menu>\\n\\n  <ng-template ngFor let-groupContexts [ngForOf]=\\\"contexts$ | async | keyvalue\\\">\\n\\n    <igo-collapsible *ngIf=\\\"groupContexts.value.length && auth.authenticated\\\" [title]=\\\"titleMapping[groupContexts.key] | translate\\\"\\n      [collapsed]=\\\"collapsed[titleMapping[groupContexts.key]]\\\" (toggle)=\\\"collapsed[titleMapping[groupContexts.key]] = $event\\\">\\n\\n      <ng-template ngFor let-context [ngForOf]=\\\"groupContexts.value\\\">\\n        <igo-context-item\\n          igoListItem\\n          color=\\\"accent\\\"\\n          [selected]=\\\"selectedContext && selectedContext.uri === context.uri\\\"\\n          [context]=\\\"context\\\"\\n          [default]=\\\"context.id && this.defaultContextId && this.defaultContextId === context.id\\\"\\n          (edit)=\\\"edit.emit(context)\\\"\\n          (delete)=\\\"delete.emit(context)\\\"\\n          (clone)=\\\"clone.emit(context)\\\"\\n          (save)=\\\"save.emit(context)\\\"\\n          (hide)=\\\"hideContext(context)\\\"\\n          (show)=\\\"showContext(context)\\\"\\n          (favorite)=\\\"favorite.emit(context)\\\"\\n          (manageTools)=\\\"manageTools.emit(context)\\\"\\n          (managePermissions)=\\\"managePermissions.emit(context)\\\"\\n          (select)=\\\"select.emit(context)\\\"\\n          (unselect)=\\\"unselect.emit(context)\\\">\\n        </igo-context-item>\\n      </ng-template>\\n\\n    </igo-collapsible>\\n\\n    <ng-template *ngIf=\\\"groupContexts.value.length && !auth.authenticated\\\" ngFor let-context [ngForOf]=\\\"groupContexts.value\\\">\\n      <igo-context-item\\n        igoListItem\\n        color=\\\"accent\\\"\\n        [selected]=\\\"selectedContext && selectedContext.uri === context.uri\\\"\\n        [context]=\\\"context\\\"\\n        [default]=\\\"this.defaultContextId === context.id\\\"\\n        (select)=\\\"select.emit(context)\\\"\\n        (unselect)=\\\"unselect.emit(context)\\\">\\n      </igo-context-item>\\n    </ng-template>\\n\\n  </ng-template>\\n</igo-list>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".context-filter-max-width{margin:5px;padding-left:6px;width:calc(100% - 100px)}.context-filter-min-width{margin:5px;padding-left:6px;width:calc(100% - 135px)}.clear-button{padding-right:5px}mat-form-field{height:40px}.profilsMenu{display:flex}.profilsMenu>mat-checkbox{width:8px}.add-context-button{display:inline-flex;margin:0;width:40px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: ContextService }, { type: ɵngcc2.AuthService }, { type: ɵngcc16.MatDialog }, { type: ɵngcc3.LanguageService }, { type: ɵngcc3.StorageService }]; }, { select: [{\n            type: Output\n        }], unselect: [{\n            type: Output\n        }], edit: [{\n            type: Output\n        }], delete: [{\n            type: Output\n        }], save: [{\n            type: Output\n        }], clone: [{\n            type: Output\n        }], create: [{\n            type: Output\n        }], hide: [{\n            type: Output\n        }], show: [{\n            type: Output\n        }], showHiddenContexts: [{\n            type: Output\n        }], favorite: [{\n            type: Output\n        }], managePermissions: [{\n            type: Output\n        }], manageTools: [{\n            type: Output\n        }], filterPermissionsChanged: [{\n            type: Output\n        }], contexts: [{\n            type: Input\n        }], selectedContext: [{\n            type: Input\n        }], map: [{\n            type: Input\n        }], defaultContextId: [{\n            type: Input\n        }], term: [{\n            type: Input\n        }] }); })();\n\nclass ContextListBindingDirective {\n    constructor(component, contextService, mapService, languageService, confirmDialogService, messageService, auth, storageService) {\n        this.contextService = contextService;\n        this.mapService = mapService;\n        this.languageService = languageService;\n        this.confirmDialogService = confirmDialogService;\n        this.messageService = messageService;\n        this.auth = auth;\n        this.storageService = storageService;\n        this.component = component;\n    }\n    onSelect(context) {\n        this.contextService.loadContext(context.uri);\n    }\n    onEdit(context) {\n        this.contextService.loadEditedContext(context.uri);\n    }\n    onSave(context) {\n        const map = this.mapService.getMap();\n        const contextFromMap = this.contextService.getContextFromMap(map);\n        const msgSuccess = () => {\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.contextManager.dialog.saveMsg', {\n                value: context.title\n            });\n            const title = translate.instant('igo.context.contextManager.dialog.saveTitle');\n            this.messageService.success(message, title);\n        };\n        if (context.imported) {\n            contextFromMap.title = context.title;\n            this.contextService.delete(context.id, true);\n            this.contextService.create(contextFromMap).subscribe((contextCreated) => {\n                this.contextService.loadContext(contextCreated.uri);\n                msgSuccess();\n            });\n            return;\n        }\n        const changes = {\n            layers: contextFromMap.layers,\n            map: {\n                view: contextFromMap.map.view\n            }\n        };\n        this.contextService.update(context.id, changes).subscribe(() => {\n            msgSuccess();\n        });\n    }\n    onFavorite(context) {\n        this.contextService.setDefault(context.id).subscribe(() => {\n            this.contextService.defaultContextId$.next(context.id);\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.contextManager.dialog.favoriteMsg', {\n                value: context.title\n            });\n            const title = translate.instant('igo.context.contextManager.dialog.favoriteTitle');\n            this.messageService.success(message, title);\n        });\n    }\n    onManageTools(context) {\n        this.contextService.loadEditedContext(context.uri);\n    }\n    onManagePermissions(context) {\n        this.contextService.loadEditedContext(context.uri);\n    }\n    onDelete(context) {\n        const translate = this.languageService.translate;\n        this.confirmDialogService\n            .open(translate.instant('igo.context.contextManager.dialog.confirmDelete'))\n            .subscribe((confirm) => {\n            if (confirm) {\n                this.contextService\n                    .delete(context.id, context.imported)\n                    .subscribe(() => {\n                    const message = translate.instant('igo.context.contextManager.dialog.deleteMsg', {\n                        value: context.title\n                    });\n                    const title = translate.instant('igo.context.contextManager.dialog.deleteTitle');\n                    this.messageService.info(message, title);\n                });\n            }\n        });\n    }\n    onClone(context) {\n        const properties = {\n            title: context.title + '-copy',\n            uri: context.uri + '-copy'\n        };\n        this.contextService.clone(context.id, properties).subscribe(() => {\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.contextManager.dialog.cloneMsg', {\n                value: context.title\n            });\n            const title = translate.instant('igo.context.contextManager.dialog.cloneTitle');\n            this.messageService.success(message, title);\n        });\n    }\n    onCreate(opts) {\n        const { title, empty } = opts;\n        const context = this.contextService.getContextFromMap(this.component.map, empty);\n        context.title = title;\n        this.contextService.create(context).subscribe(() => {\n            const translate = this.languageService.translate;\n            const titleD = translate.instant('igo.context.bookmarkButton.dialog.createTitle');\n            const message = translate.instant('igo.context.bookmarkButton.dialog.createMsg', {\n                value: context.title\n            });\n            this.messageService.success(message, titleD);\n            this.contextService.loadContext(context.uri);\n        });\n    }\n    loadContexts() {\n        const permissions = ['none'];\n        for (const p of this.component.permissions) {\n            if (p.checked === true || p.indeterminate === true) {\n                permissions.push(p.name);\n            }\n        }\n        this.component.showHidden\n            ? this.contextService.loadContexts(permissions, true)\n            : this.contextService.loadContexts(permissions, false);\n    }\n    showHiddenContexts() {\n        this.component.showHidden = !this.component.showHidden;\n        this.storageService.set('contexts.showHidden', this.component.showHidden);\n        this.loadContexts();\n    }\n    onShowContext(context) {\n        this.contextService.showContext(context.id).subscribe();\n    }\n    onHideContext(context) {\n        this.contextService.hideContext(context.id).subscribe();\n    }\n    ngOnInit() {\n        // Override input contexts\n        this.component.contexts = { ours: [] };\n        this.component.showHidden = this.storageService.get('contexts.showHidden');\n        this.contexts$$ = this.contextService.contexts$.subscribe((contexts) => this.handleContextsChange(contexts));\n        this.defaultContextId$$ = this.contextService.defaultContextId$.subscribe((id) => {\n            this.component.defaultContextId = id;\n        });\n        // See feature-list.component for an explanation about the debounce time\n        this.selectedContext$$ = this.contextService.context$\n            .pipe(debounceTime(100))\n            .subscribe((context) => (this.component.selectedContext = context));\n        this.auth.authenticate$.subscribe((authenticate) => {\n            if (authenticate) {\n                this.contextService.getProfilByUser().subscribe((profils) => {\n                    this.component.users = profils;\n                    this.component.permissions = [];\n                    const profilsAcc = this.component.users.reduce((acc, cur) => {\n                        acc = acc.concat(cur);\n                        acc = cur.childs ? acc.concat(cur.childs) : acc;\n                        return acc;\n                    }, []);\n                    for (const user of profilsAcc) {\n                        const permission = {\n                            name: user.name,\n                            checked: this.storageService.get('contexts.permissions.' + user.name)\n                        };\n                        if (permission.checked === null) {\n                            permission.checked = true;\n                        }\n                        this.component.permissions.push(permission);\n                    }\n                    const permissions = ['none'];\n                    for (const p of this.component.permissions) {\n                        if (p.checked === true || p.indeterminate === true) {\n                            permissions.push(p.name);\n                        }\n                    }\n                    this.component.showHidden\n                        ? this.contextService.loadContexts(permissions, true)\n                        : this.contextService.loadContexts(permissions, false);\n                });\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.contexts$$.unsubscribe();\n        this.selectedContext$$.unsubscribe();\n        this.defaultContextId$$.unsubscribe();\n    }\n    handleContextsChange(contexts) {\n        this.component.contexts = contexts;\n    }\n}\nContextListBindingDirective.ɵfac = function ContextListBindingDirective_Factory(t) { return new (t || ContextListBindingDirective)(ɵngcc0.ɵɵdirectiveInject(ContextListComponent, 2), ɵngcc0.ɵɵdirectiveInject(ContextService), ɵngcc0.ɵɵdirectiveInject(ɵngcc15.MapService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc8.ConfirmDialogService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.MessageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AuthService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.StorageService)); };\nContextListBindingDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ContextListBindingDirective, selectors: [[\"\", \"igoContextListBinding\", \"\"]], hostBindings: function ContextListBindingDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"select\", function ContextListBindingDirective_select_HostBindingHandler($event) { return ctx.onSelect($event); })(\"edit\", function ContextListBindingDirective_edit_HostBindingHandler($event) { return ctx.onEdit($event); })(\"save\", function ContextListBindingDirective_save_HostBindingHandler($event) { return ctx.onSave($event); })(\"favorite\", function ContextListBindingDirective_favorite_HostBindingHandler($event) { return ctx.onFavorite($event); })(\"manageTools\", function ContextListBindingDirective_manageTools_HostBindingHandler($event) { return ctx.onManageTools($event); })(\"managePermissions\", function ContextListBindingDirective_managePermissions_HostBindingHandler($event) { return ctx.onManagePermissions($event); })(\"delete\", function ContextListBindingDirective_delete_HostBindingHandler($event) { return ctx.onDelete($event); })(\"clone\", function ContextListBindingDirective_clone_HostBindingHandler($event) { return ctx.onClone($event); })(\"create\", function ContextListBindingDirective_create_HostBindingHandler($event) { return ctx.onCreate($event); })(\"filterPermissionsChanged\", function ContextListBindingDirective_filterPermissionsChanged_HostBindingHandler() { return ctx.loadContexts(); })(\"showHiddenContexts\", function ContextListBindingDirective_showHiddenContexts_HostBindingHandler() { return ctx.showHiddenContexts(); })(\"show\", function ContextListBindingDirective_show_HostBindingHandler($event) { return ctx.onShowContext($event); })(\"hide\", function ContextListBindingDirective_hide_HostBindingHandler($event) { return ctx.onHideContext($event); });\n    } } });\nContextListBindingDirective.ctorParameters = () => [\n    { type: ContextListComponent, decorators: [{ type: Self }] },\n    { type: ContextService },\n    { type: MapService },\n    { type: LanguageService },\n    { type: ConfirmDialogService },\n    { type: MessageService },\n    { type: AuthService },\n    { type: StorageService }\n];\nContextListBindingDirective.propDecorators = {\n    onSelect: [{ type: HostListener, args: ['select', ['$event'],] }],\n    onEdit: [{ type: HostListener, args: ['edit', ['$event'],] }],\n    onSave: [{ type: HostListener, args: ['save', ['$event'],] }],\n    onFavorite: [{ type: HostListener, args: ['favorite', ['$event'],] }],\n    onManageTools: [{ type: HostListener, args: ['manageTools', ['$event'],] }],\n    onManagePermissions: [{ type: HostListener, args: ['managePermissions', ['$event'],] }],\n    onDelete: [{ type: HostListener, args: ['delete', ['$event'],] }],\n    onClone: [{ type: HostListener, args: ['clone', ['$event'],] }],\n    onCreate: [{ type: HostListener, args: ['create', ['$event'],] }],\n    loadContexts: [{ type: HostListener, args: ['filterPermissionsChanged',] }],\n    showHiddenContexts: [{ type: HostListener, args: ['showHiddenContexts',] }],\n    onShowContext: [{ type: HostListener, args: ['show', ['$event'],] }],\n    onHideContext: [{ type: HostListener, args: ['hide', ['$event'],] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextListBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoContextListBinding]'\n            }]\n    }], function () { return [{ type: ContextListComponent, decorators: [{\n                type: Self\n            }] }, { type: ContextService }, { type: ɵngcc15.MapService }, { type: ɵngcc3.LanguageService }, { type: ɵngcc8.ConfirmDialogService }, { type: ɵngcc3.MessageService }, { type: ɵngcc2.AuthService }, { type: ɵngcc3.StorageService }]; }, { onSelect: [{\n            type: HostListener,\n            args: ['select', ['$event']]\n        }], onEdit: [{\n            type: HostListener,\n            args: ['edit', ['$event']]\n        }], onSave: [{\n            type: HostListener,\n            args: ['save', ['$event']]\n        }], onFavorite: [{\n            type: HostListener,\n            args: ['favorite', ['$event']]\n        }], onManageTools: [{\n            type: HostListener,\n            args: ['manageTools', ['$event']]\n        }], onManagePermissions: [{\n            type: HostListener,\n            args: ['managePermissions', ['$event']]\n        }], onDelete: [{\n            type: HostListener,\n            args: ['delete', ['$event']]\n        }], onClone: [{\n            type: HostListener,\n            args: ['clone', ['$event']]\n        }], onCreate: [{\n            type: HostListener,\n            args: ['create', ['$event']]\n        }], loadContexts: [{\n            type: HostListener,\n            args: ['filterPermissionsChanged']\n        }], showHiddenContexts: [{\n            type: HostListener,\n            args: ['showHiddenContexts']\n        }], onShowContext: [{\n            type: HostListener,\n            args: ['show', ['$event']]\n        }], onHideContext: [{\n            type: HostListener,\n            args: ['hide', ['$event']]\n        }] }); })();\n\nclass ContextItemComponent {\n    constructor(auth, storageService) {\n        this.auth = auth;\n        this.storageService = storageService;\n        this.typePermission = TypePermission;\n        this.color = 'primary';\n        this.collapsed = true;\n        this._default = false;\n        this.edit = new EventEmitter();\n        this.delete = new EventEmitter();\n        this.save = new EventEmitter();\n        this.clone = new EventEmitter();\n        this.hide = new EventEmitter();\n        this.show = new EventEmitter();\n        this.favorite = new EventEmitter();\n        this.managePermissions = new EventEmitter();\n        this.manageTools = new EventEmitter();\n    }\n    get context() {\n        return this._context;\n    }\n    set context(value) {\n        this._context = value;\n    }\n    get default() {\n        return this._default;\n    }\n    set default(value) {\n        this._default = value;\n    }\n    get hidden() {\n        return this.context.hidden;\n    }\n    get canShare() {\n        return this.storageService.get('canShare') === true;\n    }\n    favoriteClick(context) {\n        if (this.auth.authenticated) {\n            this.favorite.emit(context);\n        }\n    }\n}\nContextItemComponent.ɵfac = function ContextItemComponent_Factory(t) { return new (t || ContextItemComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AuthService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.StorageService)); };\nContextItemComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextItemComponent, selectors: [[\"igo-context-item\"]], inputs: { context: \"context\", default: \"default\", selected: \"selected\" }, outputs: { edit: \"edit\", delete: \"delete\", save: \"save\", clone: \"clone\", hide: \"hide\", show: \"show\", favorite: \"favorite\", managePermissions: \"managePermissions\", manageTools: \"manageTools\" }, decls: 5, vars: 6, consts: [[1, \"mat-list-item\", 3, \"ngClass\"], [\"mat-list-avatar\", \"\", \"mat-icon-button\", \"\", \"igoStopPropagation\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"matLine\", \"\"], [\"igoStopPropagation\", \"\", \"class\", \"igo-actions-container\", 4, \"ngIf\"], [\"mat-list-avatar\", \"\", \"mat-icon-button\", \"\", \"igoStopPropagation\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [3, \"svgIcon\", 4, \"ngIf\"], [3, \"src\", 4, \"ngIf\"], [3, \"svgIcon\"], [3, \"src\"], [\"igoStopPropagation\", \"\", 1, \"igo-actions-container\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [1, \"igo-actions-expand-container\"], [\"actions\", \"\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"igoCollapse\", \"\", 3, \"color\", \"target\", \"collapsed\", \"click\"], [\"svgIcon\", \"dots-horizontal\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"content-save\"], [\"svgIcon\", \"account-arrow-right\"], [\"svgIcon\", \"content-copy\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", 3, \"color\", \"matTooltip\", \"click\"], [\"svgIcon\", \"pencil\"], [\"svgIcon\", \"eye\"], [\"svgIcon\", \"eye-off\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"]], template: function ContextItemComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-list-item\", 0);\n        ɵngcc0.ɵɵtemplate(1, ContextItemComponent_button_1_Template, 4, 6, \"button\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"h4\", 2);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(4, ContextItemComponent_div_4_Template, 12, 10, \"div\", 3);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(4, _c1, ctx.hidden));\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.auth.authenticated);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.context.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.auth.authenticated);\n    } }, directives: [ɵngcc21.MatListItem, ɵngcc6.NgClass, ɵngcc6.NgIf, ɵngcc12.MatLine, ɵngcc7.MatButton, ɵngcc21.MatListAvatarCssMatStyler, ɵngcc8.StopPropagationDirective, ɵngcc20.MatTooltip, ɵngcc19.MatIcon, ɵngcc8.CollapseDirective], pipes: [ɵngcc14.TranslatePipe], styles: [\"[_nghost-%COMP%]{overflow:hidden}.igo-actions-container[_ngcontent-%COMP%]{flex-shrink:0}.igo-actions-expand-container[_ngcontent-%COMP%]{display:inline-flex}mat-list-item[_ngcontent-%COMP%]     .mat-list-item-content .mat-list-text{padding:0}mat-icon.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}mat-list-item.mat-list-item-light[_ngcontent-%COMP%]     .mat-list-item-content{color:#969696}\"], changeDetection: 0 });\nContextItemComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: StorageService }\n];\nContextItemComponent.propDecorators = {\n    context: [{ type: Input }],\n    default: [{ type: Input }],\n    selected: [{ type: Input }],\n    edit: [{ type: Output }],\n    delete: [{ type: Output }],\n    save: [{ type: Output }],\n    clone: [{ type: Output }],\n    hide: [{ type: Output }],\n    show: [{ type: Output }],\n    favorite: [{ type: Output }],\n    managePermissions: [{ type: Output }],\n    manageTools: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextItemComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-item',\n                template: \"<mat-list-item\\n  class=\\\"mat-list-item\\\"\\n  [ngClass]=\\\"{'mat-list-item-light': hidden}\\\">\\n  <button mat-list-avatar\\n    *ngIf=\\\"auth.authenticated\\\"\\n    mat-icon-button\\n    igoStopPropagation\\n    [matTooltip]=\\\"auth.authenticated ? ('igo.context.contextManager.favorite' | translate) : ''\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [color]=\\\"default ? 'primary' : 'default'\\\"\\n    (click)=\\\"favoriteClick(context)\\\">\\n    <mat-icon *ngIf=\\\"!context.iconImage\\\" svgIcon=\\\"{{context.icon ? context.icon : context.scope === 'public' ? 'earth' : 'star'}}\\\"></mat-icon>\\n    <img *ngIf=\\\"context.iconImage\\\" [src]=\\\"context.iconImage\\\">\\n  </button>\\n  <h4 matLine>{{context.title}}</h4>\\n\\n  <div *ngIf=\\\"auth.authenticated\\\"\\n       igoStopPropagation\\n       class=\\\"igo-actions-container\\\">\\n\\n     <button *ngIf=\\\"collapsed && selected && (context.permission === typePermission[typePermission.write] || context.imported)\\\"\\n       mat-icon-button\\n       [matTooltip]=\\\"'igo.context.contextManager.save' | translate\\\"\\n       matTooltipShowDelay=\\\"500\\\"\\n       [color]=\\\"color\\\"\\n       (click)=\\\"save.emit(context)\\\">\\n       <mat-icon svgIcon=\\\"content-save\\\"></mat-icon>\\n     </button>\\n\\n    <div #actions class=\\\"igo-actions-expand-container\\\">\\n\\n      <button *ngIf=\\\"canShare && !context.imported\\\"\\n        mat-icon-button\\n        [matTooltip]=\\\"'igo.context.contextManager.managePermissions' | translate\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        [color]=\\\"color\\\"\\n        (click)=\\\"managePermissions.emit(context)\\\">\\n        <mat-icon svgIcon=\\\"account-arrow-right\\\"></mat-icon>\\n      </button>\\n\\n      <!--button\\n        mat-icon-button\\n        [matTooltip]=\\\"'igo.context.contextManager.manageTools' | translate\\\"\\n        [color]=\\\"color\\\"\\n        (click)=\\\"manageTools.emit(context)\\\">\\n        <mat-icon svgIcon=\\\"widgets\\\"></mat-icon>\\n      </button-->\\n\\n      <button *ngIf=\\\"!context.imported\\\"\\n        mat-icon-button\\n        [matTooltip]=\\\"'igo.context.contextManager.clone' | translate\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        [color]=\\\"color\\\"\\n        (click)=\\\"clone.emit(context)\\\">\\n        <mat-icon svgIcon=\\\"content-copy\\\"></mat-icon>\\n      </button>\\n\\n      <button *ngIf=\\\"context.permission === typePermission[typePermission.write] && !context.imported\\\"\\n        mat-icon-button\\n        [color]=\\\"color\\\"\\n        [matTooltip]=\\\"'igo.context.contextManager.edit' | translate\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"edit.emit(context)\\\">\\n        <mat-icon svgIcon=\\\"pencil\\\"></mat-icon>\\n      </button>\\n\\n      <button *ngIf=\\\"!context.hidden && !context.imported\\\"\\n        mat-icon-button\\n        [color]=\\\"color\\\"\\n        [matTooltip]=\\\"'igo.context.contextManager.hide' | translate\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"hide.emit(context)\\\">\\n        <mat-icon svgIcon=\\\"eye\\\"></mat-icon>\\n      </button>\\n\\n      <button *ngIf=\\\"context.hidden && !context.imported\\\"\\n        mat-icon-button\\n        [color]=\\\"color\\\"\\n        [matTooltip]=\\\"'igo.context.contextManager.show' | translate\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"show.emit(context)\\\">\\n        <mat-icon svgIcon=\\\"eye-off\\\"></mat-icon>\\n      </button>\\n\\n      <button *ngIf=\\\"context.permission === typePermission[typePermission.write] || context.imported\\\"\\n        mat-icon-button\\n        color=\\\"warn\\\"\\n        [matTooltip]=\\\"'igo.context.contextManager.delete' | translate\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"delete.emit(context)\\\">\\n        <mat-icon svgIcon=\\\"delete\\\"></mat-icon>\\n      </button>\\n    </div>\\n\\n    <button\\n      mat-icon-button\\n      igoCollapse\\n      [color]=\\\"color\\\"\\n      [target]=\\\"actions\\\"\\n      [collapsed]=collapsed\\n      (click)=\\\"collapsed = !collapsed\\\">\\n      <mat-icon svgIcon=\\\"dots-horizontal\\\"></mat-icon>\\n    </button>\\n\\n  </div>\\n\\n</mat-list-item>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\":host{overflow:hidden}.igo-actions-container{flex-shrink:0}.igo-actions-expand-container{display:inline-flex}mat-list-item ::ng-deep .mat-list-item-content .mat-list-text{padding:0}mat-icon.disabled{color:rgba(0,0,0,.38)}mat-list-item.mat-list-item-light ::ng-deep .mat-list-item-content{color:#969696}\"]\n            }]\n    }], function () { return [{ type: ɵngcc2.AuthService }, { type: ɵngcc3.StorageService }]; }, { edit: [{\n            type: Output\n        }], delete: [{\n            type: Output\n        }], save: [{\n            type: Output\n        }], clone: [{\n            type: Output\n        }], hide: [{\n            type: Output\n        }], show: [{\n            type: Output\n        }], favorite: [{\n            type: Output\n        }], managePermissions: [{\n            type: Output\n        }], manageTools: [{\n            type: Output\n        }], context: [{\n            type: Input\n        }], default: [{\n            type: Input\n        }], selected: [{\n            type: Input\n        }] }); })();\n\nclass ContextFormComponent {\n    constructor(formBuilder, languageService, messageService) {\n        this.formBuilder = formBuilder;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this._disabled = false;\n        // TODO: replace any by ContextOptions or Context\n        this.submitForm = new EventEmitter();\n        this.clone = new EventEmitter();\n        this.delete = new EventEmitter();\n    }\n    get btnSubmitText() {\n        return this._btnSubmitText;\n    }\n    set btnSubmitText(value) {\n        this._btnSubmitText = value;\n    }\n    get context() {\n        return this._context;\n    }\n    set context(value) {\n        this._context = value;\n        this.buildForm();\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = value;\n    }\n    ngOnInit() {\n        this.buildForm();\n    }\n    handleFormSubmit(value) {\n        let inputs = Object.assign({}, value);\n        inputs = ObjectUtils.removeNull(inputs);\n        inputs.uri = inputs.uri.replace(' ', '');\n        if (inputs.uri) {\n            inputs.uri = this.prefix + '-' + inputs.uri;\n        }\n        else {\n            inputs.uri = this.prefix;\n        }\n        this.submitForm.emit(inputs);\n    }\n    copyTextToClipboard() {\n        const text = this.prefix + '-' + this.form.value.uri.replace(' ', '');\n        const successful = Clipboard.copy(text);\n        if (successful) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.context.contextManager.dialog.copyTitle');\n            const msg = translate.instant('igo.context.contextManager.dialog.copyMsg');\n            this.messageService.success(msg, title);\n        }\n    }\n    buildForm() {\n        const context = this.context || {};\n        const uriSplit = context.uri.split('-');\n        this.prefix = uriSplit.shift();\n        const uri = uriSplit.join('-');\n        this.form = this.formBuilder.group({\n            title: [context.title],\n            uri: [uri || ' ']\n        });\n    }\n}\nContextFormComponent.ɵfac = function ContextFormComponent_Factory(t) { return new (t || ContextFormComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.MessageService)); };\nContextFormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextFormComponent, selectors: [[\"igo-context-form\"]], inputs: { btnSubmitText: \"btnSubmitText\", context: \"context\", disabled: \"disabled\" }, outputs: { submitForm: \"submitForm\", clone: \"clone\", delete: \"delete\" }, decls: 19, vars: 18, consts: [[1, \"igo-form\", 3, \"formGroup\", \"ngSubmit\"], [1, \"full-width\"], [\"matInput\", \"\", \"required\", \"\", \"maxlength\", \"128\", \"formControlName\", \"title\", 3, \"placeholder\"], [\"id\", \"uriInput\", 1, \"full-width\"], [\"class\", \"prefix\", 4, \"ngIf\"], [1, \"fieldWrapper\"], [\"matInput\", \"\", \"maxlength\", \"64\", \"floatLabel\", \"always\", \"formControlName\", \"uri\", 3, \"placeholder\"], [\"id\", \"copyButton\", \"type\", \"button\", \"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"content-copy\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [1, \"prefix\"]], template: function ContextFormComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"form\", 0);\n        ɵngcc0.ɵɵlistener(\"ngSubmit\", function ContextFormComponent_Template_form_ngSubmit_0_listener() { return ctx.handleFormSubmit(ctx.form.value); });\n        ɵngcc0.ɵɵelementStart(1, \"mat-form-field\", 1);\n        ɵngcc0.ɵɵelement(2, \"input\", 2);\n        ɵngcc0.ɵɵpipe(3, \"translate\");\n        ɵngcc0.ɵɵelementStart(4, \"mat-error\");\n        ɵngcc0.ɵɵtext(5);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"mat-form-field\", 3);\n        ɵngcc0.ɵɵtemplate(8, ContextFormComponent_span_8_Template, 2, 1, \"span\", 4);\n        ɵngcc0.ɵɵelementStart(9, \"span\", 5);\n        ɵngcc0.ɵɵelement(10, \"input\", 6);\n        ɵngcc0.ɵɵpipe(11, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(12, \"button\", 7);\n        ɵngcc0.ɵɵlistener(\"click\", function ContextFormComponent_Template_button_click_12_listener() { return ctx.copyTextToClipboard(); });\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelement(14, \"mat-icon\", 8);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(15, \"div\", 9);\n        ɵngcc0.ɵɵelementStart(16, \"button\", 10);\n        ɵngcc0.ɵɵtext(17);\n        ɵngcc0.ɵɵpipe(18, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"formGroup\", ctx.form);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(3, 8, \"igo.context.contextManager.form.title\"));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 10, \"igo.context.contextManager.form.titleRequired\"), \" \");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.prefix);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(11, 12, \"igo.context.contextManager.form.uri\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(13, 14, \"igo.context.contextManager.form.copy\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.form.valid || ctx.disabled);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(18, 16, \"igo.context.contextManager.form.edit\"), \" \");\n    } }, directives: [ɵngcc4.ɵangular_packages_forms_forms_y, ɵngcc4.NgControlStatusGroup, ɵngcc4.FormGroupDirective, ɵngcc9.MatFormField, ɵngcc10.MatInput, ɵngcc4.DefaultValueAccessor, ɵngcc4.RequiredValidator, ɵngcc4.MaxLengthValidator, ɵngcc4.NgControlStatus, ɵngcc4.FormControlName, ɵngcc9.MatError, ɵngcc6.NgIf, ɵngcc7.MatButton, ɵngcc20.MatTooltip, ɵngcc19.MatIcon], pipes: [ɵngcc14.TranslatePipe], styles: [\"form[_ngcontent-%COMP%]{margin:10px}.full-width[_ngcontent-%COMP%]{width:100%}#uriInput[_ngcontent-%COMP%]   .fieldWrapper[_ngcontent-%COMP%]{display:block;overflow:hidden}#uriInput[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{float:left}#copyButton[_ngcontent-%COMP%]{float:right;left:5px;position:relative;top:-58px;width:24px}\"] });\nContextFormComponent.ctorParameters = () => [\n    { type: FormBuilder },\n    { type: LanguageService },\n    { type: MessageService }\n];\nContextFormComponent.propDecorators = {\n    btnSubmitText: [{ type: Input }],\n    context: [{ type: Input }],\n    disabled: [{ type: Input }],\n    submitForm: [{ type: Output }],\n    clone: [{ type: Output }],\n    delete: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextFormComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-form',\n                template: \"<form class=\\\"igo-form\\\" [formGroup]=\\\"form\\\"\\n  (ngSubmit)=\\\"handleFormSubmit(form.value)\\\">\\n\\n  <mat-form-field class=\\\"full-width\\\">\\n    <input matInput required\\n           maxlength=\\\"128\\\"\\n           [placeholder]=\\\"'igo.context.contextManager.form.title' | translate\\\"\\n           formControlName=\\\"title\\\">\\n   <mat-error>\\n    {{ 'igo.context.contextManager.form.titleRequired' | translate }}\\n   </mat-error>\\n  </mat-form-field>\\n\\n  <mat-form-field id=\\\"uriInput\\\" class=\\\"full-width\\\">\\n    <span *ngIf=\\\"prefix\\\" class=\\\"prefix\\\">{{prefix}}-</span>\\n    <span class=\\\"fieldWrapper\\\">\\n      <input matInput\\n           maxlength=\\\"64\\\"\\n           floatLabel = \\\"always\\\"\\n           [placeholder]=\\\"'igo.context.contextManager.form.uri' | translate\\\"\\n           formControlName=\\\"uri\\\">\\n    </span>\\n  </mat-form-field>\\n\\n  <button\\n    id=\\\"copyButton\\\"\\n    type=\\\"button\\\"\\n    mat-icon-button\\n    tooltip-position=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [matTooltip]=\\\"'igo.context.contextManager.form.copy' | translate\\\"\\n    color=\\\"primary\\\"\\n    (click)=\\\"copyTextToClipboard()\\\">\\n    <mat-icon svgIcon=\\\"content-copy\\\"></mat-icon>\\n  </button>\\n\\n  <div class=\\\"igo-form-button-group\\\">\\n    <button\\n      mat-raised-button\\n      type=\\\"submit\\\"\\n      [disabled]=\\\"!form.valid || disabled\\\">\\n      {{ 'igo.context.contextManager.form.edit' | translate }}\\n    </button>\\n  </div>\\n\\n</form>\\n\",\n                styles: [\"form{margin:10px}.full-width{width:100%}#uriInput .fieldWrapper{display:block;overflow:hidden}#uriInput .prefix{float:left}#copyButton{float:right;left:5px;position:relative;top:-58px;width:24px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc4.FormBuilder }, { type: ɵngcc3.LanguageService }, { type: ɵngcc3.MessageService }]; }, { submitForm: [{\n            type: Output\n        }], clone: [{\n            type: Output\n        }], delete: [{\n            type: Output\n        }], btnSubmitText: [{\n            type: Input\n        }], context: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }] }); })();\n\nclass ContextEditComponent {\n    constructor(cd) {\n        this.cd = cd;\n        this.submitForm = new EventEmitter();\n    }\n    get context() {\n        return this._context;\n    }\n    set context(value) {\n        this._context = value;\n        this.refresh();\n    }\n    refresh() {\n        this.cd.detectChanges();\n    }\n}\nContextEditComponent.ɵfac = function ContextEditComponent_Factory(t) { return new (t || ContextEditComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nContextEditComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextEditComponent, selectors: [[\"igo-context-edit\"]], inputs: { context: \"context\" }, outputs: { submitForm: \"submitForm\" }, decls: 1, vars: 1, consts: [[3, \"btnSubmitText\", \"context\", \"submitForm\", 4, \"ngIf\"], [3, \"btnSubmitText\", \"context\", \"submitForm\"]], template: function ContextEditComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ContextEditComponent_igo_context_form_0_Template, 2, 4, \"igo-context-form\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.context);\n    } }, directives: [ɵngcc6.NgIf, ContextFormComponent], pipes: [ɵngcc14.TranslatePipe], encapsulation: 2 });\nContextEditComponent.ctorParameters = () => [\n    { type: ChangeDetectorRef }\n];\nContextEditComponent.propDecorators = {\n    context: [{ type: Input }],\n    submitForm: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextEditComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-edit',\n                template: \"<igo-context-form *ngIf=\\\"context\\\"\\n   [btnSubmitText]=\\\"'igo.context.contextManager.save' | translate\\\"\\n   [context]=\\\"context\\\"\\n   (submitForm)=\\\"submitForm.emit($event)\\\">\\n</igo-context-form>\\n\"\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }]; }, { submitForm: [{\n            type: Output\n        }], context: [{\n            type: Input\n        }] }); })();\n\nclass ContextEditBindingDirective {\n    constructor(component, contextService, messageService, languageService) {\n        this.contextService = contextService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.submitSuccessed = new EventEmitter();\n        this.component = component;\n    }\n    onEdit(context) {\n        const id = this.component.context.id;\n        this.contextService.update(id, context).subscribe(() => {\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.contextManager.dialog.saveMsg', {\n                value: context.title || this.component.context.title\n            });\n            const title = translate.instant('igo.context.contextManager.dialog.saveTitle');\n            this.messageService.success(message, title);\n            this.contextService.setEditedContext(undefined);\n            this.submitSuccessed.emit(context);\n        });\n    }\n    ngOnInit() {\n        this.editedContext$$ = this.contextService.editedContext$.subscribe(context => this.handleEditedContextChange(context));\n    }\n    ngOnDestroy() {\n        this.editedContext$$.unsubscribe();\n    }\n    handleEditedContextChange(context) {\n        this.component.context = context;\n    }\n}\nContextEditBindingDirective.ɵfac = function ContextEditBindingDirective_Factory(t) { return new (t || ContextEditBindingDirective)(ɵngcc0.ɵɵdirectiveInject(ContextEditComponent, 2), ɵngcc0.ɵɵdirectiveInject(ContextService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.MessageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LanguageService)); };\nContextEditBindingDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ContextEditBindingDirective, selectors: [[\"\", \"igoContextEditBinding\", \"\"]], hostBindings: function ContextEditBindingDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"submitForm\", function ContextEditBindingDirective_submitForm_HostBindingHandler($event) { return ctx.onEdit($event); });\n    } }, outputs: { submitSuccessed: \"submitSuccessed\" } });\nContextEditBindingDirective.ctorParameters = () => [\n    { type: ContextEditComponent, decorators: [{ type: Self }] },\n    { type: ContextService },\n    { type: MessageService },\n    { type: LanguageService }\n];\nContextEditBindingDirective.propDecorators = {\n    submitSuccessed: [{ type: Output }],\n    onEdit: [{ type: HostListener, args: ['submitForm', ['$event'],] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextEditBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoContextEditBinding]'\n            }]\n    }], function () { return [{ type: ContextEditComponent, decorators: [{\n                type: Self\n            }] }, { type: ContextService }, { type: ɵngcc3.MessageService }, { type: ɵngcc3.LanguageService }]; }, { submitSuccessed: [{\n            type: Output\n        }], onEdit: [{\n            type: HostListener,\n            args: ['submitForm', ['$event']]\n        }] }); })();\n\nclass ContextPermissionsComponent {\n    constructor(formBuilder, cd, http, authService) {\n        this.formBuilder = formBuilder;\n        this.cd = cd;\n        this.http = http;\n        this.authService = authService;\n        this._profils = [];\n        this.baseUrlProfils = '/apis/igo2/profils-users?';\n        this.formControl = new FormControl();\n        this.addPermission = new EventEmitter();\n        this.removePermission = new EventEmitter();\n        this.scopeChanged = new EventEmitter();\n    }\n    get context() {\n        return this._context;\n    }\n    set context(value) {\n        this._context = value;\n        this.cd.detectChanges();\n    }\n    get permissions() {\n        return this._permissions;\n    }\n    set permissions(value) {\n        this._permissions = value;\n        this.cd.detectChanges();\n    }\n    get profils() {\n        return this._profils;\n    }\n    set profils(value) {\n        this._profils = value;\n        this.cd.detectChanges();\n    }\n    get canWrite() {\n        return this.context.permission === TypePermission[TypePermission.write];\n    }\n    ngOnInit() {\n        this.buildForm();\n        this.formValueChanges$$ = this.formControl.valueChanges.subscribe((value) => {\n            if (value.length) {\n                this.http.get(this.baseUrlProfils + 'q=' + value).subscribe(profils => {\n                    this.profils = profils;\n                });\n                this.profils.filter((profil) => {\n                    const filterNormalized = value.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    const profilTitleNormalized = profil.title.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    const profilNameNormalized = profil.name.toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n                    const profilNormalized = profilNameNormalized + profilTitleNormalized;\n                    return profilNormalized.includes(filterNormalized);\n                });\n            }\n            else {\n                this.profils = [];\n            }\n        });\n    }\n    displayFn(profil) {\n        return profil ? profil.title : undefined;\n    }\n    handleFormSubmit(value) {\n        this.addPermission.emit(value);\n    }\n    buildForm() {\n        this.form = this.formBuilder.group({\n            profil: [],\n            typePermission: ['read']\n        });\n    }\n    onProfilSelected(value) {\n        this.form.setValue({\n            profil: value.name,\n            typePermission: this.form.value.typePermission\n        });\n    }\n}\nContextPermissionsComponent.ɵfac = function ContextPermissionsComponent_Factory(t) { return new (t || ContextPermissionsComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.HttpClient), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AuthService)); };\nContextPermissionsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextPermissionsComponent, selectors: [[\"igo-context-permissions\"]], inputs: { context: \"context\", permissions: \"permissions\" }, outputs: { addPermission: \"addPermission\", removePermission: \"removePermission\", scopeChanged: \"scopeChanged\" }, decls: 1, vars: 1, consts: [[4, \"ngIf\"], [\"class\", \"scopeForm\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [1, \"scopeForm\"], [3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"private\"], [\"value\", \"protected\"], [\"value\", \"public\", 4, \"ngIf\"], [\"value\", \"public\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"full-width\"], [\"matInput\", \"\", \"required\", \"\", 3, \"placeholder\", \"formControl\", \"matAutocomplete\"], [3, \"displayWith\", \"optionSelected\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"typePermission\"], [\"value\", \"read\"], [\"value\", \"write\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [3, \"value\"], [1, \"mat-typography\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"title\", 4, \"ngIf\"], [3, \"title\"], [\"mat-list-avatar\", \"\", \"svgIcon\", \"account-outline\"], [\"mat-line\", \"\"], [\"igoStopPropagation\", \"\", 1, \"igo-actions-container\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"matTooltipShowDelay\", \"500\", \"color\", \"warn\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"delete\"]], template: function ContextPermissionsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, ContextPermissionsComponent_div_0_Template, 5, 4, \"div\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.context);\n    } }, directives: [ɵngcc6.NgIf, ɵngcc22.MatRadioGroup, ɵngcc4.NgControlStatus, ɵngcc4.NgModel, ɵngcc22.MatRadioButton, ɵngcc4.ɵangular_packages_forms_forms_y, ɵngcc4.NgControlStatusGroup, ɵngcc4.FormGroupDirective, ɵngcc9.MatFormField, ɵngcc10.MatInput, ɵngcc4.DefaultValueAccessor, ɵngcc23.MatAutocompleteTrigger, ɵngcc4.RequiredValidator, ɵngcc4.FormControlDirective, ɵngcc23.MatAutocomplete, ɵngcc6.NgForOf, ɵngcc9.MatError, ɵngcc4.FormControlName, ɵngcc7.MatButton, ɵngcc12.MatOption, ɵngcc8.ListComponent, ɵngcc8.CollapsibleComponent, ɵngcc21.MatListItem, ɵngcc19.MatIcon, ɵngcc21.MatListAvatarCssMatStyler, ɵngcc12.MatLine, ɵngcc8.StopPropagationDirective, ɵngcc20.MatTooltip], pipes: [ɵngcc14.TranslatePipe, ɵngcc8.KeyValuePipe], styles: [\"[_nghost-%COMP%]{margin:10px}.full-width[_ngcontent-%COMP%]{width:100%}mat-radio-button[_ngcontent-%COMP%]{padding:14px 14px 14px 0}.scopeForm[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{padding:5px}mat-option[_ngcontent-%COMP%]     .mat-option-text{line-height:normal}\"] });\nContextPermissionsComponent.ctorParameters = () => [\n    { type: FormBuilder },\n    { type: ChangeDetectorRef },\n    { type: HttpClient },\n    { type: AuthService }\n];\nContextPermissionsComponent.propDecorators = {\n    context: [{ type: Input }],\n    permissions: [{ type: Input }],\n    addPermission: [{ type: Output }],\n    removePermission: [{ type: Output }],\n    scopeChanged: [{ type: Output }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextPermissionsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-permissions',\n                template: \"<div *ngIf=\\\"context\\\">\\n\\n  <div *ngIf=\\\"!canWrite\\\" class=\\\"scopeForm\\\">\\n    <h4>{{ 'igo.context.permission.readOnlyTitle' | translate }}</h4>\\n    <p>{{ 'igo.context.permission.readOnlyMsg' | translate }}</p>\\n  </div>\\n\\n  <div *ngIf=\\\"canWrite\\\" class=\\\"scopeForm\\\">\\n    <mat-radio-group [(ngModel)]=\\\"context.scope\\\"\\n                    (change)=\\\"scopeChanged.emit(context)\\\">\\n      <mat-radio-button value=\\\"private\\\">\\n        {{ 'igo.context.permission.scope.private' | translate }}\\n      </mat-radio-button>\\n      <mat-radio-button value=\\\"protected\\\">\\n        {{ 'igo.context.permission.scope.shared' | translate }}\\n      </mat-radio-button>\\n      <mat-radio-button *ngIf=\\\"authService.isAdmin\\\" value=\\\"public\\\">\\n        {{ 'igo.context.permission.scope.public' | translate }}\\n      </mat-radio-button>\\n    </mat-radio-group>\\n  </div>\\n\\n  <form *ngIf=\\\"context.scope !== 'private' && canWrite\\\" [formGroup]=\\\"form\\\"\\n    (ngSubmit)=\\\"handleFormSubmit(form.value)\\\">\\n\\n    <mat-form-field class=\\\"full-width\\\">\\n      <input matInput required\\n             [placeholder]=\\\"'igo.context.permission.user' | translate\\\"\\n             [formControl]=\\\"formControl\\\"\\n             [matAutocomplete]=\\\"auto\\\">\\n      <mat-autocomplete #auto=\\\"matAutocomplete\\\" (optionSelected)=\\\"onProfilSelected($event.option.value)\\\"\\n        [displayWith]=\\\"displayFn\\\">\\n          <mat-option *ngFor=\\\"let profil of this.profils\\\" [value]=\\\"profil\\\">\\n              {{profil.title}}<br>\\n              <small class=\\\"mat-typography\\\">{{profil.name}}</small>\\n          </mat-option>\\n      </mat-autocomplete>\\n     <mat-error>\\n       {{ 'igo.context.permission.profilRequired' | translate }}\\n     </mat-error>\\n    </mat-form-field>\\n\\n\\n    <mat-radio-group formControlName=\\\"typePermission\\\">\\n      <mat-radio-button value=\\\"read\\\">\\n        {{ 'igo.context.permission.read' | translate }}\\n      </mat-radio-button>\\n      <mat-radio-button value=\\\"write\\\">\\n        {{ 'igo.context.permission.write' | translate }}\\n      </mat-radio-button>\\n    </mat-radio-group>\\n\\n\\n    <div class=\\\"igo-form-button-group\\\">\\n      <button\\n        mat-raised-button\\n        type=\\\"submit\\\"\\n        [disabled]=\\\"!form.valid\\\">\\n        {{ 'igo.context.permission.addBtn' | translate }}\\n      </button>\\n    </div>\\n\\n  </form>\\n\\n  <igo-list *ngIf=\\\"permissions && context.scope !== 'private'\\\">\\n    <ng-template ngFor let-groupPermissions [ngForOf]=\\\"permissions | keyvalue\\\">\\n      <igo-collapsible\\n        *ngIf=\\\"groupPermissions.value.length\\\"\\n        [title]=\\\"'igo.context.permission.' + groupPermissions.key | translate\\\">\\n\\n        <ng-template ngFor let-permission [ngForOf]=\\\"groupPermissions.value\\\">\\n          <mat-list-item>\\n            <mat-icon mat-list-avatar svgIcon=\\\"account-outline\\\"></mat-icon>\\n            <h4 mat-line>{{permission.profilTitle}} <small class=\\\"mat-typography\\\">{{permission.profil}}</small></h4>\\n\\n            <div igoStopPropagation\\n                 class=\\\"igo-actions-container\\\">\\n\\n               <button *ngIf=\\\"canWrite || permission.profil === authService.decodeToken().user.sourceId\\\"\\n                 mat-icon-button\\n                 [matTooltip]=\\\"'igo.context.permission.delete' | translate\\\"\\n                 matTooltipShowDelay=\\\"500\\\"\\n                 color=\\\"warn\\\"\\n                 (click)=\\\"removePermission.emit(permission)\\\">\\n                 <mat-icon svgIcon=\\\"delete\\\"></mat-icon>\\n               </button>\\n            </div>\\n\\n          </mat-list-item>\\n        </ng-template>\\n      </igo-collapsible>\\n    </ng-template>\\n  </igo-list>\\n\\n</div>\\n\",\n                styles: [\":host{margin:10px}.full-width{width:100%}mat-radio-button{padding:14px 14px 14px 0}.scopeForm,form{padding:5px}mat-option ::ng-deep .mat-option-text{line-height:normal}\"]\n            }]\n    }], function () { return [{ type: ɵngcc4.FormBuilder }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc1.HttpClient }, { type: ɵngcc2.AuthService }]; }, { addPermission: [{\n            type: Output\n        }], removePermission: [{\n            type: Output\n        }], scopeChanged: [{\n            type: Output\n        }], context: [{\n            type: Input\n        }], permissions: [{\n            type: Input\n        }] }); })();\n\nclass ContextPermissionsBindingDirective {\n    constructor(component, contextService, languageService, messageService, cd) {\n        this.contextService = contextService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.cd = cd;\n        this.component = component;\n    }\n    onAddPermission(permission) {\n        const translate = this.languageService.translate;\n        if (!permission.profil) {\n            const message = translate.instant('igo.context.contextManager.errors.addPermissionEmpty');\n            const title = translate.instant('igo.context.contextManager.errors.addPermissionTitle');\n            this.messageService.error(message, title);\n            return;\n        }\n        const contextId = this.component.context.id;\n        this.contextService\n            .addPermissionAssociation(contextId, permission.profil, permission.typePermission)\n            .subscribe(profils => {\n            for (const p of profils) {\n                this.component.permissions[permission.typePermission].push(p);\n            }\n            const profil = permission.profil;\n            const message = translate.instant('igo.context.permission.dialog.addMsg', {\n                value: profil\n            });\n            const title = translate.instant('igo.context.permission.dialog.addTitle');\n            this.messageService.success(message, title);\n            this.cd.detectChanges();\n        });\n    }\n    onRemovePermission(permission) {\n        const contextId = this.component.context.id;\n        this.contextService\n            .deletePermissionAssociation(contextId, permission.id)\n            .subscribe(() => {\n            const index = this.component.permissions[permission.typePermission].findIndex(p => {\n                return p.id === permission.id;\n            });\n            this.component.permissions[permission.typePermission].splice(index, 1);\n            const profil = permission.profil;\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.permission.dialog.deleteMsg', {\n                value: profil\n            });\n            const title = translate.instant('igo.context.permission.dialog.deleteTitle');\n            this.messageService.success(message, title);\n            this.cd.detectChanges();\n        });\n    }\n    onScopeChanged(context) {\n        const scope = context.scope;\n        this.contextService.update(context.id, { scope }).subscribe(() => {\n            const translate = this.languageService.translate;\n            const message = translate.instant('igo.context.permission.dialog.scopeChangedMsg', {\n                value: translate.instant('igo.context.permission.scope.' + scope)\n            });\n            const title = translate.instant('igo.context.permission.dialog.scopeChangedTitle');\n            this.messageService.success(message, title);\n        });\n    }\n    ngOnInit() {\n        this.editedContext$$ = this.contextService.editedContext$.subscribe(context => this.handleEditedContextChange(context));\n    }\n    ngOnDestroy() {\n        this.editedContext$$.unsubscribe();\n        this.contextService.editedContext$.next(undefined);\n    }\n    handleEditedContextChange(context) {\n        this.component.context = context;\n        if (context) {\n            this.contextService\n                .getPermissions(context.id)\n                .subscribe(permissionsArray => {\n                permissionsArray = permissionsArray || [];\n                const permissions = {\n                    read: permissionsArray.filter(p => {\n                        return p.typePermission.toString() === 'read';\n                    }),\n                    write: permissionsArray.filter(p => {\n                        return p.typePermission.toString() === 'write';\n                    })\n                };\n                return (this.component.permissions = permissions);\n            });\n        }\n    }\n}\nContextPermissionsBindingDirective.ɵfac = function ContextPermissionsBindingDirective_Factory(t) { return new (t || ContextPermissionsBindingDirective)(ɵngcc0.ɵɵdirectiveInject(ContextPermissionsComponent, 2), ɵngcc0.ɵɵdirectiveInject(ContextService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.MessageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nContextPermissionsBindingDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: ContextPermissionsBindingDirective, selectors: [[\"\", \"igoContextPermissionsBinding\", \"\"]], hostBindings: function ContextPermissionsBindingDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"addPermission\", function ContextPermissionsBindingDirective_addPermission_HostBindingHandler($event) { return ctx.onAddPermission($event); })(\"removePermission\", function ContextPermissionsBindingDirective_removePermission_HostBindingHandler($event) { return ctx.onRemovePermission($event); })(\"scopeChanged\", function ContextPermissionsBindingDirective_scopeChanged_HostBindingHandler($event) { return ctx.onScopeChanged($event); });\n    } } });\nContextPermissionsBindingDirective.ctorParameters = () => [\n    { type: ContextPermissionsComponent, decorators: [{ type: Self }] },\n    { type: ContextService },\n    { type: LanguageService },\n    { type: MessageService },\n    { type: ChangeDetectorRef }\n];\nContextPermissionsBindingDirective.propDecorators = {\n    onAddPermission: [{ type: HostListener, args: ['addPermission', ['$event'],] }],\n    onRemovePermission: [{ type: HostListener, args: ['removePermission', ['$event'],] }],\n    onScopeChanged: [{ type: HostListener, args: ['scopeChanged', ['$event'],] }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextPermissionsBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoContextPermissionsBinding]'\n            }]\n    }], function () { return [{ type: ContextPermissionsComponent, decorators: [{\n                type: Self\n            }] }, { type: ContextService }, { type: ɵngcc3.LanguageService }, { type: ɵngcc3.MessageService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { onAddPermission: [{\n            type: HostListener,\n            args: ['addPermission', ['$event']]\n        }], onRemovePermission: [{\n            type: HostListener,\n            args: ['removePermission', ['$event']]\n        }], onScopeChanged: [{\n            type: HostListener,\n            args: ['scopeChanged', ['$event']]\n        }] }); })();\n\nclass BookmarkButtonComponent {\n    constructor(dialog, contextService, languageService, messageService) {\n        this.dialog = dialog;\n        this.contextService = contextService;\n        this.languageService = languageService;\n        this.messageService = messageService;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    createContext() {\n        this.dialog\n            .open(BookmarkDialogComponent, { disableClose: false })\n            .afterClosed()\n            .subscribe(title => {\n            if (title) {\n                const context = this.contextService.getContextFromMap(this.map);\n                context.title = title;\n                this.contextService.create(context).subscribe(() => {\n                    const translate = this.languageService.translate;\n                    const titleD = translate.instant('igo.context.bookmarkButton.dialog.createTitle');\n                    const message = translate.instant('igo.context.bookmarkButton.dialog.createMsg', {\n                        value: context.title\n                    });\n                    this.messageService.success(message, titleD);\n                    this.contextService.loadContext(context.uri);\n                });\n            }\n        });\n    }\n}\nBookmarkButtonComponent.ɵfac = function BookmarkButtonComponent_Factory(t) { return new (t || BookmarkButtonComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc16.MatDialog), ɵngcc0.ɵɵdirectiveInject(ContextService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.MessageService)); };\nBookmarkButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: BookmarkButtonComponent, selectors: [[\"igo-bookmark-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 4, vars: 4, consts: [[1, \"igo-bookmark-button-container\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"above\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"star\"]], template: function BookmarkButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"button\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function BookmarkButtonComponent_Template_button_click_1_listener() { return ctx.createContext(); });\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelement(3, \"mat-icon\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(2, 2, \"igo.context.bookmarkButton.create\"))(\"color\", ctx.color);\n    } }, directives: [ɵngcc7.MatButton, ɵngcc20.MatTooltip, ɵngcc19.MatIcon], pipes: [ɵngcc14.TranslatePipe], styles: [\".igo-bookmark-button-container[_ngcontent-%COMP%]{width:40px}.igo-bookmark-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}.igo-bookmark-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#efefef}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"] });\nBookmarkButtonComponent.ctorParameters = () => [\n    { type: MatDialog },\n    { type: ContextService },\n    { type: LanguageService },\n    { type: MessageService }\n];\nBookmarkButtonComponent.propDecorators = {\n    map: [{ type: Input }],\n    color: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(BookmarkButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-bookmark-button',\n                template: \"<div class=\\\"igo-bookmark-button-container\\\">\\n  <button\\n    mat-icon-button\\n    [matTooltip]=\\\"'igo.context.bookmarkButton.create' | translate\\\"\\n    matTooltipPosition=\\\"above\\\"\\n    [color]=\\\"color\\\"\\n    (click)=\\\"createContext()\\\">\\n    <mat-icon svgIcon=\\\"star\\\"></mat-icon>\\n  </button>\\n</div>\\n\",\n                styles: [\".igo-bookmark-button-container{width:40px}.igo-bookmark-button-container button{background-color:#fff}.igo-bookmark-button-container button:hover{background-color:#efefef}:host ::ng-deep button .mat-button-ripple-round,button{border-radius:0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc16.MatDialog }, { type: ContextService }, { type: ɵngcc3.LanguageService }, { type: ɵngcc3.MessageService }]; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass PoiService {\n    constructor(http, config) {\n        this.http = http;\n        this.config = config;\n        this.baseUrl = this.config.getConfig('context.url');\n    }\n    get() {\n        if (!this.baseUrl) {\n            return EMPTY;\n        }\n        const url = this.baseUrl + '/pois';\n        return this.http.get(url);\n    }\n    delete(id) {\n        const url = this.baseUrl + '/pois/' + id;\n        return this.http.delete(url);\n    }\n    create(context) {\n        const url = this.baseUrl + '/pois';\n        return this.http.post(url, JSON.stringify(context));\n    }\n}\nPoiService.ɵfac = function PoiService_Factory(t) { return new (t || PoiService)(ɵngcc0.ɵɵinject(ɵngcc1.HttpClient), ɵngcc0.ɵɵinject(ɵngcc3.ConfigService)); };\nPoiService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: PoiService, factory: PoiService.ɵfac });\nPoiService.ctorParameters = () => [\n    { type: HttpClient },\n    { type: ConfigService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PoiService, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc1.HttpClient }, { type: ɵngcc3.ConfigService }]; }, null); })();\n\nclass PoiDialogComponent {\n    constructor(dialogRef) {\n        this.dialogRef = dialogRef;\n    }\n}\nPoiDialogComponent.ɵfac = function PoiDialogComponent_Factory(t) { return new (t || PoiDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc16.MatDialogRef)); };\nPoiDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PoiDialogComponent, selectors: [[\"igo-poi-dialog\"]], decls: 14, vars: 14, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\"], [\"matInput\", \"\", \"required\", \"\", \"autocomplete\", \"off\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [\"mat-dialog-actions\", \"\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", 3, \"click\"]], template: function PoiDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"h1\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(4, \"mat-form-field\");\n        ɵngcc0.ɵɵelementStart(5, \"input\", 2);\n        ɵngcc0.ɵɵlistener(\"ngModelChange\", function PoiDialogComponent_Template_input_ngModelChange_5_listener($event) { return ctx.title = $event; });\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(8, \"button\", 4);\n        ɵngcc0.ɵɵlistener(\"click\", function PoiDialogComponent_Template_button_click_8_listener() { return ctx.dialogRef.close(ctx.title); });\n        ɵngcc0.ɵɵtext(9);\n        ɵngcc0.ɵɵpipe(10, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(11, \"button\", 5);\n        ɵngcc0.ɵɵlistener(\"click\", function PoiDialogComponent_Template_button_click_11_listener() { return ctx.dialogRef.close(false); });\n        ɵngcc0.ɵɵtext(12);\n        ɵngcc0.ɵɵpipe(13, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 6, \"igo.context.poiButton.dialog.title\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(6, 8, \"igo.context.poiButton.dialog.placeholder\"))(\"ngModel\", ctx.title);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"disabled\", !ctx.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(10, 10, \"igo.common.confirmDialog.confirmBtn\"), \" \");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(13, 12, \"igo.common.confirmDialog.cancelBtn\"), \" \");\n    } }, directives: [ɵngcc16.MatDialogTitle, ɵngcc16.MatDialogContent, ɵngcc9.MatFormField, ɵngcc10.MatInput, ɵngcc4.DefaultValueAccessor, ɵngcc4.RequiredValidator, ɵngcc4.NgControlStatus, ɵngcc4.NgModel, ɵngcc16.MatDialogActions, ɵngcc7.MatButton], pipes: [ɵngcc14.TranslatePipe], encapsulation: 2 });\nPoiDialogComponent.ctorParameters = () => [\n    { type: MatDialogRef }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PoiDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-poi-dialog',\n                template: \"<h1 mat-dialog-title class=\\\"mat-typography\\\">{{ 'igo.context.poiButton.dialog.title' | translate }}</h1>\\n<div mat-dialog-content>\\n  <mat-form-field>\\n    <input matInput required autocomplete=\\\"off\\\"\\n      [placeholder]=\\\"'igo.context.poiButton.dialog.placeholder' | translate\\\"\\n      [(ngModel)]=\\\"title\\\">\\n  </mat-form-field>\\n</div>\\n<div mat-dialog-actions>\\n  <button mat-button color=\\\"primary\\\"\\n         [disabled]=\\\"!title\\\"\\n         (click)=\\\"dialogRef.close(title)\\\">\\n    {{'igo.common.confirmDialog.confirmBtn' | translate}}\\n  </button>\\n  <button mat-button\\n          (click)=\\\"dialogRef.close(false)\\\">\\n    {{'igo.common.confirmDialog.cancelBtn' |\\u00A0translate}}\\n  </button>\\n</div>\\n\"\n            }]\n    }], function () { return [{ type: ɵngcc16.MatDialogRef }]; }, null); })();\n\nclass PoiButtonComponent {\n    constructor(dialog, authService, poiService, messageService, languageService, confirmDialogService) {\n        this.dialog = dialog;\n        this.authService = authService;\n        this.poiService = poiService;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.confirmDialogService = confirmDialogService;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    ngOnInit() {\n        this.authenticate$$ = this.authService.authenticate$.subscribe(auth => {\n            if (auth) {\n                this.getPois();\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.authenticate$$.unsubscribe();\n    }\n    deletePoi(poi) {\n        if (poi && poi.id) {\n            const translate = this.languageService.translate;\n            this.confirmDialogService\n                .open(translate.instant('igo.context.poiButton.dialog.confirmDelete'))\n                .subscribe(confirm => {\n                if (confirm) {\n                    this.poiService.delete(poi.id).subscribe(() => {\n                        const title = translate.instant('igo.context.poiButton.dialog.deleteTitle');\n                        const message = translate.instant('igo.context.poiButton.dialog.deleteMsg', {\n                            value: poi.title\n                        });\n                        this.messageService.info(message, title);\n                        this.pois = this.pois.filter(p => p.id !== poi.id);\n                    }, err => {\n                        err.error.title = 'DELETE Pois';\n                        this.messageService.showError(err);\n                    });\n                }\n            });\n        }\n    }\n    getPois() {\n        this.poiService.get().subscribe(rep => {\n            this.pois = rep;\n        }, err => {\n            err.error.title = 'GET Pois';\n            this.messageService.showError(err);\n        });\n    }\n    createPoi() {\n        const view = this.map.ol.getView();\n        const proj = view.getProjection().getCode();\n        const center = new olPoint(view.getCenter()).transform(proj, 'EPSG:4326');\n        const poi = {\n            title: '',\n            x: center.getCoordinates()[0],\n            y: center.getCoordinates()[1],\n            zoom: view.getZoom()\n        };\n        this.dialog\n            .open(PoiDialogComponent, { disableClose: false })\n            .afterClosed()\n            .subscribe(title => {\n            if (title) {\n                poi.title = title;\n                this.poiService.create(poi).subscribe(newPoi => {\n                    const translate = this.languageService.translate;\n                    const titleD = translate.instant('igo.context.poiButton.dialog.createTitle');\n                    const message = translate.instant('igo.context.poiButton.dialog.createMsg', {\n                        value: poi.title\n                    });\n                    this.messageService.success(message, titleD);\n                    poi.id = newPoi.id;\n                    this.pois.push(poi);\n                }, err => {\n                    err.error.title = 'POST Pois';\n                    this.messageService.showError(err);\n                });\n            }\n        });\n    }\n    zoomOnPoi(id) {\n        const poi = this.pois.find(p => p.id === id);\n        const center = fromLonLat([Number(poi.x), Number(poi.y)], this.map.projection);\n        this.map.ol.getView().animate({\n            center,\n            zoom: poi.zoom,\n            duration: 500,\n            easing: easeOut\n        });\n    }\n}\nPoiButtonComponent.ɵfac = function PoiButtonComponent_Factory(t) { return new (t || PoiButtonComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc16.MatDialog), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AuthService), ɵngcc0.ɵɵdirectiveInject(PoiService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.MessageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc8.ConfirmDialogService)); };\nPoiButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PoiButtonComponent, selectors: [[\"igo-poi-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 9, vars: 7, consts: [[\"floatPlaceholder\", \"never\", 3, \"placeholder\"], [3, \"click\"], [1, \"titlePoi\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", \"color\", \"primary\", 1, \"addPoi\", \"buttonPoi\", 3, \"click\"], [\"svgIcon\", \"plus-circle\"], [3, \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\", \"click\"], [\"igoStopPropagation\", \"\", \"mat-icon-button\", \"\", \"color\", \"warn\", 1, \"deletePoi\", \"buttonPoi\", 3, \"click\"], [\"svgIcon\", \"delete\"]], template: function PoiButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-select\", 0);\n        ɵngcc0.ɵɵpipe(1, \"translate\");\n        ɵngcc0.ɵɵelementStart(2, \"mat-option\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function PoiButtonComponent_Template_mat_option_click_2_listener() { return ctx.createPoi(); });\n        ɵngcc0.ɵɵelementStart(3, \"div\", 2);\n        ɵngcc0.ɵɵtext(4);\n        ɵngcc0.ɵɵpipe(5, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"button\", 3);\n        ɵngcc0.ɵɵlistener(\"click\", function PoiButtonComponent_Template_button_click_6_listener() { return ctx.createPoi(); });\n        ɵngcc0.ɵɵelement(7, \"mat-icon\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(8, PoiButtonComponent_mat_option_8_Template, 5, 2, \"mat-option\", 5);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"placeholder\", ɵngcc0.ɵɵpipeBind1(1, 3, \"igo.context.poiButton.placeholder\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 5, \"igo.context.poiButton.create\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.pois);\n    } }, directives: [ɵngcc11.MatSelect, ɵngcc12.MatOption, ɵngcc7.MatButton, ɵngcc8.StopPropagationDirective, ɵngcc19.MatIcon, ɵngcc6.NgForOf], pipes: [ɵngcc14.TranslatePipe], styles: [\"mat-select[_ngcontent-%COMP%]{background-color:#fff;padding-top:0;width:150px}mat-select[_ngcontent-%COMP%], mat-select[_ngcontent-%COMP%]     .mat-select-trigger{height:40px}mat-select[_ngcontent-%COMP%]     .mat-select-placeholder, mat-select[_ngcontent-%COMP%]     .mat-select-value-text{padding:5px;position:relative;top:12px}.mat-option[_ngcontent-%COMP%]{text-overflow:inherit}.titlePoi[_ngcontent-%COMP%]{float:left;max-width:135px;overflow:hidden;text-overflow:ellipsis}.buttonPoi[_ngcontent-%COMP%]{float:right;margin:4px -10px 4px 0}.buttonPoi[_ngcontent-%COMP%]     .mat-icon{margin:0 8px}\"] });\nPoiButtonComponent.ctorParameters = () => [\n    { type: MatDialog },\n    { type: AuthService },\n    { type: PoiService },\n    { type: MessageService },\n    { type: LanguageService },\n    { type: ConfirmDialogService }\n];\nPoiButtonComponent.propDecorators = {\n    map: [{ type: Input }],\n    color: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PoiButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-poi-button',\n                template: \"<mat-select [placeholder]=\\\"'igo.context.poiButton.placeholder' |\\u00A0translate\\\"\\n           floatPlaceholder=\\\"never\\\">\\n\\n  <mat-option (click)=\\\"createPoi()\\\">\\n    <div class=\\\"titlePoi\\\">{{ 'igo.context.poiButton.create' |\\u00A0translate }}</div>\\n    <button igoStopPropagation class=\\\"addPoi buttonPoi\\\"\\n      mat-icon-button\\n      color=\\\"primary\\\"\\n      (click)=\\\"createPoi()\\\">\\n      <mat-icon svgIcon=\\\"plus-circle\\\"></mat-icon>\\n    </button>\\n  </mat-option>\\n  <mat-option *ngFor=\\\"let poi of pois\\\" [value]=\\\"poi.id\\\" (click)=\\\"zoomOnPoi(poi.id)\\\">\\n    <div class=\\\"titlePoi\\\">{{ poi.title }}</div>\\n    <button igoStopPropagation class=\\\"deletePoi buttonPoi\\\"\\n      mat-icon-button\\n      color=\\\"warn\\\"\\n      (click)=\\\"deletePoi(poi)\\\">\\n      <mat-icon svgIcon=\\\"delete\\\"></mat-icon>\\n    </button>\\n  </mat-option>\\n</mat-select>\\n\",\n                styles: [\"mat-select{background-color:#fff;padding-top:0;width:150px}mat-select,mat-select ::ng-deep .mat-select-trigger{height:40px}mat-select ::ng-deep .mat-select-placeholder,mat-select ::ng-deep .mat-select-value-text{padding:5px;position:relative;top:12px}.mat-option{text-overflow:inherit}.titlePoi{float:left;max-width:135px;overflow:hidden;text-overflow:ellipsis}.buttonPoi{float:right;margin:4px -10px 4px 0}.buttonPoi ::ng-deep .mat-icon{margin:0 8px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc16.MatDialog }, { type: ɵngcc2.AuthService }, { type: PoiService }, { type: ɵngcc3.MessageService }, { type: ɵngcc3.LanguageService }, { type: ɵngcc8.ConfirmDialogService }]; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass UserDialogComponent {\n    constructor(dialogRef, auth) {\n        this.dialogRef = dialogRef;\n        this.auth = auth;\n        const decodeToken = this.auth.decodeToken();\n        this.user = decodeToken.user;\n        this.exp = new Date(decodeToken.exp * 1000).toLocaleString();\n    }\n}\nUserDialogComponent.ɵfac = function UserDialogComponent_Factory(t) { return new (t || UserDialogComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc16.MatDialogRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AuthService)); };\nUserDialogComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: UserDialogComponent, selectors: [[\"igo-user-dialog\"]], decls: 16, vars: 15, consts: [[\"mat-dialog-title\", \"\", 1, \"mat-typography\"], [\"mat-dialog-content\", \"\", 1, \"mat-typography\"], [\"mat-dialog-actions\", \"\", 2, \"justify-content\", \"center\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"]], template: function UserDialogComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"h1\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(4, \"p\");\n        ɵngcc0.ɵɵtext(5);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"p\");\n        ɵngcc0.ɵɵtext(8);\n        ɵngcc0.ɵɵpipe(9, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"p\");\n        ɵngcc0.ɵɵtext(11);\n        ɵngcc0.ɵɵpipe(12, \"translate\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(13, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(14, \"button\", 3);\n        ɵngcc0.ɵɵlistener(\"click\", function UserDialogComponent_Template_button_click_14_listener() { return ctx.dialogRef.close(false); });\n        ɵngcc0.ɵɵtext(15, \" OK \");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(2, 7, \"igo.context.userButton.infoTitle\"));\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵtextInterpolate2(\"\", ɵngcc0.ɵɵpipeBind1(6, 9, \"igo.context.userButton.dialog.user\"), \": \", ctx.user.sourceId, \"\");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate2(\"\", ɵngcc0.ɵɵpipeBind1(9, 11, \"igo.context.userButton.dialog.email\"), \": \", ctx.user.email, \"\");\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate2(\"\", ɵngcc0.ɵɵpipeBind1(12, 13, \"igo.context.userButton.dialog.expiration\"), \": \", ctx.exp, \"\");\n    } }, directives: [ɵngcc16.MatDialogTitle, ɵngcc16.MatDialogContent, ɵngcc16.MatDialogActions, ɵngcc7.MatButton], pipes: [ɵngcc14.TranslatePipe], encapsulation: 2 });\nUserDialogComponent.ctorParameters = () => [\n    { type: MatDialogRef },\n    { type: AuthService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(UserDialogComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-user-dialog',\n                template: \"<h1 mat-dialog-title class=\\\"mat-typography\\\">{{'igo.context.userButton.infoTitle' | translate}}</h1>\\n<div mat-dialog-content class=\\\"mat-typography\\\">\\n  <p>{{'igo.context.userButton.dialog.user' | translate}}: {{user.sourceId}}</p>\\n  <p>{{'igo.context.userButton.dialog.email' | translate}}: {{user.email}}</p>\\n  <p>{{'igo.context.userButton.dialog.expiration' | translate}}: {{exp}}</p>\\n</div>\\n<div mat-dialog-actions style=\\\"justify-content: center\\\">\\n  <button mat-button color=\\\"primary\\\"\\n         (click)=\\\"dialogRef.close(false)\\\">\\n    OK\\n  </button>\\n</div>\\n\"\n            }]\n    }], function () { return [{ type: ɵngcc16.MatDialogRef }, { type: ɵngcc2.AuthService }]; }, null); })();\n\nfunction userButtonSlideInOut() {\n    return trigger('userButtonState', [\n        state('collapse', style({\n            width: '0',\n            overflow: 'hidden',\n            display: 'none'\n        })),\n        state('expand', style({\n            overflow: 'hidden',\n            display: 'display'\n        })),\n        transition('collapse => expand', animate('200ms')),\n        transition('expand => collapse', animate('200ms'))\n    ]);\n}\n\nclass UserButtonComponent {\n    constructor(dialog, config, auth) {\n        this.dialog = dialog;\n        this.config = config;\n        this.auth = auth;\n        this.expand = false;\n        this.visible = false;\n        this.hasApi = false;\n        this.visible = this.config.getConfig('auth') ? true : false;\n        this.hasApi = this.config.getConfig('context.url') !== undefined;\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this._color = value;\n    }\n    accountClick() {\n        if (this.auth.authenticated) {\n            this.expand = !this.expand;\n        }\n        else {\n            this.auth.logout();\n        }\n    }\n    logout() {\n        this.expand = false;\n        this.auth.logout();\n    }\n    infoUser() {\n        this.dialog.open(UserDialogComponent, { disableClose: false });\n    }\n}\nUserButtonComponent.ɵfac = function UserButtonComponent_Factory(t) { return new (t || UserButtonComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc16.MatDialog), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.ConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AuthService)); };\nUserButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: UserButtonComponent, selectors: [[\"igo-user-button\"]], inputs: { map: \"map\", color: \"color\" }, decls: 1, vars: 1, consts: [[\"class\", \"igo-user-button-container\", 4, \"ngIf\"], [1, \"igo-user-button-container\"], [1, \"igo-user-button-more-container\"], [3, \"color\", \"map\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"matTooltipPosition\", \"above\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"information-outline\"], [\"svgIcon\", \"power\"], [\"mat-icon-button\", \"\", 3, \"color\", \"click\"], [\"svgIcon\", \"account-box\"], [3, \"color\", \"map\"]], template: function UserButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, UserButtonComponent_div_0_Template, 12, 12, \"div\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.visible);\n    } }, directives: [ɵngcc6.NgIf, ɵngcc7.MatButton, ɵngcc20.MatTooltip, ɵngcc19.MatIcon, PoiButtonComponent, BookmarkButtonComponent], pipes: [ɵngcc14.TranslatePipe], styles: [\".igo-user-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff}.igo-user-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#efefef}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.igo-user-button-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{bottom:0;position:absolute}}.igo-user-button-more-container[_ngcontent-%COMP%]{float:left;height:40px}.igo-user-button-more-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{float:left;margin-right:2px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.igo-user-button-more-container[_ngcontent-%COMP%]{height:80px;left:24px;position:relative;width:150px}}[_nghost-%COMP%]     button .mat-button-ripple-round, button[_ngcontent-%COMP%]{border-radius:0}\"], data: { animation: [userButtonSlideInOut()] } });\nUserButtonComponent.ctorParameters = () => [\n    { type: MatDialog },\n    { type: ConfigService },\n    { type: AuthService }\n];\nUserButtonComponent.propDecorators = {\n    map: [{ type: Input }],\n    color: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(UserButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-user-button',\n                template: \"<div *ngIf=\\\"visible\\\" class=\\\"igo-user-button-container\\\">\\n  <div class=\\\"igo-user-button-more-container\\\" [@userButtonState]=\\\"expand ? 'expand' : 'collapse'\\\">\\n\\n    <igo-poi-button *ngIf=\\\"hasApi\\\" [color]=\\\"color\\\" [map]=\\\"map\\\"></igo-poi-button>\\n    <igo-bookmark-button *ngIf=\\\"hasApi\\\" [color]=\\\"color\\\" [map]=\\\"map\\\"></igo-bookmark-button>\\n\\n    <button\\n      mat-icon-button\\n      [matTooltip]=\\\"'igo.context.userButton.infoTitle' | translate\\\"\\n      matTooltipPosition=\\\"above\\\"\\n      [color]=\\\"color\\\"\\n      (click)=\\\"infoUser()\\\">\\n      <mat-icon svgIcon=\\\"information-outline\\\"></mat-icon>\\n    </button>\\n\\n    <button\\n      mat-icon-button\\n      [matTooltip]=\\\"'igo.context.userButton.logout' |\\u00A0translate\\\"\\n      matTooltipPosition=\\\"above\\\"\\n      [color]=\\\"color\\\"\\n      (click)=\\\"logout()\\\">\\n      <mat-icon svgIcon=\\\"power\\\"></mat-icon>\\n    </button>\\n\\n  </div>\\n\\n  <button\\n    mat-icon-button\\n    [color]=\\\"auth.authenticated ? color : 'warn'\\\"\\n    (click)=\\\"accountClick()\\\">\\n    <mat-icon svgIcon=\\\"account-box\\\"></mat-icon>\\n  </button>\\n</div>\\n\",\n                animations: [userButtonSlideInOut()],\n                styles: [\".igo-user-button-container button{background-color:#fff}.igo-user-button-container button:hover{background-color:#efefef}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.igo-user-button-container>button{bottom:0;position:absolute}}.igo-user-button-more-container{float:left;height:40px}.igo-user-button-more-container>*{float:left;margin-right:2px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.igo-user-button-more-container{height:80px;left:24px;position:relative;width:150px}}:host ::ng-deep button .mat-button-ripple-round,button{border-radius:0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc16.MatDialog }, { type: ɵngcc3.ConfigService }, { type: ɵngcc2.AuthService }]; }, { map: [{\n            type: Input\n        }], color: [{\n            type: Input\n        }] }); })();\n\nclass IgoContextMapButtonModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextMapButtonModule\n        };\n    }\n}\nIgoContextMapButtonModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoContextMapButtonModule });\nIgoContextMapButtonModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoContextMapButtonModule_Factory(t) { return new (t || IgoContextMapButtonModule)(); }, providers: [PoiService], imports: [[\n            CommonModule,\n            IgoLanguageModule,\n            IgoConfirmDialogModule,\n            IgoStopPropagationModule,\n            IgoAuthModule,\n            FormsModule,\n            MatIconModule,\n            MatButtonModule,\n            MatSelectModule,\n            MatOptionModule,\n            MatTooltipModule,\n            MatFormFieldModule,\n            MatDialogModule,\n            MatInputModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoContextMapButtonModule, { declarations: function () { return [BookmarkButtonComponent, BookmarkDialogComponent, PoiButtonComponent, PoiDialogComponent, UserButtonComponent, UserDialogComponent]; }, imports: function () { return [CommonModule,\n        IgoLanguageModule,\n        IgoConfirmDialogModule,\n        IgoStopPropagationModule,\n        IgoAuthModule,\n        FormsModule,\n        MatIconModule,\n        MatButtonModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatTooltipModule,\n        MatFormFieldModule,\n        MatDialogModule,\n        MatInputModule]; }, exports: function () { return [BookmarkButtonComponent, PoiButtonComponent, UserButtonComponent, BookmarkDialogComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoContextMapButtonModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoLanguageModule,\n                    IgoConfirmDialogModule,\n                    IgoStopPropagationModule,\n                    IgoAuthModule,\n                    FormsModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatSelectModule,\n                    MatOptionModule,\n                    MatTooltipModule,\n                    MatFormFieldModule,\n                    MatDialogModule,\n                    MatInputModule\n                ],\n                exports: [BookmarkButtonComponent, PoiButtonComponent, UserButtonComponent, BookmarkDialogComponent],\n                declarations: [\n                    BookmarkButtonComponent,\n                    BookmarkDialogComponent,\n                    PoiButtonComponent,\n                    PoiDialogComponent,\n                    UserButtonComponent,\n                    UserDialogComponent\n                ],\n                providers: [PoiService]\n            }]\n    }], null, null); })();\n\nconst CONTEXT_DIRECTIVES = [\n    MapContextDirective,\n    LayerContextDirective\n];\nclass IgoContextManagerModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextManagerModule\n        };\n    }\n}\nIgoContextManagerModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoContextManagerModule });\nIgoContextManagerModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoContextManagerModule_Factory(t) { return new (t || IgoContextManagerModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            MatListModule,\n            MatCheckboxModule,\n            MatRadioModule,\n            MatDialogModule,\n            MatMenuModule,\n            MatOptionModule,\n            MatAutocompleteModule,\n            IgoAuthModule,\n            IgoListModule,\n            IgoKeyValueModule,\n            IgoCollapsibleModule,\n            IgoStopPropagationModule,\n            IgoLanguageModule,\n            IgoContextImportExportModule,\n            IgoContextMapButtonModule,\n            IgoActionbarModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoContextManagerModule, { declarations: function () { return [ContextListComponent, ContextListBindingDirective, ContextItemComponent, ContextFormComponent, ContextEditComponent, ContextEditBindingDirective, ContextPermissionsComponent, ContextPermissionsBindingDirective, MapContextDirective, LayerContextDirective]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        MatListModule,\n        MatCheckboxModule,\n        MatRadioModule,\n        MatDialogModule,\n        MatMenuModule,\n        MatOptionModule,\n        MatAutocompleteModule,\n        IgoAuthModule,\n        IgoListModule,\n        IgoKeyValueModule,\n        IgoCollapsibleModule,\n        IgoStopPropagationModule,\n        IgoLanguageModule, IgoContextImportExportModule, IgoContextMapButtonModule, IgoActionbarModule]; }, exports: function () { return [ContextListComponent, ContextListBindingDirective, ContextItemComponent, ContextFormComponent, ContextEditComponent, ContextEditBindingDirective, ContextPermissionsComponent, ContextPermissionsBindingDirective, MapContextDirective, LayerContextDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoContextManagerModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    MatListModule,\n                    MatCheckboxModule,\n                    MatRadioModule,\n                    MatDialogModule,\n                    MatMenuModule,\n                    MatOptionModule,\n                    MatAutocompleteModule,\n                    IgoAuthModule,\n                    IgoListModule,\n                    IgoKeyValueModule,\n                    IgoCollapsibleModule,\n                    IgoStopPropagationModule,\n                    IgoLanguageModule,\n                    IgoContextImportExportModule,\n                    IgoContextMapButtonModule,\n                    IgoActionbarModule\n                ],\n                exports: [\n                    ContextListComponent,\n                    ContextListBindingDirective,\n                    ContextItemComponent,\n                    ContextFormComponent,\n                    ContextEditComponent,\n                    ContextEditBindingDirective,\n                    ContextPermissionsComponent,\n                    ContextPermissionsBindingDirective,\n                    ...CONTEXT_DIRECTIVES\n                ],\n                declarations: [\n                    ContextListComponent,\n                    ContextListBindingDirective,\n                    ContextItemComponent,\n                    ContextFormComponent,\n                    ContextEditComponent,\n                    ContextEditBindingDirective,\n                    ContextPermissionsComponent,\n                    ContextPermissionsBindingDirective,\n                    ...CONTEXT_DIRECTIVES\n                ]\n            }]\n    }], null, null); })();\n\nclass ShareMapService {\n    constructor(config, contextService, messageService, route) {\n        this.config = config;\n        this.contextService = contextService;\n        this.messageService = messageService;\n        this.route = route;\n        this.apiUrl = this.config.getConfig('context.url');\n    }\n    getUrl(map, formValues, publicShareOption) {\n        if (this.apiUrl) {\n            return this.getUrlWithApi(map, formValues);\n        }\n        return this.getUrlWithoutApi(map, publicShareOption);\n    }\n    getUrlWithApi(map, formValues) {\n        const context = this.contextService.getContextFromMap(map);\n        context.scope = 'public';\n        context.title = formValues.title;\n        context.uri = formValues.uri;\n        this.contextService.create(context).subscribe(rep => { }, err => {\n            err.error.title = 'Share Map';\n            this.messageService.showError(err);\n        });\n        return `${location.origin + location.pathname}?context=${formValues.uri}`;\n    }\n    getUrlWithoutApi(map, publicShareOption) {\n        if (!this.route ||\n            !this.route.options.visibleOnLayersKey ||\n            !this.route.options.visibleOffLayersKey ||\n            !map.viewController.getZoom()) {\n            return;\n        }\n        const llc = publicShareOption.layerlistControls.querystring;\n        let visibleKey = this.route.options.visibleOnLayersKey;\n        let invisibleKey = this.route.options.visibleOffLayersKey;\n        const layers = map.layers;\n        const visibleLayers = layers.filter(lay => lay.visible && lay.id !== 'searchPointerSummaryId');\n        const invisibleLayers = layers.filter(lay => !lay.visible && lay.id !== 'searchPointerSummaryId');\n        if (visibleLayers.length === 0) {\n            visibleKey = '';\n        }\n        if (invisibleLayers.length === 0) {\n            invisibleKey = '';\n        }\n        let layersUrl = '';\n        let layersToLoop = [];\n        if (visibleLayers.length > invisibleLayers.length) {\n            layersUrl = `${visibleKey}=*&${invisibleKey}=`;\n            layersToLoop = invisibleLayers;\n        }\n        else {\n            layersUrl = `${invisibleKey}=*&${visibleKey}=`;\n            layersToLoop = visibleLayers;\n        }\n        for (const layer of layersToLoop) {\n            if (layer.id) {\n                layersUrl += layer.id + ',';\n            }\n        }\n        const contextLayersID = [];\n        const contextLayers = this.contextService.context$.value.layers;\n        for (const contextLayer of contextLayers) {\n            if (typeof contextLayer.id !== 'undefined' || typeof contextLayer.source !== 'undefined') {\n                contextLayersID.push(contextLayer.id || contextLayer.source.id);\n            }\n        }\n        const addedLayersQueryParamsWms = this.makeLayersByService(layers, contextLayersID, 'wms');\n        const addedLayersQueryParamsWmts = this.makeLayersByService(layers, contextLayersID, 'wmts');\n        layersUrl = layersUrl.substr(0, layersUrl.length - 1);\n        const zoomKey = this.route.options.zoomKey;\n        const centerKey = this.route.options.centerKey;\n        const contextKey = this.route.options.contextKey;\n        const zoom = `${zoomKey}=${map.viewController.getZoom()}`;\n        const arrayCenter = map.viewController.getCenter('EPSG:4326') || [];\n        const long = arrayCenter[0].toFixed(5).replace(/\\.([^0]+)0+$/, '.$1');\n        const lat = arrayCenter[1].toFixed(5).replace(/\\.([^0]+)0+$/, '.$1');\n        const center = `${centerKey}=${long},${lat}`.replace(/.00000/g, '');\n        let context = '';\n        if (this.contextService.context$.value) {\n            context = `${contextKey}=${this.contextService.context$.value.uri}`;\n        }\n        let url = `${location.origin}${location.pathname}?${context}&${zoom}&${center}&${layersUrl}&${llc}&${addedLayersQueryParamsWms}&${llc}&${addedLayersQueryParamsWmts}`;\n        for (let i = 0; i < 5; i++) {\n            url = url.replace(/&&/g, '&');\n            url = url.endsWith('&') ? url.slice(0, -1) : url;\n        }\n        url = url.endsWith('&') ? url.slice(0, -1) : url;\n        url = url.replace('?&wm', '&wm');\n        url = url.replace('?&', '?');\n        return url;\n    }\n    makeLayersByService(layers, contextLayersID, typeService) {\n        const addedLayersByService = [];\n        for (const layer of layers.filter(l => l.dataSource.options && (l.dataSource.options.type === typeService))) {\n            if (contextLayersID.indexOf(layer.id) === -1) {\n                const linkUrl = layer.dataSource.options.url;\n                let addedLayer = '';\n                if (layer.dataSource.options.type === 'wms') {\n                    addedLayer = encodeURIComponent(layer.dataSource.options.params.LAYERS);\n                }\n                else if (layer.dataSource.options.type === 'wmts') {\n                    addedLayer = encodeURIComponent(layer.dataSource.options.layer);\n                }\n                const addedLayerPosition = `${addedLayer}:igoz${layer.zIndex}`;\n                if (!addedLayersByService.find(definedUrl => definedUrl.url === linkUrl)) {\n                    addedLayersByService.push({\n                        url: linkUrl,\n                        layers: [addedLayerPosition]\n                    });\n                }\n                else {\n                    addedLayersByService.forEach(service => {\n                        if (service.url === linkUrl) {\n                            service.layers.push(addedLayerPosition);\n                        }\n                    });\n                }\n            }\n        }\n        let addedLayersQueryParams = '';\n        if (addedLayersByService.length >= 1) {\n            const linkUrlKey = (typeService === 'wms') ? this.route.options.wmsUrlKey :\n                (typeService === 'wmts') ? this.route.options.wmtsUrlKey : '';\n            const layersKey = (typeService === 'wms') ? this.route.options.wmsLayersKey :\n                (typeService === 'wmts') ? this.route.options.wmtsLayersKey : '';\n            let linkUrlQueryParams = '';\n            let layersQueryParams = '';\n            addedLayersByService.forEach(service => {\n                linkUrlQueryParams += `${service.url},`;\n                layersQueryParams += `(${service.layers.join(',')}),`;\n            });\n            linkUrlQueryParams = linkUrlQueryParams.endsWith(',')\n                ? linkUrlQueryParams.slice(0, -1)\n                : linkUrlQueryParams;\n            layersQueryParams = layersQueryParams.endsWith(',')\n                ? layersQueryParams.slice(0, -1)\n                : layersQueryParams;\n            addedLayersQueryParams = `${linkUrlKey}=${linkUrlQueryParams}&${layersKey}=${layersQueryParams}`;\n        }\n        return addedLayersQueryParams;\n    }\n}\nShareMapService.ɵfac = function ShareMapService_Factory(t) { return new (t || ShareMapService)(ɵngcc0.ɵɵinject(ɵngcc3.ConfigService), ɵngcc0.ɵɵinject(ContextService), ɵngcc0.ɵɵinject(ɵngcc3.MessageService), ɵngcc0.ɵɵinject(ɵngcc3.RouteService, 8)); };\nShareMapService.ɵprov = ɵɵdefineInjectable({ factory: function ShareMapService_Factory() { return new ShareMapService(ɵɵinject(ConfigService), ɵɵinject(ContextService), ɵɵinject(MessageService), ɵɵinject(RouteService, 8)); }, token: ShareMapService, providedIn: \"root\" });\nShareMapService.ctorParameters = () => [\n    { type: ConfigService },\n    { type: ContextService },\n    { type: MessageService },\n    { type: RouteService, decorators: [{ type: Optional }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ShareMapService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc3.ConfigService }, { type: ContextService }, { type: ɵngcc3.MessageService }, { type: ɵngcc3.RouteService, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n\nclass ShareMapComponent {\n    constructor(config, languageService, messageService, auth, shareMapService, formBuilder, cdRef) {\n        this.config = config;\n        this.languageService = languageService;\n        this.messageService = messageService;\n        this.auth = auth;\n        this.shareMapService = shareMapService;\n        this.formBuilder = formBuilder;\n        this.cdRef = cdRef;\n        this.hasApi = false;\n        this.publicShareOption = {\n            layerlistControls: { querystring: '' }\n        };\n        this.hasApi = this.config.getConfig('context.url') ? true : false;\n    }\n    ngOnInit() {\n        this.auth.authenticate$.subscribe(auth => {\n            const decodeToken = this.auth.decodeToken();\n            this.userId = decodeToken.user ? decodeToken.user.id : undefined;\n            this.url = undefined;\n            this.buildForm();\n        });\n        this.mapState$$ = this.map.viewController.state$.subscribe(c => {\n            if (!this.hasApi) {\n                this.resetUrl();\n                this.cdRef.detectChanges();\n            }\n        });\n    }\n    ngAfterViewInit() {\n        if (!this.hasApi) {\n            this.resetUrl();\n        }\n    }\n    ngOnDestroy() {\n        this.mapState$$.unsubscribe();\n    }\n    resetUrl(values = {}) {\n        const inputs = Object.assign({}, values);\n        inputs.uri = this.userId ? `${this.userId}-${values.uri}` : values.uri;\n        this.url = this.shareMapService.getUrl(this.map, inputs, this.publicShareOption);\n    }\n    copyTextToClipboard(textArea) {\n        const successful = Clipboard.copy(textArea);\n        if (successful) {\n            const translate = this.languageService.translate;\n            const title = translate.instant('igo.context.shareMap.dialog.copyTitle');\n            const msg = translate.instant('igo.context.shareMap.dialog.copyMsg');\n            this.messageService.success(msg, title);\n        }\n    }\n    buildForm() {\n        const id = uuid();\n        let title = 'Partage ';\n        title += this.userId ? `(${this.userId}-${id})` : `(${id})`;\n        this.form = this.formBuilder.group({\n            title: [title],\n            uri: [id]\n        });\n    }\n}\nShareMapComponent.ɵfac = function ShareMapComponent_Factory(t) { return new (t || ShareMapComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc3.ConfigService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LanguageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.MessageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.AuthService), ɵngcc0.ɵɵdirectiveInject(ShareMapService), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.FormBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nShareMapComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ShareMapComponent, selectors: [[\"igo-share-map\"]], inputs: { map: \"map\" }, decls: 5, vars: 5, consts: [[1, \"igo-form\", 3, \"formGroup\", \"ngSubmit\"], [\"class\", \"igo-input-container\", 4, \"ngIf\"], [\"id\", \"uriInput\", \"class\", \"igo-input-container\", 4, \"ngIf\"], [\"class\", \"igo-form-button-group\", 4, \"ngIf\"], [\"class\", \"igo-input-container linkToShare\", 4, \"ngIf\"], [1, \"igo-input-container\"], [\"matInput\", \"\", \"required\", \"\", \"formControlName\", \"title\", 3, \"placeholder\"], [\"id\", \"uriInput\", 1, \"igo-input-container\"], [\"class\", \"prefix\", 4, \"ngIf\"], [1, \"fieldWrapper\"], [\"matInput\", \"\", \"required\", \"\", \"formControlName\", \"uri\", 3, \"readonly\", \"placeholder\"], [1, \"prefix\"], [1, \"igo-form-button-group\"], [\"mat-raised-button\", \"\", \"type\", \"submit\", 3, \"disabled\"], [1, \"igo-input-container\", \"linkToShare\"], [\"matInput\", \"\", \"readonly\", \"\", \"rows\", \"1\", 3, \"ngClass\", \"placeholder\", \"value\"], [\"textArea\", \"\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", 3, \"matTooltip\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", \"color\", \"primary\", 3, \"matTooltip\", \"click\"], [\"svgIcon\", \"content-copy\"], [\"mat-raised-button\", \"\", 3, \"click\"], [1, \"mat-typography\"]], template: function ShareMapComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"form\", 0);\n        ɵngcc0.ɵɵlistener(\"ngSubmit\", function ShareMapComponent_Template_form_ngSubmit_0_listener() { return ctx.resetUrl(ctx.form.value); });\n        ɵngcc0.ɵɵtemplate(1, ShareMapComponent_div_1_Template, 7, 6, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(2, ShareMapComponent_div_2_Template, 9, 8, \"div\", 2);\n        ɵngcc0.ɵɵtemplate(3, ShareMapComponent_div_3_Template, 4, 4, \"div\", 3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(4, ShareMapComponent_div_4_Template, 8, 10, \"div\", 4);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"formGroup\", ctx.form);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasApi);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasApi);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasApi);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.url);\n    } }, directives: [ɵngcc4.ɵangular_packages_forms_forms_y, ɵngcc4.NgControlStatusGroup, ɵngcc4.FormGroupDirective, ɵngcc6.NgIf, ɵngcc9.MatFormField, ɵngcc10.MatInput, ɵngcc4.DefaultValueAccessor, ɵngcc4.RequiredValidator, ɵngcc4.NgControlStatus, ɵngcc4.FormControlName, ɵngcc9.MatError, ɵngcc7.MatButton, ɵngcc6.NgClass, ɵngcc20.MatTooltip, ɵngcc19.MatIcon], pipes: [ɵngcc14.TranslatePipe], styles: [\"@charset \\\"UTF-8\\\";mat-form-field[_ngcontent-%COMP%]{width:100%}#uriInput[_ngcontent-%COMP%]   .fieldWrapper[_ngcontent-%COMP%]{display:block;overflow:hidden}#uriInput[_ngcontent-%COMP%]   .prefix[_ngcontent-%COMP%]{float:left}.linkToShare[_ngcontent-%COMP%]{padding:25px 5px 5px}.linkToShare[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:40px;line-height:1.3;overflow-y:hidden;resize:none;width:100%;word-break:break-all;word-wrap:normal}.linkToShare[_ngcontent-%COMP%]   textarea.textAreaWithButton[_ngcontent-%COMP%]{width:calc(100% - 60px)}.linkToShare[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{float:right;margin:-10px 0}.igo-form[_ngcontent-%COMP%]{padding:20px 5px 5px}.igo-form-button-group[_ngcontent-%COMP%]{padding-top:10px;text-align:center}\"] });\nShareMapComponent.ctorParameters = () => [\n    { type: ConfigService },\n    { type: LanguageService },\n    { type: MessageService },\n    { type: AuthService },\n    { type: ShareMapService },\n    { type: FormBuilder },\n    { type: ChangeDetectorRef }\n];\nShareMapComponent.propDecorators = {\n    map: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ShareMapComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-share-map',\n                template: \"<form class=\\\"igo-form\\\" [formGroup]=\\\"form\\\"\\n  (ngSubmit)=\\\"resetUrl(form.value)\\\">\\n\\n  <div *ngIf=\\\"hasApi\\\" class=\\\"igo-input-container\\\">\\n    <mat-form-field>\\n      <input matInput required\\n             [placeholder]=\\\"'igo.context.contextManager.form.title' | translate\\\"\\n             formControlName=\\\"title\\\">\\n     <mat-error>\\n      {{ 'igo.context.contextManager.form.titleRequired' | translate }}\\n     </mat-error>\\n    </mat-form-field>\\n  </div>\\n\\n  <div *ngIf=\\\"hasApi\\\" id=\\\"uriInput\\\" class=\\\"igo-input-container\\\">\\n    <mat-form-field>\\n      <span *ngIf=\\\"userId\\\" class=\\\"prefix\\\">{{userId}}-</span>\\n      <span class=\\\"fieldWrapper\\\">\\n        <input matInput required\\n             [readonly]=\\\"!userId\\\"\\n             [placeholder]=\\\"'igo.context.contextManager.form.uri' | translate\\\"\\n             formControlName=\\\"uri\\\">\\n       </span>\\n     <mat-error>\\n      {{ 'igo.context.contextManager.form.uriRequired' | translate }}\\n     </mat-error>\\n    </mat-form-field>\\n  </div>\\n\\n  <div *ngIf=\\\"hasApi\\\" class=\\\"igo-form-button-group\\\">\\n    <button\\n      mat-raised-button\\n      type=\\\"submit\\\"\\n      [disabled]=\\\"!form.valid\\\">\\n      {{ 'igo.context.shareMap.button' | translate }}\\n    </button>\\n  </div>\\n\\n</form>\\n\\n<div *ngIf=\\\"url\\\" class=\\\"igo-input-container linkToShare\\\">\\n  <mat-form-field>\\n    <textarea #textArea matInput readonly rows=\\\"1\\\"\\n      [ngClass]=\\\"{'textAreaWithButton': hasApi}\\\"\\n      [placeholder]=\\\"'igo.context.shareMap.placeholderLink' | translate\\\"\\n      [value]=\\\"url\\\"></textarea>\\n    <button *ngIf=\\\"hasApi\\\"\\n      mat-icon-button\\n      tooltip-position=\\\"below\\\"\\n      matTooltipShowDelay=\\\"500\\\"\\n      [matTooltip]=\\\"'igo.context.shareMap.copy' | translate\\\"\\n      color=\\\"primary\\\"\\n      (click)=\\\"copyTextToClipboard(textArea)\\\">\\n      <mat-icon svgIcon=\\\"content-copy\\\"></mat-icon>\\n    </button>\\n  </mat-form-field>\\n\\n  <div *ngIf=\\\"!hasApi\\\" class=\\\"igo-form-button-group\\\">\\n    <button\\n      mat-raised-button\\n      (click)=\\\"copyTextToClipboard(textArea)\\\">\\n      <mat-icon svgIcon=\\\"content-copy\\\"></mat-icon>\\n      {{ 'igo.context.shareMap.copy' | translate }}\\n    </button>\\n  </div>\\n  <div *ngIf=\\\"!hasApi\\\">\\n    <br/>\\n    <section class=\\\"mat-typography\\\">\\n        <h4>{{'igo.context.shareMap.included' | translate}}</h4>\\n        <ul>\\n          <li>{{'igo.context.shareMap.context' | translate}}</li>\\n          <li>{{'igo.context.shareMap.center' | translate}}</li>\\n          <li>{{'igo.context.shareMap.zoom' | translate}}</li>\\n          <li>{{'igo.context.shareMap.addedLayers' | translate}}</li>\\n          <li>{{'igo.context.shareMap.visibleInvisible' | translate}}</li>\\n        </ul>\\n\\n      <h4>{{'igo.context.shareMap.excluded' | translate}}</h4>\\n      <ul>\\n        <li>{{'igo.context.shareMap.order' | translate}}</li>\\n        <li>{{'igo.context.shareMap.opacity' | translate}}</li>\\n        <li>{{'igo.context.shareMap.filterOgc' | translate}}</li>\\n        <li>{{'igo.context.shareMap.filterTime' | translate}}</li>\\n      </ul>\\n    </section>\\n  </div>\\n\\n</div>\\n\",\n                styles: [\"@charset \\\"UTF-8\\\";mat-form-field{width:100%}#uriInput .fieldWrapper{display:block;overflow:hidden}#uriInput .prefix{float:left}.linkToShare{padding:25px 5px 5px}.linkToShare\\u00A0 textarea{height:40px;line-height:1.3;overflow-y:hidden;resize:none;width:100%;word-break:break-all;word-wrap:normal}.linkToShare\\u00A0 textarea.textAreaWithButton{width:calc(100% - 60px)}.linkToShare\\u00A0 mat-form-field>button{float:right;margin:-10px 0}.igo-form{padding:20px 5px 5px}.igo-form-button-group{padding-top:10px;text-align:center}\"]\n            }]\n    }], function () { return [{ type: ɵngcc3.ConfigService }, { type: ɵngcc3.LanguageService }, { type: ɵngcc3.MessageService }, { type: ɵngcc2.AuthService }, { type: ShareMapService }, { type: ɵngcc4.FormBuilder }, { type: ɵngcc0.ChangeDetectorRef }]; }, { map: [{\n            type: Input\n        }] }); })();\n\nclass IgoShareMapModule {\n    static forRoot() {\n        return {\n            ngModule: IgoShareMapModule\n        };\n    }\n}\nIgoShareMapModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoShareMapModule });\nIgoShareMapModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoShareMapModule_Factory(t) { return new (t || IgoShareMapModule)(); }, imports: [[\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            MatIconModule,\n            MatTooltipModule,\n            MatFormFieldModule,\n            MatInputModule,\n            MatButtonModule,\n            IgoLanguageModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoShareMapModule, { declarations: function () { return [ShareMapComponent]; }, imports: function () { return [CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatIconModule,\n        MatTooltipModule,\n        MatFormFieldModule,\n        MatInputModule,\n        MatButtonModule,\n        IgoLanguageModule]; }, exports: function () { return [ShareMapComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoShareMapModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    ReactiveFormsModule,\n                    MatIconModule,\n                    MatTooltipModule,\n                    MatFormFieldModule,\n                    MatInputModule,\n                    MatButtonModule,\n                    IgoLanguageModule\n                ],\n                exports: [ShareMapComponent],\n                declarations: [ShareMapComponent]\n            }]\n    }], null, null); })();\n\nclass SidenavComponent {\n    constructor(titleService) {\n        this.titleService = titleService;\n        this.format = new GeoJSON();\n        this._title = this.titleService.getTitle();\n        this.topPanelState = 'initial';\n    }\n    get map() {\n        return this._map;\n    }\n    set map(value) {\n        this._map = value;\n    }\n    get opened() {\n        return this._opened;\n    }\n    set opened(value) {\n        this._opened = value;\n    }\n    get feature() {\n        return this._feature;\n    }\n    set feature(value) {\n        this._feature = value;\n    }\n    get tool() {\n        return this._tool;\n    }\n    set tool(value) {\n        this._tool = value;\n    }\n    get media() {\n        return this._media;\n    }\n    set media(value) {\n        this._media = value;\n    }\n    get title() {\n        return this._title;\n    }\n    set title(value) {\n        if (value) {\n            this._title = value;\n        }\n    }\n    get featureTitle() {\n        return this.feature ? getEntityTitle(this.feature) : undefined;\n    }\n    zoomToFeatureExtent() {\n        if (this.feature.geometry) {\n            const olFeature = this.format.readFeature(this.feature, {\n                dataProjection: this.feature.projection,\n                featureProjection: this.map.projection\n            });\n            moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\n        }\n    }\n    toggleTopPanel() {\n        if (this.topPanelState === 'initial') {\n            this.topPanelState = 'expanded';\n        }\n        else {\n            this.topPanelState = 'initial';\n        }\n    }\n}\nSidenavComponent.ɵfac = function SidenavComponent_Factory(t) { return new (t || SidenavComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc24.Title)); };\nSidenavComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SidenavComponent, selectors: [[\"igo-sidenav\"]], inputs: { map: \"map\", opened: \"opened\", feature: \"feature\", tool: \"tool\", media: \"media\", title: \"title\" }, decls: 12, vars: 8, consts: [[\"igoSidenavShim\", \"\", \"mode\", \"side\", 3, \"opened\"], [\"sidenav\", \"\"], [1, \"igo-sidenav-content\"], [\"initial\", \"50%\", \"initialMobile\", \"100%\", \"expanded\", \"calc(100% - 58px)\", 3, \"state\"], [\"topPanel\", \"\"], [1, \"igo-content\"], [3, \"title\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", 4, \"ngIf\"], [\"igoFlexibleFill\", \"\", 1, \"igo-content\"], [3, \"title\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\"], [\"svgIcon\", \"arrow-back\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\"], [\"svgIcon\", \"menu\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", 1, \"igo-icon-button\", 3, \"click\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"class\", \"igo-icon-button\", 3, \"click\", 4, \"ngIf\"], [3, \"feature\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", 1, \"igo-icon-button\", 3, \"click\"], [\"svgIcon\", \"zoom-in\"], [3, \"feature\"]], template: function SidenavComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-sidenav\", 0, 1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"igo-flexible\", 3, 4);\n        ɵngcc0.ɵɵelementStart(5, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(6, \"igo-panel\", 6);\n        ɵngcc0.ɵɵpipe(7, \"translate\");\n        ɵngcc0.ɵɵtemplate(8, SidenavComponent_button_8_Template, 3, 3, \"button\", 7);\n        ɵngcc0.ɵɵtemplate(9, SidenavComponent_button_9_Template, 3, 3, \"button\", 8);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"div\", 9);\n        ɵngcc0.ɵɵtemplate(11, SidenavComponent_igo_panel_11_Template, 5, 6, \"igo-panel\", 10);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"opened\", ctx.opened);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"state\", ctx.topPanelState);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"title\", ctx.tool ? ɵngcc0.ɵɵpipeBind1(7, 6, ctx.tool.title) : ctx.title);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.tool);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.tool);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.feature && ctx.media !== \"mobile\");\n    } }, directives: [ɵngcc25.MatSidenav, ɵngcc8.FlexibleComponent, ɵngcc8.PanelComponent, ɵngcc6.NgIf, ɵngcc7.MatButton, ɵngcc20.MatTooltip, ɵngcc19.MatIcon, ɵngcc15.FeatureDetailsComponent], pipes: [ɵngcc14.TranslatePipe], styles: [\".igo-sidenav-content[_ngcontent-%COMP%]   .igo-flexible-fill[_ngcontent-%COMP%]   .igo-container[_ngcontent-%COMP%], [_nghost-%COMP%]     .igo-flexible-fill .igo-container{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;border-top:1px solid rgba(0,0,0,.2);box-sizing:border-box}mat-sidenav[_ngcontent-%COMP%]{-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd}[_nghost-%COMP%]{background-color:#fff}[_nghost-%COMP%]     mat-sidenav{z-index:3!important}mat-sidenav[_ngcontent-%COMP%]{width:400px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){mat-sidenav[_ngcontent-%COMP%]{width:calc(100% - 45px)}}.igo-sidenav-content[_ngcontent-%COMP%]{height:calc(100% - 50px);margin-top:50px}igo-feature-details[_ngcontent-%COMP%]     table{width:100%}\"] });\nSidenavComponent.ctorParameters = () => [\n    { type: Title }\n];\nSidenavComponent.propDecorators = {\n    map: [{ type: Input }],\n    opened: [{ type: Input }],\n    feature: [{ type: Input }],\n    tool: [{ type: Input }],\n    media: [{ type: Input }],\n    title: [{ type: Input }]\n};\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SidenavComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-sidenav',\n                template: \"<mat-sidenav\\n  #sidenav\\n  igoSidenavShim\\n  mode=\\\"side\\\"\\n  [opened]=\\\"opened\\\">\\n\\n  <div class=\\\"igo-sidenav-content\\\">\\n\\n    <igo-flexible\\n      #topPanel\\n      initial=\\\"50%\\\" initialMobile=\\\"100%\\\"\\n      expanded=\\\"calc(100% - 58px)\\\"\\n      [state]=\\\"topPanelState\\\">\\n\\n      <div class=\\\"igo-content\\\">\\n        <igo-panel [title]=\\\"tool ? (tool.title | translate) : title\\\">\\n          <button\\n            mat-icon-button\\n            panelLeftButton\\n            tooltip-position=\\\"below\\\"\\n            matTooltipShowDelay=\\\"500\\\"\\n            [matTooltip]=\\\"'igo.context.sidenav.goBack' | translate\\\"\\n            *ngIf=\\\"tool\\\">\\n            <mat-icon svgIcon=\\\"arrow-back\\\"></mat-icon>\\n          </button>\\n\\n          <button\\n            mat-icon-button\\n            panelRightButton\\n            tooltip-position=\\\"below\\\"\\n            matTooltipShowDelay=\\\"500\\\"\\n            [matTooltip]=\\\"'igo.context.sidenav.mainMenu' | translate\\\"\\n            *ngIf=\\\"tool\\\">\\n            <mat-icon svgIcon=\\\"menu\\\"></mat-icon>\\n          </button>\\n\\n        </igo-panel>\\n      </div>\\n\\n      <div igoFlexibleFill class=\\\"igo-content\\\">\\n        <igo-panel\\n          [title]=\\\"featureTitle\\\"\\n          *ngIf=\\\"feature && media !== 'mobile'\\\">\\n\\n          <button\\n            mat-icon-button\\n            panelLeftButton\\n            class=\\\"igo-icon-button\\\"\\n            (click)=\\\"toggleTopPanel()\\\">\\n            <mat-icon [svgIcon]=\\\"['collapsed', 'initial'].indexOf(topPanel.state) >= 0 ? 'arrow_downward' : 'arrow_upward'\\\"></mat-icon>\\n          </button>\\n\\n          <button\\n            mat-icon-button\\n            panelRightButton\\n            class=\\\"igo-icon-button\\\"\\n            (click)=\\\"zoomToFeatureExtent()\\\"\\n            *ngIf=\\\"feature.geometry\\\">\\n            <mat-icon svgIcon=\\\"zoom-in\\\"></mat-icon>\\n          </button>\\n\\n          <igo-feature-details\\n            [feature]=\\\"feature\\\"\\n            *ngIf=\\\"['collapsed', 'initial'].indexOf(topPanel.state) >= 0\\\">\\n          </igo-feature-details>\\n        </igo-panel>\\n      </div>\\n\\n    </igo-flexible>\\n\\n  </div>\\n</mat-sidenav>\\n\",\n                styles: [\".igo-sidenav-content .igo-flexible-fill .igo-container,:host ::ng-deep .igo-flexible-fill .igo-container{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;border-top:1px solid rgba(0,0,0,.2);box-sizing:border-box}mat-sidenav{-o-box-shadow:2px 0 2px 0 #ddd;box-shadow:2px 0 2px 0 #ddd}:host{background-color:#fff}:host ::ng-deep mat-sidenav{z-index:3!important}mat-sidenav{width:400px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){mat-sidenav{width:calc(100% - 45px)}}.igo-sidenav-content{height:calc(100% - 50px);margin-top:50px}igo-feature-details ::ng-deep table{width:100%}\"]\n            }]\n    }], function () { return [{ type: ɵngcc24.Title }]; }, { map: [{\n            type: Input\n        }], opened: [{\n            type: Input\n        }], feature: [{\n            type: Input\n        }], tool: [{\n            type: Input\n        }], media: [{\n            type: Input\n        }], title: [{\n            type: Input\n        }] }); })();\n\nclass IgoSidenavModule {\n    static forRoot() {\n        return {\n            ngModule: IgoSidenavModule\n        };\n    }\n}\nIgoSidenavModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoSidenavModule });\nIgoSidenavModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoSidenavModule_Factory(t) { return new (t || IgoSidenavModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatSidenavModule,\n            MatTooltipModule,\n            IgoLanguageModule,\n            IgoPanelModule,\n            IgoFlexibleModule,\n            IgoFeatureModule,\n            IgoContextManagerModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoSidenavModule, { declarations: function () { return [SidenavComponent]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatSidenavModule,\n        MatTooltipModule,\n        IgoLanguageModule,\n        IgoPanelModule,\n        IgoFlexibleModule,\n        IgoFeatureModule, IgoContextManagerModule]; }, exports: function () { return [SidenavComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoSidenavModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatSidenavModule,\n                    MatTooltipModule,\n                    IgoLanguageModule,\n                    IgoPanelModule,\n                    IgoFlexibleModule,\n                    IgoFeatureModule,\n                    IgoContextManagerModule\n                ],\n                exports: [SidenavComponent],\n                declarations: [SidenavComponent]\n            }]\n    }], null, null); })();\n\nclass IgoContextModule {\n    static forRoot() {\n        return {\n            ngModule: IgoContextModule,\n            providers: []\n        };\n    }\n}\nIgoContextModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoContextModule });\nIgoContextModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoContextModule_Factory(t) { return new (t || IgoContextModule)(); }, imports: [[MatInputModule, MatFormFieldModule, MatMenuModule], IgoContextImportExportModule, IgoContextManagerModule, IgoContextMapButtonModule, IgoShareMapModule, IgoSidenavModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoContextModule, { imports: function () { return [MatInputModule, MatFormFieldModule, MatMenuModule]; }, exports: function () { return [IgoContextImportExportModule, IgoContextManagerModule, IgoContextMapButtonModule, IgoShareMapModule, IgoSidenavModule]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoContextModule, [{\n        type: NgModule,\n        args: [{\n                imports: [MatInputModule, MatFormFieldModule, MatMenuModule],\n                declarations: [],\n                exports: [\n                    IgoContextImportExportModule,\n                    IgoContextManagerModule,\n                    IgoContextMapButtonModule,\n                    IgoShareMapModule,\n                    IgoSidenavModule\n                ]\n            }]\n    }], null, null); })();\n\n/*\n * Public API Surface of context\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { BookmarkButtonComponent, BookmarkDialogComponent, ContextEditBindingDirective, ContextEditComponent, ContextExportService, ContextFormComponent, ContextImportExportComponent, ContextImportService, ContextItemComponent, ContextListBindingDirective, ContextListComponent, ContextPermissionsBindingDirective, ContextPermissionsComponent, ContextService, ExportError, ExportInvalidFileError, ExportNothingToExportError, IgoContextImportExportModule, IgoContextManagerModule, IgoContextMapButtonModule, IgoContextModule, IgoShareMapModule, IgoSidenavModule, ImportError, ImportInvalidFileError, ImportNothingToImportError, ImportSRSError, ImportSizeError, ImportUnreadableFileError, LayerContextDirective, MapContextDirective, PoiButtonComponent, PoiDialogComponent, PoiService, Scope, ShareMapComponent, ShareMapService, SidenavComponent, TypePermission, UserButtonComponent, UserDialogComponent, addContextToContextList, addImportedFeaturesStyledToMap, addImportedFeaturesToMap, computeLayerTitleFromFile, getFileExtension, handleFileExportError, handleFileExportSuccess, handleFileImportError, handleFileImportSuccess, handleInvalidFileImportError, handleNothingToExportError, handleNothingToImportError, handleSizeFileImportError, handleUnreadbleFileImportError, ContextImportExportComponent as ɵa, ContextImportService as ɵb, ContextExportService as ɵc, ContextService as ɵd, BookmarkButtonComponent as ɵe, PoiButtonComponent as ɵf, PoiService as ɵg, UserButtonComponent as ɵh, userButtonSlideInOut as ɵi, BookmarkDialogComponent as ɵj, PoiDialogComponent as ɵk, UserDialogComponent as ɵl, ContextListComponent as ɵm, ContextListBindingDirective as ɵn, ContextItemComponent as ɵo, ContextFormComponent as ɵp, ContextEditComponent as ɵq, ContextEditBindingDirective as ɵr, ContextPermissionsComponent as ɵs, ContextPermissionsBindingDirective as ɵt, MapContextDirective as ɵu, LayerContextDirective as ɵv, ShareMapComponent as ɵw, ShareMapService as ɵx, SidenavComponent as ɵy };\n\n//# sourceMappingURL=igo2-context.js.map","import { NgModule, ɵɵdefineInjectable, Injectable, ɵɵinject, Component, Input, CUSTOM_ELEMENTS_SCHEMA, ChangeDetectionStrategy, Inject, ChangeDetectorRef, ViewChild, Directive, Self, HostListener, ElementRef } from '@angular/core';\nimport { IgoContextModule, IgoContextImportExportModule, ContextService } from '@igo2/context';\nimport { __decorate, __metadata } from 'tslib';\nimport { ToolService, ToolComponent, EntityStore, EntityStoreFilterCustomFuncStrategy, EntityStoreFilterSelectionStrategy, Widget, WorkspaceStore, getEntityTitle, FlexibleComponent, IgoFlexibleModule, IgoPanelModule, IgoCustomHtmlModule, IgoInteractiveTourModule } from '@igo2/common';\nimport { BehaviorSubject, combineLatest, ReplaySubject, forkJoin, of } from 'rxjs';\nimport { IgoMap, MapService, ProjectionService, CatalogService, IgoCatalogLibraryModule, IgoCatalogBrowserModule, FeatureStore, IgoDirectionsModule, featureMotionStrategyActiveToolTip, mapExtentStrategyActiveToolTip, noElementSelected, FeatureStoreSelectionStrategy, FeatureMotion, OgcFilterWidget, WfsWorkspace, FeatureWorkspace, VectorLayer, IgoImportExportModule, LayerListControlsEnum, sourceCanSearch, SearchSourceService, IgoLayerModule, IgoMetadataModule, IgoDownloadModule, IgoFilterModule, IgoMeasurerModule, IgoPrintModule, SearchBarComponent, IgoSearchModule, FEATURE, createOverlayDefaultStyle, moveToOlFeatures, LayerService, IgoFeatureModule, IgoFeatureDetailsModule, SpatialFilterItemType, SpatialFilterType, featureToOl, createOverlayMarkerStyle, SpatialFilterService, DataSourceService, IgoQueryModule } from '@igo2/geo';\nimport { CommonModule } from '@angular/common';\nimport { AuthService } from '@igo2/auth';\nimport { StorageService, StorageScope, IgoLanguageModule, MessageService, LanguageService, ConfigService, AnalyticsService } from '@igo2/core';\nimport { skipWhile, map, debounceTime, tap, skip } from 'rxjs/operators';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatIconModule, MatIconRegistry } from '@angular/material/icon';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatListModule } from '@angular/material/list';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport { Style, Circle, Fill, Stroke, Icon } from 'ol/style';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@igo2/common';\nimport * as ɵngcc2 from '@igo2/context';\nimport * as ɵngcc3 from '@igo2/geo';\nimport * as ɵngcc4 from '@igo2/auth';\nimport * as ɵngcc5 from '@angular/common';\nimport * as ɵngcc6 from '@igo2/core';\nimport * as ɵngcc7 from '@angular/material/button';\nimport * as ɵngcc8 from '@angular/material/tooltip';\nimport * as ɵngcc9 from '@angular/material/icon';\nimport * as ɵngcc10 from '@ngx-translate/core';\nimport * as ɵngcc11 from '@angular/material/tabs';\nimport * as ɵngcc12 from '@angular/material/list';\nimport * as ɵngcc13 from '@angular/material/core';\n\nfunction CatalogBrowserToolComponent_igo_catalog_browser_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-catalog-browser\", 1);\n} if (rf & 2) {\n    const store_r1 = ctx.ngIf;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"catalog\", ctx_r0.catalog)(\"store\", store_r1)(\"map\", ctx_r0.map)(\"toggleCollapsedGroup\", ctx_r0.toggleCollapsedGroup);\n} }\nfunction WorkspaceButtonComponent_button_0_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 1);\n    ɵngcc0.ɵɵlistener(\"click\", function WorkspaceButtonComponent_button_0_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r2); const ctx_r1 = ɵngcc0.ɵɵnextContext(); return ctx_r1.activateWorkspace(); });\n    ɵngcc0.ɵɵpipe(1, \"translate\");\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 2);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"matTooltip\", ɵngcc0.ɵɵpipeBind1(1, 2, \"igo.integration.workspace.toggleWorkspace\"))(\"color\", ctx_r0.color);\n} }\nfunction MapDetailsToolComponent_igo_layer_list_0_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    const _r7 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelement(0, \"igo-workspace-button\", 4);\n    ɵngcc0.ɵɵelementStart(1, \"igo-export-button\", 5);\n    ɵngcc0.ɵɵlistener(\"click\", function MapDetailsToolComponent_igo_layer_list_0_ng_template_1_Template_igo_export_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r7); const layer_r5 = ctx.layer; const ctx_r6 = ɵngcc0.ɵɵnextContext(2); return ctx_r6.activateExport(layer_r5.id); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(2, \"igo-ogc-filter-button\", 6);\n    ɵngcc0.ɵɵelement(3, \"igo-time-filter-button\", 6);\n    ɵngcc0.ɵɵelement(4, \"igo-track-feature-button\", 7);\n    ɵngcc0.ɵɵelement(5, \"igo-metadata-button\", 4);\n} if (rf & 2) {\n    const layer_r5 = ctx.layer;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"header\", ctx_r4.ogcButton)(\"layer\", layer_r5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"header\", ctx_r4.timeButton)(\"layer\", layer_r5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"trackFeature\", true)(\"layer\", layer_r5);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r5);\n} }\nfunction MapDetailsToolComponent_igo_layer_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"igo-layer-list\", 2);\n    ɵngcc0.ɵɵtemplate(1, MapDetailsToolComponent_igo_layer_list_0_ng_template_1_Template, 6, 9, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"map\", ctx_r0.map)(\"excludeBaseLayers\", ctx_r0.excludeBaseLayers)(\"layerFilterAndSortOptions\", ctx_r0.layerFilterAndSortOptions)(\"expandLegendOfVisibleLayers\", ctx_r0.expandLegendOfVisibleLayers)(\"toggleLegendOnVisibilityChange\", ctx_r0.toggleLegendOnVisibilityChange)(\"updateLegendOnResolutionChange\", ctx_r0.updateLegendOnResolutionChange)(\"queryBadge\", ctx_r0.queryBadge);\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_p_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 9);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.integration.mapTool.customize\"), \"\");\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_5_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 11);\n    ɵngcc0.ɵɵnamespaceSVG();\n    ɵngcc0.ɵɵelementStart(2, \"svg\", 12);\n    ɵngcc0.ɵɵelement(3, \"path\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵnamespaceHTML();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_5_Template_h4_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(3); return ctx_r13.searchEmit(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.search-tool\"), \" \");\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_6_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 11);\n    ɵngcc0.ɵɵnamespaceSVG();\n    ɵngcc0.ɵɵelementStart(2, \"svg\", 12);\n    ɵngcc0.ɵɵelement(3, \"path\", 15);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵnamespaceHTML();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 16);\n    ɵngcc0.ɵɵlistener(\"click\", function MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_6_Template_h4_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r15 = ɵngcc0.ɵɵnextContext(3); return ctx_r15.catalogEmit(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.catalog-tool\"), \" \");\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_7_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 11);\n    ɵngcc0.ɵɵnamespaceSVG();\n    ɵngcc0.ɵɵelementStart(2, \"svg\", 12);\n    ɵngcc0.ɵɵelement(3, \"path\", 17);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵnamespaceHTML();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 18);\n    ɵngcc0.ɵɵlistener(\"click\", function MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_7_Template_h4_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r17 = ɵngcc0.ɵɵnextContext(3); return ctx_r17.contextEmit(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.context-tool\"), \" \");\n} }\nfunction MapDetailsToolComponent_ng_template_2_mat_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-list\");\n    ɵngcc0.ɵɵelementStart(1, \"p\", 9);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, MapDetailsToolComponent_ng_template_2_mat_list_0_p_4_Template, 3, 3, \"p\", 10);\n    ɵngcc0.ɵɵtemplate(5, MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_5_Template, 7, 3, \"mat-list-item\", 8);\n    ɵngcc0.ɵɵtemplate(6, MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_6_Template, 7, 3, \"mat-list-item\", 8);\n    ɵngcc0.ɵɵtemplate(7, MapDetailsToolComponent_ng_template_2_mat_list_0_mat_list_item_7_Template, 7, 3, \"mat-list-item\", 8);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 5, \"igo.integration.mapTool.empty\"), \"\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && (ctx_r8.searchToolInToolbar || ctx_r8.catalogToolInToolbar || ctx_r8.contextToolInToolbar));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.searchToolInToolbar);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.catalogToolInToolbar);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.contextToolInToolbar);\n} }\nfunction MapDetailsToolComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MapDetailsToolComponent_ng_template_2_mat_list_0_Template, 8, 7, \"mat-list\", 8);\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.delayedShowEmptyMapContent);\n} }\nfunction MapToolComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelement(0, \"igo-workspace-button\", 4);\n    ɵngcc0.ɵɵelementStart(1, \"igo-export-button\", 5);\n    ɵngcc0.ɵɵlistener(\"click\", function MapToolComponent_ng_template_4_Template_igo_export_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r4); const layer_r2 = ctx.layer; const ctx_r3 = ɵngcc0.ɵɵnextContext(); return ctx_r3.activateExport(layer_r2.id); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(2, \"igo-ogc-filter-button\", 6);\n    ɵngcc0.ɵɵelement(3, \"igo-time-filter-button\", 6);\n    ɵngcc0.ɵɵelement(4, \"igo-track-feature-button\", 7);\n    ɵngcc0.ɵɵelement(5, \"igo-metadata-button\", 4);\n} if (rf & 2) {\n    const layer_r2 = ctx.layer;\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"header\", ctx_r1.ogcButton)(\"layer\", layer_r2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"header\", ctx_r1.timeButton)(\"layer\", layer_r2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"trackFeature\", true)(\"layer\", layer_r2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r2);\n} }\nconst _c0 = [\"tabGroup\"];\nfunction MapToolsComponent_igo_layer_list_5_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelement(0, \"igo-workspace-button\", 10);\n    ɵngcc0.ɵɵelementStart(1, \"igo-export-button\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function MapToolsComponent_igo_layer_list_5_ng_template_1_Template_igo_export_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r11); const layer_r9 = ctx.layer; const ctx_r10 = ɵngcc0.ɵɵnextContext(2); return ctx_r10.activateExport(layer_r9.id); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"igo-ogc-filter-button\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function MapToolsComponent_igo_layer_list_5_ng_template_1_Template_igo_ogc_filter_button_click_2_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.activateOgcFilter(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"igo-time-filter-button\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function MapToolsComponent_igo_layer_list_5_ng_template_1_Template_igo_time_filter_button_click_3_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r13 = ɵngcc0.ɵɵnextContext(2); return ctx_r13.activateTimeFilter(); });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(4, \"igo-track-feature-button\", 13);\n    ɵngcc0.ɵɵelement(5, \"igo-metadata-button\", 10);\n} if (rf & 2) {\n    const layer_r9 = ctx.layer;\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r9);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r9);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"header\", ctx_r8.ogcButton)(\"layer\", layer_r9);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"header\", ctx_r8.timeButton)(\"layer\", layer_r9);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"trackFeature\", true)(\"layer\", layer_r9);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"layer\", layer_r9);\n} }\nfunction MapToolsComponent_igo_layer_list_5_Template(rf, ctx) { if (rf & 1) {\n    const _r15 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-layer-list\", 8);\n    ɵngcc0.ɵɵlistener(\"appliedFilterAndSort\", function MapToolsComponent_igo_layer_list_5_Template_igo_layer_list_appliedFilterAndSort_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r15); const ctx_r14 = ɵngcc0.ɵɵnextContext(); return ctx_r14.onLayerListChange($event); });\n    ɵngcc0.ɵɵtemplate(1, MapToolsComponent_igo_layer_list_5_ng_template_1_Template, 6, 9, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"excludeBaseLayers\", ctx_r1.excludeBaseLayers)(\"layerFilterAndSortOptions\", ctx_r1.layerFilterAndSortOptions)(\"expandLegendOfVisibleLayers\", ctx_r1.expandLegendOfVisibleLayers)(\"toggleLegendOnVisibilityChange\", ctx_r1.toggleLegendOnVisibilityChange)(\"updateLegendOnResolutionChange\", ctx_r1.updateLegendOnResolutionChange)(\"floatLabel\", false)(\"queryBadge\", ctx_r1.queryBadge)(\"map\", ctx_r1.map);\n} }\nfunction MapToolsComponent_igo_layer_legend_list_9_Template(rf, ctx) { if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-layer-legend-list\", 14);\n    ɵngcc0.ɵɵlistener(\"allLegendsShown\", function MapToolsComponent_igo_layer_legend_list_9_Template_igo_layer_legend_list_allLegendsShown_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r17); const ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16.onShowAllLegends($event); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"allowShowAllLegends\", ctx_r2.allowShowAllLegends)(\"showAllLegendsValue\", ɵngcc0.ɵɵpipeBind1(1, 4, ctx_r2.showAllLegendsValue$))(\"excludeBaseLayers\", ctx_r2.excludeBaseLayers)(\"updateLegendOnResolutionChange\", ctx_r2.updateLegendOnResolutionChange);\n} }\nfunction MapToolsComponent_10_ng_template_0_Template(rf, ctx) { }\nfunction MapToolsComponent_10_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MapToolsComponent_10_ng_template_0_Template, 0, 0, \"ng-template\");\n} }\nfunction MapToolsComponent_p_12_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 15);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r4.visibleLayers$).length ? ɵngcc0.ɵɵpipeBind1(3, 3, \"igo.integration.mapTool.noLayersInRange\") : ɵngcc0.ɵɵpipeBind1(4, 5, \"igo.integration.mapTool.noLayersVisible\"), \" \");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_p_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 15);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.integration.mapTool.customize\"), \"\");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_5_Template(rf, ctx) { if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 17);\n    ɵngcc0.ɵɵnamespaceSVG();\n    ɵngcc0.ɵɵelementStart(2, \"svg\", 18);\n    ɵngcc0.ɵɵelement(3, \"path\", 19);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵnamespaceHTML();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 20);\n    ɵngcc0.ɵɵlistener(\"click\", function MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_5_Template_h4_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r25); const ctx_r24 = ɵngcc0.ɵɵnextContext(3); return ctx_r24.searchEmit(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.search-tool\"), \" \");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_6_Template(rf, ctx) { if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 17);\n    ɵngcc0.ɵɵnamespaceSVG();\n    ɵngcc0.ɵɵelementStart(2, \"svg\", 18);\n    ɵngcc0.ɵɵelement(3, \"path\", 21);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵnamespaceHTML();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 22);\n    ɵngcc0.ɵɵlistener(\"click\", function MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_6_Template_h4_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r27); const ctx_r26 = ɵngcc0.ɵɵnextContext(3); return ctx_r26.catalogEmit(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.catalog-tool\"), \" \");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_7_Template(rf, ctx) { if (rf & 1) {\n    const _r29 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 17);\n    ɵngcc0.ɵɵnamespaceSVG();\n    ɵngcc0.ɵɵelementStart(2, \"svg\", 18);\n    ɵngcc0.ɵɵelement(3, \"path\", 23);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵnamespaceHTML();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_7_Template_h4_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r29); const ctx_r28 = ɵngcc0.ɵɵnextContext(3); return ctx_r28.contextEmit(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.context-tool\"), \" \");\n} }\nfunction MapToolsComponent_ng_template_15_mat_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-list\");\n    ɵngcc0.ɵɵelementStart(1, \"p\", 15);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, MapToolsComponent_ng_template_15_mat_list_0_p_4_Template, 3, 3, \"p\", 6);\n    ɵngcc0.ɵɵtemplate(5, MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_5_Template, 7, 3, \"mat-list-item\", 16);\n    ɵngcc0.ɵɵtemplate(6, MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_6_Template, 7, 3, \"mat-list-item\", 16);\n    ɵngcc0.ɵɵtemplate(7, MapToolsComponent_ng_template_15_mat_list_0_mat_list_item_7_Template, 7, 3, \"mat-list-item\", 16);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 5, \"igo.integration.mapTool.empty\"), \"\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r19.layerAdditionAllowed && (ctx_r19.searchToolInToolbar || ctx_r19.catalogToolInToolbar || ctx_r19.contextToolInToolbar));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r19.layerAdditionAllowed && ctx_r19.searchToolInToolbar);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r19.layerAdditionAllowed && ctx_r19.catalogToolInToolbar);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r19.layerAdditionAllowed && ctx_r19.contextToolInToolbar);\n} }\nfunction MapToolsComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MapToolsComponent_ng_template_15_mat_list_0_Template, 8, 7, \"mat-list\", 16);\n} if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r6.delayedShowEmptyMapContent);\n} }\nfunction MapLegendToolComponent_igo_layer_legend_list_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-layer-legend-list\", 4);\n    ɵngcc0.ɵɵlistener(\"allLegendsShown\", function MapLegendToolComponent_igo_layer_legend_list_0_Template_igo_layer_legend_list_allLegendsShown_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r6); const ctx_r5 = ɵngcc0.ɵɵnextContext(); return ctx_r5.onShowAllLegends($event); });\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"excludeBaseLayers\", ctx_r0.excludeBaseLayers)(\"allowShowAllLegends\", ctx_r0.allowShowAllLegends)(\"updateLegendOnResolutionChange\", ctx_r0.updateLegendOnResolutionChange)(\"showAllLegendsValue\", ɵngcc0.ɵɵpipeBind1(1, 4, ctx_r0.showAllLegendsValue$));\n} }\nfunction MapLegendToolComponent_1_ng_template_0_Template(rf, ctx) { }\nfunction MapLegendToolComponent_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MapLegendToolComponent_1_ng_template_0_Template, 0, 0, \"ng-template\");\n} }\nfunction MapLegendToolComponent_p_3_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 5);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵpipe(4, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, ctx_r2.visibleLayers$).length ? ɵngcc0.ɵɵpipeBind1(3, 3, \"igo.integration.mapTool.noLayersInRange\") : ɵngcc0.ɵɵpipeBind1(4, 5, \"igo.integration.mapTool.noLayersVisible\"), \"\\n\");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_p_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 5);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵpipe(2, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(2, 1, \"igo.integration.mapTool.customize\"), \"\");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_5_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵngcc0.ɵɵnamespaceSVG();\n    ɵngcc0.ɵɵelementStart(2, \"svg\", 8);\n    ɵngcc0.ɵɵelement(3, \"path\", 9);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵnamespaceHTML();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_5_Template_h4_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(3); return ctx_r13.searchEmit(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.search-tool\"), \" \");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_6_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵngcc0.ɵɵnamespaceSVG();\n    ɵngcc0.ɵɵelementStart(2, \"svg\", 8);\n    ɵngcc0.ɵɵelement(3, \"path\", 11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵnamespaceHTML();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_6_Template_h4_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r15 = ɵngcc0.ɵɵnextContext(3); return ctx_r15.catalogEmit(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.catalog-tool\"), \" \");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_7_Template(rf, ctx) { if (rf & 1) {\n    const _r18 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"mat-list-item\");\n    ɵngcc0.ɵɵelementStart(1, \"mat-icon\", 7);\n    ɵngcc0.ɵɵnamespaceSVG();\n    ɵngcc0.ɵɵelementStart(2, \"svg\", 8);\n    ɵngcc0.ɵɵelement(3, \"path\", 13);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵnamespaceHTML();\n    ɵngcc0.ɵɵelementStart(4, \"h4\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_7_Template_h4_click_4_listener() { ɵngcc0.ɵɵrestoreView(_r18); const ctx_r17 = ɵngcc0.ɵɵnextContext(3); return ctx_r17.contextEmit(); });\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵpipe(6, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(5);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(6, 1, \"igo.integration.mapTool.context-tool\"), \" \");\n} }\nfunction MapLegendToolComponent_ng_template_6_mat_list_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"mat-list\");\n    ɵngcc0.ɵɵelementStart(1, \"p\", 5);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵpipe(3, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, MapLegendToolComponent_ng_template_6_mat_list_0_p_4_Template, 3, 3, \"p\", 2);\n    ɵngcc0.ɵɵtemplate(5, MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_5_Template, 7, 3, \"mat-list-item\", 6);\n    ɵngcc0.ɵɵtemplate(6, MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_6_Template, 7, 3, \"mat-list-item\", 6);\n    ɵngcc0.ɵɵtemplate(7, MapLegendToolComponent_ng_template_6_mat_list_0_mat_list_item_7_Template, 7, 3, \"mat-list-item\", 6);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ɵngcc0.ɵɵpipeBind1(3, 5, \"igo.integration.mapTool.empty\"), \"\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && (ctx_r8.searchToolInToolbar || ctx_r8.catalogToolInToolbar || ctx_r8.contextToolInToolbar));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.searchToolInToolbar);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.catalogToolInToolbar);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.layerAdditionAllowed && ctx_r8.contextToolInToolbar);\n} }\nfunction MapLegendToolComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, MapLegendToolComponent_ng_template_6_mat_list_0_Template, 8, 7, \"mat-list\", 6);\n} if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.delayedShowEmptyMapContent);\n} }\nfunction SearchResultsToolComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵelementStart(1, \"section\", 3);\n    ɵngcc0.ɵɵelementStart(2, \"h4\");\n    ɵngcc0.ɵɵelementStart(3, \"strong\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵpipe(5, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(6, \"p\");\n    ɵngcc0.ɵɵelementStart(7, \"strong\");\n    ɵngcc0.ɵɵtext(8);\n    ɵngcc0.ɵɵpipe(9, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(10, \"div\", 4);\n    ɵngcc0.ɵɵpipe(11, \"sanitizeHtml\");\n    ɵngcc0.ɵɵpipe(12, \"translate\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(5, 3, \"igo.integration.searchResultsTool.noResults\"));\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind1(9, 5, \"igo.integration.searchResultsTool.doSearch\"));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"innerHTML\", ɵngcc0.ɵɵpipeBind1(11, 7, ɵngcc0.ɵɵpipeBind1(12, 9, \"igo.integration.searchResultsTool.examples\")), ɵngcc0.ɵɵsanitizeHtml);\n} }\nfunction SearchResultsToolComponent_igo_flexible_1_ng_template_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"igo-search-add-button\", 12);\n} if (rf & 2) {\n    const result_r6 = ctx.result;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"map\", ctx_r4.map)(\"layer\", result_r6);\n} }\nfunction SearchResultsToolComponent_igo_flexible_1_igo_panel_8_button_4_Template(rf, ctx) { if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"button\", 18);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchResultsToolComponent_igo_flexible_1_igo_panel_8_button_4_Template_button_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r9); const ctx_r8 = ɵngcc0.ɵɵnextContext(3); return ctx_r8.zoomToFeatureExtent(); });\n    ɵngcc0.ɵɵelement(1, \"mat-icon\", 19);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction SearchResultsToolComponent_igo_flexible_1_igo_panel_8_Template(rf, ctx) { if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-panel\", 13);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 14);\n    ɵngcc0.ɵɵlistener(\"click\", function SearchResultsToolComponent_igo_flexible_1_igo_panel_8_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r10 = ɵngcc0.ɵɵnextContext(2); return ctx_r10.toggleTopPanel(); });\n    ɵngcc0.ɵɵelement(2, \"mat-icon\", 15);\n    ɵngcc0.ɵɵpipe(3, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, SearchResultsToolComponent_igo_flexible_1_igo_panel_8_button_4_Template, 2, 0, \"button\", 16);\n    ɵngcc0.ɵɵelementStart(5, \"igo-feature-details\", 17);\n    ɵngcc0.ɵɵlistener(\"routingEvent\", function SearchResultsToolComponent_igo_flexible_1_igo_panel_8_Template_igo_feature_details_routingEvent_5_listener($event) { ɵngcc0.ɵɵrestoreView(_r11); const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.getRoute($event); });\n    ɵngcc0.ɵɵpipe(6, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"title\", ctx_r5.featureTitle);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"svgIcon\", ɵngcc0.ɵɵpipeBind1(3, 6, ctx_r5.topPanelState$) === \"collapsed\" ? \"arrow-up\" : \"arrow-down\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r5.feature.geometry);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"feature\", ɵngcc0.ɵɵpipeBind1(6, 8, ctx_r5.feature$))(\"map\", ctx_r5.map)(\"toolbox\", ctx_r5.toolState.toolbox);\n} }\nfunction SearchResultsToolComponent_igo_flexible_1_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"igo-flexible\", 5, 6);\n    ɵngcc0.ɵɵpipe(2, \"async\");\n    ɵngcc0.ɵɵelementStart(3, \"div\", 7);\n    ɵngcc0.ɵɵelementStart(4, \"igo-search-results\", 8);\n    ɵngcc0.ɵɵlistener(\"resultFocus\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultFocus_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(); return ctx_r13.onResultFocus($event); })(\"resultSelect\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultSelect_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r15 = ɵngcc0.ɵɵnextContext(); return ctx_r15.onResultSelect($event); })(\"resultUnfocus\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultUnfocus_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r16 = ɵngcc0.ɵɵnextContext(); return ctx_r16.onResultUnfocus($event); })(\"resultMouseenter\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultMouseenter_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r17 = ɵngcc0.ɵɵnextContext(); return ctx_r17.onResultFocus($event); })(\"resultMouseleave\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_resultMouseleave_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r18 = ɵngcc0.ɵɵnextContext(); return ctx_r18.onResultUnfocus($event); })(\"moreResults\", function SearchResultsToolComponent_igo_flexible_1_Template_igo_search_results_moreResults_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19.onSearch($event); });\n    ɵngcc0.ɵɵtemplate(5, SearchResultsToolComponent_igo_flexible_1_ng_template_5_Template, 1, 2, \"ng-template\", null, 9, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"div\", 10);\n    ɵngcc0.ɵɵtemplate(8, SearchResultsToolComponent_igo_flexible_1_igo_panel_8_Template, 7, 10, \"igo-panel\", 11);\n    ɵngcc0.ɵɵpipe(9, \"async\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"state\", ɵngcc0.ɵɵpipeBind1(2, 6, ctx_r1.feature$) ? ctx_r1.topPanelState : \"initial\");\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"store\", ctx_r1.store)(\"showIcons\", ctx_r1.showIcons)(\"term\", ctx_r1.term)(\"settingsChange$\", ctx_r1.settingsChange$);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(9, 8, ctx_r1.feature$));\n} }\nfunction SpatialFilterToolComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelement(1, \"igo-feature-details\", 3);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const feature_r1 = ctx.ngIf;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"feature\", feature_r1);\n} }\nconst _c1 = function (a0) { return { version: a0 }; };\nclass IgoAppAnalyticsModule {\n}\nIgoAppAnalyticsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppAnalyticsModule });\nIgoAppAnalyticsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppAnalyticsModule_Factory(t) { return new (t || IgoAppAnalyticsModule)(); }, imports: [[]] });\n\n/**\n * Service that holds the state of the importExport module\n */\nclass ImportExportState {\n    constructor() {\n        this.selectedMode$ = new BehaviorSubject(undefined);\n        this.exportOptions$ = new BehaviorSubject(undefined);\n    }\n    setMode(mode) {\n        this.selectedMode$.next(mode);\n    }\n    setsExportOptions(exportOptions) {\n        this.exportOptions$.next(exportOptions);\n    }\n}\nImportExportState.ɵfac = function ImportExportState_Factory(t) { return new (t || ImportExportState)(); };\nImportExportState.ɵprov = ɵɵdefineInjectable({ factory: function ImportExportState_Factory() { return new ImportExportState(); }, token: ImportExportState, providedIn: \"root\" });\n\n/**\n * Service that holds the state of the search module\n */\nclass ToolState {\n    constructor(toolService, importExportState) {\n        this.toolService = toolService;\n        this.importExportState = importExportState;\n        this.openSidenav$ = new BehaviorSubject(undefined);\n    }\n    get toolbox() {\n        return this.toolService.toolbox;\n    }\n    toolToActivateFromOptions(toolToActivate) {\n        if (!toolToActivate) {\n            return;\n        }\n        if (toolToActivate.tool === 'importExport') {\n            let exportOptions = this.importExportState.exportOptions$.value;\n            if (!exportOptions) {\n                exportOptions = {\n                    layers: toolToActivate.options.layers,\n                    featureInMapExtent: toolToActivate.options.featureInMapExtent\n                };\n            }\n            else {\n                exportOptions.layers = toolToActivate.options.layers;\n                exportOptions.featureInMapExtent = toolToActivate.options.featureInMapExtent;\n            }\n            this.importExportState.setsExportOptions(exportOptions);\n            this.importExportState.setMode('export');\n        }\n        if (this.toolbox.getTool(toolToActivate.tool)) {\n            this.toolbox.activateTool(toolToActivate.tool);\n            this.openSidenav$.next(true);\n        }\n    }\n}\nToolState.ɵfac = function ToolState_Factory(t) { return new (t || ToolState)(ɵngcc0.ɵɵinject(ɵngcc1.ToolService), ɵngcc0.ɵɵinject(ImportExportState)); };\nToolState.ɵprov = ɵɵdefineInjectable({ factory: function ToolState_Factory() { return new ToolState(ɵɵinject(ToolService), ɵɵinject(ImportExportState)); }, token: ToolState, providedIn: \"root\" });\nToolState.ctorParameters = () => [\n    { type: ToolService },\n    { type: ImportExportState }\n];\n\nlet ContextEditorToolComponent = class ContextEditorToolComponent {\n    constructor(toolState) {\n        this.toolState = toolState;\n    }\n    submitSuccessed() {\n        this.toolState.toolbox.activatePreviousTool();\n    }\n};\nContextEditorToolComponent.ɵfac = function ContextEditorToolComponent_Factory(t) { return new (t || ContextEditorToolComponent)(ɵngcc0.ɵɵdirectiveInject(ToolState)); };\nContextEditorToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextEditorToolComponent, selectors: [[\"igo-context-editor-tool\"]], decls: 1, vars: 0, consts: [[\"igoContextEditBinding\", \"\", 3, \"submitSuccessed\"]], template: function ContextEditorToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-context-edit\", 0);\n        ɵngcc0.ɵɵlistener(\"submitSuccessed\", function ContextEditorToolComponent_Template_igo_context_edit_submitSuccessed_0_listener() { return ctx.submitSuccessed(); });\n        ɵngcc0.ɵɵelementEnd();\n    } }, directives: [ɵngcc2.ContextEditComponent, ɵngcc2.ContextEditBindingDirective], encapsulation: 2 });\nContextEditorToolComponent.ctorParameters = () => [\n    { type: ToolState }\n];\nContextEditorToolComponent = __decorate([\n    ToolComponent({\n        name: 'contextEditor',\n        title: 'igo.integration.tools.contexts',\n        icon: 'star',\n        parent: 'contextManager'\n    }),\n    __metadata(\"design:paramtypes\", [ToolState])\n], ContextEditorToolComponent);\n\n/**\n * Service that holds the state of the map module\n */\nclass MapState {\n    constructor(mapService, projectionService // Don't remove this or it'll never be injected\n    ) {\n        this.mapService = mapService;\n        this.projectionService = projectionService;\n        this._map = new IgoMap({\n            controls: {\n                scaleLine: true,\n                attribution: {\n                    collapsed: true\n                }\n            }\n        });\n        this.mapService.setMap(this.map);\n    }\n    get showAllLegendsValue() {\n        return this._legendToolShowAll;\n    }\n    set showAllLegendsValue(value) {\n        this._legendToolShowAll = value;\n    }\n    /**\n     * Active map\n     */\n    get map() { return this._map; }\n}\nMapState.ɵfac = function MapState_Factory(t) { return new (t || MapState)(ɵngcc0.ɵɵinject(ɵngcc3.MapService), ɵngcc0.ɵɵinject(ɵngcc3.ProjectionService)); };\nMapState.ɵprov = ɵɵdefineInjectable({ factory: function MapState_Factory() { return new MapState(ɵɵinject(MapService), ɵɵinject(ProjectionService)); }, token: MapState, providedIn: \"root\" });\nMapState.ctorParameters = () => [\n    { type: MapService },\n    { type: ProjectionService }\n];\n\nlet ContextManagerToolComponent = class ContextManagerToolComponent {\n    constructor(toolState, mapState) {\n        this.toolState = toolState;\n        this.mapState = mapState;\n        this.toolToOpenOnContextChange = 'mapTools';\n    }\n    get map() { return this.mapState.map; }\n    editContext() {\n        this.toolState.toolbox.activateTool('contextEditor');\n    }\n    managePermissions() {\n        this.toolState.toolbox.activateTool('contextPermissionManager');\n    }\n};\nContextManagerToolComponent.ɵfac = function ContextManagerToolComponent_Factory(t) { return new (t || ContextManagerToolComponent)(ɵngcc0.ɵɵdirectiveInject(ToolState), ɵngcc0.ɵɵdirectiveInject(MapState)); };\nContextManagerToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextManagerToolComponent, selectors: [[\"igo-context-manager-tool\"]], inputs: { toolToOpenOnContextChange: \"toolToOpenOnContextChange\" }, decls: 1, vars: 1, consts: [[\"igoContextListBinding\", \"\", 3, \"map\", \"edit\", \"managePermissions\"]], template: function ContextManagerToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-context-list\", 0);\n        ɵngcc0.ɵɵlistener(\"edit\", function ContextManagerToolComponent_Template_igo_context_list_edit_0_listener() { return ctx.editContext(); })(\"managePermissions\", function ContextManagerToolComponent_Template_igo_context_list_managePermissions_0_listener() { return ctx.managePermissions(); });\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"map\", ctx.map);\n    } }, directives: [ɵngcc2.ContextListComponent, ɵngcc2.ContextListBindingDirective], encapsulation: 2 });\nContextManagerToolComponent.ctorParameters = () => [\n    { type: ToolState },\n    { type: MapState }\n];\nContextManagerToolComponent.propDecorators = {\n    toolToOpenOnContextChange: [{ type: Input }]\n};\nContextManagerToolComponent = __decorate([\n    ToolComponent({\n        name: 'contextManager',\n        title: 'igo.integration.tools.contexts',\n        icon: 'star'\n    }),\n    __metadata(\"design:paramtypes\", [ToolState, MapState])\n], ContextManagerToolComponent);\n\nlet ContextPermissionManagerToolComponent = class ContextPermissionManagerToolComponent {\n};\nContextPermissionManagerToolComponent.ɵfac = function ContextPermissionManagerToolComponent_Factory(t) { return new (t || ContextPermissionManagerToolComponent)(); };\nContextPermissionManagerToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextPermissionManagerToolComponent, selectors: [[\"igo-context-permission-manager-tool\"]], decls: 1, vars: 0, consts: [[\"igoContextPermissionsBinding\", \"\"]], template: function ContextPermissionManagerToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-context-permissions\", 0);\n    } }, directives: [ɵngcc2.ContextPermissionsComponent, ɵngcc2.ContextPermissionsBindingDirective], encapsulation: 2 });\nContextPermissionManagerToolComponent = __decorate([\n    ToolComponent({\n        name: 'contextPermissionManager',\n        title: 'igo.integration.tools.contexts',\n        icon: 'star',\n        parent: 'contextManager'\n    })\n], ContextPermissionManagerToolComponent);\n\n/**\n * Service that holds the state of layer list tool values\n */\nclass LayerListToolState {\n    constructor() {\n        this.keyword$ = new BehaviorSubject('');\n        this.sortAlpha$ = new BehaviorSubject(undefined);\n        this.onlyVisible$ = new BehaviorSubject(undefined);\n        this.selectedTab$ = new BehaviorSubject(undefined);\n    }\n    setKeyword(keyword) {\n        this.keyword$.next(keyword);\n    }\n    setSortAlpha(sort) {\n        this.sortAlpha$.next(sort);\n    }\n    setOnlyVisible(onlyVisible) {\n        this.onlyVisible$.next(onlyVisible);\n    }\n    setSelectedTab(tab) {\n        this.selectedTab$.next(tab);\n    }\n    getLayerListControls() {\n        return {\n            keyword: this.keyword$.value,\n            onlyVisible: this.onlyVisible$.value,\n            sortAlpha: this.sortAlpha$.value\n        };\n    }\n}\nLayerListToolState.ɵfac = function LayerListToolState_Factory(t) { return new (t || LayerListToolState)(); };\nLayerListToolState.ɵprov = ɵɵdefineInjectable({ factory: function LayerListToolState_Factory() { return new LayerListToolState(); }, token: LayerListToolState, providedIn: \"root\" });\n\nlet ContextShareToolComponent = class ContextShareToolComponent {\n    constructor(mapState, layerListToolState) {\n        this.mapState = mapState;\n        this.layerListToolState = layerListToolState;\n    }\n    get map() { return this.mapState.map; }\n    get layerListControls() { return this.layerListToolState.getLayerListControls(); }\n};\nContextShareToolComponent.ɵfac = function ContextShareToolComponent_Factory(t) { return new (t || ContextShareToolComponent)(ɵngcc0.ɵɵdirectiveInject(MapState), ɵngcc0.ɵɵdirectiveInject(LayerListToolState)); };\nContextShareToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ContextShareToolComponent, selectors: [[\"igo-context-share-tool\"]], decls: 1, vars: 1, consts: [[3, \"map\"]], template: function ContextShareToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-share-map\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"map\", ctx.map);\n    } }, directives: [ɵngcc2.ShareMapComponent], encapsulation: 2 });\nContextShareToolComponent.ctorParameters = () => [\n    { type: MapState },\n    { type: LayerListToolState }\n];\nContextShareToolComponent = __decorate([\n    ToolComponent({\n        name: 'shareMap',\n        title: 'igo.integration.tools.shareMap',\n        icon: 'share-variant'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        LayerListToolState])\n], ContextShareToolComponent);\n\nclass IgoAppContextModule {\n}\nIgoAppContextModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppContextModule });\nIgoAppContextModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppContextModule_Factory(t) { return new (t || IgoAppContextModule)(); }, imports: [[IgoContextModule]] });\n\n/**\n * Service that holds the state of the catalog module\n */\nclass CatalogState {\n    constructor(authService) {\n        /**\n         * Catalog -> Catalog items store mapping\n         */\n        this.catalogItemsStores = new Map();\n        this._catalogStore = new EntityStore([]);\n        authService.authenticate$.subscribe(() => {\n            this.clearCatalogItemsStores();\n        });\n    }\n    /**\n     * Store that contains all the catalogs\n     */\n    get catalogStore() { return this._catalogStore; }\n    /**\n     * Get a catalog's items store\n     * @param catalog Catalog\n     * @returns Store that contains the catalog items\n     */\n    getCatalogItemsStore(catalog) {\n        return this.catalogItemsStores.get(catalog.id);\n    }\n    /**\n     * Bind a catalog items store to a catalog\n     * @param catalog Catalog\n     * @param store Catalog items store\n     */\n    setCatalogItemsStore(catalog, store) {\n        this.catalogItemsStores.set(catalog.id, store);\n    }\n    /**\n     * Clear all catalog items stores\n     */\n    clearCatalogItemsStores() {\n        this.catalogItemsStores.clear();\n    }\n}\nCatalogState.ɵfac = function CatalogState_Factory(t) { return new (t || CatalogState)(ɵngcc0.ɵɵinject(ɵngcc4.AuthService)); };\nCatalogState.ɵprov = ɵɵdefineInjectable({ factory: function CatalogState_Factory() { return new CatalogState(ɵɵinject(AuthService)); }, token: CatalogState, providedIn: \"root\" });\nCatalogState.ctorParameters = () => [\n    { type: AuthService }\n];\n\n/**\n * Tool to browse the list of available catalogs.\n */\nlet CatalogLibraryToolComponent = class CatalogLibraryToolComponent {\n    constructor(catalogService, catalogState, toolState) {\n        this.catalogService = catalogService;\n        this.catalogState = catalogState;\n        this.toolState = toolState;\n    }\n    /**\n     * Store that contains the catalogs\n     * @internal\n     */\n    get store() {\n        return this.catalogState.catalogStore;\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        if (this.store.count === 0) {\n            this.loadCatalogs();\n        }\n    }\n    /**\n     * When the selected catalog changes, toggle the the CatalogBrowser tool.\n     * @internal\n     * @param event Select event\n     */\n    onCatalogSelectChange(event) {\n        if (event.selected === false) {\n            return;\n        }\n        this.toolState.toolbox.activateTool('catalogBrowser');\n    }\n    /**\n     * Get all the available catalogs from the CatalogService and\n     * load them into the store.\n     */\n    loadCatalogs() {\n        this.catalogService.loadCatalogs().subscribe((catalogs) => {\n            this.store.clear();\n            this.store.load(catalogs);\n        });\n    }\n};\nCatalogLibraryToolComponent.ɵfac = function CatalogLibraryToolComponent_Factory(t) { return new (t || CatalogLibraryToolComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc3.CatalogService), ɵngcc0.ɵɵdirectiveInject(CatalogState), ɵngcc0.ɵɵdirectiveInject(ToolState)); };\nCatalogLibraryToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CatalogLibraryToolComponent, selectors: [[\"igo-catalog-library-tool\"]], decls: 1, vars: 1, consts: [[3, \"store\", \"catalogSelectChange\"]], template: function CatalogLibraryToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-catalog-library\", 0);\n        ɵngcc0.ɵɵlistener(\"catalogSelectChange\", function CatalogLibraryToolComponent_Template_igo_catalog_library_catalogSelectChange_0_listener($event) { return ctx.onCatalogSelectChange($event); });\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"store\", ctx.store);\n    } }, directives: [ɵngcc3.CatalogLibaryComponent], encapsulation: 2, changeDetection: 0 });\nCatalogLibraryToolComponent.ctorParameters = () => [\n    { type: CatalogService },\n    { type: CatalogState },\n    { type: ToolState }\n];\nCatalogLibraryToolComponent = __decorate([\n    ToolComponent({\n        name: 'catalog',\n        title: 'igo.integration.tools.catalog',\n        icon: 'layers-plus'\n    }),\n    __metadata(\"design:paramtypes\", [CatalogService,\n        CatalogState,\n        ToolState])\n], CatalogLibraryToolComponent);\n\n/**\n * @ignore\n */\nclass IgoAppCatalogLibraryToolModule {\n}\nIgoAppCatalogLibraryToolModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppCatalogLibraryToolModule });\nIgoAppCatalogLibraryToolModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppCatalogLibraryToolModule_Factory(t) { return new (t || IgoAppCatalogLibraryToolModule)(); }, imports: [[\n            CommonModule,\n            IgoCatalogLibraryModule\n        ]] });\n\n/**\n * Tool to browse a catalog's groups and layers and display them to a map.\n */\nlet CatalogBrowserToolComponent = class CatalogBrowserToolComponent {\n    constructor(catalogService, catalogState, mapState, authService) {\n        this.catalogService = catalogService;\n        this.catalogState = catalogState;\n        this.mapState = mapState;\n        this.authService = authService;\n        /**\n         * Store that contains the catalog items\n         * @internal\n         */\n        this.store$ = new BehaviorSubject(undefined);\n        /**\n         * Whether a group can be toggled when it's collapsed\n         */\n        this.toggleCollapsedGroup = true;\n    }\n    /**\n     * Map to add layers to\n     * @internal\n     */\n    get map() {\n        return this.mapState.map;\n    }\n    /**\n     * @internal\n     */\n    ngOnInit() {\n        const catalogStore = this.catalogState.catalogStore;\n        this.catalog$$ = catalogStore.stateView\n            .firstBy$((record) => record.state.selected === true)\n            .subscribe((record) => {\n            if (record && record.entity) {\n                const catalog = record.entity;\n                this.catalog = catalog;\n            }\n        });\n        this.authenticate$$ = this.authService.authenticate$.subscribe(() => {\n            this.loadCatalogItems(this.catalog);\n        });\n    }\n    /**\n     * @internal\n     */\n    ngOnDestroy() {\n        this.catalog$$.unsubscribe();\n        this.authenticate$$.unsubscribe();\n    }\n    /**\n     * Get the selected catalog's items from the CatalogService and\n     * load them into the store.\n     * @param catalog Selected catalog\n     */\n    loadCatalogItems(catalog) {\n        let store = this.catalogState.getCatalogItemsStore(catalog);\n        if (store !== undefined) {\n            this.store$.next(store);\n            return;\n        }\n        store = new EntityStore([]);\n        this.catalogState.setCatalogItemsStore(catalog, store);\n        this.catalogService\n            .loadCatalogItems(catalog)\n            .subscribe((items) => {\n            store.load(items);\n            this.store$.next(store);\n        });\n    }\n};\nCatalogBrowserToolComponent.ɵfac = function CatalogBrowserToolComponent_Factory(t) { return new (t || CatalogBrowserToolComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc3.CatalogService), ɵngcc0.ɵɵdirectiveInject(CatalogState), ɵngcc0.ɵɵdirectiveInject(MapState), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.AuthService)); };\nCatalogBrowserToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: CatalogBrowserToolComponent, selectors: [[\"igo-catalog-browser-tool\"]], inputs: { toggleCollapsedGroup: \"toggleCollapsedGroup\" }, decls: 2, vars: 3, consts: [[3, \"catalog\", \"store\", \"map\", \"toggleCollapsedGroup\", 4, \"ngIf\"], [3, \"catalog\", \"store\", \"map\", \"toggleCollapsedGroup\"]], template: function CatalogBrowserToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, CatalogBrowserToolComponent_igo_catalog_browser_0_Template, 1, 4, \"igo-catalog-browser\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx.store$));\n    } }, directives: [ɵngcc5.NgIf, ɵngcc3.CatalogBrowserComponent], pipes: [ɵngcc5.AsyncPipe], encapsulation: 2, changeDetection: 0 });\nCatalogBrowserToolComponent.ctorParameters = () => [\n    { type: CatalogService },\n    { type: CatalogState },\n    { type: MapState },\n    { type: AuthService }\n];\nCatalogBrowserToolComponent.propDecorators = {\n    toggleCollapsedGroup: [{ type: Input }]\n};\nCatalogBrowserToolComponent = __decorate([\n    ToolComponent({\n        name: 'catalogBrowser',\n        title: 'igo.integration.tools.catalog',\n        icon: 'photo-browser',\n        parent: 'catalog'\n    }),\n    __metadata(\"design:paramtypes\", [CatalogService,\n        CatalogState,\n        MapState,\n        AuthService])\n], CatalogBrowserToolComponent);\n\n/**\n * @ignore\n */\nclass IgoAppCatalogBrowserToolModule {\n}\nIgoAppCatalogBrowserToolModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppCatalogBrowserToolModule });\nIgoAppCatalogBrowserToolModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppCatalogBrowserToolModule_Factory(t) { return new (t || IgoAppCatalogBrowserToolModule)(); }, imports: [[\n            CommonModule,\n            IgoCatalogBrowserModule\n        ]] });\n\nclass IgoAppCatalogModule {\n}\nIgoAppCatalogModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppCatalogModule });\nIgoAppCatalogModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppCatalogModule_Factory(t) { return new (t || IgoAppCatalogModule)(); }, imports: [[], IgoAppCatalogLibraryToolModule, IgoAppCatalogBrowserToolModule] });\n\n/**\n * Service that holds the state of the direction module\n */\nclass DirectionState {\n    constructor(mapState) {\n        this.mapState = mapState;\n        /**\n         * Store that holds the stop and the driving route\n         */\n        this.stopsStore = new FeatureStore([], {\n            map: this.mapState.map\n        });\n        /**\n         * Store that holds the driving route\n         */\n        this.routeStore = new FeatureStore([], {\n            map: this.mapState.map\n        });\n        this.routeFromFeatureDetail = false;\n    }\n    setRouteFromFeatureDetail(value) {\n        this.routeFromFeatureDetail = value;\n    }\n}\nDirectionState.ɵfac = function DirectionState_Factory(t) { return new (t || DirectionState)(ɵngcc0.ɵɵinject(MapState)); };\nDirectionState.ɵprov = ɵɵdefineInjectable({ factory: function DirectionState_Factory() { return new DirectionState(ɵɵinject(MapState)); }, token: DirectionState, providedIn: \"root\" });\nDirectionState.ctorParameters = () => [\n    { type: MapState }\n];\n\nlet DirectionsToolComponent = class DirectionsToolComponent {\n    constructor(directionState, mapState) {\n        this.directionState = directionState;\n        this.mapState = mapState;\n    }\n    /**\n     * stops\n     * @internal\n     */\n    get stopsStore() { return this.directionState.stopsStore; }\n    /**\n     * routes\n     * @internal\n     */\n    get routeStore() { return this.directionState.routeStore; }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get map() { return this.mapState.map; }\n    get routeFromFeatureDetail() {\n        return this.directionState.routeFromFeatureDetail;\n    }\n};\nDirectionsToolComponent.ɵfac = function DirectionsToolComponent_Factory(t) { return new (t || DirectionsToolComponent)(ɵngcc0.ɵɵdirectiveInject(DirectionState), ɵngcc0.ɵɵdirectiveInject(MapState)); };\nDirectionsToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: DirectionsToolComponent, selectors: [[\"igo-directions-tool\"]], decls: 1, vars: 4, consts: [[\"igoDirectionsFormBinding\", \"\", 3, \"stopsStore\", \"routeStore\", \"map\", \"routeFromFeatureDetail\"]], template: function DirectionsToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-directions-form\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"stopsStore\", ctx.stopsStore)(\"routeStore\", ctx.routeStore)(\"map\", ctx.map)(\"routeFromFeatureDetail\", ctx.routeFromFeatureDetail);\n    } }, directives: [ɵngcc3.DirectionsFormComponent, ɵngcc3.DirectionsFormBindingDirective], encapsulation: 2 });\nDirectionsToolComponent.ctorParameters = () => [\n    { type: DirectionState },\n    { type: MapState }\n];\nDirectionsToolComponent = __decorate([\n    ToolComponent({\n        name: 'directions',\n        title: 'igo.integration.tools.directions',\n        icon: 'directions'\n    }),\n    __metadata(\"design:paramtypes\", [DirectionState,\n        MapState])\n], DirectionsToolComponent);\n\nclass IgoAppDirectionsModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppDirectionsModule,\n            providers: []\n        };\n    }\n}\nIgoAppDirectionsModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppDirectionsModule });\nIgoAppDirectionsModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppDirectionsModule_Factory(t) { return new (t || IgoAppDirectionsModule)(); }, imports: [[IgoDirectionsModule]] });\n\n/**\n * Service that holds the state of storage service\n */\nclass StorageState {\n    constructor(igoStorageService) {\n        this.igoStorageService = igoStorageService;\n    }\n    get storageService() {\n        return this.igoStorageService;\n    }\n}\nStorageState.ɵfac = function StorageState_Factory(t) { return new (t || StorageState)(ɵngcc0.ɵɵinject(ɵngcc6.StorageService)); };\nStorageState.ɵprov = ɵɵdefineInjectable({ factory: function StorageState_Factory() { return new StorageState(ɵɵinject(StorageService)); }, token: StorageState, providedIn: \"root\" });\nStorageState.ctorParameters = () => [\n    { type: StorageService }\n];\n\nclass FeatureActionsService {\n    constructor(storageState, toolState) {\n        this.storageState = storageState;\n        this.toolState = toolState;\n        this.zoomAuto$ = new BehaviorSubject(false);\n    }\n    get storageService() {\n        return this.storageState.storageService;\n    }\n    get zoomAuto() {\n        return this.storageService.get('zoomAuto');\n    }\n    get rowsInMapExtent() {\n        return this.storageService.get('rowsInMapExtent');\n    }\n    ngOnDestroy() {\n        if (this.storageChange$$) {\n            this.storageChange$$.unsubscribe();\n        }\n    }\n    loadActions(workspace) {\n        const actions = this.buildActions(workspace);\n        workspace.actionStore.load(actions);\n    }\n    buildActions(workspace) {\n        this.zoomAuto$.next(this.zoomAuto);\n        this.storageChange$$ = this.storageService.storageChange$\n            .pipe(skipWhile((storageChange) => storageChange.key !== 'zoomAuto'))\n            .subscribe(() => {\n            this.zoomAuto$.next(this.zoomAuto);\n            this.handleZoomAuto(workspace);\n        });\n        return [\n            {\n                id: 'zoomAuto',\n                checkbox: true,\n                title: 'igo.geo.workspace.zoomAuto.title',\n                tooltip: featureMotionStrategyActiveToolTip(workspace),\n                checkCondition: this.zoomAuto$,\n                handler: () => {\n                    this.handleZoomAuto(workspace);\n                    this.storageService.set('zoomAuto', !this.storageService.get('zoomAuto'));\n                }\n            },\n            {\n                id: 'filterInMapExtent',\n                checkbox: true,\n                title: 'igo.geo.workspace.inMapExtent.title',\n                tooltip: mapExtentStrategyActiveToolTip(workspace),\n                checkCondition: this.rowsInMapExtent,\n                handler: () => {\n                    const filterStrategy = workspace.entityStore\n                        .getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n                    if (filterStrategy.active) {\n                        filterStrategy.deactivate();\n                    }\n                    else {\n                        filterStrategy.activate();\n                    }\n                    this.storageService\n                        .set('rowsInMapExtent', !this.storageService.get('rowsInMapExtent'), StorageScope.SESSION);\n                }\n            },\n            {\n                id: 'selectedOnly',\n                checkbox: true,\n                title: 'igo.geo.workspace.selected.title',\n                tooltip: 'selectedOnly',\n                checkCondition: false,\n                handler: () => {\n                    const filterStrategy = workspace.entityStore\n                        .getStrategyOfType(EntityStoreFilterSelectionStrategy);\n                    if (filterStrategy.active) {\n                        filterStrategy.deactivate();\n                    }\n                    else {\n                        filterStrategy.activate();\n                    }\n                }\n            },\n            {\n                id: 'clearselection',\n                icon: 'select-off',\n                title: 'igo.geo.workspace.clearSelection.title',\n                tooltip: 'igo.geo.workspace.clearSelection.tooltip',\n                handler: (ws) => {\n                    ws.entityStore.state.updateMany(ws.entityStore.view.all(), { selected: false });\n                },\n                args: [workspace],\n                availability: (ws) => noElementSelected(ws)\n            },\n            {\n                id: 'featureDownload',\n                icon: 'download',\n                title: 'igo.geo.workspace.download.title',\n                tooltip: 'igo.geo.workspace.download.tooltip',\n                handler: (ws) => {\n                    const filterStrategy = ws.entityStore.getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n                    const filterSelectionStrategy = ws.entityStore.getStrategyOfType(EntityStoreFilterSelectionStrategy);\n                    const layersWithSelection = filterSelectionStrategy.active ? [ws.layer.id] : [];\n                    this.toolState.toolToActivateFromOptions({\n                        tool: 'importExport',\n                        options: { layers: [ws.layer.id], featureInMapExtent: filterStrategy.active, layersWithSelection }\n                    });\n                },\n                args: [workspace]\n            }\n        ];\n    }\n    handleZoomAuto(workspace) {\n        const zoomStrategy = workspace.entityStore\n            .getStrategyOfType(FeatureStoreSelectionStrategy);\n        zoomStrategy.setMotion(this.zoomAuto ? FeatureMotion.Default : FeatureMotion.None);\n    }\n}\nFeatureActionsService.ɵfac = function FeatureActionsService_Factory(t) { return new (t || FeatureActionsService)(ɵngcc0.ɵɵinject(StorageState), ɵngcc0.ɵɵinject(ToolState)); };\nFeatureActionsService.ɵprov = ɵɵdefineInjectable({ factory: function FeatureActionsService_Factory() { return new FeatureActionsService(ɵɵinject(StorageState), ɵɵinject(ToolState)); }, token: FeatureActionsService, providedIn: \"root\" });\nFeatureActionsService.ctorParameters = () => [\n    { type: StorageState },\n    { type: ToolState }\n];\n\nclass WfsActionsService {\n    constructor(ogcFilterWidget, storageState, toolState) {\n        this.ogcFilterWidget = ogcFilterWidget;\n        this.storageState = storageState;\n        this.toolState = toolState;\n        this.zoomAuto$ = new BehaviorSubject(false);\n    }\n    get storageService() {\n        return this.storageState.storageService;\n    }\n    get zoomAuto() {\n        return this.storageService.get('zoomAuto');\n    }\n    get rowsInMapExtent() {\n        return this.storageService.get('rowsInMapExtent');\n    }\n    ngOnDestroy() {\n        if (this.storageChange$$) {\n            this.storageChange$$.unsubscribe();\n        }\n    }\n    loadActions(workspace) {\n        const actions = this.buildActions(workspace);\n        workspace.actionStore.load(actions);\n    }\n    buildActions(workspace) {\n        this.zoomAuto$.next(this.zoomAuto);\n        this.storageService.storageChange$\n            .pipe(skipWhile((storageChange) => storageChange.key !== 'zoomAuto'))\n            .subscribe(() => {\n            this.zoomAuto$.next(this.zoomAuto);\n            this.handleZoomAuto(workspace);\n        });\n        return [\n            {\n                id: 'zoomAuto',\n                checkbox: true,\n                title: 'igo.geo.workspace.zoomAuto.title',\n                tooltip: featureMotionStrategyActiveToolTip(workspace),\n                checkCondition: this.zoomAuto$,\n                handler: () => {\n                    this.handleZoomAuto(workspace);\n                    this.storageService.set('zoomAuto', !this.storageService.get('zoomAuto'));\n                }\n            },\n            {\n                id: 'filterInMapExtent',\n                checkbox: true,\n                title: 'igo.geo.workspace.inMapExtent.title',\n                tooltip: mapExtentStrategyActiveToolTip(workspace),\n                checkCondition: this.rowsInMapExtent,\n                handler: () => {\n                    const filterStrategy = workspace.entityStore\n                        .getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n                    if (filterStrategy.active) {\n                        filterStrategy.deactivate();\n                    }\n                    else {\n                        filterStrategy.activate();\n                    }\n                    this.storageService.set('rowsInMapExtent', !this.storageService.get('rowsInMapExtent'), StorageScope.SESSION);\n                }\n            },\n            {\n                id: 'selectedOnly',\n                checkbox: true,\n                title: 'igo.geo.workspace.selected.title',\n                tooltip: 'selectedOnly',\n                checkCondition: false,\n                handler: () => {\n                    const filterStrategy = workspace.entityStore\n                        .getStrategyOfType(EntityStoreFilterSelectionStrategy);\n                    if (filterStrategy.active) {\n                        filterStrategy.deactivate();\n                    }\n                    else {\n                        filterStrategy.activate();\n                    }\n                }\n            },\n            {\n                id: 'clearselection',\n                icon: 'select-off',\n                title: 'igo.geo.workspace.clearSelection.title',\n                tooltip: 'igo.geo.workspace.clearSelection.tooltip',\n                handler: (ws) => {\n                    ws.entityStore.state.updateMany(ws.entityStore.view.all(), { selected: false });\n                },\n                args: [workspace],\n                availability: (ws) => noElementSelected(ws)\n            },\n            {\n                id: 'wfsDownload',\n                icon: 'download',\n                title: 'igo.geo.workspace.download.title',\n                tooltip: 'igo.geo.workspace.download.tooltip',\n                handler: (ws) => {\n                    const filterStrategy = ws.entityStore.getStrategyOfType(EntityStoreFilterCustomFuncStrategy);\n                    const filterSelectionStrategy = ws.entityStore.getStrategyOfType(EntityStoreFilterSelectionStrategy);\n                    const layersWithSelection = filterSelectionStrategy.active ? [ws.layer.id] : [];\n                    this.toolState.toolToActivateFromOptions({\n                        tool: 'importExport',\n                        options: { layers: [ws.layer.id], featureInMapExtent: filterStrategy.active, layersWithSelection }\n                    });\n                },\n                args: [workspace]\n            },\n            {\n                id: 'ogcFilter',\n                icon: 'filter',\n                title: 'igo.geo.workspace.ogcFilter.title',\n                tooltip: 'igo.geo.workspace.ogcFilter.tooltip',\n                handler: (widget, ws) => {\n                    ws.activateWidget(widget, {\n                        map: ws.map,\n                        layer: ws.layer\n                    });\n                },\n                args: [this.ogcFilterWidget, workspace]\n            },\n        ];\n    }\n    handleZoomAuto(workspace) {\n        const zoomStrategy = workspace.entityStore\n            .getStrategyOfType(FeatureStoreSelectionStrategy);\n        zoomStrategy.setMotion(this.zoomAuto ? FeatureMotion.Default : FeatureMotion.None);\n    }\n}\nWfsActionsService.ɵfac = function WfsActionsService_Factory(t) { return new (t || WfsActionsService)(ɵngcc0.ɵɵinject(OgcFilterWidget), ɵngcc0.ɵɵinject(StorageState), ɵngcc0.ɵɵinject(ToolState)); };\nWfsActionsService.ɵprov = ɵɵdefineInjectable({ factory: function WfsActionsService_Factory() { return new WfsActionsService(ɵɵinject(OgcFilterWidget), ɵɵinject(StorageState), ɵɵinject(ToolState)); }, token: WfsActionsService, providedIn: \"root\" });\nWfsActionsService.ctorParameters = () => [\n    { type: Widget, decorators: [{ type: Inject, args: [OgcFilterWidget,] }] },\n    { type: StorageState },\n    { type: ToolState }\n];\n\n/**\n * Service that holds the state of the workspace module\n */\nclass WorkspaceState {\n    constructor(featureActionsService, wfsActionsService) {\n        this.featureActionsService = featureActionsService;\n        this.wfsActionsService = wfsActionsService;\n        this.workspacePanelExpanded = false;\n        this.workspaceEnabled$ = new BehaviorSubject(false);\n        /** Active widget observable. Only one may be active for all available workspaces */\n        this.activeWorkspaceWidget$ = new BehaviorSubject(undefined);\n        /**\n         * Observable of the active workspace\n         */\n        this.workspace$ = new BehaviorSubject(undefined);\n        this.initWorkspaces();\n    }\n    /**\n     * Store that holds all the available workspaces\n     */\n    get store() { return this._store; }\n    /**\n     * Initialize the workspace store. Each time a workspace is activated,\n     * subscribe to it's active widget. Tracking the active widget is useful\n     * to make sure only one widget is active at a time.\n     */\n    initWorkspaces() {\n        this._store = new WorkspaceStore([]);\n        this._store.stateView\n            .firstBy$((record) => record.state.active === true)\n            .subscribe((record) => {\n            const workspace = record ? record.entity : undefined;\n            this.workspace$.next(workspace);\n        });\n        this._store.stateView.all$()\n            .subscribe((workspaces) => {\n            workspaces.map((wks) => {\n                if (wks.entity.actionStore.empty) {\n                    if (wks.entity instanceof WfsWorkspace) {\n                        this.wfsActionsService.loadActions(wks.entity);\n                    }\n                    else if (wks.entity instanceof FeatureWorkspace) {\n                        this.featureActionsService.loadActions(wks.entity);\n                    }\n                }\n            });\n        });\n        this.activeWorkspace$$ = this.workspace$\n            .subscribe((workspace) => {\n            if (this.activeWorkspaceWidget$$ !== undefined) {\n                this.activeWorkspaceWidget$$.unsubscribe();\n                this.activeWorkspaceWidget$$ = undefined;\n            }\n            if (workspace !== undefined) {\n                this.activeWorkspaceWidget$$ = workspace.widget$\n                    .subscribe((widget) => this.activeWorkspaceWidget$.next(widget));\n            }\n        });\n    }\n    setActiveWorkspaceByLayerId(id) {\n        const wksFromLayerId = this.store\n            .all()\n            .find(workspace => workspace.layer.id === id);\n        if (wksFromLayerId) {\n            this.store.activateWorkspace(wksFromLayerId);\n        }\n    }\n    /**\n     * Teardown all the workspaces\n     * @internal\n     */\n    ngOnDestroy() {\n        this.teardownWorkspaces();\n    }\n    /**\n     * Teardown the workspace store and any subscribers\n     */\n    teardownWorkspaces() {\n        this.store.clear();\n        if (this.activeWorkspaceWidget$$ !== undefined) {\n            this.activeWorkspaceWidget$$.unsubscribe();\n        }\n        if (this.activeWorkspace$$ !== undefined) {\n            this.activeWorkspace$$.unsubscribe();\n        }\n    }\n}\nWorkspaceState.ɵfac = function WorkspaceState_Factory(t) { return new (t || WorkspaceState)(ɵngcc0.ɵɵinject(FeatureActionsService), ɵngcc0.ɵɵinject(WfsActionsService)); };\nWorkspaceState.ɵprov = ɵɵdefineInjectable({ factory: function WorkspaceState_Factory() { return new WorkspaceState(ɵɵinject(FeatureActionsService), ɵɵinject(WfsActionsService)); }, token: WorkspaceState, providedIn: \"root\" });\nWorkspaceState.ctorParameters = () => [\n    { type: FeatureActionsService },\n    { type: WfsActionsService }\n];\n\nclass WorkspaceButtonComponent {\n    constructor(workspaceState) {\n        this.workspaceState = workspaceState;\n        this.hasWorkspace$ = new BehaviorSubject(false);\n        this.color = 'primary';\n    }\n    ngOnInit() {\n        this.hasWorkspace$$ = this.workspaceState.workspaceEnabled$.subscribe(wksEnabled => this.hasWorkspace$.next(wksEnabled && this.layer instanceof VectorLayer));\n    }\n    ngOnDestroy() {\n        this.hasWorkspace$$.unsubscribe();\n    }\n    activateWorkspace() {\n        if (this.workspaceState.workspace$.value &&\n            this.workspaceState.workspace$.value.layer.id === this.layer.id &&\n            this.workspaceState.workspacePanelExpanded) {\n            this.workspaceState.workspacePanelExpanded = false;\n        }\n        else {\n            this.workspaceState.workspacePanelExpanded = true;\n            this.workspaceState.setActiveWorkspaceByLayerId(this.layer.id);\n        }\n    }\n}\nWorkspaceButtonComponent.ɵfac = function WorkspaceButtonComponent_Factory(t) { return new (t || WorkspaceButtonComponent)(ɵngcc0.ɵɵdirectiveInject(WorkspaceState)); };\nWorkspaceButtonComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: WorkspaceButtonComponent, selectors: [[\"igo-workspace-button\"]], inputs: { color: \"color\", layer: \"layer\" }, decls: 2, vars: 3, consts: [[\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", \"tooltip-position\", \"below\", \"matTooltipShowDelay\", \"500\", 3, \"matTooltip\", \"color\", \"click\"], [\"svgIcon\", \"table\"]], template: function WorkspaceButtonComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, WorkspaceButtonComponent_button_0_Template, 3, 4, \"button\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx.hasWorkspace$));\n    } }, directives: [ɵngcc5.NgIf, ɵngcc7.MatButton, ɵngcc8.MatTooltip, ɵngcc9.MatIcon], pipes: [ɵngcc5.AsyncPipe, ɵngcc10.TranslatePipe], styles: [\"\"], changeDetection: 0 });\nWorkspaceButtonComponent.ctorParameters = () => [\n    { type: WorkspaceState }\n];\nWorkspaceButtonComponent.propDecorators = {\n    layer: [{ type: Input }],\n    color: [{ type: Input }]\n};\n\nclass IgoAppWorkspaceModule {\n}\nIgoAppWorkspaceModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppWorkspaceModule });\nIgoAppWorkspaceModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppWorkspaceModule_Factory(t) { return new (t || IgoAppWorkspaceModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            MatTooltipModule,\n            IgoLanguageModule\n        ]] });\n\nlet ImportExportToolComponent = class ImportExportToolComponent {\n    constructor(mapState, importExportState, workspaceState) {\n        this.mapState = mapState;\n        this.importExportState = importExportState;\n        this.workspaceState = workspaceState;\n        this.importExportType$ = 'layer';\n    }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get map() { return this.mapState.map; }\n    get workspaceStore() {\n        return this.workspaceState.store;\n    }\n    ngOnInit() {\n        this.selectMode();\n    }\n    selectMode() {\n        const userSelectedMode = this.importExportState.selectedMode$.value;\n        if (userSelectedMode !== undefined) {\n            this.importExportState.setMode(userSelectedMode);\n        }\n        else {\n            this.importExportState.setMode('import');\n        }\n    }\n    modeChanged(mode) {\n        this.importExportState.setMode(mode);\n    }\n    exportOptionsChange(exportOptions) {\n        this.importExportState.setsExportOptions(exportOptions);\n    }\n    importExportTypeChange(event) {\n        this.importExportType$ = event.value;\n    }\n};\nImportExportToolComponent.ɵfac = function ImportExportToolComponent_Factory(t) { return new (t || ImportExportToolComponent)(ɵngcc0.ɵɵdirectiveInject(MapState), ɵngcc0.ɵɵdirectiveInject(ImportExportState), ɵngcc0.ɵɵdirectiveInject(WorkspaceState)); };\nImportExportToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ImportExportToolComponent, selectors: [[\"igo-import-export-tool\"]], decls: 8, vars: 13, consts: [[3, \"label\"], [3, \"map\", \"store\", \"selectedMode\", \"exportOptions$\", \"selectMode\", \"exportOptionsChange\"], [3, \"map\"]], template: function ImportExportToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-tab-group\");\n        ɵngcc0.ɵɵelementStart(1, \"mat-tab\", 0);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementStart(3, \"igo-import-export\", 1);\n        ɵngcc0.ɵɵlistener(\"selectMode\", function ImportExportToolComponent_Template_igo_import_export_selectMode_3_listener($event) { return ctx.modeChanged($event); })(\"exportOptionsChange\", function ImportExportToolComponent_Template_igo_import_export_exportOptionsChange_3_listener($event) { return ctx.exportOptionsChange($event); });\n        ɵngcc0.ɵɵpipe(4, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"mat-tab\", 0);\n        ɵngcc0.ɵɵpipe(6, \"translate\");\n        ɵngcc0.ɵɵelement(7, \"igo-context-import-export\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(2, 7, \"igo.integration.importExportTool.importExportData\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"map\", ctx.map)(\"store\", ctx.workspaceStore)(\"selectedMode\", ɵngcc0.ɵɵpipeBind1(4, 9, ctx.importExportState.selectedMode$))(\"exportOptions$\", ctx.importExportState.exportOptions$);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(6, 11, \"igo.integration.importExportTool.importExportContext\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"map\", ctx.map);\n    } }, directives: [ɵngcc11.MatTabGroup, ɵngcc11.MatTab, ɵngcc3.ImportExportComponent, ɵngcc2.ContextImportExportComponent], pipes: [ɵngcc10.TranslatePipe, ɵngcc5.AsyncPipe], styles: [\"mat-form-field[_ngcontent-%COMP%]{width:100%}\"], changeDetection: 0 });\nImportExportToolComponent.ctorParameters = () => [\n    { type: MapState },\n    { type: ImportExportState },\n    { type: WorkspaceState }\n];\nImportExportToolComponent = __decorate([\n    ToolComponent({\n        name: 'importExport',\n        title: 'igo.integration.tools.importExport',\n        icon: 'file-move'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        ImportExportState,\n        WorkspaceState])\n], ImportExportToolComponent);\n\nclass IgoAppImportExportModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppImportExportModule,\n            providers: []\n        };\n    }\n}\nIgoAppImportExportModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppImportExportModule });\nIgoAppImportExportModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppImportExportModule_Factory(t) { return new (t || IgoAppImportExportModule)(); }, imports: [[\n            IgoImportExportModule,\n            IgoContextImportExportModule,\n            CommonModule,\n            IgoLanguageModule,\n            MatButtonToggleModule,\n            MatTabsModule\n        ]] });\n\nlet MapDetailsToolComponent = class MapDetailsToolComponent {\n    constructor(mapState, toolState, searchSourceService, cdRef, importExportState) {\n        this.mapState = mapState;\n        this.toolState = toolState;\n        this.searchSourceService = searchSourceService;\n        this.cdRef = cdRef;\n        this.importExportState = importExportState;\n        this.delayedShowEmptyMapContent = false;\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendOfVisibleLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.ogcButton = true;\n        this.timeButton = true;\n        this.layerListControls = {};\n        this.queryBadge = false;\n        this.layerAdditionAllowed = true;\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get layers$() {\n        return this.map.layers$.pipe(map((layers) => layers.filter((layer) => layer.showInLayerList !== false &&\n            (!this.excludeBaseLayers || !layer.baseLayer))));\n    }\n    get excludeBaseLayers() {\n        return this.layerListControls.excludeBaseLayers || false;\n    }\n    get layerFilterAndSortOptions() {\n        const filterSortOptions = Object.assign({\n            showToolbar: LayerListControlsEnum.default\n        }, this.layerListControls);\n        switch (this.layerListControls.showToolbar) {\n            case LayerListControlsEnum.always:\n                filterSortOptions.showToolbar = LayerListControlsEnum.always;\n                break;\n            case LayerListControlsEnum.never:\n                filterSortOptions.showToolbar = LayerListControlsEnum.never;\n                break;\n            default:\n                break;\n        }\n        return filterSortOptions;\n    }\n    get searchToolInToolbar() {\n        return (this.toolState.toolbox.getToolbar().indexOf('searchResults') !== -1 &&\n            this.searchSourceService\n                .getSources()\n                .filter(sourceCanSearch)\n                .filter((s) => s.available && s.getType() === 'Layer').length > 0);\n    }\n    get catalogToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('catalog') !== -1;\n    }\n    get contextToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('contextManager') !== -1;\n    }\n    ngOnInit() {\n        // prevent message to be shown too quickly. Waiting for layers\n        setTimeout(() => {\n            this.delayedShowEmptyMapContent = true;\n            this.cdRef.detectChanges();\n        }, 250);\n    }\n    searchEmit() {\n        this.toolState.toolbox.activateTool('searchResults');\n    }\n    catalogEmit() {\n        this.toolState.toolbox.activateTool('catalog');\n    }\n    contextEmit() {\n        this.toolState.toolbox.activateTool('contextManager');\n    }\n    activateExport(id) {\n        this.importExportState.setsExportOptions({ layers: [id] });\n        this.importExportState.setMode('export');\n        this.toolState.toolbox.activateTool('importExport');\n    }\n};\nMapDetailsToolComponent.ɵfac = function MapDetailsToolComponent_Factory(t) { return new (t || MapDetailsToolComponent)(ɵngcc0.ɵɵdirectiveInject(MapState), ɵngcc0.ɵɵdirectiveInject(ToolState), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.SearchSourceService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ImportExportState)); };\nMapDetailsToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MapDetailsToolComponent, selectors: [[\"igo-map-details-tool\"]], inputs: { toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendOfVisibleLayers: \"expandLegendOfVisibleLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", ogcButton: \"ogcButton\", timeButton: \"timeButton\", layerListControls: \"layerListControls\", queryBadge: \"queryBadge\", layerAdditionAllowed: \"layerAdditionAllowed\" }, decls: 4, vars: 4, consts: [[\"igoLayerListBinding\", \"\", \"floatLabel\", \"never\", 3, \"map\", \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"queryBadge\", 4, \"ngIf\", \"ngIfElse\"], [\"empty\", \"\"], [\"igoLayerListBinding\", \"\", \"floatLabel\", \"never\", 3, \"map\", \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"queryBadge\"], [\"igoLayerItemToolbar\", \"\"], [3, \"layer\"], [3, \"layer\", \"click\"], [3, \"header\", \"layer\"], [3, \"trackFeature\", \"layer\"], [4, \"ngIf\"], [1, \"map-empty\", \"mat-typography\"], [\"class\", \"map-empty mat-typography\", 4, \"ngIf\"], [\"mat-list-icon\", \"\"], [\"viewBox\", \"0 0 24 24\", \"fit\", \"\", \"height\", \"100%\", \"width\", \"100%\", \"preserveAspectRatio\", \"xMidYMid meet\", \"focusable\", \"false\"], [\"d\", \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\"], [\"matLine\", \"\", 1, \"search-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z\"], [\"matLine\", \"\", 1, \"catalog-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z\"], [\"matLine\", \"\", 1, \"context-tool\", \"mat-typography\", 3, \"click\"]], template: function MapDetailsToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, MapDetailsToolComponent_igo_layer_list_0_Template, 3, 7, \"igo-layer-list\", 0);\n        ɵngcc0.ɵɵpipe(1, \"async\");\n        ɵngcc0.ɵɵtemplate(2, MapDetailsToolComponent_ng_template_2_Template, 1, 1, \"ng-template\", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);\n    } if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(1, 2, ctx.layers$).length)(\"ngIfElse\", _r1);\n    } }, directives: [ɵngcc5.NgIf, ɵngcc3.LayerListComponent, ɵngcc3.LayerListBindingDirective, WorkspaceButtonComponent, ɵngcc3.ExportButtonComponent, ɵngcc3.OgcFilterButtonComponent, ɵngcc3.TimeFilterButtonComponent, ɵngcc3.TrackFeatureButtonComponent, ɵngcc3.MetadataButtonComponent, ɵngcc12.MatList, ɵngcc12.MatListItem, ɵngcc9.MatIcon, ɵngcc12.MatListIconCssMatStyler, ɵngcc13.MatLine], pipes: [ɵngcc5.AsyncPipe, ɵngcc10.TranslatePipe], styles: [\".catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .map-empty[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{margin:10px}.map-empty[_ngcontent-%COMP%]{text-align:justify}.catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{cursor:pointer}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}mat-list-item[_ngcontent-%COMP%]     .mat-list-text{font-size:smaller}mat-list.mat-list-base[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]     div.mat-list-item-content div.mat-list-text{padding-left:5px}\"] });\nMapDetailsToolComponent.ctorParameters = () => [\n    { type: MapState },\n    { type: ToolState },\n    { type: SearchSourceService },\n    { type: ChangeDetectorRef },\n    { type: ImportExportState }\n];\nMapDetailsToolComponent.propDecorators = {\n    toggleLegendOnVisibilityChange: [{ type: Input }],\n    expandLegendOfVisibleLayers: [{ type: Input }],\n    updateLegendOnResolutionChange: [{ type: Input }],\n    ogcButton: [{ type: Input }],\n    timeButton: [{ type: Input }],\n    layerListControls: [{ type: Input }],\n    queryBadge: [{ type: Input }],\n    layerAdditionAllowed: [{ type: Input }]\n};\nMapDetailsToolComponent = __decorate([\n    ToolComponent({\n        name: 'mapDetails',\n        title: 'igo.integration.tools.map',\n        icon: 'map'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        ToolState,\n        SearchSourceService,\n        ChangeDetectorRef,\n        ImportExportState])\n], MapDetailsToolComponent);\n\n/**\n * Tool to browse a map's layers or to choose a different map\n */\nlet MapToolComponent = class MapToolComponent {\n    constructor(mapState, toolState, importExportState) {\n        this.mapState = mapState;\n        this.toolState = toolState;\n        this.importExportState = importExportState;\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendOfVisibleLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.ogcButton = true;\n        this.timeButton = true;\n        this.layerListControls = {};\n        this.queryBadge = false;\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get excludeBaseLayers() {\n        return this.layerListControls.excludeBaseLayers || false;\n    }\n    get layerFilterAndSortOptions() {\n        const filterSortOptions = Object.assign({\n            showToolbar: LayerListControlsEnum.default\n        }, this.layerListControls);\n        switch (this.layerListControls.showToolbar) {\n            case LayerListControlsEnum.always:\n                filterSortOptions.showToolbar = LayerListControlsEnum.always;\n                break;\n            case LayerListControlsEnum.never:\n                filterSortOptions.showToolbar = LayerListControlsEnum.never;\n                break;\n            default:\n                break;\n        }\n        return filterSortOptions;\n    }\n    activateExport(id) {\n        this.importExportState.setsExportOptions({ layers: [id] });\n        this.importExportState.setMode('export');\n        this.toolState.toolbox.activateTool('importExport');\n    }\n};\nMapToolComponent.ɵfac = function MapToolComponent_Factory(t) { return new (t || MapToolComponent)(ɵngcc0.ɵɵdirectiveInject(MapState), ɵngcc0.ɵɵdirectiveInject(ToolState), ɵngcc0.ɵɵdirectiveInject(ImportExportState)); };\nMapToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MapToolComponent, selectors: [[\"igo-map-tool\"]], inputs: { toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendOfVisibleLayers: \"expandLegendOfVisibleLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", ogcButton: \"ogcButton\", timeButton: \"timeButton\", layerListControls: \"layerListControls\", queryBadge: \"queryBadge\" }, decls: 9, vars: 14, consts: [[3, \"label\"], [\"igoLayerListBinding\", \"\", 3, \"map\", \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"floatLabel\", \"queryBadge\"], [\"igoLayerItemToolbar\", \"\"], [\"igoContextListBinding\", \"\"], [3, \"layer\"], [3, \"layer\", \"click\"], [3, \"header\", \"layer\"], [3, \"trackFeature\", \"layer\"]], template: function MapToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-tab-group\");\n        ɵngcc0.ɵɵelementStart(1, \"mat-tab\", 0);\n        ɵngcc0.ɵɵpipe(2, \"translate\");\n        ɵngcc0.ɵɵelementStart(3, \"igo-layer-list\", 1);\n        ɵngcc0.ɵɵtemplate(4, MapToolComponent_ng_template_4_Template, 6, 9, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"mat-tab\", 0);\n        ɵngcc0.ɵɵpipe(7, \"translate\");\n        ɵngcc0.ɵɵelement(8, \"igo-context-list\", 3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(2, 10, \"igo.integration.tools.map\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"map\", ctx.map)(\"excludeBaseLayers\", ctx.excludeBaseLayers)(\"layerFilterAndSortOptions\", ctx.layerFilterAndSortOptions)(\"expandLegendOfVisibleLayers\", ctx.expandLegendOfVisibleLayers)(\"toggleLegendOnVisibilityChange\", ctx.toggleLegendOnVisibilityChange)(\"updateLegendOnResolutionChange\", ctx.updateLegendOnResolutionChange)(\"floatLabel\", false)(\"queryBadge\", ctx.queryBadge);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(7, 12, \"igo.integration.tools.contexts\"));\n    } }, directives: [ɵngcc11.MatTabGroup, ɵngcc11.MatTab, ɵngcc3.LayerListComponent, ɵngcc3.LayerListBindingDirective, ɵngcc2.ContextListComponent, ɵngcc2.ContextListBindingDirective, WorkspaceButtonComponent, ɵngcc3.ExportButtonComponent, ɵngcc3.OgcFilterButtonComponent, ɵngcc3.TimeFilterButtonComponent, ɵngcc3.TrackFeatureButtonComponent, ɵngcc3.MetadataButtonComponent], pipes: [ɵngcc10.TranslatePipe], styles: [\"mat-tab-group[_ngcontent-%COMP%], mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-wrapper{height:100%}\"], changeDetection: 0 });\nMapToolComponent.ctorParameters = () => [\n    { type: MapState },\n    { type: ToolState },\n    { type: ImportExportState }\n];\nMapToolComponent.propDecorators = {\n    toggleLegendOnVisibilityChange: [{ type: Input }],\n    expandLegendOfVisibleLayers: [{ type: Input }],\n    updateLegendOnResolutionChange: [{ type: Input }],\n    ogcButton: [{ type: Input }],\n    timeButton: [{ type: Input }],\n    layerListControls: [{ type: Input }],\n    queryBadge: [{ type: Input }]\n};\nMapToolComponent = __decorate([\n    ToolComponent({\n        name: 'map',\n        title: 'igo.integration.tools.map',\n        icon: 'map'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        ToolState,\n        ImportExportState])\n], MapToolComponent);\n\n/**\n * Tool to browse a map's layers or to choose a different map\n */\nlet MapToolsComponent = class MapToolsComponent {\n    constructor(layerListToolState, toolState, mapState, searchSourceService, importExportState) {\n        this.layerListToolState = layerListToolState;\n        this.toolState = toolState;\n        this.mapState = mapState;\n        this.searchSourceService = searchSourceService;\n        this.importExportState = importExportState;\n        this.layers$ = new BehaviorSubject([]);\n        this.showAllLegendsValue$ = new BehaviorSubject(false);\n        this.delayedShowEmptyMapContent = false;\n        this.allowShowAllLegends = false;\n        this.showAllLegendsValue = false;\n        this.toggleLegendOnVisibilityChange = false;\n        this.expandLegendOfVisibleLayers = false;\n        this.updateLegendOnResolutionChange = false;\n        this.ogcButton = true;\n        this.timeButton = true;\n        this.layerAdditionAllowed = true;\n        this._layerListControls = {};\n        this.queryBadge = false;\n    }\n    get layerListControls() {\n        return this._layerListControls;\n    }\n    set layerListControls(value) {\n        const stateOptions = this.layerListToolState.getLayerListControls();\n        const stateKeyword = stateOptions.keyword;\n        const stateOnlyVisible = stateOptions.onlyVisible;\n        const stateSortAlpha = stateOptions.sortAlpha;\n        value.keyword = stateKeyword !== '' ? stateKeyword : value.keyword;\n        value.onlyVisible =\n            stateOnlyVisible !== undefined ? stateOnlyVisible : value.onlyVisible;\n        value.sortAlpha =\n            stateSortAlpha !== undefined ? stateSortAlpha : value.sortAlpha;\n        value.onlyVisible =\n            value.onlyVisible === undefined ? false : value.onlyVisible;\n        value.sortAlpha = value.sortAlpha === undefined ? false : value.sortAlpha;\n        this._layerListControls = value;\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get visibleOrInRangeLayers$() {\n        return this.layers$.pipe(map((layers) => layers.filter((layer) => layer.visible$.value && layer.isInResolutionsRange$.value)));\n    }\n    get visibleLayers$() {\n        return this.layers$.pipe(map((layers) => layers.filter((layer) => layer.visible$.value)));\n    }\n    get excludeBaseLayers() {\n        return this.layerListControls.excludeBaseLayers || false;\n    }\n    get layerFilterAndSortOptions() {\n        const filterSortOptions = Object.assign({\n            showToolbar: LayerListControlsEnum.default\n        }, this.layerListControls);\n        switch (this.layerListControls.showToolbar) {\n            case LayerListControlsEnum.always:\n                filterSortOptions.showToolbar = LayerListControlsEnum.always;\n                break;\n            case LayerListControlsEnum.never:\n                filterSortOptions.showToolbar = LayerListControlsEnum.never;\n                break;\n            default:\n                break;\n        }\n        return filterSortOptions;\n    }\n    get searchToolInToolbar() {\n        return (this.toolState.toolbox.getToolbar().indexOf('searchResults') !== -1 &&\n            this.searchSourceService\n                .getSources()\n                .filter(sourceCanSearch)\n                .filter((s) => s.available && s.getType() === 'Layer').length > 0);\n    }\n    get catalogToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('catalog') !== -1;\n    }\n    get contextToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('contextManager') !== -1;\n    }\n    ngOnInit() {\n        this.selectedTab();\n        this.resolution$$ = combineLatest([\n            this.map.layers$,\n            this.map.viewController.resolution$\n        ])\n            .pipe(debounceTime(10))\n            .subscribe((bunch) => {\n            this.layers$.next(bunch[0].filter((layer) => layer.showInLayerList !== false &&\n                (!this.excludeBaseLayers || !layer.baseLayer)));\n        });\n        if (this.allowShowAllLegends) {\n            this.mapState.showAllLegendsValue =\n                this.mapState.showAllLegendsValue !== undefined\n                    ? this.mapState.showAllLegendsValue\n                    : this.showAllLegendsValue || false;\n            this.showAllLegendsValue$.next(this.mapState.showAllLegendsValue);\n        }\n        else {\n            this.showAllLegendsValue$.next(false);\n        }\n        // prevent message to be shown too quickly. Waiting for layers\n        setTimeout(() => (this.delayedShowEmptyMapContent = true), 250);\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n    }\n    onShowAllLegends(event) {\n        this.mapState.showAllLegendsValue = event;\n        this.showAllLegendsValue$.next(event);\n    }\n    selectedTab() {\n        const userSelectedTab = this.layerListToolState.selectedTab$.value;\n        if (userSelectedTab !== undefined) {\n            this.layerListToolState.setSelectedTab(userSelectedTab);\n        }\n        else {\n            if (this.selectedTabAtOpening === 'legend') {\n                this.layerListToolState.setSelectedTab(1);\n            }\n            else {\n                this.layerListToolState.setSelectedTab(0);\n            }\n        }\n    }\n    tabChanged(tab) {\n        this.layerListToolState.setSelectedTab(tab.index);\n        this.layers$.next(this.map.layers.filter((layer) => layer.showInLayerList !== false &&\n            (!this.excludeBaseLayers || !layer.baseLayer)));\n    }\n    onLayerListChange(appliedFilters) {\n        this.layerListToolState.setKeyword(appliedFilters.keyword);\n        this.layerListToolState.setSortAlpha(appliedFilters.sortAlpha);\n        this.layerListToolState.setOnlyVisible(appliedFilters.onlyVisible);\n    }\n    showAllLegend() {\n        if (this.layers$.getValue().length === 0) {\n            return false;\n        }\n        else if (this.layers$.getValue().length !== 0 &&\n            this.allowShowAllLegends === false) {\n            let visibleOrInRangeLayers;\n            this.visibleOrInRangeLayers$.subscribe((value) => {\n                value.length === 0\n                    ? (visibleOrInRangeLayers = false)\n                    : (visibleOrInRangeLayers = true);\n            });\n            if (visibleOrInRangeLayers === false) {\n                return false;\n            }\n        }\n        return true;\n    }\n    activateExport(id) {\n        this.importExportState.setsExportOptions({ layers: [id] });\n        this.importExportState.setMode('export');\n        this.toolState.toolbox.activateTool('importExport');\n    }\n    activateTimeFilter() {\n        this.toolState.toolbox.activateTool('activeTimeFilter');\n    }\n    activateOgcFilter() {\n        this.toolState.toolbox.activateTool('activeOgcFilter');\n    }\n    searchEmit() {\n        this.toolState.toolbox.activateTool('searchResults');\n    }\n    catalogEmit() {\n        this.toolState.toolbox.activateTool('catalog');\n    }\n    contextEmit() {\n        this.toolState.toolbox.activateTool('contextManager');\n    }\n};\nMapToolsComponent.ɵfac = function MapToolsComponent_Factory(t) { return new (t || MapToolsComponent)(ɵngcc0.ɵɵdirectiveInject(LayerListToolState), ɵngcc0.ɵɵdirectiveInject(ToolState), ɵngcc0.ɵɵdirectiveInject(MapState), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.SearchSourceService), ɵngcc0.ɵɵdirectiveInject(ImportExportState)); };\nMapToolsComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MapToolsComponent, selectors: [[\"igo-map-tools\"]], viewQuery: function MapToolsComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵstaticViewQuery(_c0, true);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tabGroup = _t.first);\n    } }, inputs: { allowShowAllLegends: \"allowShowAllLegends\", showAllLegendsValue: \"showAllLegendsValue\", toggleLegendOnVisibilityChange: \"toggleLegendOnVisibilityChange\", expandLegendOfVisibleLayers: \"expandLegendOfVisibleLayers\", updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", ogcButton: \"ogcButton\", timeButton: \"timeButton\", layerAdditionAllowed: \"layerAdditionAllowed\", queryBadge: \"queryBadge\", layerListControls: \"layerListControls\", selectedTabAtOpening: \"selectedTabAtOpening\" }, decls: 17, vars: 23, consts: [[3, \"selectedIndex\", \"selectedTabChange\"], [\"tabGroup\", \"\"], [3, \"label\"], [\"igoLayerListBinding\", \"\", 3, \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"floatLabel\", \"queryBadge\", \"map\", \"appliedFilterAndSort\", 4, \"ngIf\", \"ngIfElse\"], [\"igoLayerLegendListBinding\", \"\", 3, \"allowShowAllLegends\", \"showAllLegendsValue\", \"excludeBaseLayers\", \"updateLegendOnResolutionChange\", \"allLegendsShown\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"class\", \"map-empty mat-typography\", 4, \"ngIf\"], [\"emptyLayers\", \"\"], [\"igoLayerListBinding\", \"\", 3, \"excludeBaseLayers\", \"layerFilterAndSortOptions\", \"expandLegendOfVisibleLayers\", \"toggleLegendOnVisibilityChange\", \"updateLegendOnResolutionChange\", \"floatLabel\", \"queryBadge\", \"map\", \"appliedFilterAndSort\"], [\"igoLayerItemToolbar\", \"\"], [3, \"layer\"], [3, \"layer\", \"click\"], [3, \"header\", \"layer\", \"click\"], [3, \"trackFeature\", \"layer\"], [\"igoLayerLegendListBinding\", \"\", 3, \"allowShowAllLegends\", \"showAllLegendsValue\", \"excludeBaseLayers\", \"updateLegendOnResolutionChange\", \"allLegendsShown\"], [1, \"map-empty\", \"mat-typography\"], [4, \"ngIf\"], [\"mat-list-icon\", \"\"], [\"viewBox\", \"0 0 24 24\", \"fit\", \"\", \"height\", \"100%\", \"width\", \"100%\", \"preserveAspectRatio\", \"xMidYMid meet\", \"focusable\", \"false\"], [\"d\", \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\"], [\"matLine\", \"\", 1, \"search-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z\"], [\"matLine\", \"\", 1, \"catalog-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z\"], [\"matLine\", \"\", 1, \"context-tool\", \"mat-typography\", 3, \"click\"]], template: function MapToolsComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"mat-tab-group\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"selectedTabChange\", function MapToolsComponent_Template_mat_tab_group_selectedTabChange_0_listener($event) { return ctx.tabChanged($event); });\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵelementStart(3, \"mat-tab\", 2);\n        ɵngcc0.ɵɵpipe(4, \"translate\");\n        ɵngcc0.ɵɵtemplate(5, MapToolsComponent_igo_layer_list_5_Template, 3, 8, \"igo-layer-list\", 3);\n        ɵngcc0.ɵɵpipe(6, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"mat-tab\", 2);\n        ɵngcc0.ɵɵpipe(8, \"translate\");\n        ɵngcc0.ɵɵtemplate(9, MapToolsComponent_igo_layer_legend_list_9_Template, 2, 6, \"igo-layer-legend-list\", 4);\n        ɵngcc0.ɵɵtemplate(10, MapToolsComponent_10_Template, 1, 0, undefined, 5);\n        ɵngcc0.ɵɵpipe(11, \"async\");\n        ɵngcc0.ɵɵtemplate(12, MapToolsComponent_p_12_Template, 5, 7, \"p\", 6);\n        ɵngcc0.ɵɵpipe(13, \"async\");\n        ɵngcc0.ɵɵpipe(14, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(15, MapToolsComponent_ng_template_15_Template, 1, 1, \"ng-template\", null, 7, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        const _r5 = ɵngcc0.ɵɵreference(16);\n        ɵngcc0.ɵɵproperty(\"selectedIndex\", ɵngcc0.ɵɵpipeBind1(2, 9, ctx.layerListToolState.selectedTab$));\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(4, 11, \"igo.integration.tools.layers\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(6, 13, ctx.layers$).length !== 0)(\"ngIfElse\", _r5);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"label\", ɵngcc0.ɵɵpipeBind1(8, 15, \"igo.integration.tools.legend\"));\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showAllLegend());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(11, 17, ctx.layers$).length !== 0)(\"ngIfElse\", _r5);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.allowShowAllLegends && ɵngcc0.ɵɵpipeBind1(13, 19, ctx.layers$).length !== 0 && ɵngcc0.ɵɵpipeBind1(14, 21, ctx.visibleOrInRangeLayers$).length === 0);\n    } }, directives: [ɵngcc11.MatTabGroup, ɵngcc11.MatTab, ɵngcc5.NgIf, ɵngcc3.LayerListComponent, ɵngcc3.LayerListBindingDirective, WorkspaceButtonComponent, ɵngcc3.ExportButtonComponent, ɵngcc3.OgcFilterButtonComponent, ɵngcc3.TimeFilterButtonComponent, ɵngcc3.TrackFeatureButtonComponent, ɵngcc3.MetadataButtonComponent, ɵngcc3.LayerLegendListComponent, ɵngcc3.LayerLegendListBindingDirective, ɵngcc12.MatList, ɵngcc12.MatListItem, ɵngcc9.MatIcon, ɵngcc12.MatListIconCssMatStyler, ɵngcc13.MatLine], pipes: [ɵngcc5.AsyncPipe, ɵngcc10.TranslatePipe], styles: [\".catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .map-empty[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{margin:10px}.map-empty[_ngcontent-%COMP%]{text-align:justify}.catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{cursor:pointer}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}mat-list-item[_ngcontent-%COMP%]     .mat-list-text{font-size:smaller}mat-list.mat-list-base[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]     div.mat-list-item-content div.mat-list-text{padding-left:5px}mat-tab-group[_ngcontent-%COMP%], mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-wrapper{height:100%}\"], changeDetection: 0 });\nMapToolsComponent.ctorParameters = () => [\n    { type: LayerListToolState },\n    { type: ToolState },\n    { type: MapState },\n    { type: SearchSourceService },\n    { type: ImportExportState }\n];\nMapToolsComponent.propDecorators = {\n    allowShowAllLegends: [{ type: Input }],\n    showAllLegendsValue: [{ type: Input }],\n    toggleLegendOnVisibilityChange: [{ type: Input }],\n    expandLegendOfVisibleLayers: [{ type: Input }],\n    updateLegendOnResolutionChange: [{ type: Input }],\n    selectedTabAtOpening: [{ type: Input }],\n    ogcButton: [{ type: Input }],\n    timeButton: [{ type: Input }],\n    layerAdditionAllowed: [{ type: Input }],\n    layerListControls: [{ type: Input }],\n    queryBadge: [{ type: Input }],\n    tabGroup: [{ type: ViewChild, args: ['tabGroup', { static: true },] }]\n};\nMapToolsComponent = __decorate([\n    ToolComponent({\n        name: 'mapTools',\n        title: 'igo.integration.tools.map',\n        icon: 'map'\n    }),\n    __metadata(\"design:paramtypes\", [LayerListToolState,\n        ToolState,\n        MapState,\n        SearchSourceService,\n        ImportExportState])\n], MapToolsComponent);\n\nlet MapLegendToolComponent = class MapLegendToolComponent {\n    constructor(mapState, toolState, searchSourceService, cdRef) {\n        this.mapState = mapState;\n        this.toolState = toolState;\n        this.searchSourceService = searchSourceService;\n        this.cdRef = cdRef;\n        this.delayedShowEmptyMapContent = false;\n        this.layers$ = new BehaviorSubject([]);\n        this.showAllLegendsValue$ = new BehaviorSubject(false);\n        this.change$ = new ReplaySubject(1);\n        this.updateLegendOnResolutionChange = false;\n        this.layerAdditionAllowed = true;\n        this.allowShowAllLegends = false;\n        this.showAllLegendsValue = false;\n        this.layerListControls = {};\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get visibleOrInRangeLayers$() {\n        return this.layers$.pipe(map(layers => layers.filter(layer => layer.visible$.value && layer.isInResolutionsRange$.value)));\n    }\n    get visibleLayers$() {\n        return this.layers$.pipe(map(layers => layers.filter(layer => layer.visible$.value)));\n    }\n    get excludeBaseLayers() {\n        return this.layerListControls.excludeBaseLayers || false;\n    }\n    get searchToolInToolbar() {\n        return (this.toolState.toolbox.getToolbar().indexOf('searchResults') !== -1 &&\n            this.searchSourceService\n                .getSources()\n                .filter(sourceCanSearch)\n                .filter(s => s.available && s.getType() === 'Layer').length > 0);\n    }\n    get catalogToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('catalog') !== -1;\n    }\n    get contextToolInToolbar() {\n        return this.toolState.toolbox.getToolbar().indexOf('contextManager') !== -1;\n    }\n    ngOnInit() {\n        this.resolution$$ = combineLatest([\n            this.map.layers$,\n            this.map.viewController.resolution$\n        ])\n            .pipe(debounceTime(10))\n            .subscribe((bunch) => {\n            this.layers$.next(bunch[0].filter(layer => layer.showInLayerList !== false &&\n                (!this.excludeBaseLayers || !layer.baseLayer)));\n        });\n        if (this.allowShowAllLegends) {\n            this.mapState.showAllLegendsValue =\n                this.mapState.showAllLegendsValue !== undefined\n                    ? this.mapState.showAllLegendsValue\n                    : this.showAllLegendsValue || false;\n            this.showAllLegendsValue$.next(this.mapState.showAllLegendsValue);\n        }\n        else {\n            this.showAllLegendsValue$.next(false);\n        }\n        // prevent message to be shown too quickly. Waiting for layers\n        setTimeout(() => {\n            this.delayedShowEmptyMapContent = true;\n            this.cdRef.detectChanges();\n        }, 250);\n    }\n    onShowAllLegends(event) {\n        this.mapState.showAllLegendsValue = event;\n        this.showAllLegendsValue$.next(event);\n    }\n    showAllLegend() {\n        if (this.layers$.getValue().length === 0) {\n            return false;\n        }\n        else if (this.layers$.getValue().length !== 0 &&\n            this.allowShowAllLegends === false) {\n            let visibleOrInRangeLayers;\n            this.visibleOrInRangeLayers$.subscribe(value => {\n                value.length === 0\n                    ? (visibleOrInRangeLayers = false)\n                    : (visibleOrInRangeLayers = true);\n            });\n            if (visibleOrInRangeLayers === false) {\n                return false;\n            }\n        }\n        return true;\n    }\n    ngOnDestroy() {\n        this.resolution$$.unsubscribe();\n    }\n    searchEmit() {\n        this.toolState.toolbox.activateTool('searchResults');\n    }\n    catalogEmit() {\n        this.toolState.toolbox.activateTool('catalog');\n    }\n    contextEmit() {\n        this.toolState.toolbox.activateTool('contextManager');\n    }\n};\nMapLegendToolComponent.ɵfac = function MapLegendToolComponent_Factory(t) { return new (t || MapLegendToolComponent)(ɵngcc0.ɵɵdirectiveInject(MapState), ɵngcc0.ɵɵdirectiveInject(ToolState), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.SearchSourceService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nMapLegendToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MapLegendToolComponent, selectors: [[\"igo-map-legend-tool\"]], inputs: { updateLegendOnResolutionChange: \"updateLegendOnResolutionChange\", layerAdditionAllowed: \"layerAdditionAllowed\", allowShowAllLegends: \"allowShowAllLegends\", showAllLegendsValue: \"showAllLegendsValue\", layerListControls: \"layerListControls\" }, decls: 8, vars: 10, consts: [[\"igoLayerLegendListBinding\", \"\", 3, \"excludeBaseLayers\", \"allowShowAllLegends\", \"updateLegendOnResolutionChange\", \"showAllLegendsValue\", \"allLegendsShown\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"class\", \"map-empty mat-typography\", 4, \"ngIf\"], [\"emptyLayers\", \"\"], [\"igoLayerLegendListBinding\", \"\", 3, \"excludeBaseLayers\", \"allowShowAllLegends\", \"updateLegendOnResolutionChange\", \"showAllLegendsValue\", \"allLegendsShown\"], [1, \"map-empty\", \"mat-typography\"], [4, \"ngIf\"], [\"mat-list-icon\", \"\"], [\"viewBox\", \"0 0 24 24\", \"fit\", \"\", \"height\", \"100%\", \"width\", \"100%\", \"preserveAspectRatio\", \"xMidYMid meet\", \"focusable\", \"false\"], [\"d\", \"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\"], [\"matLine\", \"\", 1, \"search-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z\"], [\"matLine\", \"\", 1, \"catalog-tool\", \"mat-typography\", 3, \"click\"], [\"d\", \"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z\"], [\"matLine\", \"\", 1, \"context-tool\", \"mat-typography\", 3, \"click\"]], template: function MapLegendToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, MapLegendToolComponent_igo_layer_legend_list_0_Template, 2, 6, \"igo-layer-legend-list\", 0);\n        ɵngcc0.ɵɵtemplate(1, MapLegendToolComponent_1_Template, 1, 0, undefined, 1);\n        ɵngcc0.ɵɵpipe(2, \"async\");\n        ɵngcc0.ɵɵtemplate(3, MapLegendToolComponent_p_3_Template, 5, 7, \"p\", 2);\n        ɵngcc0.ɵɵpipe(4, \"async\");\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵtemplate(6, MapLegendToolComponent_ng_template_6_Template, 1, 1, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n    } if (rf & 2) {\n        const _r3 = ɵngcc0.ɵɵreference(7);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showAllLegend());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(2, 4, ctx.layers$).length !== 0)(\"ngIfElse\", _r3);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.allowShowAllLegends && ɵngcc0.ɵɵpipeBind1(4, 6, ctx.layers$).length !== 0 && ɵngcc0.ɵɵpipeBind1(5, 8, ctx.visibleOrInRangeLayers$).length === 0);\n    } }, directives: [ɵngcc5.NgIf, ɵngcc3.LayerLegendListComponent, ɵngcc3.LayerLegendListBindingDirective, ɵngcc12.MatList, ɵngcc12.MatListItem, ɵngcc9.MatIcon, ɵngcc12.MatListIconCssMatStyler, ɵngcc13.MatLine], pipes: [ɵngcc5.AsyncPipe, ɵngcc10.TranslatePipe], styles: [\".catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .map-empty[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{margin:10px}.map-empty[_ngcontent-%COMP%]{text-align:justify}.catalog-tool[_ngcontent-%COMP%], .context-tool[_ngcontent-%COMP%], .search-tool[_ngcontent-%COMP%]{cursor:pointer}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}mat-list-item[_ngcontent-%COMP%]     .mat-list-text{font-size:smaller}mat-list.mat-list-base[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]     div.mat-list-item-content div.mat-list-text{padding-left:5px}\"] });\nMapLegendToolComponent.ctorParameters = () => [\n    { type: MapState },\n    { type: ToolState },\n    { type: SearchSourceService },\n    { type: ChangeDetectorRef }\n];\nMapLegendToolComponent.propDecorators = {\n    updateLegendOnResolutionChange: [{ type: Input }],\n    layerAdditionAllowed: [{ type: Input }],\n    allowShowAllLegends: [{ type: Input }],\n    showAllLegendsValue: [{ type: Input }],\n    layerListControls: [{ type: Input }]\n};\nMapLegendToolComponent = __decorate([\n    ToolComponent({\n        name: 'mapLegend',\n        title: 'igo.integration.tools.legend',\n        icon: 'format-list-bulleted-type'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        ToolState,\n        SearchSourceService,\n        ChangeDetectorRef])\n], MapLegendToolComponent);\n\nclass IgoAppMapModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppMapModule,\n            providers: []\n        };\n    }\n}\nIgoAppMapModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppMapModule });\nIgoAppMapModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppMapModule_Factory(t) { return new (t || IgoAppMapModule)(); }, imports: [[\n            CommonModule,\n            MatTabsModule,\n            MatListModule,\n            MatIconModule,\n            IgoLanguageModule,\n            IgoLayerModule,\n            IgoMetadataModule,\n            IgoDownloadModule,\n            IgoImportExportModule,\n            IgoFilterModule,\n            IgoContextModule,\n            IgoAppWorkspaceModule\n        ]] });\n\n/**\n * Service that holds the state of the measure module\n */\nclass MeasureState {\n    constructor(mapState) {\n        this.mapState = mapState;\n        /**\n         * Store that holds the measures\n         */\n        this.store = new FeatureStore([], {\n            map: this.mapState.map\n        });\n    }\n}\nMeasureState.ɵfac = function MeasureState_Factory(t) { return new (t || MeasureState)(ɵngcc0.ɵɵinject(MapState)); };\nMeasureState.ɵprov = ɵɵdefineInjectable({ factory: function MeasureState_Factory() { return new MeasureState(ɵɵinject(MapState)); }, token: MeasureState, providedIn: \"root\" });\nMeasureState.ctorParameters = () => [\n    { type: MapState }\n];\n\n/**\n * Tool to measure lengths and areas\n */\nlet MeasurerToolComponent = class MeasurerToolComponent {\n    constructor(measureState, mapState) {\n        this.measureState = measureState;\n        this.mapState = mapState;\n    }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get store() { return this.measureState.store; }\n    /**\n     * Map to measure on\n     * @internal\n     */\n    get map() { return this.mapState.map; }\n};\nMeasurerToolComponent.ɵfac = function MeasurerToolComponent_Factory(t) { return new (t || MeasurerToolComponent)(ɵngcc0.ɵɵdirectiveInject(MeasureState), ɵngcc0.ɵɵdirectiveInject(MapState)); };\nMeasurerToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MeasurerToolComponent, selectors: [[\"igo-measurer-tool\"]], decls: 1, vars: 2, consts: [[3, \"store\", \"map\"]], template: function MeasurerToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-measurer\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"store\", ctx.store)(\"map\", ctx.map);\n    } }, directives: [ɵngcc3.MeasurerComponent], encapsulation: 2, changeDetection: 0 });\nMeasurerToolComponent.ctorParameters = () => [\n    { type: MeasureState },\n    { type: MapState }\n];\nMeasurerToolComponent = __decorate([\n    ToolComponent({\n        name: 'measurer',\n        title: 'igo.integration.tools.measurer',\n        icon: 'ruler'\n    }),\n    __metadata(\"design:paramtypes\", [MeasureState,\n        MapState])\n], MeasurerToolComponent);\n\n/**\n * @ignore\n */\nclass IgoAppMeasurerToolModule {\n}\nIgoAppMeasurerToolModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppMeasurerToolModule });\nIgoAppMeasurerToolModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppMeasurerToolModule_Factory(t) { return new (t || IgoAppMeasurerToolModule)(); }, imports: [[\n            IgoMeasurerModule\n        ]] });\n\nclass IgoAppMeasureModule {\n}\nIgoAppMeasureModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppMeasureModule });\nIgoAppMeasureModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppMeasureModule_Factory(t) { return new (t || IgoAppMeasureModule)(); }, imports: [[], IgoAppMeasurerToolModule] });\n\nlet PrintToolComponent = class PrintToolComponent {\n    constructor(mapState) {\n        this.mapState = mapState;\n    }\n    get map() {\n        return this.mapState.map;\n    }\n};\nPrintToolComponent.ɵfac = function PrintToolComponent_Factory(t) { return new (t || PrintToolComponent)(ɵngcc0.ɵɵdirectiveInject(MapState)); };\nPrintToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: PrintToolComponent, selectors: [[\"igo-print-tool\"]], decls: 1, vars: 1, consts: [[3, \"map\"]], template: function PrintToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-print\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"map\", ctx.map);\n    } }, directives: [ɵngcc3.PrintComponent], encapsulation: 2 });\nPrintToolComponent.ctorParameters = () => [\n    { type: MapState }\n];\nPrintToolComponent = __decorate([\n    ToolComponent({\n        name: 'print',\n        title: 'igo.integration.tools.print',\n        icon: 'printer'\n    }),\n    __metadata(\"design:paramtypes\", [MapState])\n], PrintToolComponent);\n\nclass IgoAppPrintModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppPrintModule,\n            providers: []\n        };\n    }\n}\nIgoAppPrintModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppPrintModule });\nIgoAppPrintModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppPrintModule_Factory(t) { return new (t || IgoAppPrintModule)(); }, imports: [[IgoPrintModule]] });\n\n/**\n * Service that holds the state of the search module\n */\nclass SearchState {\n    constructor(searchSourceService) {\n        this.searchSourceService = searchSourceService;\n        this.searchTerm$ = new BehaviorSubject(undefined);\n        this.searchType$ = new BehaviorSubject(undefined);\n        this.searchDisabled$ = new BehaviorSubject(false);\n        this.searchSettingsChange$ = new BehaviorSubject(undefined);\n        this.selectedResult$ = new BehaviorSubject(undefined);\n        /**\n         * Store that holds the search results\n         */\n        this.store = new EntityStore([]);\n    }\n    /**\n     * Search types currently enabled in the search source service\n     */\n    get searchTypes() {\n        return this.searchSourceService\n            .getEnabledSources()\n            .map((source) => source.constructor.type);\n    }\n    enableSearch() {\n        this.searchDisabled$.next(false);\n    }\n    disableSearch() {\n        this.searchDisabled$.next(true);\n    }\n    setSearchTerm(searchTerm) {\n        this.searchTerm$.next(searchTerm);\n    }\n    setSearchType(searchType) {\n        this.searchSourceService.enableSourcesByType(searchType);\n        this.searchType$.next(searchType);\n    }\n    setSearchSettingsChange() {\n        this.searchSettingsChange$.next(true);\n    }\n    setSelectedResult(result) {\n        this.selectedResult$.next(result);\n    }\n}\nSearchState.ɵfac = function SearchState_Factory(t) { return new (t || SearchState)(ɵngcc0.ɵɵinject(ɵngcc3.SearchSourceService)); };\nSearchState.ɵprov = ɵɵdefineInjectable({ factory: function SearchState_Factory() { return new SearchState(ɵɵinject(SearchSourceService)); }, token: SearchState, providedIn: \"root\" });\nSearchState.ctorParameters = () => [\n    { type: SearchSourceService }\n];\n\nclass SearchBarBindingDirective {\n    constructor(component, searchState) {\n        this.component = component;\n        this.searchState = searchState;\n    }\n    get searchTerm() { return this.searchState.searchTerm$.value; }\n    get searchType() { return this.searchState.searchType$.value; }\n    ngOnInit() {\n        this.searchTerm$$ = this.searchState.searchTerm$.subscribe((searchTerm) => {\n            if (searchTerm !== undefined && searchTerm !== null) {\n                this.component.setTerm(searchTerm);\n            }\n        });\n        this.searchType$$ = this.searchState.searchType$.subscribe((searchType) => {\n            if (searchType !== undefined && searchType !== null) {\n                this.component.setSearchType(searchType);\n            }\n        });\n        this.searchDisabled$$ = this.searchState.searchDisabled$.subscribe((searchDisabled) => {\n            this.component.disabled = searchDisabled;\n        });\n    }\n    ngOnDestroy() {\n        this.searchTerm$$.unsubscribe();\n        this.searchType$$.unsubscribe();\n        this.searchDisabled$$.unsubscribe();\n    }\n    onSearchTermChange(searchTerm) {\n        if (searchTerm !== this.searchTerm) {\n            this.searchState.setSearchTerm(searchTerm);\n        }\n    }\n    onSearchTypeChange(searchType) {\n        if (searchType !== this.searchType) {\n            this.searchState.setSearchType(searchType);\n        }\n    }\n}\nSearchBarBindingDirective.ɵfac = function SearchBarBindingDirective_Factory(t) { return new (t || SearchBarBindingDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc3.SearchBarComponent, 2), ɵngcc0.ɵɵdirectiveInject(SearchState)); };\nSearchBarBindingDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: SearchBarBindingDirective, selectors: [[\"\", \"igoSearchBarBinding\", \"\"]], hostBindings: function SearchBarBindingDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"searchTermChange\", function SearchBarBindingDirective_searchTermChange_HostBindingHandler($event) { return ctx.onSearchTermChange($event); })(\"searchTypeChange\", function SearchBarBindingDirective_searchTypeChange_HostBindingHandler($event) { return ctx.onSearchTypeChange($event); });\n    } } });\nSearchBarBindingDirective.ctorParameters = () => [\n    { type: SearchBarComponent, decorators: [{ type: Self }] },\n    { type: SearchState }\n];\nSearchBarBindingDirective.propDecorators = {\n    onSearchTermChange: [{ type: HostListener, args: ['searchTermChange', ['$event'],] }],\n    onSearchTypeChange: [{ type: HostListener, args: ['searchTypeChange', ['$event'],] }]\n};\n\n/**\n * @ignore\n */\nclass IgoAppSearchBarModule {\n}\nIgoAppSearchBarModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppSearchBarModule });\nIgoAppSearchBarModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppSearchBarModule_Factory(t) { return new (t || IgoAppSearchBarModule)(); }, imports: [[IgoSearchModule]] });\n\n/**\n * Tool to browse the search results\n */\nlet SearchResultsToolComponent = class SearchResultsToolComponent {\n    constructor(mapState, layerService, searchState, elRef, toolState, directionState) {\n        this.mapState = mapState;\n        this.layerService = layerService;\n        this.searchState = searchState;\n        this.elRef = elRef;\n        this.toolState = toolState;\n        this.directionState = directionState;\n        /**\n         * to show hide results icons\n         */\n        this.showIcons = true;\n        this.term = '';\n        this.settingsChange$ = new BehaviorSubject(undefined);\n        this.topPanelState$ = new BehaviorSubject('initial');\n        this.format = new olFormatGeoJSON();\n    }\n    /**\n     * Store holding the search results\n     * @internal\n     */\n    get store() {\n        return this.searchState.store;\n    }\n    /**\n     * Map to display the results on\n     * @internal\n     */\n    get map() {\n        return this.mapState.map;\n    }\n    get featureTitle() {\n        return this.feature ? getEntityTitle(this.feature) : undefined;\n    }\n    get feature$() {\n        return this.store.stateView\n            .firstBy$(e => e.state.focused)\n            .pipe(map(element => (this.feature = element\n            ? element.entity.data\n            : undefined)));\n    }\n    set topPanelState(value) {\n        this.topPanelState$.next(value);\n    }\n    get topPanelState() {\n        return this.topPanelState$.value;\n    }\n    ngOnInit() {\n        this.searchTerm$$ = this.searchState.searchTerm$.subscribe((searchTerm) => {\n            if (searchTerm !== undefined && searchTerm !== null) {\n                this.term = searchTerm;\n            }\n        });\n        for (const res of this.store.entities$.value) {\n            if (this.store.state.get(res).selected === true) {\n                this.topPanelState = 'expanded';\n            }\n        }\n        this.searchState.searchSettingsChange$.subscribe(() => {\n            this.settingsChange$.next(true);\n        });\n        this.topPanelState$$ = this.topPanelState$.subscribe(() => {\n            const igoList = this.computeElementRef()[0];\n            const selected = this.computeElementRef()[1];\n            if (selected) {\n                setTimeout(() => {\n                    if (!this.isScrolledIntoView(igoList, selected)) {\n                        this.adjustTopPanel(igoList, selected);\n                    }\n                }, FlexibleComponent.transitionTime + 50);\n            }\n        });\n    }\n    ngOnDestroy() {\n        this.topPanelState$$.unsubscribe();\n        this.searchTerm$$.unsubscribe();\n    }\n    /**\n     * Try to add a feature to the map when it's being focused\n     * @internal\n     * @param result A search result that could be a feature\n     */\n    onResultFocus(result) {\n        if (result.meta.dataType === FEATURE) {\n            if (this.map.viewController.getZoom() < 11 && (result.data.geometry.type === 'MultiLineString' || result.data.geometry.type === 'LineString')) {\n                result.data.meta.style = createOverlayDefaultStyle({ strokeWidth: 10 });\n            }\n            else if (this.map.viewController.getZoom() < 11 && (result.data.geometry.type === 'MultiPolygon' || result.data.geometry.type === 'Polygon')) {\n                result.data.meta.style = createOverlayDefaultStyle({ strokeWidth: 2 });\n            }\n            else if (this.map.viewController.getZoom() > 10 && result.data.geometry.type !== 'Point') {\n                result.data.meta.style = createOverlayDefaultStyle();\n            }\n            this.map.overlay.addFeature(result.data, FeatureMotion.None);\n        }\n    }\n    onResultUnfocus(result) {\n        if (result.meta.dataType !== FEATURE) {\n            return;\n        }\n        if (this.store.state.get(result).selected === true) {\n            return;\n        }\n        this.map.overlay.removeFeature(result.data);\n    }\n    /**\n     * Try to add a feature to the map when it's being selected\n     * @internal\n     * @param result A search result that could be a feature or some layer options\n     */\n    onResultSelect(result) {\n        this.map.overlay.dataSource.ol.clear();\n        this.tryAddFeatureToMap(result);\n        this.searchState.setSelectedResult(result);\n        if (this.topPanelState === 'expanded') {\n            const igoList = this.computeElementRef()[0];\n            const selected = this.computeElementRef()[1];\n            setTimeout(() => {\n                if (!this.isScrolledIntoView(igoList, selected)) {\n                    this.adjustTopPanel(igoList, selected);\n                }\n            }, FlexibleComponent.transitionTime + 50);\n        }\n        if (this.topPanelState === 'initial') {\n            this.topPanelState = 'expanded';\n        }\n    }\n    onSearch(event) {\n        const results = event.results;\n        const newResults = this.store.entities$.value\n            .filter((result) => result.source !== event.research.source)\n            .concat(results);\n        this.store.load(newResults);\n        for (const res of this.store.all()) {\n            if (this.store.state.get(res).focused === true && this.store.state.get(res).selected !== true) {\n                this.store.state.update(res, { focused: false }, true);\n            }\n        }\n        setTimeout(() => {\n            const igoList = this.elRef.nativeElement.querySelector('igo-list');\n            let moreResults;\n            event.research.request.subscribe((source) => {\n                if (source[0].source.getId() === 'icherche') {\n                    moreResults = igoList.querySelector('.icherche .moreResults');\n                }\n                else if (source[0].source.getId() === 'ilayer') {\n                    moreResults = igoList.querySelector('.ilayer .moreResults');\n                }\n                else if (source[0].source.getId() === 'nominatim') {\n                    moreResults = igoList.querySelector('.nominatim .moreResults');\n                }\n                if (moreResults !== null && !this.isScrolledIntoView(igoList, moreResults)) {\n                    igoList.scrollTop = moreResults.offsetTop + moreResults.offsetHeight - igoList.clientHeight;\n                }\n            });\n        }, 250);\n    }\n    computeElementRef() {\n        const items = document.getElementsByTagName('igo-search-results-item');\n        const igoList = this.elRef.nativeElement.getElementsByTagName('igo-list')[0];\n        let selectedItem;\n        // tslint:disable-next-line\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].className.includes('igo-list-item-selected')) {\n                selectedItem = items[i];\n            }\n        }\n        return [igoList, selectedItem];\n    }\n    adjustTopPanel(elemSource, elem) {\n        if (!this.isScrolledIntoView(elemSource, elem)) {\n            elemSource.scrollTop = elem.offsetTop + elem.children[0].offsetHeight - elemSource.clientHeight;\n        }\n    }\n    toggleTopPanel() {\n        if (this.topPanelState === 'expanded') {\n            this.topPanelState = 'collapsed';\n        }\n        else {\n            this.topPanelState = 'expanded';\n        }\n    }\n    zoomToFeatureExtent() {\n        if (this.feature.geometry) {\n            const olFeature = this.format.readFeature(this.feature, {\n                dataProjection: this.feature.projection,\n                featureProjection: this.map.projection\n            });\n            moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\n        }\n    }\n    /**\n     * Try to add a feature to the map overlay\n     * @param result A search result that could be a feature\n     */\n    tryAddFeatureToMap(result) {\n        if (result.meta.dataType !== FEATURE) {\n            return undefined;\n        }\n        const feature = result.data;\n        if (feature.geometry.type !== 'Point') {\n            feature.meta.style = createOverlayDefaultStyle();\n        }\n        // Somethimes features have no geometry. It happens with some GetFeatureInfo\n        if (feature.geometry === undefined) {\n            return;\n        }\n        this.map.overlay.addFeature(feature);\n    }\n    isScrolledIntoView(elemSource, elem) {\n        const padding = 6;\n        const docViewTop = elemSource.scrollTop;\n        const docViewBottom = docViewTop + elemSource.clientHeight;\n        const elemTop = elem.offsetTop;\n        const elemBottom = elemTop + elem.clientHeight + padding;\n        return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));\n    }\n    getRoute(features) {\n        this.toolState.toolbox.activateTool('directions');\n        this.directionState.stopsStore.clear();\n        this.directionState.setRouteFromFeatureDetail(true);\n        this.directionState.stopsStore.insertMany(features);\n    }\n};\nSearchResultsToolComponent.ɵfac = function SearchResultsToolComponent_Factory(t) { return new (t || SearchResultsToolComponent)(ɵngcc0.ɵɵdirectiveInject(MapState), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LayerService), ɵngcc0.ɵɵdirectiveInject(SearchState), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ToolState), ɵngcc0.ɵɵdirectiveInject(DirectionState)); };\nSearchResultsToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SearchResultsToolComponent, selectors: [[\"igo-search-results-tool\"]], inputs: { showIcons: \"showIcons\", topPanelState: \"topPanelState\" }, decls: 3, vars: 4, consts: [[\"style\", \"margin: 10px;\", 4, \"ngIf\"], [\"initial\", \"100%\", \"initialMobile\", \"100%\", \"collapsed\", \"calc(100% - 58px)\", \"collapsedMobile\", \"calc(100% - 58px)\", \"expanded\", \"60%\", \"expandedMobile\", \"60%\", 3, \"state\", 4, \"ngIf\"], [2, \"margin\", \"10px\"], [1, \"mat-typography\"], [3, \"innerHTML\"], [\"initial\", \"100%\", \"initialMobile\", \"100%\", \"collapsed\", \"calc(100% - 58px)\", \"collapsedMobile\", \"calc(100% - 58px)\", \"expanded\", \"60%\", \"expandedMobile\", \"60%\", 3, \"state\"], [\"topPanel\", \"\"], [1, \"igo-content\"], [\"placeholder\", \"false\", 3, \"store\", \"showIcons\", \"term\", \"settingsChange$\", \"resultFocus\", \"resultSelect\", \"resultUnfocus\", \"resultMouseenter\", \"resultMouseleave\", \"moreResults\"], [\"igoSearchItemToolbar\", \"\"], [\"igoFlexibleFill\", \"\", 1, \"igo-content\"], [3, \"title\", 4, \"ngIf\"], [3, \"map\", \"layer\"], [3, \"title\"], [\"mat-icon-button\", \"\", \"panelLeftButton\", \"\", 1, \"igo-icon-button\", 3, \"click\"], [3, \"svgIcon\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", \"class\", \"igo-icon-button\", 3, \"click\", 4, \"ngIf\"], [\"igoFeatureDetailsDirective\", \"\", 3, \"feature\", \"map\", \"toolbox\", \"routingEvent\"], [\"mat-icon-button\", \"\", \"panelRightButton\", \"\", 1, \"igo-icon-button\", 3, \"click\"], [\"svgIcon\", \"magnify-plus-outline\"]], template: function SearchResultsToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, SearchResultsToolComponent_div_0_Template, 13, 11, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, SearchResultsToolComponent_igo_flexible_1_Template, 10, 10, \"igo-flexible\", 1);\n        ɵngcc0.ɵɵpipe(2, \"async\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.store || ctx.store.empty);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.store && !ɵngcc0.ɵɵpipeBind1(2, 2, ctx.store.empty$));\n    } }, directives: [ɵngcc5.NgIf, ɵngcc1.FlexibleComponent, ɵngcc3.SearchResultsComponent, ɵngcc3.SearchResultAddButtonComponent, ɵngcc1.PanelComponent, ɵngcc7.MatButton, ɵngcc9.MatIcon, ɵngcc3.FeatureDetailsComponent, ɵngcc3.FeatureDetailsDirective], pipes: [ɵngcc5.AsyncPipe, ɵngcc10.TranslatePipe, ɵngcc1.SanitizeHtmlPipe], encapsulation: 2, changeDetection: 0 });\nSearchResultsToolComponent.ctorParameters = () => [\n    { type: MapState },\n    { type: LayerService },\n    { type: SearchState },\n    { type: ElementRef },\n    { type: ToolState },\n    { type: DirectionState }\n];\nSearchResultsToolComponent.propDecorators = {\n    showIcons: [{ type: Input }],\n    topPanelState: [{ type: Input }]\n};\nSearchResultsToolComponent = __decorate([\n    ToolComponent({\n        name: 'searchResults',\n        title: 'igo.integration.tools.searchResults',\n        icon: 'magnify'\n    }),\n    __metadata(\"design:paramtypes\", [MapState,\n        LayerService,\n        SearchState,\n        ElementRef,\n        ToolState,\n        DirectionState])\n], SearchResultsToolComponent);\n\n/**\n * @ignore\n */\nclass IgoAppSearchResultsToolModule {\n}\nIgoAppSearchResultsToolModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppSearchResultsToolModule });\nIgoAppSearchResultsToolModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppSearchResultsToolModule_Factory(t) { return new (t || IgoAppSearchResultsToolModule)(); }, imports: [[\n            CommonModule,\n            MatIconModule,\n            MatButtonModule,\n            IgoLanguageModule,\n            IgoFeatureModule,\n            IgoSearchModule,\n            IgoFlexibleModule,\n            IgoPanelModule,\n            IgoFeatureDetailsModule,\n            IgoCustomHtmlModule\n        ]] });\n\nclass IgoAppSearchModule {\n}\nIgoAppSearchModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppSearchModule });\nIgoAppSearchModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppSearchModule_Factory(t) { return new (t || IgoAppSearchModule)(); }, imports: [[], IgoAppSearchBarModule, IgoAppSearchResultsToolModule] });\n\nlet OgcFilterToolComponent = class OgcFilterToolComponent {\n    constructor() { }\n};\nOgcFilterToolComponent.ɵfac = function OgcFilterToolComponent_Factory(t) { return new (t || OgcFilterToolComponent)(); };\nOgcFilterToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: OgcFilterToolComponent, selectors: [[\"igo-ogc-filter-tool\"]], decls: 1, vars: 0, consts: [[\"igoOgcFilterableListBinding\", \"\"]], template: function OgcFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-ogc-filterable-list\", 0);\n    } }, directives: [ɵngcc3.OgcFilterableListComponent, ɵngcc3.OgcFilterableListBindingDirective], encapsulation: 2 });\nOgcFilterToolComponent.ctorParameters = () => [];\nOgcFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'ogcFilter',\n        title: 'igo.integration.tools.ogcFilter',\n        icon: 'filter'\n    }),\n    __metadata(\"design:paramtypes\", [])\n], OgcFilterToolComponent);\n\nlet TimeFilterToolComponent = class TimeFilterToolComponent {\n    constructor() { }\n};\nTimeFilterToolComponent.ɵfac = function TimeFilterToolComponent_Factory(t) { return new (t || TimeFilterToolComponent)(); };\nTimeFilterToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: TimeFilterToolComponent, selectors: [[\"igo-time-filter-tool\"]], decls: 1, vars: 0, consts: [[\"igoTimeFilterListBinding\", \"\"]], template: function TimeFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-time-filter-list\", 0);\n    } }, directives: [ɵngcc3.TimeFilterListComponent, ɵngcc3.TimeFilterListBindingDirective], encapsulation: 2 });\nTimeFilterToolComponent.ctorParameters = () => [];\nTimeFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'timeFilter',\n        title: 'igo.integration.tools.timeFilter',\n        icon: 'history'\n    }),\n    __metadata(\"design:paramtypes\", [])\n], TimeFilterToolComponent);\n\n/**\n * Tool to apply spatial filter\n */\nlet SpatialFilterToolComponent = class SpatialFilterToolComponent {\n    constructor(matIconRegistry, spatialFilterService, dataSourceService, layerService, mapState, messageService, languageService, importExportState, toolState, workspaceState, cdRef) {\n        this.matIconRegistry = matIconRegistry;\n        this.spatialFilterService = spatialFilterService;\n        this.dataSourceService = dataSourceService;\n        this.layerService = layerService;\n        this.mapState = mapState;\n        this.messageService = messageService;\n        this.languageService = languageService;\n        this.importExportState = importExportState;\n        this.toolState = toolState;\n        this.workspaceState = workspaceState;\n        this.cdRef = cdRef;\n        this.itemType = SpatialFilterItemType.Address;\n        this.layers = [];\n        this.activeLayers = [];\n        this.iterator = 1;\n        this.selectedFeature$ = new BehaviorSubject(undefined);\n        this.format = new olFormatGeoJSON();\n        this.store = new EntityStore([]); // Store to print results at the end\n        this.spatialListStore = new EntityStore([]);\n        this.loading = false;\n        this.thematicLength = 0;\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    getOutputType(event) {\n        this.type = event;\n        this.queryType = undefined;\n        this.radius = undefined;\n    }\n    getOutputQueryType(event) {\n        this.queryType = event;\n        if (this.queryType) {\n            this.loadFilterList();\n        }\n    }\n    activateExportTool() {\n        const ids = [];\n        for (const layer of this.layers) {\n            ids.push(layer.id);\n        }\n        this.importExportState.setMode('export');\n        this.importExportState.setsExportOptions({ layers: ids });\n        this.toolState.toolbox.activateTool('importExport');\n    }\n    activateWorkspace() {\n        let layerToOpenWks;\n        this.workspaceState.store.entities$.subscribe(() => {\n            if (this.activeLayers.length && this.workspaceState.store.all().length > 1) {\n                if (this.itemType === SpatialFilterItemType.Thematics) {\n                    for (const thematic of this.thematics) {\n                        if (!thematic.zeroResults) {\n                            layerToOpenWks = this.activeLayers.find(layer => layer.title.includes(thematic.name + ' ' + this.iterator.toString()));\n                            break;\n                        }\n                    }\n                }\n                else {\n                    const title = 'Adresses ' + this.iterator.toString();\n                    this.activeLayers.forEach((layer) => {\n                        if (layer.title.includes(title)) {\n                            layerToOpenWks = layer;\n                        }\n                    });\n                }\n                if (layerToOpenWks) {\n                    this.workspaceState.workspacePanelExpanded = true;\n                    this.workspaceState.setActiveWorkspaceByLayerId(layerToOpenWks.id);\n                }\n            }\n        });\n    }\n    loadFilterList() {\n        this.spatialFilterService\n            .loadFilterList(this.queryType)\n            .subscribe((features) => {\n            features.sort((a, b) => {\n                if (a.properties.nom < b.properties.nom) {\n                    return -1;\n                }\n                if (a.properties.nom > b.properties.nom) {\n                    return 1;\n                }\n                return 0;\n            });\n            this.spatialListStore.clear();\n            this.spatialListStore.load(features);\n        });\n    }\n    getOutputToggleSearch() {\n        this.loadThematics();\n    }\n    getOutputClearSearch() {\n        this.zone = undefined;\n        this.queryType = undefined;\n    }\n    clearMap() {\n        this.layers = [];\n        this.activeLayers = [];\n        this.thematicLength = 0;\n        this.iterator = 1;\n        if (this.type !== SpatialFilterType.Predefined) {\n            this.zone = undefined;\n        }\n    }\n    loadThematics() {\n        this.loading = true;\n        let zeroResults = true;\n        let thematics;\n        this.tryAddFeaturesToMap([this.zone]);\n        if (this.itemType !== SpatialFilterItemType.Thematics) {\n            const theme = {\n                name: ''\n            };\n            thematics = [theme];\n        }\n        else {\n            thematics = this.thematics;\n        }\n        if (this.type === SpatialFilterType.Polygon) {\n            this.radius = undefined;\n        }\n        const observables$ = [];\n        thematics.forEach(thematic => {\n            observables$.push(this.spatialFilterService\n                .loadFilterItem(this.zone, this.itemType, this.queryType, thematic, this.radius)\n                .pipe(tap((features) => {\n                this.store.insertMany(features);\n                const featuresPoint = [];\n                const featuresLinePoly = [];\n                let idPoint;\n                let idLinePoly;\n                features.forEach(feature => {\n                    if (feature.geometry.type === 'Point') {\n                        featuresPoint.push(feature);\n                        idPoint = feature.meta.id;\n                    }\n                    else {\n                        featuresLinePoly.push(feature);\n                        idLinePoly = feature.meta.id;\n                    }\n                });\n                this.tryAddPointToMap(featuresPoint, idPoint);\n                this.tryAddLayerToMap(featuresLinePoly, idLinePoly);\n                if (features.length) {\n                    zeroResults = false;\n                    this.thematicLength += 1;\n                    thematic.zeroResults = false;\n                    this.cdRef.detectChanges();\n                }\n                else {\n                    thematic.zeroResults = true;\n                }\n                if (features.length >= 10000) {\n                    this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.maxSizeAlert'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'), { timeOut: 10000 });\n                }\n            })));\n        });\n        forkJoin(observables$).subscribe(() => {\n            this.loading = false;\n            if (zeroResults) {\n                this.messageService.alert(this.languageService.translate.instant('igo.geo.spatialFilter.zeroResults'), this.languageService.translate.instant('igo.geo.spatialFilter.warning'), { timeOut: 10000 });\n            }\n        });\n    }\n    onZoneChange(feature) {\n        this.zone = feature;\n        if (feature) {\n            this.tryAddFeaturesToMap([feature]);\n            this.zoomToFeatureExtent(feature);\n        }\n    }\n    /**\n     * Try to add zone feature to the map overlay\n     */\n    tryAddFeaturesToMap(features) {\n        var _a, _b;\n        let i = 1;\n        for (const feature of features) {\n            if (this.type === SpatialFilterType.Predefined) {\n                for (const layer of this.map.layers) {\n                    if (layer.options._internal &&\n                        layer.options._internal.code === feature.properties.code) {\n                        return;\n                    }\n                    if ((_a = layer.title) === null || _a === void 0 ? void 0 : _a.startsWith('Zone')) {\n                        this.map.removeLayer(layer);\n                    }\n                }\n            }\n            else {\n                this.activeLayers = [];\n            }\n            for (const layer of this.layers) {\n                if ((_b = layer.title) === null || _b === void 0 ? void 0 : _b.startsWith('Zone')) {\n                    i++;\n                }\n            }\n            this.dataSourceService\n                .createAsyncDataSource({\n                type: 'vector',\n                queryable: true\n            })\n                .subscribe((dataSource) => {\n                const olLayer = this.layerService.createLayer({\n                    title: ('Zone ' + i),\n                    _internal: {\n                        code: this.type === SpatialFilterType.Predefined\n                            ? feature.properties.code\n                            : undefined\n                    },\n                    source: dataSource,\n                    visible: true,\n                    style: (_feature, resolution) => {\n                        const coordinates = features[0].coordinates;\n                        return new Style({\n                            image: new Circle({\n                                radius: coordinates\n                                    ? this.radius /\n                                        Math.cos((Math.PI / 180) * coordinates[1]) /\n                                        resolution\n                                    : undefined,\n                                fill: new Fill({\n                                    color: 'rgba(200, 200, 20, 0.2)'\n                                }),\n                                stroke: new Stroke({\n                                    width: 1,\n                                    color: 'orange'\n                                })\n                            }),\n                            stroke: new Stroke({\n                                width: 1,\n                                color: 'orange'\n                            }),\n                            fill: new Fill({\n                                color: 'rgba(200, 200, 20, 0.2)'\n                            })\n                        });\n                    }\n                });\n                const featuresOl = features.map(f => {\n                    return featureToOl(f, this.map.projection);\n                });\n                if (this.type !== SpatialFilterType.Predefined) {\n                    const type = this.type === SpatialFilterType.Point ? 'Cercle' : 'Polygone';\n                    featuresOl[0].set('nom', 'Zone', true);\n                    featuresOl[0].set('type', type, true);\n                }\n                dataSource.ol.addFeatures(featuresOl);\n                this.map.addLayer(olLayer);\n                this.layers.push(olLayer);\n                this.activeLayers.push(olLayer);\n                this.cdRef.detectChanges();\n            });\n        }\n    }\n    /**\n     * Try to point features to the map\n     * Necessary to create clusters\n     */\n    tryAddPointToMap(features, id) {\n        var _a;\n        let i = 1;\n        if (features.length) {\n            if (this.map === undefined) {\n                return;\n            }\n            for (const layer of this.layers) {\n                if ((_a = layer.title) === null || _a === void 0 ? void 0 : _a.startsWith(features[0].meta.title)) {\n                    i++;\n                }\n            }\n            this.dataSourceService\n                .createAsyncDataSource({\n                type: 'cluster',\n                id,\n                queryable: true,\n                distance: 120,\n                meta: {\n                    title: 'Cluster'\n                }\n            })\n                .subscribe((dataSource) => {\n                const icon = features[0].meta.icon;\n                let style;\n                if (!icon) {\n                    style = createOverlayMarkerStyle();\n                }\n                else {\n                    style = this.createSvgIcon(icon) || createOverlayMarkerStyle();\n                }\n                const olLayer = this.layerService.createLayer({\n                    title: (features[0].meta.title + ' ' + i),\n                    source: dataSource,\n                    visible: true,\n                    style\n                });\n                const featuresOl = features.map(feature => {\n                    return featureToOl(feature, this.map.projection);\n                });\n                dataSource.ol.source.addFeatures(featuresOl);\n                if (this.map.layers.find(layer => layer.id === olLayer.id)) {\n                    this.map.removeLayer(this.map.layers.find(layer => layer.id === olLayer.id));\n                    i = i - 1;\n                    olLayer.title = (features[0].meta.title + ' ' + i);\n                    olLayer.options.title = olLayer.title;\n                }\n                this.iterator = i;\n                this.map.addLayer(olLayer);\n                this.layers.push(olLayer);\n                this.pushLayer(olLayer);\n                this.cdRef.detectChanges();\n            });\n        }\n    }\n    createSvgIcon(icon) {\n        let style;\n        this.matIconRegistry.getNamedSvgIcon(icon).subscribe(svgObj => {\n            const xmlSerializer = new XMLSerializer();\n            svgObj.setAttribute('width', '30');\n            svgObj.setAttribute('height', '30');\n            svgObj.setAttribute('fill', 'rgba(0, 128, 255)');\n            svgObj.setAttribute('stroke', 'white');\n            const svg = xmlSerializer.serializeToString(svgObj);\n            style = new Style({\n                image: new Icon({\n                    src: 'data:image/svg+xml;utf8,' + svg\n                })\n            });\n        });\n        return style;\n    }\n    /**\n     * Try to add line or polygon features to the map\n     */\n    tryAddLayerToMap(features, id) {\n        var _a;\n        let i = 1;\n        if (features.length) {\n            if (this.map === undefined) {\n                return;\n            }\n            for (const layer of this.map.layers) {\n                if ((_a = layer.title) === null || _a === void 0 ? void 0 : _a.startsWith(features[0].meta.title)) {\n                    i++;\n                }\n            }\n            this.dataSourceService\n                .createAsyncDataSource({\n                type: 'vector',\n                id,\n                queryable: true\n            })\n                .subscribe((dataSource) => {\n                const olLayer = this.layerService.createLayer({\n                    title: (features[0].meta.title + ' ' + i),\n                    source: dataSource,\n                    visible: true\n                });\n                const featuresOl = features.map(feature => {\n                    return featureToOl(feature, this.map.projection);\n                });\n                dataSource.ol.addFeatures(featuresOl);\n                if (this.map.layers.find(layer => layer.id === olLayer.id)) {\n                    this.map.removeLayer(this.map.layers.find(layer => layer.id === olLayer.id));\n                    i = i - 1;\n                    olLayer.title = (features[0].meta.title + ' ' + i);\n                    olLayer.options.title = olLayer.title;\n                }\n                this.map.addLayer(olLayer);\n                this.layers.push(olLayer);\n                this.pushLayer(olLayer);\n                this.cdRef.detectChanges();\n            });\n        }\n    }\n    zoomToFeatureExtent(feature) {\n        if (feature) {\n            const olFeature = this.format.readFeature(feature, {\n                dataProjection: feature.projection,\n                featureProjection: this.map.projection\n            });\n            moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\n        }\n    }\n    pushLayer(layer) {\n        let push = true;\n        for (const lay of this.activeLayers) {\n            if (lay.id === layer.id) {\n                push = false;\n            }\n        }\n        if (push === true) {\n            this.activeLayers.push(layer);\n        }\n    }\n};\nSpatialFilterToolComponent.ɵfac = function SpatialFilterToolComponent_Factory(t) { return new (t || SpatialFilterToolComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc9.MatIconRegistry), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.SpatialFilterService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.DataSourceService), ɵngcc0.ɵɵdirectiveInject(ɵngcc3.LayerService), ɵngcc0.ɵɵdirectiveInject(MapState), ɵngcc0.ɵɵdirectiveInject(ɵngcc6.MessageService), ɵngcc0.ɵɵdirectiveInject(ɵngcc6.LanguageService), ɵngcc0.ɵɵdirectiveInject(ImportExportState), ɵngcc0.ɵɵdirectiveInject(ToolState), ɵngcc0.ɵɵdirectiveInject(WorkspaceState), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef)); };\nSpatialFilterToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: SpatialFilterToolComponent, selectors: [[\"igo-spatial-filter-tool\"]], inputs: { itemType: \"itemType\", type: \"type\", freehandDrawIsActive: \"freehandDrawIsActive\" }, decls: 6, vars: 14, consts: [[3, \"store\", \"selectedQueryType\", \"zone\", \"eventType\", \"eventQueryType\", \"zoneChange\"], [3, \"type\", \"queryType\", \"map\", \"zone\", \"loading\", \"store\", \"layers\", \"thematicLength\", \"radiusEvent\", \"freehandControl\", \"drawZoneEvent\", \"itemTypeChange\", \"thematicChange\", \"toggleSearch\", \"clearButtonEvent\", \"clearSearchEvent\", \"export\", \"openWorkspace\"], [4, \"ngIf\"], [3, \"feature\"]], template: function SpatialFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"igo-panel\");\n        ɵngcc0.ɵɵelementStart(1, \"igo-spatial-filter-type\", 0);\n        ɵngcc0.ɵɵlistener(\"eventType\", function SpatialFilterToolComponent_Template_igo_spatial_filter_type_eventType_1_listener($event) { return ctx.getOutputType($event); })(\"eventQueryType\", function SpatialFilterToolComponent_Template_igo_spatial_filter_type_eventQueryType_1_listener($event) { return ctx.getOutputQueryType($event); })(\"zoneChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_type_zoneChange_1_listener($event) { return ctx.onZoneChange($event); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"igo-spatial-filter-item\", 1);\n        ɵngcc0.ɵɵlistener(\"radiusEvent\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_radiusEvent_2_listener($event) { return ctx.radius = $event; })(\"freehandControl\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_freehandControl_2_listener($event) { return ctx.freehandDrawIsActive = $event; })(\"drawZoneEvent\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_drawZoneEvent_2_listener($event) { return ctx.zone = $event; })(\"itemTypeChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_itemTypeChange_2_listener($event) { return ctx.itemType = $event; })(\"thematicChange\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_thematicChange_2_listener($event) { return ctx.thematics = $event; })(\"toggleSearch\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_toggleSearch_2_listener() { return ctx.getOutputToggleSearch(); })(\"clearButtonEvent\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_clearButtonEvent_2_listener() { return ctx.clearMap(); })(\"clearSearchEvent\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_clearSearchEvent_2_listener() { return ctx.getOutputClearSearch(); })(\"export\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_export_2_listener() { return ctx.activateExportTool(); })(\"openWorkspace\", function SpatialFilterToolComponent_Template_igo_spatial_filter_item_openWorkspace_2_listener() { return ctx.activateWorkspace(); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"igo-panel\");\n        ɵngcc0.ɵɵtemplate(4, SpatialFilterToolComponent_ng_container_4_Template, 2, 1, \"ng-container\", 2);\n        ɵngcc0.ɵɵpipe(5, \"async\");\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"store\", ctx.spatialListStore)(\"selectedQueryType\", ctx.queryType)(\"zone\", ctx.zone);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"type\", ctx.type)(\"queryType\", ctx.queryType)(\"map\", ctx.map)(\"zone\", ctx.zone)(\"loading\", ctx.loading)(\"store\", ctx.store)(\"layers\", ctx.activeLayers)(\"thematicLength\", ctx.thematicLength);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ɵngcc0.ɵɵpipeBind1(5, 12, ctx.selectedFeature$));\n    } }, directives: [ɵngcc3.SpatialFilterTypeComponent, ɵngcc3.SpatialFilterItemComponent, ɵngcc5.NgIf], pipes: [ɵngcc5.AsyncPipe], styles: [\"\"], changeDetection: 0 });\nSpatialFilterToolComponent.ctorParameters = () => [\n    { type: MatIconRegistry },\n    { type: SpatialFilterService },\n    { type: DataSourceService },\n    { type: LayerService },\n    { type: MapState },\n    { type: MessageService },\n    { type: LanguageService },\n    { type: ImportExportState },\n    { type: ToolState },\n    { type: WorkspaceState },\n    { type: ChangeDetectorRef }\n];\nSpatialFilterToolComponent.propDecorators = {\n    type: [{ type: Input }],\n    itemType: [{ type: Input }],\n    freehandDrawIsActive: [{ type: Input }]\n};\nSpatialFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'spatialFilter',\n        title: 'igo.integration.tools.spatialFilter',\n        icon: 'selection-marker'\n    })\n    /**\n     * Spatial Filter Type\n     */\n    ,\n    __metadata(\"design:paramtypes\", [MatIconRegistry,\n        SpatialFilterService,\n        DataSourceService,\n        LayerService,\n        MapState,\n        MessageService,\n        LanguageService,\n        ImportExportState,\n        ToolState,\n        WorkspaceState,\n        ChangeDetectorRef])\n], SpatialFilterToolComponent);\n\nfunction toolSlideInOut(speed = '300ms', type = 'ease-in-out') {\n    return trigger('toolSlideInOut', [\n        state('enter', style({\n            transform: 'translateX(100%)'\n        })),\n        transition('void => enter', animate(speed + ' ' + type))\n    ]);\n}\n\nlet ActiveTimeFilterToolComponent = class ActiveTimeFilterToolComponent {\n    constructor(mapState) {\n        this.mapState = mapState;\n        this.animate = 'enter';\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get layer() {\n        for (const lay of this.map.layers) {\n            if (lay.options.active === true) {\n                return lay;\n            }\n        }\n        return;\n    }\n};\nActiveTimeFilterToolComponent.ɵfac = function ActiveTimeFilterToolComponent_Factory(t) { return new (t || ActiveTimeFilterToolComponent)(ɵngcc0.ɵɵdirectiveInject(MapState)); };\nActiveTimeFilterToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ActiveTimeFilterToolComponent, selectors: [[\"igo-active-time-filter-tool\"]], decls: 1, vars: 4, consts: [[3, \"map\", \"layer\", \"header\"]], template: function ActiveTimeFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-time-filter-item\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"map\", ctx.map)(\"layer\", ctx.layer)(\"header\", false)(\"@toolSlideInOut\", ctx.animate);\n    } }, directives: [ɵngcc3.TimeFilterItemComponent], encapsulation: 2, data: { animation: [toolSlideInOut()] } });\nActiveTimeFilterToolComponent.ctorParameters = () => [\n    { type: MapState }\n];\nActiveTimeFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'activeTimeFilter',\n        title: 'igo.integration.tools.timeFilter',\n        icon: 'history',\n        parent: 'mapTools'\n    }),\n    __metadata(\"design:paramtypes\", [MapState])\n], ActiveTimeFilterToolComponent);\n\nfunction toolSlideInOut$1(speed = '300ms', type = 'ease-in-out') {\n    return trigger('toolSlideInOut', [\n        state('enter', style({\n            transform: 'translateX(100%)'\n        })),\n        transition('void => enter', animate(speed + ' ' + type))\n    ]);\n}\n\nlet ActiveOgcFilterToolComponent = class ActiveOgcFilterToolComponent {\n    constructor(mapState) {\n        this.mapState = mapState;\n        this.animate = 'enter';\n    }\n    get map() {\n        return this.mapState.map;\n    }\n    get layer() {\n        for (const lay of this.map.layers) {\n            if (lay.options.active === true) {\n                return lay;\n            }\n        }\n        return;\n    }\n};\nActiveOgcFilterToolComponent.ɵfac = function ActiveOgcFilterToolComponent_Factory(t) { return new (t || ActiveOgcFilterToolComponent)(ɵngcc0.ɵɵdirectiveInject(MapState)); };\nActiveOgcFilterToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: ActiveOgcFilterToolComponent, selectors: [[\"igo-active-ogc-filter-tool\"]], decls: 1, vars: 4, consts: [[3, \"map\", \"layer\", \"header\"]], template: function ActiveOgcFilterToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"igo-ogc-filterable-item\", 0);\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"map\", ctx.map)(\"layer\", ctx.layer)(\"header\", false)(\"@toolSlideInOut\", ctx.animate);\n    } }, directives: [ɵngcc3.OgcFilterableItemComponent], encapsulation: 2, data: { animation: [toolSlideInOut$1()] } });\nActiveOgcFilterToolComponent.ctorParameters = () => [\n    { type: MapState }\n];\nActiveOgcFilterToolComponent = __decorate([\n    ToolComponent({\n        name: 'activeOgcFilter',\n        title: 'igo.integration.tools.ogcFilter',\n        icon: 'filter',\n        parent: 'mapTools'\n    }),\n    __metadata(\"design:paramtypes\", [MapState])\n], ActiveOgcFilterToolComponent);\n\nclass IgoAppFilterModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppFilterModule,\n            providers: []\n        };\n    }\n}\nIgoAppFilterModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppFilterModule });\nIgoAppFilterModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppFilterModule_Factory(t) { return new (t || IgoAppFilterModule)(); }, imports: [[IgoFilterModule, IgoQueryModule, CommonModule]] });\n\nlet AboutToolComponent = class AboutToolComponent {\n    constructor(configService) {\n        this.discoverTitleInLocale$ = of('IGO');\n        this._html = 'igo.integration.about.html';\n        this.version = configService.getConfig('version');\n    }\n    get html() {\n        return this._html;\n    }\n    set html(value) {\n        this._html = Array.isArray(value) ? value.join('\\n') : value;\n    }\n};\nAboutToolComponent.ɵfac = function AboutToolComponent_Factory(t) { return new (t || AboutToolComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc6.ConfigService)); };\nAboutToolComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AboutToolComponent, selectors: [[\"igo-about-tool\"]], inputs: { discoverTitleInLocale$: \"discoverTitleInLocale$\", html: \"html\" }, decls: 4, vars: 7, consts: [[\"mat-raised-button\", \"\", \"tourToStart\", \"global\", \"menuIsOpen\", \"true\", \"styleButton\", \"raised\", 3, \"discoverTitleInLocale$\"], [1, \"mat-typography\", 3, \"html\"]], template: function AboutToolComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"p\");\n        ɵngcc0.ɵɵelement(1, \"igo-interactive-tour\", 0);\n        ɵngcc0.ɵɵelement(2, \"igo-custom-html\", 1);\n        ɵngcc0.ɵɵpipe(3, \"translate\");\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"discoverTitleInLocale$\", ctx.discoverTitleInLocale$);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"html\", ɵngcc0.ɵɵpipeBind2(3, 2, ctx.html, ɵngcc0.ɵɵpureFunction1(5, _c1, ctx.version)));\n    } }, directives: [ɵngcc1.InteractiveTourComponent, ɵngcc1.CustomHtmlComponent], pipes: [ɵngcc10.TranslatePipe], styles: [\"igo-interactive-tour[_ngcontent-%COMP%]{margin-left:20px}\"] });\nAboutToolComponent.ctorParameters = () => [\n    { type: ConfigService }\n];\nAboutToolComponent.propDecorators = {\n    html: [{ type: Input }],\n    discoverTitleInLocale$: [{ type: Input }]\n};\nAboutToolComponent = __decorate([\n    ToolComponent({\n        name: 'about',\n        title: 'igo.integration.tools.about',\n        icon: 'help-circle'\n    }),\n    __metadata(\"design:paramtypes\", [ConfigService])\n], AboutToolComponent);\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppAnalyticsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ImportExportState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ToolState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.ToolService }, { type: ImportExportState }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextEditorToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-editor-tool',\n                template: \"<igo-context-edit\\n  igoContextEditBinding\\n  (submitSuccessed)=\\\"submitSuccessed()\\\"\\n></igo-context-edit>\\n\"\n            }]\n    }], function () { return [{ type: ToolState }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc3.MapService }, { type: ɵngcc3.ProjectionService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextManagerToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-manager-tool',\n                template: \"<igo-context-list\\n  igoContextListBinding\\n  [map]=\\\"map\\\"\\n  (edit)=\\\"editContext()\\\"\\n  (managePermissions)=\\\"managePermissions()\\\">\\n</igo-context-list>\\n\"\n            }]\n    }], function () { return [{ type: ToolState }, { type: MapState }]; }, { toolToOpenOnContextChange: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextPermissionManagerToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-permission-manager-tool',\n                template: \"<igo-context-permissions igoContextPermissionsBinding></igo-context-permissions>\\n\"\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(LayerListToolState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextShareToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-context-share-tool',\n                template: \"<igo-share-map\\n  [map]=\\\"map\\\"></igo-share-map>\\n\"\n            }]\n    }], function () { return [{ type: MapState }, { type: LayerListToolState }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppContextModule, { declarations: function () { return [ContextEditorToolComponent, ContextManagerToolComponent, ContextPermissionManagerToolComponent, ContextShareToolComponent]; }, imports: function () { return [IgoContextModule]; }, exports: function () { return [ContextEditorToolComponent, ContextManagerToolComponent, ContextPermissionManagerToolComponent, ContextShareToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppContextModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoContextModule],\n                declarations: [\n                    ContextEditorToolComponent,\n                    ContextManagerToolComponent,\n                    ContextPermissionManagerToolComponent,\n                    ContextShareToolComponent\n                ],\n                exports: [\n                    ContextEditorToolComponent,\n                    ContextManagerToolComponent,\n                    ContextPermissionManagerToolComponent,\n                    ContextShareToolComponent\n                ],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc4.AuthService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogLibraryToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-library-tool',\n                template: \"<igo-catalog-library\\n  [store]=\\\"store\\\"\\n  (catalogSelectChange)=\\\"onCatalogSelectChange($event)\\\">\\n</igo-catalog-library>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ɵngcc3.CatalogService }, { type: CatalogState }, { type: ToolState }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppCatalogLibraryToolModule, { declarations: function () { return [CatalogLibraryToolComponent]; }, imports: function () { return [CommonModule,\n        IgoCatalogLibraryModule]; }, exports: function () { return [CatalogLibraryToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppCatalogLibraryToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoCatalogLibraryModule\n                ],\n                declarations: [CatalogLibraryToolComponent],\n                exports: [CatalogLibraryToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(CatalogBrowserToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-catalog-browser-tool',\n                template: \"<igo-catalog-browser\\n  *ngIf=\\\"store$ | async as store\\\"\\n  [catalog]=\\\"catalog\\\"\\n  [store]=\\\"store\\\"\\n  [map]=\\\"map\\\"\\n  [toggleCollapsedGroup]=\\\"toggleCollapsedGroup\\\">\\n</igo-catalog-browser>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: ɵngcc3.CatalogService }, { type: CatalogState }, { type: MapState }, { type: ɵngcc4.AuthService }]; }, { toggleCollapsedGroup: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppCatalogBrowserToolModule, { declarations: function () { return [CatalogBrowserToolComponent]; }, imports: function () { return [CommonModule,\n        IgoCatalogBrowserModule]; }, exports: function () { return [CatalogBrowserToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppCatalogBrowserToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    IgoCatalogBrowserModule\n                ],\n                declarations: [CatalogBrowserToolComponent],\n                exports: [CatalogBrowserToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppCatalogModule, { exports: [IgoAppCatalogLibraryToolModule, IgoAppCatalogBrowserToolModule] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppCatalogModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                exports: [\n                    IgoAppCatalogLibraryToolModule,\n                    IgoAppCatalogBrowserToolModule\n                ],\n                declarations: []\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DirectionState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(DirectionsToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-directions-tool',\n                template: \"<igo-directions-form\\n    igoDirectionsFormBinding\\n    [stopsStore]=\\\"stopsStore\\\"\\n    [routeStore]=\\\"routeStore\\\"\\n    [map]=\\\"map\\\"\\n    [routeFromFeatureDetail]=\\\"routeFromFeatureDetail\\\">\\n</igo-directions-form>\\n\"\n            }]\n    }], function () { return [{ type: DirectionState }, { type: MapState }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppDirectionsModule, { declarations: function () { return [DirectionsToolComponent]; }, imports: function () { return [IgoDirectionsModule]; }, exports: function () { return [DirectionsToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppDirectionsModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoDirectionsModule],\n                declarations: [DirectionsToolComponent],\n                exports: [DirectionsToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(StorageState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.StorageService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FeatureActionsService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: StorageState }, { type: ToolState }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WfsActionsService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc1.Widget, decorators: [{\n                type: Inject,\n                args: [OgcFilterWidget]\n            }] }, { type: StorageState }, { type: ToolState }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WorkspaceState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: FeatureActionsService }, { type: WfsActionsService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(WorkspaceButtonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-workspace-button',\n                template: \"<button\\n  *ngIf=\\\"hasWorkspace$ | async\\\"\\n  mat-icon-button\\n  tooltip-position=\\\"below\\\"\\n  matTooltipShowDelay=\\\"500\\\"\\n  [matTooltip]=\\\"'igo.integration.workspace.toggleWorkspace' | translate\\\"\\n  [color]=\\\"color\\\"\\n  (click)=\\\"activateWorkspace()\\\"\\n  >\\n  <mat-icon svgIcon=\\\"table\\\"></mat-icon>\\n</button>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: WorkspaceState }]; }, { color: [{\n            type: Input\n        }], layer: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppWorkspaceModule, { declarations: function () { return [WorkspaceButtonComponent]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        MatTooltipModule,\n        IgoLanguageModule]; }, exports: function () { return [WorkspaceButtonComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppWorkspaceModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    IgoLanguageModule\n                ],\n                declarations: [WorkspaceButtonComponent],\n                exports: [WorkspaceButtonComponent]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ImportExportToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-import-export-tool',\n                template: \"<mat-tab-group>\\n  <mat-tab [label]=\\\"'igo.integration.importExportTool.importExportData' | translate\\\">\\n    <igo-import-export  [map]=\\\"map\\\"\\n      [store]=\\\"workspaceStore\\\"\\n      [selectedMode]=\\\"importExportState.selectedMode$ | async\\\"\\n      (selectMode)=\\\"modeChanged($event)\\\"\\n      [exportOptions$]=\\\"importExportState.exportOptions$\\\"\\n      (exportOptionsChange)=\\\"exportOptionsChange($event)\\\">\\n    </igo-import-export>\\n  </mat-tab>\\n  <mat-tab [label]=\\\"'igo.integration.importExportTool.importExportContext' | translate\\\">\\n    <igo-context-import-export [map]=\\\"map\\\"></igo-context-import-export>\\n  </mat-tab>\\n</mat-tab-group>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"mat-form-field{width:100%}\"]\n            }]\n    }], function () { return [{ type: MapState }, { type: ImportExportState }, { type: WorkspaceState }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppImportExportModule, { declarations: function () { return [ImportExportToolComponent]; }, imports: function () { return [IgoImportExportModule,\n        IgoContextImportExportModule,\n        CommonModule,\n        IgoLanguageModule,\n        MatButtonToggleModule,\n        MatTabsModule]; }, exports: function () { return [ImportExportToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppImportExportModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    IgoImportExportModule,\n                    IgoContextImportExportModule,\n                    CommonModule,\n                    IgoLanguageModule,\n                    MatButtonToggleModule,\n                    MatTabsModule\n                ],\n                declarations: [ImportExportToolComponent],\n                exports: [ImportExportToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapDetailsToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-details-tool',\n                template: \"<igo-layer-list *ngIf=\\\"(layers$ | async).length; else empty\\\"\\n  [map]=\\\"map\\\"\\n  igoLayerListBinding\\n  [excludeBaseLayers]=\\\"excludeBaseLayers\\\"\\n  [layerFilterAndSortOptions]=\\\"layerFilterAndSortOptions\\\"\\n  [expandLegendOfVisibleLayers]=\\\"expandLegendOfVisibleLayers\\\"\\n  [toggleLegendOnVisibilityChange]=\\\"toggleLegendOnVisibilityChange\\\"\\n  [updateLegendOnResolutionChange]=\\\"updateLegendOnResolutionChange\\\"\\n  floatLabel=\\\"never\\\"\\n  [queryBadge]=\\\"queryBadge\\\">\\n\\n  <ng-template #igoLayerItemToolbar let-layer=\\\"layer\\\">\\n    <!-- <igo-download-button [layer]=\\\"layer\\\"></igo-download-button> -->\\n     <igo-workspace-button [layer]=\\\"layer\\\"></igo-workspace-button>\\n    <igo-export-button [layer]=\\\"layer\\\" (click)=\\\"activateExport(layer.id)\\\"></igo-export-button>\\n    <igo-ogc-filter-button [header]=\\\"ogcButton\\\" [layer]=\\\"layer\\\"></igo-ogc-filter-button>\\n    <igo-time-filter-button [header]=\\\"timeButton\\\" [layer]=\\\"layer\\\"></igo-time-filter-button>\\n    <igo-track-feature-button [trackFeature]=\\\"true\\\" [layer]=\\\"layer\\\"></igo-track-feature-button>\\n    <igo-metadata-button [layer]=\\\"layer\\\"></igo-metadata-button>\\n  </ng-template>\\n\\n</igo-layer-list>\\n\\n<ng-template #empty>\\n  <mat-list *ngIf=\\\"delayedShowEmptyMapContent\\\">\\n    <p class=\\\"map-empty mat-typography\\\">\\n      {{'igo.integration.mapTool.empty' | translate}}</p>\\n    <p *ngIf=\\\"layerAdditionAllowed && (searchToolInToolbar || catalogToolInToolbar || contextToolInToolbar)\\\" class=\\\"map-empty mat-typography\\\">\\n      {{'igo.integration.mapTool.customize' | translate}}</p>\\n    <mat-list-item *ngIf=\\\"layerAdditionAllowed && searchToolInToolbar\\\">\\n      <mat-icon mat-list-icon> <svg viewBox='0 0 24 24' fit='' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' focusable='false'> <path d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z'> </path> </svg></mat-icon>\\n      <h4 matLine class=\\\"search-tool mat-typography\\\" (click)=\\\"searchEmit()\\\">\\n        {{'igo.integration.mapTool.search-tool' | translate}}\\n      </h4>\\n    </mat-list-item>\\n    <mat-list-item *ngIf=\\\"layerAdditionAllowed && catalogToolInToolbar\\\">\\n      <mat-icon mat-list-icon> <svg viewBox='0 0 24 24' fit='' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' focusable='false'> <path d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z'></path> </svg></mat-icon>\\n      <h4 matLine class=\\\"catalog-tool mat-typography\\\" (click)=\\\"catalogEmit()\\\">\\n        {{'igo.integration.mapTool.catalog-tool' | translate}}\\n      </h4>\\n    </mat-list-item>\\n    <mat-list-item *ngIf=\\\"layerAdditionAllowed && contextToolInToolbar\\\">\\n      <mat-icon mat-list-icon> <svg viewBox='0 0 24 24' fit='' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' focusable='false'> <path d='M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z'></path> </svg></mat-icon>\\n      <h4 matLine class=\\\"context-tool mat-typography\\\" (click)=\\\"contextEmit()\\\">\\n        {{'igo.integration.mapTool.context-tool' | translate}}\\n      </h4>\\n    </mat-list-item>\\n  </mat-list>\\n</ng-template>\\n\",\n                styles: [\".catalog-tool,.context-tool,.map-empty,.search-tool{margin:10px}.map-empty{text-align:justify}.catalog-tool,.context-tool,.search-tool{cursor:pointer}mat-list mat-list-item h4{font-weight:700}mat-list-item ::ng-deep .mat-list-text{font-size:smaller}mat-list.mat-list-base mat-list-item.mat-list-item ::ng-deep div.mat-list-item-content div.mat-list-text{padding-left:5px}\"]\n            }]\n    }], function () { return [{ type: MapState }, { type: ToolState }, { type: ɵngcc3.SearchSourceService }, { type: ɵngcc0.ChangeDetectorRef }, { type: ImportExportState }]; }, { toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendOfVisibleLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], ogcButton: [{\n            type: Input\n        }], timeButton: [{\n            type: Input\n        }], layerListControls: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }], layerAdditionAllowed: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-tool',\n                template: \"<mat-tab-group>\\n\\n  <mat-tab [label]=\\\"'igo.integration.tools.map' |\\u00A0translate\\\">\\n    <igo-layer-list\\n      [map]=\\\"map\\\"\\n      igoLayerListBinding\\n      [excludeBaseLayers]=\\\"excludeBaseLayers\\\"\\n      [layerFilterAndSortOptions]=\\\"layerFilterAndSortOptions\\\"\\n      [expandLegendOfVisibleLayers]=\\\"expandLegendOfVisibleLayers\\\"\\n      [toggleLegendOnVisibilityChange]=\\\"toggleLegendOnVisibilityChange\\\"\\n      [updateLegendOnResolutionChange]=\\\"updateLegendOnResolutionChange\\\"\\n      [floatLabel]=\\\"false\\\"\\n      [queryBadge]=\\\"queryBadge\\\">\\n\\n      <ng-template #igoLayerItemToolbar let-layer=\\\"layer\\\">\\n        <!-- <igo-download-button [layer]=\\\"layer\\\"></igo-download-button> -->\\n        <igo-workspace-button [layer]=\\\"layer\\\"></igo-workspace-button>\\n        <igo-export-button [layer]=\\\"layer\\\" (click)=\\\"activateExport(layer.id)\\\"></igo-export-button>\\n        <igo-ogc-filter-button [header]=\\\"ogcButton\\\" [layer]=\\\"layer\\\"></igo-ogc-filter-button>\\n        <igo-time-filter-button [header]=\\\"timeButton\\\" [layer]=\\\"layer\\\"></igo-time-filter-button>\\n        <igo-track-feature-button [trackFeature]=\\\"true\\\" [layer]=\\\"layer\\\"></igo-track-feature-button>\\n        <igo-metadata-button [layer]=\\\"layer\\\"></igo-metadata-button>\\n      </ng-template>\\n\\n    </igo-layer-list>\\n  </mat-tab>\\n\\n  <mat-tab [label]=\\\"'igo.integration.tools.contexts' |\\u00A0translate\\\">\\n    <igo-context-list igoContextListBinding></igo-context-list>\\n  </mat-tab>\\n\\n</mat-tab-group>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"mat-tab-group,mat-tab-group ::ng-deep .mat-tab-body-wrapper{height:100%}\"]\n            }]\n    }], function () { return [{ type: MapState }, { type: ToolState }, { type: ImportExportState }]; }, { toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendOfVisibleLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], ogcButton: [{\n            type: Input\n        }], timeButton: [{\n            type: Input\n        }], layerListControls: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapToolsComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-tools',\n                template: \"<mat-tab-group\\n  #tabGroup\\n  [selectedIndex]=\\\"layerListToolState.selectedTab$ | async\\\"\\n  (selectedTabChange)=\\\"tabChanged($event)\\\">\\n\\n  <mat-tab [label]=\\\"'igo.integration.tools.layers' |\\u00A0translate\\\">\\n    <igo-layer-list *ngIf=\\\"(layers$ | async).length !== 0; else emptyLayers\\\"\\n      igoLayerListBinding\\n      [excludeBaseLayers]=\\\"excludeBaseLayers\\\"\\n      [layerFilterAndSortOptions]=\\\"layerFilterAndSortOptions\\\"\\n      [expandLegendOfVisibleLayers]=\\\"expandLegendOfVisibleLayers\\\"\\n      [toggleLegendOnVisibilityChange]=\\\"toggleLegendOnVisibilityChange\\\"\\n      [updateLegendOnResolutionChange]=\\\"updateLegendOnResolutionChange\\\"\\n      [floatLabel]=\\\"false\\\"\\n      [queryBadge]=\\\"queryBadge\\\"\\n      [map]=\\\"map\\\"\\n      (appliedFilterAndSort)= onLayerListChange($event)>\\n\\n      <ng-template #igoLayerItemToolbar let-layer=\\\"layer\\\">\\n        <!-- <igo-download-button [layer]=\\\"layer\\\"></igo-download-button> -->\\n        <igo-workspace-button [layer]=\\\"layer\\\"></igo-workspace-button>\\n        <igo-export-button [layer]=\\\"layer\\\" (click)=\\\"activateExport(layer.id)\\\"></igo-export-button>\\n        <igo-ogc-filter-button [header]=\\\"ogcButton\\\" [layer]=\\\"layer\\\"\\n        (click)=\\\"activateOgcFilter()\\\"></igo-ogc-filter-button>\\n        <igo-time-filter-button [header]=\\\"timeButton\\\" [layer]=\\\"layer\\\"\\n          (click)=\\\"activateTimeFilter()\\\"></igo-time-filter-button>\\n        <igo-track-feature-button [trackFeature]=\\\"true\\\" [layer]=\\\"layer\\\"></igo-track-feature-button>\\n        <igo-metadata-button [layer]=\\\"layer\\\"></igo-metadata-button>\\n      </ng-template>\\n\\n    </igo-layer-list>\\n  </mat-tab>\\n\\n  <mat-tab [label]=\\\"'igo.integration.tools.legend' |\\u00A0translate\\\">\\n    <igo-layer-legend-list *ngIf=\\\"showAllLegend()\\\"\\n      igoLayerLegendListBinding\\n      [allowShowAllLegends]=\\\"allowShowAllLegends\\\"\\n      [showAllLegendsValue]=\\\"(showAllLegendsValue$ | async)\\\"\\n      (allLegendsShown)=\\\"onShowAllLegends($event)\\\"\\n      [excludeBaseLayers]=\\\"excludeBaseLayers\\\"\\n      [updateLegendOnResolutionChange]=\\\"updateLegendOnResolutionChange\\\">\\n    </igo-layer-legend-list>\\n    <ng-template *ngIf=\\\"(layers$ | async).length !== 0; else emptyLayers\\\"></ng-template>\\n\\n    <p class=\\\"map-empty mat-typography\\\"\\n      *ngIf=\\\"!allowShowAllLegends && (layers$ | async).length !== 0 && (visibleOrInRangeLayers$ | async).length === 0\\\">\\n      {{ ((visibleLayers$ | async).length) ? ('igo.integration.mapTool.noLayersInRange' | translate) :  ('igo.integration.mapTool.noLayersVisible' | translate) }}\\n    </p>\\n  </mat-tab>\\n\\n    <ng-template #emptyLayers>\\n      <mat-list *ngIf=\\\"delayedShowEmptyMapContent\\\">\\n        <p class=\\\"map-empty mat-typography\\\">\\n          {{'igo.integration.mapTool.empty' | translate}}</p>\\n        <p *ngIf=\\\"layerAdditionAllowed && (searchToolInToolbar || catalogToolInToolbar || contextToolInToolbar)\\\"\\n          class=\\\"map-empty mat-typography\\\">\\n          {{'igo.integration.mapTool.customize' | translate}}</p>\\n\\n        <mat-list-item *ngIf=\\\"layerAdditionAllowed && searchToolInToolbar\\\">\\n          <mat-icon mat-list-icon> <svg viewBox='0 0 24 24' fit='' height='100%' width='100%'\\n              preserveAspectRatio='xMidYMid meet' focusable='false'>\\n              <path\\n                d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z'>\\n              </path>\\n            </svg></mat-icon>\\n          <h4 matLine class=\\\"search-tool mat-typography\\\" (click)=\\\"searchEmit()\\\">\\n            {{'igo.integration.mapTool.search-tool' | translate}}\\n          </h4>\\n        </mat-list-item>\\n        <mat-list-item *ngIf=\\\"layerAdditionAllowed && catalogToolInToolbar\\\">\\n          <mat-icon mat-list-icon> <svg viewBox='0 0 24 24' fit='' height='100%' width='100%'\\n              preserveAspectRatio='xMidYMid meet' focusable='false'>\\n              <path\\n                d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z'>\\n              </path>\\n            </svg></mat-icon>\\n          <h4 matLine class=\\\"catalog-tool mat-typography\\\" (click)=\\\"catalogEmit()\\\">\\n            {{'igo.integration.mapTool.catalog-tool' | translate}}\\n          </h4>\\n        </mat-list-item>\\n        <mat-list-item *ngIf=\\\"layerAdditionAllowed && contextToolInToolbar\\\">\\n          <mat-icon mat-list-icon> <svg viewBox='0 0 24 24' fit='' height='100%' width='100%'\\n              preserveAspectRatio='xMidYMid meet' focusable='false'>\\n              <path\\n                d='M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z'>\\n              </path>\\n            </svg></mat-icon>\\n          <h4 matLine class=\\\"context-tool mat-typography\\\" (click)=\\\"contextEmit()\\\">\\n            {{'igo.integration.mapTool.context-tool' | translate}}\\n          </h4>\\n        </mat-list-item>\\n      </mat-list>\\n    </ng-template>\\n\\n\\n</mat-tab-group>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\".catalog-tool,.context-tool,.map-empty,.search-tool{margin:10px}.map-empty{text-align:justify}.catalog-tool,.context-tool,.search-tool{cursor:pointer}mat-list mat-list-item h4{font-weight:700}mat-list-item ::ng-deep .mat-list-text{font-size:smaller}mat-list.mat-list-base mat-list-item.mat-list-item ::ng-deep div.mat-list-item-content div.mat-list-text{padding-left:5px}mat-tab-group,mat-tab-group ::ng-deep .mat-tab-body-wrapper{height:100%}\"]\n            }]\n    }], function () { return [{ type: LayerListToolState }, { type: ToolState }, { type: MapState }, { type: ɵngcc3.SearchSourceService }, { type: ImportExportState }]; }, { allowShowAllLegends: [{\n            type: Input\n        }], showAllLegendsValue: [{\n            type: Input\n        }], toggleLegendOnVisibilityChange: [{\n            type: Input\n        }], expandLegendOfVisibleLayers: [{\n            type: Input\n        }], updateLegendOnResolutionChange: [{\n            type: Input\n        }], ogcButton: [{\n            type: Input\n        }], timeButton: [{\n            type: Input\n        }], layerAdditionAllowed: [{\n            type: Input\n        }], queryBadge: [{\n            type: Input\n        }], layerListControls: [{\n            type: Input\n        }], selectedTabAtOpening: [{\n            type: Input\n        }], tabGroup: [{\n            type: ViewChild,\n            args: ['tabGroup', { static: true }]\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MapLegendToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-map-legend-tool',\n                template: \"<igo-layer-legend-list *ngIf=\\\"showAllLegend()\\\"\\n  igoLayerLegendListBinding\\n  [excludeBaseLayers]=\\\"excludeBaseLayers\\\"\\n  [allowShowAllLegends]=\\\"allowShowAllLegends\\\"\\n  [updateLegendOnResolutionChange]=\\\"updateLegendOnResolutionChange\\\"\\n  [showAllLegendsValue]=\\\"(showAllLegendsValue$ | async)\\\"\\n  (allLegendsShown)=\\\"onShowAllLegends($event)\\\">\\n</igo-layer-legend-list>\\n<ng-template *ngIf=\\\"(layers$ | async).length !== 0; else emptyLayers\\\"></ng-template>\\n\\n<p class=\\\"map-empty mat-typography\\\"\\n  *ngIf=\\\"!allowShowAllLegends && (layers$ | async).length !== 0 && (visibleOrInRangeLayers$ | async).length === 0\\\">\\n  {{ ((visibleLayers$ | async).length) ? ('igo.integration.mapTool.noLayersInRange' | translate) :  ('igo.integration.mapTool.noLayersVisible' | translate) }}\\n</p>\\n\\n\\n<ng-template #emptyLayers>\\n  <mat-list *ngIf=\\\"delayedShowEmptyMapContent\\\">\\n    <p class=\\\"map-empty mat-typography\\\">\\n      {{'igo.integration.mapTool.empty' | translate}}</p>\\n    <p *ngIf=\\\"layerAdditionAllowed && (searchToolInToolbar || catalogToolInToolbar || contextToolInToolbar)\\\" class=\\\"map-empty mat-typography\\\">\\n      {{'igo.integration.mapTool.customize' | translate}}</p>\\n\\n    <mat-list-item *ngIf=\\\"layerAdditionAllowed && searchToolInToolbar\\\">\\n      <mat-icon mat-list-icon> <svg viewBox='0 0 24 24' fit='' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' focusable='false'> <path d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z'> </path> </svg></mat-icon>\\n      <h4 matLine class=\\\"search-tool mat-typography\\\" (click)=\\\"searchEmit()\\\">\\n        {{'igo.integration.mapTool.search-tool' | translate}}\\n      </h4>\\n    </mat-list-item>\\n    <mat-list-item *ngIf=\\\"layerAdditionAllowed && catalogToolInToolbar\\\">\\n      <mat-icon mat-list-icon> <svg viewBox='0 0 24 24' fit='' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' focusable='false'> <path d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z'></path> </svg></mat-icon>\\n      <h4 matLine class=\\\"catalog-tool mat-typography\\\" (click)=\\\"catalogEmit()\\\">\\n        {{'igo.integration.mapTool.catalog-tool' | translate}}\\n      </h4>\\n    </mat-list-item>\\n    <mat-list-item *ngIf=\\\"layerAdditionAllowed && contextToolInToolbar\\\">\\n      <mat-icon mat-list-icon> <svg viewBox='0 0 24 24' fit='' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' focusable='false'> <path d='M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z'></path> </svg></mat-icon>\\n      <h4 matLine class=\\\"context-tool mat-typography\\\" (click)=\\\"contextEmit()\\\">\\n        {{'igo.integration.mapTool.context-tool' | translate}}\\n      </h4>\\n    </mat-list-item>\\n  </mat-list>\\n</ng-template>\\n\",\n                styles: [\".catalog-tool,.context-tool,.map-empty,.search-tool{margin:10px}.map-empty{text-align:justify}.catalog-tool,.context-tool,.search-tool{cursor:pointer}mat-list mat-list-item h4{font-weight:700}mat-list-item ::ng-deep .mat-list-text{font-size:smaller}mat-list.mat-list-base mat-list-item.mat-list-item ::ng-deep div.mat-list-item-content div.mat-list-text{padding-left:5px}\"]\n            }]\n    }], function () { return [{ type: MapState }, { type: ToolState }, { type: ɵngcc3.SearchSourceService }, { type: ɵngcc0.ChangeDetectorRef }]; }, { updateLegendOnResolutionChange: [{\n            type: Input\n        }], layerAdditionAllowed: [{\n            type: Input\n        }], allowShowAllLegends: [{\n            type: Input\n        }], showAllLegendsValue: [{\n            type: Input\n        }], layerListControls: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppMapModule, { declarations: function () { return [MapToolComponent, MapToolsComponent, MapDetailsToolComponent, MapLegendToolComponent]; }, imports: function () { return [CommonModule,\n        MatTabsModule,\n        MatListModule,\n        MatIconModule,\n        IgoLanguageModule,\n        IgoLayerModule,\n        IgoMetadataModule,\n        IgoDownloadModule,\n        IgoImportExportModule,\n        IgoFilterModule,\n        IgoContextModule, IgoAppWorkspaceModule]; }, exports: function () { return [MapToolComponent, MapToolsComponent, MapDetailsToolComponent, MapLegendToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppMapModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatTabsModule,\n                    MatListModule,\n                    MatIconModule,\n                    IgoLanguageModule,\n                    IgoLayerModule,\n                    IgoMetadataModule,\n                    IgoDownloadModule,\n                    IgoImportExportModule,\n                    IgoFilterModule,\n                    IgoContextModule,\n                    IgoAppWorkspaceModule\n                ],\n                declarations: [MapToolComponent, MapToolsComponent, MapDetailsToolComponent, MapLegendToolComponent],\n                exports: [MapToolComponent, MapToolsComponent, MapDetailsToolComponent, MapLegendToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MeasureState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MeasurerToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-measurer-tool',\n                template: \"<igo-measurer [store]=\\\"store\\\" [map]=\\\"map\\\"></igo-measurer>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: MeasureState }, { type: MapState }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppMeasurerToolModule, { declarations: function () { return [MeasurerToolComponent]; }, imports: function () { return [IgoMeasurerModule]; }, exports: function () { return [MeasurerToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppMeasurerToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    IgoMeasurerModule\n                ],\n                declarations: [MeasurerToolComponent],\n                exports: [MeasurerToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppMeasureModule, { exports: [IgoAppMeasurerToolModule] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppMeasureModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoAppMeasurerToolModule\n                ]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PrintToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-print-tool',\n                template: \"<igo-print [map]=\\\"map\\\"></igo-print>\\n\"\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppPrintModule, { declarations: function () { return [PrintToolComponent]; }, imports: function () { return [IgoPrintModule]; }, exports: function () { return [PrintToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppPrintModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoPrintModule],\n                declarations: [PrintToolComponent],\n                exports: [PrintToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc3.SearchSourceService }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchBarBindingDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[igoSearchBarBinding]'\n            }]\n    }], function () { return [{ type: ɵngcc3.SearchBarComponent, decorators: [{\n                type: Self\n            }] }, { type: SearchState }]; }, { onSearchTermChange: [{\n            type: HostListener,\n            args: ['searchTermChange', ['$event']]\n        }], onSearchTypeChange: [{\n            type: HostListener,\n            args: ['searchTypeChange', ['$event']]\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppSearchBarModule, { declarations: function () { return [SearchBarBindingDirective]; }, imports: function () { return [IgoSearchModule]; }, exports: function () { return [SearchBarBindingDirective]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppSearchBarModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoSearchModule],\n                declarations: [SearchBarBindingDirective],\n                exports: [SearchBarBindingDirective]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SearchResultsToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-search-results-tool',\n                template: \"<div *ngIf=\\\"!store || store.empty\\\" style=\\\"margin: 10px;\\\">\\n  <section class=\\\"mat-typography\\\">\\n    <h4><strong>{{ 'igo.integration.searchResultsTool.noResults' | translate }}</strong></h4>\\n    <p><strong>{{ 'igo.integration.searchResultsTool.doSearch' | translate }}</strong></p>\\n    <div [innerHTML]=\\\"'igo.integration.searchResultsTool.examples' | translate | sanitizeHtml\\\"></div>\\n</section>\\n</div>\\n\\n<igo-flexible\\n  *ngIf=\\\"store && !(store.empty$ | async)\\\"\\n  #topPanel\\n  initial=\\\"100%\\\"\\n  initialMobile=\\\"100%\\\"\\n  collapsed=\\\"calc(100% - 58px)\\\"\\n  collapsedMobile=\\\"calc(100% - 58px)\\\"\\n  expanded=\\\"60%\\\"\\n  expandedMobile=\\\"60%\\\"\\n  [state]=\\\"(feature$ |\\u00A0async) ? topPanelState : 'initial'\\\">\\n\\n  <div class=\\\"igo-content\\\">\\n    <igo-search-results\\n      [store]=\\\"store\\\"\\n      [showIcons]=\\\"showIcons\\\"\\n      [term]=\\\"term\\\"\\n      [settingsChange$]=\\\"settingsChange$\\\"\\n      placeholder=\\\"false\\\"\\n      (resultFocus)=\\\"onResultFocus($event)\\\"\\n      (resultSelect)=\\\"onResultSelect($event)\\\"\\n      (resultUnfocus)=\\\"onResultUnfocus($event)\\\"\\n      (resultMouseenter)=\\\"onResultFocus($event)\\\"\\n      (resultMouseleave)=\\\"onResultUnfocus($event)\\\"\\n      (moreResults)=\\\"onSearch($event)\\\">\\n      <ng-template #igoSearchItemToolbar let-result=\\\"result\\\">\\n        <igo-search-add-button\\n          [map]=\\\"map\\\"\\n          [layer]=\\\"result\\\">\\n        </igo-search-add-button>\\n      </ng-template>\\n    </igo-search-results>\\n  </div>\\n\\n  <div igoFlexibleFill class=\\\"igo-content\\\">\\n    <igo-panel [title]=\\\"featureTitle\\\" *ngIf=\\\"feature$ |\\u00A0async\\\">\\n\\n      <button\\n        mat-icon-button\\n        panelLeftButton\\n        class=\\\"igo-icon-button\\\"\\n        (click)=\\\"toggleTopPanel()\\\">\\n        <mat-icon [svgIcon]=\\\"(topPanelState$ | async) === 'collapsed' ? 'arrow-up' : 'arrow-down'\\\"></mat-icon>\\n      </button>\\n\\n      <button\\n        mat-icon-button\\n        panelRightButton\\n        class=\\\"igo-icon-button\\\"\\n        (click)=\\\"zoomToFeatureExtent()\\\"\\n        *ngIf=\\\"feature.geometry\\\">\\n        <mat-icon svgIcon=\\\"magnify-plus-outline\\\"></mat-icon>\\n      </button>\\n\\n      <igo-feature-details\\n        igoFeatureDetailsDirective\\n        [feature]=\\\"feature$ | async\\\"\\n        [map]=\\\"map\\\"\\n        [toolbox]=\\\"toolState.toolbox\\\"\\n        (routingEvent)=\\\"getRoute($event)\\\">\\n      </igo-feature-details>\\n    </igo-panel>\\n  </div>\\n\\n</igo-flexible>\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: MapState }, { type: ɵngcc3.LayerService }, { type: SearchState }, { type: ɵngcc0.ElementRef }, { type: ToolState }, { type: DirectionState }]; }, { showIcons: [{\n            type: Input\n        }], topPanelState: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppSearchResultsToolModule, { declarations: function () { return [SearchResultsToolComponent]; }, imports: function () { return [CommonModule,\n        MatIconModule,\n        MatButtonModule,\n        IgoLanguageModule,\n        IgoFeatureModule,\n        IgoSearchModule,\n        IgoFlexibleModule,\n        IgoPanelModule,\n        IgoFeatureDetailsModule,\n        IgoCustomHtmlModule]; }, exports: function () { return [SearchResultsToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppSearchResultsToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    MatIconModule,\n                    MatButtonModule,\n                    IgoLanguageModule,\n                    IgoFeatureModule,\n                    IgoSearchModule,\n                    IgoFlexibleModule,\n                    IgoPanelModule,\n                    IgoFeatureDetailsModule,\n                    IgoCustomHtmlModule\n                ],\n                declarations: [SearchResultsToolComponent],\n                exports: [SearchResultsToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppSearchModule, { exports: [IgoAppSearchBarModule, IgoAppSearchResultsToolModule] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppSearchModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoAppSearchBarModule,\n                    IgoAppSearchResultsToolModule\n                ]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(OgcFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-ogc-filter-tool',\n                template: \"<igo-ogc-filterable-list igoOgcFilterableListBinding></igo-ogc-filterable-list>\\n\\n\\n\"\n            }]\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TimeFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-time-filter-tool',\n                template: \"<igo-time-filter-list igoTimeFilterListBinding></igo-time-filter-list>\\n\"\n            }]\n    }], function () { return []; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SpatialFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-spatial-filter-tool',\n                template: \"<igo-panel>\\n  <igo-spatial-filter-type\\n    [store]=\\\"spatialListStore\\\"\\n    [selectedQueryType]=\\\"queryType\\\"\\n    [zone]=\\\"zone\\\"\\n    (eventType)=\\\"getOutputType($event)\\\"\\n    (eventQueryType)=\\\"getOutputQueryType($event)\\\"\\n    (zoneChange)=\\\"onZoneChange($event)\\\">\\n  </igo-spatial-filter-type>\\n\\n  <igo-spatial-filter-item\\n    [type]=\\\"type\\\"\\n    [queryType]=\\\"queryType\\\"\\n    [map]=\\\"map\\\"\\n    [zone]=\\\"zone\\\"\\n    [loading]=\\\"loading\\\"\\n    [store]=\\\"store\\\"\\n    [layers]=\\\"activeLayers\\\"\\n    [thematicLength]=\\\"thematicLength\\\"\\n    (radiusEvent)=\\\"radius = $event\\\"\\n    (freehandControl)=\\\"freehandDrawIsActive = $event\\\"\\n    (drawZoneEvent)=\\\"zone = $event\\\"\\n    (itemTypeChange)=\\\"itemType = $event\\\"\\n    (thematicChange)=\\\"thematics = $event\\\"\\n    (toggleSearch)=\\\"getOutputToggleSearch()\\\"\\n    (clearButtonEvent)=\\\"clearMap()\\\"\\n    (clearSearchEvent)=\\\"getOutputClearSearch()\\\"\\n    (export)=\\\"activateExportTool()\\\"\\n    (openWorkspace)=\\\"activateWorkspace()\\\"\\n    >\\n  </igo-spatial-filter-item>\\n</igo-panel>\\n\\n<igo-panel>\\n  <ng-container *ngIf=\\\"selectedFeature$ | async as feature\\\">\\n    <igo-feature-details [feature]=\\\"feature\\\"></igo-feature-details>\\n  </ng-container>\\n</igo-panel>\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                styles: [\"\"]\n            }]\n    }], function () { return [{ type: ɵngcc9.MatIconRegistry }, { type: ɵngcc3.SpatialFilterService }, { type: ɵngcc3.DataSourceService }, { type: ɵngcc3.LayerService }, { type: MapState }, { type: ɵngcc6.MessageService }, { type: ɵngcc6.LanguageService }, { type: ImportExportState }, { type: ToolState }, { type: WorkspaceState }, { type: ɵngcc0.ChangeDetectorRef }]; }, { itemType: [{\n            type: Input\n        }], type: [{\n            type: Input\n        }], freehandDrawIsActive: [{\n            type: Input\n        }] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ActiveTimeFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-active-time-filter-tool',\n                template: \"<igo-time-filter-item\\n    [map]=\\\"map\\\"\\n    [layer]=\\\"layer\\\"\\n    [header]=\\\"false\\\"\\n    [@toolSlideInOut]=\\\"animate\\\">\\n</igo-time-filter-item>\\n\",\n                animations: [toolSlideInOut()]\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ActiveOgcFilterToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-active-ogc-filter-tool',\n                template: \"<igo-ogc-filterable-item\\n    [map]=\\\"map\\\"\\n    [layer]=\\\"layer\\\"\\n    [header]=\\\"false\\\"\\n    [@toolSlideInOut]=\\\"animate\\\">\\n</igo-ogc-filterable-item>\\n\\n\\n\",\n                animations: [toolSlideInOut$1()]\n            }]\n    }], function () { return [{ type: MapState }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppFilterModule, { declarations: function () { return [OgcFilterToolComponent, ActiveOgcFilterToolComponent, TimeFilterToolComponent, ActiveTimeFilterToolComponent, SpatialFilterToolComponent]; }, imports: function () { return [IgoFilterModule, IgoQueryModule, CommonModule]; }, exports: function () { return [OgcFilterToolComponent, ActiveOgcFilterToolComponent, TimeFilterToolComponent, ActiveTimeFilterToolComponent, SpatialFilterToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppFilterModule, [{\n        type: NgModule,\n        args: [{\n                imports: [IgoFilterModule, IgoQueryModule, CommonModule],\n                declarations: [\n                    OgcFilterToolComponent,\n                    ActiveOgcFilterToolComponent,\n                    TimeFilterToolComponent,\n                    ActiveTimeFilterToolComponent,\n                    SpatialFilterToolComponent\n                ],\n                exports: [\n                    OgcFilterToolComponent,\n                    ActiveOgcFilterToolComponent,\n                    TimeFilterToolComponent,\n                    ActiveTimeFilterToolComponent,\n                    SpatialFilterToolComponent\n                ],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AboutToolComponent, [{\n        type: Component,\n        args: [{\n                selector: 'igo-about-tool',\n                template: \"<p></p>\\n<igo-interactive-tour\\n  mat-raised-button\\n  tourToStart=\\\"global\\\"\\n  menuIsOpen=true\\n  styleButton=\\\"raised\\\"\\n  [discoverTitleInLocale$]=\\\"discoverTitleInLocale$\\\">\\n</igo-interactive-tour>\\n\\n<igo-custom-html class=\\\"mat-typography\\\"\\n  [html]=\\\"html | \\u00A0translate: {version: version}\\\">\\n</igo-custom-html>\\n\",\n                styles: [\"igo-interactive-tour{margin-left:20px}\"]\n            }]\n    }], function () { return [{ type: ɵngcc6.ConfigService }]; }, { discoverTitleInLocale$: [{\n            type: Input\n        }], html: [{\n            type: Input\n        }] }); })();\n\nclass IgoAppAboutModule {\n    static forRoot() {\n        return {\n            ngModule: IgoAppAboutModule,\n            providers: []\n        };\n    }\n}\nIgoAppAboutModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppAboutModule });\nIgoAppAboutModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppAboutModule_Factory(t) { return new (t || IgoAppAboutModule)(); }, imports: [[\n            IgoLanguageModule,\n            IgoCustomHtmlModule,\n            MatButtonModule,\n            MatTooltipModule,\n            MatIconModule,\n            IgoInteractiveTourModule\n        ]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoAppAboutModule, { declarations: function () { return [AboutToolComponent]; }, imports: function () { return [IgoLanguageModule,\n        IgoCustomHtmlModule,\n        MatButtonModule,\n        MatTooltipModule,\n        MatIconModule,\n        IgoInteractiveTourModule]; }, exports: function () { return [AboutToolComponent]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppAboutModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    IgoLanguageModule,\n                    IgoCustomHtmlModule,\n                    MatButtonModule,\n                    MatTooltipModule,\n                    MatIconModule,\n                    IgoInteractiveTourModule\n                ],\n                declarations: [AboutToolComponent],\n                exports: [AboutToolComponent],\n                schemas: [CUSTOM_ELEMENTS_SCHEMA]\n            }]\n    }], null, null); })();\n\nclass IgoAppStorageModule {\n}\nIgoAppStorageModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppStorageModule });\nIgoAppStorageModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppStorageModule_Factory(t) { return new (t || IgoAppStorageModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppStorageModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\nclass IgoIntegrationModule {\n}\nIgoIntegrationModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoIntegrationModule });\nIgoIntegrationModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoIntegrationModule_Factory(t) { return new (t || IgoIntegrationModule)(); }, imports: [[], IgoAppStorageModule, IgoAppAnalyticsModule, IgoAppContextModule, IgoAppCatalogModule, IgoAppDirectionsModule, IgoAppWorkspaceModule, IgoAppImportExportModule, IgoAppMapModule, IgoAppMeasureModule, IgoAppPrintModule, IgoAppSearchModule, IgoAppFilterModule, IgoAppAboutModule] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(IgoIntegrationModule, { exports: [IgoAppStorageModule, IgoAppAnalyticsModule, IgoAppContextModule, IgoAppCatalogModule, IgoAppDirectionsModule, IgoAppWorkspaceModule, IgoAppImportExportModule, IgoAppMapModule, IgoAppMeasureModule, IgoAppPrintModule, IgoAppSearchModule, IgoAppFilterModule, IgoAppAboutModule] }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoIntegrationModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: [\n                    IgoAppStorageModule,\n                    IgoAppAnalyticsModule,\n                    IgoAppContextModule,\n                    IgoAppCatalogModule,\n                    IgoAppDirectionsModule,\n                    IgoAppWorkspaceModule,\n                    IgoAppImportExportModule,\n                    IgoAppMapModule,\n                    IgoAppMeasureModule,\n                    IgoAppPrintModule,\n                    IgoAppSearchModule,\n                    IgoAppFilterModule,\n                    IgoAppAboutModule\n                ]\n            }]\n    }], null, null); })();\n\nclass IgoAppToolModule {\n}\nIgoAppToolModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: IgoAppToolModule });\nIgoAppToolModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function IgoAppToolModule_Factory(t) { return new (t || IgoAppToolModule)(); }, imports: [[]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(IgoAppToolModule, [{\n        type: NgModule,\n        args: [{\n                imports: [],\n                declarations: [],\n                exports: []\n            }]\n    }], null, null); })();\n\n/**\n * Service that holds the state of the context module\n */\nclass ContextState {\n    constructor(contextService, toolService, toolState, languageService) {\n        this.contextService = contextService;\n        this.toolService = toolService;\n        this.toolState = toolState;\n        this.languageService = languageService;\n        /**\n         * Observable of the active context\n         */\n        this.context$ = new BehaviorSubject(undefined);\n        this.contextService.context$.subscribe((context) => {\n            this.onContextChange(context);\n        });\n    }\n    /**\n     * Set the active context\n     * @param context Detailed context\n     */\n    setContext(context) {\n        this.updateTools(context);\n        this.context$.next(context);\n    }\n    /**\n     * Update the tool state with the context's tools\n     * @param context Detailed context\n     */\n    updateTools(context) {\n        const toolbox = this.toolState.toolbox;\n        const tools = [];\n        const contextTools = context.tools || [];\n        contextTools.forEach((contextTool) => {\n            const baseTool = this.toolService.getTool(contextTool.name);\n            if (baseTool === undefined) {\n                return;\n            }\n            const options = Object.assign({}, baseTool.options || {}, contextTool.options || {});\n            const tool = Object.assign({}, baseTool, contextTool, { options });\n            tools.push(tool);\n        });\n        tools.forEach((tool) => {\n            if (tool.parent) {\n                const parentIndex = tools.findIndex((el) => el.name === tool.parent);\n                if (parentIndex !== -1) {\n                    tools[parentIndex].children = [];\n                    tools[parentIndex].children.push(tool.name);\n                }\n            }\n        });\n        toolbox.setTools(tools);\n        toolbox.setToolbar(context.toolbar || []);\n        // TODO: This is a patch so the context service can work without\n        // injecting the ToolState or without being completely refactored\n        this.contextService.setTools([].concat(tools));\n        this.contextService.setToolbar(context.toolbar || []);\n    }\n    /**\n     * Set a new context and update the tool state\n     * @param context Detailed context\n     */\n    onContextChange(context) {\n        if (context === undefined) {\n            return;\n        }\n        this.setContext(context);\n    }\n}\nContextState.ɵfac = function ContextState_Factory(t) { return new (t || ContextState)(ɵngcc0.ɵɵinject(ɵngcc2.ContextService), ɵngcc0.ɵɵinject(ɵngcc1.ToolService), ɵngcc0.ɵɵinject(ToolState), ɵngcc0.ɵɵinject(ɵngcc6.LanguageService)); };\nContextState.ɵprov = ɵɵdefineInjectable({ factory: function ContextState_Factory() { return new ContextState(ɵɵinject(ContextService), ɵɵinject(ToolService), ɵɵinject(ToolState), ɵɵinject(LanguageService)); }, token: ContextState, providedIn: \"root\" });\nContextState.ctorParameters = () => [\n    { type: ContextService },\n    { type: ToolService },\n    { type: ToolState },\n    { type: LanguageService }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ContextState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc2.ContextService }, { type: ɵngcc1.ToolService }, { type: ToolState }, { type: ɵngcc6.LanguageService }]; }, null); })();\n\n/**\n * Service that holds the state of the search module\n */\nclass AnalyticsListenerService {\n    /**\n     * Toolbox that holds main tools\n     */\n    constructor(analyticsService, authService, contextState, searchState, toolState) {\n        this.analyticsService = analyticsService;\n        this.authService = authService;\n        this.contextState = contextState;\n        this.searchState = searchState;\n        this.toolState = toolState;\n    }\n    listen() {\n        this.listenUser();\n        this.listenContext();\n        this.listenTool();\n        this.listenSearch();\n    }\n    listenUser() {\n        this.authService.authenticate$.subscribe(() => {\n            const tokenDecoded = this.authService.decodeToken() || {};\n            if (tokenDecoded.user) {\n                this.authService\n                    .getProfils()\n                    .subscribe(profils => this.analyticsService.setUser(tokenDecoded.user, profils.profils));\n            }\n            else {\n                this.analyticsService.setUser();\n            }\n        });\n    }\n    listenContext() {\n        this.contextState.context$.subscribe(context => {\n            if (context) {\n                this.analyticsService.trackEvent('context', 'activateContext', context.id || context.uri);\n            }\n        });\n    }\n    listenTool() {\n        this.toolState.toolbox.activeTool$.pipe(skip(1)).subscribe(tool => {\n            if (tool) {\n                this.analyticsService.trackEvent('tool', 'activateTool', tool.name);\n            }\n        });\n    }\n    listenSearch() {\n        this.searchState.searchTerm$.pipe(skip(1)).subscribe((searchTerm) => {\n            if (searchTerm !== undefined && searchTerm !== null) {\n                this.analyticsService.trackSearch(searchTerm, this.searchState.store.count);\n            }\n        });\n    }\n}\nAnalyticsListenerService.ɵfac = function AnalyticsListenerService_Factory(t) { return new (t || AnalyticsListenerService)(ɵngcc0.ɵɵinject(ɵngcc6.AnalyticsService), ɵngcc0.ɵɵinject(ɵngcc4.AuthService), ɵngcc0.ɵɵinject(ContextState), ɵngcc0.ɵɵinject(SearchState), ɵngcc0.ɵɵinject(ToolState)); };\nAnalyticsListenerService.ɵprov = ɵɵdefineInjectable({ factory: function AnalyticsListenerService_Factory() { return new AnalyticsListenerService(ɵɵinject(AnalyticsService), ɵɵinject(AuthService), ɵɵinject(ContextState), ɵɵinject(SearchState), ɵɵinject(ToolState)); }, token: AnalyticsListenerService, providedIn: \"root\" });\nAnalyticsListenerService.ctorParameters = () => [\n    { type: AnalyticsService },\n    { type: AuthService },\n    { type: ContextState },\n    { type: SearchState },\n    { type: ToolState }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AnalyticsListenerService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: ɵngcc6.AnalyticsService }, { type: ɵngcc4.AuthService }, { type: ContextState }, { type: SearchState }, { type: ToolState }]; }, null); })();\n\n/**\n * Service that holds the state of the query module\n */\nclass QueryState {\n    constructor() {\n        /**\n         * Store that holds the query results\n         */\n        this.store = new EntityStore([]);\n    }\n}\nQueryState.ɵfac = function QueryState_Factory(t) { return new (t || QueryState)(); };\nQueryState.ɵprov = ɵɵdefineInjectable({ factory: function QueryState_Factory() { return new QueryState(); }, token: QueryState, providedIn: \"root\" });\nQueryState.ctorParameters = () => [];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(QueryState, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return []; }, null); })();\n\n/*\n * Public API Surface of tools\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AboutToolComponent, ActiveOgcFilterToolComponent, ActiveTimeFilterToolComponent, AnalyticsListenerService, CatalogBrowserToolComponent, CatalogLibraryToolComponent, CatalogState, ContextEditorToolComponent, ContextManagerToolComponent, ContextPermissionManagerToolComponent, ContextShareToolComponent, ContextState, DirectionsToolComponent, FeatureActionsService, IgoAppAboutModule, IgoAppAnalyticsModule, IgoAppCatalogBrowserToolModule, IgoAppCatalogLibraryToolModule, IgoAppCatalogModule, IgoAppContextModule, IgoAppDirectionsModule, IgoAppFilterModule, IgoAppImportExportModule, IgoAppMapModule, IgoAppMeasureModule, IgoAppMeasurerToolModule, IgoAppPrintModule, IgoAppSearchBarModule, IgoAppSearchModule, IgoAppSearchResultsToolModule, IgoAppStorageModule, IgoAppToolModule, IgoAppWorkspaceModule, IgoIntegrationModule, ImportExportState, ImportExportToolComponent, MapDetailsToolComponent, MapLegendToolComponent, MapState, MapToolComponent, MapToolsComponent, MeasureState, MeasurerToolComponent, OgcFilterToolComponent, PrintToolComponent, QueryState, SearchBarBindingDirective, SearchResultsToolComponent, SearchState, SpatialFilterToolComponent, StorageState, TimeFilterToolComponent, ToolState, WfsActionsService, WorkspaceButtonComponent, WorkspaceState, ContextEditorToolComponent as ɵa, ToolState as ɵb, MeasurerToolComponent as ɵba, MeasureState as ɵbb, PrintToolComponent as ɵbc, IgoAppSearchBarModule as ɵbd, SearchBarBindingDirective as ɵbe, SearchState as ɵbf, IgoAppSearchResultsToolModule as ɵbg, SearchResultsToolComponent as ɵbh, OgcFilterToolComponent as ɵbi, ActiveOgcFilterToolComponent as ɵbj, toolSlideInOut$1 as ɵbk, TimeFilterToolComponent as ɵbl, ActiveTimeFilterToolComponent as ɵbm, toolSlideInOut as ɵbn, SpatialFilterToolComponent as ɵbo, AboutToolComponent as ɵbp, ImportExportState as ɵc, ContextManagerToolComponent as ɵd, MapState as ɵe, ContextPermissionManagerToolComponent as ɵf, ContextShareToolComponent as ɵg, LayerListToolState as ɵh, IgoAppCatalogLibraryToolModule as ɵi, CatalogLibraryToolComponent as ɵj, CatalogState as ɵk, IgoAppCatalogBrowserToolModule as ɵl, CatalogBrowserToolComponent as ɵm, DirectionsToolComponent as ɵn, DirectionState as ɵo, WorkspaceButtonComponent as ɵp, WorkspaceState as ɵq, FeatureActionsService as ɵr, StorageState as ɵs, WfsActionsService as ɵt, ImportExportToolComponent as ɵu, MapToolComponent as ɵv, MapToolsComponent as ɵw, MapDetailsToolComponent as ɵx, MapLegendToolComponent as ɵy, IgoAppMeasurerToolModule as ɵz };\n\n//# sourceMappingURL=igo2-integration.js.map","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Search</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: ConfigService, LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/search\">code of this example</a><br>\n    See search section of the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/environments\"> environment config</a>\n    <hr>\n    <br>\n    <span *ngIf=\"!isTouchScreen\" title=\"Details\">\n      F2 activate/desactivate the pointer location.\n    </span>\n  </mat-card-content>\n\n  <igo-map-browser #mapBrowser [map]=\"map\" [view]=\"view\" igoOverlay [igoContextMenu]=actionbarMenu\n\n    igoSearchPointerSummary\n    [igoSearchPointerSummaryDelay]=\"500\"\n    [igoSearchPointerSummaryEnabled]=\"igoSearchPointerSummaryEnabled\"\n    (menuPosition)=\"onContextMenuOpen($event)\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Search\">\n    <igo-search-bar\n      (pointerSummaryStatus)=\"onPointerSummaryStatusChange($event)\"\n      [searchSettings]=\"true\"\n      [store]=\"searchStore\"\n      (searchTermChange)=\"onSearchTermChange($event)\"\n      (search)=\"onSearch($event)\"\n      (clearFeature)=\"removeFeatureFromMap()\"\n      (searchSettingsChange)=\"onSearchSettingsChange()\">\n    </igo-search-bar>\n\n    <igo-search-results\n      [store]=\"searchStore\"\n      [term]=\"term\"\n      placeholder=\"false\"\n      [settingsChange$]=\"settingsChange$\"\n      (resultFocus)=\"onResultFocus($event)\"\n      (resultSelect)=\"onResultFocus($event)\"\n      (moreResults)=\"onSearch($event)\">\n        <ng-template #igoSearchItemToolbar let-result=\"result\">\n          <igo-search-add-button\n            [map]=\"map\"\n            [layer]=\"result\">\n          </igo-search-add-button>\n        </ng-template>\n    </igo-search-results>\n\n  </igo-panel>\n\n  <igo-panel *ngIf=\"selectedFeature\" title=\"Details\">\n    <igo-feature-details [feature]=\"selectedFeature\"></igo-feature-details>\n  </igo-panel>\n\n</mat-card>\n\n<ng-template #actionbarMenu>\n  <igo-actionbar\n    [store]=\"store\"\n    [withIcon]=\"false\"\n    [horizontal]=\"true\"\n    [mode]=\"'context'\">\n  </igo-actionbar>\n</ng-template>\n\n<igo-message-center></igo-message-center>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppSearchComponent } from './search.component';\n\nconst routes: Routes = [\n  {\n    path: 'search',\n    component: AppSearchComponent\n  }\n];\n\nexport const AppSearchRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { BehaviorSubject } from 'rxjs';\nimport {\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  ViewChild\n} from '@angular/core';\nimport * as proj from 'ol/proj';\n\nimport { LanguageService, MediaService } from '@igo2/core';\nimport { EntityStore, ActionStore } from '@igo2/common';\nimport {\n  FEATURE,\n  Feature,\n  FeatureMotion,\n  GoogleLinks,\n  IgoMap,\n  LayerService,\n  MapService,\n  Layer,\n  ProjectionService,\n  Research,\n  SearchResult,\n  SearchService\n} from '@igo2/geo';\n\nimport { SearchState } from '@igo2/integration';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss']\n})\nexport class AppSearchComponent implements OnInit, OnDestroy {\n  public store = new ActionStore([]);\n\n  public igoSearchPointerSummaryEnabled: boolean = false;\n\n  public map = new IgoMap({\n    overlay: true,\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  public osmLayer: Layer;\n\n  @ViewChild('mapBrowser', { read: ElementRef, static: true }) mapBrowser: ElementRef;\n\n  public lonlat;\n  public mapProjection: string;\n  public term: string;\n\n  public settingsChange$ = new BehaviorSubject<boolean>(undefined);\n\n  get searchStore(): EntityStore<SearchResult> {\n    return this.searchState.store;\n  }\n\n  get isTouchScreen(): boolean {\n    return this.mediaService.isTouchScreen();\n  }\n\n  public selectedFeature: Feature;\n\n  constructor(\n    private languageService: LanguageService,\n    private projectionService: ProjectionService,\n    private mapService: MapService,\n    private layerService: LayerService,\n    private searchState: SearchState,\n    private searchService: SearchService,\n    private mediaService: MediaService\n  ) {\n    this.mapService.setMap(this.map);\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(layer => {\n        this.osmLayer = layer;\n        this.map.addLayer(layer);\n      });\n  }\n\n  onPointerSummaryStatusChange(value) {\n    this.igoSearchPointerSummaryEnabled = value;\n  }\n\n  onSearchTermChange(term = '') {\n    this.term = term;\n    const termWithoutHashtag = term.replace(/(#[^\\s]*)/g, '').trim();\n    if (termWithoutHashtag.length < 2) {\n      this.searchStore.clear();\n      this.selectedFeature = undefined;\n    }\n  }\n\n  onSearch(event: { research: Research; results: SearchResult[] }) {\n    const results = event.results;\n    this.searchStore.state.updateAll({ focused: false, selected: false });\n    const newResults = this.searchStore.entities$.value\n      .filter((result: SearchResult) => result.source !== event.research.source)\n      .concat(results);\n    this.searchStore.load(newResults);\n  }\n\n  onSearchSettingsChange() {\n    this.settingsChange$.next(true);\n  }\n\n  /**\n   * Try to add a feature to the map when it's being focused\n   * @internal\n   * @param result A search result that could be a feature\n   */\n  onResultFocus(result: SearchResult) {\n    this.tryAddFeatureToMap(result);\n    this.selectedFeature = (result as SearchResult<Feature>).data;\n  }\n\n  /**\n   * Try to add a feature to the map overlay\n   * @param layer A search result that could be a feature\n   */\n  private tryAddFeatureToMap(layer: SearchResult) {\n    if (layer.meta.dataType !== FEATURE) {\n      return undefined;\n    }\n\n    // Somethimes features have no geometry. It happens with some GetFeatureInfo\n    if (layer.data.geometry === undefined) {\n      return;\n    }\n\n    this.map.overlay.setFeatures(\n      [layer.data] as Feature[],\n      FeatureMotion.Default\n    );\n  }\n\n  ngOnInit() {\n    this.store.load([\n      {\n        id: 'coordinates',\n        title: 'coordinates',\n        handler: this.onSearchCoordinate.bind(this)\n      },\n      {\n        id: 'googleMaps',\n        title: 'googleMap',\n        handler: this.onOpenGoogleMaps.bind(this),\n        args: ['1']\n      },\n      {\n        id: 'googleStreetView',\n        title: 'googleStreetView',\n        handler: this.onOpenGoogleStreetView.bind(this)\n      }\n    ]);\n  }\n\n  ngOnDestroy() {\n    this.store.destroy();\n  }\n\n  /*\n   * Remove a feature to the map overlay\n   */\n  removeFeatureFromMap() {\n    this.map.overlay.clear();\n  }\n\n  onContextMenuOpen(event: { x: number; y: number }) {\n    const position = this.mapPosition(event);\n    const coord = this.mapService.getMap().ol.getCoordinateFromPixel(position);\n    this.mapProjection = this.mapService.getMap().projection;\n    this.lonlat = proj.transform(coord, this.mapProjection, 'EPSG:4326');\n  }\n\n  mapPosition(event: { x: number; y: number }) {\n    const contextmenuPoint = event;\n    contextmenuPoint.y =\n      contextmenuPoint.y -\n      this.mapBrowser.nativeElement.getBoundingClientRect().top +\n      window.scrollY;\n    contextmenuPoint.x =\n      contextmenuPoint.x -\n      this.mapBrowser.nativeElement.getBoundingClientRect().left +\n      window.scrollX;\n    const position = [contextmenuPoint.x, contextmenuPoint.y];\n    return position;\n  }\n\n  onPointerSearch(event) {\n    this.lonlat = event;\n    this.onSearchCoordinate();\n  }\n\n  onSearchCoordinate() {\n    this.searchStore.clear();\n    const results = this.searchService.reverseSearch(this.lonlat);\n\n    for (const i in results) {\n      if (results.length > 0) {\n        results[i].request.subscribe((_results: SearchResult<Feature>[]) => {\n          this.onSearch({ research: results[i], results: _results });\n        });\n      }\n    }\n  }\n\n  onOpenGoogleMaps() {\n    window.open(GoogleLinks.getGoogleMapsCoordLink(this.lonlat[0], this.lonlat[1]));\n  }\n\n  onOpenGoogleStreetView() {\n    window.open(\n      GoogleLinks.getGoogleStreetViewLink(this.lonlat[0], this.lonlat[1])\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\nimport { IgoMessageModule } from '@igo2/core';\n\nimport {\n  IgoPanelModule,\n  IgoActionbarModule,\n  IgoContextMenuModule\n} from '@igo2/common';\n\nimport {\n  IgoFeatureModule,\n  IgoMapModule,\n  IgoSearchModule,\n  provideIChercheSearchSource,\n  provideILayerSearchSource,\n  provideNominatimSearchSource,\n  provideIChercheReverseSearchSource,\n  provideCoordinatesReverseSearchSource,\n  provideCadastreSearchSource\n} from '@igo2/geo';\n\nimport { IgoAppSearchModule } from '@igo2/integration';\n\nimport { AppSearchComponent } from './search.component';\nimport { AppSearchRoutingModule } from './search-routing.module';\n\n@NgModule({\n  declarations: [AppSearchComponent],\n  imports: [\n    CommonModule,\n    AppSearchRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    MatTooltipModule,\n    IgoMessageModule.forRoot(),\n    IgoPanelModule,\n    IgoMapModule,\n    IgoSearchModule.forRoot(),\n    IgoAppSearchModule,\n    IgoActionbarModule,\n    IgoContextMenuModule,\n    IgoFeatureModule\n  ],\n  exports: [AppSearchComponent],\n  providers: [\n    provideCoordinatesReverseSearchSource(),\n    provideCadastreSearchSource(),\n    provideIChercheSearchSource(),\n    provideILayerSearchSource(),\n    provideNominatimSearchSource(),\n    provideIChercheReverseSearchSource()\n  ]\n})\nexport class AppSearchModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppPrintComponent } from './print.component';\n\nconst routes: Routes = [\n  {\n    path: 'print',\n    component: AppPrintComponent\n  }\n];\n\nexport const AppPrintRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport { IgoMap, LayerService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-print',\n  templateUrl: './print.component.html',\n  styleUrls: ['./print.component.scss']\n})\nexport class AppPrintComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 9\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private layerService: LayerService\n  ) {\n    this.layerService\n      .createAsyncLayer({\n        title: 'Quebec Base Map',\n        sourceOptions: {\n          type: 'wmts',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/carto/wmts/1.0.0/wmts',\n          layer: 'carte_gouv_qc_ro',\n          matrixSet: 'EPSG_3857',\n          version: '1.3.0',\n          crossOrigin: 'anonymous'\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    this.layerService\n      .createAsyncLayer({\n        title: 'School board',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          params: {\n            LAYERS: 'MELS_CS_ANGLO_S',\n            VERSION: '1.3.0'\n          },\n          crossOrigin: 'anonymous'\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n    //\n    this.layerService\n      .createAsyncLayer({\n        title: 'Embacle',\n        sourceOptions: {\n          type: 'wms',\n          url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n          params: {\n            LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n            VERSION: '1.3.0'\n          },\n          crossOrigin: 'anonymous'\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n\n    // this.layerService\n    //   .createAsyncLayer({\n    //     title: 'Geomet',\n    //     sourceOptions: {\n    //       type: 'wms',\n    //       url: 'http://geo.weather.gc.ca/geomet/?lang=fr',\n    //       params: {\n    //         LAYERS: 'RADAR_1KM_RDBR',\n    //         VERSION: '1.3.0'\n    //       },\n    //       crossOrigin: 'anonymous'\n    //     }\n    //   })\n    //   .subscribe(l => this.map.addLayer(l));\n\n    /*\n        //CORS error if activate (for test)\n        this.layerService\n          .createAsyncLayer({\n            title: 'Geomet',\n            sourceOptions: {\n              type: 'wms',\n              url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq?service=wms',\n              params: {\n                layers: 'swtq',\n                version: '1.3.0',\n              }\n            }\n          })\n          .subscribe(l => this.map.addLayer(l));\n    */\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Print</mat-card-title>\n  <mat-card-content>\n    <li>npm install --save html2canvas@1.0.0-alpha.12</li>\n    <li>npm install --save jspdf@1.4.1</li>\n    <li>npm install --save file-saver@1.3.8</li>\n    <li>npm install --save jszip@3.1.5</li>\n    <li>npm install --save stream@0.0.2</li>\n\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/print\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n    <igo-geolocate-button [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n    <igo-rotation-button [map]=\"map\" [showIfNoRotation]=\"false\" color=\"primary\"></igo-rotation-button>\n  </igo-map-browser>\n\n  <igo-print [map]=\"map\"></igo-print>\n\n</mat-card>\n\n<igo-message-center></igo-message-center>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMessageModule } from '@igo2/core';\nimport { IgoMapModule, IgoPrintModule } from '@igo2/geo';\n\nimport { AppPrintComponent } from './print.component';\nimport { AppPrintRoutingModule } from './print-routing.module';\n\n@NgModule({\n  declarations: [AppPrintComponent],\n  imports: [\n    AppPrintRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMessageModule,\n    IgoMapModule,\n    IgoPrintModule\n  ],\n  exports: [AppPrintComponent]\n})\nexport class AppPrintModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppImportExportComponent } from './import-export.component';\n\nconst routes: Routes = [\n  {\n    path: 'import-export',\n    component: AppImportExportComponent\n  }\n];\n\nexport const AppImportExportRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport { IgoMap, LayerService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-import-export',\n  templateUrl: './import-export.component.html',\n  styleUrls: ['./import-export.component.scss']\n})\nexport class AppImportExportComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 9\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private layerService: LayerService\n  ) {\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Import / Export</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/import-export\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-import-export [map]=\"map\"></igo-import-export>\n\n</mat-card>\n\n<igo-message-center></igo-message-center>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMessageModule } from '@igo2/core';\nimport {\n  IgoMapModule,\n  IgoImportExportModule,\n  provideStyleListOptions\n} from '@igo2/geo';\n\nimport { AppImportExportComponent } from './import-export.component';\nimport { AppImportExportRoutingModule } from './import-export-routing.module';\n\n@NgModule({\n  declarations: [AppImportExportComponent],\n  imports: [\n    AppImportExportRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMessageModule,\n    IgoMapModule,\n    IgoImportExportModule\n  ],\n  exports: [AppImportExportComponent],\n  providers: [\n    provideStyleListOptions({\n      path: './assets/import-style.json'\n    })\n  ]\n})\nexport class AppImportExport {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppDirectionsComponent } from './directions.component';\n\nconst routes: Routes = [\n  {\n    path: 'directions',\n    component: AppDirectionsComponent\n  }\n];\n\nexport const AppDirectionsRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  LayerService,\n  MapService,\n  FeatureStore,\n  Feature,\n  ProjectionService\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-directions',\n  templateUrl: './directions.component.html',\n  styleUrls: ['./directions.component.scss']\n})\nexport class AppDirectionsComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 9,\n    geolocate: true\n  };\n\n  public stopsStore = new FeatureStore<Feature>([], { map: this.map });\n  public routeStore = new FeatureStore<Feature>([], { map: this.map });\n\n  constructor(\n    private projectionService: ProjectionService,\n    private languageService: LanguageService,\n    private layerService: LayerService,\n    private mapService: MapService\n  ) {\n    this.mapService.setMap(this.map);\n    this.layerService\n      .createAsyncLayer({\n        title: 'OSM',\n        sourceOptions: {\n          type: 'osm'\n        }\n      })\n      .subscribe(l => this.map.addLayer(l));\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Directions</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/directions\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n    <igo-geolocate-button [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n    <igo-rotation-button [map]=\"map\" [showIfNoRotation]=\"false\" color=\"primary\"></igo-rotation-button>\n  </igo-map-browser>\n\n  <igo-directions-form [stopsStore]=\"stopsStore\" [routeStore]=\"routeStore\" [map]=\"map\"></igo-directions-form>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\n\nimport { IgoMessageModule } from '@igo2/core';\nimport {\n  IgoMapModule,\n  IgoDirectionsModule,\n  provideOsrmDirectionsSource\n} from '@igo2/geo';\n\nimport { AppDirectionsComponent } from './directions.component';\nimport { AppDirectionsRoutingModule } from './directions-routing.module';\n\n@NgModule({\n  declarations: [AppDirectionsComponent],\n  imports: [\n    AppDirectionsRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    IgoMessageModule,\n    IgoMapModule,\n    IgoDirectionsModule\n  ],\n  exports: [AppDirectionsComponent],\n  providers: [provideOsrmDirectionsSource()]\n})\nexport class AppDirectionsModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppTimeFilterComponent } from './time-filter.component';\n\nconst routes: Routes = [\n  {\n    path: 'time-filter',\n    component: AppTimeFilterComponent\n  }\n];\n\nexport const AppTimeFilterRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  TimeFilterableDataSourceOptions,\n  TimeFilterType,\n  TimeFilterStyle\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-time-filter',\n  templateUrl: './time-filter.component.html',\n  styleUrls: ['./time-filter.component.scss']\n})\nexport class AppTimeFilterComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    // const datasource: TimeFilterableDataSourceOptions = {\n    //   type: 'wms',\n    //   url: 'https://geoegl.msp.gouv.qc.ca/ws/igo_gouvouvert.fcgi',\n    //   params: {\n    //     layers: 'vg_observation_v_inondation_embacle_wmst',\n    //     version: '1.3.0'\n    //   },\n    //   timeFilterable: true,\n    //   timeFilter: {\n    //     min: '2017-01-01',\n    //     max: '2018-01-01',\n    //     range: true,\n    //     type: TimeFilterType.DATETIME,\n    //     style: TimeFilterStyle.SLIDER,\n    //     step: 86400000,\n    //     timeInterval: 2000\n    //   }\n    // };\n\n    const datasourceYear: TimeFilterableDataSourceOptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/ws/igo_gouvouvert.fcgi',\n      params: {\n        LAYERS: 'vg_observation_v_inondation_embacle_wmst',\n        VERSION: '1.3.0'\n      },\n      timeFilterable: true,\n      timeFilter: {\n        min: '2013',\n        max: '2019',\n        range: false,\n        type: TimeFilterType.YEAR,\n        style: TimeFilterStyle.SLIDER,\n        step: 1,\n        timeInterval: 2000\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceYear)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle YEAR',\n            visible: true,\n            source: dataSource\n          })\n        );\n      });\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Time filter</mat-card-title>\n  <mat-card-content>\n    <li>npm install --save moment@2.22.2</li>\n    <li>npm install --save @mat-datetimepicker/core@3.0.0-beta.0</li>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/time-filter\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Layers\">\n    <igo-time-filter-list [layers]=\"map.layers\"></igo-time-filter-list>\n  </igo-panel>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport { IgoMapModule, IgoFilterModule } from '@igo2/geo';\n\nimport { AppTimeFilterComponent } from './time-filter.component';\nimport { AppTimeFilterRoutingModule } from './time-filter-routing.module';\n\n@NgModule({\n  declarations: [AppTimeFilterComponent],\n  imports: [\n    AppTimeFilterRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoFilterModule\n  ],\n  exports: [AppTimeFilterComponent]\n})\nexport class AppTimeFilterModule {}\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppOgcFilterComponent } from './ogc-filter.component';\n\nconst routes: Routes = [\n  {\n    path: 'ogc-filter',\n    component: AppOgcFilterComponent\n  }\n];\n\nexport const AppOgcFilterRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WMSDataSourceOptions,\n  WFSDataSourceOptions,\n  WFSDataSourceOptionsParams,\n  OgcFilterableDataSourceOptions,\n  AnyBaseOgcFilterOptions,\n  OgcFilterOperatorType,\n  OgcFilterDuringOptions,\n  TimeFilterType\n} from '@igo2/geo';\n\n@Component({\n  selector: 'app-ogc-filter',\n  templateUrl: './ogc-filter.component.html',\n  styleUrls: ['./ogc-filter.component.scss']\n})\nexport class AppOgcFilterComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 7\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    interface WFSoptions\n      extends WFSDataSourceOptions,\n        OgcFilterableDataSourceOptions {}\n\n    const datasource: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'code_municipalite', alias: '# de la municipalitée' },\n        { name: 'date_observation', excludeFromOgcFilters: true },\n        { name: 'urgence', values: ['immédiate', 'inconnue'] }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters: {\n          logical: 'Or',\n          filters: [\n            {\n              operator: 'PropertyIsEqualTo',\n              propertyName: 'code_municipalite',\n              expression: '10043'\n            },\n            {\n              operator: 'Intersects',\n              geometryName: 'the_geom',\n              wkt_geometry: `MULTIPOLYGON(((\n              -8379441.158019895 5844447.897707146,\n              -8379441.158019895 5936172.331649357,\n              -8134842.66750733 5936172.331649357,\n              -8134842.66750733 5844447.897707146,\n              -8379441.158019895 5844447.897707146\n            ), (\n              -8015003 5942074,\n              -8015003 5780349,\n              -7792364 5780349,\n              -7792364 5942074,\n              -8015003 5942074\n            )))`\n            }\n          ] as AnyBaseOgcFilterOptions[]\n        }\n      }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasource)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (PropertyIsEqualTo OR Intersects)',\n            source: dataSource,\n            style: {\n              circle : {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'orange',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilter: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2016-01-21T00:00:00-05:00',\n            end: '2016-01-26T00:00:00-05:00'\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2016-02-10T00:00:00-05:00',\n      stepDate: 'P2D'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilter)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Step: P2D)',\n            id: '1',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'red',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n\n    const datasourceDuringFilterTime: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2016-01-01T04:00:00-05:00',\n            end: '2016-01-12T16:00:00-05:00'\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2016-02-14T20:00:00-05:00',\n      stepDate: 'PT4H'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTime)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Step: PT4H)',\n            id: '2',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'blue',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilterTimeMonth: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2016-01-01T00:00:00-05:00',\n            end: '2016-03-01T00:00:00-05:00'\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2018-12-31T00:00:00-05:00',\n      stepDate: 'P1M'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeMonth)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Step: P1M)',\n            id: '3',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'yellow',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilterTimeYear: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2016-01-01T00:00:00-05:00',\n            end: '2016-12-31T00:00:00-05:00'\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2018-12-31T00:00:00-05:00',\n      stepDate: 'P1Y'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeYear)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Step: P1Y)',\n            id: '4',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'green',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilterTimeInterval: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: 'today - 2 days', // \"now\" can also be used. Instead of midnight, the current time will be used\n            end: 'today', // \"now\" can also be used. Instead of midnight, the current time will be used\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2025-12-31T00:00:00-05:00',\n      stepDate: 'P1D'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeInterval)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, Interval from Now, Step: P1D)',\n            id: '5',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'white'\n                },\n                stroke: {\n                  color: 'black',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const datasourceDuringFilterTimeRestrictedToStep: WFSoptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n      params: {\n        featureTypes: 'vg_observation_v_autre_wmst',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '2.0.0',\n        outputFormat: undefined,\n        outputFormatDownload: 'SHP' // based on service capabilities\n      },\n      sourceFields: [\n        { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n      ],\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        allowedOperatorsType: OgcFilterOperatorType.All,\n        filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation',\n            begin: '2019-01-01 00:00:00',\n            restrictToStep: true\n          } as OgcFilterDuringOptions\n      },\n      minDate: '2016-01-01T00:00:00-05:00',\n      maxDate: '2025-12-31T00:00:00-05:00',\n      stepDate: 'P1M'\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(datasourceDuringFilterTimeRestrictedToStep)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Embâcle (During, RestrictToStep, Step: P1M)',\n            id: '6',\n            source: dataSource,\n            style: {\n              circle: {\n                radius: 5,\n                fill: {\n                  color: 'black'\n                },\n                stroke: {\n                  color: 'red',\n                  width: 1\n                }\n              }\n            }\n          })\n        );\n      });\n\n    const wmsOgcFilterOptions: WMSoptions = {\n        type: 'wms',\n        url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi',\n        optionsFromCapabilities: true,\n        params: {\n          LAYERS: 'vg_observation_v_inondation23avril2017_wmst',\n          VERSION: '1.3.0'\n        },\n        sourceFields: [\n          { name: 'date_observation', alias: 'Date de l\\'observation', allowedOperatorsType: 'Time' as OgcFilterOperatorType }\n        ],\n        ogcFilters: {\n          enabled: true,\n          editable: true,\n          filters:\n          {\n            operator: 'During',\n            propertyName: 'date_observation'\n          } as OgcFilterDuringOptions,\n          allowedOperatorsType: OgcFilterOperatorType.Time\n        }\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wmsOgcFilterOptions)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Inondation (During, optionsFromCapabilities)',\n            source: dataSource\n          })\n        );\n      });\n\n    interface WMSoptions\n      extends WMSDataSourceOptions,\n        OgcFilterableDataSourceOptions {}\n\n    const filterableWMSwithPushButtons: WMSoptions = {\n      type: 'wms',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n      urlWfs: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n      params: {\n        LAYERS: 'radars_photos',\n        VERSION: '1.3.0'\n      },\n      ogcFilters: {\n        enabled: true,\n        editable: true,\n        pushButtons: {\n          groups : [\n            {title: 'Nom du group1', name: '1', ids : ['id1']},\n            {title: 'Nom du group2', name: '2', ids : ['id1', 'id2']},\n          ],\n          bundles: [\n          {\n            id: 'id1',\n            logical: 'Or',\n            buttons: [\n              {\n                title: 'Radar photo fixe',\n                enabled: true,\n                color: '0,0,255',\n                tooltip: 'Here a tooltip explaning ...',\n                filters: {\n                  operator: 'PropertyIsEqualTo',\n                  propertyName: 'typeAppareil',\n                  expression: 'Radar photo fixe'\n                }\n              },\n              {\n                title: 'Radar photo mobile',\n                enabled: false,\n                color: '255,200,0',\n                tooltip: 'Here a tooltip explaning ...',\n                filters: {\n                  operator: 'PropertyIsEqualTo',\n                  propertyName: 'typeAppareil',\n                  expression: 'Radar photo mobile'\n                }\n              },\n              {\n                title: 'Radar photo fixe + feu rouge',\n                enabled: false,\n                color: '0,200,0',\n                tooltip: 'Here a tooltip explaning ...',\n                filters: {\n                  operator: 'PropertyIsEqualTo',\n                  propertyName: 'typeAppareil',\n                  expression: 'Radar photo fixe et surveillance au feu rouge'\n                }\n              },\n              {\n                title: 'Radar feu rouge',\n                enabled: false,\n                color: '255,0,0',\n                tooltip: 'Here a tooltip explaning ...',\n                filters: {\n                  operator: 'PropertyIsEqualTo',\n                  propertyName: 'typeAppareil',\n                  expression: 'Appareil de surveillance au feu rouge'\n                }\n              }\n            ]\n          },\n          {\n            id: 'id2',\n            logical: 'Or',\n            vertical: true,\n            buttons: [\n              {\n                title: 'Montréal & Laval',\n                enabled: false,\n                tooltip: 'Here a tooltip explaning ...',\n                filters: {\n                  logical: 'Or',\n                  filters: [\n                    {\n                      operator: 'PropertyIsEqualTo',\n                      propertyName: 'region',\n                      expression: 'Montréal'\n                    },\n                    {\n                      operator: 'PropertyIsEqualTo',\n                      propertyName: 'region',\n                      expression: 'Laval'\n                    }\n                  ]\n                }\n              },\n              {\n                title: 'Outside Montréal & Laval',\n                enabled: false,\n                tooltip: 'Here a tooltip explaning ...',\n                filters: {\n                  logical: 'And',\n                  filters: [\n                    {\n                      operator: 'PropertyIsNotEqualTo',\n                      propertyName: 'region',\n                      expression: 'Montréal'\n                    },\n                    {\n                      operator: 'PropertyIsNotEqualTo',\n                      propertyName: 'region',\n                      expression: 'Laval'\n                    }\n                  ]\n                }\n              }\n            ]\n          }\n        ]\n      },\n        allowedOperatorsType: OgcFilterOperatorType.Basic\n      },\n      paramsWFS: {\n        featureTypes: 'radars_photos',\n        fieldNameGeometry: 'geometry',\n        maxFeatures: 10000,\n        version: '1.1.0',\n        outputFormat: 'geojson',\n        outputFormatDownload: 'shp'\n      } as WFSDataSourceOptionsParams\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(filterableWMSwithPushButtons)\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'Filterable WMS layers with predefined filters (buttons)',\n            source: dataSource\n          })\n        );\n      });\n\n    // const datasourceWmsWith2Layers: WMSoptions = {\n    //   type: 'wms',\n    //   url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n    //   urlWfs: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n    //   params: {\n    //     layers: 'stations_meteoroutieres,histo_stations_meteoroutieres',\n    //     version: '1.3.0'\n    //   },\n    //   ogcFilters: {\n    //     enabled: true,\n    //     editable: true\n    //   },\n    //   paramsWFS: {\n    //     featureTypes: 'histo_stations_meteoroutieres',\n    //     fieldNameGeometry: 'geometry',\n    //     maxFeatures: 10000,\n    //     version: '1.1.0',\n    //     outputFormat: 'geojson',\n    //     outputFormatDownload: 'shp'\n    //   } as WFSDataSourceOptionsParams\n    // };\n    //\n    // this.dataSourceService\n    //   .createAsyncDataSource(datasourceWmsWith2Layers)\n    //   .subscribe(dataSource => {\n    //     this.map.addLayer(\n    //       this.layerService.createLayer({\n    //         title: 'Layer build from 2 WMS layers',\n    //         source: dataSource\n    //       })\n    //     );\n    //   });\n\n    // const datasourceWms: WMSoptions = {\n    //   type: 'wms',\n    //   url: '/geoserver/wms',\n    //   urlWfs: '/geoserver/wfs',\n    //   params: {\n    //     LAYERS: 'water_areas',\n    //     VERSION: '1.3.0'\n    //   },\n    //   ogcFilters: {\n    //     enabled: true,\n    //     editable: true,\n    //     filters: {\n    //       operator: 'PropertyIsEqualTo',\n    //       propertyName: 'waterway',\n    //       expression: 'riverbank'\n    //     }\n    //   },\n    //   sourceFields: [\n    //     { name: 'waterway', alias: 'Chemin d eau' },\n    //     { name: 'osm_id' },\n    //     { name: 'landuse', values: ['yes', 'no'] }\n    //   ],\n    //   paramsWFS: {\n    //     featureTypes: 'water_areas',\n    //     fieldNameGeometry: 'the_geom',\n    //     maxFeatures: 10000,\n    //     version: '1.1.0',\n    //     outputFormat: 'application/json',\n    //     outputFormatDownload: 'application/vnd.google-earth.kml+xml'\n    //   } as WFSDataSourceOptionsParams\n    // };\n    //\n    // this.dataSourceService\n    //   .createAsyncDataSource(datasourceWms)\n    //   .subscribe(dataSource => {\n    //     this.map.addLayer(\n    //       this.layerService.createLayer({\n    //         title: 'Geoserver water_areas',\n    //         source: dataSource\n    //       })\n    //     );\n    //   });\n  }\n}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Ogc filter</mat-card-title>\n  <mat-card-content>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/ogc-filter\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Layers\">\n    <igo-ogc-filterable-list [map]=\"map\" [layers]=\"map.layers\">\n\n    </igo-ogc-filterable-list>\n  </igo-panel>\n\n</mat-card>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule } from '@igo2/common';\nimport { IgoMapModule, IgoFilterModule } from '@igo2/geo';\n\nimport { AppOgcFilterComponent } from './ogc-filter.component';\nimport { AppOgcFilterRoutingModule } from './ogc-filter-routing.module';\n\n@NgModule({\n  declarations: [AppOgcFilterComponent],\n  imports: [\n    AppOgcFilterRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoFilterModule\n  ],\n  exports: [AppOgcFilterComponent]\n})\nexport class AppOgcFilterModule {}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Spatial filter</mat-card-title>\n  <mat-card-content>\n    <li>npm install --save moment@2.22.2</li>\n    <li>npm install --save @mat-datetimepicker/core@3.0.0-beta.0</li>\n    <li>Dependencies: LanguageService</li>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/spatial-filter\">code of this example</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser\n    [map]=\"map\"\n    [view]=\"view\"\n    igoOverlay igoQuery\n    (query)=\"handleQueryResults($event)\"\n    [queryFeatures]=\"true\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Spatial Filter\">\n    <igo-spatial-filter-type\n      [store]=\"spatialListStore\"\n      [selectedQueryType]=\"queryType\"\n      [zone]=\"zone\"\n      (eventType)=\"getOutputType($event)\"\n      (eventQueryType)=\"getOutputQueryType($event)\"\n      (zoneChange)=\"onZoneChange($event)\">\n    </igo-spatial-filter-type>\n\n    <igo-spatial-filter-item\n      [type]=\"type\"\n      [queryType]=\"queryType\"\n      [map]=\"map\"\n      [zone]=\"zone\"\n      [loading]=\"loading\"\n      [store]=\"store\"\n      [layers]=\"layers\"\n      (radiusEvent)=\"radius = $event\"\n      (freehandControl)=\"freehandDrawIsActive = $event\"\n      (drawZoneEvent)=\"zone = $event\"\n      (itemTypeChange)=\"itemType = $event\"\n      (thematicChange)=\"thematics = $event\"\n      (toggleSearch)=\"getOutputToggleSearch()\"\n      (clearButtonEvent)=\"layers = $event\"\n      (clearSearchEvent)=\"getOutputClearSearch()\">\n    </igo-spatial-filter-item>\n  </igo-panel>\n\n  <igo-panel title=\"Details\">\n    <ng-container *ngIf=\"selectedFeature$ | async as feature\">\n      <igo-feature-details [feature]=\"feature\"></igo-feature-details>\n    </ng-container>\n  </igo-panel>\n\n  <igo-message-center></igo-message-center>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppSpatialFilterComponent } from './spatial-filter.component';\n\nconst routes: Routes = [\n  {\n    path: 'spatial-filter',\n    component: AppSpatialFilterComponent\n  }\n];\n\nexport const AppSpatialFilterRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, Input } from '@angular/core';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  Feature,\n  moveToOlFeatures,\n  FeatureMotion,\n  ClusterDataSource,\n  featureToOl,\n  DataSource,\n  QueryableDataSourceOptions,\n  Layer,\n  SpatialFilterService,\n  SpatialFilterQueryType,\n  SpatialFilterType,\n  SpatialFilterItemType,\n  SpatialFilterThematic\n} from '@igo2/geo';\nimport { MessageService, LanguageService } from '@igo2/core';\nimport { EntityStore } from '@igo2/common';\nimport olFormatGeoJSON from 'ol/format/GeoJSON';\nimport { BehaviorSubject } from 'rxjs';\nimport * as olstyle from 'ol/style';\n\n@Component({\n  selector: 'app-spatial-filter',\n  templateUrl: './spatial-filter.component.html',\n  styleUrls: ['./spatial-filter.component.scss']\n})\nexport class AppSpatialFilterComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  view = {\n    center: [-71.9, 46.9],\n    zoom: 10\n  };\n\n  @Input() type: SpatialFilterType;\n  @Input() itemType: SpatialFilterItemType = SpatialFilterItemType.Address;\n  @Input() freehandDrawIsActive: boolean;\n\n  public layers: Layer[] = [];\n\n  public queryType: SpatialFilterQueryType;\n  public thematics: SpatialFilterThematic[];\n  public zone: Feature;\n  public radius: number;\n\n  public selectedFeature$: BehaviorSubject<Feature> = new BehaviorSubject(\n    undefined\n  );\n\n  private format = new olFormatGeoJSON();\n\n  public store = new EntityStore<Feature>([]); // Store to print results at the end\n\n  public spatialListStore = new EntityStore<Feature>([]);\n\n  public loading = false;\n\n  constructor(\n    private spatialFilterService: SpatialFilterService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    private messageService: MessageService,\n    private languageService: LanguageService\n  ) {\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource,\n            baseLayer: true,\n            visible: true\n          })\n        );\n      });\n  }\n\n  getOutputType(event: SpatialFilterType) {\n    this.type = event;\n    this.queryType = undefined;\n    this.radius = undefined;\n  }\n\n  getOutputQueryType(event: SpatialFilterQueryType) {\n    this.queryType = event;\n    if (this.queryType) {\n      this.loadFilterList();\n    }\n  }\n\n  private loadFilterList() {\n    this.spatialFilterService\n      .loadFilterList(this.queryType)\n      .subscribe((features: Feature[]) => {\n        features.sort((a, b) => {\n          if (a.properties.nom < b.properties.nom) {\n            return -1;\n          }\n          if (a.properties.nom > b.properties.nom) {\n            return 1;\n          }\n          return 0;\n        });\n        this.spatialListStore.clear();\n        this.spatialListStore.load(features);\n      });\n  }\n\n  getOutputToggleSearch() {\n    this.loadThematics();\n  }\n\n  getOutputClearSearch() {\n    this.zone = undefined;\n    this.queryType = undefined;\n  }\n\n  private loadThematics() {\n    this.loading = true;\n    this.tryAddFeaturesToMap([this.zone]);\n    if (!this.thematics) {\n      const theme: SpatialFilterThematic = {\n        name: ''\n      };\n      this.thematics = [theme];\n    }\n    if (this.type === SpatialFilterType.Polygon) {\n      this.radius = undefined;\n    }\n    this.thematics.forEach(thematic => {\n      this.spatialFilterService\n        .loadFilterItem(\n          this.zone,\n          this.itemType,\n          this.queryType,\n          thematic,\n          this.radius\n        )\n        .subscribe((features: Feature[]) => {\n          this.store.insertMany(features);\n          const featuresPoint: Feature[] = [];\n          const featuresLinePoly: Feature[] = [];\n          let idPoint;\n          let idLinePoly;\n          features.forEach(feature => {\n            if (feature.geometry.type === 'Point') {\n              featuresPoint.push(feature);\n              idPoint = feature.meta.id;\n            } else {\n              featuresLinePoly.push(feature);\n              idLinePoly = feature.meta.id;\n            }\n          });\n          this.tryAddPointToMap(featuresPoint, idPoint);\n          this.tryAddLayerToMap(featuresLinePoly, idLinePoly);\n          this.loading = false;\n          if (features.length >= 10000) {\n            this.messageService.alert(\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.maxSizeAlert'\n              ),\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.warning'\n              ),\n              { timeOut: 10000 }\n            );\n          }\n          if (!features.length) {\n            this.messageService.alert(\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.zeroResults'\n              ),\n              this.languageService.translate.instant(\n                'igo.geo.spatialFilter.warning'\n              ),\n              { timeOut: 10000 }\n            );\n          }\n        });\n    });\n  }\n\n  onZoneChange(feature: Feature) {\n    this.zone = feature;\n    if (feature) {\n      this.tryAddFeaturesToMap([feature]);\n      this.zoomToFeatureExtent(feature);\n    }\n  }\n\n  /**\n   * Try to add zone feature to the map overlay\n   */\n  public tryAddFeaturesToMap(features: Feature[]) {\n    let i = 1;\n    for (const feature of features) {\n      if (this.type === SpatialFilterType.Predefined) {\n        for (const layer of this.map.layers) {\n          if (\n            layer.options._internal &&\n            layer.options._internal.code === feature.properties.code\n          ) {\n            return;\n          }\n          if (layer.title.startsWith('Zone')) {\n            this.map.removeLayer(layer);\n          }\n        }\n      }\n      for (const layer of this.map.layers) {\n        if (layer.title.startsWith('Zone')) {\n          i++;\n        }\n      }\n      this.dataSourceService\n        .createAsyncDataSource({\n          type: 'vector',\n          queryable: true\n        } as QueryableDataSourceOptions)\n        .subscribe((dataSource: DataSource) => {\n          const olLayer = this.layerService.createLayer({\n            title: ('Zone ' + i) as string,\n            _internal: {\n              code:\n                this.type === SpatialFilterType.Predefined\n                  ? feature.properties.code\n                  : undefined\n            },\n            source: dataSource,\n            visible: true,\n            style: (_feature, resolution) => {\n              const coordinates = (features[0] as any).coordinates;\n              return new olstyle.Style({\n                image: new olstyle.Circle({\n                  radius: coordinates\n                    ? this.radius /\n                      Math.cos((Math.PI / 180) * coordinates[1]) /\n                      resolution\n                    : undefined,\n                  fill: new olstyle.Fill({\n                    color: 'rgba(200, 200, 20, 0.2)'\n                  }),\n                  stroke: new olstyle.Stroke({\n                    width: 1,\n                    color: 'orange'\n                  })\n                }),\n                stroke: new olstyle.Stroke({\n                  width: 1,\n                  color: 'orange'\n                }),\n                fill: new olstyle.Fill({\n                  color: 'rgba(200, 200, 20, 0.2)'\n                })\n              });\n            }\n          });\n          const featuresOl = features.map(f => {\n            return featureToOl(f, this.map.projection);\n          });\n          dataSource.ol.addFeatures(featuresOl);\n          this.map.addLayer(olLayer);\n          this.layers.push(olLayer);\n        });\n    }\n  }\n\n  /**\n   * Try to point features to the map\n   * Necessary to create clusters\n   */\n  private tryAddPointToMap(features: Feature[], id) {\n    let i = 1;\n    if (features.length >= 1) {\n      if (this.map === undefined) {\n        return;\n      }\n      for (const layer of this.map.layers) {\n        if (layer.title.startsWith(features[0].meta.title)) {\n          i++;\n        }\n      }\n      this.dataSourceService\n        .createAsyncDataSource({\n          type: 'cluster',\n          id,\n          queryable: true,\n          distance: 120,\n          meta: {\n            title: 'Cluster'\n          }\n        } as QueryableDataSourceOptions)\n        .subscribe((dataSource: ClusterDataSource) => {\n          const olLayer = this.layerService.createLayer({\n            title: (features[0].meta.title + ' ' + i) as string,\n            source: dataSource,\n            visible: true,\n            clusterParam: {\n              clusterRanges: [{ minRadius: 1, maxRadius: 5, style: {} }]\n            }\n          });\n          const featuresOl = features.map(feature => {\n            return featureToOl(feature, this.map.projection);\n          });\n          dataSource.ol.source.addFeatures(featuresOl);\n          if (this.map.layers.find(layer => layer.id === olLayer.id)) {\n            this.map.removeLayer(\n              this.map.layers.find(layer => layer.id === olLayer.id)\n            );\n            i = i - 1;\n            olLayer.title = (features[0].meta.title + ' ' + i) as string;\n            olLayer.options.title = olLayer.title;\n          }\n          this.map.addLayer(olLayer);\n          this.layers.push(olLayer);\n        });\n    }\n  }\n\n  /**\n   * Try to add line or polygon features to the map\n   */\n  private tryAddLayerToMap(features: Feature[], id) {\n    let i = 1;\n    if (features.length > 1) {\n      if (this.map === undefined) {\n        return;\n      }\n      for (const layer of this.map.layers) {\n        if (layer.title.startsWith(features[0].meta.title)) {\n          i++;\n        }\n      }\n      this.dataSourceService\n        .createAsyncDataSource({\n          type: 'vector',\n          id,\n          queryable: true\n        } as QueryableDataSourceOptions)\n        .subscribe((dataSource: DataSource) => {\n          const olLayer = this.layerService.createLayer({\n            title: (features[0].meta.title + ' ' + i) as string,\n            source: dataSource,\n            visible: true\n          });\n          const featuresOl = features.map(feature => {\n            return featureToOl(feature, this.map.projection);\n          });\n          dataSource.ol.addFeatures(featuresOl);\n          if (this.map.layers.find(layer => layer.id === olLayer.id)) {\n            this.map.removeLayer(\n              this.map.layers.find(layer => layer.id === olLayer.id)\n            );\n            i = i - 1;\n            olLayer.title = (features[0].meta.title + ' ' + i) as string;\n            olLayer.options.title = olLayer.title;\n          }\n          this.map.addLayer(olLayer);\n          this.layers.push(olLayer);\n        });\n    }\n  }\n\n  zoomToFeatureExtent(feature) {\n    if (feature) {\n      const olFeature = this.format.readFeature(feature, {\n        dataProjection: feature.projection,\n        featureProjection: this.map.projection\n      });\n      moveToOlFeatures(this.map, [olFeature], FeatureMotion.Zoom);\n    }\n  }\n\n  /**\n   * Permit the query action on one item result\n   */\n  handleQueryResults(results) {\n    const features: Feature[] = results.features;\n    let feature;\n    if (features.length) {\n      feature = features[0];\n    }\n    this.selectedFeature$.next(feature);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { IgoPanelModule, IgoFormModule } from '@igo2/common';\nimport { IgoMapModule, IgoFilterModule, IgoQueryModule, IgoFeatureModule, IgoFeatureDetailsModule } from '@igo2/geo';\nimport { IgoMessageModule } from '@igo2/core';\n\nimport { AppSpatialFilterComponent } from './spatial-filter.component';\nimport { AppSpatialFilterRoutingModule } from './spatial-filter-routing.module';\n\n@NgModule({\n  declarations: [AppSpatialFilterComponent],\n  imports: [\n    AppSpatialFilterRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoMessageModule,\n    IgoQueryModule,\n    IgoFeatureModule,\n    IgoFeatureDetailsModule,\n    IgoFilterModule,\n    IgoFormModule,\n    CommonModule\n  ],\n  exports: [AppSpatialFilterComponent]\n})\nexport class AppSpatialFilterModule {}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Workspace</mat-card-title>\n  <mat-card-content>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/geo/workspace\">code of this example</a>\n  </mat-card-content>\n\n  <igo-map-browser [map]=\"map\" [view]=\"view\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n  </igo-map-browser>\n\n  <igo-workspace-selector\n    igoWorkspaceSelector\n    [store]=\"workspaceStore\"\n    [map]=\"map\">\n  </igo-workspace-selector>\n\n  <igo-entity-table-paginator\n    *ngIf=\"selectedWorkspace$ | async as workspace\"\n    [store]=\"workspace.entityStore\"\n    [paginatorOptions]=\"paginatorOptions\"\n    [entitySortChange$]=\"entitySortChange$\"\n    (paginatorChange)=\"paginatorChange($event)\">\n  </igo-entity-table-paginator>\n\n  <ng-container *ngIf=\"selectedWorkspace$ | async as workspace\">\n    <igo-actionbar\n      *ngIf=\"workspace.actionStore\"\n      [store]=\"workspace.actionStore\"\n      [horizontal]=\"true\"\n      [withToggleButton]=\"true\"\n      [withTitle]=\"true\"\n      [mode]=\"actionbarMode\">\n    </igo-actionbar>\n\n    <igo-entity-table\n      *ngIf=\"workspace.entityStore && workspace.meta && workspace.meta.tableTemplate\"\n      class=\"table-compact table-centered\"\n      [paginator]=\"workspacePaginator\"\n      [scrollBehavior]=\"scrollBehavior\"\n      [store]=\"workspace.entityStore\"\n      [template]=\"workspace.meta.tableTemplate\">\n    </igo-entity-table>\n\n    <igo-workspace-widget-outlet [workspace]=\"workspace\"></igo-workspace-widget-outlet>\n\n  </ng-container>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppWorkspaceComponent } from './workspace.component';\n\nconst routes: Routes = [\n  {\n    path: 'workspace',\n    component: AppWorkspaceComponent\n  }\n];\n\nexport const AppWorkspaceRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component, OnInit } from '@angular/core';\n\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { LanguageService } from '@igo2/core';\nimport {\n  ActionbarMode,\n  EntityRecord,\n  EntityTableScrollBehavior,\n  Workspace,\n  WorkspaceStore,\n  EntityTablePaginatorOptions\n} from '@igo2/common';\nimport {\n  IgoMap,\n  DataSourceService,\n  LayerService,\n  WFSDataSourceOptions\n} from '@igo2/geo';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { WorkspaceState } from '@igo2/integration';\n\n@Component({\n  selector: 'app-workspace',\n  templateUrl: './workspace.component.html',\n  styleUrls: ['./workspace.component.scss']\n})\nexport class AppWorkspaceComponent implements OnInit {\n\n  public workspacePaginator: MatPaginator;\n  entitySortChange$: BehaviorSubject<boolean> = new BehaviorSubject(false);\n  public paginatorOptions: EntityTablePaginatorOptions = {\n    pageSize: 5, // Number of items to display on a page.\n    pageSizeOptions: [1, 5, 10, 15, 30, 50, 100], // The set of provided page size options to display to the user.\n    showFirstLastButtons: true // Whether to show the first/last buttons UI to the user.\n  };\n\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-72, 47.2],\n    zoom: 5\n  };\n\n  get workspaceStore(): WorkspaceStore {\n    return this.workspaceState.store;\n  }\n\n  public selectedWorkspace$: Observable<Workspace>;\n\n  public actionbarMode = ActionbarMode.Overlay;\n\n  public scrollBehavior = EntityTableScrollBehavior.Instant;\n\n  constructor(\n    private languageService: LanguageService,\n    private dataSourceService: DataSourceService,\n    private layerService: LayerService,\n    public workspaceState: WorkspaceState,\n  ) {}\n\n  ngOnInit() {\n    this.selectedWorkspace$ = this.workspaceStore.stateView\n      .firstBy$(\n        (record: EntityRecord<Workspace>) => record.state.selected === true\n      )\n      .pipe(\n        map((record: EntityRecord<Workspace>) => {\n          const entity = record === undefined ? undefined : record.entity;\n          if (entity) {\n            // In fact, the download action is not fully functionnal into the igo2-lib demo\n            // The reason why it's has been remove is that this button trigger a tool (importExport)\n            // and this tool is not available in the igo2-lib demo.\n            // This is why it's has been removed frome the actions's list.\n            // Refer to the igo2 demo at https://infra-geo-ouverte.github.io/igo2/\n            entity.actionStore.view.filter((action) => {\n              return action.id !== 'wfsDownload';\n            });\n          }\n          return entity;\n\n        })\n      );\n\n    this.dataSourceService\n      .createAsyncDataSource({\n        type: 'osm'\n      })\n      .subscribe(dataSource => {\n        this.map.addLayer(\n          this.layerService.createLayer({\n            title: 'OSM',\n            source: dataSource\n          })\n        );\n      });\n\n    // const wmsDataSourceOptions = {\n    //   type: 'wms',\n    //   url: 'https://ahocevar.com/geoserver/wms',\n    //   urlWfs: 'https://ahocevar.com/geoserver/wfs',\n    //   params: {\n    //     LAYERS: 'water_areas',\n    //     VERSION: '1.3.0'\n    //   },\n    //   paramsWFS: {\n    //     featureTypes: 'water_areas',\n    //     fieldNameGeometry: 'the_geom',\n    //     maxFeatures: 10000,\n    //     version: '1.1.0',\n    //     outputFormat: 'application/json',\n    //     outputFormatDownload: 'application/vnd.google-earth.kml+xml'\n    //   },\n    //   sourceFields: [\n    //     {name: 'waterway', alias: 'Chemin d eau'},\n    //     {name: 'osm_id'},\n    //     {name: 'landuse'}\n    //   ],\n    //   ogcFilters: {\n    //     enabled: true,\n    //     editable: true\n    //   },\n    //   serverType: 'geoserver'\n    // };\n    //\n    // this.dataSourceService\n    //   .createAsyncDataSource(wmsDataSourceOptions as OgcFilterableDataSourceOptions)\n    //   .subscribe(dataSource => {\n    //     const layer = {\n    //       optionsFromCapabilities: true,\n    //       title: 'WMS Geoserver filterable ',\n    //       visible: true,\n    //       source: dataSource\n    //     };\n    //     this.map.addLayer(this.layerService.createLayer(layer));\n    //   });\n\n    const wfsDataSourceOptions: WFSDataSourceOptions = {\n      type: 'wfs',\n      url: 'https://geoegl.msp.gouv.qc.ca/apis/ws/swtq',\n      params: {\n        featureTypes: 'etablissement_mtq',\n        fieldNameGeometry: 'geometry',\n        version: '2.0.0',\n        outputFormat: 'geojson'\n      },\n      sourceFields: [\n        { name: 'idetablis', alias: 'ID' },\n        { name: 'nometablis', alias: 'Name' },\n        { name: 'typetablis', alias: 'Type' }\n      ]\n    };\n\n    this.dataSourceService\n      .createAsyncDataSource(wfsDataSourceOptions)\n      .subscribe(dataSource => {\n        const layer = {\n          title: 'Simple WFS ',\n          visible: true,\n          source: dataSource\n        };\n        this.map.addLayer(this.layerService.createLayer(layer));\n      });\n  }\n\n  paginatorChange(event: MatPaginator) {\n    this.workspacePaginator = event;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport {\n  IgoActionModule,\n  IgoEntityModule,\n  IgoWorkspaceModule,\n  IgoPanelModule\n} from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoGeoWorkspaceModule\n} from '@igo2/geo';\n\nimport { AppWorkspaceComponent } from './workspace.component';\nimport { AppWorkspaceRoutingModule } from './workspace-routing.module';\n\n@NgModule({\n  declarations: [AppWorkspaceComponent],\n  imports: [\n    CommonModule,\n    AppWorkspaceRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoActionModule,\n    IgoEntityModule,\n    IgoWorkspaceModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoGeoWorkspaceModule\n  ],\n  exports: [AppWorkspaceComponent]\n})\nexport class AppWorkspaceModule {}\n","<mat-card>\n  <mat-card-subtitle>Geo</mat-card-subtitle>\n  <mat-card-title>Context</mat-card-title>\n  <mat-card-content>\n    <p>* Dependencies: LanguageService</p>\n\n    <br>\n    See the <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/app/context/context\">code of this example</a><br>\n    See <a href=\"https://github.com/infra-geo-ouverte/igo2-lib/tree/master/demo/src/contexts\"> contexts</a>\n    <hr>\n  </mat-card-content>\n\n  <igo-map-browser\n    igoMapContext\n    igoLayerContext\n    [map]=\"map\">\n    <igo-zoom-button [map]=\"map\" color=\"primary\"></igo-zoom-button>\n    <igo-geolocate-button [map]=\"map\" color=\"primary\"></igo-geolocate-button>\n    <igo-rotation-button [map]=\"map\" [showIfNoRotation]=\"true\" color=\"primary\"></igo-rotation-button>\n  </igo-map-browser>\n\n  <igo-panel title=\"Contexts list\">\n    <igo-context-list igoContextListBinding [map]=\"map\"></igo-context-list>\n  </igo-panel>\n\n  <igo-panel title=\"Layers\">\n    <igo-layer-list igoLayerListBinding [map]=\"map\">\n      <ng-template #igoLayerItemToolbar let-layer=\"layer\">\n        <igo-metadata-button [layer]=\"layer\"></igo-metadata-button>\n      </ng-template>\n    </igo-layer-list>\n  </igo-panel>\n\n</mat-card>\n","import { Routes, RouterModule } from '@angular/router';\n\n\nimport { AppContextComponent } from './context.component';\n\nconst routes: Routes = [\n  {\n    path: 'context',\n    component: AppContextComponent\n  }\n];\n\nexport const AppContextRoutingModule = RouterModule.forChild(\n  routes\n);\n","import { Component } from '@angular/core';\n\nimport { LanguageService } from '@igo2/core';\nimport { IgoMap, OverlayService, MapService } from '@igo2/geo';\n\n@Component({\n  selector: 'app-context',\n  templateUrl: './context.component.html',\n  styleUrls: ['./context.component.scss']\n})\nexport class AppContextComponent {\n  public map = new IgoMap({\n    controls: {\n      attribution: {\n        collapsed: true\n      }\n    }\n  });\n\n  public view = {\n    center: [-73, 47.2],\n    zoom: 6\n  };\n\n  constructor(\n    private languageService: LanguageService,\n    private mapService: MapService,\n    private overlayService: OverlayService\n  ) {\n    this.mapService.setMap(this.map);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { HttpClientJsonpModule } from '@angular/common/http';\nimport { IgoPanelModule } from '@igo2/common';\nimport {\n  IgoMapModule,\n  IgoLayerModule,\n  IgoMetadataModule,\n  IgoOverlayModule,\n  IgoQueryModule,\n  IgoFeatureModule\n} from '@igo2/geo';\nimport { IgoContextManagerModule } from '@igo2/context';\n\nimport { AppContextComponent } from './context.component';\nimport { AppContextRoutingModule } from './context-routing.module';\n\n@NgModule({\n  declarations: [AppContextComponent],\n  imports: [\n    HttpClientJsonpModule,\n    AppContextRoutingModule,\n    MatCardModule,\n    MatButtonModule,\n    MatIconModule,\n    IgoPanelModule,\n    IgoMapModule,\n    IgoLayerModule,\n    IgoMetadataModule,\n    IgoOverlayModule,\n    IgoQueryModule,\n    IgoFeatureModule,\n    IgoContextManagerModule\n  ],\n  exports: [AppContextComponent]\n})\nexport class AppContextModule {}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [\n  { path: '', redirectTo: '/home', pathMatch: 'full' },\n  { path: '**', redirectTo: '/home' }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { useHash: true })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n","import { MediaMatcher } from '@angular/cdk/layout';\nimport {\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  Renderer2\n} from '@angular/core';\n\nimport { userAgent } from '@igo2/utils';\nimport { version } from '@igo2/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnDestroy {\n  mobileQuery: MediaQueryList;\n\n  public title = 'IGO';\n  public version = version;\n  private themeClass = 'deeppurple-theme';\n  private _mobileQueryListener: () => void;\n\n  constructor(\n    private changeDetectorRef: ChangeDetectorRef,\n    private media: MediaMatcher,\n    private renderer: Renderer2\n  ) {\n    this.mobileQuery = media.matchMedia('(max-width: 600px)');\n    this._mobileQueryListener = () => changeDetectorRef.detectChanges();\n    this.mobileQuery.addEventListener('change', this._mobileQueryListener);\n\n    this.renderer.addClass(document.body, this.themeClass);\n\n    this.detectOldBrowser();\n  }\n\n  ngOnDestroy(): void {\n    this.mobileQuery.removeEventListener('change', this._mobileQueryListener);\n  }\n\n  private detectOldBrowser() {\n    const oldBrowser = userAgent.satisfies({\n      ie: '<11',\n      chrome: '<64',\n      firefox: '<60'\n    });\n\n    if (oldBrowser) {\n      console.log('Very old browser ! ', userAgent.getBrowser());\n    }\n  }\n}\n","<div class=\"example-container\" [class.example-is-mobile]=\"mobileQuery.matches\">\n  <mat-toolbar color=\"primary\" class=\"example-toolbar\">\n    <button mat-icon-button (click)=\"snav.toggle()\"><mat-icon svgIcon=\"menu\"></mat-icon></button>\n    <h1>{{title}}</h1>\n    <h5>{{version.lib}}</h5>\n  </mat-toolbar>\n\n  <mat-sidenav-container class=\"example-sidenav-container\" [style.marginTop.px]=\"mobileQuery.matches ? 56 : 0\">\n    <mat-sidenav #snav opened=\"true\" [mode]=\"mobileQuery.matches ? 'over' : 'side'\" [fixedInViewport]=\"mobileQuery.matches\" fixedTopGap=\"56\">\n      <mat-nav-list>\n        <a mat-list-item routerLink=\".\">Home</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"activity\">Activity</a>\n        <a mat-list-item routerLink=\"config\">Config</a>\n        <a mat-list-item routerLink=\"language\">Language</a>\n        <a mat-list-item routerLink=\"media\">Media</a>\n        <a mat-list-item routerLink=\"message\">Message</a>\n        <a mat-list-item routerLink=\"request\">Request</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"auth-form\">Authentification</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"action\">Action</a>\n        <a mat-list-item routerLink=\"dynamic-component\">Dynamic Component</a>\n        <a mat-list-item routerLink=\"entity-table\">Entity Table</a>\n        <a mat-list-item routerLink=\"entity-selector\">Entity Selector</a>\n        <a mat-list-item routerLink=\"form\">Form</a>\n        <a mat-list-item routerLink=\"table\">Table</a>\n        <a mat-list-item routerLink=\"tool\">Tool</a>\n        <a mat-list-item routerLink=\"widget\">Widget</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"simple-map\">Simple map</a>\n        <a mat-list-item routerLink=\"layer\">Layer</a>\n        <a mat-list-item routerLink=\"legend\">Legend</a>\n        <a mat-list-item routerLink=\"overlay\">Overlay</a>\n        <a mat-list-item routerLink=\"geometry\">Geometry</a>\n        <a mat-list-item routerLink=\"feature\">Feature</a>\n        <a mat-list-item routerLink=\"measure\">Measure</a>\n        <a mat-list-item routerLink=\"query\">Query</a>\n        <a mat-list-item routerLink=\"catalog\">Catalog</a>\n        <a mat-list-item routerLink=\"search\">Search</a>\n        <a mat-list-item routerLink=\"print\">Print</a>\n        <a mat-list-item routerLink=\"import-export\">Import/Export</a>\n        <a mat-list-item routerLink=\"directions\">Directions</a>\n        <a mat-list-item routerLink=\"time-filter\">Time filter</a>\n        <a mat-list-item routerLink=\"ogc-filter\">OGC filter</a>\n        <a mat-list-item routerLink=\"spatial-filter\">Spatial filter</a>\n        <a mat-list-item routerLink=\"workspace\">Workspace</a>\n\n        <hr>\n\n        <a mat-list-item routerLink=\"context\">Context</a>\n\n      </mat-nav-list>\n    </mat-sidenav>\n\n    <mat-sidenav-content>\n      <router-outlet></router-outlet>\n    </mat-sidenav-content>\n\n  </mat-sidenav-container>\n</div>\n","import { BrowserModule, DomSanitizer } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\nimport { HammerModule } from '@angular/platform-browser';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconRegistry, MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { AppHomeModule } from './core/home/home.module';\nimport { AppActivityModule } from './core/activity/activity.module';\nimport { AppConfigModule } from './core/config/config.module';\nimport { AppLanguageModule } from './core/language/language.module';\nimport { AppMediaModule } from './core/media/media.module';\nimport { AppMessageModule } from './core/message/message.module';\nimport { AppRequestModule } from './core/request/request.module';\n\nimport { AppActionModule } from './common/action/action.module';\nimport { AppDynamicComponentModule } from './common/dynamic-component/dynamic-component.module';\nimport { AppEntityTableModule } from './common/entity-table/entity-table.module';\nimport { AppEntitySelectorModule } from './common/entity-selector/entity-selector.module';\nimport { AppFormModule } from './common/form/form.module';\nimport { AppTableModule } from './common/table/table.module';\nimport { AppToolModule } from './common/tool/tool.module';\nimport { AppWidgetModule } from './common/widget/widget.module';\n\nimport { AppAuthFormModule } from './auth/auth-form/auth-form.module';\n\nimport { AppSimpleMapModule } from './geo/simple-map/simple-map.module';\nimport { AppLayerModule } from './geo/layer/layer.module';\nimport { AppLegendModule } from './geo/legend/legend.module';\nimport { AppOverlayModule } from './geo/overlay/overlay.module';\nimport { AppGeometryModule } from './geo/geometry/geometry.module';\nimport { AppFeatureModule } from './geo/feature/feature.module';\nimport { AppMeasureModule } from './geo/measure/measure.module';\nimport { AppQueryModule } from './geo/query/query.module';\nimport { AppCatalogModule } from './geo/catalog/catalog.module';\nimport { AppSearchModule } from './geo/search/search.module';\nimport { AppPrintModule } from './geo/print/print.module';\nimport { AppImportExport } from './geo/import-export/import-export.module';\nimport { AppDirectionsModule } from './geo/directions/directions.module';\nimport { AppTimeFilterModule } from './geo/time-filter/time-filter.module';\nimport { AppOgcFilterModule } from './geo/ogc-filter/ogc-filter.module';\nimport { AppSpatialFilterModule } from './geo/spatial-filter/spatial-filter.module';\nimport { AppWorkspaceModule } from './geo/workspace/workspace.module';\n\nimport { AppContextModule } from './context/context/context.module';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    MatSidenavModule,\n    MatToolbarModule,\n    MatButtonModule,\n    MatIconModule,\n    MatListModule,\n\n    AppHomeModule,\n    AppActivityModule,\n    AppConfigModule,\n    AppLanguageModule,\n    AppMediaModule,\n    AppMessageModule,\n    AppRequestModule,\n\n    AppActionModule,\n    AppDynamicComponentModule,\n    AppEntityTableModule,\n    AppEntitySelectorModule,\n    AppFormModule,\n    AppTableModule,\n    AppToolModule,\n    AppWidgetModule,\n\n    AppAuthFormModule,\n\n    AppSimpleMapModule,\n    AppLayerModule,\n    AppLegendModule,\n    AppOverlayModule,\n    AppGeometryModule,\n    AppFeatureModule,\n    AppMeasureModule,\n    AppQueryModule,\n    AppCatalogModule,\n    AppSearchModule,\n    AppPrintModule,\n    AppImportExport,\n    AppDirectionsModule,\n    AppTimeFilterModule,\n    AppOgcFilterModule,\n    AppSpatialFilterModule,\n    AppWorkspaceModule,\n\n    AppContextModule,\n\n    AppRoutingModule,\n\n    HammerModule\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {\n  constructor(matIconRegistry: MatIconRegistry, domSanitizer: DomSanitizer) {\n    matIconRegistry.addSvgIconSet(\n      domSanitizer.bypassSecurityTrustResourceUrl(\n        './assets/igo2/core/icons/mdi.svg'\n      )\n    );\n  }\n}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport 'hammerjs';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"U9wj\";","var map = {\n\t\"./en.auth.json\": \"I3Mt\",\n\t\"./en.common.json\": \"Gt+p\",\n\t\"./en.context.json\": \"u54H\",\n\t\"./en.core.json\": \"4/ac\",\n\t\"./en.geo.json\": \"et1m\",\n\t\"./en.integration.json\": \"rFtL\",\n\t\"./en.json\": \"kE/h\",\n\t\"./fr.auth.json\": \"rseE\",\n\t\"./fr.common.json\": \"DKST\",\n\t\"./fr.context.json\": \"gAOA\",\n\t\"./fr.core.json\": \"Vrpm\",\n\t\"./fr.geo.json\": \"BSSV\",\n\t\"./fr.integration.json\": \"y2X8\",\n\t\"./fr.json\": \"/2bg\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"uzb9\";"]}